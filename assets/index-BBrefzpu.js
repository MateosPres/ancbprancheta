(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function V6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oE={exports:{}},e0={};var nA;function y7(){if(nA)return e0;nA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:o}}return e0.Fragment=t,e0.jsx=e,e0.jsxs=e,e0}var iA;function v7(){return iA||(iA=1,oE.exports=y7()),oE.exports}var Ct=v7(),lE={exports:{}},me={};var sA;function E7(){if(sA)return me;sA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function N(F){return F===null||typeof F!="object"?null:(F=A&&F[A]||F["@@iterator"],typeof F=="function"?F:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,U={};function G(F,ft,At){this.props=F,this.context=ft,this.refs=U,this.updater=At||D}G.prototype.isReactComponent={},G.prototype.setState=function(F,ft){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ft,"setState")},G.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function j(){}j.prototype=G.prototype;function X(F,ft,At){this.props=F,this.context=ft,this.refs=U,this.updater=At||D}var Z=X.prototype=new j;Z.constructor=X,L(Z,G.prototype),Z.isPureReactComponent=!0;var gt=Array.isArray;function lt(){}var V={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function k(F,ft,At){var Ht=At.ref;return{$$typeof:n,type:F,key:ft,ref:Ht!==void 0?Ht:null,props:At}}function q(F,ft){return k(F.type,ft,F.props)}function H(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function K(F){var ft={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(At){return ft[At]})}var z=/\/+/g;function Ft(F,ft){return typeof F=="object"&&F!==null&&F.key!=null?K(""+F.key):ft.toString(36)}function Ut(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(lt,lt):(F.status="pending",F.then(function(ft){F.status==="pending"&&(F.status="fulfilled",F.value=ft)},function(ft){F.status==="pending"&&(F.status="rejected",F.reason=ft)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function W(F,ft,At,Ht,ee){var ae=typeof F;(ae==="undefined"||ae==="boolean")&&(F=null);var Te=!1;if(F===null)Te=!0;else switch(ae){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(F.$$typeof){case n:case t:Te=!0;break;case E:return Te=F._init,W(Te(F._payload),ft,At,Ht,ee)}}if(Te)return ee=ee(F),Te=Ht===""?"."+Ft(F,0):Ht,gt(ee)?(At="",Te!=null&&(At=Te.replace(z,"$&/")+"/"),W(ee,ft,At,"",function(Nr){return Nr})):ee!=null&&(H(ee)&&(ee=q(ee,At+(ee.key==null||F&&F.key===ee.key?"":(""+ee.key).replace(z,"$&/")+"/")+Te)),ft.push(ee)),1;Te=0;var vn=Ht===""?".":Ht+":";if(gt(F))for(var Ve=0;Ve<F.length;Ve++)Ht=F[Ve],ae=vn+Ft(Ht,Ve),Te+=W(Ht,ft,At,ae,ee);else if(Ve=N(F),typeof Ve=="function")for(F=Ve.call(F),Ve=0;!(Ht=F.next()).done;)Ht=Ht.value,ae=vn+Ft(Ht,Ve++),Te+=W(Ht,ft,At,ae,ee);else if(ae==="object"){if(typeof F.then=="function")return W(Ut(F),ft,At,Ht,ee);throw ft=String(F),Error("Objects are not valid as a React child (found: "+(ft==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ft)+"). If you meant to render a collection of children, use an array instead.")}return Te}function St(F,ft,At){if(F==null)return F;var Ht=[],ee=0;return W(F,Ht,"","",function(ae){return ft.call(At,ae,ee++)}),Ht}function Et(F){if(F._status===-1){var ft=F._result;ft=ft(),ft.then(function(At){(F._status===0||F._status===-1)&&(F._status=1,F._result=At)},function(At){(F._status===0||F._status===-1)&&(F._status=2,F._result=At)}),F._status===-1&&(F._status=0,F._result=ft)}if(F._status===1)return F._result.default;throw F._result}var zt=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ft=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ft))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Qt={map:St,forEach:function(F,ft,At){St(F,function(){ft.apply(this,arguments)},At)},count:function(F){var ft=0;return St(F,function(){ft++}),ft},toArray:function(F){return St(F,function(ft){return ft})||[]},only:function(F){if(!H(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return me.Activity=b,me.Children=Qt,me.Component=G,me.Fragment=e,me.Profiler=s,me.PureComponent=X,me.StrictMode=i,me.Suspense=m,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,me.__COMPILER_RUNTIME={__proto__:null,c:function(F){return V.H.useMemoCache(F)}},me.cache=function(F){return function(){return F.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(F,ft,At){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Ht=L({},F.props),ee=F.key;if(ft!=null)for(ae in ft.key!==void 0&&(ee=""+ft.key),ft)!M.call(ft,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ft.ref===void 0||(Ht[ae]=ft[ae]);var ae=arguments.length-2;if(ae===1)Ht.children=At;else if(1<ae){for(var Te=Array(ae),vn=0;vn<ae;vn++)Te[vn]=arguments[vn+2];Ht.children=Te}return k(F.type,ee,Ht)},me.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},me.createElement=function(F,ft,At){var Ht,ee={},ae=null;if(ft!=null)for(Ht in ft.key!==void 0&&(ae=""+ft.key),ft)M.call(ft,Ht)&&Ht!=="key"&&Ht!=="__self"&&Ht!=="__source"&&(ee[Ht]=ft[Ht]);var Te=arguments.length-2;if(Te===1)ee.children=At;else if(1<Te){for(var vn=Array(Te),Ve=0;Ve<Te;Ve++)vn[Ve]=arguments[Ve+2];ee.children=vn}if(F&&F.defaultProps)for(Ht in Te=F.defaultProps,Te)ee[Ht]===void 0&&(ee[Ht]=Te[Ht]);return k(F,ae,ee)},me.createRef=function(){return{current:null}},me.forwardRef=function(F){return{$$typeof:f,render:F}},me.isValidElement=H,me.lazy=function(F){return{$$typeof:E,_payload:{_status:-1,_result:F},_init:Et}},me.memo=function(F,ft){return{$$typeof:g,type:F,compare:ft===void 0?null:ft}},me.startTransition=function(F){var ft=V.T,At={};V.T=At;try{var Ht=F(),ee=V.S;ee!==null&&ee(At,Ht),typeof Ht=="object"&&Ht!==null&&typeof Ht.then=="function"&&Ht.then(lt,zt)}catch(ae){zt(ae)}finally{ft!==null&&At.types!==null&&(ft.types=At.types),V.T=ft}},me.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},me.use=function(F){return V.H.use(F)},me.useActionState=function(F,ft,At){return V.H.useActionState(F,ft,At)},me.useCallback=function(F,ft){return V.H.useCallback(F,ft)},me.useContext=function(F){return V.H.useContext(F)},me.useDebugValue=function(){},me.useDeferredValue=function(F,ft){return V.H.useDeferredValue(F,ft)},me.useEffect=function(F,ft){return V.H.useEffect(F,ft)},me.useEffectEvent=function(F){return V.H.useEffectEvent(F)},me.useId=function(){return V.H.useId()},me.useImperativeHandle=function(F,ft,At){return V.H.useImperativeHandle(F,ft,At)},me.useInsertionEffect=function(F,ft){return V.H.useInsertionEffect(F,ft)},me.useLayoutEffect=function(F,ft){return V.H.useLayoutEffect(F,ft)},me.useMemo=function(F,ft){return V.H.useMemo(F,ft)},me.useOptimistic=function(F,ft){return V.H.useOptimistic(F,ft)},me.useReducer=function(F,ft,At){return V.H.useReducer(F,ft,At)},me.useRef=function(F){return V.H.useRef(F)},me.useState=function(F){return V.H.useState(F)},me.useSyncExternalStore=function(F,ft,At){return V.H.useSyncExternalStore(F,ft,At)},me.useTransition=function(){return V.H.useTransition()},me.version="19.2.4",me}var aA;function Ov(){return aA||(aA=1,lE.exports=E7()),lE.exports}var he=Ov();const Ji=V6(he);var uE={exports:{}},n0={},cE={exports:{}},hE={};var rA;function T7(){return rA||(rA=1,(function(n){function t(W,St){var Et=W.length;W.push(St);t:for(;0<Et;){var zt=Et-1>>>1,Qt=W[zt];if(0<s(Qt,St))W[zt]=St,W[Et]=Qt,Et=zt;else break t}}function e(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var St=W[0],Et=W.pop();if(Et!==St){W[0]=Et;t:for(var zt=0,Qt=W.length,F=Qt>>>1;zt<F;){var ft=2*(zt+1)-1,At=W[ft],Ht=ft+1,ee=W[Ht];if(0>s(At,Et))Ht<Qt&&0>s(ee,At)?(W[zt]=ee,W[Ht]=Et,zt=Ht):(W[zt]=At,W[ft]=Et,zt=ft);else if(Ht<Qt&&0>s(ee,Et))W[zt]=ee,W[Ht]=Et,zt=Ht;else break t}}return St}function s(W,St){var Et=W.sortIndex-St.sortIndex;return Et!==0?Et:W.id-St.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],E=1,b=null,A=3,N=!1,D=!1,L=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function Z(W){for(var St=e(g);St!==null;){if(St.callback===null)i(g);else if(St.startTime<=W)i(g),St.sortIndex=St.expirationTime,t(m,St);else break;St=e(g)}}function gt(W){if(L=!1,Z(W),!D)if(e(m)!==null)D=!0,lt||(lt=!0,K());else{var St=e(g);St!==null&&Ut(gt,St.startTime-W)}}var lt=!1,V=-1,M=5,k=-1;function q(){return U?!0:!(n.unstable_now()-k<M)}function H(){if(U=!1,lt){var W=n.unstable_now();k=W;var St=!0;try{t:{D=!1,L&&(L=!1,j(V),V=-1),N=!0;var Et=A;try{e:{for(Z(W),b=e(m);b!==null&&!(b.expirationTime>W&&q());){var zt=b.callback;if(typeof zt=="function"){b.callback=null,A=b.priorityLevel;var Qt=zt(b.expirationTime<=W);if(W=n.unstable_now(),typeof Qt=="function"){b.callback=Qt,Z(W),St=!0;break e}b===e(m)&&i(m),Z(W)}else i(m);b=e(m)}if(b!==null)St=!0;else{var F=e(g);F!==null&&Ut(gt,F.startTime-W),St=!1}}break t}finally{b=null,A=Et,N=!1}St=void 0}}finally{St?K():lt=!1}}}var K;if(typeof X=="function")K=function(){X(H)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Ft=z.port2;z.port1.onmessage=H,K=function(){Ft.postMessage(null)}}else K=function(){G(H,0)};function Ut(W,St){V=G(function(){W(n.unstable_now())},St)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(W){switch(A){case 1:case 2:case 3:var St=3;break;default:St=A}var Et=A;A=St;try{return W()}finally{A=Et}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(W,St){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Et=A;A=W;try{return St()}finally{A=Et}},n.unstable_scheduleCallback=function(W,St,Et){var zt=n.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?zt+Et:zt):Et=zt,W){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=Et+Qt,W={id:E++,callback:St,priorityLevel:W,startTime:Et,expirationTime:Qt,sortIndex:-1},Et>zt?(W.sortIndex=Et,t(g,W),e(m)===null&&W===e(g)&&(L?(j(V),V=-1):L=!0,Ut(gt,Et-zt))):(W.sortIndex=Qt,t(m,W),D||N||(D=!0,lt||(lt=!0,K()))),W},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(W){var St=A;return function(){var Et=A;A=St;try{return W.apply(this,arguments)}finally{A=Et}}}})(hE)),hE}var oA;function aS(){return oA||(oA=1,cE.exports=T7()),cE.exports}var fE={exports:{}},Ks={};var lA;function S7(){if(lA)return Ks;lA=1;var n=Ov();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:m,containerInfo:g,implementation:E}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ks.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ks.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(m,g,null,E)},Ks.flushSync=function(m){var g=c.T,E=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=E,i.d.f()}},Ks.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Ks.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Ks.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:N}):E==="script"&&i.d.X(m,{crossOrigin:b,integrity:A,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ks.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Ks.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin);i.d.L(m,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ks.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Ks.requestFormReset=function(m){i.d.r(m)},Ks.unstable_batchedUpdates=function(m,g){return m(g)},Ks.useFormState=function(m,g,E){return c.H.useFormState(m,g,E)},Ks.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ks.version="19.2.4",Ks}var uA;function b7(){if(uA)return fE.exports;uA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),fE.exports=S7(),fE.exports}var cA;function A7(){if(cA)return n0;cA=1;var n=aS(),t=Ov(),e=b7();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var r=a,h=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(h=r.return),a=r.return;while(a)}return r.tag===3?h:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function f(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function m(a){if(o(a)!==a)throw Error(i(188))}function g(a){var r=a.alternate;if(!r){if(r=o(a),r===null)throw Error(i(188));return r!==a?null:a}for(var h=a,d=r;;){var v=h.return;if(v===null)break;var T=v.alternate;if(T===null){if(d=v.return,d!==null){h=d;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===h)return m(v),a;if(T===d)return m(v),r;T=T.sibling}throw Error(i(188))}if(h.return!==d.return)h=v,d=T;else{for(var C=!1,O=v.child;O;){if(O===h){C=!0,h=v,d=T;break}if(O===d){C=!0,d=v,h=T;break}O=O.sibling}if(!C){for(O=T.child;O;){if(O===h){C=!0,h=T,d=v;break}if(O===d){C=!0,d=T,h=v;break}O=O.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==d)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:r}function E(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=E(a),r!==null)return r;a=a.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),X=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function K(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var z=Symbol.for("react.client.reference");function Ft(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case L:return"Fragment";case G:return"Profiler";case U:return"StrictMode";case gt:return"Suspense";case lt:return"SuspenseList";case k:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case D:return"Portal";case X:return a.displayName||"Context";case j:return(a._context.displayName||"Context")+".Consumer";case Z:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return r=a.displayName||null,r!==null?r:Ft(a.type)||"Memo";case M:r=a._payload,a=a._init;try{return Ft(a(r))}catch{}}return null}var Ut=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et={pending:!1,data:null,method:null,action:null},zt=[],Qt=-1;function F(a){return{current:a}}function ft(a){0>Qt||(a.current=zt[Qt],zt[Qt]=null,Qt--)}function At(a,r){Qt++,zt[Qt]=a.current,a.current=r}var Ht=F(null),ee=F(null),ae=F(null),Te=F(null);function vn(a,r){switch(At(ae,r),At(ee,a),At(Ht,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?w4(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=w4(r),a=R4(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ft(Ht),At(Ht,a)}function Ve(){ft(Ht),ft(ee),ft(ae)}function Nr(a){a.memoizedState!==null&&At(Te,a);var r=Ht.current,h=R4(r,a.type);r!==h&&(At(ee,a),At(Ht,h))}function To(a){ee.current===a&&(ft(Ht),ft(ee)),Te.current===a&&(ft(Te),Wg._currentValue=Et)}var Os,cs;function hs(a){if(Os===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);Os=r&&r[1]||"",cs=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Os+a+cs}var ir=!1;function es(a,r){if(!a||ir)return"";ir=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(mt){var ot=mt}Reflect.construct(a,[],vt)}else{try{vt.call()}catch(mt){ot=mt}a.call(vt.prototype)}}else{try{throw Error()}catch(mt){ot=mt}(vt=a())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(mt){if(mt&&ot&&typeof mt.stack=="string")return[mt.stack,ot.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),C=T[0],O=T[1];if(C&&O){var Y=C.split(`
`),at=O.split(`
`);for(v=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;v<at.length&&!at[v].includes("DetermineComponentFrameRoot");)v++;if(d===Y.length||v===at.length)for(d=Y.length-1,v=at.length-1;1<=d&&0<=v&&Y[d]!==at[v];)v--;for(;1<=d&&0<=v;d--,v--)if(Y[d]!==at[v]){if(d!==1||v!==1)do if(d--,v--,0>v||Y[d]!==at[v]){var pt=`
`+Y[d].replace(" at new "," at ");return a.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",a.displayName)),pt}while(1<=d&&0<=v);break}}}finally{ir=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?hs(h):""}function fs(a,r){switch(a.tag){case 26:case 27:case 5:return hs(a.type);case 16:return hs("Lazy");case 13:return a.child!==r&&r!==null?hs("Suspense Fallback"):hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return es(a.type,!1);case 11:return es(a.type.render,!1);case 1:return es(a.type,!0);case 31:return hs("Activity");default:return""}}function Dr(a){try{var r="",h=null;do r+=fs(a,h),h=a,a=a.return;while(a);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var En=Object.prototype.hasOwnProperty,ln=n.unstable_scheduleCallback,Zn=n.unstable_cancelCallback,Ci=n.unstable_shouldYield,en=n.unstable_requestPaint,pn=n.unstable_now,$s=n.unstable_getCurrentPriorityLevel,Aa=n.unstable_ImmediatePriority,ds=n.unstable_UserBlockingPriority,ta=n.unstable_NormalPriority,yt=n.unstable_LowPriority,Ot=n.unstable_IdlePriority,ne=n.log,Ge=n.unstable_setDisableYieldValue,ke=null,Ce=null;function yi(a){if(typeof ne=="function"&&Ge(a),Ce&&typeof Ce.setStrictMode=="function")try{Ce.setStrictMode(ke,a)}catch{}}var xn=Math.clz32?Math.clz32:au,ms=Math.log,el=Math.LN2;function au(a){return a>>>=0,a===0?32:31-(ms(a)/el|0)|0}var xr=256,So=262144,On=4194304;function sr(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ea(a,r,h){var d=a.pendingLanes;if(d===0)return 0;var v=0,T=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var O=d&134217727;return O!==0?(d=O&~T,d!==0?v=sr(d):(C&=O,C!==0?v=sr(C):h||(h=O&~a,h!==0&&(v=sr(h))))):(O=d&~T,O!==0?v=sr(O):C!==0?v=sr(C):h||(h=d&~a,h!==0&&(v=sr(h)))),v===0?0:r!==0&&r!==v&&(r&T)===0&&(T=v&-v,h=r&-r,T>=h||T===32&&(h&4194048)!==0)?r:v}function wa(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Md(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(){var a=On;return On<<=1,(On&62914560)===0&&(On=4194304),a}function ar(a){for(var r=[],h=0;31>h;h++)r.push(a);return r}function nl(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function dc(a,r,h,d,v,T){var C=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var O=a.entanglements,Y=a.expirationTimes,at=a.hiddenUpdates;for(h=C&~h;0<h;){var pt=31-xn(h),vt=1<<pt;O[pt]=0,Y[pt]=-1;var ot=at[pt];if(ot!==null)for(at[pt]=null,pt=0;pt<ot.length;pt++){var mt=ot[pt];mt!==null&&(mt.lane&=-536870913)}h&=~vt}d!==0&&rr(a,d,0),T!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=T&~(C&~r))}function rr(a,r,h){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-xn(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function il(a,r){var h=a.entangledLanes|=r;for(a=a.entanglements;h;){var d=31-xn(h),v=1<<d;v&r|a[d]&r&&(a[d]|=r),h&=~v}}function mc(a,r){var h=r&-r;return h=(h&42)!==0?1:Mr(h),(h&(a.suspendedLanes|r))!==0?0:h}function Mr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ra(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pc(){var a=St.p;return a!==0?a:(a=window.event,a===void 0?32:X4(a.type))}function qi(a,r){var h=St.p;try{return St.p=a,r()}finally{St.p=h}}var Ca=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Ca,ci="__reactProps$"+Ca,Ia="__reactContainer$"+Ca,na="__reactEvents$"+Ca,Pr="__reactListeners$"+Ca,sl="__reactHandles$"+Ca,gc="__reactResources$"+Ca,Ms="__reactMarker$"+Ca;function Vr(a){delete a[Mn],delete a[ci],delete a[na],delete a[Pr],delete a[sl]}function or(a){var r=a[Mn];if(r)return r;for(var h=a.parentNode;h;){if(r=h[Ia]||h[Mn]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(a=M4(a);a!==null;){if(h=a[Mn])return h;a=M4(a)}return r}a=h,h=a.parentNode}return null}function ia(a){if(a=a[Mn]||a[Ia]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function Ps(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function Na(a){var r=a[gc];return r||(r=a[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function qn(a){a[Ms]=!0}var Da=new Set,ru={};function lr(a,r){Fi(a,r),Fi(a+"Capture",r)}function Fi(a,r){for(ru[a]=r,a=0;a<r.length;a++)Da.add(r[a])}var ji=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},un={};function _c(a){return En.call(un,a)?!0:En.call(al,a)?!1:ji.test(a)?un[a]=!0:(al[a]=!0,!1)}function rl(a,r,h){if(_c(r))if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+h)}}function Vs(a,r,h){if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+h)}}function $n(a,r,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(r,h,""+d)}}function Ii(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function kr(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ou(a,r,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,T=d.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return v.call(this)},set:function(C){h=""+C,T.call(this,C)}}),Object.defineProperty(a,r,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function je(a){if(!a._valueTracker){var r=kr(a)?"checked":"value";a._valueTracker=ou(a,r,""+a[r])}}function ti(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var h=r.getValue(),d="";return a&&(d=kr(a)?a.checked?"true":"false":a.value),a=d,a!==h?(r.setValue(a),!0):!1}function Ke(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Lr=/[\n"\\]/g;function Ni(a){return a.replace(Lr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function bo(a,r,h,d,v,T,C,O){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),r!=null?C==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+Ii(r)):a.value!==""+Ii(r)&&(a.value=""+Ii(r)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),r!=null?sa(a,C,Ii(r)):h!=null?sa(a,C,Ii(h)):d!=null&&a.removeAttribute("value"),v==null&&T!=null&&(a.defaultChecked=!!T),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+Ii(O):a.removeAttribute("name")}function yc(a,r,h,d,v,T,C,O){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),r!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){je(a);return}h=h!=null?""+Ii(h):"",r=r!=null?""+Ii(r):h,O||r===a.value||(a.value=r),a.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=O?a.checked:!!d,a.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C),je(a)}function sa(a,r,h){r==="number"&&Ke(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function ur(a,r,h,d){if(a=a.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=r.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&d&&(a[h].defaultSelected=!0)}else{for(h=""+Ii(h),r=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}r!==null||a[v].disabled||(r=a[v])}r!==null&&(r.selected=!0)}}function vc(a,r,h){if(r!=null&&(r=""+Ii(r),r!==a.value&&(a.value=r),h==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=h!=null?""+Ii(h):""}function Ur(a,r,h,d){if(r==null){if(d!=null){if(h!=null)throw Error(i(92));if(Ut(d)){if(1<d.length)throw Error(i(93));d=d[0]}h=d}h==null&&(h=""),r=h}h=Ii(r),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),je(a)}function ps(a,r){if(r){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=r;return}}a.textContent=r}var Zh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(a,r,h){var d=r.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,h):typeof h!="number"||h===0||Zh.has(r)?r==="float"?a.cssFloat=h:a[r]=(""+h).trim():a[r]=h+"px"}function Tc(a,r,h){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&h[v]!==d&&Ec(a,v,d)}else for(var T in r)r.hasOwnProperty(T)&&Ec(a,T,r[T])}function lu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uu(a){return zr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function cr(){}var Sc=null;function aa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ao=null,xa=null;function ol(a){var r=ia(a);if(r&&(a=r.stateNode)){var h=a[ci]||null;t:switch(a=r.stateNode,r.type){case"input":if(bo(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),r=h.name,h.type==="radio"&&r!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ni(""+r)+'"][type="radio"]'),r=0;r<h.length;r++){var d=h[r];if(d!==a&&d.form===a.form){var v=d[ci]||null;if(!v)throw Error(i(90));bo(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<h.length;r++)d=h[r],d.form===a.form&&ti(d)}break t;case"textarea":vc(a,h.value,h.defaultValue);break t;case"select":r=h.value,r!=null&&ur(a,!!h.multiple,r,!1)}}}var cu=!1;function wo(a,r,h){if(cu)return a(r,h);cu=!0;try{var d=a(r);return d}finally{if(cu=!1,(Ao!==null||xa!==null)&&(Tr(),Ao&&(r=Ao,a=xa,xa=Ao=null,ol(r),a)))for(r=0;r<a.length;r++)ol(a[r])}}function Oa(a,r){var h=a.stateNode;if(h===null)return null;var d=h[ci]||null;if(d===null)return null;h=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,r,typeof h));return h}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=!1;if(ra)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){hu=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{hu=!1}var gs=null,bc=null,Br=null;function ll(){if(Br)return Br;var a,r=bc,h=r.length,d,v="value"in gs?gs.value:gs.textContent,T=v.length;for(a=0;a<h&&r[a]===v[a];a++);var C=h-a;for(d=1;d<=C&&r[h-d]===v[T-d];d++);return Br=v.slice(a,1<d?1-d:void 0)}function ul(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function hr(){return!0}function fr(){return!1}function Di(a){function r(h,d,v,T,C){this._reactName=h,this._targetInst=v,this.type=d,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(h=a[O],this[O]=h?h(T):T[O]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?hr:fr,this.isPropagationStopped=fr,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),r}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=Di(Gr),Ro=b({},Gr,{view:0,detail:0}),Ac=Di(Ro),Hr,fu,mr,cl=b({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==mr&&(mr&&a.type==="mousemove"?(Hr=a.screenX-mr.screenX,fu=a.screenY-mr.screenY):fu=Hr=0,mr=a),Hr)},movementY:function(a){return"movementY"in a?a.movementY:fu}}),wc=Di(cl),hl=b({},cl,{dataTransfer:0}),tf=Di(hl),Rc=b({},Ro,{relatedTarget:0}),fl=Di(Rc),Cc=b({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pd=Di(Cc),Ic=b({},Gr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ef=Di(Ic),dl=b({},Gr,{data:0}),Ma=Di(dl),du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=sf[a])?!!r[a]:!1}function Co(){return Nc}var ns=b({},Ro,{key:function(a){if(a.key){var r=du[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=ul(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?nf[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(a){return a.type==="keypress"?ul(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ul(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),qr=Di(ns),mu=b({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fr=Di(mu),_=b({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),R=Di(_),I=b({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=Di(I),$=b({},cl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ut=Di($),Vt=b({},Gr,{newState:0,oldState:0}),ue=Di(Vt),Fn=[9,13,27,32],De=ra&&"CompositionEvent"in window,gn=null;ra&&"documentMode"in document&&(gn=document.documentMode);var _s=ra&&"TextEvent"in window&&!gn,pr=ra&&(!De||gn&&8<gn&&11>=gn),gr=" ",ks=!1;function Io(a,r){switch(a){case"keyup":return Fn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var gu=!1;function Y_(a,r){switch(a){case"compositionend":return pu(r);case"keypress":return r.which!==32?null:(ks=!0,gr);case"textInput":return a=r.data,a===gr&&ks?null:a;default:return null}}function Hp(a,r){if(gu)return a==="compositionend"||!De&&Io(a,r)?(a=ll(),Br=bc=gs=null,gu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pr&&r.locale!=="ko"?null:r.data;default:return null}}var qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!qp[a.type]:r==="textarea"}function Vd(a,r,h,d){Ao?xa?xa.push(d):xa=[d]:Ao=d,r=Zy(r,"onChange"),0<r.length&&(h=new dr("onChange","change",null,h,d),a.push({event:h,listeners:r}))}var ml=null,_u=null;function Q_(a){v4(a,0)}function Dc(a){var r=Ps(a);if(ti(r))return a}function jp(a,r){if(a==="change")return r}var jr=!1;if(ra){var af;if(ra){var Kp="oninput"in document;if(!Kp){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Kp=typeof Yp.oninput=="function"}af=Kp}else af=!1;jr=af&&(!document.documentMode||9<document.documentMode)}function Pa(){ml&&(ml.detachEvent("onpropertychange",rf),_u=ml=null)}function rf(a){if(a.propertyName==="value"&&Dc(_u)){var r=[];Vd(r,_u,a,aa(a)),wo(Q_,r)}}function X_(a,r,h){a==="focusin"?(Pa(),ml=r,_u=h,ml.attachEvent("onpropertychange",rf)):a==="focusout"&&Pa()}function Qp(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Dc(_u)}function J_(a,r){if(a==="click")return Dc(r)}function W_(a,r){if(a==="input"||a==="change")return Dc(r)}function Xp(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var ys=typeof Object.is=="function"?Object.is:Xp;function xc(a,r){if(ys(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var h=Object.keys(a),d=Object.keys(r);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var v=h[d];if(!En.call(r,v)||!ys(a[v],r[v]))return!1}return!0}function of(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Oc(a,r){var h=of(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=r&&d>=r)return{node:h,offset:r-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=of(h)}}function cn(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?cn(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function Z_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=Ke(a.document);r instanceof a.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)a=r.contentWindow;else break;r=Ke(a.document)}return r}function Jp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var $_=ra&&"documentMode"in document&&11>=document.documentMode,Kr=null,Yr=null,Mc=null,kd=!1;function Pc(a,r,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;kd||Kr==null||Kr!==Ke(d)||(d=Kr,"selectionStart"in d&&Jp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Mc&&xc(Mc,d)||(Mc=d,d=Zy(Yr,"onSelect"),0<d.length&&(r=new dr("onSelect","select",null,r,h),a.push({event:r,listeners:d}),r.target=Kr)))}function is(a,r){var h={};return h[a.toLowerCase()]=r.toLowerCase(),h["Webkit"+a]="webkit"+r,h["Moz"+a]="moz"+r,h}var yu={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionrun:is("Transition","TransitionRun"),transitionstart:is("Transition","TransitionStart"),transitioncancel:is("Transition","TransitionCancel"),transitionend:is("Transition","TransitionEnd")},lf={},Wp={};ra&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete yu.animationend.animation,delete yu.animationiteration.animation,delete yu.animationstart.animation),"TransitionEvent"in window||delete yu.transitionend.transition);function No(a){if(lf[a])return lf[a];if(!yu[a])return a;var r=yu[a],h;for(h in r)if(r.hasOwnProperty(h)&&h in Wp)return lf[a]=r[h];return a}var Ld=No("animationend"),uf=No("animationiteration"),Zp=No("animationstart"),ty=No("transitionrun"),D2=No("transitionstart"),ey=No("transitioncancel"),$p=No("transitionend"),Va=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function ka(a,r){Va.set(a,r),lr(r,[a])}var hf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},La=[],Do=0,xi=0;function ff(){for(var a=Do,r=xi=Do=0;r<a;){var h=La[r];La[r++]=null;var d=La[r];La[r++]=null;var v=La[r];La[r++]=null;var T=La[r];if(La[r++]=null,d!==null&&v!==null){var C=d.pending;C===null?v.next=v:(v.next=C.next,C.next=v),d.pending=v}T!==0&&pl(h,v,T)}}function Oi(a,r,h,d){La[Do++]=a,La[Do++]=r,La[Do++]=h,La[Do++]=d,xi|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Ud(a,r,h,d){return Oi(a,r,h,d),Ua(a)}function vs(a,r){return Oi(a,null,null,r),Ua(a)}function pl(a,r,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var v=!1,T=a.return;T!==null;)T.childLanes|=h,d=T.alternate,d!==null&&(d.childLanes|=h),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(v=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,v&&r!==null&&(v=31-xn(h),a=T.hiddenUpdates,d=a[v],d===null?a[v]=[r]:d.push(r),r.lane=h|536870912),T):null}function Ua(a){if(50<Pl)throw Pl=0,Lu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var gl={};function tg(a,r,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(a,r,h,d){return new tg(a,r,h,d)}function zd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ls(a,r){var h=a.alternate;return h===null?(h=Pn(a.tag,r,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=r,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,r=a.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Vc(a,r){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,r=h.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Qr(a,r,h,d,v,T){var C=0;if(d=a,typeof a=="function")zd(a)&&(C=1);else if(typeof a=="string")C=r7(a,h,Ht.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case k:return a=Pn(31,h,r,v),a.elementType=k,a.lanes=T,a;case L:return _l(h.children,v,T,r);case U:C=8,v|=24;break;case G:return a=Pn(12,h,r,v|2),a.elementType=G,a.lanes=T,a;case gt:return a=Pn(13,h,r,v),a.elementType=gt,a.lanes=T,a;case lt:return a=Pn(19,h,r,v),a.elementType=lt,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case X:C=10;break t;case j:C=9;break t;case Z:C=11;break t;case V:C=14;break t;case M:C=16,d=null;break t}C=29,h=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=Pn(C,h,r,v),r.elementType=a,r.type=d,r.lanes=T,r}function _l(a,r,h,d){return a=Pn(7,a,d,r),a.lanes=h,a}function Bd(a,r,h){return a=Pn(6,a,null,r),a.lanes=h,a}function kc(a){var r=Pn(18,null,null,0);return r.stateNode=a,r}function Gd(a,r,h){return r=Pn(4,a.children!==null?a.children:[],a.key,r),r.lanes=h,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var df=new WeakMap;function oa(a,r){if(typeof a=="object"&&a!==null){var h=df.get(a);return h!==void 0?h:(r={value:a,source:r,stack:Dr(r)},df.set(a,r),r)}return{value:a,source:r,stack:Dr(r)}}var yl=[],vl=0,Lc=null,Uc=0,Us=[],Tn=0,xo=null,Vn=1,_r="";function Xr(a,r){yl[vl++]=Uc,yl[vl++]=Lc,Lc=a,Uc=r}function ny(a,r,h){Us[Tn++]=Vn,Us[Tn++]=_r,Us[Tn++]=xo,xo=a;var d=Vn;a=_r;var v=32-xn(d)-1;d&=~(1<<v),h+=1;var T=32-xn(r)+v;if(30<T){var C=v-v%5;T=(d&(1<<C)-1).toString(32),d>>=C,v-=C,Vn=1<<32-xn(r)+v|h<<v|d,_r=T+a}else Vn=1<<T|h<<v|d,_r=a}function Jr(a){a.return!==null&&(Xr(a,1),ny(a,1,0))}function Hd(a){for(;a===Lc;)Lc=yl[--vl],yl[vl]=null,Uc=yl[--vl],yl[vl]=null;for(;a===xo;)xo=Us[--Tn],Us[Tn]=null,_r=Us[--Tn],Us[Tn]=null,Vn=Us[--Tn],Us[Tn]=null}function qd(a,r){Us[Tn++]=Vn,Us[Tn++]=_r,Us[Tn++]=xo,Vn=r.id,_r=r.overflow,xo=a}var jn=null,hn=null,Ie=!1,Oo=null,la=!1,zc=Error(i(519));function Wr(a){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zr(oa(r,a)),zc}function iy(a){var r=a.stateNode,h=a.type,d=a.memoizedProps;switch(r[Mn]=a,r[ci]=d,h){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(h=0;h<Wa.length;h++)Oe(Wa[h],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),yc(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Ur(r,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||r.textContent===""+h||d.suppressHydrationWarning===!0||b4(r.textContent,h)?(d.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),d.onScroll!=null&&Oe("scroll",r),d.onScrollEnd!=null&&Oe("scrollend",r),d.onClick!=null&&(r.onclick=cr),r=!0):r=!1,r||Wr(a,!0)}function sy(a){for(jn=a.return;jn;)switch(jn.tag){case 5:case 31:case 13:la=!1;return;case 27:case 3:la=!0;return;default:jn=jn.return}}function Bc(a){if(a!==jn)return!1;if(!Ie)return sy(a),Ie=!0,!1;var r=a.tag,h;if((h=r!==3&&r!==27)&&((h=r===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||K2(a.type,a.memoizedProps)),h=!h),h&&hn&&Wr(a),sy(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=O4(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=O4(a)}else r===27?(r=hn,rh(a.type)?(a=W2,W2=null,hn=a):hn=r):hn=jn?fo(a.stateNode.nextSibling):null;return!0}function El(){hn=jn=null,Ie=!1}function Fd(){var a=Oo;return a!==null&&(Yn===null?Yn=a:Yn.push.apply(Yn,a),Oo=null),a}function Zr(a){Oo===null?Oo=[a]:Oo.push(a)}var Gc=F(null),Tl=null,$r=null;function Mo(a,r,h){At(Gc,r._currentValue),r._currentValue=h}function to(a){a._currentValue=Gc.current,ft(Gc)}function jd(a,r,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===h)break;a=a.return}}function Kd(a,r,h,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var T=v.dependencies;if(T!==null){var C=v.child;T=T.firstContext;t:for(;T!==null;){var O=T;T=v;for(var Y=0;Y<r.length;Y++)if(O.context===r[Y]){T.lanes|=h,O=T.alternate,O!==null&&(O.lanes|=h),jd(T.return,h,a),d||(C=null);break t}T=O.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=h,T=C.alternate,T!==null&&(T.lanes|=h),jd(C,h,a),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===a){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function eo(a,r,h,d){a=null;for(var v=r,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=v.type;ys(v.pendingProps.value,C.value)||(a!==null?a.push(O):a=[O])}}else if(v===Te.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Wg):a=[Wg])}v=v.return}a!==null&&Kd(r,a,h,d),r.flags|=262144}function mf(a){for(a=a.firstContext;a!==null;){if(!ys(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Sl(a){Tl=a,$r=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function re(a){return ay(Tl,a)}function Hc(a,r){return Tl===null&&Sl(a),ay(a,r)}function ay(a,r){var h=r._currentValue;if(r={context:r,memoizedValue:h,next:null},$r===null){if(a===null)throw Error(i(308));$r=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else $r=$r.next=r;return h}var ry=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(h){return h()})}},x2=n.unstable_scheduleCallback,O2=n.unstable_NormalPriority,hi={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eg(){return{controller:new ry,data:new Map,refCount:0}}function vu(a){a.refCount--,a.refCount===0&&x2(O2,function(){a.controller.abort()})}var ua=null,Yd=0,Po=0,za=null;function ng(a,r){if(ua===null){var h=ua=[];Yd=0,Po=ct(),za={status:"pending",value:void 0,then:function(d){h.push(d)}}}return Yd++,r.then(ig,ig),r}function ig(){if(--Yd===0&&ua!==null){za!==null&&(za.status="fulfilled");var a=ua;ua=null,Po=0,za=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function sg(a,r){var h=[],d={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<h.length;v++)(0,h[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),d}var oy=W.S;W.S=function(a,r){jg=pn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ng(a,r),oy!==null&&oy(a,r)};var bl=F(null);function Qd(){var a=bl.current;return a!==null?a:oe.pooledCache}function pf(a,r){r===null?At(bl,bl.current):At(bl,r.pool)}function ag(){var a=Qd();return a===null?null:{parent:hi._currentValue,pool:a}}var Eu=Error(i(460)),gf=Error(i(474)),ge=Error(i(542)),Xd={then:function(){}};function zs(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Jd(a,r,h){switch(h=a[h],h===void 0?a.push(r):h!==r&&(r.then(cr,cr),r=h),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,bu(a),a;default:if(typeof r.status=="string")r.then(cr,cr);else{if(a=oe,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,bu(a),a}throw no=r,Eu}}function Tu(a){try{var r=a._init;return r(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(no=h,Eu):h}}var no=null;function Su(){if(no===null)throw Error(i(459));var a=no;return no=null,a}function bu(a){if(a===Eu||a===ge)throw Error(i(483))}var Au=null,wu=0;function _f(a){var r=wu;return wu+=1,Au===null&&(Au=[]),Jd(Au,a,r)}function Ba(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function qc(a,r){throw r.$$typeof===A?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function Wd(a){function r(tt,J){if(a){var st=tt.deletions;st===null?(tt.deletions=[J],tt.flags|=16):st.push(J)}}function h(tt,J){if(!a)return null;for(;J!==null;)r(tt,J),J=J.sibling;return null}function d(tt){for(var J=new Map;tt!==null;)tt.key!==null?J.set(tt.key,tt):J.set(tt.index,tt),tt=tt.sibling;return J}function v(tt,J){return tt=Ls(tt,J),tt.index=0,tt.sibling=null,tt}function T(tt,J,st){return tt.index=st,a?(st=tt.alternate,st!==null?(st=st.index,st<J?(tt.flags|=67108866,J):st):(tt.flags|=67108866,J)):(tt.flags|=1048576,J)}function C(tt){return a&&tt.alternate===null&&(tt.flags|=67108866),tt}function O(tt,J,st,_t){return J===null||J.tag!==6?(J=Bd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function Y(tt,J,st,_t){var $t=st.type;return $t===L?pt(tt,J,st.props.children,_t,st.key):J!==null&&(J.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&Tu($t)===J.type)?(J=v(J,st.props),Ba(J,st),J.return=tt,J):(J=Qr(st.type,st.key,st.props,null,tt.mode,_t),Ba(J,st),J.return=tt,J)}function at(tt,J,st,_t){return J===null||J.tag!==4||J.stateNode.containerInfo!==st.containerInfo||J.stateNode.implementation!==st.implementation?(J=Gd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st.children||[]),J.return=tt,J)}function pt(tt,J,st,_t,$t){return J===null||J.tag!==7?(J=_l(st,tt.mode,_t,$t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function vt(tt,J,st){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Bd(""+J,tt.mode,st),J.return=tt,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return st=Qr(J.type,J.key,J.props,null,tt.mode,st),Ba(st,J),st.return=tt,st;case D:return J=Gd(J,tt.mode,st),J.return=tt,J;case M:return J=Tu(J),vt(tt,J,st)}if(Ut(J)||K(J))return J=_l(J,tt.mode,st,null),J.return=tt,J;if(typeof J.then=="function")return vt(tt,_f(J),st);if(J.$$typeof===X)return vt(tt,Hc(tt,J),st);qc(tt,J)}return null}function ot(tt,J,st,_t){var $t=J!==null?J.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return $t!==null?null:O(tt,J,""+st,_t);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case N:return st.key===$t?Y(tt,J,st,_t):null;case D:return st.key===$t?at(tt,J,st,_t):null;case M:return st=Tu(st),ot(tt,J,st,_t)}if(Ut(st)||K(st))return $t!==null?null:pt(tt,J,st,_t,null);if(typeof st.then=="function")return ot(tt,J,_f(st),_t);if(st.$$typeof===X)return ot(tt,J,Hc(tt,st),_t);qc(tt,st)}return null}function mt(tt,J,st,_t,$t){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return tt=tt.get(st)||null,O(J,tt,""+_t,$t);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case N:return tt=tt.get(_t.key===null?st:_t.key)||null,Y(J,tt,_t,$t);case D:return tt=tt.get(_t.key===null?st:_t.key)||null,at(J,tt,_t,$t);case M:return _t=Tu(_t),mt(tt,J,st,_t,$t)}if(Ut(_t)||K(_t))return tt=tt.get(st)||null,pt(J,tt,_t,$t,null);if(typeof _t.then=="function")return mt(tt,J,st,_f(_t),$t);if(_t.$$typeof===X)return mt(tt,J,st,Hc(J,_t),$t);qc(J,_t)}return null}function Kt(tt,J,st,_t){for(var $t=null,Ye=null,Xt=J,Ee=J=0,Ue=null;Xt!==null&&Ee<st.length;Ee++){Xt.index>Ee?(Ue=Xt,Xt=null):Ue=Xt.sibling;var Qe=ot(tt,Xt,st[Ee],_t);if(Qe===null){Xt===null&&(Xt=Ue);break}a&&Xt&&Qe.alternate===null&&r(tt,Xt),J=T(Qe,J,Ee),Ye===null?$t=Qe:Ye.sibling=Qe,Ye=Qe,Xt=Ue}if(Ee===st.length)return h(tt,Xt),Ie&&Xr(tt,Ee),$t;if(Xt===null){for(;Ee<st.length;Ee++)Xt=vt(tt,st[Ee],_t),Xt!==null&&(J=T(Xt,J,Ee),Ye===null?$t=Xt:Ye.sibling=Xt,Ye=Xt);return Ie&&Xr(tt,Ee),$t}for(Xt=d(Xt);Ee<st.length;Ee++)Ue=mt(Xt,tt,Ee,st[Ee],_t),Ue!==null&&(a&&Ue.alternate!==null&&Xt.delete(Ue.key===null?Ee:Ue.key),J=T(Ue,J,Ee),Ye===null?$t=Ue:Ye.sibling=Ue,Ye=Ue);return a&&Xt.forEach(function(hh){return r(tt,hh)}),Ie&&Xr(tt,Ee),$t}function se(tt,J,st,_t){if(st==null)throw Error(i(151));for(var $t=null,Ye=null,Xt=J,Ee=J=0,Ue=null,Qe=st.next();Xt!==null&&!Qe.done;Ee++,Qe=st.next()){Xt.index>Ee?(Ue=Xt,Xt=null):Ue=Xt.sibling;var hh=ot(tt,Xt,Qe.value,_t);if(hh===null){Xt===null&&(Xt=Ue);break}a&&Xt&&hh.alternate===null&&r(tt,Xt),J=T(hh,J,Ee),Ye===null?$t=hh:Ye.sibling=hh,Ye=hh,Xt=Ue}if(Qe.done)return h(tt,Xt),Ie&&Xr(tt,Ee),$t;if(Xt===null){for(;!Qe.done;Ee++,Qe=st.next())Qe=vt(tt,Qe.value,_t),Qe!==null&&(J=T(Qe,J,Ee),Ye===null?$t=Qe:Ye.sibling=Qe,Ye=Qe);return Ie&&Xr(tt,Ee),$t}for(Xt=d(Xt);!Qe.done;Ee++,Qe=st.next())Qe=mt(Xt,tt,Ee,Qe.value,_t),Qe!==null&&(a&&Qe.alternate!==null&&Xt.delete(Qe.key===null?Ee:Qe.key),J=T(Qe,J,Ee),Ye===null?$t=Qe:Ye.sibling=Qe,Ye=Qe);return a&&Xt.forEach(function(_7){return r(tt,_7)}),Ie&&Xr(tt,Ee),$t}function mn(tt,J,st,_t){if(typeof st=="object"&&st!==null&&st.type===L&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case N:t:{for(var $t=st.key;J!==null;){if(J.key===$t){if($t=st.type,$t===L){if(J.tag===7){h(tt,J.sibling),_t=v(J,st.props.children),_t.return=tt,tt=_t;break t}}else if(J.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&Tu($t)===J.type){h(tt,J.sibling),_t=v(J,st.props),Ba(_t,st),_t.return=tt,tt=_t;break t}h(tt,J);break}else r(tt,J);J=J.sibling}st.type===L?(_t=_l(st.props.children,tt.mode,_t,st.key),_t.return=tt,tt=_t):(_t=Qr(st.type,st.key,st.props,null,tt.mode,_t),Ba(_t,st),_t.return=tt,tt=_t)}return C(tt);case D:t:{for($t=st.key;J!==null;){if(J.key===$t)if(J.tag===4&&J.stateNode.containerInfo===st.containerInfo&&J.stateNode.implementation===st.implementation){h(tt,J.sibling),_t=v(J,st.children||[]),_t.return=tt,tt=_t;break t}else{h(tt,J);break}else r(tt,J);J=J.sibling}_t=Gd(st,tt.mode,_t),_t.return=tt,tt=_t}return C(tt);case M:return st=Tu(st),mn(tt,J,st,_t)}if(Ut(st))return Kt(tt,J,st,_t);if(K(st)){if($t=K(st),typeof $t!="function")throw Error(i(150));return st=$t.call(st),se(tt,J,st,_t)}if(typeof st.then=="function")return mn(tt,J,_f(st),_t);if(st.$$typeof===X)return mn(tt,J,Hc(tt,st),_t);qc(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,J!==null&&J.tag===6?(h(tt,J.sibling),_t=v(J,st),_t.return=tt,tt=_t):(h(tt,J),_t=Bd(st,tt.mode,_t),_t.return=tt,tt=_t),C(tt)):h(tt,J)}return function(tt,J,st,_t){try{wu=0;var $t=mn(tt,J,st,_t);return Au=null,$t}catch(Xt){if(Xt===Eu||Xt===ge)throw Xt;var Ye=Pn(29,Xt,null,tt.mode);return Ye.lanes=_t,Ye.return=tt,Ye}}}var Vo=Wd(!0),Zd=Wd(!1),Es=!1;function yf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rg(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ko(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Al(a,r,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Jt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=Ua(a),pl(a,null,h),r}return Oi(a,d,r,h),Ua(a)}function wl(a,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,il(a,h)}}function Zt(a,r){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var v=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?v=T=C:T=T.next=C,h=h.next}while(h!==null);T===null?v=T=r:T=T.next=r}else v=T=r;h={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=r:a.next=r,h.lastBaseUpdate=r}var og=!1;function vf(){if(og){var a=za;if(a!==null)throw a}}function Fc(a,r,h,d){og=!1;var v=a.updateQueue;Es=!1;var T=v.firstBaseUpdate,C=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var Y=O,at=Y.next;Y.next=null,C===null?T=at:C.next=at,C=Y;var pt=a.alternate;pt!==null&&(pt=pt.updateQueue,O=pt.lastBaseUpdate,O!==C&&(O===null?pt.firstBaseUpdate=at:O.next=at,pt.lastBaseUpdate=Y))}if(T!==null){var vt=v.baseState;C=0,pt=at=Y=null,O=T;do{var ot=O.lane&-536870913,mt=ot!==O.lane;if(mt?(pe&ot)===ot:(d&ot)===ot){ot!==0&&ot===Po&&(og=!0),pt!==null&&(pt=pt.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var Kt=a,se=O;ot=r;var mn=h;switch(se.tag){case 1:if(Kt=se.payload,typeof Kt=="function"){vt=Kt.call(mn,vt,ot);break t}vt=Kt;break t;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=se.payload,ot=typeof Kt=="function"?Kt.call(mn,vt,ot):Kt,ot==null)break t;vt=b({},vt,ot);break t;case 2:Es=!0}}ot=O.callback,ot!==null&&(a.flags|=64,mt&&(a.flags|=8192),mt=v.callbacks,mt===null?v.callbacks=[ot]:mt.push(ot))}else mt={lane:ot,tag:O.tag,payload:O.payload,callback:O.callback,next:null},pt===null?(at=pt=mt,Y=vt):pt=pt.next=mt,C|=ot;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;mt=O,O=mt.next,mt.next=null,v.lastBaseUpdate=mt,v.shared.pending=null}}while(!0);pt===null&&(Y=vt),v.baseState=Y,v.firstBaseUpdate=at,v.lastBaseUpdate=pt,T===null&&(v.shared.lanes=0),uo|=C,a.lanes=C,a.memoizedState=vt}}function jc(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function ly(a,r){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)jc(h[a],r)}var Kc=F(null),$d=F(0);function uy(a,r){a=da,At($d,a),At(Kc,r),da=a|r.baseLanes}function lg(){At($d,da),At(Kc,Kc.current)}function Ef(){da=$d.current,ft(Kc),ft($d)}var Bs=F(null),Ts=null;function Lo(a){var r=a.alternate;At(Ne,Ne.current&1),At(Bs,a),Ts===null&&(r===null||Kc.current!==null||r.memoizedState!==null)&&(Ts=a)}function ug(a){At(Ne,Ne.current),At(Bs,a),Ts===null&&(Ts=a)}function cy(a){a.tag===22?(At(Ne,Ne.current),At(Bs,a),Ts===null&&(Ts=a)):Gs()}function Gs(){At(Ne,Ne.current),At(Bs,Bs.current)}function ei(a){ft(Bs),Ts===a&&(Ts=null),ft(Ne)}var Ne=F(0);function ca(a){for(var r=a;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||X2(h)||J2(h)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sn=0,fe=null,nn=null,Ae=null,Ga=!1,Yc=!1,Ru=!1,tm=0,Tf=0,Qc=null,cg=0;function kn(){throw Error(i(321))}function hg(a,r){if(r===null)return!1;for(var h=0;h<r.length&&h<a.length;h++)if(!ys(a[h],r[h]))return!1;return!0}function em(a,r,h,d,v,T){return Sn=T,fe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=a===null||a.memoizedState===null?Hy:xg,Ru=!1,T=h(d,v),Ru=!1,Yc&&(T=Cu(r,h,d,v)),hy(a),T}function hy(a){W.H=Xc;var r=nn!==null&&nn.next!==null;if(Sn=0,Ae=nn=fe=null,Ga=!1,Tf=0,Qc=null,r)throw Error(i(300));a===null||fi||(a=a.dependencies,a!==null&&mf(a)&&(fi=!0))}function Cu(a,r,h,d){fe=a;var v=0;do{if(Yc&&(Qc=null),Tf=0,Yc=!1,25<=v)throw Error(i(301));if(v+=1,Ae=nn=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}W.H=Ha,T=r(h,d)}while(Yc);return T}function Iu(){var a=W.H,r=a.useState()[0];return r=typeof r.then=="function"?Sf(r):r,a=a.useState()[0],(nn!==null?nn.memoizedState:null)!==a&&(fe.flags|=1024),r}function fg(){var a=tm!==0;return tm=0,a}function dg(a,r,h){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~h}function mg(a){if(Ga){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Ga=!1}Sn=0,Ae=nn=fe=null,Yc=!1,Tf=tm=0,Qc=null}function vi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?fe.memoizedState=Ae=a:Ae=Ae.next=a,Ae}function ni(){if(nn===null){var a=fe.alternate;a=a!==null?a.memoizedState:null}else a=nn.next;var r=Ae===null?fe.memoizedState:Ae.next;if(r!==null)Ae=r,nn=a;else{if(a===null)throw fe.alternate===null?Error(i(467)):Error(i(310));nn=a,a={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Ae===null?fe.memoizedState=Ae=a:Ae=Ae.next=a}return Ae}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sf(a){var r=Tf;return Tf+=1,Qc===null&&(Qc=[]),a=Jd(Qc,a,r),r=fe,(Ae===null?r.memoizedState:Ae.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Hy:xg),a}function Rl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Sf(a);if(a.$$typeof===X)return re(a)}throw Error(i(438,String(a)))}function pg(a){var r=null,h=fe.updateQueue;if(h!==null&&(r=h.memoCache),r==null){var d=fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),h===null&&(h=nm(),fe.updateQueue=h),h.memoCache=r,h=r.data[r.index],h===void 0)for(h=r.data[r.index]=Array(a),d=0;d<a;d++)h[d]=q;return r.index++,h}function Uo(a,r){return typeof r=="function"?r(a):r}function im(a){var r=ni();return gg(r,nn,a)}function gg(a,r,h){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=h;var v=a.baseQueue,T=d.pending;if(T!==null){if(v!==null){var C=v.next;v.next=T.next,T.next=C}r.baseQueue=v=T,d.pending=null}if(T=a.baseState,v===null)a.memoizedState=T;else{r=v.next;var O=C=null,Y=null,at=r,pt=!1;do{var vt=at.lane&-536870913;if(vt!==at.lane?(pe&vt)===vt:(Sn&vt)===vt){var ot=at.revertLane;if(ot===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),vt===Po&&(pt=!0);else if((Sn&ot)===ot){at=at.next,ot===Po&&(pt=!0);continue}else vt={lane:0,revertLane:at.revertLane,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Y===null?(O=Y=vt,C=T):Y=Y.next=vt,fe.lanes|=ot,uo|=ot;vt=at.action,Ru&&h(T,vt),T=at.hasEagerState?at.eagerState:h(T,vt)}else ot={lane:vt,revertLane:at.revertLane,gesture:at.gesture,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Y===null?(O=Y=ot,C=T):Y=Y.next=ot,fe.lanes|=vt,uo|=vt;at=at.next}while(at!==null&&at!==r);if(Y===null?C=T:Y.next=O,!ys(T,a.memoizedState)&&(fi=!0,pt&&(h=za,h!==null)))throw h;a.memoizedState=T,a.baseState=C,a.baseQueue=Y,d.lastRenderedState=T}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function _g(a){var r=ni(),h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var d=h.dispatch,v=h.pending,T=r.memoizedState;if(v!==null){h.pending=null;var C=v=v.next;do T=a(T,C.action),C=C.next;while(C!==v);ys(T,r.memoizedState)||(fi=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),h.lastRenderedState=T}return[T,d]}function fy(a,r,h){var d=fe,v=ni(),T=Ie;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=r();var C=!ys((nn||v).memoizedState,h);if(C&&(v.memoizedState=h,fi=!0),v=v.queue,wg(py.bind(null,d,v,a),[a]),v.getSnapshot!==r||C||Ae!==null&&Ae.memoizedState.tag&1){if(d.flags|=2048,Cl(9,{destroy:void 0},my.bind(null,d,v,h,r),null),oe===null)throw Error(i(349));T||(Sn&127)!==0||dy(d,r,h)}return h}function dy(a,r,h){a.flags|=16384,a={getSnapshot:r,value:h},r=fe.updateQueue,r===null?(r=nm(),fe.updateQueue=r,r.stores=[a]):(h=r.stores,h===null?r.stores=[a]:h.push(a))}function my(a,r,h,d){r.value=h,r.getSnapshot=d,gy(r)&&_y(a)}function py(a,r,h){return h(function(){gy(r)&&_y(a)})}function gy(a){var r=a.getSnapshot;a=a.value;try{var h=r();return!ys(a,h)}catch{return!0}}function _y(a){var r=vs(a,2);r!==null&&ye(r,a,2)}function yg(a){var r=vi();if(typeof a=="function"){var h=a;if(a=h(),Ru){yi(!0);try{h()}finally{yi(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:a},r}function vg(a,r,h,d){return a.baseState=h,gg(a,nn,typeof d=="function"?d:Uo)}function M2(a,r,h,d,v){if(om(a))throw Error(i(485));if(a=r.action,a!==null){var T={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};W.T!==null?h(!0):T.isTransition=!1,d(T),h=r.pending,h===null?(T.next=r.pending=T,yy(r,T)):(T.next=h.next,r.pending=h.next=T)}}function yy(a,r){var h=r.action,d=r.payload,v=a.state;if(r.isTransition){var T=W.T,C={};W.T=C;try{var O=h(v,d),Y=W.S;Y!==null&&Y(C,O),vy(a,r,O)}catch(at){Eg(a,r,at)}finally{T!==null&&C.types!==null&&(T.types=C.types),W.T=T}}else try{T=h(v,d),vy(a,r,T)}catch(at){Eg(a,r,at)}}function vy(a,r,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){Ey(a,r,d)},function(d){return Eg(a,r,d)}):Ey(a,r,h)}function Ey(a,r,h){r.status="fulfilled",r.value=h,Ty(r),a.state=h,r=a.pending,r!==null&&(h=r.next,h===r?a.pending=null:(h=h.next,r.next=h,yy(a,h)))}function Eg(a,r,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=h,Ty(r),r=r.next;while(r!==d)}a.action=null}function Ty(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Tg(a,r){return r}function Sg(a,r){if(Ie){var h=oe.formState;if(h!==null){t:{var d=fe;if(Ie){if(hn){e:{for(var v=hn,T=la;v.nodeType!==8;){if(!T){v=null;break e}if(v=fo(v.nextSibling),v===null){v=null;break e}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){hn=fo(v.nextSibling),d=v.data==="F!";break t}}Wr(d)}d=!1}d&&(r=h[0])}}return h=vi(),h.memoizedState=h.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:r},h.queue=d,h=zy.bind(null,fe,d),d.dispatch=h,d=yg(!1),T=Dg.bind(null,fe,!1,d.queue),d=vi(),v={state:r,dispatch:null,action:a,pending:null},d.queue=v,h=M2.bind(null,fe,v,T,h),v.dispatch=h,d.memoizedState=a,[r,h,!1]}function Sy(a){var r=ni();return bg(r,nn,a)}function bg(a,r,h){if(r=gg(a,r,Tg)[0],a=im(Uo)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Sf(r)}catch(C){throw C===Eu?ge:C}else d=r;r=ni();var v=r.queue,T=v.dispatch;return h!==r.memoizedState&&(fe.flags|=2048,Cl(9,{destroy:void 0},by.bind(null,v,h),null)),[d,T,a]}function by(a,r){a.action=r}function Ag(a){var r=ni(),h=nn;if(h!==null)return bg(r,h,a);ni(),r=r.memoizedState,h=ni();var d=h.queue.dispatch;return h.memoizedState=a,[r,d,!1]}function Cl(a,r,h,d){return a={tag:a,create:h,deps:d,inst:r,next:null},r=fe.updateQueue,r===null&&(r=nm(),fe.updateQueue=r),h=r.lastEffect,h===null?r.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,r.lastEffect=a),a}function sm(){return ni().memoizedState}function am(a,r,h,d){var v=vi();fe.flags|=a,v.memoizedState=Cl(1|r,{destroy:void 0},h,d===void 0?null:d)}function rm(a,r,h,d){var v=ni();d=d===void 0?null:d;var T=v.memoizedState.inst;nn!==null&&d!==null&&hg(d,nn.memoizedState.deps)?v.memoizedState=Cl(r,T,h,d):(fe.flags|=a,v.memoizedState=Cl(1|r,T,h,d))}function Ay(a,r){am(8390656,8,a,r)}function wg(a,r){rm(2048,8,a,r)}function wy(a){fe.flags|=4;var r=fe.updateQueue;if(r===null)r=nm(),fe.updateQueue=r,r.events=[a];else{var h=r.events;h===null?r.events=[a]:h.push(a)}}function Ry(a){var r=ni().memoizedState;return wy({ref:r,nextImpl:a}),function(){if((Jt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Cy(a,r){return rm(4,2,a,r)}function Iy(a,r){return rm(4,4,a,r)}function Ny(a,r){if(typeof r=="function"){a=a();var h=r(a);return function(){typeof h=="function"?h():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function Dy(a,r,h){h=h!=null?h.concat([a]):null,rm(4,4,Ny.bind(null,r,a),h)}function Rg(){}function xy(a,r){var h=ni();r=r===void 0?null:r;var d=h.memoizedState;return r!==null&&hg(r,d[1])?d[0]:(h.memoizedState=[a,r],a)}function Oy(a,r){var h=ni();r=r===void 0?null:r;var d=h.memoizedState;if(r!==null&&hg(r,d[1]))return d[0];if(d=a(),Ru){yi(!0);try{a()}finally{yi(!1)}}return h.memoizedState=[d,r],d}function Cg(a,r,h){return h===void 0||(Sn&1073741824)!==0&&(pe&261930)===0?a.memoizedState=r:(a.memoizedState=h,a=Se(),fe.lanes|=a,uo|=a,h)}function My(a,r,h,d){return ys(h,r)?h:Kc.current!==null?(a=Cg(a,h,d),ys(a,r)||(fi=!0),a):(Sn&42)===0||(Sn&1073741824)!==0&&(pe&261930)===0?(fi=!0,a.memoizedState=h):(a=Se(),fe.lanes|=a,uo|=a,r)}function Py(a,r,h,d,v){var T=St.p;St.p=T!==0&&8>T?T:8;var C=W.T,O={};W.T=O,Dg(a,!1,r,h);try{var Y=v(),at=W.S;if(at!==null&&at(O,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var pt=sg(Y,d);bf(a,r,pt,pa(a))}else bf(a,r,d,pa(a))}catch(vt){bf(a,r,{then:function(){},status:"rejected",reason:vt},pa())}finally{St.p=T,C!==null&&O.types!==null&&(C.types=O.types),W.T=C}}function P2(){}function Ig(a,r,h,d){if(a.tag!==5)throw Error(i(476));var v=Vy(a).queue;Py(a,v,r,Et,h===null?P2:function(){return ky(a),h(d)})}function Vy(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:Et,baseState:Et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:Et},next:null};var h={};return r.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:h},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function ky(a){var r=Vy(a);r.next===null&&(r=a.alternate.memoizedState),bf(a,r.next.queue,{},pa())}function Ng(){return re(Wg)}function Ly(){return ni().memoizedState}function Uy(){return ni().memoizedState}function V2(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var h=pa();a=ko(h);var d=Al(r,a,h);d!==null&&(ye(d,r,h),wl(d,r,h)),r={cache:eg()},a.payload=r;return}r=r.return}}function k2(a,r,h){var d=pa();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},om(a)?By(r,h):(h=Ud(a,r,h,d),h!==null&&(ye(h,a,d),Gy(h,r,d)))}function zy(a,r,h){var d=pa();bf(a,r,h,d)}function bf(a,r,h,d){var v={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(om(a))By(r,v);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,O=T(C,h);if(v.hasEagerState=!0,v.eagerState=O,ys(O,C))return Oi(a,r,v,0),oe===null&&ff(),!1}catch{}if(h=Ud(a,r,v,d),h!==null)return ye(h,a,d),Gy(h,r,d),!0}return!1}function Dg(a,r,h,d){if(d={lane:2,revertLane:ct(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},om(a)){if(r)throw Error(i(479))}else r=Ud(a,h,d,2),r!==null&&ye(r,a,2)}function om(a){var r=a.alternate;return a===fe||r!==null&&r===fe}function By(a,r){Yc=Ga=!0;var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}function Gy(a,r,h){if((h&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,il(a,h)}}var Xc={readContext:re,use:Rl,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn};Xc.useEffectEvent=kn;var Hy={readContext:re,use:Rl,useCallback:function(a,r){return vi().memoizedState=[a,r===void 0?null:r],a},useContext:re,useEffect:Ay,useImperativeHandle:function(a,r,h){h=h!=null?h.concat([a]):null,am(4194308,4,Ny.bind(null,r,a),h)},useLayoutEffect:function(a,r){return am(4194308,4,a,r)},useInsertionEffect:function(a,r){am(4,2,a,r)},useMemo:function(a,r){var h=vi();r=r===void 0?null:r;var d=a();if(Ru){yi(!0);try{a()}finally{yi(!1)}}return h.memoizedState=[d,r],d},useReducer:function(a,r,h){var d=vi();if(h!==void 0){var v=h(r);if(Ru){yi(!0);try{h(r)}finally{yi(!1)}}}else v=r;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=k2.bind(null,fe,a),[d.memoizedState,a]},useRef:function(a){var r=vi();return a={current:a},r.memoizedState=a},useState:function(a){a=yg(a);var r=a.queue,h=zy.bind(null,fe,r);return r.dispatch=h,[a.memoizedState,h]},useDebugValue:Rg,useDeferredValue:function(a,r){var h=vi();return Cg(h,a,r)},useTransition:function(){var a=yg(!1);return a=Py.bind(null,fe,a.queue,!0,!1),vi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,h){var d=fe,v=vi();if(Ie){if(h===void 0)throw Error(i(407));h=h()}else{if(h=r(),oe===null)throw Error(i(349));(pe&127)!==0||dy(d,r,h)}v.memoizedState=h;var T={value:h,getSnapshot:r};return v.queue=T,Ay(py.bind(null,d,T,a),[a]),d.flags|=2048,Cl(9,{destroy:void 0},my.bind(null,d,T,h,r),null),h},useId:function(){var a=vi(),r=oe.identifierPrefix;if(Ie){var h=_r,d=Vn;h=(d&~(1<<32-xn(d)-1)).toString(32)+h,r="_"+r+"R_"+h,h=tm++,0<h&&(r+="H"+h.toString(32)),r+="_"}else h=cg++,r="_"+r+"r_"+h.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Ng,useFormState:Sg,useActionState:Sg,useOptimistic:function(a){var r=vi();r.memoizedState=r.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=h,r=Dg.bind(null,fe,!0,h),h.dispatch=r,[a,r]},useMemoCache:pg,useCacheRefresh:function(){return vi().memoizedState=V2.bind(null,fe)},useEffectEvent:function(a){var r=vi(),h={impl:a};return r.memoizedState=h,function(){if((Jt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},xg={readContext:re,use:Rl,useCallback:xy,useContext:re,useEffect:wg,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:im,useRef:sm,useState:function(){return im(Uo)},useDebugValue:Rg,useDeferredValue:function(a,r){var h=ni();return My(h,nn.memoizedState,a,r)},useTransition:function(){var a=im(Uo)[0],r=ni().memoizedState;return[typeof a=="boolean"?a:Sf(a),r]},useSyncExternalStore:fy,useId:Ly,useHostTransitionStatus:Ng,useFormState:Sy,useActionState:Sy,useOptimistic:function(a,r){var h=ni();return vg(h,nn,a,r)},useMemoCache:pg,useCacheRefresh:Uy};xg.useEffectEvent=Ry;var Ha={readContext:re,use:Rl,useCallback:xy,useContext:re,useEffect:wg,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:_g,useRef:sm,useState:function(){return _g(Uo)},useDebugValue:Rg,useDeferredValue:function(a,r){var h=ni();return nn===null?Cg(h,a,r):My(h,nn.memoizedState,a,r)},useTransition:function(){var a=_g(Uo)[0],r=ni().memoizedState;return[typeof a=="boolean"?a:Sf(a),r]},useSyncExternalStore:fy,useId:Ly,useHostTransitionStatus:Ng,useFormState:Ag,useActionState:Ag,useOptimistic:function(a,r){var h=ni();return nn!==null?vg(h,nn,a,r):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:pg,useCacheRefresh:Uy};Ha.useEffectEvent=Ry;function lm(a,r,h,d){r=a.memoizedState,h=h(d,r),h=h==null?r:b({},r,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Af={enqueueSetState:function(a,r,h){a=a._reactInternals;var d=pa(),v=ko(d);v.payload=r,h!=null&&(v.callback=h),r=Al(a,v,d),r!==null&&(ye(r,a,d),wl(r,a,d))},enqueueReplaceState:function(a,r,h){a=a._reactInternals;var d=pa(),v=ko(d);v.tag=1,v.payload=r,h!=null&&(v.callback=h),r=Al(a,v,d),r!==null&&(ye(r,a,d),wl(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var h=pa(),d=ko(h);d.tag=2,r!=null&&(d.callback=r),r=Al(a,d,h),r!==null&&(ye(r,a,h),wl(r,a,h))}};function Og(a,r,h,d,v,T,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,T,C):r.prototype&&r.prototype.isPureReactComponent?!xc(h,d)||!xc(v,T):!0}function Mg(a,r,h,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,d),r.state!==a&&Af.enqueueReplaceState(r,r.state,null)}function Il(a,r){var h=r;if("ref"in r){h={};for(var d in r)d!=="ref"&&(h[d]=r[d])}if(a=a.defaultProps){h===r&&(h=b({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}function qy(a){hf(a)}function Pg(a){console.error(a)}function Vg(a){hf(a)}function um(a,r){try{var h=a.onUncaughtError;h(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Fy(a,r,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function kg(a,r,h){return h=ko(h),h.tag=3,h.payload={element:null},h.callback=function(){um(a,r)},h}function Lg(a){return a=ko(a),a.tag=3,a}function jy(a,r,h,d){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var T=d.value;a.payload=function(){return v(T)},a.callback=function(){Fy(r,h,d)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){Fy(r,h,d),typeof v!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function Ei(a,r,h,d,v){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=h.alternate,r!==null&&eo(r,h,v,!0),h=Bs.current,h!==null){switch(h.tag){case 31:case 13:return Ts===null?nh():h.alternate===null&&Ln===0&&(Ln=3),h.flags&=-257,h.flags|=65536,h.lanes=v,d===Xd?h.flags|=16384:(r=h.updateQueue,r===null?h.updateQueue=new Set([d]):r.add(d),kf(a,d,v)),!1;case 22:return h.flags|=65536,d===Xd?h.flags|=16384:(r=h.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=r):(h=r.retryQueue,h===null?r.retryQueue=new Set([d]):h.add(d)),kf(a,d,v)),!1}throw Error(i(435,h.tag))}return kf(a,d,v),nh(),!1}if(Ie)return r=Bs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==zc&&(a=Error(i(422),{cause:d}),Zr(oa(a,h)))):(d!==zc&&(r=Error(i(423),{cause:d}),Zr(oa(r,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=oa(d,h),v=kg(a.stateNode,d,v),Zt(a,v),Ln!==4&&(Ln=2)),!1;var T=Error(i(520),{cause:d});if(T=oa(T,h),ku===null?ku=[T]:ku.push(T),Ln!==4&&(Ln=2),r===null)return!0;d=oa(d,h),h=r;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=kg(h.stateNode,d,a),Zt(h,a),!1;case 1:if(r=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ai===null||!ai.has(T))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Lg(v),jy(v,a,h,d),Zt(h,v),!1}h=h.return}while(h!==null);return!1}var cm=Error(i(461)),fi=!1;function Mi(a,r,h,d){r.child=a===null?Zd(r,null,h,d):Vo(r,a.child,h,d)}function Ug(a,r,h,d,v){h=h.render;var T=r.ref;if("ref"in d){var C={};for(var O in d)O!=="ref"&&(C[O]=d[O])}else C=d;return Sl(r),d=em(a,r,h,C,T,v),O=fg(),a!==null&&!fi?(dg(a,r,v),ii(a,r,v)):(Ie&&O&&Jr(r),r.flags|=1,Mi(a,r,d,v),r.child)}function Nu(a,r,h,d,v){if(a===null){var T=h.type;return typeof T=="function"&&!zd(T)&&T.defaultProps===void 0&&h.compare===null?(r.tag=15,r.type=T,hm(a,r,T,d,v)):(a=Qr(h.type,null,d,r,r.mode,v),a.ref=r.ref,a.return=r,r.child=a)}if(T=a.child,!_m(a,v)){var C=T.memoizedProps;if(h=h.compare,h=h!==null?h:xc,h(C,d)&&a.ref===r.ref)return ii(a,r,v)}return r.flags|=1,a=Ls(T,d),a.ref=r.ref,a.return=r,r.child=a}function hm(a,r,h,d,v){if(a!==null){var T=a.memoizedProps;if(xc(T,d)&&a.ref===r.ref)if(fi=!1,r.pendingProps=d=T,_m(a,v))(a.flags&131072)!==0&&(fi=!0);else return r.lanes=a.lanes,ii(a,r,v)}return Jc(a,r,h,d,v)}function Du(a,r,h,d){var v=d.children,T=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,a!==null){for(d=r.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~T}else d=0,r.child=null;return Hs(a,r,T,h,d)}if((h&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&pf(r,T!==null?T.cachePool:null),T!==null?uy(r,T):lg(),cy(r);else return d=r.lanes=536870912,Hs(a,r,T!==null?T.baseLanes|h:h,h,d)}else T!==null?(pf(r,T.cachePool),uy(r,T),Gs(),r.memoizedState=null):(a!==null&&pf(r,null),lg(),Gs());return Mi(a,r,v,h),r.child}function io(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Hs(a,r,h,d,v){var T=Qd();return T=T===null?null:{parent:hi._currentValue,pool:T},r.memoizedState={baseLanes:h,cachePool:T},a!==null&&pf(r,null),lg(),cy(r),a!==null&&eo(a,r,d,!0),r.childLanes=v,null}function fm(a,r){return r=gm({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function Ky(a,r,h){return Vo(r,a.child,null,h),a=fm(r,r.pendingProps),a.flags|=2,ei(r),r.memoizedState=null,a}function dm(a,r,h){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(Ie){if(d.mode==="hidden")return a=fm(r,d),r.lanes=536870912,io(null,a);if(ug(r),(a=hn)?(a=x4(a,la),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:xo!==null?{id:Vn,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},h=kc(a),h.return=r,r.child=h,jn=r,hn=null)):a=null,a===null)throw Wr(r);return r.lanes=536870912,null}return fm(r,d)}var T=a.memoizedState;if(T!==null){var C=T.dehydrated;if(ug(r),v)if(r.flags&256)r.flags&=-257,r=Ky(a,r,h);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(i(558));else if(fi||eo(a,r,h,!1),v=(h&a.childLanes)!==0,fi||v){if(d=oe,d!==null&&(C=mc(d,h),C!==0&&C!==T.retryLane))throw T.retryLane=C,vs(a,C),ye(d,a,C),cm;nh(),r=Ky(a,r,h)}else a=T.treeContext,hn=fo(C.nextSibling),jn=r,Ie=!0,Oo=null,la=!1,a!==null&&qd(r,a),r=fm(r,d),r.flags|=4096;return r}return a=Ls(a.child,{mode:d.mode,children:d.children}),a.ref=r.ref,r.child=a,a.return=r,a}function xu(a,r){var h=r.ref;if(h===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(r.flags|=4194816)}}function Jc(a,r,h,d,v){return Sl(r),h=em(a,r,h,d,void 0,v),d=fg(),a!==null&&!fi?(dg(a,r,v),ii(a,r,v)):(Ie&&d&&Jr(r),r.flags|=1,Mi(a,r,h,v),r.child)}function wf(a,r,h,d,v,T){return Sl(r),r.updateQueue=null,h=Cu(r,d,h,v),hy(a),d=fg(),a!==null&&!fi?(dg(a,r,T),ii(a,r,T)):(Ie&&d&&Jr(r),r.flags|=1,Mi(a,r,h,T),r.child)}function mm(a,r,h,d,v){if(Sl(r),r.stateNode===null){var T=gl,C=h.contextType;typeof C=="object"&&C!==null&&(T=re(C)),T=new h(d,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Af,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=d,T.state=r.memoizedState,T.refs={},yf(r),C=h.contextType,T.context=typeof C=="object"&&C!==null?re(C):gl,T.state=r.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(lm(r,h,C,d),T.state=r.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&Af.enqueueReplaceState(T,T.state,null),Fc(r,d,T,v),vf(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){T=r.stateNode;var O=r.memoizedProps,Y=Il(h,O);T.props=Y;var at=T.context,pt=h.contextType;C=gl,typeof pt=="object"&&pt!==null&&(C=re(pt));var vt=h.getDerivedStateFromProps;pt=typeof vt=="function"||typeof T.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,pt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O||at!==C)&&Mg(r,T,d,C),Es=!1;var ot=r.memoizedState;T.state=ot,Fc(r,d,T,v),vf(),at=r.memoizedState,O||ot!==at||Es?(typeof vt=="function"&&(lm(r,h,vt,d),at=r.memoizedState),(Y=Es||Og(r,h,Y,d,ot,at,C))?(pt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=at),T.props=d,T.state=at,T.context=C,d=Y):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{T=r.stateNode,rg(a,r),C=r.memoizedProps,pt=Il(h,C),T.props=pt,vt=r.pendingProps,ot=T.context,at=h.contextType,Y=gl,typeof at=="object"&&at!==null&&(Y=re(at)),O=h.getDerivedStateFromProps,(at=typeof O=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==vt||ot!==Y)&&Mg(r,T,d,Y),Es=!1,ot=r.memoizedState,T.state=ot,Fc(r,d,T,v),vf();var mt=r.memoizedState;C!==vt||ot!==mt||Es||a!==null&&a.dependencies!==null&&mf(a.dependencies)?(typeof O=="function"&&(lm(r,h,O,d),mt=r.memoizedState),(pt=Es||Og(r,h,pt,d,ot,mt,Y)||a!==null&&a.dependencies!==null&&mf(a.dependencies))?(at||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,mt,Y),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,mt,Y)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=mt),T.props=d,T.state=mt,T.context=Y,d=pt):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=1024),d=!1)}return T=d,xu(a,r),d=(r.flags&128)!==0,T||d?(T=r.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,a!==null&&d?(r.child=Vo(r,a.child,null,v),r.child=Vo(r,null,h,v)):Mi(a,r,h,v),r.memoizedState=T.state,a=r.child):a=ii(a,r,v),a}function Yy(a,r,h,d){return El(),r.flags|=256,Mi(a,r,h,d),r.child}var zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ss(a){return{baseLanes:a,cachePool:ag()}}function pm(a,r,h){return a=a!==null?a.childLanes&~h:0,r&&(a|=ws),a}function Qy(a,r,h){var d=r.pendingProps,v=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=a!==null&&a.memoizedState===null?!1:(Ne.current&2)!==0),C&&(v=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,a===null){if(Ie){if(v?Lo(r):Gs(),(a=hn)?(a=x4(a,la),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:xo!==null?{id:Vn,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},h=kc(a),h.return=r,r.child=h,jn=r,hn=null)):a=null,a===null)throw Wr(r);return J2(a)?r.lanes=32:r.lanes=536870912,null}var O=d.children;return d=d.fallback,v?(Gs(),v=r.mode,O=gm({mode:"hidden",children:O},v),d=_l(d,v,h,null),O.return=r,d.return=r,O.sibling=d,r.child=O,d=r.child,d.memoizedState=ss(h),d.childLanes=pm(a,C,h),r.memoizedState=zg,io(null,d)):(Lo(r),Rf(r,O))}var Y=a.memoizedState;if(Y!==null&&(O=Y.dehydrated,O!==null)){if(T)r.flags&256?(Lo(r),r.flags&=-257,r=Bg(a,r,h)):r.memoizedState!==null?(Gs(),r.child=a.child,r.flags|=128,r=null):(Gs(),O=d.fallback,v=r.mode,d=gm({mode:"visible",children:d.children},v),O=_l(O,v,h,null),O.flags|=2,d.return=r,O.return=r,d.sibling=O,r.child=d,Vo(r,a.child,null,h),d=r.child,d.memoizedState=ss(h),d.childLanes=pm(a,C,h),r.memoizedState=zg,r=io(null,d));else if(Lo(r),J2(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var at=C.dgst;C=at,d=Error(i(419)),d.stack="",d.digest=C,Zr({value:d,source:null,stack:null}),r=Bg(a,r,h)}else if(fi||eo(a,r,h,!1),C=(h&a.childLanes)!==0,fi||C){if(C=oe,C!==null&&(d=mc(C,h),d!==0&&d!==Y.retryLane))throw Y.retryLane=d,vs(a,d),ye(C,a,d),cm;X2(O)||nh(),r=Bg(a,r,h)}else X2(O)?(r.flags|=192,r.child=a.child,r=null):(a=Y.treeContext,hn=fo(O.nextSibling),jn=r,Ie=!0,Oo=null,la=!1,a!==null&&qd(r,a),r=Rf(r,d.children),r.flags|=4096);return r}return v?(Gs(),O=d.fallback,v=r.mode,Y=a.child,at=Y.sibling,d=Ls(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,at!==null?O=Ls(at,O):(O=_l(O,v,h,null),O.flags|=2),O.return=r,d.return=r,d.sibling=O,r.child=d,io(null,d),d=r.child,O=a.child.memoizedState,O===null?O=ss(h):(v=O.cachePool,v!==null?(Y=hi._currentValue,v=v.parent!==Y?{parent:Y,pool:Y}:v):v=ag(),O={baseLanes:O.baseLanes|h,cachePool:v}),d.memoizedState=O,d.childLanes=pm(a,C,h),r.memoizedState=zg,io(a.child,d)):(Lo(r),h=a.child,a=h.sibling,h=Ls(h,{mode:"visible",children:d.children}),h.return=r,h.sibling=null,a!==null&&(C=r.deletions,C===null?(r.deletions=[a],r.flags|=16):C.push(a)),r.child=h,r.memoizedState=null,h)}function Rf(a,r){return r=gm({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function gm(a,r){return a=Pn(22,a,null,r),a.lanes=0,a}function Bg(a,r,h){return Vo(r,a.child,null,h),a=Rf(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function Xy(a,r,h){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),jd(a.return,r,h)}function Ou(a,r,h,d,v,T){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:v,treeForkCount:T}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=h,C.tailMode=v,C.treeForkCount=T)}function qs(a,r,h){var d=r.pendingProps,v=d.revealOrder,T=d.tail;d=d.children;var C=Ne.current,O=(C&2)!==0;if(O?(C=C&1|2,r.flags|=128):C&=1,At(Ne,C),Mi(a,r,d,h),d=Ie?Uc:0,!O&&a!==null&&(a.flags&128)!==0)t:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Xy(a,h,r);else if(a.tag===19)Xy(a,h,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(h=r.child,v=null;h!==null;)a=h.alternate,a!==null&&ca(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),Ou(r,!1,v,h,T,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(a=v.alternate,a!==null&&ca(a)===null){r.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}Ou(r,!0,h,null,T,d);break;case"together":Ou(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function ii(a,r,h){if(a!==null&&(r.dependencies=a.dependencies),uo|=r.lanes,(h&r.childLanes)===0)if(a!==null){if(eo(a,r,h,!1),(h&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,h=Ls(a,a.pendingProps),r.child=h,h.return=r;a.sibling!==null;)a=a.sibling,h=h.sibling=Ls(a,a.pendingProps),h.return=r;h.sibling=null}return r.child}function _m(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&mf(a)))}function L2(a,r,h){switch(r.tag){case 3:vn(r,r.stateNode.containerInfo),Mo(r,hi,a.memoizedState.cache),El();break;case 27:case 5:Nr(r);break;case 4:vn(r,r.stateNode.containerInfo);break;case 10:Mo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ug(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Lo(r),r.flags|=128,null):(h&r.child.childLanes)!==0?Qy(a,r,h):(Lo(r),a=ii(a,r,h),a!==null?a.sibling:null);Lo(r);break;case 19:var v=(a.flags&128)!==0;if(d=(h&r.childLanes)!==0,d||(eo(a,r,h,!1),d=(h&r.childLanes)!==0),v){if(d)return qs(a,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),At(Ne,Ne.current),d)break;return null;case 22:return r.lanes=0,Du(a,r,h,r.pendingProps);case 24:Mo(r,hi,a.memoizedState.cache)}return ii(a,r,h)}function ym(a,r,h){if(a!==null)if(a.memoizedProps!==r.pendingProps)fi=!0;else{if(!_m(a,h)&&(r.flags&128)===0)return fi=!1,L2(a,r,h);fi=(a.flags&131072)!==0}else fi=!1,Ie&&(r.flags&1048576)!==0&&ny(r,Uc,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(a=Tu(r.elementType),r.type=a,typeof a=="function")zd(a)?(d=Il(a,d),r.tag=1,r=mm(null,r,a,d,h)):(r.tag=0,r=Jc(null,r,a,d,h));else{if(a!=null){var v=a.$$typeof;if(v===Z){r.tag=11,r=Ug(null,r,a,d,h);break t}else if(v===V){r.tag=14,r=Nu(null,r,a,d,h);break t}}throw r=Ft(a)||a,Error(i(306,r,""))}}return r;case 0:return Jc(a,r,r.type,r.pendingProps,h);case 1:return d=r.type,v=Il(d,r.pendingProps),mm(a,r,d,v,h);case 3:t:{if(vn(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var T=r.memoizedState;v=T.element,rg(a,r),Fc(r,d,null,h);var C=r.memoizedState;if(d=C.cache,Mo(r,hi,d),d!==T.cache&&Kd(r,[hi],h,!0),vf(),d=C.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=Yy(a,r,d,h);break t}else if(d!==v){v=oa(Error(i(424)),r),Zr(v),r=Yy(a,r,d,h);break t}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,hn=fo(a.firstChild),jn=r,Ie=!0,Oo=null,la=!0,h=Zd(r,null,d,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(El(),d===v){r=ii(a,r,h);break t}Mi(a,r,d,h)}r=r.child}return r;case 26:return xu(a,r),a===null?(h=L4(r.type,null,r.pendingProps,null))?r.memoizedState=h:Ie||(h=r.type,a=r.pendingProps,d=$y(ae.current).createElement(h),d[Mn]=r,d[ci]=a,Cs(d,h,a),qn(d),r.stateNode=d):r.memoizedState=L4(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return Nr(r),a===null&&Ie&&(d=r.stateNode=P4(r.type,r.pendingProps,ae.current),jn=r,la=!0,v=hn,rh(r.type)?(W2=v,hn=fo(d.firstChild)):hn=v),Mi(a,r,r.pendingProps.children,h),xu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&Ie&&((v=d=hn)&&(d=YI(d,r.type,r.pendingProps,la),d!==null?(r.stateNode=d,jn=r,hn=fo(d.firstChild),la=!1,v=!0):v=!1),v||Wr(r)),Nr(r),v=r.type,T=r.pendingProps,C=a!==null?a.memoizedProps:null,d=T.children,K2(v,T)?d=null:C!==null&&K2(v,C)&&(r.flags|=32),r.memoizedState!==null&&(v=em(a,r,Iu,null,null,h),Wg._currentValue=v),xu(a,r),Mi(a,r,d,h),r.child;case 6:return a===null&&Ie&&((a=h=hn)&&(h=QI(h,r.pendingProps,la),h!==null?(r.stateNode=h,jn=r,hn=null,a=!0):a=!1),a||Wr(r)),null;case 13:return Qy(a,r,h);case 4:return vn(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=Vo(r,null,d,h):Mi(a,r,d,h),r.child;case 11:return Ug(a,r,r.type,r.pendingProps,h);case 7:return Mi(a,r,r.pendingProps,h),r.child;case 8:return Mi(a,r,r.pendingProps.children,h),r.child;case 12:return Mi(a,r,r.pendingProps.children,h),r.child;case 10:return d=r.pendingProps,Mo(r,r.type,d.value),Mi(a,r,d.children,h),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,Sl(r),v=re(v),d=d(v),r.flags|=1,Mi(a,r,d,h),r.child;case 14:return Nu(a,r,r.type,r.pendingProps,h);case 15:return hm(a,r,r.type,r.pendingProps,h);case 19:return qs(a,r,h);case 31:return dm(a,r,h);case 22:return Du(a,r,h,r.pendingProps);case 24:return Sl(r),d=re(hi),a===null?(v=Qd(),v===null&&(v=oe,T=eg(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=h),v=T),r.memoizedState={parent:d,cache:v},yf(r),Mo(r,hi,v)):((a.lanes&h)!==0&&(rg(a,r),Fc(r,null,null,h),vf()),v=a.memoizedState,T=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Mo(r,hi,d)):(d=T.cache,Mo(r,hi,d),d!==v.cache&&Kd(r,[hi],h,!0))),Mi(a,r,r.pendingProps.children,h),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function so(a){a.flags|=4}function Cf(a,r,h,d,v){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(zn())a.flags|=8192;else throw no=Xd,gf}else a.flags&=-16777217}function Gg(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!H4(r))if(zn())a.flags|=8192;else throw no=Xd,gf}function zo(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Or():536870912,a.lanes|=r,_n|=r)}function ao(a,r){if(!Ie)switch(a.tailMode){case"hidden":r=a.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function sn(a){var r=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(r)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=h,r}function If(a,r,h){var d=r.pendingProps;switch(Hd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(r),null;case 1:return sn(r),null;case 3:return h=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),to(hi),Ve(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Bc(r)?so(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fd())),sn(r),null;case 26:var v=r.type,T=r.memoizedState;return a===null?(so(r),T!==null?(sn(r),Gg(r,T)):(sn(r),Cf(r,v,null,d,h))):T?T!==a.memoizedState?(so(r),sn(r),Gg(r,T)):(sn(r),r.flags&=-16777217):(a=a.memoizedProps,a!==d&&so(r),sn(r),Cf(r,v,a,d,h)),null;case 27:if(To(r),h=ae.current,v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&so(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return sn(r),null}a=Ht.current,Bc(r)?iy(r):(a=P4(v,d,h),r.stateNode=a,so(r))}return sn(r),null;case 5:if(To(r),v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&so(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return sn(r),null}if(T=Ht.current,Bc(r))iy(r);else{var C=$y(ae.current);switch(T){case 1:T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=C.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?C.createElement(v,{is:d.is}):C.createElement(v)}}T[Mn]=r,T[ci]=d;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)T.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=T;t:switch(Cs(T,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&so(r)}}return sn(r),Cf(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,h),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&so(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=ae.current,Bc(r)){if(a=r.stateNode,h=r.memoizedProps,d=null,v=jn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[Mn]=r,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||b4(a.nodeValue,h)),a||Wr(r,!0)}else a=$y(a).createTextNode(d),a[Mn]=r,r.stateNode=a}return sn(r),null;case 31:if(h=r.memoizedState,a===null||a.memoizedState!==null){if(d=Bc(r),h!==null){if(a===null){if(!d)throw Error(i(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[Mn]=r}else El(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sn(r),a=!1}else h=Fd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return r.flags&256?(ei(r),r):(ei(r),null);if((r.flags&128)!==0)throw Error(i(558))}return sn(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Bc(r),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Mn]=r}else El(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sn(r),v=!1}else v=Fd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(ei(r),r):(ei(r),null)}return ei(r),(r.flags&128)!==0?(r.lanes=h,r):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==v&&(d.flags|=2048)),h!==a&&h&&(r.child.flags|=8192),zo(r,r.updateQueue),sn(r),null);case 4:return Ve(),a===null&&G2(r.stateNode.containerInfo),sn(r),null;case 10:return to(r.type),sn(r),null;case 19:if(ft(Ne),d=r.memoizedState,d===null)return sn(r),null;if(v=(r.flags&128)!==0,T=d.rendering,T===null)if(v)ao(d,!1);else{if(Ln!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(T=ca(a),T!==null){for(r.flags|=128,ao(d,!1),a=T.updateQueue,r.updateQueue=a,zo(r,a),r.subtreeFlags=0,a=h,h=r.child;h!==null;)Vc(h,a),h=h.sibling;return At(Ne,Ne.current&1|2),Ie&&Xr(r,d.treeForkCount),r.child}a=a.sibling}d.tail!==null&&pn()>si&&(r.flags|=128,v=!0,ao(d,!1),r.lanes=4194304)}else{if(!v)if(a=ca(T),a!==null){if(r.flags|=128,v=!0,a=a.updateQueue,r.updateQueue=a,zo(r,a),ao(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!Ie)return sn(r),null}else 2*pn()-d.renderingStartTime>si&&h!==536870912&&(r.flags|=128,v=!0,ao(d,!1),r.lanes=4194304);d.isBackwards?(T.sibling=r.child,r.child=T):(a=d.last,a!==null?a.sibling=T:r.child=T,d.last=T)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=pn(),a.sibling=null,h=Ne.current,At(Ne,v?h&1|2:h&1),Ie&&Xr(r,d.treeForkCount),a):(sn(r),null);case 22:case 23:return ei(r),Ef(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(h&536870912)!==0&&(r.flags&128)===0&&(sn(r),r.subtreeFlags&6&&(r.flags|=8192)):sn(r),h=r.updateQueue,h!==null&&zo(r,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048),a!==null&&ft(bl),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),to(hi),sn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function qa(a,r){switch(Hd(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return to(hi),Ve(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return To(r),null;case 31:if(r.memoizedState!==null){if(ei(r),r.alternate===null)throw Error(i(340));El()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(ei(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));El()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return ft(Ne),null;case 4:return Ve(),null;case 10:return to(r.type),null;case 22:case 23:return ei(r),Ef(),a!==null&&ft(bl),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return to(hi),null;case 25:return null;default:return null}}function ha(a,r){switch(Hd(r),r.tag){case 3:to(hi),Ve();break;case 26:case 27:case 5:To(r);break;case 4:Ve();break;case 31:r.memoizedState!==null&&ei(r);break;case 13:ei(r);break;case 19:ft(Ne);break;case 10:to(r.type);break;case 22:case 23:ei(r),Ef(),a!==null&&ft(bl);break;case 24:to(hi)}}function Fa(a,r){try{var h=r.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var v=d.next;h=v;do{if((h.tag&a)===a){d=void 0;var T=h.create,C=h.inst;d=T(),C.destroy=d}h=h.next}while(h!==v)}}catch(O){He(r,r.return,O)}}function Ki(a,r,h){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var T=v.next;d=T;do{if((d.tag&a)===a){var C=d.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,v=r;var Y=h,at=O;try{at()}catch(pt){He(v,Y,pt)}}}d=d.next}while(d!==T)}}catch(pt){He(r,r.return,pt)}}function yr(a){var r=a.updateQueue;if(r!==null){var h=a.stateNode;try{ly(r,h)}catch(d){He(a,a.return,d)}}}function Pi(a,r,h){h.props=Il(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){He(a,r,d)}}function Bo(a,r){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(v){He(a,r,v)}}function Yi(a,r){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(v){He(a,r,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){He(a,r,v)}else h.current=null}function Nf(a){var r=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(v){He(a,a.return,v)}}function Ti(a,r,h){try{var d=a.stateNode;GI(d,a.type,h,r),d[ci]=r}catch(v){He(a,a.return,v)}}function bn(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&rh(a.type)||a.tag===4}function we(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||bn(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&rh(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ro(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,r):(r=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,r.appendChild(a),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=cr));else if(d!==4&&(d===27&&rh(a.type)&&(h=a.stateNode,r=null),a=a.child,a!==null))for(ro(a,r,h),a=a.sibling;a!==null;)ro(a,r,h),a=a.sibling}function Ss(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?h.insertBefore(a,r):h.appendChild(a);else if(d!==4&&(d===27&&rh(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Ss(a,r,h),a=a.sibling;a!==null;)Ss(a,r,h),a=a.sibling}function vm(a){var r=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Cs(r,d,h),r[Mn]=a,r[ci]=h}catch(T){He(a,a.return,T)}}var ja=!1,fn=!1,vr=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,Vi=null;function U2(a,r){if(a=a.containerInfo,F2=r1,a=Z_(a),Jp(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var v=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break t}var C=0,O=-1,Y=-1,at=0,pt=0,vt=a,ot=null;e:for(;;){for(var mt;vt!==h||v!==0&&vt.nodeType!==3||(O=C+v),vt!==T||d!==0&&vt.nodeType!==3||(Y=C+d),vt.nodeType===3&&(C+=vt.nodeValue.length),(mt=vt.firstChild)!==null;)ot=vt,vt=mt;for(;;){if(vt===a)break e;if(ot===h&&++at===v&&(O=C),ot===T&&++pt===d&&(Y=C),(mt=vt.nextSibling)!==null)break;vt=ot,ot=vt.parentNode}vt=mt}h=O===-1||Y===-1?null:{start:O,end:Y}}else h=null}h=h||{start:0,end:0}}else h=null;for(j2={focusedElem:a,selectionRange:h},r1=!1,Vi=r;Vi!==null;)if(r=Vi,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Vi=a;else for(;Vi!==null;){switch(r=Vi,T=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)v=a[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,h=r,v=T.memoizedProps,T=T.memoizedState,d=h.stateNode;try{var Kt=Il(h.type,v);a=d.getSnapshotBeforeUpdate(Kt,T),d.__reactInternalSnapshotBeforeUpdate=a}catch(se){He(h,h.return,se)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,h=a.nodeType,h===9)Q2(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Q2(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Vi=a;break}Vi=r.return}}function An(a,r,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:Qa(a,h),d&4&&Fa(5,h);break;case 1:if(Qa(a,h),d&4)if(a=h.stateNode,r===null)try{a.componentDidMount()}catch(C){He(h,h.return,C)}else{var v=Il(h.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(v,r,a.__reactInternalSnapshotBeforeUpdate)}catch(C){He(h,h.return,C)}}d&64&&yr(h),d&512&&Bo(h,h.return);break;case 3:if(Qa(a,h),d&64&&(a=h.updateQueue,a!==null)){if(r=null,h.child!==null)switch(h.child.tag){case 27:case 5:r=h.child.stateNode;break;case 1:r=h.child.stateNode}try{ly(a,r)}catch(C){He(h,h.return,C)}}break;case 27:r===null&&d&4&&vm(h);case 26:case 5:Qa(a,h),r===null&&d&4&&Nf(h),d&512&&Bo(h,h.return);break;case 12:Qa(a,h);break;case 31:Qa(a,h),d&4&&Nl(a,h);break;case 13:Qa(a,h),d&4&&Wc(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=p.bind(null,h),XI(a,h))));break;case 22:if(d=h.memoizedState!==null||ja,!d){r=r!==null&&r.memoizedState!==null||fn,v=ja;var T=fn;ja=d,(fn=r)&&!T?bs(a,h,(h.subtreeFlags&8772)!==0):Qa(a,h),ja=v,fn=T}break;case 30:break;default:Qa(a,h)}}function Df(a){var r=a.alternate;r!==null&&(a.alternate=null,Df(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&Vr(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var We=null,as=!1;function Ka(a,r,h){for(h=h.child;h!==null;)Em(a,r,h),h=h.sibling}function Em(a,r,h){if(Ce&&typeof Ce.onCommitFiberUnmount=="function")try{Ce.onCommitFiberUnmount(ke,h)}catch{}switch(h.tag){case 26:fn||Yi(h,r),Ka(a,r,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||Yi(h,r);var d=We,v=as;rh(h.type)&&(We=h.stateNode,as=!1),Ka(a,r,h),Qg(h.stateNode),We=d,as=v;break;case 5:fn||Yi(h,r);case 6:if(d=We,v=as,We=null,Ka(a,r,h),We=d,as=v,We!==null)if(as)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(h.stateNode)}catch(T){He(h,r,T)}else try{We.removeChild(h.stateNode)}catch(T){He(h,r,T)}break;case 18:We!==null&&(as?(a=We,N4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Im(a)):N4(We,h.stateNode));break;case 4:d=We,v=as,We=h.stateNode.containerInfo,as=!0,Ka(a,r,h),We=d,as=v;break;case 0:case 11:case 14:case 15:Ki(2,h,r),fn||Ki(4,h,r),Ka(a,r,h);break;case 1:fn||(Yi(h,r),d=h.stateNode,typeof d.componentWillUnmount=="function"&&Pi(h,r,d)),Ka(a,r,h);break;case 21:Ka(a,r,h);break;case 22:fn=(d=fn)||h.memoizedState!==null,Ka(a,r,h),fn=d;break;default:Ka(a,r,h)}}function Nl(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Im(a)}catch(h){He(r,r.return,h)}}}function Wc(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Im(a)}catch(h){He(r,r.return,h)}}function Hg(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new Jy),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new Jy),r;default:throw Error(i(435,a.tag))}}function Go(a,r){var h=Hg(a);r.forEach(function(d){if(!h.has(d)){h.add(d);var v=y.bind(null,a,d);d.then(v,v)}})}function Si(a,r){var h=r.deletions;if(h!==null)for(var d=0;d<h.length;d++){var v=h[d],T=a,C=r,O=C;t:for(;O!==null;){switch(O.tag){case 27:if(rh(O.type)){We=O.stateNode,as=!1;break t}break;case 5:We=O.stateNode,as=!1;break t;case 3:case 4:We=O.stateNode.containerInfo,as=!0;break t}O=O.return}if(We===null)throw Error(i(160));Em(T,C,v),We=null,as=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Dl(r,a),r=r.sibling}var Ya=null;function Dl(a,r){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Si(r,a),bi(a),d&4&&(Ki(3,a,a.return),Fa(3,a),Ki(5,a,a.return));break;case 1:Si(r,a),bi(a),d&512&&(fn||h===null||Yi(h,h.return)),d&64&&ja&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var v=Ya;if(Si(r,a),bi(a),d&512&&(fn||h===null||Yi(h,h.return)),d&4){var T=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":T=v.getElementsByTagName("title")[0],(!T||T[Ms]||T[Mn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(d),v.head.insertBefore(T,v.querySelector("head > title"))),Cs(T,d,h),T[Mn]=a,qn(T),d=T;break t;case"link":var C=B4("link","href",v).get(d+(h.href||""));if(C){for(var O=0;O<C.length;O++)if(T=C[O],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(O,1);break e}}T=v.createElement(d),Cs(T,d,h),v.head.appendChild(T);break;case"meta":if(C=B4("meta","content",v).get(d+(h.content||""))){for(O=0;O<C.length;O++)if(T=C[O],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(O,1);break e}}T=v.createElement(d),Cs(T,d,h),v.head.appendChild(T);break;default:throw Error(i(468,d))}T[Mn]=a,qn(T),d=T}a.stateNode=d}else G4(v,a.type,a.stateNode);else a.stateNode=z4(v,d,a.memoizedProps);else T!==d?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,d===null?G4(v,a.type,a.stateNode):z4(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&Ti(a,a.memoizedProps,h.memoizedProps)}break;case 27:Si(r,a),bi(a),d&512&&(fn||h===null||Yi(h,h.return)),h!==null&&d&4&&Ti(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Si(r,a),bi(a),d&512&&(fn||h===null||Yi(h,h.return)),a.flags&32){v=a.stateNode;try{ps(v,"")}catch(Kt){He(a,a.return,Kt)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,Ti(a,v,h!==null?h.memoizedProps:v)),d&1024&&(vr=!0);break;case 6:if(Si(r,a),bi(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(Kt){He(a,a.return,Kt)}}break;case 3:if(n1=null,v=Ya,Ya=t1(r.containerInfo),Si(r,a),Ya=v,bi(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Im(r.containerInfo)}catch(Kt){He(a,a.return,Kt)}vr&&(vr=!1,Tm(a));break;case 4:d=Ya,Ya=t1(a.stateNode.containerInfo),Si(r,a),bi(a),Ya=d;break;case 12:Si(r,a),bi(a);break;case 31:Si(r,a),bi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Go(a,d)));break;case 13:Si(r,a),bi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Zc=pn()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Go(a,d)));break;case 22:v=a.memoizedState!==null;var Y=h!==null&&h.memoizedState!==null,at=ja,pt=fn;if(ja=at||v,fn=pt||Y,Si(r,a),fn=pt,ja=at,bi(a),d&8192)t:for(r=a.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(h===null||Y||ja||fn||oo(a)),h=null,r=a;;){if(r.tag===5||r.tag===26){if(h===null){Y=h=r;try{if(T=Y.stateNode,v)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=Y.stateNode;var vt=Y.memoizedProps.style,ot=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;O.style.display=ot==null||typeof ot=="boolean"?"":(""+ot).trim()}}catch(Kt){He(Y,Y.return,Kt)}}}else if(r.tag===6){if(h===null){Y=r;try{Y.stateNode.nodeValue=v?"":Y.memoizedProps}catch(Kt){He(Y,Y.return,Kt)}}}else if(r.tag===18){if(h===null){Y=r;try{var mt=Y.stateNode;v?D4(mt,!0):D4(Y.stateNode,!1)}catch(Kt){He(Y,Y.return,Kt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;h===r&&(h=null),r=r.return}h===r&&(h=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,Go(a,h))));break;case 19:Si(r,a),bi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Go(a,d)));break;case 30:break;case 21:break;default:Si(r,a),bi(a)}}function bi(a){var r=a.flags;if(r&2){try{for(var h,d=a.return;d!==null;){if(bn(d)){h=d;break}d=d.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,T=we(a);Ss(a,T,v);break;case 5:var C=h.stateNode;h.flags&32&&(ps(C,""),h.flags&=-33);var O=we(a);Ss(a,O,C);break;case 3:case 4:var Y=h.stateNode.containerInfo,at=we(a);ro(a,at,Y);break;default:throw Error(i(161))}}catch(pt){He(a,a.return,pt)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Tm(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Tm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function Qa(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)An(a,r.alternate,r),r=r.sibling}function oo(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Ki(4,r,r.return),oo(r);break;case 1:Yi(r,r.return);var h=r.stateNode;typeof h.componentWillUnmount=="function"&&Pi(r,r.return,h),oo(r);break;case 27:Qg(r.stateNode);case 26:case 5:Yi(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}a=a.sibling}}function bs(a,r,h){for(h=h&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=a,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:bs(v,T,h),Fa(4,T);break;case 1:if(bs(v,T,h),d=T,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(at){He(d,d.return,at)}if(d=T,v=d.updateQueue,v!==null){var O=d.stateNode;try{var Y=v.shared.hiddenCallbacks;if(Y!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Y.length;v++)jc(Y[v],O)}catch(at){He(d,d.return,at)}}h&&C&64&&yr(T),Bo(T,T.return);break;case 27:vm(T);case 26:case 5:bs(v,T,h),h&&d===null&&C&4&&Nf(T),Bo(T,T.return);break;case 12:bs(v,T,h);break;case 31:bs(v,T,h),h&&C&4&&Nl(v,T);break;case 13:bs(v,T,h),h&&C&4&&Wc(v,T);break;case 22:T.memoizedState===null&&bs(v,T,h),Bo(T,T.return);break;case 30:break;default:bs(v,T,h)}r=r.sibling}}function xl(a,r){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&vu(h))}function Mu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&vu(a))}function Qi(a,r,h,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qg(a,r,h,d),r=r.sibling}function qg(a,r,h,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Qi(a,r,h,d),v&2048&&Fa(9,r);break;case 1:Qi(a,r,h,d);break;case 3:Qi(a,r,h,d),v&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&vu(a)));break;case 12:if(v&2048){Qi(a,r,h,d),a=r.stateNode;try{var T=r.memoizedProps,C=T.id,O=T.onPostCommit;typeof O=="function"&&O(C,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Y){He(r,r.return,Y)}}else Qi(a,r,h,d);break;case 31:Qi(a,r,h,d);break;case 13:Qi(a,r,h,d);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?Qi(a,r,h,d):lo(a,r):T._visibility&2?Qi(a,r,h,d):(T._visibility|=2,Xi(a,r,h,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&xl(C,r);break;case 24:Qi(a,r,h,d),v&2048&&Mu(r.alternate,r);break;default:Qi(a,r,h,d)}}function Xi(a,r,h,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=a,C=r,O=h,Y=d,at=C.flags;switch(C.tag){case 0:case 11:case 15:Xi(T,C,O,Y,v),Fa(8,C);break;case 23:break;case 22:var pt=C.stateNode;C.memoizedState!==null?pt._visibility&2?Xi(T,C,O,Y,v):lo(T,C):(pt._visibility|=2,Xi(T,C,O,Y,v)),v&&at&2048&&xl(C.alternate,C);break;case 24:Xi(T,C,O,Y,v),v&&at&2048&&Mu(C.alternate,C);break;default:Xi(T,C,O,Y,v)}r=r.sibling}}function lo(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var h=a,d=r,v=d.flags;switch(d.tag){case 22:lo(h,d),v&2048&&xl(d.alternate,d);break;case 24:lo(h,d),v&2048&&Mu(d.alternate,d);break;default:lo(h,d)}r=r.sibling}}var Pu=8192;function fa(a,r,h){if(a.subtreeFlags&Pu)for(a=a.child;a!==null;)Sm(a,r,h),a=a.sibling}function Sm(a,r,h){switch(a.tag){case 26:fa(a,r,h),a.flags&Pu&&a.memoizedState!==null&&o7(h,Ya,a.memoizedState,a.memoizedProps);break;case 5:fa(a,r,h);break;case 3:case 4:var d=Ya;Ya=t1(a.stateNode.containerInfo),fa(a,r,h),Ya=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Pu,Pu=16777216,fa(a,r,h),Pu=d):fa(a,r,h));break;default:fa(a,r,h)}}function Vu(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function Ol(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Vi=d,Kn(d,a)}Vu(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Fs(a),a=a.sibling}function Fs(a){switch(a.tag){case 0:case 11:case 15:Ol(a),a.flags&2048&&Ki(9,a,a.return);break;case 3:Ol(a);break;case 12:Ol(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,As(a)):Ol(a);break;default:Ol(a)}}function As(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Vi=d,Kn(d,a)}Vu(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Ki(8,r,r.return),As(r);break;case 22:h=r.stateNode,h._visibility&2&&(h._visibility&=-3,As(r));break;default:As(r)}a=a.sibling}}function Kn(a,r){for(;Vi!==null;){var h=Vi;switch(h.tag){case 0:case 11:case 15:Ki(8,h,r);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:vu(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Vi=d;else t:for(h=a;Vi!==null;){d=Vi;var v=d.sibling,T=d.return;if(Df(d),d===h){Vi=null;break t}if(v!==null){v.return=T,Vi=v;break t}Vi=T}}}var Ho={getCacheForType:function(a){var r=re(hi),h=r.data.get(a);return h===void 0&&(h=a(),r.data.set(a,h)),h},cacheSignal:function(){return re(hi).controller.signal}},de=typeof WeakMap=="function"?WeakMap:Map,Jt=0,oe=null,_e=null,pe=0,xe=0,rs=null,Xa=!1,Er=!1,Fg=!1,da=0,Ln=0,uo=0,Ml=0,xf=0,ws=0,_n=0,ku=null,Yn=null,Qn=!1,Zc=0,jg=0,si=1/0,Un=null,ai=null,Ze=0,ma=null,$c=null,Ja=0,th=0,eh=null,Of=null,Pl=0,Lu=null;function pa(){return(Jt&2)!==0&&pe!==0?pe&-pe:W.T!==null?ct():pc()}function Se(){if(ws===0)if((pe&536870912)===0||Ie){var a=So;So<<=1,(So&3932160)===0&&(So=262144),ws=a}else ws=536870912;return a=Bs.current,a!==null&&(a.flags|=32),ws}function ye(a,r,h){(a===oe&&(xe===2||xe===9)||a.cancelPendingCommit!==null)&&(kl(a,0),di(a,pe,ws,!1)),nl(a,h),((Jt&2)===0||a!==oe)&&(a===oe&&((Jt&2)===0&&(Ml|=h),Ln===4&&di(a,pe,ws,!1)),Rt(a))}function be(a,r,h){if((Jt&6)!==0)throw Error(i(327));var d=!h&&(r&127)===0&&(r&a.expiredLanes)===0||wa(a,r),v=d?Mf(a,r):Rs(a,r,!0),T=d;do{if(v===0){Er&&!d&&di(a,r,0,!1);break}else{if(h=a.current.alternate,T&&!$e(h)){v=Rs(a,r,!1),T=!1;continue}if(v===2){if(T=r,a.errorRecoveryDisabledLanes&T)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var O=a;v=ku;var Y=O.current.memoizedState.isDehydrated;if(Y&&(kl(O,C).flags|=256),C=Rs(O,C,!1),C!==2){if(Fg&&!Y){O.errorRecoveryDisabledLanes|=T,Ml|=T,v=4;break t}T=Yn,Yn=v,T!==null&&(Yn===null?Yn=T:Yn.push.apply(Yn,T))}v=C}if(T=!1,v!==2)continue}}if(v===1){kl(a,0),di(a,r,0,!0);break}t:{switch(d=a,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:di(d,r,ws,!Xa);break t;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Zc+300-pn(),10<v)){if(di(d,r,ws,!Xa),ea(d,0,!0)!==0)break t;Ja=r,d.timeoutHandle=C4(Re.bind(null,d,h,Yn,Un,Qn,r,ws,Ml,_n,Xa,T,"Throttled",-0,0),v);break t}Re(d,h,Yn,Un,Qn,r,ws,Ml,_n,Xa,T,null,-0,0)}}break}while(!0);Rt(a)}function Re(a,r,h,d,v,T,C,O,Y,at,pt,vt,ot,mt){if(a.timeoutHandle=-1,vt=r.subtreeFlags,vt&8192||(vt&16785408)===16785408){vt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cr},Sm(r,T,vt);var Kt=(T&62914560)===T?Zc-pn():(T&4194048)===T?jg-pn():0;if(Kt=l7(vt,Kt),Kt!==null){Ja=T,a.cancelPendingCommit=Kt(Fo.bind(null,a,r,T,h,d,v,C,O,Y,pt,vt,null,ot,mt)),di(a,T,C,!at);return}}Fo(a,r,T,h,d,v,C,O,Y)}function $e(a){for(var r=a;;){var h=r.tag;if((h===0||h===11||h===15)&&r.flags&16384&&(h=r.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var v=h[d],T=v.getSnapshot;v=v.value;try{if(!ys(T(),v))return!1}catch{return!1}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function di(a,r,h,d){r&=~xf,r&=~Ml,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var v=r;0<v;){var T=31-xn(v),C=1<<T;d[T]=-1,v&=~C}h!==0&&rr(a,h,r)}function Tr(){return(Jt&6)===0?(Gt(0),!1):!0}function Vl(){if(_e!==null){if(xe===0)var a=_e.return;else a=_e,$r=Tl=null,mg(a),Au=null,wu=0,a=_e;for(;a!==null;)ha(a.alternate,a),a=a.return;_e=null}}function kl(a,r){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,FI(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Ja=0,Vl(),oe=a,_e=h=Ls(a.current,null),pe=r,xe=0,rs=null,Xa=!1,Er=wa(a,r),Fg=!1,_n=ws=xf=Ml=uo=Ln=0,Yn=ku=null,Qn=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var v=31-xn(d),T=1<<v;r|=a[v],d&=~T}return da=r,ff(),h}function co(a,r){fe=null,W.H=Xc,r===Eu||r===ge?(r=Su(),xe=3):r===gf?(r=Su(),xe=4):xe=r===cm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,rs=r,_e===null&&(Ln=1,um(a,oa(r,a.current)))}function zn(){var a=Bs.current;return a===null?!0:(pe&4194048)===pe?Ts===null:(pe&62914560)===pe||(pe&536870912)!==0?a===Ts:!1}function qo(){var a=W.H;return W.H=Xc,a===null?Xc:a}function Ll(){var a=W.A;return W.A=Ho,a}function nh(){Ln=4,Xa||(pe&4194048)!==pe&&Bs.current!==null||(Er=!0),(uo&134217727)===0&&(Ml&134217727)===0||oe===null||di(oe,pe,ws,!1)}function Rs(a,r,h){var d=Jt;Jt|=2;var v=qo(),T=Ll();(oe!==a||pe!==r)&&(Un=null,kl(a,r)),r=!1;var C=Ln;t:do try{if(xe!==0&&_e!==null){var O=_e,Y=rs;switch(xe){case 8:Vl(),C=6;break t;case 3:case 2:case 9:case 6:Bs.current===null&&(r=!0);var at=xe;if(xe=0,rs=null,Uu(a,O,Y,at),h&&Er){C=0;break t}break;default:at=xe,xe=0,rs=null,Uu(a,O,Y,at)}}ih(),C=Ln;break}catch(pt){co(a,pt)}while(!0);return r&&a.shellSuspendCounter++,$r=Tl=null,Jt=d,W.H=v,W.A=T,_e===null&&(oe=null,pe=0,ff()),C}function ih(){for(;_e!==null;)bm(_e)}function Mf(a,r){var h=Jt;Jt|=2;var d=qo(),v=Ll();oe!==a||pe!==r?(Un=null,si=pn()+500,kl(a,r)):Er=wa(a,r);t:do try{if(xe!==0&&_e!==null){r=_e;var T=rs;e:switch(xe){case 1:xe=0,rs=null,Uu(a,r,T,1);break;case 2:case 9:if(zs(T)){xe=0,rs=null,Pf(r);break}r=function(){xe!==2&&xe!==9||oe!==a||(xe=7),Rt(a)},T.then(r,r);break t;case 3:xe=7;break t;case 4:xe=5;break t;case 7:zs(T)?(xe=0,rs=null,Pf(r)):(xe=0,rs=null,Uu(a,r,T,7));break;case 5:var C=null;switch(_e.tag){case 26:C=_e.memoizedState;case 5:case 27:var O=_e;if(C?H4(C):O.stateNode.complete){xe=0,rs=null;var Y=O.sibling;if(Y!==null)_e=Y;else{var at=O.return;at!==null?(_e=at,Ul(at)):_e=null}break e}}xe=0,rs=null,Uu(a,r,T,5);break;case 6:xe=0,rs=null,Uu(a,r,T,6);break;case 8:Vl(),Ln=6;break t;default:throw Error(i(462))}}js();break}catch(pt){co(a,pt)}while(!0);return $r=Tl=null,W.H=d,W.A=v,Jt=h,_e!==null?0:(oe=null,pe=0,ff(),Ln)}function js(){for(;_e!==null&&!Ci();)bm(_e)}function bm(a){var r=ym(a.alternate,a,da);a.memoizedProps=a.pendingProps,r===null?Ul(a):_e=r}function Pf(a){var r=a,h=r.alternate;switch(r.tag){case 15:case 0:r=wf(h,r,r.pendingProps,r.type,void 0,pe);break;case 11:r=wf(h,r,r.pendingProps,r.type.render,r.ref,pe);break;case 5:mg(r);default:ha(h,r),r=_e=Vc(r,da),r=ym(h,r,da)}a.memoizedProps=a.pendingProps,r===null?Ul(a):_e=r}function Uu(a,r,h,d){$r=Tl=null,mg(r),Au=null,wu=0;var v=r.return;try{if(Ei(a,v,r,h,pe)){Ln=1,um(a,oa(h,a.current)),_e=null;return}}catch(T){if(v!==null)throw _e=v,T;Ln=1,um(a,oa(h,a.current)),_e=null;return}r.flags&32768?(Ie||d===1?a=!0:Er||(pe&536870912)!==0?a=!1:(Xa=a=!0,(d===2||d===9||d===3||d===6)&&(d=Bs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Vf(r,a)):Ul(r)}function Ul(a){var r=a;do{if((r.flags&32768)!==0){Vf(r,Xa);return}a=r.return;var h=If(r.alternate,r,da);if(h!==null){_e=h;return}if(r=r.sibling,r!==null){_e=r;return}_e=r=a}while(r!==null);Ln===0&&(Ln=5)}function Vf(a,r){do{var h=qa(a.alternate,a);if(h!==null){h.flags&=32767,_e=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!r&&(a=a.sibling,a!==null)){_e=a;return}_e=a=h}while(a!==null);Ln=6,_e=null}function Fo(a,r,h,d,v,T,C,O,Y){a.cancelPendingCommit=null;do sh();while(Ze!==0);if((Jt&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=xi,dc(a,h,T,C,O,Y),a===oe&&(_e=oe=null,pe=0),$c=r,ma=a,Ja=h,th=T,eh=v,Of=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,S(ta,function(){return Am(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=W.T,W.T=null,v=St.p,St.p=2,C=Jt,Jt|=4;try{U2(a,r,h)}finally{Jt=C,St.p=v,W.T=d}}Ze=1,mi(),jo(),zu()}}function mi(){if(Ze===1){Ze=0;var a=ma,r=$c,h=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var d=St.p;St.p=2;var v=Jt;Jt|=4;try{Dl(r,a);var T=j2,C=Z_(a.containerInfo),O=T.focusedElem,Y=T.selectionRange;if(C!==O&&O&&O.ownerDocument&&cn(O.ownerDocument.documentElement,O)){if(Y!==null&&Jp(O)){var at=Y.start,pt=Y.end;if(pt===void 0&&(pt=at),"selectionStart"in O)O.selectionStart=at,O.selectionEnd=Math.min(pt,O.value.length);else{var vt=O.ownerDocument||document,ot=vt&&vt.defaultView||window;if(ot.getSelection){var mt=ot.getSelection(),Kt=O.textContent.length,se=Math.min(Y.start,Kt),mn=Y.end===void 0?se:Math.min(Y.end,Kt);!mt.extend&&se>mn&&(C=mn,mn=se,se=C);var tt=Oc(O,se),J=Oc(O,mn);if(tt&&J&&(mt.rangeCount!==1||mt.anchorNode!==tt.node||mt.anchorOffset!==tt.offset||mt.focusNode!==J.node||mt.focusOffset!==J.offset)){var st=vt.createRange();st.setStart(tt.node,tt.offset),mt.removeAllRanges(),se>mn?(mt.addRange(st),mt.extend(J.node,J.offset)):(st.setEnd(J.node,J.offset),mt.addRange(st))}}}}for(vt=[],mt=O;mt=mt.parentNode;)mt.nodeType===1&&vt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<vt.length;O++){var _t=vt[O];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}r1=!!F2,j2=F2=null}finally{Jt=v,St.p=d,W.T=h}}a.current=r,Ze=2}}function jo(){if(Ze===2){Ze=0;var a=ma,r=$c,h=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var d=St.p;St.p=2;var v=Jt;Jt|=4;try{An(a,r.alternate,r)}finally{Jt=v,St.p=d,W.T=h}}Ze=3}}function zu(){if(Ze===4||Ze===3){Ze=0,en();var a=ma,r=$c,h=Ja,d=Of;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ze=5:(Ze=0,$c=ma=null,ho(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(ai=null),Ra(h),r=r.stateNode,Ce&&typeof Ce.onCommitFiberRoot=="function")try{Ce.onCommitFiberRoot(ke,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=W.T,v=St.p,St.p=2,W.T=null;try{for(var T=a.onRecoverableError,C=0;C<d.length;C++){var O=d[C];T(O.value,{componentStack:O.stack})}}finally{W.T=r,St.p=v}}(Ja&3)!==0&&sh(),Rt(a),v=a.pendingLanes,(h&261930)!==0&&(v&42)!==0?a===Lu?Pl++:(Pl=0,Lu=a):Pl=0,Gt(0)}}function ho(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,vu(r)))}function sh(){return mi(),jo(),zu(),Am()}function Am(){if(Ze!==5)return!1;var a=ma,r=th;th=0;var h=Ra(Ja),d=W.T,v=St.p;try{St.p=32>h?32:h,W.T=null,h=eh,eh=null;var T=ma,C=Ja;if(Ze=0,$c=ma=null,Ja=0,(Jt&6)!==0)throw Error(i(331));var O=Jt;if(Jt|=4,Fs(T.current),qg(T,T.current,C,h),Jt=O,Gt(0,!1),Ce&&typeof Ce.onPostCommitFiberRoot=="function")try{Ce.onPostCommitFiberRoot(ke,T)}catch{}return!0}finally{St.p=v,W.T=d,ho(a,r)}}function Kg(a,r,h){r=oa(h,r),r=kg(a.stateNode,r,2),a=Al(a,r,2),a!==null&&(nl(a,2),Rt(a))}function He(a,r,h){if(a.tag===3)Kg(a,a,h);else for(;r!==null;){if(r.tag===3){Kg(r,a,h);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ai===null||!ai.has(d))){a=oa(h,a),h=Lg(2),d=Al(r,h,2),d!==null&&(jy(h,d,r,a),nl(d,2),Rt(d));break}}r=r.return}}function kf(a,r,h){var d=a.pingCache;if(d===null){d=a.pingCache=new de;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(h)||(Fg=!0,v.add(h),a=l.bind(null,a,r,h),r.then(a,a))}function l(a,r,h){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,oe===a&&(pe&h)===h&&(Ln===4||Ln===3&&(pe&62914560)===pe&&300>pn()-Zc?(Jt&2)===0&&kl(a,0):xf|=h,_n===pe&&(_n=0)),Rt(a)}function u(a,r){r===0&&(r=Or()),a=vs(a,r),a!==null&&(nl(a,r),Rt(a))}function p(a){var r=a.memoizedState,h=0;r!==null&&(h=r.retryLane),u(a,h)}function y(a,r){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),u(a,h)}function S(a,r){return ln(a,r)}var w=null,x=null,Q=!1,dt=!1,bt=!1,Pt=0;function Rt(a){a!==x&&a.next===null&&(x===null?w=x=a:x=x.next=a),dt=!0,Q||(Q=!0,nt())}function Gt(a,r){if(!bt&&dt){bt=!0;do for(var h=!1,d=w;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var T=0;else{var C=d.suspendedLanes,O=d.pingedLanes;T=(1<<31-xn(42|a)+1)-1,T&=v&~(C&~O),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,rt(d,T))}else T=pe,T=ea(d,d===oe?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||wa(d,T)||(h=!0,rt(d,T));d=d.next}while(h);bt=!1}}function ce(){ki()}function ki(){dt=Q=!1;var a=0;Pt!==0&&qI()&&(a=Pt);for(var r=pn(),h=null,d=w;d!==null;){var v=d.next,T=ah(d,r);T===0?(d.next=null,h===null?w=v:h.next=v,v===null&&(x=h)):(h=d,(a!==0||(T&3)!==0)&&(dt=!0)),d=v}Ze!==0&&Ze!==5||Gt(a),Pt!==0&&(Pt=0)}function ah(a,r){for(var h=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var C=31-xn(T),O=1<<C,Y=v[C];Y===-1?((O&h)===0||(O&d)!==0)&&(v[C]=Md(O,r)):Y<=r&&(a.expiredLanes|=O),T&=~O}if(r=oe,h=pe,h=ea(a,a===r?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===r&&(xe===2||xe===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Zn(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||wa(a,h)){if(r=h&-h,r===a.callbackPriority)return r;switch(d!==null&&Zn(d),Ra(h)){case 2:case 8:h=ds;break;case 32:h=ta;break;case 268435456:h=Ot;break;default:h=ta}return d=zl.bind(null,a),h=ln(h,d),a.callbackPriority=r,a.callbackNode=h,r}return d!==null&&d!==null&&Zn(d),a.callbackPriority=2,a.callbackNode=null,2}function zl(a,r){if(Ze!==0&&Ze!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(sh()&&a.callbackNode!==h)return null;var d=pe;return d=ea(a,a===oe?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(be(a,d,r),ah(a,pn()),a.callbackNode!=null&&a.callbackNode===h?zl.bind(null,a):null)}function rt(a,r){if(sh())return null;be(a,r,!0)}function nt(){jI(function(){(Jt&6)!==0?ln(Aa,ce):ki()})}function ct(){if(Pt===0){var a=Po;a===0&&(a=xr,xr<<=1,(xr&261888)===0&&(xr=256)),Pt=a}return Pt}function Dt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:uu(""+a)}function te(a,r){var h=r.ownerDocument.createElement("input");return h.name=r.name,h.value=r.value,a.id&&h.setAttribute("form",a.id),r.parentNode.insertBefore(h,r),a=new FormData(a),h.parentNode.removeChild(h),a}function Bn(a,r,h,d,v){if(r==="submit"&&h&&h.stateNode===v){var T=Dt((v[ci]||null).action),C=d.submitter;C&&(r=(r=C[ci]||null)?Dt(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var O=new dr("action","action",null,d,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Pt!==0){var Y=C?te(v,C):new FormData(v);Ig(h,{pending:!0,data:Y,method:v.method,action:T},null,Y)}}else typeof T=="function"&&(O.preventDefault(),Y=C?te(v,C):new FormData(v),Ig(h,{pending:!0,data:Y,method:v.method,action:T},T,Y))},currentTarget:v}]})}}for(var ie=0;ie<cf.length;ie++){var Le=cf[ie],Li=Le.toLowerCase(),qe=Le[0].toUpperCase()+Le.slice(1);ka(Li,"on"+qe)}ka(Ld,"onAnimationEnd"),ka(uf,"onAnimationIteration"),ka(Zp,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(ty,"onTransitionRun"),ka(D2,"onTransitionStart"),ka(ey,"onTransitionCancel"),ka($p,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wa));function v4(a,r){r=(r&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],v=d.event;d=d.listeners;t:{var T=void 0;if(r)for(var C=d.length-1;0<=C;C--){var O=d[C],Y=O.instance,at=O.currentTarget;if(O=O.listener,Y!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(pt){hf(pt)}v.currentTarget=null,T=Y}else for(C=0;C<d.length;C++){if(O=d[C],Y=O.instance,at=O.currentTarget,O=O.listener,Y!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(pt){hf(pt)}v.currentTarget=null,T=Y}}}}function Oe(a,r){var h=r[na];h===void 0&&(h=r[na]=new Set);var d=a+"__bubble";h.has(d)||(E4(r,a,2,!1),h.add(d))}function B2(a,r,h){var d=0;r&&(d|=4),E4(h,a,d,r)}var Wy="_reactListening"+Math.random().toString(36).slice(2);function G2(a){if(!a[Wy]){a[Wy]=!0,Da.forEach(function(h){h!=="selectionchange"&&(z2.has(h)||B2(h,!1,a),B2(h,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[Wy]||(r[Wy]=!0,B2("selectionchange",!1,r))}}function E4(a,r,h,d){switch(X4(r)){case 2:var v=h7;break;case 8:v=f7;break;default:v=nE}h=v.bind(null,r,h,a),v=void 0,!hu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(r,h,{capture:!0,passive:v}):a.addEventListener(r,h,!0):v!==void 0?a.addEventListener(r,h,{passive:v}):a.addEventListener(r,h,!1)}function H2(a,r,h,d,v){var T=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var O=d.stateNode.containerInfo;if(O===v)break;if(C===4)for(C=d.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;O!==null;){if(C=or(O),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){d=T=C;continue t}O=O.parentNode}}d=d.return}wo(function(){var at=T,pt=aa(h),vt=[];t:{var ot=Va.get(a);if(ot!==void 0){var mt=dr,Kt=a;switch(a){case"keypress":if(ul(h)===0)break t;case"keydown":case"keyup":mt=qr;break;case"focusin":Kt="focus",mt=fl;break;case"focusout":Kt="blur",mt=fl;break;case"beforeblur":case"afterblur":mt=fl;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=R;break;case Ld:case uf:case Zp:mt=Pd;break;case $p:mt=P;break;case"scroll":case"scrollend":mt=Ac;break;case"wheel":mt=ut;break;case"copy":case"cut":case"paste":mt=ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Fr;break;case"toggle":case"beforetoggle":mt=ue}var se=(r&4)!==0,mn=!se&&(a==="scroll"||a==="scrollend"),tt=se?ot!==null?ot+"Capture":null:ot;se=[];for(var J=at,st;J!==null;){var _t=J;if(st=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||st===null||tt===null||(_t=Oa(J,tt),_t!=null&&se.push(Yg(J,_t,st))),mn)break;J=J.return}0<se.length&&(ot=new mt(ot,Kt,null,h,pt),vt.push({event:ot,listeners:se}))}}if((r&7)===0){t:{if(ot=a==="mouseover"||a==="pointerover",mt=a==="mouseout"||a==="pointerout",ot&&h!==Sc&&(Kt=h.relatedTarget||h.fromElement)&&(or(Kt)||Kt[Ia]))break t;if((mt||ot)&&(ot=pt.window===pt?pt:(ot=pt.ownerDocument)?ot.defaultView||ot.parentWindow:window,mt?(Kt=h.relatedTarget||h.toElement,mt=at,Kt=Kt?or(Kt):null,Kt!==null&&(mn=o(Kt),se=Kt.tag,Kt!==mn||se!==5&&se!==27&&se!==6)&&(Kt=null)):(mt=null,Kt=at),mt!==Kt)){if(se=wc,_t="onMouseLeave",tt="onMouseEnter",J="mouse",(a==="pointerout"||a==="pointerover")&&(se=Fr,_t="onPointerLeave",tt="onPointerEnter",J="pointer"),mn=mt==null?ot:Ps(mt),st=Kt==null?ot:Ps(Kt),ot=new se(_t,J+"leave",mt,h,pt),ot.target=mn,ot.relatedTarget=st,_t=null,or(pt)===at&&(se=new se(tt,J+"enter",Kt,h,pt),se.target=st,se.relatedTarget=mn,_t=se),mn=_t,mt&&Kt)e:{for(se=UI,tt=mt,J=Kt,st=0,_t=tt;_t;_t=se(_t))st++;_t=0;for(var $t=J;$t;$t=se($t))_t++;for(;0<st-_t;)tt=se(tt),st--;for(;0<_t-st;)J=se(J),_t--;for(;st--;){if(tt===J||J!==null&&tt===J.alternate){se=tt;break e}tt=se(tt),J=se(J)}se=null}else se=null;mt!==null&&T4(vt,ot,mt,se,!1),Kt!==null&&mn!==null&&T4(vt,mn,Kt,se,!0)}}t:{if(ot=at?Ps(at):window,mt=ot.nodeName&&ot.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ot.type==="file")var Ye=jp;else if(Fp(ot))if(jr)Ye=W_;else{Ye=Qp;var Xt=X_}else mt=ot.nodeName,!mt||mt.toLowerCase()!=="input"||ot.type!=="checkbox"&&ot.type!=="radio"?at&&lu(at.elementType)&&(Ye=jp):Ye=J_;if(Ye&&(Ye=Ye(a,at))){Vd(vt,Ye,h,pt);break t}Xt&&Xt(a,ot,at),a==="focusout"&&at&&ot.type==="number"&&at.memoizedProps.value!=null&&sa(ot,"number",ot.value)}switch(Xt=at?Ps(at):window,a){case"focusin":(Fp(Xt)||Xt.contentEditable==="true")&&(Kr=Xt,Yr=at,Mc=null);break;case"focusout":Mc=Yr=Kr=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Pc(vt,h,pt);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Pc(vt,h,pt)}var Ee;if(De)t:{switch(a){case"compositionstart":var Ue="onCompositionStart";break t;case"compositionend":Ue="onCompositionEnd";break t;case"compositionupdate":Ue="onCompositionUpdate";break t}Ue=void 0}else gu?Io(a,h)&&(Ue="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Ue="onCompositionStart");Ue&&(pr&&h.locale!=="ko"&&(gu||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&gu&&(Ee=ll()):(gs=pt,bc="value"in gs?gs.value:gs.textContent,gu=!0)),Xt=Zy(at,Ue),0<Xt.length&&(Ue=new Ma(Ue,a,null,h,pt),vt.push({event:Ue,listeners:Xt}),Ee?Ue.data=Ee:(Ee=pu(h),Ee!==null&&(Ue.data=Ee)))),(Ee=_s?Y_(a,h):Hp(a,h))&&(Ue=Zy(at,"onBeforeInput"),0<Ue.length&&(Xt=new Ma("onBeforeInput","beforeinput",null,h,pt),vt.push({event:Xt,listeners:Ue}),Xt.data=Ee)),Bn(vt,a,at,h,pt)}v4(vt,r)})}function Yg(a,r,h){return{instance:a,listener:r,currentTarget:h}}function Zy(a,r){for(var h=r+"Capture",d=[];a!==null;){var v=a,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Oa(a,h),v!=null&&d.unshift(Yg(a,v,T)),v=Oa(a,r),v!=null&&d.push(Yg(a,v,T))),a.tag===3)return d;a=a.return}return[]}function UI(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function T4(a,r,h,d,v){for(var T=r._reactName,C=[];h!==null&&h!==d;){var O=h,Y=O.alternate,at=O.stateNode;if(O=O.tag,Y!==null&&Y===d)break;O!==5&&O!==26&&O!==27||at===null||(Y=at,v?(at=Oa(h,T),at!=null&&C.unshift(Yg(h,at,Y))):v||(at=Oa(h,T),at!=null&&C.push(Yg(h,at,Y)))),h=h.return}C.length!==0&&a.push({event:r,listeners:C})}var zI=/\r\n?/g,BI=/\u0000|\uFFFD/g;function S4(a){return(typeof a=="string"?a:""+a).replace(zI,`
`).replace(BI,"")}function b4(a,r){return r=S4(r),S4(a)===r}function dn(a,r,h,d,v,T){switch(h){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||ps(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&ps(a,""+d);break;case"className":Vs(a,"class",d);break;case"tabIndex":Vs(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Vs(a,h,d);break;case"style":Tc(a,d,T);break;case"data":if(r!=="object"){Vs(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=uu(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(r!=="input"&&dn(a,r,"name",v.name,v,null),dn(a,r,"formEncType",v.formEncType,v,null),dn(a,r,"formMethod",v.formMethod,v,null),dn(a,r,"formTarget",v.formTarget,v,null)):(dn(a,r,"encType",v.encType,v,null),dn(a,r,"method",v.method,v,null),dn(a,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=uu(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=cr);break;case"onScroll":d!=null&&Oe("scroll",a);break;case"onScrollEnd":d!=null&&Oe("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=uu(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":Oe("beforetoggle",a),Oe("toggle",a),rl(a,"popover",d);break;case"xlinkActuate":$n(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":$n(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":$n(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":$n(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":$n(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":$n(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":$n(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":$n(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":$n(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":rl(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=$h.get(h)||h,rl(a,h,d))}}function q2(a,r,h,d,v,T){switch(h){case"style":Tc(a,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof d=="string"?ps(a,d):(typeof d=="number"||typeof d=="bigint")&&ps(a,""+d);break;case"onScroll":d!=null&&Oe("scroll",a);break;case"onScrollEnd":d!=null&&Oe("scrollend",a);break;case"onClick":d!=null&&(a.onclick=cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ru.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),r=h.slice(2,v?h.length-7:void 0),T=a[ci]||null,T=T!=null?T[h]:null,typeof T=="function"&&a.removeEventListener(r,T,v),typeof d=="function")){typeof T!="function"&&T!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(r,d,v);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):rl(a,h,d)}}}function Cs(a,r,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",a),Oe("load",a);var d=!1,v=!1,T;for(T in h)if(h.hasOwnProperty(T)){var C=h[T];if(C!=null)switch(T){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,T,C,h,null)}}v&&dn(a,r,"srcSet",h.srcSet,h,null),d&&dn(a,r,"src",h.src,h,null);return;case"input":Oe("invalid",a);var O=T=C=v=null,Y=null,at=null;for(d in h)if(h.hasOwnProperty(d)){var pt=h[d];if(pt!=null)switch(d){case"name":v=pt;break;case"type":C=pt;break;case"checked":Y=pt;break;case"defaultChecked":at=pt;break;case"value":T=pt;break;case"defaultValue":O=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,r));break;default:dn(a,r,d,pt,h,null)}}yc(a,T,O,Y,at,C,v,!1);return;case"select":Oe("invalid",a),d=C=T=null;for(v in h)if(h.hasOwnProperty(v)&&(O=h[v],O!=null))switch(v){case"value":T=O;break;case"defaultValue":C=O;break;case"multiple":d=O;default:dn(a,r,v,O,h,null)}r=T,h=C,a.multiple=!!d,r!=null?ur(a,!!d,r,!1):h!=null&&ur(a,!!d,h,!0);return;case"textarea":Oe("invalid",a),T=v=d=null;for(C in h)if(h.hasOwnProperty(C)&&(O=h[C],O!=null))switch(C){case"value":d=O;break;case"defaultValue":v=O;break;case"children":T=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:dn(a,r,C,O,h,null)}Ur(a,d,v,T);return;case"option":for(Y in h)h.hasOwnProperty(Y)&&(d=h[Y],d!=null)&&(Y==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":dn(a,r,Y,d,h,null));return;case"dialog":Oe("beforetoggle",a),Oe("toggle",a),Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":Oe("load",a);break;case"video":case"audio":for(d=0;d<Wa.length;d++)Oe(Wa[d],a);break;case"image":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"embed":case"source":case"link":Oe("error",a),Oe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in h)if(h.hasOwnProperty(at)&&(d=h[at],d!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,at,d,h,null)}return;default:if(lu(r)){for(pt in h)h.hasOwnProperty(pt)&&(d=h[pt],d!==void 0&&q2(a,r,pt,d,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(d=h[O],d!=null&&dn(a,r,O,d,h,null))}function GI(a,r,h,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,C=null,O=null,Y=null,at=null,pt=null;for(mt in h){var vt=h[mt];if(h.hasOwnProperty(mt)&&vt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Y=vt;default:d.hasOwnProperty(mt)||dn(a,r,mt,null,d,vt)}}for(var ot in d){var mt=d[ot];if(vt=h[ot],d.hasOwnProperty(ot)&&(mt!=null||vt!=null))switch(ot){case"type":T=mt;break;case"name":v=mt;break;case"checked":at=mt;break;case"defaultChecked":pt=mt;break;case"value":C=mt;break;case"defaultValue":O=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,r));break;default:mt!==vt&&dn(a,r,ot,mt,d,vt)}}bo(a,C,O,Y,at,pt,T,v);return;case"select":mt=C=O=ot=null;for(T in h)if(Y=h[T],h.hasOwnProperty(T)&&Y!=null)switch(T){case"value":break;case"multiple":mt=Y;default:d.hasOwnProperty(T)||dn(a,r,T,null,d,Y)}for(v in d)if(T=d[v],Y=h[v],d.hasOwnProperty(v)&&(T!=null||Y!=null))switch(v){case"value":ot=T;break;case"defaultValue":O=T;break;case"multiple":C=T;default:T!==Y&&dn(a,r,v,T,d,Y)}r=O,h=C,d=mt,ot!=null?ur(a,!!h,ot,!1):!!d!=!!h&&(r!=null?ur(a,!!h,r,!0):ur(a,!!h,h?[]:"",!1));return;case"textarea":mt=ot=null;for(O in h)if(v=h[O],h.hasOwnProperty(O)&&v!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:dn(a,r,O,null,d,v)}for(C in d)if(v=d[C],T=h[C],d.hasOwnProperty(C)&&(v!=null||T!=null))switch(C){case"value":ot=v;break;case"defaultValue":mt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&dn(a,r,C,v,d,T)}vc(a,ot,mt);return;case"option":for(var Kt in h)ot=h[Kt],h.hasOwnProperty(Kt)&&ot!=null&&!d.hasOwnProperty(Kt)&&(Kt==="selected"?a.selected=!1:dn(a,r,Kt,null,d,ot));for(Y in d)ot=d[Y],mt=h[Y],d.hasOwnProperty(Y)&&ot!==mt&&(ot!=null||mt!=null)&&(Y==="selected"?a.selected=ot&&typeof ot!="function"&&typeof ot!="symbol":dn(a,r,Y,ot,d,mt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in h)ot=h[se],h.hasOwnProperty(se)&&ot!=null&&!d.hasOwnProperty(se)&&dn(a,r,se,null,d,ot);for(at in d)if(ot=d[at],mt=h[at],d.hasOwnProperty(at)&&ot!==mt&&(ot!=null||mt!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,r));break;default:dn(a,r,at,ot,d,mt)}return;default:if(lu(r)){for(var mn in h)ot=h[mn],h.hasOwnProperty(mn)&&ot!==void 0&&!d.hasOwnProperty(mn)&&q2(a,r,mn,void 0,d,ot);for(pt in d)ot=d[pt],mt=h[pt],!d.hasOwnProperty(pt)||ot===mt||ot===void 0&&mt===void 0||q2(a,r,pt,ot,d,mt);return}}for(var tt in h)ot=h[tt],h.hasOwnProperty(tt)&&ot!=null&&!d.hasOwnProperty(tt)&&dn(a,r,tt,null,d,ot);for(vt in d)ot=d[vt],mt=h[vt],!d.hasOwnProperty(vt)||ot===mt||ot==null&&mt==null||dn(a,r,vt,ot,d,mt)}function A4(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HI(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var v=h[d],T=v.transferSize,C=v.initiatorType,O=v.duration;if(T&&O&&A4(C)){for(C=0,O=v.responseEnd,d+=1;d<h.length;d++){var Y=h[d],at=Y.startTime;if(at>O)break;var pt=Y.transferSize,vt=Y.initiatorType;pt&&A4(vt)&&(Y=Y.responseEnd,C+=pt*(Y<O?1:(O-at)/(Y-at)))}if(--d,r+=8*(T+C)/(v.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var F2=null,j2=null;function $y(a){return a.nodeType===9?a:a.ownerDocument}function w4(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R4(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function K2(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Y2=null;function qI(){var a=window.event;return a&&a.type==="popstate"?a===Y2?!1:(Y2=a,!0):(Y2=null,!1)}var C4=typeof setTimeout=="function"?setTimeout:void 0,FI=typeof clearTimeout=="function"?clearTimeout:void 0,I4=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof I4<"u"?function(a){return I4.resolve(null).then(a).catch(KI)}:C4;function KI(a){setTimeout(function(){throw a})}function rh(a){return a==="head"}function N4(a,r){var h=r,d=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(v),Im(r);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")Qg(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,Qg(h);for(var T=h.firstChild;T;){var C=T.nextSibling,O=T.nodeName;T[Ms]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=C}}else h==="body"&&Qg(a.ownerDocument.body);h=v}while(h);Im(r)}function D4(a,r){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?r?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(r?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function Q2(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var h=r;switch(r=r.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Q2(h),Vr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function YI(a,r,h,d){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Ms])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=fo(a.nextSibling),a===null)break}return null}function QI(a,r,h){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=fo(a.nextSibling),a===null))return null;return a}function x4(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=fo(a.nextSibling),a===null))return null;return a}function X2(a){return a.data==="$?"||a.data==="$~"}function J2(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function XI(a,r){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||h.readyState!=="loading")r();else{var d=function(){r(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function fo(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var W2=null;function O4(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(r===0)return fo(a.nextSibling);r--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||r++}a=a.nextSibling}return null}function M4(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(r===0)return a;r--}else h!=="/$"&&h!=="/&"||r++}a=a.previousSibling}return null}function P4(a,r,h){switch(r=$y(h),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Qg(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Vr(a)}var mo=new Map,V4=new Set;function t1(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Bu=St.d;St.d={f:JI,r:WI,D:ZI,C:$I,L:t7,m:e7,X:i7,S:n7,M:s7};function JI(){var a=Bu.f(),r=Tr();return a||r}function WI(a){var r=ia(a);r!==null&&r.tag===5&&r.type==="form"?ky(r):Bu.r(a)}var wm=typeof document>"u"?null:document;function k4(a,r,h){var d=wm;if(d&&typeof r=="string"&&r){var v=Ni(r);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),V4.has(v)||(V4.add(v),a={rel:a,crossOrigin:h,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Cs(r,"link",a),qn(r),d.head.appendChild(r)))}}function ZI(a){Bu.D(a),k4("dns-prefetch",a,null)}function $I(a,r){Bu.C(a,r),k4("preconnect",a,r)}function t7(a,r,h){Bu.L(a,r,h);var d=wm;if(d&&a&&r){var v='link[rel="preload"][as="'+Ni(r)+'"]';r==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+Ni(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+Ni(h.imageSizes)+'"]')):v+='[href="'+Ni(a)+'"]';var T=v;switch(r){case"style":T=Rm(a);break;case"script":T=Cm(a)}mo.has(T)||(a=b({rel:"preload",href:r==="image"&&h&&h.imageSrcSet?void 0:a,as:r},h),mo.set(T,a),d.querySelector(v)!==null||r==="style"&&d.querySelector(Xg(T))||r==="script"&&d.querySelector(Jg(T))||(r=d.createElement("link"),Cs(r,"link",a),qn(r),d.head.appendChild(r)))}}function e7(a,r){Bu.m(a,r);var h=wm;if(h&&a){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Ni(d)+'"][href="'+Ni(a)+'"]',T=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Cm(a)}if(!mo.has(T)&&(a=b({rel:"modulepreload",href:a},r),mo.set(T,a),h.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Jg(T)))return}d=h.createElement("link"),Cs(d,"link",a),qn(d),h.head.appendChild(d)}}}function n7(a,r,h){Bu.S(a,r,h);var d=wm;if(d&&a){var v=Na(d).hoistableStyles,T=Rm(a);r=r||"default";var C=v.get(T);if(!C){var O={loading:0,preload:null};if(C=d.querySelector(Xg(T)))O.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":r},h),(h=mo.get(T))&&Z2(a,h);var Y=C=d.createElement("link");qn(Y),Cs(Y,"link",a),Y._p=new Promise(function(at,pt){Y.onload=at,Y.onerror=pt}),Y.addEventListener("load",function(){O.loading|=1}),Y.addEventListener("error",function(){O.loading|=2}),O.loading|=4,e1(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:O},v.set(T,C)}}}function i7(a,r){Bu.X(a,r);var h=wm;if(h&&a){var d=Na(h).hoistableScripts,v=Cm(a),T=d.get(v);T||(T=h.querySelector(Jg(v)),T||(a=b({src:a,async:!0},r),(r=mo.get(v))&&$2(a,r),T=h.createElement("script"),qn(T),Cs(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function s7(a,r){Bu.M(a,r);var h=wm;if(h&&a){var d=Na(h).hoistableScripts,v=Cm(a),T=d.get(v);T||(T=h.querySelector(Jg(v)),T||(a=b({src:a,async:!0,type:"module"},r),(r=mo.get(v))&&$2(a,r),T=h.createElement("script"),qn(T),Cs(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function L4(a,r,h,d){var v=(v=ae.current)?t1(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(r=Rm(h.href),h=Na(v).hoistableStyles,d=h.get(r),d||(d={type:"style",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Rm(h.href);var T=Na(v).hoistableStyles,C=T.get(a);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,C),(T=v.querySelector(Xg(a)))&&!T._p&&(C.instance=T,C.state.loading=5),mo.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},mo.set(a,h),T||a7(v,a,h,C.state))),r&&d===null)throw Error(i(528,""));return C}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=h.async,h=h.src,typeof h=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Cm(h),h=Na(v).hoistableScripts,d=h.get(r),d||(d={type:"script",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function Rm(a){return'href="'+Ni(a)+'"'}function Xg(a){return'link[rel="stylesheet"]['+a+"]"}function U4(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function a7(a,r,h,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Cs(r,"link",h),qn(r),a.head.appendChild(r))}function Cm(a){return'[src="'+Ni(a)+'"]'}function Jg(a){return"script[async]"+a}function z4(a,r,h){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+Ni(h.href)+'"]');if(d)return r.instance=d,qn(d),d;var v=b({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),qn(d),Cs(d,"style",v),e1(d,h.precedence,a),r.instance=d;case"stylesheet":v=Rm(h.href);var T=a.querySelector(Xg(v));if(T)return r.state.loading|=4,r.instance=T,qn(T),T;d=U4(h),(v=mo.get(v))&&Z2(d,v),T=(a.ownerDocument||a).createElement("link"),qn(T);var C=T;return C._p=new Promise(function(O,Y){C.onload=O,C.onerror=Y}),Cs(T,"link",d),r.state.loading|=4,e1(T,h.precedence,a),r.instance=T;case"script":return T=Cm(h.src),(v=a.querySelector(Jg(T)))?(r.instance=v,qn(v),v):(d=h,(v=mo.get(T))&&(d=b({},h),$2(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),qn(v),Cs(v,"link",d),a.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,e1(d,h.precedence,a));return r.instance}function e1(a,r,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,T=v,C=0;C<d.length;C++){var O=d[C];if(O.dataset.precedence===r)T=O;else if(T!==v)break}T?T.parentNode.insertBefore(a,T.nextSibling):(r=h.nodeType===9?h.head:h,r.insertBefore(a,r.firstChild))}function Z2(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function $2(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var n1=null;function B4(a,r,h){if(n1===null){var d=new Map,v=n1=new Map;v.set(h,d)}else v=n1,d=v.get(h),d||(d=new Map,v.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var T=h[v];if(!(T[Ms]||T[Mn]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=a+C;var O=d.get(C);O?O.push(T):d.set(C,[T])}}return d}function G4(a,r,h){a=a.ownerDocument||a,a.head.insertBefore(h,r==="title"?a.querySelector("head > title"):null)}function r7(a,r,h){if(h===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function H4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function o7(a,r,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=Rm(d.href),T=r.querySelector(Xg(v));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=i1.bind(a),r.then(a,a)),h.state.loading|=4,h.instance=T,qn(T);return}T=r.ownerDocument||r,d=U4(d),(v=mo.get(v))&&Z2(d,v),T=T.createElement("link"),qn(T);var C=T;C._p=new Promise(function(O,Y){C.onload=O,C.onerror=Y}),Cs(T,"link",d),h.instance=T}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,r),(r=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=i1.bind(a),r.addEventListener("load",h),r.addEventListener("error",h))}}var tE=0;function l7(a,r){return a.stylesheets&&a.count===0&&a1(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&a1(a,a.stylesheets),a.unsuspend){var T=a.unsuspend;a.unsuspend=null,T()}},6e4+r);0<a.imgBytes&&tE===0&&(tE=62500*HI());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&a1(a,a.stylesheets),a.unsuspend)){var T=a.unsuspend;a.unsuspend=null,T()}},(a.imgBytes>tE?50:800)+r);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function i1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)a1(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var s1=null;function a1(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,s1=new Map,r.forEach(u7,a),s1=null,i1.call(a))}function u7(a,r){if(!(r.state.loading&4)){var h=s1.get(a);if(h)var d=h.get(null);else{h=new Map,s1.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var C=v[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),d=C)}d&&h.set(null,d)}v=r.instance,C=v.getAttribute("data-precedence"),T=h.get(C)||d,T===d&&h.set(null,v),h.set(C,v),this.count++,d=i1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),T?T.parentNode.insertBefore(v,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),r.state.loading|=4}}var Wg={$$typeof:X,Provider:null,Consumer:null,_currentValue:Et,_currentValue2:Et,_threadCount:0};function c7(a,r,h,d,v,T,C,O,Y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.hiddenUpdates=ar(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function q4(a,r,h,d,v,T,C,O,Y,at,pt,vt){return a=new c7(a,r,h,C,Y,at,pt,vt,O),r=1,T===!0&&(r|=24),T=Pn(3,null,null,r),a.current=T,T.stateNode=a,r=eg(),r.refCount++,a.pooledCache=r,r.refCount++,T.memoizedState={element:d,isDehydrated:h,cache:r},yf(T),a}function F4(a){return a?(a=gl,a):gl}function j4(a,r,h,d,v,T){v=F4(v),d.context===null?d.context=v:d.pendingContext=v,d=ko(r),d.payload={element:h},T=T===void 0?null:T,T!==null&&(d.callback=T),h=Al(a,d,r),h!==null&&(ye(h,a,r),wl(h,a,r))}function K4(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<r?h:r}}function eE(a,r){K4(a,r),(a=a.alternate)&&K4(a,r)}function Y4(a){if(a.tag===13||a.tag===31){var r=vs(a,67108864);r!==null&&ye(r,a,67108864),eE(a,67108864)}}function Q4(a){if(a.tag===13||a.tag===31){var r=pa();r=Mr(r);var h=vs(a,r);h!==null&&ye(h,a,r),eE(a,r)}}var r1=!0;function h7(a,r,h,d){var v=W.T;W.T=null;var T=St.p;try{St.p=2,nE(a,r,h,d)}finally{St.p=T,W.T=v}}function f7(a,r,h,d){var v=W.T;W.T=null;var T=St.p;try{St.p=8,nE(a,r,h,d)}finally{St.p=T,W.T=v}}function nE(a,r,h,d){if(r1){var v=iE(d);if(v===null)H2(a,r,d,o1,h),J4(a,d);else if(m7(v,a,r,h,d))d.stopPropagation();else if(J4(a,d),r&4&&-1<d7.indexOf(a)){for(;v!==null;){var T=ia(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=sr(T.pendingLanes);if(C!==0){var O=T;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var Y=1<<31-xn(C);O.entanglements[1]|=Y,C&=~Y}Rt(T),(Jt&6)===0&&(si=pn()+500,Gt(0))}}break;case 31:case 13:O=vs(T,2),O!==null&&ye(O,T,2),Tr(),eE(T,2)}if(T=iE(d),T===null&&H2(a,r,d,o1,h),T===v)break;v=T}v!==null&&d.stopPropagation()}else H2(a,r,d,null,h)}}function iE(a){return a=aa(a),sE(a)}var o1=null;function sE(a){if(o1=null,a=or(a),a!==null){var r=o(a);if(r===null)a=null;else{var h=r.tag;if(h===13){if(a=c(r),a!==null)return a;a=null}else if(h===31){if(a=f(r),a!==null)return a;a=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return o1=a,null}function X4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($s()){case Aa:return 2;case ds:return 8;case ta:case yt:return 32;case Ot:return 268435456;default:return 32}default:return 32}}var aE=!1,oh=null,lh=null,uh=null,Zg=new Map,$g=new Map,ch=[],d7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J4(a,r){switch(a){case"focusin":case"focusout":oh=null;break;case"dragenter":case"dragleave":lh=null;break;case"mouseover":case"mouseout":uh=null;break;case"pointerover":case"pointerout":Zg.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$g.delete(r.pointerId)}}function t0(a,r,h,d,v,T){return a===null||a.nativeEvent!==T?(a={blockedOn:r,domEventName:h,eventSystemFlags:d,nativeEvent:T,targetContainers:[v]},r!==null&&(r=ia(r),r!==null&&Y4(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),a)}function m7(a,r,h,d,v){switch(r){case"focusin":return oh=t0(oh,a,r,h,d,v),!0;case"dragenter":return lh=t0(lh,a,r,h,d,v),!0;case"mouseover":return uh=t0(uh,a,r,h,d,v),!0;case"pointerover":var T=v.pointerId;return Zg.set(T,t0(Zg.get(T)||null,a,r,h,d,v)),!0;case"gotpointercapture":return T=v.pointerId,$g.set(T,t0($g.get(T)||null,a,r,h,d,v)),!0}return!1}function W4(a){var r=or(a.target);if(r!==null){var h=o(r);if(h!==null){if(r=h.tag,r===13){if(r=c(h),r!==null){a.blockedOn=r,qi(a.priority,function(){Q4(h)});return}}else if(r===31){if(r=f(h),r!==null){a.blockedOn=r,qi(a.priority,function(){Q4(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function l1(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var h=iE(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);Sc=d,h.target.dispatchEvent(d),Sc=null}else return r=ia(h),r!==null&&Y4(r),a.blockedOn=h,!1;r.shift()}return!0}function Z4(a,r,h){l1(a)&&h.delete(r)}function p7(){aE=!1,oh!==null&&l1(oh)&&(oh=null),lh!==null&&l1(lh)&&(lh=null),uh!==null&&l1(uh)&&(uh=null),Zg.forEach(Z4),$g.forEach(Z4)}function u1(a,r){a.blockedOn===r&&(a.blockedOn=null,aE||(aE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,p7)))}var c1=null;function $4(a){c1!==a&&(c1=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){c1===a&&(c1=null);for(var r=0;r<a.length;r+=3){var h=a[r],d=a[r+1],v=a[r+2];if(typeof d!="function"){if(sE(d||h)===null)continue;break}var T=ia(h);T!==null&&(a.splice(r,3),r-=3,Ig(T,{pending:!0,data:v,method:h.method,action:d},d,v))}}))}function Im(a){function r(Y){return u1(Y,a)}oh!==null&&u1(oh,a),lh!==null&&u1(lh,a),uh!==null&&u1(uh,a),Zg.forEach(r),$g.forEach(r);for(var h=0;h<ch.length;h++){var d=ch[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<ch.length&&(h=ch[0],h.blockedOn===null);)W4(h),h.blockedOn===null&&ch.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var v=h[d],T=h[d+1],C=v[ci]||null;if(typeof T=="function")C||$4(h);else if(C){var O=null;if(T&&T.hasAttribute("formAction")){if(v=T,C=T[ci]||null)O=C.formAction;else if(sE(v)!==null)continue}else O=C.action;typeof O=="function"?h[d+1]=O:(h.splice(d,3),d-=3),$4(h)}}}function tA(){function a(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function rE(a){this._internalRoot=a}h1.prototype.render=rE.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var h=r.current,d=pa();j4(h,d,a,r,null,null)},h1.prototype.unmount=rE.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;j4(a.current,2,null,a,null,null),Tr(),r[Ia]=null}};function h1(a){this._internalRoot=a}h1.prototype.unstable_scheduleHydration=function(a){if(a){var r=pc();a={blockedOn:null,target:a,priority:r};for(var h=0;h<ch.length&&r!==0&&r<ch[h].priority;h++);ch.splice(h,0,a),h===0&&W4(a)}};var eA=t.version;if(eA!=="19.2.4")throw Error(i(527,eA,"19.2.4"));St.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=g(r),a=a!==null?E(a):null,a=a===null?null:a.stateNode,a};var g7={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f1.isDisabled&&f1.supportsFiber)try{ke=f1.inject(g7),Ce=f1}catch{}}return n0.createRoot=function(a,r){if(!s(a))throw Error(i(299));var h=!1,d="",v=qy,T=Pg,C=Vg;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=q4(a,1,!1,null,null,h,d,null,v,T,C,tA),a[Ia]=r.current,G2(a),new rE(r)},n0.hydrateRoot=function(a,r,h){if(!s(a))throw Error(i(299));var d=!1,v="",T=qy,C=Pg,O=Vg,Y=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(Y=h.formState)),r=q4(a,1,!0,r,h??null,d,v,Y,T,C,O,tA),r.context=F4(null),h=r.current,d=pa(),d=Mr(d),v=ko(d),v.callback=null,Al(h,v,d),h=d,r.current.lanes=h,nl(r,h),Rt(r),a[Ia]=r.current,G2(a),new h1(r)},n0.version="19.2.4",n0}var hA;function w7(){if(hA)return uE.exports;hA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),uE.exports=A7(),uE.exports}var R7=w7();const C7=Math.PI/180;function I7(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Yf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},kt={_global:Yf,version:"10.2.0",isBrowser:I7(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return kt.angleDeg?n*C7:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return kt.DD.isDragging},isTransforming(){var n,t;return(t=(n=kt.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!kt.DD.node},releaseCanvasOnDestroy:!0,document:Yf.document,_injectGlobal(n){typeof Yf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Yf.Konva=n}},li=n=>{kt[n.prototype.getClassName()]=n};kt._injectGlobal(kt);const N7=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,fA=()=>{if(typeof document>"u")throw new Error(N7)};class Ar{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Ar(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,o=this.m[1]*e+this.m[3]*i,c=this.m[0]*-i+this.m[2]*e,f=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=o,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,c=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=c,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],c=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,o=this.m[0]*t,c=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],i=this.m[2],s=this.m[3],o=this.m[4],c=this.m[5],f=t*s-e*i,m={x:o,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);m.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),m.scaleX=g,m.scaleY=f/g,m.skewX=(t*i+e*s)/f,m.skewY=0}else if(i!=0||s!=0){const g=Math.sqrt(i*i+s*s);m.rotation=Math.PI/2-(s>0?Math.acos(-i/g):-Math.acos(i/g)),m.scaleX=f/g,m.scaleY=g,m.skewX=0,m.skewY=(t*i+e*s)/f}return m.rotation=et._getRotation(m.rotation),m}}const D7="[object Array]",x7="[object Number]",O7="[object String]",M7="[object Boolean]",P7=Math.PI/180,V7=180/Math.PI,i0="#",k7="",L7="0",U7="Konva warning: ",dA="Konva error: ",z7="rgb(",dE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},B7=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let d1=[],s0=null;const G7=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},et={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===D7},_isNumber(n){return Object.prototype.toString.call(n)===x7&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===O7},_isBoolean(n){return Object.prototype.toString.call(n)===M7},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const t=n[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){d1.push(n),d1.length===1&&G7(function(){const t=d1;d1=[],t.forEach(function(e){e()})})},createCanvasElement(){fA();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return fA(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,t){const e=et.createImageElement();e.onload=function(){t(e)},e.src=n},_rgbToHex(n,t,e){return((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(n){n=n.replace(i0,k7);const t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=L7+n;return i0+n},isCanvasFarblingActive(){if(s0!==null)return s0;if(typeof document>"u")return s0=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const t=n.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(e[s*4]!==40||e[s*4+1]!==40||e[s*4+2]!==40||e[s*4+3]!==255){i=!0;break}return s0=i,this.releaseCanvas(n),s0},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,t,e){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,t=Math.round(t/5)*5,e=Math.round(e/5)*5),i0+this._rgbToHex(n,t,e)},getSnappedHexColor(n){const t=this._hexToRgb(n);return i0+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(n){let t;return n in dE?(t=dE[n],{r:t[0],g:t[1],b:t[2]}):n[0]===i0?this._hexToRgb(n.substring(1)):n.substr(0,4)===z7?(t=B7.exec(n.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",et._namedColorToRBA(n)||et._hex3ColorToRGBA(n)||et._hex4ColorToRGBA(n)||et._hex6ColorToRGBA(n)||et._hex8ColorToRGBA(n)||et._rgbColorToRGBA(n)||et._rgbaColorToRGBA(n)||et._hslColorToRGBA(n)},_namedColorToRBA(n){const t=dE[n.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const t=n.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const t=n.split(/ *, */).map((e,i)=>e.slice(-1)==="%"?i===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(e[0])/360,s=Number(e[1])/100,o=Number(e[2])/100;let c,f,m;if(s===0)return m=o*255,{r:Math.round(m),g:Math.round(m),b:Math.round(m),a:1};o<.5?c=o*(1+s):c=o+s-o*s;const g=2*o-c,E=[0,0,0];for(let b=0;b<3;b++)f=i+1/3*-(b-1),f<0&&f++,f>1&&f--,6*f<1?m=g+(c-g)*6*f:2*f<1?m=c:3*f<2?m=g+(c-g)*(2/3-f)*6:m=g,E[b]=m*255;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection(n,t){return!(t.x>n.x+n.width||t.x+t.width<n.x||t.y>n.y+n.height||t.y+t.height<n.y)},cloneObject(n){const t={};for(const e in n)this._isPlainObject(n[e])?t[e]=this.cloneObject(n[e]):this._isArray(n[e])?t[e]=this.cloneArray(n[e]):t[e]=n[e];return t},cloneArray(n){return n.slice(0)},degToRad(n){return n*P7},radToDeg(n){return n*V7},_degToRad(n){return et.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),et.degToRad(n)},_radToDeg(n){return et.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),et.radToDeg(n)},_getRotation(n){return kt.angleDeg?et.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(dA+n)},error(n){console.error(dA+n)},warn(n){kt.showWarnings&&console.warn(U7+n)},each(n,t){for(const e in n)t(e,n[e])},_inRange(n,t,e){return t<=n&&n<e},_getProjectionToSegment(n,t,e,i,s,o){let c,f,m;const g=(n-e)*(n-e)+(t-i)*(t-i);if(g==0)c=n,f=t,m=(s-e)*(s-e)+(o-i)*(o-i);else{const E=((s-n)*(e-n)+(o-t)*(i-t))/g;E<0?(c=n,f=t,m=(n-s)*(n-s)+(t-o)*(t-o)):E>1?(c=e,f=i,m=(e-s)*(e-s)+(i-o)*(i-o)):(c=n+E*(e-n),f=t+E*(i-t),m=(c-s)*(c-s)+(f-o)*(f-o))}return[c,f,m]},_getProjectionToLine(n,t,e){const i=et.cloneObject(n);let s=Number.MAX_VALUE;return t.forEach(function(o,c){if(!e&&c===t.length-1)return;const f=t[(c+1)%t.length],m=et._getProjectionToSegment(o.x,o.y,f.x,f.y,n.x,n.y),g=m[0],E=m[1],b=m[2];b<s&&(i.x=g,i.y=E,s=b)}),i},_prepareArrayForTween(n,t,e){const i=[],s=[];if(n.length>t.length){const c=t;t=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<t.length;c+=2)s.push({x:t[c],y:t[c+1]});const o=[];return s.forEach(function(c){const f=et._getProjectionToLine(c,i,e);o.push(f.x),o.push(f.y)}),o},_prepareToStringify(n){let t;n.visitedByCircularReferenceRemoval=!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]&&typeof n[e]=="object"){if(t=Object.getOwnPropertyDescriptor(n,e),n[e].visitedByCircularReferenceRemoval||et._isElement(n[e]))if(t.configurable)delete n[e];else return null;else if(et._prepareToStringify(n[e])===null)if(t.configurable)delete n[e];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,t){for(const e in t)n[e]=t[e];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){kt.releaseCanvasOnDestroy&&n.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(n,t,e,i){let s=t<0?t:0,o=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let c=0,f=0,m=0,g=0;typeof i=="number"?c=f=m=g=Math.min(i,t/2,e/2):(c=Math.min(i[0]||0,t/2,e/2),f=Math.min(i[1]||0,t/2,e/2),g=Math.min(i[2]||0,t/2,e/2),m=Math.min(i[3]||0,t/2,e/2)),n.moveTo(s+c,o),n.lineTo(s+t-f,o),n.arc(s+t-f,o+f,f,Math.PI*3/2,0,!1),n.lineTo(s+t,o+e-g),n.arc(s+t-g,o+e-g,g,0,Math.PI/2,!1),n.lineTo(s+m,o+e),n.arc(s+m,o+e-m,m,Math.PI/2,Math.PI,!1),n.lineTo(s,o+c),n.arc(s+c,o+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,t,e,i,s){i=Math.abs(i);for(let o=0;o<e;o++){const c=t[(o-1+e)%e],f=t[o],m=t[(o+1)%e],g={x:f.x-c.x,y:f.y-c.y},E={x:m.x-f.x,y:m.y-f.y},b=Math.hypot(g.x,g.y),A=Math.hypot(E.x,E.y);let N;typeof s=="number"?N=s:N=o<s.length?s[o]:0,N=i*Math.cos(Math.PI/e)*Math.min(1,N/i*2);const L={x:g.x/b,y:g.y/b},U={x:E.x/A,y:E.y/A},G={x:f.x-L.x*N,y:f.y-L.y*N},j={x:f.x+U.x*N,y:f.y+U.y*N};o===0?n.moveTo(G.x,G.y):n.lineTo(G.x,G.y),n.arcTo(f.x,f.y,j.x,j.y,N)}}};function H7(n){const t=[],e=n.length,i=et;for(let s=0;s<e;s++){let o=n[s];i._isNumber(o)?o=Math.round(o*1e3)/1e3:i._isString(o)||(o=o+""),t.push(o)}return t}const mA=",",q7="(",F7=")",j7="([",K7="])",Y7=";",Q7="()",X7="=",pA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],J7=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],W7=100;let m1=null;function gA(){if(m1!==null)return m1;try{const t=et.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(m1=!1,!1)}catch{return m1=!1,!1}}class Mv{constructor(t){this.canvas=t,kt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,s=i.length,o="",c,f,m,g;for(c=0;c<s;c++)f=i[c],m=f.method,m?(g=f.args,o+=m,t?o+=Q7:et._isArray(g[0])?o+=j7+g.join(mA)+K7:(e&&(g=g.map(E=>typeof E=="number"?Math.floor(E):E)),o+=q7+g.join(mA)+F7)):(o+=f.property,t||(o+=X7+f.val)),o+=Y7;return o}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,i;e.push(t),i=e.length,i>=W7&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,o,c){this._context.arc(t,e,i,s,o,c)}arcTo(t,e,i,s,o){this._context.arcTo(t,e,i,s,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,o,c){this._context.bezierCurveTo(t,e,i,s,o,c)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;if(i.length===2)return this._context.createImageData(t,e);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,o,c){return this._context.createRadialGradient(t,e,i,s,o,c)}drawImage(t,e,i,s,o,c,f,m,g){const E=arguments,b=this._context;E.length===3?b.drawImage(t,e,i):E.length===5?b.drawImage(t,e,i,s,o):E.length===9&&b.drawImage(t,e,i,s,o,c,f,m,g)}ellipse(t,e,i,s,o,c,f,m){this._context.ellipse(t,e,i,s,o,c,f,m)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,o){this._context.roundRect(t,e,i,s,o)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,o,c){this._context.setTransform(t,e,i,s,o,c)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,o,c){this._context.transform(t,e,i,s,o,c)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=pA.length,i=this.setAttr,s,o;const c=function(f){let m=t[f],g;t[f]=function(){return o=H7(Array.prototype.slice.call(arguments,0)),g=m.apply(t,arguments),t._trace({method:f,args:o}),g}};for(s=0;s<e;s++)c(pA[s]);t.setAttr=function(){i.apply(t,arguments);const f=arguments[0];let m=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(m=m/this.canvas.getPixelRatio()),t._trace({property:f,val:m})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}J7.forEach(function(n){Object.defineProperty(Mv.prototype,n,{get(){return this._context[n]},set(t){this._context[n]=t}})});class Z7 extends Mv{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&i==="linear-gradient"){this._fillLinearGradient(t);return}const c=t.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):s?this._fillPattern(t):o?this._fillLinearGradient(t):c&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)o.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const o=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",c=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},m=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),E=m.x*g,b=m.y*g;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",c*Math.min(Math.abs(E),Math.abs(b))),this.setAttr("shadowOffsetX",f.x*E),this.setAttr("shadowOffsetY",f.y*b)}}class $7 extends Mv{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let p1;function tN(){if(p1)return p1;const n=et.createCanvasElement(),t=n.getContext("2d");return p1=(function(){const e=kt._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/i})(),et.releaseCanvas(n),p1}class rS{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||kt.pixelRatio||tN();this.pixelRatio=i,this._canvas=et.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(s){return et.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Eh extends rS{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Z7(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class oS extends rS{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new $7(this),this.setSize(t.width,t.height)}}const tn={get isDragging(){let n=!1;return tn._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return tn._dragElements.forEach(t=>{n=t.node}),n},_dragElements:new Map,_drag(n){const t=[];tn._dragElements.forEach((e,i)=>{const{node:s}=e,o=s.getStage();o.setPointersPositions(n),e.pointerId===void 0&&(e.pointerId=et._getFirstPointerId(n));const c=o._changedPointerPositions.find(f=>f.id===e.pointerId);if(c){if(e.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-e.startPointerPos.x),Math.abs(c.y-e.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,e),t.push(s)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:n},!0)})},_endDragBefore(n){const t=[];tn._dragElements.forEach(e=>{const{node:i}=e,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(tn.justDragged=!0,kt._mouseListenClick=!1,kt._touchListenClick=!1,kt._pointerListenClick=!1,e.dragStatus="stopped");const c=e.node.getLayer()||e.node instanceof kt.Stage&&e.node;c&&t.indexOf(c)===-1&&t.push(c)}),t.forEach(e=>{e.draw()})},_endDragAfter(n){tn._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:n},!0),t.dragStatus!=="dragging"&&tn._dragElements.delete(e)})}};kt.isBrowser&&(window.addEventListener("mouseup",tn._endDragBefore,!0),window.addEventListener("touchend",tn._endDragBefore,!0),window.addEventListener("touchcancel",tn._endDragBefore,!0),window.addEventListener("mousemove",tn._drag),window.addEventListener("touchmove",tn._drag),window.addEventListener("mouseup",tn._endDragAfter,!1),window.addEventListener("touchend",tn._endDragAfter,!1),window.addEventListener("touchcancel",tn._endDragAfter,!1));function zh(n){return et._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||et._isBoolean(n)?n:Object.prototype.toString.call(n)}function k6(n){return n>255?255:n<0?0:Math.round(n)}function Mt(){if(kt.isUnminified)return function(n,t){return et._isNumber(n)||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),n}}function Pv(n){if(kt.isUnminified)return function(t,e){let i=et._isNumber(t),s=et._isArray(t)&&t.length==n;return!i&&!s&&et.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+n+")"),t}}function lS(){if(kt.isUnminified)return function(n,t){return et._isNumber(n)||n==="auto"||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),n}}function bd(){if(kt.isUnminified)return function(n,t){return et._isString(n)||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),n}}function L6(){if(kt.isUnminified)return function(n,t){const e=et._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return e||i||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),n}}function eN(){if(kt.isUnminified)return function(n,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&n instanceof e||(et._isArray(n)?n.forEach(function(i){et._isNumber(i)||et.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),n}}function $o(){if(kt.isUnminified)return function(n,t){return n===!0||n===!1||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),n}}function nN(n){if(kt.isUnminified)return function(t,e){return t==null||et.isObject(t)||et.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+n),t}}const a0="get",r0="set",B={addGetterSetter(n,t,e,i,s){B.addGetter(n,t,e),B.addSetter(n,t,i,s),B.addOverloadedGetterSetter(n,t)},addGetter(n,t,e){const i=a0+et._capitalize(t);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[t];return s===void 0?e:s}},addSetter(n,t,e,i){const s=r0+et._capitalize(t);n.prototype[s]||B.overWriteSetter(n,t,e,i)},overWriteSetter(n,t,e,i){const s=r0+et._capitalize(t);n.prototype[s]=function(o){return e&&o!==void 0&&o!==null&&(o=e.call(this,o,t)),this._setAttr(t,o),i&&i.call(this),this}},addComponentsGetterSetter(n,t,e,i,s){const o=e.length,c=et._capitalize,f=a0+c(t),m=r0+c(t);n.prototype[f]=function(){const E={};for(let b=0;b<o;b++){const A=e[b];E[A]=this.getAttr(t+c(A))}return E};const g=nN(e);n.prototype[m]=function(E){const b=this.attrs[t];i&&(E=i.call(this,E,t)),g&&g.call(this,E,t);for(const A in E)E.hasOwnProperty(A)&&this._setAttr(t+c(A),E[A]);return E||e.forEach(A=>{this._setAttr(t+c(A),void 0)}),this._fireChangeEvent(t,b,E),s&&s.call(this),this},B.addOverloadedGetterSetter(n,t)},addOverloadedGetterSetter(n,t){const e=et._capitalize(t),i=r0+e,s=a0+e;n.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,t,e,i){et.error("Adding deprecated "+t);const s=a0+et._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){et.error(o);const c=this.attrs[t];return c===void 0?e:c},B.addSetter(n,t,i,function(){et.error(o)}),B.addOverloadedGetterSetter(n,t)},backCompat(n,t){et.each(t,function(e,i){const s=n.prototype[i],o=a0+et._capitalize(e),c=r0+et._capitalize(e);function f(){s.apply(this,arguments),et.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[e]=f,n.prototype[o]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function iN(n){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(n))!==null;){const[,i,s]=e;switch(i){case"blur":{const o=parseFloat(s.replace("px",""));return function(c){this.blurRadius(o*.5);const f=kt.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const o=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(o);const f=kt.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const o=parseFloat(s);return function(c){const f=100*(Math.sqrt(o)-1);this.contrast(f);const m=kt.Filters;m&&m.Contrast&&m.Contrast.call(this,c)}}case"grayscale":return function(o){const c=kt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,o)};case"sepia":return function(o){const c=kt.Filters;c&&c.Sepia&&c.Sepia.call(this,o)};case"invert":return function(o){const c=kt.Filters;c&&c.Invert&&c.Invert.call(this,o)};default:et.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const P1="absoluteOpacity",_A="allEventListeners",Hu="absoluteTransform",yA="absoluteScale",Lf="canvas",sN="Change",aN="children",rN="konva",sT="listening",oN="mouseenter",lN="mouseleave",uN="pointerenter",cN="pointerleave",hN="touchenter",fN="touchleave",vA="set",EA="Shape",V1=" ",TA="stage",_h="transform",dN="Stage",aT="visible",mN=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(V1);let pN=1;class xt{constructor(t){this._id=pN++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===_h||t===Hu)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t);return(i===void 0||(t===_h||t===Hu)&&i.dirty===!0)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const s=e.map(o=>o+"Change.konva").join(V1);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Lf)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Hu&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Lf)){const{scene:t,filter:e,hit:i}=this._cache.get(Lf);et.releaseCanvas(t._canvas,e._canvas,i._canvas),this._cache.delete(Lf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(e.width||i.width),o=Math.ceil(e.height||i.height),c=e.pixelRatio,f=e.x===void 0?Math.floor(i.x):e.x,m=e.y===void 0?Math.floor(i.y):e.y,g=e.offset||0,E=e.drawBorder||!1,b=e.hitCanvasPixelRatio||1;if(!s||!o){et.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const A=Math.abs(Math.round(i.x)-f)>.5?1:0,N=Math.abs(Math.round(i.y)-m)>.5?1:0;s+=g*2+A,o+=g*2+N,f-=g,m-=g;const D=new Eh({pixelRatio:c,width:s,height:o}),L=new Eh({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),U=new oS({pixelRatio:b,width:s,height:o}),G=D.getContext(),j=U.getContext(),X=new Eh({width:D.width/D.pixelRatio+Math.abs(f),height:D.height/D.pixelRatio+Math.abs(m),pixelRatio:D.pixelRatio}),Z=X.getContext();return U.isCache=!0,D.isCache=!0,this._cache.delete(Lf),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(D.getContext()._context.imageSmoothingEnabled=!1,L.getContext()._context.imageSmoothingEnabled=!1),G.save(),j.save(),Z.save(),G.translate(-f,-m),j.translate(-f,-m),Z.translate(-f,-m),X.x=f,X.y=m,this._isUnderCache=!0,this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(yA),this.drawScene(D,this,X),this.drawHit(U,this),this._isUnderCache=!1,G.restore(),j.restore(),E&&(G.save(),G.beginPath(),G.rect(0,0,s,o),G.closePath(),G.setAttr("strokeStyle","red"),G.setAttr("lineWidth",5),G.stroke(),G.restore()),et.releaseCanvas(X._canvas),this._cache.set(Lf,{scene:D,filter:L,hit:U,x:f,y:m}),this._requestDraw(),this}isCached(){return this._cache.has(Lf)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,o=1/0,c=-1/0,f=-1/0;const m=this.getAbsoluteTransform(e);return i.forEach(function(g){const E=m.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),{x:s,y:o,width:c-s,height:f-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,s=e.filter,o=s.getContext(),c,f,m,g;if(!t||t.length===0)return i;if(this._filterUpToDate)return s;let E=!0;for(let A=0;A<t.length;A++)if(typeof t[A]=="string"&&gA(),typeof t[A]!="string"||!gA()){E=!1;break}const b=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),E){const A=t.join(" ");return o.save(),o.setAttr("filter",A),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),o.restore(),this._filterUpToDate=!0,s}try{for(c=t.length,o.clear(),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),f=o.getImageData(0,0,s.getWidth(),s.getHeight()),m=0;m<c;m++)g=t[m],typeof g=="string"&&(g=iN(g)),g.call(this,f),o.putImageData(f,0,0)}catch(A){et.error("Unable to apply filter. "+A.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,e){if(this._cache&&this._cache.delete(_A),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(V1);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],m=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:m,handler:e})}return this}off(t,e){let i=(t||"").split(V1),s=i.length,o,c,f,m,g,E;if(this._cache&&this._cache.delete(_A),!t)for(c in this.eventListeners)this._off(c);for(o=0;o<s;o++)if(f=i[o],m=f.split("."),g=m[0],E=m[1],g)this.eventListeners[g]&&this._off(g,E,e);else for(c in this.eventListeners)this._off(c,E,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(i){e.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const s=this;this.on(t,function(o){const c=o.target.findAncestors(e,!0,s);for(let f=0;f<c.length;f++)o=et.cloneObject(o),o.currentTarget=c[f],i.call(c[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),tn._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Hu),this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(yA),this._clearSelfAndDescendantCache(TA),this._clearSelfAndDescendantCache(aT),this._clearSelfAndDescendantCache(sT)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+et._capitalize(t);return et._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)e!==aN&&(i=vA+et._capitalize(e),et._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(sT,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(aT,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;tn._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const o=!e&&!kt.hitOnDragEnabled&&(s||kt.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,s,o,c,f;function m(E){for(s=[],o=E.length,c=0;c<o;c++)f=E[c],i++,f.nodeType!==EA&&(s=s.concat(f.getChildren().slice())),f._id===e._id&&(c=o);s.length>0&&s[0].getDepth()<=t&&m(s)}const g=this.getStage();return e.nodeType!==dN&&g&&m(g.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(_h),this._clearSelfAndDescendantCache(Hu)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),o=new Ar,c=this.offset();return o.m=s.slice(),o.translate(c.x,c.y),o.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(_h);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(_h),this._clearSelfAndDescendantCache(Hu),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),o=this.y();return e!==void 0&&(s+=e),i!==void 0&&(o+=i),this.setPosition({x:s,y:o}),this}_eachAncestorReverse(t,e){let i=[],s=this.getParent(),o,c;if(!(e&&e._id===this._id)){for(i.unshift(this);s&&(!e||s._id!==e._id);)i.unshift(s),s=s.parent;for(o=i.length,c=0;c<o;c++)t(i[c])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return et.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return et.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return et.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return et.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return et.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&et.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(P1,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,s,o,c;const f={attrs:{},className:this.getClassName()};for(e in t)i=t[e],c=et.isObject(i)&&!et._isPlainObject(i)&&!et._isArray(i),!c&&(s=typeof this[e]=="function"&&this[e],delete t[e],o=s?s.call(this):null,t[e]=i,o!==i&&(f.attrs[e]=i));return et._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let o=this.parent;for(;o;){if(o===i)return s;o._isMatch(t)&&s.push(o),o=o.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,s,o;for(s=0;s<i;s++)if(o=e[s],et.isValidSelector(o)||(et.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),et.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),et.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(TA,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Hu,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new Ar,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?e.multiply(i.getTransform()):s==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;{e=this._cache.get(Hu)||new Ar,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const i=this.transformsEnabled();if(i==="all")e.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,o=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;e.translate(s-c,o-f)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(_h,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(_h)||new Ar;i.reset();const s=this.x(),o=this.y(),c=kt.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,m=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,E=this.attrs.skewY||0,b=this.attrs.offsetX||0,A=this.attrs.offsetY||0;return(s!==0||o!==0)&&i.translate(s,o),c!==0&&i.rotate(c),(g!==0||E!==0)&&i.skew(g,E),(f!==1||m!==1)&&i.scale(f,m),(b!==0||A!==0)&&i.translate(-1*b,-1*A),i.dirty=!1,i}clone(t){let e=et.cloneObject(this.attrs),i,s,o,c,f;for(i in t)e[i]=t[i];const m=new this.constructor(e);for(i in this.eventListeners)for(s=this.eventListeners[i],o=s.length,c=0;c<o;c++)f=s[c],f.name.indexOf(rN)<0&&(m.eventListeners[i]||(m.eventListeners[i]=[]),m.eventListeners[i].push(f));return m}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(e.x),o=t.y!==void 0?t.y:Math.floor(e.y),c=t.pixelRatio||1,f=new Eh({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:c}),m=f.getContext(),g=new Eh({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(m._context.imageSmoothingEnabled=!1),m.save(),(s||o)&&m.translate(-1*s,-1*o),this.drawScene(f,void 0,g),m.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,et._urlToImage(this.toDataURL(t),function(o){e(o),s?.(o)})}catch(s){i(s)}})}toBlob(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(o=>{e(o),s?.(o)},t?.mimeType,t?.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():kt.dragDistance}_off(t,e,i){let s=this.eventListeners[t],o,c,f;for(o=0;o<s.length;o++)if(c=s[o].name,f=s[o].handler,(c!=="konva"||e==="konva")&&(!e||c===e)&&(!i||i===f)){if(s.splice(o,1),s.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,e,i){this._fire(t+sN,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return i!==-1&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[vA+et._capitalize(t)];return et._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(kt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];i===e&&!et.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===EA&&(e.target=this);const s=[oN,lN,uN,cN,hN,fN];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,e);const c=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i;const{nodeType:s}=this,o=xt.protoListenerMap.get(s)||{};let c=o?.[t];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const m=(i=(e=f.eventListeners)===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:[];c.push(...m),f=Object.getPrototypeOf(f)}o[t]=c,xt.protoListenerMap.set(s,o)}return c}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(let o=0;o<i.length;o++)i[o].handler.call(this,e);const s=this.eventListeners[t];if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const o=i._getPointerById(e)||i._changedPointerPositions[0]||s;tn._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-s.x,y:o.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){tn._dragElements.has(this._id)||this._createDragElement(t);const i=tn._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let s={x:i.x-e.offset.x,y:i.y-e.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const c=o.call(this,s,t);c?s=c:et.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const e=tn._dragElements.get(this._id);e&&(e.dragStatus="stopped"),tn._endDragBefore(t),tn._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=tn._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||kt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;tn._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=tn._dragElements.get(this._id),i=e&&e.dragStatus==="dragging",s=e&&e.dragStatus==="ready";i?this.stopDrag():s&&tn._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return et.haveIntersection(i,this.getClientRect())}static create(t,e){return et._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=xt.prototype.getClassName.call(t),s=t.children,o,c,f;e&&(t.attrs.container=e),kt[i]||(et.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const m=kt[i];if(o=new m(t.attrs),s)for(c=s.length,f=0;f<c;f++)o.add(xt._createNode(s[f]));return o}}xt.protoListenerMap=new Map;xt.prototype.nodeType="Node";xt.prototype._attrsAffectingSize=[];xt.prototype.eventListeners={};xt.prototype.on.call(xt.prototype,mN,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(_h),this._clearSelfAndDescendantCache(Hu)});xt.prototype.on.call(xt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(aT)});xt.prototype.on.call(xt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(sT)});xt.prototype.on.call(xt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(P1)});const yn=B.addGetterSetter;yn(xt,"zIndex");yn(xt,"absolutePosition");yn(xt,"position");yn(xt,"x",0,Mt());yn(xt,"y",0,Mt());yn(xt,"globalCompositeOperation","source-over",bd());yn(xt,"opacity",1,Mt());yn(xt,"name","",bd());yn(xt,"id","",bd());yn(xt,"rotation",0,Mt());B.addComponentsGetterSetter(xt,"scale",["x","y"]);yn(xt,"scaleX",1,Mt());yn(xt,"scaleY",1,Mt());B.addComponentsGetterSetter(xt,"skew",["x","y"]);yn(xt,"skewX",0,Mt());yn(xt,"skewY",0,Mt());B.addComponentsGetterSetter(xt,"offset",["x","y"]);yn(xt,"offsetX",0,Mt());yn(xt,"offsetY",0,Mt());yn(xt,"dragDistance",void 0,Mt());yn(xt,"width",0,Mt());yn(xt,"height",0,Mt());yn(xt,"listening",!0,$o());yn(xt,"preventDefault",!0,$o());yn(xt,"filters",void 0,function(n){return this._filterUpToDate=!1,n});yn(xt,"visible",!0,$o());yn(xt,"transformsEnabled","all",bd());yn(xt,"size");yn(xt,"dragBoundFunc");yn(xt,"draggable",!1,$o());B.backCompat(xt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Rr extends xt{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants(s=>{const o=s._isMatch(t);return o&&i.push(s),!!(o&&e)}),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=xt.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=xt.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){e.add(i.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,i){e.index=i}),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas(),c=o&&o.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=o&&o.isCache;if(!this.isVisible()&&!g)return this;if(m){c.save();const E=this.getAbsoluteTransform(e).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",o,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,o=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){o.save();const m=this.getAbsoluteTransform(e).getMatrix();o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var o;const c=e&&e.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),E=typeof f=="number"&&typeof m=="number"||g,b=i===this;if(E){c.save();const N=this.getAbsoluteTransform(i);let D=N.getMatrix();c.transform(D[0],D[1],D[2],D[3],D[4],D[5]),c.beginPath();let L;if(g)L=g.call(this,c,this);else{const U=this.clipX(),G=this.clipY();c.rect(U||0,G||0,f,m)}c.clip.apply(c,L),D=N.copy().invert().getMatrix(),c.transform(D[0],D[1],D[2],D[3],D[4],D[5])}const A=!b&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";A&&(c.save(),c._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(N){N[t](e,i,s)}),A&&c.restore(),E&&c.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let o,c,f,m,g={x:1/0,y:1/0,width:0,height:0};const E=this;(e=this.children)===null||e===void 0||e.forEach(function(N){if(!N.visible())return;const D=N.getClientRect({relativeTo:E,skipShadow:t.skipShadow,skipStroke:t.skipStroke});D.width===0&&D.height===0||(o===void 0?(o=D.x,c=D.y,f=D.x+D.width,m=D.y+D.height):(o=Math.min(o,D.x),c=Math.min(c,D.y),f=Math.max(f,D.x+D.width),m=Math.max(m,D.y+D.height)))});const b=this.find("Shape");let A=!1;for(let N=0;N<b.length;N++)if(b[N]._isVisible(this)){A=!0;break}return A&&o!==void 0?g={x:o,y:c,width:f-o,height:m-c}:g={x:0,y:0,width:0,height:0},i?g:this._transformedRect(g,s)}}B.addComponentsGetterSetter(Rr,"clip",["x","y","width","height"]);B.addGetterSetter(Rr,"clipX",void 0,Mt());B.addGetterSetter(Rr,"clipY",void 0,Mt());B.addGetterSetter(Rr,"clipWidth",void 0,Mt());B.addGetterSetter(Rr,"clipHeight",void 0,Mt());B.addGetterSetter(Rr,"clipFunc");const $0=new Map,U6=kt._global.PointerEvent!==void 0;function mE(n){return $0.get(n)}function uS(n){return{evt:n,pointerId:n.pointerId}}function z6(n,t){return $0.get(n)===t}function B6(n,t){M0(n),t.getStage()&&($0.set(n,t),U6&&t._fire("gotpointercapture",uS(new PointerEvent("gotpointercapture"))))}function M0(n,t){const e=$0.get(n);if(!e)return;const i=e.getStage();i&&i.content,$0.delete(n),U6&&e._fire("lostpointercapture",uS(new PointerEvent("lostpointercapture")))}const gN="Stage",_N="string",SA="px",yN="mouseout",G6="mouseleave",H6="mouseover",q6="mouseenter",F6="mousemove",j6="mousedown",K6="mouseup",T0="pointermove",S0="pointerdown",Fm="pointerup",b0="pointercancel",vN="lostpointercapture",g1="pointerout",A0="pointerleave",_1="pointerover",y1="pointerenter",rT="contextmenu",Y6="touchstart",Q6="touchend",X6="touchmove",J6="touchcancel",oT="wheel",EN=5,TN=[[q6,"_pointerenter"],[j6,"_pointerdown"],[F6,"_pointermove"],[K6,"_pointerup"],[G6,"_pointerleave"],[Y6,"_pointerdown"],[X6,"_pointermove"],[Q6,"_pointerup"],[J6,"_pointercancel"],[H6,"_pointerover"],[oT,"_wheel"],[rT,"_contextmenu"],[S0,"_pointerdown"],[T0,"_pointermove"],[Fm,"_pointerup"],[b0,"_pointercancel"],[A0,"_pointerleave"],[vN,"_lostpointercapture"]],pE={mouse:{[g1]:yN,[A0]:G6,[_1]:H6,[y1]:q6,[T0]:F6,[S0]:j6,[Fm]:K6,[b0]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[g1]:"touchout",[A0]:"touchleave",[_1]:"touchover",[y1]:"touchenter",[T0]:X6,[S0]:Y6,[Fm]:Q6,[b0]:J6,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[g1]:g1,[A0]:A0,[_1]:_1,[y1]:y1,[T0]:T0,[S0]:S0,[Fm]:Fm,[b0]:b0,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},w0=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Nm=n=>{const t=w0(n);if(t==="pointer")return kt.pointerEventsEnabled&&pE.pointer;if(t==="touch")return pE.touch;if(t==="mouse")return pE.mouse};function bA(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&et.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const SN="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",P0=[];let Vv=class extends Rr{constructor(t){super(bA(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),P0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{bA(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",i=t.getType()==="FastLayer";e||i||et.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===_N){let e;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Rr.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&et._isInDocument(t)&&this.container().removeChild(t);const e=P0.indexOf(this);return e>-1&&P0.splice(e,1),et.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(et.warn(SN),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new Eh({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach(function(o){if(!o.isVisible())return;const c=o._toKonvaCanvas(t);i.drawImage(c._canvas,t.x,t.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let o=s;o>=0;o--){const c=e[o].getIntersection(t);if(c)return c}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+SA,this.content.style.height=e+SA),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t,...e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const i=this.children.length;return i>EN&&et.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),kt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return z6(t,this)}setPointerCapture(t){B6(t,this)}releaseCapture(t){M0(t)}getLayers(){return this.children}_bindContentEvents(){kt.isBrowser&&TN.forEach(([t,e])=>{this.content.addEventListener(t,i=>{this[e](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Nm(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Nm(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Nm(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),o=!(kt.isDragging()||kt.isTransforming())||kt.hitOnDragEnabled;s&&o?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):o&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Nm(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(o=>{const c=this.getIntersection(o);if(tn.justDragged=!1,kt["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}kt.capturePointerEventsEnabled&&c.setPointerCapture(o.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(e.pointerdown,{evt:t,pointerId:o.id}),s=!0;const f=t.type.indexOf("touch")>=0;c.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Nm(t.type),i=w0(t.type);if(!e)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(kt.isDragging()&&tn.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(kt.isDragging()||kt.isTransforming())||kt.hitOnDragEnabled))return;const c={};let f=!1;const m=this._getTargetShape(i);this._changedPointerPositions.forEach(g=>{const E=mE(g.id)||this.getIntersection(g),b=g.id,A={evt:t,pointerId:b},N=m!==E;if(N&&m&&(m._fireAndBubble(e.pointerout,{...A},E),m._fireAndBubble(e.pointerleave,{...A},E)),E){if(c[E._id])return;c[E._id]=!0}E&&E.isListening()?(f=!0,N&&(E._fireAndBubble(e.pointerover,{...A},m),E._fireAndBubble(e.pointerenter,{...A},m),this[i+"targetShape"]=E),E._fireAndBubble(e.pointermove,{...A})):m&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:b}),this[i+"targetShape"]=null)}),f||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Nm(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],o=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(m=>{const g=mE(m.id)||this.getIntersection(m);if(g){if(g.releaseCapture(m.id),c[g._id])return;c[g._id]=!0}const E=m.id,b={evt:t,pointerId:E};let A=!1;kt["_"+i+"InDblClickWindow"]?(A=!0,clearTimeout(this[i+"DblTimeout"])):tn.justDragged||(kt["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){kt["_"+i+"InDblClickWindow"]=!1},kt.dblClickWindow),g&&g.isListening()?(f=!0,this[i+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...b}),kt["_"+i+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(e.pointerclick,{...b}),A&&o&&o===g&&g._fireAndBubble(e.pointerdblclick,{...b}))):(this[i+"ClickEndShape"]=null,f||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),kt["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:E}),A&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:E}))}),f||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),kt["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(rT,{evt:t}):this._fire(rT,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(oT,{evt:t}):this._fire(oT,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=mE(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(Fm,uS(t)),M0(t.pointerId)}_lostpointercapture(t){M0(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,s=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}])}_setPointerPosition(t){et.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Eh({width:this.width(),height:this.height()}),this.bufferHitCanvas=new oS({pixelRatio:1,width:this.width(),height:this.height()}),!kt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return et.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Vv.prototype.nodeType=gN;li(Vv);B.addGetterSetter(Vv,"container");kt.isBrowser&&document.addEventListener("visibilitychange",()=>{P0.forEach(n=>{n.batchDraw()})});const W6="hasShadow",Z6="shadowRGBA",$6="patternImage",tw="linearGradient",ew="radialGradient";let v1;function gE(){return v1||(v1=et.createCanvasElement().getContext("2d"),v1)}const V0={};function bN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function AN(n){n.stroke()}function wN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function RN(n){n.stroke()}function CN(){this._clearCache(W6)}function IN(){this._clearCache(Z6)}function NN(){this._clearCache($6)}function DN(){this._clearCache(tw)}function xN(){this._clearCache(ew)}class It extends xt{constructor(t){super(t);let e,i=0;for(;e=et.getHitColor(),!(e&&!(e in V0));)if(i++,i>=1e4){et.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),e=et.getRandomColor();break}this.colorKey=e,V0[e]=this}getContext(){return et.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return et.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(W6,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache($6,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=gE().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const i=new Ar;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(kt.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),o=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(o)}return e}}_getLinearGradient(){return this._getCache(tw,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=gE(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),o=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}_getRadialGradient(){return this._getCache(ew,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=gE(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),o=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}getShadowRGBA(){return this._getCache(Z6,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=et.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return xt.prototype.destroy.call(this),delete V0[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const s=t||this.hasFill(),o=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&o&&c)return!0;const f=this.hasShadow(),m=this.shadowForStrokeEnabled();return!!(s&&o&&f&&m)}setStrokeHitEnabled(t){et.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,o=t.relativeTo||e&&this.getStage()||void 0,c=this.getSelfRect(),m=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=c.width+m,E=c.height+m,b=!t.skipShadow&&this.hasShadow(),A=b?this.shadowOffsetX():0,N=b?this.shadowOffsetY():0,D=g+Math.abs(A),L=E+Math.abs(N),U=b&&this.shadowBlur()||0,G=D+U*2,j=L+U*2,X={width:G,height:j,x:-(m/2+U)+Math.min(A,0)+c.x,y:-(m/2+U)+Math.min(N,0)+c.y};return s?X:this._transformedRect(X,o)}drawScene(t,e,i){const s=this.getLayer(),o=t||s.getCanvas(),c=o.getContext(),f=this._getCanvasCache(),m=this.getSceneFunc(),g=this.hasShadow();let E;const b=e===this;if(!this.isVisible()&&!b)return this;if(f){c.save();const A=this.getAbsoluteTransform(e).getMatrix();return c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!m)return this;if(c.save(),this._useBufferCanvas()){E=this.getStage();const A=i||E.bufferCanvas,N=A.getContext();i?(N.save(),N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,A.width,A.height),N.restore()):N.clear(),N.save(),N._applyLineJoin(this),N._applyMiterLimit(this);const D=this.getAbsoluteTransform(e).getMatrix();N.transform(D[0],D[1],D[2],D[3],D[4],D[5]),m.call(this,N,this),N.restore();const L=A.pixelRatio;g&&c._applyShadow(this),b||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(A._canvas,A.x||0,A.y||0,A.width/L,A.height/L)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!b){const A=this.getAbsoluteTransform(e).getMatrix();c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}g&&c._applyShadow(this),m.call(this,c,this)}return c.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),o=t||s.hitCanvas,c=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),m=this._getCanvasCache(),g=m&&m.hit;if(this.colorKey||et.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){c.save();const b=this.getAbsoluteTransform(e).getMatrix();return c.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===e)){const b=this.getAbsoluteTransform(e).getMatrix();c.transform(b[0],b[1],b[2],b[3],b[4],b[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,o=s.getContext(),c=s.getWidth(),f=s.getHeight();o.clear(),o.drawImage(i._canvas,0,0,c,f);try{const m=o.getImageData(0,0,c,f),g=m.data,E=g.length,b=et._hexToRgb(this.colorKey);for(let A=0;A<E;A+=4)g[A+3]>t?(g[A]=b.r,g[A+1]=b.g,g[A+2]=b.b,g[A+3]=255):g[A+3]=0;o.putImageData(m,0,0)}catch(m){et.error("Unable to draw hit graph from cached scene canvas. "+m.message)}return this}hasPointerCapture(t){return z6(t,this)}setPointerCapture(t){B6(t,this)}releaseCapture(t){M0(t)}}It.prototype._fillFunc=bN;It.prototype._strokeFunc=AN;It.prototype._fillFuncHit=wN;It.prototype._strokeFuncHit=RN;It.prototype._centroid=!1;It.prototype.nodeType="Shape";li(It);It.prototype.eventListeners={};It.prototype.on.call(It.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",CN);It.prototype.on.call(It.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",IN);It.prototype.on.call(It.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",NN);It.prototype.on.call(It.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",DN);It.prototype.on.call(It.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",xN);B.addGetterSetter(It,"stroke",void 0,L6());B.addGetterSetter(It,"strokeWidth",2,Mt());B.addGetterSetter(It,"fillAfterStrokeEnabled",!1);B.addGetterSetter(It,"hitStrokeWidth","auto",lS());B.addGetterSetter(It,"strokeHitEnabled",!0,$o());B.addGetterSetter(It,"perfectDrawEnabled",!0,$o());B.addGetterSetter(It,"shadowForStrokeEnabled",!0,$o());B.addGetterSetter(It,"lineJoin");B.addGetterSetter(It,"lineCap");B.addGetterSetter(It,"miterLimit");B.addGetterSetter(It,"sceneFunc");B.addGetterSetter(It,"hitFunc");B.addGetterSetter(It,"dash");B.addGetterSetter(It,"dashOffset",0,Mt());B.addGetterSetter(It,"shadowColor",void 0,bd());B.addGetterSetter(It,"shadowBlur",0,Mt());B.addGetterSetter(It,"shadowOpacity",1,Mt());B.addComponentsGetterSetter(It,"shadowOffset",["x","y"]);B.addGetterSetter(It,"shadowOffsetX",0,Mt());B.addGetterSetter(It,"shadowOffsetY",0,Mt());B.addGetterSetter(It,"fillPatternImage");B.addGetterSetter(It,"fill",void 0,L6());B.addGetterSetter(It,"fillPatternX",0,Mt());B.addGetterSetter(It,"fillPatternY",0,Mt());B.addGetterSetter(It,"fillLinearGradientColorStops");B.addGetterSetter(It,"strokeLinearGradientColorStops");B.addGetterSetter(It,"fillRadialGradientStartRadius",0);B.addGetterSetter(It,"fillRadialGradientEndRadius",0);B.addGetterSetter(It,"fillRadialGradientColorStops");B.addGetterSetter(It,"fillPatternRepeat","repeat");B.addGetterSetter(It,"fillEnabled",!0);B.addGetterSetter(It,"strokeEnabled",!0);B.addGetterSetter(It,"shadowEnabled",!0);B.addGetterSetter(It,"dashEnabled",!0);B.addGetterSetter(It,"strokeScaleEnabled",!0);B.addGetterSetter(It,"fillPriority","color");B.addComponentsGetterSetter(It,"fillPatternOffset",["x","y"]);B.addGetterSetter(It,"fillPatternOffsetX",0,Mt());B.addGetterSetter(It,"fillPatternOffsetY",0,Mt());B.addComponentsGetterSetter(It,"fillPatternScale",["x","y"]);B.addGetterSetter(It,"fillPatternScaleX",1,Mt());B.addGetterSetter(It,"fillPatternScaleY",1,Mt());B.addComponentsGetterSetter(It,"fillLinearGradientStartPoint",["x","y"]);B.addComponentsGetterSetter(It,"strokeLinearGradientStartPoint",["x","y"]);B.addGetterSetter(It,"fillLinearGradientStartPointX",0);B.addGetterSetter(It,"strokeLinearGradientStartPointX",0);B.addGetterSetter(It,"fillLinearGradientStartPointY",0);B.addGetterSetter(It,"strokeLinearGradientStartPointY",0);B.addComponentsGetterSetter(It,"fillLinearGradientEndPoint",["x","y"]);B.addComponentsGetterSetter(It,"strokeLinearGradientEndPoint",["x","y"]);B.addGetterSetter(It,"fillLinearGradientEndPointX",0);B.addGetterSetter(It,"strokeLinearGradientEndPointX",0);B.addGetterSetter(It,"fillLinearGradientEndPointY",0);B.addGetterSetter(It,"strokeLinearGradientEndPointY",0);B.addComponentsGetterSetter(It,"fillRadialGradientStartPoint",["x","y"]);B.addGetterSetter(It,"fillRadialGradientStartPointX",0);B.addGetterSetter(It,"fillRadialGradientStartPointY",0);B.addComponentsGetterSetter(It,"fillRadialGradientEndPoint",["x","y"]);B.addGetterSetter(It,"fillRadialGradientEndPointX",0);B.addGetterSetter(It,"fillRadialGradientEndPointY",0);B.addGetterSetter(It,"fillPatternRotation",0);B.addGetterSetter(It,"fillRule",void 0,bd());B.backCompat(It,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const ON="beforeDraw",MN="draw",nw=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],PN=nw.length;let Ad=class extends Rr{constructor(t){super(t),this.canvas=new Eh,this.hitCanvas=new oS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){xt.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!xt.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(xt.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(xt.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return xt.prototype.remove.call(this),t&&t.parentNode&&et._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),xt.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){et.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){et.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,et.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let s=0;s<PN;s++){const o=nw[s],c=this._getIntersection({x:t.x+o.x*e,y:t.y+o.y*e}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=i[3];if(s===255){const o=et.getHitColorKey(i[0],i[1],i[2]),c=V0[o];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas();return this._fire(ON,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),Rr.prototype.drawScene.call(this,o,e,i),this._fire(MN,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Rr.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return et.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ad.prototype.nodeType="Layer";li(Ad);B.addGetterSetter(Ad,"imageSmoothingEnabled",!0);B.addGetterSetter(Ad,"clearBeforeDraw",!0);B.addGetterSetter(Ad,"hitGraphEnabled",!0,$o());class cS extends Ad{constructor(t){super(t),this.listening(!1),et.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}cS.prototype.nodeType="FastLayer";li(cS);let ep=class extends Rr{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to groups.")}};ep.prototype.nodeType="Group";li(ep);const _E=(function(){return Yf.performance&&Yf.performance.now?function(){return Yf.performance.now()}:function(){return new Date().getTime()}})();class po{constructor(t,e){this.id=po.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:_E(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=po.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=_E(),po._addAnimation(this),this}stop(){return po._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let o=0;o<s;o++)if(i[o].id===e){this.animations.splice(o,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],o=s.layers,c=s.func;s._updateFrameObject(_E());const f=o.length;let m;if(c?m=c.call(s,s.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const E=o[g];E._id!==void 0&&(t[E._id]=E)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=po;t.animations.length?(t._runFrames(),et.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,et.requestAnimFrame(this._animationLoop))}}po.animations=[];po.animIdCounter=0;po.animRunning=!1;const VN={node:1,duration:1,easing:1,onFinish:1,yoyo:1},kN=1,AA=2,wA=3,RA=["fill","stroke","shadowColor"];let LN=0;class UN{constructor(t,e,i,s,o,c,f){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=o-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=AA,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=wA,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===AA?this.setTime(t):this.state===wA&&this.setTime(this.duration-t)}pause(){this.state=kN,this.fire("onPause")}getTimer(){return new Date().getTime()}}class wn{constructor(t){const e=this,i=t.node,s=i._id,o=t.easing||k0.Linear,c=!!t.yoyo;let f,m;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=i,this._id=LN++;const g=i.getLayer()||(i instanceof kt.Stage?i.getLayers():null);g||et.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new po(function(){e.tween.onEnterFrame()},g),this.tween=new UN(m,function(E){e._tweenFunc(E)},o,0,1,f*1e3,c),this._addListeners(),wn.attrs[s]||(wn.attrs[s]={}),wn.attrs[s][this._id]||(wn.attrs[s][this._id]={}),wn.tweens[s]||(wn.tweens[s]={});for(m in t)VN[m]===void 0&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,s=i._id;let o,c,f,m,g;const E=wn.tweens[s][t];E&&delete wn.attrs[s][E][t];let b=i.getAttr(t);if(et._isArray(e))if(o=[],c=Math.max(e.length,b.length),t==="points"&&e.length!==b.length&&(e.length>b.length?(m=b,b=et._prepareArrayForTween(b,e,i.closed())):(f=e,e=et._prepareArrayForTween(e,b,i.closed()))),t.indexOf("fill")===0)for(let A=0;A<c;A++)if(A%2===0)o.push(e[A]-b[A]);else{const N=et.colorToRGBA(b[A]);g=et.colorToRGBA(e[A]),b[A]=N,o.push({r:g.r-N.r,g:g.g-N.g,b:g.b-N.b,a:g.a-N.a})}else for(let A=0;A<c;A++)o.push(e[A]-b[A]);else RA.indexOf(t)!==-1?(b=et.colorToRGBA(b),g=et.colorToRGBA(e),o={r:g.r-b.r,g:g.g-b.g,b:g.b-b.b,a:g.a-b.a}):o=e-b;wn.attrs[s][this._id][t]={start:b,diff:o,end:e,trueEnd:f,trueStart:m},wn.tweens[s][t]=this._id}_tweenFunc(t){const e=this.node,i=wn.attrs[e._id][this._id];let s,o,c,f,m,g,E,b;for(s in i){if(o=i[s],c=o.start,f=o.diff,b=o.end,et._isArray(c))if(m=[],E=Math.max(c.length,b.length),s.indexOf("fill")===0)for(g=0;g<E;g++)g%2===0?m.push((c[g]||0)+f[g]*t):m.push("rgba("+Math.round(c[g].r+f[g].r*t)+","+Math.round(c[g].g+f[g].g*t)+","+Math.round(c[g].b+f[g].b*t)+","+(c[g].a+f[g].a*t)+")");else for(g=0;g<E;g++)m.push((c[g]||0)+f[g]*t);else RA.indexOf(s)!==-1?m="rgba("+Math.round(c.r+f.r*t)+","+Math.round(c.g+f.g*t)+","+Math.round(c.b+f.b*t)+","+(c.a+f.a*t)+")":m=c+f*t;e.setAttr(s,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=wn.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=wn.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=wn.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete wn.tweens[t][s];delete wn.attrs[t][e],wn.tweens[t]&&(Object.keys(wn.tweens[t]).length===0&&delete wn.tweens[t],Object.keys(wn.attrs[t]).length===0&&delete wn.attrs[t])}}wn.attrs={};wn.tweens={};xt.prototype.to=function(n){const t=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),t&&t()},new wn(n).play()};const k0={BackEaseIn(n,t,e,i){return e*(n/=i)*n*((1.70158+1)*n-1.70158)+t},BackEaseOut(n,t,e,i){return e*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+t},BackEaseInOut(n,t,e,i){let s=1.70158;return(n/=i/2)<1?e/2*(n*n*(((s*=1.525)+1)*n-s))+t:e/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},ElasticEaseIn(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t)},ElasticEaseOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/o)+e+t)},ElasticEaseInOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i/2)===2?t+e:(o||(o=i*(.3*1.5)),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o)*.5+e+t)},BounceEaseOut(n,t,e,i){return(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},BounceEaseIn(n,t,e,i){return e-k0.BounceEaseOut(i-n,0,e,i)+t},BounceEaseInOut(n,t,e,i){return n<i/2?k0.BounceEaseIn(n*2,0,e,i)*.5+t:k0.BounceEaseOut(n*2-i,0,e,i)*.5+e*.5+t},EaseIn(n,t,e,i){return e*(n/=i)*n+t},EaseOut(n,t,e,i){return-e*(n/=i)*(n-2)+t},EaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*(--n*(n-2)-1)+t},StrongEaseIn(n,t,e,i){return e*(n/=i)*n*n*n*n+t},StrongEaseOut(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},StrongEaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},Linear(n,t,e,i){return e*n/i+t}},np=et._assign(kt,{Util:et,Transform:Ar,Node:xt,Container:Rr,Stage:Vv,stages:P0,Layer:Ad,FastLayer:cS,Group:ep,DD:tn,Shape:It,shapes:V0,Animation:po,Tween:wn,Easings:k0,Context:Mv,Canvas:rS});class nc extends It{_sceneFunc(t){const e=kt.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=kt.getAngle(i?360-this.angle():this.angle()),o=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),m=Math.sin(Math.min(s,Math.PI/2)),g=o*(o>0?t:e),E=c*e,b=f*(f>0?t:e),A=m*(m>0?e:t);return{x:g,y:i?-1*A:b,width:E-g,height:A-b}}}nc.prototype._centroid=!0;nc.prototype.className="Arc";nc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];li(nc);B.addGetterSetter(nc,"innerRadius",0,Mt());B.addGetterSetter(nc,"outerRadius",0,Mt());B.addGetterSetter(nc,"angle",0,Mt());B.addGetterSetter(nc,"clockwise",!1,$o());function lT(n,t,e,i,s,o,c){const f=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),m=Math.sqrt(Math.pow(s-e,2)+Math.pow(o-i,2)),g=c*f/(f+m),E=c*m/(f+m),b=e-g*(s-n),A=i-g*(o-t),N=e+E*(s-n),D=i+E*(o-t);return[b,A,N,D]}function CA(n,t){const e=n.length,i=[];for(let s=2;s<e-2;s+=2){const o=lT(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],t);isNaN(o[0])||(i.push(o[0]),i.push(o[1]),i.push(n[s]),i.push(n[s+1]),i.push(o[2]),i.push(o[3]))}return i}function zN(n){const t=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],e=[];for(const i of t){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const o=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=o*o-4*s*c;if(f>=0){const m=Math.sqrt(f);e.push((-o+m)/(2*s)),e.push((-o-m)/(2*s))}}}return e.filter(i=>i>0&&i<1).flatMap(i=>t.map(s=>{const o=1-i;return o*o*o*s[0]+3*o*o*i*s[1]+3*o*i*i*s[2]+i*i*i*s[3]}))}let ic=class extends It{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),i=e.length,s=this.tension(),o=this.closed(),c=this.bezier();if(!i)return;let f=0;if(t.beginPath(),t.moveTo(e[0],e[1]),s!==0&&i>4){const m=this.getTensionPoints(),g=m.length;for(f=o?0:4,o||t.quadraticCurveTo(m[0],m[1],m[2],m[3]);f<g-2;)t.bezierCurveTo(m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]);o||t.quadraticCurveTo(m[g-2],m[g-1],e[i-2],e[i-1])}else if(c)for(f=2;f<i;)t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);else for(f=2;f<i;f+=2)t.lineTo(e[f],e[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():CA(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=lT(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=lT(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),c=CA(t,i);return[s[2],s[3]].concat(c).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...zN(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);return{x:e,y:s,width:i-e,height:o-s}}};ic.prototype.className="Line";ic.prototype._attrsAffectingSize=["points","bezier","tension"];li(ic);B.addGetterSetter(ic,"closed",!1);B.addGetterSetter(ic,"bezier",!1);B.addGetterSetter(ic,"tension",0,Mt());B.addGetterSetter(ic,"points",[],eN());const BN=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],GN=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],HN=[[1],[1,1],[1,2,1],[1,3,3,1]],IA=(n,t,e)=>{let i,s;const c=e/2;i=0;for(let f=0;f<20;f++)s=c*BN[20][f]+c,i+=GN[20][f]*qN(n,t,s);return c*i},NA=(n,t,e)=>{e===void 0&&(e=1);const i=n[0]-2*n[1]+n[2],s=t[0]-2*t[1]+t[2],o=2*n[1]-2*n[0],c=2*t[1]-2*t[0],f=4*(i*i+s*s),m=4*(i*o+s*c),g=o*o+c*c;if(f===0)return e*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(t[2]-t[0],2));const E=m/(2*f),b=g/f,A=e+E,N=b-E*E,D=A*A+N>0?Math.sqrt(A*A+N):0,L=E*E+N>0?Math.sqrt(E*E+N):0,U=E+Math.sqrt(E*E+N)!==0?N*Math.log(Math.abs((A+D)/(E+L))):0;return Math.sqrt(f)/2*(A*D-E*L+U)};function qN(n,t,e){const i=uT(1,e,n),s=uT(1,e,t),o=i*i+s*s;return Math.sqrt(o)}const uT=(n,t,e)=>{const i=e.length-1;let s,o;if(i===0)return 0;if(n===0){o=0;for(let c=0;c<=i;c++)o+=HN[i][c]*Math.pow(1-t,i-c)*Math.pow(t,c)*e[c];return o}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(e[c+1]-e[c]);return uT(n-1,t,s)}},DA=(n,t,e)=>{let i=1,s=n/t,o=(n-e(s))/t,c=0;for(;i>.001;){const f=e(s+o),m=Math.abs(n-f)/t;if(m<i)i=m,s+=o;else{const g=e(s-o),E=Math.abs(n-g)/t;E<i?(i=E,s-=o):o/=2}if(c++,c>500)break}return s};class Rn extends It{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Rn.parsePathData(this.data()),this.pathLength=Rn.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<e.length;s++){const o=e[s].command,c=e[s].points;switch(o){case"L":t.lineTo(c[0],c[1]);break;case"M":t.moveTo(c[0],c[1]);break;case"C":t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],m=c[1],g=c[2],E=c[3],b=c[4],A=c[5],N=c[6],D=c[7],L=g>E?g:E,U=g>E?1:g/E,G=g>E?E/g:1;t.translate(f,m),t.rotate(N),t.scale(U,G),t.arc(0,0,L,b,b+A,1-D),t.scale(1/U,1/G),t.rotate(-N),t.translate(-f,-m);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(m){if(m.command==="A"){const g=m.points[4],E=m.points[5],b=m.points[4]+E;let A=Math.PI/180;if(Math.abs(g-b)<A&&(A=Math.abs(g-b)),E<0)for(let N=g-A;N>b;N-=A){const D=Rn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}else for(let N=g+A;N<b;N+=A){const D=Rn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}}else if(m.command==="C")for(let g=0;g<=1;g+=.01){const E=Rn.getPointOnCubicBezier(g,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);t.push(E.x,E.y)}else t=t.concat(m.points)});let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],isNaN(c)||(e=Math.min(e,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),o=Math.max(o,f));return{x:e,y:s,width:i-e,height:o-s}}getLength(){return this.pathLength}getPointAtLength(t){return Rn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,o=e.length;if(!o)return null;for(;s<o&&t>e[s].pathLength;)t-=e[s].pathLength,++s;if(s===o)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return e[s].command==="M"?(i=e[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:e[s].start.x,y:e[s].start.y};const c=e[s],f=c.points;switch(c.command){case"L":return Rn.getPointOnLine(t,c.start.x,c.start.y,f[0],f[1]);case"C":return Rn.getPointOnCubicBezier(DA(t,Rn.getPathLength(e),L=>IA([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],L)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Rn.getPointOnQuadraticBezier(DA(t,Rn.getPathLength(e),L=>NA([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],L)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const m=f[0],g=f[1],E=f[2],b=f[3],A=f[5],N=f[6];let D=f[4];return D+=A*t/c.pathLength,Rn.getPointOnEllipticalArc(m,g,E,b,D,N)}return null}static getPointOnLine(t,e,i,s,o,c,f){c=c??e,f=f??i;const m=this.getLineLength(e,i,s,o);if(m<1e-10)return{x:e,y:i};if(s===e)return{x:c,y:f+(o>i?t:-t)};const g=(o-i)/(s-e),E=Math.sqrt(t*t/(1+g*g))*(s<e?-1:1),b=g*E;if(Math.abs(f-i-g*(c-e))<1e-10)return{x:c+E,y:f+b};const A=((c-e)*(s-e)+(f-i)*(o-i))/(m*m),N=e+A*(s-e),D=i+A*(o-i),L=this.getLineLength(c,f,N,D),U=Math.sqrt(t*t-L*L),G=Math.sqrt(U*U/(1+g*g))*(s<e?-1:1),j=g*G;return{x:N+G,y:D+j}}static getPointOnCubicBezier(t,e,i,s,o,c,f,m,g){function E(U){return U*U*U}function b(U){return 3*U*U*(1-U)}function A(U){return 3*U*(1-U)*(1-U)}function N(U){return(1-U)*(1-U)*(1-U)}const D=m*E(t)+c*b(t)+s*A(t)+e*N(t),L=g*E(t)+f*b(t)+o*A(t)+i*N(t);return{x:D,y:L}}static getPointOnQuadraticBezier(t,e,i,s,o,c,f){function m(N){return N*N}function g(N){return 2*N*(1-N)}function E(N){return(1-N)*(1-N)}const b=c*m(t)+s*g(t)+e*E(t),A=f*m(t)+o*g(t)+i*E(t);return{x:b,y:A}}static getPointOnEllipticalArc(t,e,i,s,o,c){const f=Math.cos(c),m=Math.sin(c),g={x:i*Math.cos(o),y:s*Math.sin(o)};return{x:t+(g.x*f-g.y*m),y:e+(g.x*m+g.y*f)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let b=0;b<i.length;b++)e=e.replace(new RegExp(i[b],"g"),"|"+i[b]);const s=e.split("|"),o=[],c=[];let f=0,m=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let E;for(let b=1;b<s.length;b++){let A=s[b],N=A.charAt(0);for(A=A.slice(1),c.length=0;E=g.exec(A);)c.push(E[0]);let D=[],L=N==="A"||N==="a"?0:-1;for(let U=0,G=c.length;U<G;U++){const j=c[U];if(j==="00"){D.push(0,0),L>=0&&(L+=2,L>=7&&(L-=7));continue}if(L>=0){if(L===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(j)){D.push(parseInt(j[0],10)),D.push(parseInt(j[1],10)),D.push(parseFloat(j.slice(2))),L+=3,L>=7&&(L-=7);continue}if(j==="11"||j==="10"||j==="01"){D.push(parseInt(j[0],10)),D.push(parseInt(j[1],10)),L+=2,L>=7&&(L-=7);continue}if(j==="0"||j==="1"){D.push(parseInt(j,10)),L+=1,L>=7&&(L-=7);continue}}else if(L===4){if(/^[01]\d+(?:\.\d+)?$/.test(j)){D.push(parseInt(j[0],10)),D.push(parseFloat(j.slice(1))),L+=2,L>=7&&(L-=7);continue}if(j==="0"||j==="1"){D.push(parseInt(j,10)),L+=1,L>=7&&(L-=7);continue}}const X=parseFloat(j);isNaN(X)?D.push(0):D.push(X),L+=1,L>=7&&(L-=7)}else{const X=parseFloat(j);isNaN(X)?D.push(0):D.push(X)}}for(;D.length>0&&!isNaN(D[0]);){let U="",G=[];const j=f,X=m;let Z,gt,lt,V,M,k,q,H,K,z;switch(N){case"l":f+=D.shift(),m+=D.shift(),U="L",G.push(f,m);break;case"L":f=D.shift(),m=D.shift(),G.push(f,m);break;case"m":const Ft=D.shift(),Ut=D.shift();if(f+=Ft,m+=Ut,U="M",o.length>2&&o[o.length-1].command==="z"){for(let W=o.length-2;W>=0;W--)if(o[W].command==="M"){f=o[W].points[0]+Ft,m=o[W].points[1]+Ut;break}}G.push(f,m),N="l";break;case"M":f=D.shift(),m=D.shift(),U="M",G.push(f,m),N="L";break;case"h":f+=D.shift(),U="L",G.push(f,m);break;case"H":f=D.shift(),U="L",G.push(f,m);break;case"v":m+=D.shift(),U="L",G.push(f,m);break;case"V":m=D.shift(),U="L",G.push(f,m);break;case"C":G.push(D.shift(),D.shift(),D.shift(),D.shift()),f=D.shift(),m=D.shift(),G.push(f,m);break;case"c":G.push(f+D.shift(),m+D.shift(),f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",G.push(f,m);break;case"S":gt=f,lt=m,Z=o[o.length-1],Z.command==="C"&&(gt=f+(f-Z.points[2]),lt=m+(m-Z.points[3])),G.push(gt,lt,D.shift(),D.shift()),f=D.shift(),m=D.shift(),U="C",G.push(f,m);break;case"s":gt=f,lt=m,Z=o[o.length-1],Z.command==="C"&&(gt=f+(f-Z.points[2]),lt=m+(m-Z.points[3])),G.push(gt,lt,f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",G.push(f,m);break;case"Q":G.push(D.shift(),D.shift()),f=D.shift(),m=D.shift(),G.push(f,m);break;case"q":G.push(f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="Q",G.push(f,m);break;case"T":gt=f,lt=m,Z=o[o.length-1],Z.command==="Q"&&(gt=f+(f-Z.points[0]),lt=m+(m-Z.points[1])),f=D.shift(),m=D.shift(),U="Q",G.push(gt,lt,f,m);break;case"t":gt=f,lt=m,Z=o[o.length-1],Z.command==="Q"&&(gt=f+(f-Z.points[0]),lt=m+(m-Z.points[1])),f+=D.shift(),m+=D.shift(),U="Q",G.push(gt,lt,f,m);break;case"A":V=D.shift(),M=D.shift(),k=D.shift(),q=D.shift(),H=D.shift(),K=f,z=m,f=D.shift(),m=D.shift(),U="A",G=this.convertEndpointToCenterParameterization(K,z,f,m,q,H,V,M,k);break;case"a":V=D.shift(),M=D.shift(),k=D.shift(),q=D.shift(),H=D.shift(),K=f,z=m,f+=D.shift(),m+=D.shift(),U="A",G=this.convertEndpointToCenterParameterization(K,z,f,m,q,H,V,M,k);break}o.push({command:U||N,points:G,start:{x:j,y:X},pathLength:this.calcLength(j,X,U||N,G)})}(N==="z"||N==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,i,s){let o,c,f,m;const g=Rn;switch(i){case"L":return g.getLineLength(t,e,s[0],s[1]);case"C":return IA([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return NA([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":o=0;const E=s[4],b=s[5],A=s[4]+b;let N=Math.PI/180;if(Math.abs(E-A)<N&&(N=Math.abs(E-A)),c=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],E,0),b<0)for(m=E-N;m>A;m-=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(m=E+N;m<A;m+=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],A,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(t,e,i,s,o,c,f,m,g){const E=g*(Math.PI/180),b=Math.cos(E)*(t-i)/2+Math.sin(E)*(e-s)/2,A=-1*Math.sin(E)*(t-i)/2+Math.cos(E)*(e-s)/2,N=b*b/(f*f)+A*A/(m*m);N>1&&(f*=Math.sqrt(N),m*=Math.sqrt(N));let D=Math.sqrt((f*f*(m*m)-f*f*(A*A)-m*m*(b*b))/(f*f*(A*A)+m*m*(b*b)));o===c&&(D*=-1),isNaN(D)&&(D=0);const L=D*f*A/m,U=D*-m*b/f,G=(t+i)/2+Math.cos(E)*L-Math.sin(E)*U,j=(e+s)/2+Math.sin(E)*L+Math.cos(E)*U,X=function(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])},Z=function(q,H){return(q[0]*H[0]+q[1]*H[1])/(X(q)*X(H))},gt=function(q,H){return(q[0]*H[1]<q[1]*H[0]?-1:1)*Math.acos(Z(q,H))},lt=gt([1,0],[(b-L)/f,(A-U)/m]),V=[(b-L)/f,(A-U)/m],M=[(-1*b-L)/f,(-1*A-U)/m];let k=gt(V,M);return Z(V,M)<=-1&&(k=Math.PI),Z(V,M)>=1&&(k=0),c===0&&k>0&&(k=k-2*Math.PI),c===1&&k<0&&(k=k+2*Math.PI),[G,j,f,m,lt,k,E,c]}}Rn.prototype.className="Path";Rn.prototype._attrsAffectingSize=["data"];li(Rn);B.addGetterSetter(Rn,"data");class wd extends ic{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,i=this.points();let s=i;const o=this.tension()!==0&&i.length>4;o&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let m,g;if(o){const A=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],N=Rn.calcLength(s[s.length-4],s[s.length-3],"C",A),D=Rn.getPointOnQuadraticBezier(Math.min(1,1-c/N),A[0],A[1],A[2],A[3],A[4],A[5]);m=i[f-2]-D.x,g=i[f-1]-D.y}else m=i[f-2]-i[f-4],g=i[f-1]-i[f-3];const E=(Math.atan2(g,m)+e)%e,b=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[f-2],i[f-1]),t.rotate(E),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),o?(m=(s[0]+s[2])/2-i[0],g=(s[1]+s[3])/2-i[1]):(m=i[2]-i[0],g=i[3]-i[1]),t.rotate((Math.atan2(-g,-m)+e)%e),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}wd.prototype.className="Arrow";li(wd);B.addGetterSetter(wd,"pointerLength",10,Mt());B.addGetterSetter(wd,"pointerWidth",10,Mt());B.addGetterSetter(wd,"pointerAtBeginning",!1);B.addGetterSetter(wd,"pointerAtEnding",!0);let Cp=class extends It{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Cp.prototype._centroid=!0;Cp.prototype.className="Circle";Cp.prototype._attrsAffectingSize=["radius"];li(Cp);B.addGetterSetter(Cp,"radius",0,Mt());class Bh extends It{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Bh.prototype.className="Ellipse";Bh.prototype._centroid=!0;Bh.prototype._attrsAffectingSize=["radiusX","radiusY"];li(Bh);B.addComponentsGetterSetter(Bh,"radius",["x","y"]);B.addGetterSetter(Bh,"radiusX",0,Mt());B.addGetterSetter(Bh,"radiusY",0,Mt());let tl=class iw extends It{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),o=this.attrs.image;let c;if(o){const f=this.attrs.cropWidth,m=this.attrs.cropHeight;f&&m?c=[o,this.cropX(),this.cropY(),f,m,0,0,e,i]:c=[o,0,0,e,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),o&&(s&&t.clip(),t.drawImage.apply(t,c))}_hitFunc(t){const e=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return(i=(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:0}getHeight(){var t,e,i;return(i=(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}static fromURL(t,e,i=null){const s=et.createImageElement();s.onload=function(){const o=new iw({image:s});e(o)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}};tl.prototype.className="Image";tl.prototype._attrsAffectingSize=["image"];li(tl);B.addGetterSetter(tl,"cornerRadius",0,Pv(4));B.addGetterSetter(tl,"image");B.addComponentsGetterSetter(tl,"crop",["x","y","width","height"]);B.addGetterSetter(tl,"cropX",0,Mt());B.addGetterSetter(tl,"cropY",0,Mt());B.addGetterSetter(tl,"cropWidth",0,Mt());B.addGetterSetter(tl,"cropHeight",0,Mt());const sw=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],FN="Change.konva",jN="none",cT="up",hT="right",fT="down",dT="left",KN=sw.length;class hS extends ep{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i;const s=function(){e._sync()};for(i=0;i<KN;i++)t.on(sw[i]+FN,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,s,o,c,f,m,g;if(t&&e){switch(i=t.width(),s=t.height(),o=e.pointerDirection(),c=e.pointerWidth(),g=e.pointerHeight(),f=0,m=0,o){case cT:f=i/2,m=-1*g;break;case hT:f=i+c,m=s/2;break;case fT:f=i/2,m=s+g;break;case dT:f=-1*c,m=s/2;break}e.setAttrs({x:-1*f,y:-1*m,width:i,height:s}),t.setAttrs({x:-1*f,y:-1*m})}}}hS.prototype.className="Label";li(hS);class Rd extends It{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),o=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let m=0,g=0,E=0,b=0;typeof f=="number"?m=g=E=b=Math.min(f,e/2,i/2):(m=Math.min(f[0]||0,e/2,i/2),g=Math.min(f[1]||0,e/2,i/2),b=Math.min(f[2]||0,e/2,i/2),E=Math.min(f[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(m,0),s===cT&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+o)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),s===hT&&(t.lineTo(e,(i-c)/2),t.lineTo(e+o,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i-b),t.arc(e-b,i-b,b,0,Math.PI/2,!1),s===fT&&(t.lineTo((e+o)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-o)/2,i)),t.lineTo(E,i),t.arc(E,i-E,E,Math.PI/2,Math.PI,!1),s===dT&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-c)/2)),t.lineTo(0,m),t.arc(m,m,m,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),o=this.pointerDirection(),c=this.width(),f=this.height();return o===cT?(e-=s,f+=s):o===fT?f+=s:o===dT?(t-=i*1.5,c+=i):o===hT&&(c+=i*1.5),{x:t,y:e,width:c,height:f}}}Rd.prototype.className="Tag";li(Rd);B.addGetterSetter(Rd,"pointerDirection",jN);B.addGetterSetter(Rd,"pointerWidth",0,Mt());B.addGetterSetter(Rd,"pointerHeight",0,Mt());B.addGetterSetter(Rd,"cornerRadius",0,Pv(4));let b_=class extends It{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?et.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}};b_.prototype.className="Rect";li(b_);B.addGetterSetter(b_,"cornerRadius",0,Pv(4));class Gh extends It{_sceneFunc(t){const e=this._getPoints(),i=this.radius(),s=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)et.drawRoundedPolygonPath(t,e,s,i,o);else{t.moveTo(e[0].x,e[0].y);for(let c=1;c<e.length;c++)t.lineTo(e[c].x,e[c].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(s*2*Math.PI/t),y:-1*e*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].x,s=t[0].y,o=t[0].y;return t.forEach(c=>{e=Math.min(e,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),o=Math.max(o,c.y)}),{x:e,y:s,width:i-e,height:o-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Gh.prototype.className="RegularPolygon";Gh.prototype._centroid=!0;Gh.prototype._attrsAffectingSize=["radius"];li(Gh);B.addGetterSetter(Gh,"radius",0,Mt());B.addGetterSetter(Gh,"sides",0,Mt());B.addGetterSetter(Gh,"cornerRadius",0,Pv(4));const xA=Math.PI*2;class Cd extends It{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,xA,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),xA,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Cd.prototype.className="Ring";Cd.prototype._centroid=!0;Cd.prototype._attrsAffectingSize=["innerRadius","outerRadius"];li(Cd);B.addGetterSetter(Cd,"innerRadius",0,Mt());B.addGetterSetter(Cd,"outerRadius",0,Mt());class nu extends It{constructor(t){super(t),this._updated=!0,this.anim=new po(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+0],m=o[s+1],g=o[s+2],E=o[s+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,E),t.closePath(),t.fillStrokeShape(this)),b)if(c){const A=c[e],N=i*2;t.drawImage(b,f,m,g,E,A[N+0],A[N+1],g,E)}else t.drawImage(b,f,m,g,E,0,0,g,E)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+2],m=o[s+3];if(t.beginPath(),c){const g=c[e],E=i*2;t.rect(g[E+0],g[E+1],f,m)}else t.rect(0,0,f,m);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],o=s.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}nu.prototype.className="Sprite";li(nu);B.addGetterSetter(nu,"animation");B.addGetterSetter(nu,"animations");B.addGetterSetter(nu,"frameOffsets");B.addGetterSetter(nu,"image");B.addGetterSetter(nu,"frameIndex",0,Mt());B.addGetterSetter(nu,"frameRate",17,Mt());B.backCompat(nu,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Hh extends It{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let o=1;o<s*2;o++){const c=o%2===0?i:e,f=c*Math.sin(o*Math.PI/s),m=-1*c*Math.cos(o*Math.PI/s);t.lineTo(f,m)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Hh.prototype.className="Star";Hh.prototype._centroid=!0;Hh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];li(Hh);B.addGetterSetter(Hh,"numPoints",5,Mt());B.addGetterSetter(Hh,"innerRadius",0,Mt());B.addGetterSetter(Hh,"outerRadius",0,Mt());function yh(n){return[...n].reduce((t,e,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const o=s[i+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(e+o),s[i+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const Dm="auto",YN="center",aw="inherit",o0="justify",QN="Change.konva",XN="2d",OA="-",rw="left",JN="text",WN="Text",ZN="top",$N="bottom",MA="middle",ow="normal",tD="px ",E1=" ",eD="right",PA="rtl",nD="word",iD="char",VA="none",yE="",lw=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],sD=lw.length;function aD(n){return n.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}let T1;function vE(){return T1||(T1=et.createCanvasElement().getContext(XN),T1)}function rD(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function oD(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function lD(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let Nn=class extends It{constructor(t){super(lD(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<sD;e++)this.on(lw[e]+QN,this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;const s=this.textArr,o=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),m=this.lineHeight()*f,g=this.verticalAlign(),E=this.direction(),b=0,A=this.align(),N=this.getWidth(),D=this.letterSpacing(),L=this.charRenderFunc(),U=this.fill(),G=this.textDecoration(),j=this.underlineOffset(),X=G.indexOf("underline")!==-1,Z=G.indexOf("line-through")!==-1,gt;E=E===aw?t.direction:E;let lt=m/2,V=MA;if(!kt.legacyTextRendering){const M=this.measureSize("M");V="alphabetic";const k=(e=M.fontBoundingBoxAscent)!==null&&e!==void 0?e:M.actualBoundingBoxAscent,q=(i=M.fontBoundingBoxDescent)!==null&&i!==void 0?i:M.actualBoundingBoxDescent;lt=(k-q)/2+m/2}for(E===PA&&t.setAttr("direction",E),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",V),t.setAttr("textAlign",rw),g===MA?b=(this.getHeight()-o*m-c*2)/2:g===$N&&(b=this.getHeight()-o*m-c*2),t.translate(c,b+c),gt=0;gt<o;gt++){let M=0,k=0;const q=s[gt],H=q.text,K=q.width,z=q.lastInParagraph;if(t.save(),A===eD?M+=N-K-c*2:A===YN&&(M+=(N-K-c*2)/2),X){t.save(),t.beginPath();const Ut=j??(kt.legacyTextRendering?Math.round(f/2):Math.round(f/4)),W=M,St=lt+k+Ut;t.moveTo(W,St);const Et=A===o0&&!z?N-c*2:K;t.lineTo(W+Math.round(Et),St),t.lineWidth=f/15;const zt=this._getLinearGradient();t.strokeStyle=zt||U,t.stroke(),t.restore()}const Ft=M;if(E!==PA&&(D!==0||A===o0||L)){const Ut=H.split(" ").length-1,W=yh(H);for(let St=0;St<W.length;St++){const Et=W[St];if(Et===" "&&!z&&A===o0&&(M+=(N-c*2-K)/Ut),this._partialTextX=M,this._partialTextY=lt+k,this._partialText=Et,L){t.save();const Qt=s.slice(0,gt).reduce((ft,At)=>ft+yh(At.text).length,0),F=St+Qt;L({char:Et,index:F,x:M,y:lt+k,lineIndex:gt,column:St,isLastInLine:z,width:this.measureSize(Et).width,context:t})}t.fillStrokeShape(this),L&&t.restore(),M+=this.measureSize(Et).width+D}}else D!==0&&t.setAttr("letterSpacing",`${D}px`),this._partialTextX=M,this._partialTextY=lt+k,this._partialText=H,t.fillStrokeShape(this);if(Z){t.save(),t.beginPath();const Ut=kt.legacyTextRendering?0:-Math.round(f/4),W=Ft;t.moveTo(W,lt+k+Ut);const St=A===o0&&!z?N-c*2:K;t.lineTo(W+Math.round(St),lt+k+Ut),t.lineWidth=f/15;const Et=this._getLinearGradient();t.strokeStyle=Et||U,t.stroke(),t.restore()}t.restore(),o>1&&(lt+=m)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=et._isString(t)?t:t==null?"":t+"";return this._setAttr(JN,e),this}getWidth(){return this.attrs.width===Dm||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Dm||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,o,c,f,m,g,E,b,A;let N=vE(),D=this.fontSize(),L;N.save(),N.font=this._getContextFont(),L=N.measureText(t),N.restore();const U=D/100;return{actualBoundingBoxAscent:(e=L.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*U,actualBoundingBoxDescent:(i=L.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=L.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*U,actualBoundingBoxRight:(o=L.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*U,alphabeticBaseline:(c=L.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=L.emHeightAscent)!==null&&f!==void 0?f:100*U,emHeightDescent:(m=L.emHeightDescent)!==null&&m!==void 0?m:-20*U,fontBoundingBoxAscent:(g=L.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*U,fontBoundingBoxDescent:(E=L.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*U,hangingBaseline:(b=L.hangingBaseline)!==null&&b!==void 0?b:72.80000305175781*U,ideographicBaseline:(A=L.ideographicBaseline)!==null&&A!==void 0?A:-21*U,width:L.width,height:D}}_getContextFont(){return this.fontStyle()+E1+this.fontVariant()+E1+(this.fontSize()+tD)+aD(this.fontFamily())}_addTextLine(t){this.align()===o0&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return vE().measureText(t).width+e*i}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),i=0,s=this.lineHeight()*e,o=this.attrs.width,c=this.attrs.height,f=o!==Dm&&o!==void 0,m=c!==Dm&&c!==void 0,g=this.padding(),E=o-g*2,b=c-g*2,A=0,N=this.wrap(),D=N!==VA,L=N!==iD&&D,U=this.ellipsis();this.textArr=[],vE().font=this._getContextFont();const G=U?this._getTextWidth(yE):0;for(let j=0,X=t.length;j<X;++j){let Z=t[j],gt=this._getTextWidth(Z);if(f&&gt>E)for(;Z.length>0;){let lt=0,V=yh(Z).length,M="",k=0;for(;lt<V;){const q=lt+V>>>1,H=yh(Z),K=H.slice(0,q+1).join(""),z=this._getTextWidth(K);(U&&m&&A+s>b?z+G:z)<=E?(lt=q+1,M=K,k=z):V=q}if(M){if(L){const K=yh(Z),z=yh(M),Ft=K[z.length],Ut=Ft===E1||Ft===OA;let W;if(Ut&&k<=E)W=z.length;else{const St=z.lastIndexOf(E1),Et=z.lastIndexOf(OA);W=Math.max(St,Et)+1}W>0&&(lt=W,M=K.slice(0,lt).join(""),k=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,k),A+=s,this._shouldHandleEllipsis(A)){this._tryToAddEllipsisToLastLine();break}if(Z=yh(Z).slice(lt).join("").trimLeft(),Z.length>0&&(gt=this._getTextWidth(Z),gt<=E)){this._addTextLine(Z),A+=s,i=Math.max(i,gt);break}}else break}else this._addTextLine(Z),A+=s,i=Math.max(i,gt),this._shouldHandleEllipsis(A)&&j<X-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),m&&A+s>b)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,o=s!==Dm&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==VA)||o&&t+i>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==Dm&&t!==void 0,i=this.padding(),s=t-i*2,o=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!o||(e&&(this._getTextWidth(c.text+yE)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+yE))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};Nn.prototype._fillFunc=rD;Nn.prototype._strokeFunc=oD;Nn.prototype.className=WN;Nn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];li(Nn);B.overWriteSetter(Nn,"width",lS());B.overWriteSetter(Nn,"height",lS());B.addGetterSetter(Nn,"direction",aw);B.addGetterSetter(Nn,"fontFamily","Arial");B.addGetterSetter(Nn,"fontSize",12,Mt());B.addGetterSetter(Nn,"fontStyle",ow);B.addGetterSetter(Nn,"fontVariant",ow);B.addGetterSetter(Nn,"padding",0,Mt());B.addGetterSetter(Nn,"align",rw);B.addGetterSetter(Nn,"verticalAlign",ZN);B.addGetterSetter(Nn,"lineHeight",1,Mt());B.addGetterSetter(Nn,"wrap",nD);B.addGetterSetter(Nn,"ellipsis",!1,$o());B.addGetterSetter(Nn,"letterSpacing",0,Mt());B.addGetterSetter(Nn,"text","",bd());B.addGetterSetter(Nn,"textDecoration","");B.addGetterSetter(Nn,"underlineOffset",void 0,Mt());B.addGetterSetter(Nn,"charRenderFunc",void 0);const uD="",uw="normal";function cw(n){n.fillText(this.partialText,0,0)}function hw(n){n.strokeText(this.partialText,0,0)}class $i extends It{constructor(t){super(t),this.dummyCanvas=et.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Rn.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t>e?null:Rn.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Rn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),o=this.glyphInfo,c=e.indexOf("underline")!==-1,f=e.indexOf("line-through")!==-1;c&&t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),this.partialText=o[m].text,t.fillStrokeShape(this),c&&(m===0&&t.moveTo(0,s/2+1),t.lineTo(o[m].width,s/2+1)),t.restore()}if(c&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),f){t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),m===0&&t.moveTo(0,0),t.lineTo(o[m].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Nn.prototype.setText.call(this,t)}_getContextFont(){return Nn.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=yh(this.text()),e=[];let i=0;for(let b=0;b<t.length;b++)e.push({char:t[b],width:this._getTextSize(t[b]).width}),i+=e[b].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-m/2)),c==="right"&&(g=Math.max(0,this.pathLength-m));let E=g;for(let b=0;b<e.length;b++){const A=this._getPointAtLength(E);if(!A)return;const N=e[b].char;let D=e[b].width+o;if(N===" "&&c==="justify"){const Z=this.text().split(" ").length-1;D+=(this.pathLength-m)/Z}const L=this._getPointAtLength(E+D);if(!L)return;const U=Rn.getLineLength(A.x,A.y,L.x,L.y);let G=0;if(f)try{G=f(e[b-1].char,N)*this.fontSize()}catch{G=0}A.x+=G,L.x+=G,this.textWidth+=G;const j=Rn.getPointOnLine(G+U/2,A.x,A.y,L.x,L.y),X=Math.atan2(L.y-A.y,L.x-A.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:t[b],rotation:X,p0:A,p1:L,width:U}),E+=D}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,i=t[0]||0,s=t[1]||0,o=t[1]||0,c,f;for(let g=0;g<t.length/2;g++)c=t[g*2],f=t[g*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);const m=this.fontSize();return{x:e-m/2,y:s-m/2,width:i-e+m,height:o-s+m}}destroy(){return et.releaseCanvas(this.dummyCanvas),super.destroy()}}$i.prototype._fillFunc=cw;$i.prototype._strokeFunc=hw;$i.prototype._fillFuncHit=cw;$i.prototype._strokeFuncHit=hw;$i.prototype.className="TextPath";$i.prototype._attrsAffectingSize=["text","fontSize","data"];li($i);B.addGetterSetter($i,"data");B.addGetterSetter($i,"fontFamily","Arial");B.addGetterSetter($i,"fontSize",12,Mt());B.addGetterSetter($i,"fontStyle",uw);B.addGetterSetter($i,"align","left");B.addGetterSetter($i,"letterSpacing",0,Mt());B.addGetterSetter($i,"textBaseline","middle");B.addGetterSetter($i,"fontVariant",uw);B.addGetterSetter($i,"text",uD);B.addGetterSetter($i,"textDecoration","");B.addGetterSetter($i,"kerningFunc",void 0);const fw="tr-konva",cD=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${fw}`).join(" "),kA="nodesRect",hD=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],fD={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},dD="ontouchstart"in kt._global;function mD(n,t,e){if(n==="rotater")return e;t+=et.degToRad(fD[n]||0);const i=(et.radToDeg(t)%360+360)%360;return et._inRange(i,315+22.5,360)||et._inRange(i,0,22.5)?"ns-resize":et._inRange(i,45-22.5,45+22.5)?"nesw-resize":et._inRange(i,90-22.5,90+22.5)?"ew-resize":et._inRange(i,135-22.5,135+22.5)?"nwse-resize":et._inRange(i,180-22.5,180+22.5)?"ns-resize":et._inRange(i,225-22.5,225+22.5)?"nesw-resize":et._inRange(i,270-22.5,270+22.5)?"ew-resize":et._inRange(i,315-22.5,315+22.5)?"nwse-resize":(et.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const W1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function pD(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function dw(n,t,e){const i=e.x+(n.x-e.x)*Math.cos(t)-(n.y-e.y)*Math.sin(t),s=e.y+(n.x-e.x)*Math.sin(t)+(n.y-e.y)*Math.cos(t);return{...n,rotation:n.rotation+t,x:i,y:s}}function gD(n,t){const e=pD(n);return dw(n,t,e)}function _D(n,t,e){let i=t;for(let s=0;s<n.length;s++){const o=kt.getAngle(n[s]),c=Math.abs(o-t)%(Math.PI*2);Math.min(c,Math.PI*2-c)<e&&(i=o)}return i}let mT=0;class Be extends ep{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(cD,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return et.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return fw+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(s=>s.isAncestorOf(this)?(et.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,o)}s.on(hD.map(c=>c+`.${this._getEventNamespace()}`).join(" "),o),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;const s=t.getAbsolutePosition(),o=s.x-e.x,c=s.y-e.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const m=f.getAbsolutePosition();f.setAbsolutePosition({x:m.x+o,y:m.y+c}),f.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(kA),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(kA,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(i),c=t.getAbsolutePosition(i),f=s.x*o.x-t.offsetX()*o.x,m=s.y*o.y-t.offsetY()*o.y,g=(kt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),E={x:c.x+f*Math.cos(g)+m*Math.sin(-g),y:c.y+m*Math.cos(g)+f*Math.sin(g),width:s.width*o.x,height:s.height*o.y,rotation:g};return dw(E,-kt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const E=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=[{x:E.x,y:E.y},{x:E.x+E.width,y:E.y},{x:E.x+E.width,y:E.y+E.height},{x:E.x,y:E.y+E.height}],A=g.getAbsoluteTransform();b.forEach(function(N){const D=A.point(N);e.push(D)})});const i=new Ar;i.rotate(-kt.getAngle(this.rotation()));let s=1/0,o=1/0,c=-1/0,f=-1/0;e.forEach(function(g){const E=i.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),i.invert();const m=i.point({x:s,y:o});return{x:m.x,y:m.y,width:c-s,height:f-o,rotation:kt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),W1.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new b_({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:dD?10:"auto"}),i=this;e.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),e.on("dragstart",s=>{e.stopDrag(),s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),e.on("mouseenter",()=>{const s=kt.getAngle(this.rotation()),o=this.rotateAnchorCursor(),c=mD(t,s,o);e.getStage().content&&(e.getStage().content.style.cursor=c),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new It({name:"back",width:0,height:0,sceneFunc(e,i){const s=i.getParent(),o=s.padding(),c=i.width(),f=i.height();if(e.beginPath(),e.rect(-o,-o,c+o*2,f+o*2),s.rotateEnabled()&&s.rotateLineVisible()){const m=s.rotateAnchorAngle(),g=s.rotateAnchorOffset(),E=et.degToRad(m),b=Math.sin(E),A=-Math.cos(E),N=c/2,D=f/2;let L=1/0;A<0?L=Math.min(L,-D/A):A>0&&(L=Math.min(L,(f-D)/A)),b<0?L=Math.min(L,-N/b):b>0&&(L=Math.min(L,(c-N)/b));const U=N+b*L,G=D+A*L,j=et._sign(f),X=U+b*g*j,Z=G+A*g*j;e.moveTo(U,G),e.lineTo(X,Z)}e.fillStrokeShape(i)},hitFunc:(e,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();e.beginPath(),e.rect(-s,-s,i.width()+s*2,i.height()+s*2),e.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/o),this.cos=Math.abs(i/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},mT++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(m=>{m._fire("transformstart",{evt:t.evt,target:m})})}_handleMouseMove(t){let e,i,s;const o=this.findOne("."+this._movingAnchorName),c=o.getStage();c.setPointersPositions(t);const f=c.getPointerPosition();let m={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(m=this.anchorDragBoundFunc()(g,m,t)),o.setAbsolutePosition(m);const E=o.getAbsolutePosition();if(g.x===E.x&&g.y===E.y)return;if(this._movingAnchorName==="rotater"){const j=this._getNodeRect();e=o.x()-j.width/2,i=-o.y()+j.height/2;const X=kt.getAngle(this.rotateAnchorAngle());let Z=Math.atan2(-i,e)+Math.PI/2-X;j.height<0&&(Z-=Math.PI);const lt=kt.getAngle(this.rotation())+Z,V=kt.getAngle(this.rotationSnapTolerance()),k=_D(this.rotationSnaps(),lt,V)-j.rotation,q=gD(j,k);this._fitNodesInto(q,t);return}const b=this.shiftBehavior();let A;b==="inverted"?A=this.keepRatio()&&!t.shiftKey:b==="none"?A=this.keepRatio():A=this.keepRatio()||t.shiftKey;let N=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(j.x-o.x(),2)+Math.pow(j.y-o.y(),2));const X=this.findOne(".top-left").x()>j.x?-1:1,Z=this.findOne(".top-left").y()>j.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".top-left").x(j.x-e),this.findOne(".top-left").y(j.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(o.x()-j.x,2)+Math.pow(j.y-o.y(),2));const X=this.findOne(".top-right").x()<j.x?-1:1,Z=this.findOne(".top-right").y()>j.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".top-right").x(j.x+e),this.findOne(".top-right").y(j.y-i)}var D=o.position();this.findOne(".top-left").y(D.y),this.findOne(".bottom-right").x(D.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(j.x-o.x(),2)+Math.pow(o.y()-j.y,2));const X=j.x<o.x()?-1:1,Z=o.y()<j.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,o.x(j.x-e),o.y(j.y+i)}D=o.position(),this.findOne(".top-left").x(D.x),this.findOne(".bottom-right").y(D.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(o.x()-j.x,2)+Math.pow(o.y()-j.y,2));const X=this.findOne(".bottom-right").x()<j.x?-1:1,Z=this.findOne(".bottom-right").y()<j.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".bottom-right").x(j.x+e),this.findOne(".bottom-right").y(j.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(N=this.centeredScaling()||t.altKey,N){const j=this.findOne(".top-left"),X=this.findOne(".bottom-right"),Z=j.x(),gt=j.y(),lt=this.getWidth()-X.x(),V=this.getHeight()-X.y();X.move({x:-Z,y:-gt}),j.move({x:lt,y:V})}const L=this.findOne(".top-left").getAbsolutePosition();e=L.x,i=L.y;const U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),G=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:U,height:G,rotation:kt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();mT--,this._fire("transformend",{evt:t,target:i}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),i&&this._nodes.forEach(s=>{var o;s._fire("transformend",{evt:t,target:s}),(o=s.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),s=1;if(et._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(et._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const o=new Ar;if(o.rotate(kt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const A=o.point({x:-this.padding()*2,y:0});t.x+=A.x,t.y+=A.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const A=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const A=o.point({x:0,y:-this.padding()*2});t.x+=A.x,t.y+=A.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const A=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const A=this.boundBoxFunc()(i,t);A?t=A:et.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new Ar;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const m=new Ar,g=t.width/c,E=t.height/c;this.flipEnabled()===!1?(m.translate(t.x,t.y),m.rotate(t.rotation),m.translate(t.width<0?t.width:0,t.height<0?t.height:0),m.scale(Math.abs(g),Math.abs(E))):(m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(g,E));const b=m.multiply(f.invert());this._nodes.forEach(A=>{var N;if(!A.getStage())return;const D=A.getParent().getAbsoluteTransform(),L=A.getTransform().copy();L.translate(A.offsetX(),A.offsetY());const U=new Ar;U.multiply(D.copy().invert()).multiply(b).multiply(D).multiply(L);const G=U.decompose();A.setAttrs(G),(N=A.getLayer())===null||N===void 0||N.batchDraw()}),this.rotation(et._getRotation(t.rotation)),this._nodes.forEach(A=>{this._fire("transform",{evt:e,target:A}),A._fire("transform",{evt:e,target:A})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(et._getRotation(e.rotation));const i=e.width,s=e.height,o=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),m=this.anchorSize(),g=this.find("._anchor");g.forEach(lt=>{lt.setAttrs({width:m,height:m,offsetX:m/2,offsetY:m/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:m/2+f,offsetY:m/2+f,visible:c&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:m/2+f,visible:c&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:m/2-f,offsetY:m/2+f,visible:c&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:m/2+f,visible:c&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:m/2-f,visible:c&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:m/2+f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:m/2-f,visible:c&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:m/2-f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-right")>=0});const E=this.rotateAnchorAngle(),b=this.rotateAnchorOffset(),A=et.degToRad(E),N=Math.sin(A),D=-Math.cos(A),L=i/2,U=s/2;let G=1/0;D<0?G=Math.min(G,-U/D):D>0&&(G=Math.min(G,(s-U)/D)),N<0?G=Math.min(G,-L/N):N>0&&(G=Math.min(G,(i-L)/N));const j=L+N*G,X=U+D*G,Z=et._sign(s);this._batchChangeChild(".rotater",{x:j+N*b*Z,y:X+D*b*Z-f*D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(lt=>lt.draggable()),x:0,y:0});const gt=this.anchorStyleFunc();gt&&g.forEach(lt=>{gt(lt)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ep.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return xt.prototype.toObject.call(this)}clone(t){return xt.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Be.isTransforming=()=>mT>0;function yD(n){return n instanceof Array||et.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(t){W1.indexOf(t)===-1&&et.warn("Unknown anchor name: "+t+". Available names are: "+W1.join(", "))}),n||[]}Be.prototype.className="Transformer";li(Be);B.addGetterSetter(Be,"enabledAnchors",W1,yD);B.addGetterSetter(Be,"flipEnabled",!0,$o());B.addGetterSetter(Be,"resizeEnabled",!0);B.addGetterSetter(Be,"anchorSize",10,Mt());B.addGetterSetter(Be,"rotateEnabled",!0);B.addGetterSetter(Be,"rotateLineVisible",!0);B.addGetterSetter(Be,"rotationSnaps",[]);B.addGetterSetter(Be,"rotateAnchorOffset",50,Mt());B.addGetterSetter(Be,"rotateAnchorAngle",0,Mt());B.addGetterSetter(Be,"rotateAnchorCursor","crosshair");B.addGetterSetter(Be,"rotationSnapTolerance",5,Mt());B.addGetterSetter(Be,"borderEnabled",!0);B.addGetterSetter(Be,"anchorStroke","rgb(0, 161, 255)");B.addGetterSetter(Be,"anchorStrokeWidth",1,Mt());B.addGetterSetter(Be,"anchorFill","white");B.addGetterSetter(Be,"anchorCornerRadius",0,Mt());B.addGetterSetter(Be,"borderStroke","rgb(0, 161, 255)");B.addGetterSetter(Be,"borderStrokeWidth",1,Mt());B.addGetterSetter(Be,"borderDash");B.addGetterSetter(Be,"keepRatio",!0);B.addGetterSetter(Be,"shiftBehavior","default");B.addGetterSetter(Be,"centeredScaling",!1);B.addGetterSetter(Be,"ignoreStroke",!1);B.addGetterSetter(Be,"padding",0,Mt());B.addGetterSetter(Be,"nodes");B.addGetterSetter(Be,"node");B.addGetterSetter(Be,"boundBoxFunc");B.addGetterSetter(Be,"anchorDragBoundFunc");B.addGetterSetter(Be,"anchorStyleFunc");B.addGetterSetter(Be,"shouldOverdrawWholeArea",!1);B.addGetterSetter(Be,"useSingleNodeRotation",!0);B.backCompat(Be,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class sc extends It{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,kt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}sc.prototype.className="Wedge";sc.prototype._centroid=!0;sc.prototype._attrsAffectingSize=["radius"];li(sc);B.addGetterSetter(sc,"radius",0,Mt());B.addGetterSetter(sc,"angle",0,Mt());B.addGetterSetter(sc,"clockwise",!1);B.backCompat(sc,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function LA(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const vD=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ED=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function TD(n,t){const e=n.data,i=n.width,s=n.height;let o,c,f,m,g,E,b,A,N,D,L,U,G,j,X,Z,gt,lt,V,M;const k=t+t+1,q=i-1,H=s-1,K=t+1,z=K*(K+1)/2,Ft=new LA,Ut=vD[t],W=ED[t];let St=null,Et=Ft,zt=null,Qt=null;for(let F=1;F<k;F++)Et=Et.next=new LA,F===K&&(St=Et);Et.next=Ft,f=c=0;for(let F=0;F<s;F++){U=G=j=X=m=g=E=b=0,A=K*(Z=e[c]),N=K*(gt=e[c+1]),D=K*(lt=e[c+2]),L=K*(V=e[c+3]),m+=z*Z,g+=z*gt,E+=z*lt,b+=z*V,Et=Ft;for(let ft=0;ft<K;ft++)Et.r=Z,Et.g=gt,Et.b=lt,Et.a=V,Et=Et.next;for(let ft=1;ft<K;ft++)o=c+((q<ft?q:ft)<<2),m+=(Et.r=Z=e[o])*(M=K-ft),g+=(Et.g=gt=e[o+1])*M,E+=(Et.b=lt=e[o+2])*M,b+=(Et.a=V=e[o+3])*M,U+=Z,G+=gt,j+=lt,X+=V,Et=Et.next;zt=Ft,Qt=St;for(let ft=0;ft<i;ft++)e[c+3]=V=b*Ut>>W,V!==0?(V=255/V,e[c]=(m*Ut>>W)*V,e[c+1]=(g*Ut>>W)*V,e[c+2]=(E*Ut>>W)*V):e[c]=e[c+1]=e[c+2]=0,m-=A,g-=N,E-=D,b-=L,A-=zt.r,N-=zt.g,D-=zt.b,L-=zt.a,o=f+((o=ft+t+1)<q?o:q)<<2,U+=zt.r=e[o],G+=zt.g=e[o+1],j+=zt.b=e[o+2],X+=zt.a=e[o+3],m+=U,g+=G,E+=j,b+=X,zt=zt.next,A+=Z=Qt.r,N+=gt=Qt.g,D+=lt=Qt.b,L+=V=Qt.a,U-=Z,G-=gt,j-=lt,X-=V,Qt=Qt.next,c+=4;f+=i}for(let F=0;F<i;F++){G=j=X=U=g=E=b=m=0,c=F<<2,A=K*(Z=e[c]),N=K*(gt=e[c+1]),D=K*(lt=e[c+2]),L=K*(V=e[c+3]),m+=z*Z,g+=z*gt,E+=z*lt,b+=z*V,Et=Ft;for(let At=0;At<K;At++)Et.r=Z,Et.g=gt,Et.b=lt,Et.a=V,Et=Et.next;let ft=i;for(let At=1;At<=t;At++)c=ft+F<<2,m+=(Et.r=Z=e[c])*(M=K-At),g+=(Et.g=gt=e[c+1])*M,E+=(Et.b=lt=e[c+2])*M,b+=(Et.a=V=e[c+3])*M,U+=Z,G+=gt,j+=lt,X+=V,Et=Et.next,At<H&&(ft+=i);c=F,zt=Ft,Qt=St;for(let At=0;At<s;At++)o=c<<2,e[o+3]=V=b*Ut>>W,V>0?(V=255/V,e[o]=(m*Ut>>W)*V,e[o+1]=(g*Ut>>W)*V,e[o+2]=(E*Ut>>W)*V):e[o]=e[o+1]=e[o+2]=0,m-=A,g-=N,E-=D,b-=L,A-=zt.r,N-=zt.g,D-=zt.b,L-=zt.a,o=F+((o=At+K)<H?o:H)*i<<2,m+=U+=zt.r=e[o],g+=G+=zt.g=e[o+1],E+=j+=zt.b=e[o+2],b+=X+=zt.a=e[o+3],zt=zt.next,A+=Z=Qt.r,N+=gt=Qt.g,D+=lt=Qt.b,L+=V=Qt.a,U-=Z,G-=gt,j-=lt,X-=V,Qt=Qt.next,c+=i}}const SD=function(t){const e=Math.round(this.blurRadius());e>0&&TD(t,e)};B.addGetterSetter(xt,"blurRadius",0,Mt(),B.afterSetFilter);const bD=function(n){const t=this.brightness()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]+=t,e[s+1]+=t,e[s+2]+=t};B.addGetterSetter(xt,"brightness",0,Mt(),B.afterSetFilter);const AD=function(n){const t=this.brightness(),e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=Math.min(255,e[s]*t),e[s+1]=Math.min(255,e[s+1]*t),e[s+2]=Math.min(255,e[s+2]*t)},wD=function(n){const t=Math.pow((this.contrast()+100)/100,2),e=n.data,i=e.length;let s=150,o=150,c=150;for(let f=0;f<i;f+=4)s=e[f],o=e[f+1],c=e[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,c/=255,c-=.5,c*=t,c+=.5,c*=255,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,c=c<0?0:c>255?255:c,e[f]=s,e[f+1]=o,e[f+2]=c};B.addGetterSetter(xt,"contrast",0,Mt(),B.afterSetFilter);const RD=function(n){var t,e,i,s,o,c,f,m,g;const E=n.data,b=n.width,A=n.height,N=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),D=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),U=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,G=!!((g=(m=this.embossBlend)===null||m===void 0?void 0:m.call(this))!==null&&g!==void 0&&g),j=N*10,X=D*255,Z=U*Math.PI/180,gt=Math.cos(Z),lt=Math.sin(Z),V=128/1020*j,M=new Uint8ClampedArray(E),k=new Float32Array(b*A);for(let Ft=0,Ut=0;Ut<E.length;Ut+=4,Ft++)k[Ft]=.2126*M[Ut]+.7152*M[Ut+1]+.0722*M[Ut+2];const q=[-1,0,1,-2,0,2,-1,0,1],H=[-1,-2,-1,0,0,0,1,2,1],K=[-b-1,-b,-b+1,-1,0,1,b-1,b,b+1],z=Ft=>Ft<0?0:Ft>255?255:Ft;for(let Ft=1;Ft<A-1;Ft++)for(let Ut=1;Ut<b-1;Ut++){const W=Ft*b+Ut;let St=0,Et=0;St+=k[W+K[0]]*q[0],Et+=k[W+K[0]]*H[0],St+=k[W+K[1]]*q[1],Et+=k[W+K[1]]*H[1],St+=k[W+K[2]]*q[2],Et+=k[W+K[2]]*H[2],St+=k[W+K[3]]*q[3],Et+=k[W+K[3]]*H[3],St+=k[W+K[5]]*q[5],Et+=k[W+K[5]]*H[5],St+=k[W+K[6]]*q[6],Et+=k[W+K[6]]*H[6],St+=k[W+K[7]]*q[7],Et+=k[W+K[7]]*H[7],St+=k[W+K[8]]*q[8],Et+=k[W+K[8]]*H[8];const zt=gt*St+lt*Et,Qt=z(X+zt*V),F=W*4;if(G){const ft=Qt-X;E[F]=z(M[F]+ft),E[F+1]=z(M[F+1]+ft),E[F+2]=z(M[F+2]+ft),E[F+3]=M[F+3]}else E[F]=E[F+1]=E[F+2]=Qt,E[F+3]=M[F+3]}for(let Ft=0;Ft<b;Ft++){let Ut=Ft*4,W=((A-1)*b+Ft)*4;E[Ut]=M[Ut],E[Ut+1]=M[Ut+1],E[Ut+2]=M[Ut+2],E[Ut+3]=M[Ut+3],E[W]=M[W],E[W+1]=M[W+1],E[W+2]=M[W+2],E[W+3]=M[W+3]}for(let Ft=1;Ft<A-1;Ft++){let Ut=Ft*b*4,W=(Ft*b+(b-1))*4;E[Ut]=M[Ut],E[Ut+1]=M[Ut+1],E[Ut+2]=M[Ut+2],E[Ut+3]=M[Ut+3],E[W]=M[W],E[W+1]=M[W+1],E[W+2]=M[W+2],E[W+3]=M[W+3]}return n};B.addGetterSetter(xt,"embossStrength",.5,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"embossWhiteLevel",.5,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"embossDirection","top-left",void 0,B.afterSetFilter);B.addGetterSetter(xt,"embossBlend",!1,void 0,B.afterSetFilter);function EE(n,t,e,i,s){const o=e-t,c=s-i;if(o===0)return i+c/2;if(c===0)return i;let f=(n-t)/o;return f=c*f+i,f}const CD=function(n){const t=n.data,e=t.length;let i=t[0],s=i,o,c=t[1],f=c,m,g=t[2],E=g,b;const A=this.enhance();if(A===0)return;for(let X=0;X<e;X+=4)o=t[X+0],o<i?i=o:o>s&&(s=o),m=t[X+1],m<c?c=m:m>f&&(f=m),b=t[X+2],b<g?g=b:b>E&&(E=b);s===i&&(s=255,i=0),f===c&&(f=255,c=0),E===g&&(E=255,g=0);let N,D,L,U,G,j;if(A>0)N=s+A*(255-s),D=i-A*(i-0),L=f+A*(255-f),U=c-A*(c-0),G=E+A*(255-E),j=g-A*(g-0);else{const X=(s+i)*.5;N=s+A*(s-X),D=i+A*(i-X);const Z=(f+c)*.5;L=f+A*(f-Z),U=c+A*(c-Z);const gt=(E+g)*.5;G=E+A*(E-gt),j=g+A*(g-gt)}for(let X=0;X<e;X+=4)t[X+0]=EE(t[X+0],i,s,D,N),t[X+1]=EE(t[X+1],c,f,U,L),t[X+2]=EE(t[X+2],g,E,j,G)};B.addGetterSetter(xt,"enhance",0,Mt(),B.afterSetFilter);const ID=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};B.addGetterSetter(xt,"hue",0,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"saturation",0,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"luminance",0,Mt(),B.afterSetFilter);const ND=function(n){const t=n.data,e=t.length,i=1,s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(o*Math.PI/180),m=i*s*Math.sin(o*Math.PI/180),g=.299*i+.701*f+.167*m,E=.587*i-.587*f+.33*m,b=.114*i-.114*f-.497*m,A=.299*i-.299*f-.328*m,N=.587*i+.413*f+.035*m,D=.114*i-.114*f+.293*m,L=.299*i-.3*f+1.25*m,U=.587*i-.586*f-1.05*m,G=.114*i+.886*f-.2*m;let j,X,Z,gt;for(let lt=0;lt<e;lt+=4)j=t[lt+0],X=t[lt+1],Z=t[lt+2],gt=t[lt+3],t[lt+0]=g*j+E*X+b*Z+c,t[lt+1]=A*j+N*X+D*Z+c,t[lt+2]=L*j+U*X+G*Z+c,t[lt+3]=gt},DD=function(n){const t=n.data,e=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(o*Math.PI/180),f=i*s*Math.sin(o*Math.PI/180),m=.299*i+.701*c+.167*f,g=.587*i-.587*c+.33*f,E=.114*i-.114*c-.497*f,b=.299*i-.299*c-.328*f,A=.587*i+.413*c+.035*f,N=.114*i-.114*c+.293*f,D=.299*i-.3*c+1.25*f,L=.587*i-.586*c-1.05*f,U=.114*i+.886*c-.2*f;for(let G=0;G<e;G+=4){const j=t[G+0],X=t[G+1],Z=t[G+2],gt=t[G+3];t[G+0]=m*j+g*X+E*Z,t[G+1]=b*j+A*X+N*Z,t[G+2]=D*j+L*X+U*Z,t[G+3]=gt}};B.addGetterSetter(xt,"hue",0,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"saturation",0,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"value",0,Mt(),B.afterSetFilter);const xD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},OD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,L=360/D*Math.PI/180;for(let U=0;U<D;U+=1){const G=Math.sin(U*L),j=Math.cos(U*L);for(let X=0;X<N;X+=1){E=Math.floor(f+g*X/N*j),b=Math.floor(m+g*X/N*G);let Z=(b*o+E)*4;const gt=i[Z+0],lt=i[Z+1],V=i[Z+2],M=i[Z+3];Z=(U+X*o)*4,s[Z+0]=gt,s[Z+1]=lt,s[Z+2]=V,s[Z+3]=M}}},MD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,L=0;let U,G;for(E=0;E<o;E+=1)for(b=0;b<c;b+=1){const j=E-f,X=b-m,Z=Math.sqrt(j*j+X*X)*N/g;let gt=(Math.atan2(X,j)*180/Math.PI+360+L)%360;gt=gt*D/360,U=Math.floor(gt),G=Math.floor(Z);let lt=(G*o+U)*4;const V=i[lt+0],M=i[lt+1],k=i[lt+2],q=i[lt+3];lt=(b*o+E)*4,s[lt+0]=V,s[lt+1]=M,s[lt+2]=k,s[lt+3]=q}},PD=function(n){const t=n.width,e=n.height;let i,s,o,c,f,m,g,E,b,A,N=Math.round(this.kaleidoscopePower());const D=Math.round(this.kaleidoscopeAngle()),L=Math.floor(t*(D%360)/360);if(N<1)return;const U=et.createCanvasElement();U.width=t,U.height=e;const G=U.getContext("2d").getImageData(0,0,t,e);et.releaseCanvas(U),OD(n,G,{polarCenterX:t/2,polarCenterY:e/2});let j=t/Math.pow(2,N);for(;j<=8;)j=j*2,N-=1;j=Math.ceil(j);let X=j,Z=0,gt=X,lt=1;for(L+j>t&&(Z=X,gt=0,lt=-1),s=0;s<e;s+=1)for(i=Z;i!==gt;i+=lt)o=Math.round(i+L)%t,b=(t*s+o)*4,f=G.data[b+0],m=G.data[b+1],g=G.data[b+2],E=G.data[b+3],A=(t*s+i)*4,G.data[A+0]=f,G.data[A+1]=m,G.data[A+2]=g,G.data[A+3]=E;for(s=0;s<e;s+=1)for(X=Math.floor(j),c=0;c<N;c+=1){for(i=0;i<X+1;i+=1)b=(t*s+i)*4,f=G.data[b+0],m=G.data[b+1],g=G.data[b+2],E=G.data[b+3],A=(t*s+X*2-i-1)*4,G.data[A+0]=f,G.data[A+1]=m,G.data[A+2]=g,G.data[A+3]=E;X*=2}MD(G,n,{})};B.addGetterSetter(xt,"kaleidoscopePower",2,Mt(),B.afterSetFilter);B.addGetterSetter(xt,"kaleidoscopeAngle",0,Mt(),B.afterSetFilter);function S1(n,t,e){let i=(e*n.width+t)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function l0(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2))}function VD(n){const t=[0,0,0];for(let e=0;e<n.length;e++)t[0]+=n[e][0],t[1]+=n[e][1],t[2]+=n[e][2];return t[0]/=n.length,t[1]/=n.length,t[2]/=n.length,t}function kD(n,t){const e=S1(n,0,0),i=S1(n,n.width-1,0),s=S1(n,0,n.height-1),o=S1(n,n.width-1,n.height-1),c=t||10;if(l0(e,i)<c&&l0(i,o)<c&&l0(o,s)<c&&l0(s,e)<c){const f=VD([i,e,o,s]),m=[];for(let g=0;g<n.width*n.height;g++){const E=l0(f,[n.data[g*4],n.data[g*4+1],n.data[g*4+2]]);m[g]=E<c?0:255}return m}}function LD(n,t){for(let e=0;e<n.width*n.height;e++)n.data[4*e+3]=t[e]}function UD(n,t,e){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const L=N*t+D,U=i[b*s+A];E+=n[L]*U}}c[g]=E===2040?255:0}return c}function zD(n,t,e){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const L=N*t+D,U=i[b*s+A];E+=n[L]*U}}c[g]=E>=1020?255:0}return c}function BD(n,t,e){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const L=N*t+D,U=i[b*s+A];E+=n[L]*U}}c[g]=E}return c}const GD=function(n){const t=this.threshold();let e=kD(n,t);return e&&(e=UD(e,n.width,n.height),e=zD(e,n.width,n.height),e=BD(e,n.width,n.height),LD(n,e)),n};B.addGetterSetter(xt,"threshold",0,Mt(),B.afterSetFilter);const HD=function(n){const t=this.noise()*255,e=n.data,i=e.length,s=t/2;for(let o=0;o<i;o+=4)e[o+0]+=s-2*s*Math.random(),e[o+1]+=s-2*s*Math.random(),e[o+2]+=s-2*s*Math.random()};B.addGetterSetter(xt,"noise",.2,Mt(),B.afterSetFilter);const qD=function(n){let t=Math.ceil(this.pixelSize()),e=n.width,i=n.height,s=Math.ceil(e/t),o=Math.ceil(i/t),c=n.data;if(t<=0){et.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let m=0;m<o;m+=1){let g=0,E=0,b=0,A=0;const N=f*t,D=N+t,L=m*t,U=L+t;let G=0;for(let j=N;j<D;j+=1)if(!(j>=e))for(let X=L;X<U;X+=1){if(X>=i)continue;const Z=(e*X+j)*4;g+=c[Z+0],E+=c[Z+1],b+=c[Z+2],A+=c[Z+3],G+=1}g=g/G,E=E/G,b=b/G,A=A/G;for(let j=N;j<D;j+=1)if(!(j>=e))for(let X=L;X<U;X+=1){if(X>=i)continue;const Z=(e*X+j)*4;c[Z+0]=g,c[Z+1]=E,c[Z+2]=b,c[Z+3]=A}}};B.addGetterSetter(xt,"pixelSize",8,Mt(),B.afterSetFilter);const FD=function(n){const t=Math.round(this.levels()*254)+1,e=n.data,i=e.length,s=255/t;for(let o=0;o<i;o+=1)e[o]=Math.floor(e[o]/s)*s};B.addGetterSetter(xt,"levels",.5,Mt(),B.afterSetFilter);const jD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue();for(let c=0;c<e;c+=4){const f=(.34*t[c]+.5*t[c+1]+.16*t[c+2])/255;t[c]=f*i,t[c+1]=f*s,t[c+2]=f*o,t[c+3]=t[c+3]}};B.addGetterSetter(xt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"blue",0,k6,B.afterSetFilter);const KD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue(),c=this.alpha();for(let f=0;f<e;f+=4){const m=1-c;t[f]=i*c+t[f]*m,t[f+1]=s*c+t[f+1]*m,t[f+2]=o*c+t[f+2]*m}};B.addGetterSetter(xt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"blue",0,k6,B.afterSetFilter);B.addGetterSetter(xt,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const YD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=t[i+0],o=t[i+1],c=t[i+2];t[i+0]=Math.min(255,s*.393+o*.769+c*.189),t[i+1]=Math.min(255,s*.349+o*.686+c*.168),t[i+2]=Math.min(255,s*.272+o*.534+c*.131)}},QD=function(n){const e=n.data;for(let i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],c=e[i+2];.2126*s+.7152*o+.0722*c>=128&&(e[i]=255-s,e[i+1]=255-o,e[i+2]=255-c)}return n},XD=function(n){const t=this.threshold()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=1)e[s]=e[s]<t?0:255};B.addGetterSetter(xt,"threshold",.5,Mt(),B.afterSetFilter);np.Util._assign(np,{Arc:nc,Arrow:wd,Circle:Cp,Ellipse:Bh,Image:tl,Label:hS,Tag:Rd,Line:ic,Path:Rn,Rect:b_,RegularPolygon:Gh,Ring:Cd,Sprite:nu,Star:Hh,Text:Nn,TextPath:$i,Transformer:Be,Wedge:sc,Filters:{Blur:SD,Brightness:AD,Brighten:bD,Contrast:wD,Emboss:RD,Enhance:CD,Grayscale:ID,HSL:ND,HSV:DD,Invert:xD,Kaleidoscope:PD,Mask:GD,Noise:HD,Pixelate:qD,Posterize:FD,RGB:jD,RGBA:KD,Sepia:YD,Solarize:QD,Threshold:XD}});var TE={exports:{}},SE={exports:{}};var UA;function JD(){return UA||(UA=1,(function(n){n.exports=function(t){function e(l,u,p,y){return new eg(l,u,p,y)}function i(){}function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function c(l){if(o(l)!==l)throw Error(s(188))}function f(l){var u=l.alternate;if(!u){if(u=o(l),u===null)throw Error(s(188));return u!==l?null:l}for(var p=l,y=u;;){var S=p.return;if(S===null)break;var w=S.alternate;if(w===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===w.child){for(w=S.child;w;){if(w===p)return c(S),l;if(w===y)return c(S),u;w=w.sibling}throw Error(s(188))}if(p.return!==y.return)p=S,y=w;else{for(var x=!1,Q=S.child;Q;){if(Q===p){x=!0,p=S,y=w;break}if(Q===y){x=!0,y=S,p=w;break}Q=Q.sibling}if(!x){for(Q=w.child;Q;){if(Q===p){x=!0,p=w,y=S;break}if(Q===y){x=!0,y=w,p=S;break}Q=Q.sibling}if(!x)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}function g(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=g(l),u!==null))return u;l=l.sibling}return null}function E(l){return l===null||typeof l!="object"?null:(l=ko&&l[ko]||l["@@iterator"],typeof l=="function"?l:null)}function b(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Al?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case bu:return"Fragment";case wu:return"Profiler";case Au:return"StrictMode";case Wd:return"Suspense";case Vo:return"SuspenseList";case yf:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Su:return"Portal";case Ba:return l.displayName||"Context";case _f:return(l._context.displayName||"Context")+".Consumer";case qc:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Zd:return u=l.displayName||null,u!==null?u:b(l.type)||"Memo";case Es:u=l._payload,l=l._init;try{return b(l(u))}catch{}}return null}function A(l){return{current:l}}function N(l){0>Du||(l.current=hm[Du],hm[Du]=null,Du--)}function D(l,u){Du++,hm[Du]=l.current,l.current=u}function L(l){return l>>>=0,l===0?32:31-(fm(l)/Ky|0)|0}function U(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function G(l,u,p){var y=l.pendingLanes;if(y===0)return 0;var S=0,w=l.suspendedLanes,x=l.pingedLanes;l=l.warmLanes;var Q=y&134217727;return Q!==0?(y=Q&~w,y!==0?S=U(y):(x&=Q,x!==0?S=U(x):p||(p=Q&~l,p!==0&&(S=U(p))))):(Q=y&~w,Q!==0?S=U(Q):x!==0?S=U(x):p||(p=y&~l,p!==0&&(S=U(p)))),S===0?0:u!==0&&u!==S&&(u&w)===0&&(w=S&-S,p=u&-u,w>=p||w===32&&(p&4194048)!==0)?u:S}function j(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function X(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var l=Jc;return Jc<<=1,(Jc&62914560)===0&&(Jc=4194304),l}function gt(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function lt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function V(l,u,p,y,S,w){var x=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Q=l.entanglements,dt=l.expirationTimes,bt=l.hiddenUpdates;for(p=x&~p;0<p;){var Pt=31-Hs(p),Rt=1<<Pt;Q[Pt]=0,dt[Pt]=-1;var Gt=bt[Pt];if(Gt!==null)for(bt[Pt]=null,Pt=0;Pt<Gt.length;Pt++){var ce=Gt[Pt];ce!==null&&(ce.lane&=-536870913)}p&=~Rt}y!==0&&M(l,y,0),w!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=w&~(x&~u))}function M(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-Hs(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function k(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-Hs(p),S=1<<y;S&u|l[y]&u&&(l[y]|=u),p&=~S}}function q(l,u){var p=u&-u;return p=(p&42)!==0?1:H(p),(p&(l.suspendedLanes|u))!==0?0:p}function H(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function K(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function z(l){if(typeof Bg=="function"&&Xy(l),qs&&typeof qs.setStrictMode=="function")try{qs.setStrictMode(Ou,l)}catch{}}function Ft(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function Ut(l){if(ym===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);ym=u&&u[1]||"",so=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ym+l+so}function W(l,u){if(!l||Cf)return"";Cf=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(ce){var Gt=ce}Reflect.construct(l,[],Rt)}else{try{Rt.call()}catch(ce){Gt=ce}l.call(Rt.prototype)}}else{try{throw Error()}catch(ce){Gt=ce}(Rt=l())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(ce){if(ce&&Gt&&typeof ce.stack=="string")return[ce.stack,Gt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),x=w[0],Q=w[1];if(x&&Q){var dt=x.split(`
`),bt=Q.split(`
`);for(S=y=0;y<dt.length&&!dt[y].includes("DetermineComponentFrameRoot");)y++;for(;S<bt.length&&!bt[S].includes("DetermineComponentFrameRoot");)S++;if(y===dt.length||S===bt.length)for(y=dt.length-1,S=bt.length-1;1<=y&&0<=S&&dt[y]!==bt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(dt[y]!==bt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||dt[y]!==bt[S]){var Pt=`
`+dt[y].replace(" at new "," at ");return l.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",l.displayName)),Pt}while(1<=y&&0<=S);break}}}finally{Cf=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ut(p):""}function St(l,u){switch(l.tag){case 26:case 27:case 5:return Ut(l.type);case 16:return Ut("Lazy");case 13:return l.child!==u&&u!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return W(l.type,!1);case 11:return W(l.type.render,!1);case 1:return W(l.type,!0);case 31:return Ut("Activity");default:return""}}function Et(l){try{var u="",p=null;do u+=St(l,p),p=l,l=l.return;while(l);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function zt(l,u){if(typeof l=="object"&&l!==null){var p=Gg.get(l);return p!==void 0?p:(u={value:l,source:u,stack:Et(u)},Gg.set(l,u),u)}return{value:l,source:u,stack:Et(u)}}function Qt(l,u){zo[ao++]=If,zo[ao++]=sn,sn=l,If=u}function F(l,u,p){qa[ha++]=Ki,qa[ha++]=yr,qa[ha++]=Fa,Fa=l;var y=Ki;l=yr;var S=32-Hs(y)-1;y&=~(1<<S),p+=1;var w=32-Hs(u)+S;if(30<w){var x=S-S%5;w=(y&(1<<x)-1).toString(32),y>>=x,S-=x,Ki=1<<32-Hs(u)+S|p<<S|y,yr=w+l}else Ki=1<<w|p<<S|y,yr=l}function ft(l){l.return!==null&&(Qt(l,1),F(l,1,0))}function At(l){for(;l===sn;)sn=zo[--ao],zo[ao]=null,If=zo[--ao],zo[ao]=null;for(;l===Fa;)Fa=qa[--ha],qa[ha]=null,yr=qa[--ha],qa[ha]=null,Ki=qa[--ha],qa[ha]=null}function Ht(l,u){qa[ha++]=Ki,qa[ha++]=yr,qa[ha++]=Fa,Ki=u.id,yr=u.overflow,Fa=l}function ee(l,u){D(Yi,u),D(Bo,l),D(Pi,null),l=ly(u),N(Pi),D(Pi,l)}function ae(){N(Pi),N(Bo),N(Yi)}function Te(l){l.memoizedState!==null&&D(Nf,l);var u=Pi.current,p=Kc(u,l.type);u!==p&&(D(Bo,l),D(Pi,p))}function vn(l){Bo.current===l&&(N(Pi),N(Bo)),Nf.current===l&&(N(Nf),ei?Iu._currentValue=Cu:Iu._currentValue2=Cu)}function Ve(l){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ir(zt(u,l)),vm}function Nr(l,u){if(!Sn)throw Error(s(175));Py(l.stateNode,l.type,l.memoizedProps,u,l)||Ve(l,!0)}function To(l){for(Ti=l.return;Ti;)switch(Ti.tag){case 5:case 31:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:Ti=Ti.return}}function Os(l){if(!Sn||l!==Ti)return!1;if(!we)return To(l),we=!0,!1;var u=l.tag;if(Ei?u!==3&&u!==27&&(u!==5||Xc(l.type)&&!Ts(l.type,l.memoizedProps))&&bn&&Ve(l):u!==3&&(u!==5||Xc(l.type)&&!Ts(l.type,l.memoizedProps))&&bn&&Ve(l),To(l),u===13){if(!Sn)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));bn=Ng(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));bn=ky(l)}else bn=Ei&&u===27?Ry(l.type,bn):Ti?wy(l.stateNode):null;return!0}function cs(){Sn&&(bn=Ti=null,we=!1)}function hs(){var l=ro;return l!==null&&(js===null?js=l:js.push.apply(js,l),ro=null),l}function ir(l){ro===null?ro=[l]:ro.push(l)}function es(l,u,p){ei?(D(ja,u._currentValue),u._currentValue=p):(D(ja,u._currentValue2),u._currentValue2=p)}function fs(l){var u=ja.current;ei?l._currentValue=u:l._currentValue2=u,N(ja)}function Dr(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function En(l,u,p,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var w=S.dependencies;if(w!==null){var x=S.child;w=w.firstContext;t:for(;w!==null;){var Q=w;w=S;for(var dt=0;dt<u.length;dt++)if(Q.context===u[dt]){w.lanes|=p,Q=w.alternate,Q!==null&&(Q.lanes|=p),Dr(w.return,p,l),y||(x=null);break t}w=Q.next}}else if(S.tag===18){if(x=S.return,x===null)throw Error(s(341));x.lanes|=p,w=x.alternate,w!==null&&(w.lanes|=p),Dr(x,p,l),x=null}else x=S.child;if(x!==null)x.return=S;else for(x=S;x!==null;){if(x===l){x=null;break}if(S=x.sibling,S!==null){S.return=x.return,x=S;break}x=x.return}S=x}}function ln(l,u,p,y){l=null;for(var S=u,w=!1;S!==null;){if(!w){if((S.flags&524288)!==0)w=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var x=S.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var Q=S.type;ii(S.pendingProps.value,x.value)||(l!==null?l.push(Q):l=[Q])}}else if(S===Nf.current){if(x=S.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Iu):l=[Iu])}S=S.return}l!==null&&En(u,l,p,y),u.flags|=262144}function Zn(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!ii(ei?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function Ci(l){fn=l,vr=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function en(l){return $s(fn,l)}function pn(l,u){return fn===null&&Ci(l),$s(l,u)}function $s(l,u){var p=ei?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},vr===null){if(l===null)throw Error(s(308));vr=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else vr=vr.next=u;return p}function Aa(){return{controller:new Jy,data:new Map,refCount:0}}function ds(l){l.refCount--,l.refCount===0&&Vi(U2,function(){l.controller.abort()})}function ta(){}function yt(l){l!==We&&l.next===null&&(We===null?Df=We=l:We=We.next=l),Ka=!0,as||(as=!0,xn())}function Ot(l,u){if(!Em&&Ka){Em=!0;do for(var p=!1,y=Df;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var w=0;else{var x=y.suspendedLanes,Q=y.pingedLanes;w=(1<<31-Hs(42|l)+1)-1,w&=S&~(x&~Q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,yi(y,w))}else w=Re,w=G(y,y===ye?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==Gs),(w&3)===0||j(y,w)||(p=!0,yi(y,w));y=y.next}while(p);Em=!1}}function ne(){Ge()}function Ge(){Ka=as=!1;var l=0;Nl!==0&&Ru()&&(l=Nl);for(var u=ss(),p=null,y=Df;y!==null;){var S=y.next,w=ke(y,u);w===0?(y.next=null,p===null?Df=S:p.next=S,S===null&&(We=p)):(p=y,(l!==0||(w&3)!==0)&&(Ka=!0)),y=S}mi!==0&&mi!==5||Ot(l),Nl!==0&&(Nl=0)}function ke(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var x=31-Hs(w),Q=1<<x,dt=S[x];dt===-1?((Q&p)===0||(Q&y)!==0)&&(S[x]=X(Q,u)):dt<=u&&(l.expiredLanes|=Q),w&=~Q}if(u=ye,p=Re,p=G(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Gs),y=l.callbackNode,p===0||l===u&&($e===2||$e===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&mm(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||j(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&mm(y),K(p)){case 2:case 8:p=Qy;break;case 32:p=Rf;break;case 268435456:p=gm;break;default:p=Rf}return y=Ce.bind(null,l),p=wf(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&mm(y),l.callbackPriority=2,l.callbackNode=null,2}function Ce(l,u){if(mi!==0&&mi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(eo()&&l.callbackNode!==p)return null;var y=Re;return y=G(l,l===ye?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Gs),y===0?null:(_r(l,y,u),ke(l,ss()),l.callbackNode!=null&&l.callbackNode===p?Ce.bind(null,l):null)}function yi(l,u){if(eo())return null;_r(l,u,!0)}function xn(){dg?mg(function(){(Se&6)!==0?wf(pm,ne):Ge()}):wf(pm,ne)}function ms(){if(Nl===0){var l=Go;l===0&&(l=dm,dm<<=1,(dm&261888)===0&&(dm=256)),Nl=l}return Nl}function el(l,u){if(Wc===null){var p=Wc=[];Hg=0,Go=ms(),Si={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Hg++,u.then(au,au),u}function au(){if(--Hg===0&&Wc!==null){Si!==null&&(Si.status="fulfilled");var l=Wc;Wc=null,Go=0,Si=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function xr(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}function So(){var l=Dl.current;return l!==null?l:ye.pooledCache}function On(l,u){u===null?D(Dl,Dl.current):D(Dl,u.pool)}function sr(){var l=So();return l===null?null:{parent:ei?An._currentValue:An._currentValue2,pool:l}}function ea(l,u){if(ii(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!L2.call(u,S)||!ii(l[S],u[S]))return!1}return!0}function wa(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Md(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(ta,ta),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,nl(l),l;default:if(typeof u.status=="string")u.then(ta,ta);else{if(l=ye,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,nl(l),l}throw bs=u,bi}}function Or(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(bs=p,bi):p}}function ar(){if(bs===null)throw Error(s(459));var l=bs;return bs=null,l}function nl(l){if(l===bi||l===Qa)throw Error(s(483))}function dc(l){var u=Mu;return Mu+=1,xl===null&&(xl=[]),Md(xl,l,u)}function rr(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function il(l,u){throw u.$$typeof===Tu?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function mc(l){function u(rt,nt){if(l){var ct=rt.deletions;ct===null?(rt.deletions=[nt],rt.flags|=16):ct.push(nt)}}function p(rt,nt){if(!l)return null;for(;nt!==null;)u(rt,nt),nt=nt.sibling;return null}function y(rt){for(var nt=new Map;rt!==null;)rt.key!==null?nt.set(rt.key,rt):nt.set(rt.index,rt),rt=rt.sibling;return nt}function S(rt,nt){return rt=ua(rt,nt),rt.index=0,rt.sibling=null,rt}function w(rt,nt,ct){return rt.index=ct,l?(ct=rt.alternate,ct!==null?(ct=ct.index,ct<nt?(rt.flags|=67108866,nt):ct):(rt.flags|=67108866,nt)):(rt.flags|=1048576,nt)}function x(rt){return l&&rt.alternate===null&&(rt.flags|=67108866),rt}function Q(rt,nt,ct,Dt){return nt===null||nt.tag!==6?(nt=ng(ct,rt.mode,Dt),nt.return=rt,nt):(nt=S(nt,ct),nt.return=rt,nt)}function dt(rt,nt,ct,Dt){var te=ct.type;return te===bu?Pt(rt,nt,ct.props.children,Dt,ct.key):nt!==null&&(nt.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Es&&Or(te)===nt.type)?(nt=S(nt,ct.props),rr(nt,ct),nt.return=rt,nt):(nt=Po(ct.type,ct.key,ct.props,null,rt.mode,Dt),rr(nt,ct),nt.return=rt,nt)}function bt(rt,nt,ct,Dt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==ct.containerInfo||nt.stateNode.implementation!==ct.implementation?(nt=sg(ct,rt.mode,Dt),nt.return=rt,nt):(nt=S(nt,ct.children||[]),nt.return=rt,nt)}function Pt(rt,nt,ct,Dt,te){return nt===null||nt.tag!==7?(nt=za(ct,rt.mode,Dt,te),nt.return=rt,nt):(nt=S(nt,ct),nt.return=rt,nt)}function Rt(rt,nt,ct){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=ng(""+nt,rt.mode,ct),nt.return=rt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case no:return ct=Po(nt.type,nt.key,nt.props,null,rt.mode,ct),rr(ct,nt),ct.return=rt,ct;case Su:return nt=sg(nt,rt.mode,ct),nt.return=rt,nt;case Es:return nt=Or(nt),Rt(rt,nt,ct)}if(wl(nt)||E(nt))return nt=za(nt,rt.mode,ct,null),nt.return=rt,nt;if(typeof nt.then=="function")return Rt(rt,dc(nt),ct);if(nt.$$typeof===Ba)return Rt(rt,pn(rt,nt),ct);il(rt,nt)}return null}function Gt(rt,nt,ct,Dt){var te=nt!==null?nt.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return te!==null?null:Q(rt,nt,""+ct,Dt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case no:return ct.key===te?dt(rt,nt,ct,Dt):null;case Su:return ct.key===te?bt(rt,nt,ct,Dt):null;case Es:return ct=Or(ct),Gt(rt,nt,ct,Dt)}if(wl(ct)||E(ct))return te!==null?null:Pt(rt,nt,ct,Dt,null);if(typeof ct.then=="function")return Gt(rt,nt,dc(ct),Dt);if(ct.$$typeof===Ba)return Gt(rt,nt,pn(rt,ct),Dt);il(rt,ct)}return null}function ce(rt,nt,ct,Dt,te){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return rt=rt.get(ct)||null,Q(nt,rt,""+Dt,te);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case no:return rt=rt.get(Dt.key===null?ct:Dt.key)||null,dt(nt,rt,Dt,te);case Su:return rt=rt.get(Dt.key===null?ct:Dt.key)||null,bt(nt,rt,Dt,te);case Es:return Dt=Or(Dt),ce(rt,nt,ct,Dt,te)}if(wl(Dt)||E(Dt))return rt=rt.get(ct)||null,Pt(nt,rt,Dt,te,null);if(typeof Dt.then=="function")return ce(rt,nt,ct,dc(Dt),te);if(Dt.$$typeof===Ba)return ce(rt,nt,ct,pn(nt,Dt),te);il(nt,Dt)}return null}function ki(rt,nt,ct,Dt){for(var te=null,Bn=null,ie=nt,Le=nt=0,Li=null;ie!==null&&Le<ct.length;Le++){ie.index>Le?(Li=ie,ie=null):Li=ie.sibling;var qe=Gt(rt,ie,ct[Le],Dt);if(qe===null){ie===null&&(ie=Li);break}l&&ie&&qe.alternate===null&&u(rt,ie),nt=w(qe,nt,Le),Bn===null?te=qe:Bn.sibling=qe,Bn=qe,ie=Li}if(Le===ct.length)return p(rt,ie),we&&Qt(rt,Le),te;if(ie===null){for(;Le<ct.length;Le++)ie=Rt(rt,ct[Le],Dt),ie!==null&&(nt=w(ie,nt,Le),Bn===null?te=ie:Bn.sibling=ie,Bn=ie);return we&&Qt(rt,Le),te}for(ie=y(ie);Le<ct.length;Le++)Li=ce(ie,rt,Le,ct[Le],Dt),Li!==null&&(l&&Li.alternate!==null&&ie.delete(Li.key===null?Le:Li.key),nt=w(Li,nt,Le),Bn===null?te=Li:Bn.sibling=Li,Bn=Li);return l&&ie.forEach(function(Wa){return u(rt,Wa)}),we&&Qt(rt,Le),te}function ah(rt,nt,ct,Dt){if(ct==null)throw Error(s(151));for(var te=null,Bn=null,ie=nt,Le=nt=0,Li=null,qe=ct.next();ie!==null&&!qe.done;Le++,qe=ct.next()){ie.index>Le?(Li=ie,ie=null):Li=ie.sibling;var Wa=Gt(rt,ie,qe.value,Dt);if(Wa===null){ie===null&&(ie=Li);break}l&&ie&&Wa.alternate===null&&u(rt,ie),nt=w(Wa,nt,Le),Bn===null?te=Wa:Bn.sibling=Wa,Bn=Wa,ie=Li}if(qe.done)return p(rt,ie),we&&Qt(rt,Le),te;if(ie===null){for(;!qe.done;Le++,qe=ct.next())qe=Rt(rt,qe.value,Dt),qe!==null&&(nt=w(qe,nt,Le),Bn===null?te=qe:Bn.sibling=qe,Bn=qe);return we&&Qt(rt,Le),te}for(ie=y(ie);!qe.done;Le++,qe=ct.next())qe=ce(ie,rt,Le,qe.value,Dt),qe!==null&&(l&&qe.alternate!==null&&ie.delete(qe.key===null?Le:qe.key),nt=w(qe,nt,Le),Bn===null?te=qe:Bn.sibling=qe,Bn=qe);return l&&ie.forEach(function(z2){return u(rt,z2)}),we&&Qt(rt,Le),te}function zl(rt,nt,ct,Dt){if(typeof ct=="object"&&ct!==null&&ct.type===bu&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case no:t:{for(var te=ct.key;nt!==null;){if(nt.key===te){if(te=ct.type,te===bu){if(nt.tag===7){p(rt,nt.sibling),Dt=S(nt,ct.props.children),Dt.return=rt,rt=Dt;break t}}else if(nt.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Es&&Or(te)===nt.type){p(rt,nt.sibling),Dt=S(nt,ct.props),rr(Dt,ct),Dt.return=rt,rt=Dt;break t}p(rt,nt);break}else u(rt,nt);nt=nt.sibling}ct.type===bu?(Dt=za(ct.props.children,rt.mode,Dt,ct.key),Dt.return=rt,rt=Dt):(Dt=Po(ct.type,ct.key,ct.props,null,rt.mode,Dt),rr(Dt,ct),Dt.return=rt,rt=Dt)}return x(rt);case Su:t:{for(te=ct.key;nt!==null;){if(nt.key===te)if(nt.tag===4&&nt.stateNode.containerInfo===ct.containerInfo&&nt.stateNode.implementation===ct.implementation){p(rt,nt.sibling),Dt=S(nt,ct.children||[]),Dt.return=rt,rt=Dt;break t}else{p(rt,nt);break}else u(rt,nt);nt=nt.sibling}Dt=sg(ct,rt.mode,Dt),Dt.return=rt,rt=Dt}return x(rt);case Es:return ct=Or(ct),zl(rt,nt,ct,Dt)}if(wl(ct))return ki(rt,nt,ct,Dt);if(E(ct)){if(te=E(ct),typeof te!="function")throw Error(s(150));return ct=te.call(ct),ah(rt,nt,ct,Dt)}if(typeof ct.then=="function")return zl(rt,nt,dc(ct),Dt);if(ct.$$typeof===Ba)return zl(rt,nt,pn(rt,ct),Dt);il(rt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,nt!==null&&nt.tag===6?(p(rt,nt.sibling),Dt=S(nt,ct),Dt.return=rt,rt=Dt):(p(rt,nt),Dt=ng(ct,rt.mode,Dt),Dt.return=rt,rt=Dt),x(rt)):p(rt,nt)}return function(rt,nt,ct,Dt){try{Mu=0;var te=zl(rt,nt,ct,Dt);return xl=null,te}catch(ie){if(ie===bi||ie===Qa)throw ie;var Bn=e(29,ie,null,rt.mode);return Bn.lanes=Dt,Bn.return=rt,Bn}}}function Mr(){for(var l=lo,u=Pu=lo=0;u<l;){var p=Xi[u];Xi[u++]=null;var y=Xi[u];Xi[u++]=null;var S=Xi[u];Xi[u++]=null;var w=Xi[u];if(Xi[u++]=null,y!==null&&S!==null){var x=y.pending;x===null?S.next=S:(S.next=x.next,x.next=S),y.pending=S}w!==0&&Ca(p,S,w)}}function Ra(l,u,p,y){Xi[lo++]=l,Xi[lo++]=u,Xi[lo++]=p,Xi[lo++]=y,Pu|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function pc(l,u,p,y){return Ra(l,u,p,y),Mn(l)}function qi(l,u){return Ra(l,null,null,u),Mn(l)}function Ca(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var S=!1,w=l.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(S=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,S&&u!==null&&(S=31-Hs(p),l=w.hiddenUpdates,y=l[S],y===null?l[S]=[u]:y.push(u),u.lane=p|536870912),w):null}function Mn(l){if(50<He)throw He=0,kf=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function ci(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ia(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function na(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Pr(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Se&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=Mn(l),Ca(l,null,p),u}return Ra(l,y,u,p),Mn(l)}function sl(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,k(l,p)}}function gc(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var x={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?S=w=x:w=w.next=x,p=p.next}while(p!==null);w===null?S=w=u:w=w.next=u}else S=w=u;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Ms(){if(Sm){var l=Si;if(l!==null)throw l}}function Vr(l,u,p,y){Sm=!1;var S=l.updateQueue;fa=!1;var w=S.firstBaseUpdate,x=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var dt=Q,bt=dt.next;dt.next=null,x===null?w=bt:x.next=bt,x=dt;var Pt=l.alternate;Pt!==null&&(Pt=Pt.updateQueue,Q=Pt.lastBaseUpdate,Q!==x&&(Q===null?Pt.firstBaseUpdate=bt:Q.next=bt,Pt.lastBaseUpdate=dt))}if(w!==null){var Rt=S.baseState;x=0,Pt=bt=dt=null,Q=w;do{var Gt=Q.lane&-536870913,ce=Gt!==Q.lane;if(ce?(Re&Gt)===Gt:(y&Gt)===Gt){Gt!==0&&Gt===Go&&(Sm=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});t:{var ki=l,ah=Q;Gt=u;var zl=p;switch(ah.tag){case 1:if(ki=ah.payload,typeof ki=="function"){Rt=ki.call(zl,Rt,Gt);break t}Rt=ki;break t;case 3:ki.flags=ki.flags&-65537|128;case 0:if(ki=ah.payload,Gt=typeof ki=="function"?ki.call(zl,Rt,Gt):ki,Gt==null)break t;Rt=Jd({},Rt,Gt);break t;case 2:fa=!0}}Gt=Q.callback,Gt!==null&&(l.flags|=64,ce&&(l.flags|=8192),ce=S.callbacks,ce===null?S.callbacks=[Gt]:ce.push(Gt))}else ce={lane:Gt,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Pt===null?(bt=Pt=ce,dt=Rt):Pt=Pt.next=ce,x|=Gt;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;ce=Q,Q=ce.next,ce.next=null,S.lastBaseUpdate=ce,S.shared.pending=null}}while(!0);Pt===null&&(dt=Rt),S.baseState=dt,S.firstBaseUpdate=bt,S.lastBaseUpdate=Pt,w===null&&(S.shared.lanes=0),qo|=x,l.lanes=x,l.memoizedState=Rt}}function or(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function ia(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)or(p[l],u)}function Ps(l,u){l=co,D(Ol,l),D(Vu,u),co=l|u.baseLanes}function Na(){D(Ol,co),D(Vu,Vu.current)}function qn(){co=Ol.current,N(Vu),N(Ol)}function Da(l){var u=l.alternate;D(Kn,Kn.current&1),D(Fs,l),As===null&&(u===null||Vu.current!==null||u.memoizedState!==null)&&(As=l)}function ru(l){D(Kn,Kn.current),D(Fs,l),As===null&&(As=l)}function lr(l){l.tag===22?(D(Kn,Kn.current),D(Fs,l),As===null&&(As=l)):Fi()}function Fi(){D(Kn,Kn.current),D(Fs,Fs.current)}function ji(l){N(Fs),As===l&&(As=null),N(Kn)}function al(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Cl(p)||sm(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function un(){throw Error(s(321))}function _c(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!ii(l[p],u[p]))return!1;return!0}function rl(l,u,p,y,S,w){return Ho=w,de=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Zt.H=l===null||l.memoizedState===null?Ln:uo,xe=!1,w=p(y,S),xe=!1,pe&&(w=$n(u,p,y,S)),Vs(l),w}function Vs(l){Zt.H=da;var u=Jt!==null&&Jt.next!==null;if(Ho=0,oe=Jt=de=null,_e=!1,Xa=0,Er=null,u)throw Error(s(300));l===null||_n||(l=l.dependencies,l!==null&&Zn(l)&&(_n=!0))}function $n(l,u,p,y){de=l;var S=0;do{if(pe&&(Er=null),Xa=0,pe=!1,25<=S)throw Error(s(301));if(S+=1,oe=Jt=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Zt.H=Ml,w=u(p,y)}while(pe);return w}function Ii(){var l=Zt.H,u=l.useState()[0];return u=typeof u.then=="function"?Ni(u):u,l=l.useState()[0],(Jt!==null?Jt.memoizedState:null)!==l&&(de.flags|=1024),u}function kr(){var l=rs!==0;return rs=0,l}function ou(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function je(l){if(_e){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}_e=!1}Ho=0,oe=Jt=de=null,pe=!1,Xa=rs=0,Er=null}function ti(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?de.memoizedState=oe=l:oe=oe.next=l,oe}function Ke(){if(Jt===null){var l=de.alternate;l=l!==null?l.memoizedState:null}else l=Jt.next;var u=oe===null?de.memoizedState:oe.next;if(u!==null)oe=u,Jt=l;else{if(l===null)throw de.alternate===null?Error(s(467)):Error(s(310));Jt=l,l={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},oe===null?de.memoizedState=oe=l:oe=oe.next=l}return oe}function Lr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ni(l){var u=Xa;return Xa+=1,Er===null&&(Er=[]),l=Md(Er,l,u),u=de,(oe===null?u.memoizedState:oe.next)===null&&(u=u.alternate,Zt.H=u===null||u.memoizedState===null?Ln:uo),l}function bo(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ni(l);if(l.$$typeof===Ba)return en(l)}throw Error(s(438,String(l)))}function yc(l){var u=null,p=de.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=de.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Lr(),de.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=rg;return u.index++,p}function sa(l,u){return typeof u=="function"?u(l):u}function ur(l){var u=Ke();return vc(u,Jt,l)}function vc(l,u,p){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var S=l.baseQueue,w=y.pending;if(w!==null){if(S!==null){var x=S.next;S.next=w.next,w.next=x}u.baseQueue=S=w,y.pending=null}if(w=l.baseState,S===null)l.memoizedState=w;else{u=S.next;var Q=x=null,dt=null,bt=u,Pt=!1;do{var Rt=bt.lane&-536870913;if(Rt!==bt.lane?(Re&Rt)===Rt:(Ho&Rt)===Rt){var Gt=bt.revertLane;if(Gt===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),Rt===Go&&(Pt=!0);else if((Ho&Gt)===Gt){bt=bt.next,Gt===Go&&(Pt=!0);continue}else Rt={lane:0,revertLane:bt.revertLane,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},dt===null?(Q=dt=Rt,x=w):dt=dt.next=Rt,de.lanes|=Gt,qo|=Gt;Rt=bt.action,xe&&p(w,Rt),w=bt.hasEagerState?bt.eagerState:p(w,Rt)}else Gt={lane:Rt,revertLane:bt.revertLane,gesture:bt.gesture,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},dt===null?(Q=dt=Gt,x=w):dt=dt.next=Gt,de.lanes|=Rt,qo|=Rt;bt=bt.next}while(bt!==null&&bt!==u);if(dt===null?x=w:dt.next=Q,!ii(w,l.memoizedState)&&(_n=!0,Pt&&(p=Si,p!==null)))throw p;l.memoizedState=w,l.baseState=x,l.baseQueue=dt,y.lastRenderedState=w}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Ur(l){var u=Ke(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,w=u.memoizedState;if(S!==null){p.pending=null;var x=S=S.next;do w=l(w,x.action),x=x.next;while(x!==S);ii(w,u.memoizedState)||(_n=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),p.lastRenderedState=w}return[w,y]}function ps(l,u,p){var y=de,S=Ke(),w=we;if(w){if(p===void 0)throw Error(s(407));p=p()}else p=u();var x=!ii((Jt||S).memoizedState,p);if(x&&(S.memoizedState=p,_n=!0),S=S.queue,hr(Tc.bind(null,y,S,l),[l]),S.getSnapshot!==u||x||oe!==null&&oe.memoizedState.tag&1){if(y.flags|=2048,gs(9,{destroy:void 0},Ec.bind(null,y,S,p,u),null),ye===null)throw Error(s(349));w||(Ho&127)!==0||Zh(y,u,p)}return p}function Zh(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=de.updateQueue,u===null?(u=Lr(),de.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function Ec(l,u,p,y){u.value=p,u.getSnapshot=y,lu(u)&&$h(l)}function Tc(l,u,p){return p(function(){lu(u)&&$h(l)})}function lu(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!ii(l,p)}catch{return!0}}function $h(l){var u=qi(l,2);u!==null&&Vn(u,l,2)}function zr(l){var u=ti();if(typeof l=="function"){var p=l;if(l=p(),xe){z(!0);try{p()}finally{z(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:l},u}function uu(l,u,p,y){return l.baseState=p,vc(l,Jt,typeof y=="function"?y:sa)}function cr(l,u,p,y,S){if(du(l))throw Error(s(485));if(l=u.action,l!==null){var w={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){w.listeners.push(x)}};Zt.T!==null?p(!0):w.isTransition=!1,y(w),p=u.pending,p===null?(w.next=u.pending=w,Sc(u,w)):(w.next=p.next,u.pending=p.next=w)}}function Sc(l,u){var p=u.action,y=u.payload,S=l.state;if(u.isTransition){var w=Zt.T,x={};Zt.T=x;try{var Q=p(S,y),dt=Zt.S;dt!==null&&dt(x,Q),aa(l,u,Q)}catch(bt){xa(l,u,bt)}finally{w!==null&&x.types!==null&&(w.types=x.types),Zt.T=w}}else try{w=p(S,y),aa(l,u,w)}catch(bt){xa(l,u,bt)}}function aa(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Ao(l,u,y)},function(y){return xa(l,u,y)}):Ao(l,u,p)}function Ao(l,u,p){u.status="fulfilled",u.value=p,ol(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,Sc(l,p)))}function xa(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,ol(u),u=u.next;while(u!==y)}l.action=null}function ol(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function cu(l,u){return u}function wo(l,u){if(we){var p=ye.formState;if(p!==null){t:{var y=de;if(we){if(bn){var S=Ay(bn,Ss);if(S){bn=wy(S),y=wg(S);break t}}Ve(y)}y=!1}y&&(u=p[0])}}p=ti(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:u},p.queue=y,p=ef.bind(null,de,y),y.dispatch=p,y=zr(!1);var w=Ma.bind(null,de,!1,y.queue);return y=ti(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,p=cr.bind(null,de,S,w,p),S.dispatch=p,y.memoizedState=l,[u,p,!1]}function Oa(l){var u=Ke();return ra(u,Jt,l)}function ra(l,u,p){if(u=vc(l,u,cu)[0],l=ur(sa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Ni(u)}catch(x){throw x===bi?Qa:x}else y=u;u=Ke();var S=u.queue,w=S.dispatch;return p!==u.memoizedState&&(de.flags|=2048,gs(9,{destroy:void 0},hu.bind(null,S,p),null)),[y,w,l]}function hu(l,u){l.action=u}function Je(l){var u=Ke(),p=Jt;if(p!==null)return ra(u,p,l);Ke(),u=u.memoizedState,p=Ke();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function gs(l,u,p,y){return l={tag:l,create:p,deps:y,inst:u,next:null},u=de.updateQueue,u===null&&(u=Lr(),de.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function bc(){return Ke().memoizedState}function Br(l,u,p,y){var S=ti();de.flags|=l,S.memoizedState=gs(1|u,{destroy:void 0},p,y===void 0?null:y)}function ll(l,u,p,y){var S=Ke();y=y===void 0?null:y;var w=S.memoizedState.inst;Jt!==null&&y!==null&&_c(y,Jt.memoizedState.deps)?S.memoizedState=gs(u,w,p,y):(de.flags|=l,S.memoizedState=gs(1|u,w,p,y))}function ul(l,u){Br(8390656,8,l,u)}function hr(l,u){ll(2048,8,l,u)}function fr(l){de.flags|=4;var u=de.updateQueue;if(u===null)u=Lr(),de.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function Di(l){var u=Ke().memoizedState;return fr({ref:u,nextImpl:l}),function(){if((Se&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function Gr(l,u){return ll(4,2,l,u)}function dr(l,u){return ll(4,4,l,u)}function Ro(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Ac(l,u,p){p=p!=null?p.concat([l]):null,ll(4,4,Ro.bind(null,u,l),p)}function Hr(){}function fu(l,u){var p=Ke();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&_c(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function mr(l,u){var p=Ke();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&_c(u,y[1]))return y[0];if(y=l(),xe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y}function cl(l,u,p){return p===void 0||(Ho&1073741824)!==0&&(Re&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=xo(),de.lanes|=l,qo|=l,p)}function wc(l,u,p,y){return ii(p,u)?p:Vu.current!==null?(l=cl(l,p,y),ii(l,u)||(_n=!0),l):(Ho&42)===0||(Ho&1073741824)!==0&&(Re&261930)===0?(_n=!0,l.memoizedState=p):(l=xo(),de.lanes|=l,qo|=l,u)}function hl(l,u,p,y,S){var w=Ga();Ae(w!==0&&8>w?w:8);var x=Zt.T,Q={};Zt.T=Q,Ma(l,!1,u,p);try{var dt=S(),bt=Zt.S;if(bt!==null&&bt(Q,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var Pt=xr(dt,y);dl(l,u,Pt,Tn(l))}else dl(l,u,y,Tn(l))}catch(Rt){dl(l,u,{then:function(){},status:"rejected",reason:Rt},Tn())}finally{Ae(w),x!==null&&Q.types!==null&&(x.types=Q.types),Zt.T=x}}function tf(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Cu,baseState:Cu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:Cu},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Rc(){return en(Iu)}function fl(){return Ke().memoizedState}function Cc(){return Ke().memoizedState}function Pd(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=Tn();l=na(p);var y=Pr(u,l,p);y!==null&&(Vn(y,u,p),sl(y,u,p)),u={cache:Aa()},l.payload=u;return}u=u.return}}function Ic(l,u,p){var y=Tn();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},du(l)?nf(u,p):(p=pc(l,u,p,y),p!==null&&(Vn(p,l,y),sf(p,u,y)))}function ef(l,u,p){var y=Tn();dl(l,u,p,y)}function dl(l,u,p,y){var S={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(du(l))nf(u,S);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var x=u.lastRenderedState,Q=w(x,p);if(S.hasEagerState=!0,S.eagerState=Q,ii(Q,x))return Ra(l,u,S,0),ye===null&&Mr(),!1}catch{}if(p=pc(l,u,S,y),p!==null)return Vn(p,l,y),sf(p,u,y),!0}return!1}function Ma(l,u,p,y){if(y={lane:2,revertLane:ms(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},du(l)){if(u)throw Error(s(479))}else u=pc(l,p,y,2),u!==null&&Vn(u,l,2)}function du(l){var u=l.alternate;return l===de||u!==null&&u===de}function nf(l,u){pe=_e=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function sf(l,u,p){if((p&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,k(l,p)}}function Nc(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:Jd({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}function Co(l,u,p,y,S,w,x){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,w,x):u.prototype&&u.prototype.isPureReactComponent?!ea(p,y)||!ea(S,w):!0}function ns(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&xf.enqueueReplaceState(u,u.state,null)}function qr(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=Jd({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function mu(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function Fr(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function _(l,u,p){return p=na(p),p.tag=3,p.payload={element:null},p.callback=function(){mu(l,u)},p}function R(l){return l=na(l),l.tag=3,l}function I(l,u,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var w=y.value;l.payload=function(){return S(w)},l.callback=function(){Fr(u,p,y)}}var x=p.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){Fr(u,p,y),typeof S!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var Q=y.stack;this.componentDidCatch(y.value,{componentStack:Q!==null?Q:""})})}function P(l,u,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&ln(u,p,S,!0),p=Fs.current,p!==null){switch(p.tag){case 31:case 13:return As===null?zc():p.alternate===null&&zn===0&&(zn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===oo?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),Hc(l,y,S)),!1;case 22:return p.flags|=65536,y===oo?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),Hc(l,y,S)),!1}throw Error(s(435,p.tag))}return Hc(l,y,S),zc(),!1}if(we)return u=Fs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==vm&&(l=Error(s(422),{cause:y}),ir(zt(l,p)))):(y!==vm&&(u=Error(s(423),{cause:y}),ir(zt(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=zt(y,p),S=_(l.stateNode,y,S),gc(l,S),zn!==4&&(zn=2)),!1;var w=Error(s(520),{cause:y});if(w=zt(w,p),Mf===null?Mf=[w]:Mf.push(w),zn!==4&&(zn=2),u===null)return!0;y=zt(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=_(p.stateNode,y,l),gc(p,l),!1;case 1:if(u=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fo===null||!Fo.has(w))))return p.flags|=65536,S&=-S,p.lanes|=S,S=R(S),I(S,l,p,y),gc(p,S),!1}p=p.return}while(p!==null);return!1}function $(l,u,p,y){u.child=l===null?qg(u,null,p,y):Qi(u,l.child,p,y)}function ut(l,u,p,y,S){p=p.render;var w=u.ref;if("ref"in y){var x={};for(var Q in y)Q!=="ref"&&(x[Q]=y[Q])}else x=y;return Ci(u),y=rl(l,u,p,x,w,S),Q=kr(),l!==null&&!_n?(ou(l,u,S),jr(l,u,S)):(we&&Q&&ft(u),u.flags|=1,$(l,u,y,S),u.child)}function Vt(l,u,p,y,S){if(l===null){var w=p.type;return typeof w=="function"&&!vu(w)&&w.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=w,ue(l,u,w,y,S)):(l=Po(p.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(w=l.child,!af(l,S)){var x=w.memoizedProps;if(p=p.compare,p=p!==null?p:ea,p(x,y)&&l.ref===u.ref)return jr(l,u,S)}return u.flags|=1,l=ua(w,y),l.ref=u.ref,l.return=u,u.child=l}function ue(l,u,p,y,S){if(l!==null){var w=l.memoizedProps;if(ea(w,y)&&l.ref===u.ref)if(_n=!1,u.pendingProps=y=w,af(l,S))(l.flags&131072)!==0&&(_n=!0);else return u.lanes=l.lanes,jr(l,u,S)}return Io(l,u,p,y,S)}function Fn(l,u,p,y){var S=y.children,w=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,l!==null){for(y=u.child=l.child,S=0;y!==null;)S=S|y.lanes|y.childLanes,y=y.sibling;y=S&~w}else y=0,u.child=null;return gn(l,u,w,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&On(u,w!==null?w.cachePool:null),w!==null?Ps(u,w):Na(),lr(u);else return y=u.lanes=536870912,gn(l,u,w!==null?w.baseLanes|p:p,p,y)}else w!==null?(On(u,w.cachePool),Ps(u,w),Fi(),u.memoizedState=null):(l!==null&&On(u,null),Na(),Fi());return $(l,u,S,p),u.child}function De(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function gn(l,u,p,y,S){var w=So();return w=w===null?null:{parent:ei?An._currentValue:An._currentValue2,pool:w},u.memoizedState={baseLanes:p,cachePool:w},l!==null&&On(u,null),Na(),lr(u),l!==null&&ln(l,u,y,!0),u.childLanes=S,null}function _s(l,u){return u=ml({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function pr(l,u,p){return Qi(u,l.child,null,p),l=_s(u,u.pendingProps),l.flags|=2,ji(u),u.memoizedState=null,l}function gr(l,u,p){var y=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(we){if(y.mode==="hidden")return l=_s(u,y),u.lanes=536870912,De(null,l);if(ru(u),(l=bn)?(l=Cg(l,Ss),l!==null&&(u.memoizedState={dehydrated:l,treeContext:Fa!==null?{id:Ki,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},p=ig(l),p.return=u,u.child=p,Ti=u,bn=null)):l=null,l===null)throw Ve(u);return u.lanes=536870912,null}return _s(u,y)}var w=l.memoizedState;if(w!==null){var x=w.dehydrated;if(ru(u),S)if(u.flags&256)u.flags&=-257,u=pr(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(s(558));else if(_n||ln(l,u,p,!1),S=(p&l.childLanes)!==0,_n||S){if(y=ye,y!==null&&(x=q(y,p),x!==0&&x!==w.retryLane))throw w.retryLane=x,qi(l,x),Vn(y,l,x),ws;zc(),u=pr(l,u,p)}else l=w.treeContext,Sn&&(bn=Ny(x),Ti=u,we=!0,ro=null,Ss=!1,l!==null&&Ht(u,l)),u=_s(u,y),u.flags|=4096;return u}return l=ua(l.child,{mode:y.mode,children:y.children}),l.ref=u.ref,u.child=l,l.return=u,l}function ks(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function Io(l,u,p,y,S){return Ci(u),p=rl(l,u,p,y,void 0,S),y=kr(),l!==null&&!_n?(ou(l,u,S),jr(l,u,S)):(we&&y&&ft(u),u.flags|=1,$(l,u,p,S),u.child)}function pu(l,u,p,y,S,w){return Ci(u),u.updateQueue=null,p=$n(u,y,p,S),Vs(l),y=kr(),l!==null&&!_n?(ou(l,u,w),jr(l,u,w)):(we&&y&&ft(u),u.flags|=1,$(l,u,p,w),u.child)}function gu(l,u,p,y,S){if(Ci(u),u.stateNode===null){var w=io,x=p.contextType;typeof x=="object"&&x!==null&&(w=en(x)),w=new p(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=xf,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},ci(u),x=p.contextType,w.context=typeof x=="object"&&x!==null?en(x):io,w.state=u.memoizedState,x=p.getDerivedStateFromProps,typeof x=="function"&&(Nc(u,p,x,y),w.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(x=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),x!==w.state&&xf.enqueueReplaceState(w,w.state,null),Vr(u,y,w,S),Ms(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){w=u.stateNode;var Q=u.memoizedProps,dt=qr(p,Q);w.props=dt;var bt=w.context,Pt=p.contextType;x=io,typeof Pt=="object"&&Pt!==null&&(x=en(Pt));var Rt=p.getDerivedStateFromProps;Pt=typeof Rt=="function"||typeof w.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,Pt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Q||bt!==x)&&ns(u,w,y,x),fa=!1;var Gt=u.memoizedState;w.state=Gt,Vr(u,y,w,S),Ms(),bt=u.memoizedState,Q||Gt!==bt||fa?(typeof Rt=="function"&&(Nc(u,p,Rt,y),bt=u.memoizedState),(dt=fa||Co(u,p,dt,y,Gt,bt,x))?(Pt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=bt),w.props=y,w.state=bt,w.context=x,y=dt):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,Ia(l,u),x=u.memoizedProps,Pt=qr(p,x),w.props=Pt,Rt=u.pendingProps,Gt=w.context,bt=p.contextType,dt=io,typeof bt=="object"&&bt!==null&&(dt=en(bt)),Q=p.getDerivedStateFromProps,(bt=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==Rt||Gt!==dt)&&ns(u,w,y,dt),fa=!1,Gt=u.memoizedState,w.state=Gt,Vr(u,y,w,S),Ms();var ce=u.memoizedState;x!==Rt||Gt!==ce||fa||l!==null&&l.dependencies!==null&&Zn(l.dependencies)?(typeof Q=="function"&&(Nc(u,p,Q,y),ce=u.memoizedState),(Pt=fa||Co(u,p,Pt,y,Gt,ce,dt)||l!==null&&l.dependencies!==null&&Zn(l.dependencies))?(bt||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,ce,dt),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,ce,dt)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ce),w.props=y,w.state=ce,w.context=dt,y=Pt):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=1024),y=!1)}return w=y,ks(l,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,l!==null&&y?(u.child=Qi(u,l.child,null,S),u.child=Qi(u,null,p,S)):$(l,u,p,S),u.memoizedState=w.state,l=u.child):l=jr(l,u,S),l}function Y_(l,u,p,y){return cs(),u.flags|=256,$(l,u,p,y),u.child}function Hp(l){return{baseLanes:l,cachePool:sr()}}function qp(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Rs),l}function Fp(l,u,p){var y=u.pendingProps,S=!1,w=(u.flags&128)!==0,x;if((x=w)||(x=l!==null&&l.memoizedState===null?!1:(Kn.current&2)!==0),x&&(S=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,l===null){if(we){if(S?Da(u):Fi(),(l=bn)?(l=My(l,Ss),l!==null&&(u.memoizedState={dehydrated:l,treeContext:Fa!==null?{id:Ki,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},p=ig(l),p.return=u,u.child=p,Ti=u,bn=null)):l=null,l===null)throw Ve(u);return sm(l)?u.lanes=32:u.lanes=536870912,null}var Q=y.children;return y=y.fallback,S?(Fi(),S=u.mode,Q=ml({mode:"hidden",children:Q},S),y=za(y,S,p,null),Q.return=u,y.return=u,Q.sibling=y,u.child=Q,y=u.child,y.memoizedState=Hp(p),y.childLanes=qp(l,x,p),u.memoizedState=ku,De(null,y)):(Da(u),Vd(u,Q))}var dt=l.memoizedState;if(dt!==null&&(Q=dt.dehydrated,Q!==null)){if(w)u.flags&256?(Da(u),u.flags&=-257,u=_u(l,u,p)):u.memoizedState!==null?(Fi(),u.child=l.child,u.flags|=128,u=null):(Fi(),Q=y.fallback,S=u.mode,y=ml({mode:"visible",children:y.children},S),Q=za(Q,S,p,null),Q.flags|=2,y.return=u,Q.return=u,y.sibling=Q,u.child=y,Qi(u,l.child,null,p),y=u.child,y.memoizedState=Hp(p),y.childLanes=qp(l,x,p),u.memoizedState=ku,u=De(null,y));else if(Da(u),sm(Q))x=am(Q).digest,y=Error(s(419)),y.stack="",y.digest=x,ir({value:y,source:null,stack:null}),u=_u(l,u,p);else if(_n||ln(l,u,p,!1),x=(p&l.childLanes)!==0,_n||x){if(x=ye,x!==null&&(y=q(x,p),y!==0&&y!==dt.retryLane))throw dt.retryLane=y,qi(l,y),Vn(x,l,y),ws;Cl(Q)||zc(),u=_u(l,u,p)}else Cl(Q)?(u.flags|=192,u.child=l.child,u=null):(l=dt.treeContext,Sn&&(bn=Dy(Q),Ti=u,we=!0,ro=null,Ss=!1,l!==null&&Ht(u,l)),u=Vd(u,y.children),u.flags|=4096);return u}return S?(Fi(),Q=y.fallback,S=u.mode,dt=l.child,w=dt.sibling,y=ua(dt,{mode:"hidden",children:y.children}),y.subtreeFlags=dt.subtreeFlags&65011712,w!==null?Q=ua(w,Q):(Q=za(Q,S,p,null),Q.flags|=2),Q.return=u,y.return=u,y.sibling=Q,u.child=y,De(null,y),y=u.child,Q=l.child.memoizedState,Q===null?Q=Hp(p):(S=Q.cachePool,S!==null?(dt=ei?An._currentValue:An._currentValue2,S=S.parent!==dt?{parent:dt,pool:dt}:S):S=sr(),Q={baseLanes:Q.baseLanes|p,cachePool:S}),y.memoizedState=Q,y.childLanes=qp(l,x,p),u.memoizedState=ku,De(l.child,y)):(Da(u),p=l.child,l=p.sibling,p=ua(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(x=u.deletions,x===null?(u.deletions=[l],u.flags|=16):x.push(l)),u.child=p,u.memoizedState=null,p)}function Vd(l,u){return u=ml({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function ml(l,u){return l=e(22,l,null,u),l.lanes=0,l}function _u(l,u,p){return Qi(u,l.child,null,p),l=Vd(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Q_(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),Dr(l.return,u,p)}function Dc(l,u,p,y,S,w){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S,treeForkCount:w}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=p,x.tailMode=S,x.treeForkCount=w)}function jp(l,u,p){var y=u.pendingProps,S=y.revealOrder,w=y.tail;y=y.children;var x=Kn.current,Q=(x&2)!==0;if(Q?(x=x&1|2,u.flags|=128):x&=1,D(Kn,x),$(l,u,y,p),y=we?If:0,!Q&&l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Q_(l,p,u);else if(l.tag===19)Q_(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&al(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),Dc(u,!1,S,p,w,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&al(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}Dc(u,!0,p,null,w,y);break;case"together":Dc(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function jr(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),qo|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(ln(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,p=ua(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=ua(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function af(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Zn(l)))}function Kp(l,u,p){switch(u.tag){case 3:ee(u,u.stateNode.containerInfo),es(u,An,l.memoizedState.cache),cs();break;case 27:case 5:Te(u);break;case 4:ee(u,u.stateNode.containerInfo);break;case 10:es(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,ru(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Da(u),u.flags|=128,null):(p&u.child.childLanes)!==0?Fp(l,u,p):(Da(u),l=jr(l,u,p),l!==null?l.sibling:null);Da(u);break;case 19:var S=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(ln(l,u,p,!1),y=(p&u.childLanes)!==0),S){if(y)return jp(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),D(Kn,Kn.current),y)break;return null;case 22:return u.lanes=0,Fn(l,u,p,u.pendingProps);case 24:es(u,An,l.memoizedState.cache)}return jr(l,u,p)}function Yp(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)_n=!0;else{if(!af(l,p)&&(u.flags&128)===0)return _n=!1,Kp(l,u,p);_n=(l.flags&131072)!==0}else _n=!1,we&&(u.flags&1048576)!==0&&F(u,If,u.index);switch(u.lanes=0,u.tag){case 16:t:{var y=u.pendingProps;if(l=Or(u.elementType),u.type=l,typeof l=="function")vu(l)?(y=qr(l,y),u.tag=1,u=gu(null,u,l,y,p)):(u.tag=0,u=Io(null,u,l,y,p));else{if(l!=null){var S=l.$$typeof;if(S===qc){u.tag=11,u=ut(null,u,l,y,p);break t}else if(S===Zd){u.tag=14,u=Vt(null,u,l,y,p);break t}}throw u=b(l)||l,Error(s(306,u,""))}}return u;case 0:return Io(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,S=qr(y,u.pendingProps),gu(l,u,y,S,p);case 3:t:{if(ee(u,u.stateNode.containerInfo),l===null)throw Error(s(387));var w=u.pendingProps;S=u.memoizedState,y=S.element,Ia(l,u),Vr(u,w,null,p);var x=u.memoizedState;if(w=x.cache,es(u,An,w),w!==S.cache&&En(u,[An],p,!0),Ms(),w=x.element,Sn&&S.isDehydrated)if(S={element:w,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Y_(l,u,w,p);break t}else if(w!==y){y=zt(Error(s(424)),u),ir(y),u=Y_(l,u,w,p);break t}else for(Sn&&(bn=Iy(u.stateNode.containerInfo),Ti=u,we=!0,ro=null,Ss=!0),p=qg(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(cs(),w===y){u=jr(l,u,p);break t}$(l,u,w,p)}u=u.child}return u;case 26:if(Ha)return ks(l,u),l===null?(p=Og(u.type,null,u.pendingProps,null))?u.memoizedState=p:we||(u.stateNode=um(u.type,u.pendingProps,Yi.current,u)):u.memoizedState=Og(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(Ei)return Te(u),l===null&&Ei&&we&&(y=u.stateNode=cm(u.type,u.pendingProps,Yi.current,Pi.current,!1),Ti=u,Ss=!0,bn=Rg(u.type,y,bn)),$(l,u,u.pendingProps.children,p),ks(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&we&&(Hy(u.type,u.pendingProps,Pi.current),(S=y=bn)&&(y=xy(y,u.type,u.pendingProps,Ss),y!==null?(u.stateNode=y,Ti=u,bn=Cy(y),Ss=!1,S=!0):S=!1),S||Ve(u)),Te(u),S=u.type,w=u.pendingProps,x=l!==null?l.memoizedProps:null,y=w.children,Ts(S,w)?y=null:x!==null&&Ts(S,x)&&(u.flags|=32),u.memoizedState!==null&&(S=rl(l,u,Ii,null,null,p),ei?Iu._currentValue=S:Iu._currentValue2=S),ks(l,u),$(l,u,y,p),u.child;case 6:return l===null&&we&&(xg(u.pendingProps,Pi.current),(l=p=bn)&&(p=Oy(p,u.pendingProps,Ss),p!==null?(u.stateNode=p,Ti=u,bn=null,l=!0):l=!1),l||Ve(u)),null;case 13:return Fp(l,u,p);case 4:return ee(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Qi(u,null,y,p):$(l,u,y,p),u.child;case 11:return ut(l,u,u.type,u.pendingProps,p);case 7:return $(l,u,u.pendingProps,p),u.child;case 8:return $(l,u,u.pendingProps.children,p),u.child;case 12:return $(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,es(u,u.type,y.value),$(l,u,y.children,p),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,Ci(u),S=en(S),y=y(S),u.flags|=1,$(l,u,y,p),u.child;case 14:return Vt(l,u,u.type,u.pendingProps,p);case 15:return ue(l,u,u.type,u.pendingProps,p);case 19:return jp(l,u,p);case 31:return gr(l,u,p);case 22:return Fn(l,u,p,u.pendingProps);case 24:return Ci(u),y=en(An),l===null?(S=So(),S===null&&(S=ye,w=Aa(),S.pooledCache=w,w.refCount++,w!==null&&(S.pooledCacheLanes|=p),S=w),u.memoizedState={parent:y,cache:S},ci(u),es(u,An,S)):((l.lanes&p)!==0&&(Ia(l,u),Vr(u,null,null,p),Ms()),S=l.memoizedState,w=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),es(u,An,y)):(y=w.cache,es(u,An,y),y!==S.cache&&En(u,[An],p,!0))),$(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function Pa(l){l.flags|=4}function rf(l){ca&&(l.flags|=8)}function X_(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&8218)!==0||(l.subtreeFlags&8218)!==0)return!0;l=l.sibling}return!1}function Qp(l,u,p,y){if(Ne)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)Ef(l,p.stateNode);else if(!(p.tag===4||Ei&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(ca)for(var S=u.child;S!==null;){if(S.tag===5){var w=S.stateNode;p&&y&&(w=by(w,S.type,S.memoizedProps)),Ef(l,w)}else if(S.tag===6)w=S.stateNode,p&&y&&(w=Ag(w,S.memoizedProps)),Ef(l,w);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)w=S.child,w!==null&&(w.return=S),Qp(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function J_(l,u,p,y){var S=!1;if(ca)for(var w=u.child;w!==null;){if(w.tag===5){var x=w.stateNode;p&&y&&(x=by(x,w.type,w.memoizedProps)),Sg(l,x)}else if(w.tag===6)x=w.stateNode,p&&y&&(x=Ag(x,w.memoizedProps)),Sg(l,x);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)S=w.child,S!==null&&(S.return=w),J_(l,w,!0,!0),S=!0;else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return S;w=w.return}w.sibling.return=w.return,w=w.sibling}return S}function W_(l,u){if(ca&&X_(l,u)){l=u.stateNode;var p=l.containerInfo,y=Tg();J_(y,u,!1,!1),l.pendingChildren=y,Pa(u),Sy(p,y)}}function Xp(l,u,p,y){if(Ne)l.memoizedProps!==y&&Pa(u);else if(ca){var S=l.stateNode,w=l.memoizedProps;if((l=X_(l,u))||w!==y){var x=Pi.current;w=Ty(S,p,w,y,!l,null),w===S?u.stateNode=S:(rf(u),Bs(w,p,y,x)&&Pa(u),u.stateNode=w,l&&Qp(w,u,!1,!1))}else u.stateNode=S}}function ys(l,u,p,y,S){if((l.mode&32)!==0&&(p===null?Tf(u,y):Qc(u,p,y))){if(l.flags|=16777216,(S&335544128)===S||cg(u,y))if(kn(l.stateNode,u,y))l.flags|=8192;else if(Ie())l.flags|=8192;else throw bs=oo,Tm}else l.flags&=-16777217}function xc(l,u){if(kg(u)){if(l.flags|=16777216,!Lg(u))if(Ie())l.flags|=8192;else throw bs=oo,Tm}else l.flags&=-16777217}function of(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Z():536870912,l.lanes|=u,ih|=u)}function Oc(l,u){if(!we)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function cn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function Z_(l,u,p){var y=u.pendingProps;switch(At(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(u),null;case 1:return cn(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),fs(An),ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Os(u)?Pa(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,hs())),W_(l,u),cn(u),null;case 26:if(Ha){var S=u.type,w=u.memoizedState;return l===null?(Pa(u),w!==null?(cn(u),xc(u,w)):(cn(u),ys(u,S,null,y,p))):w?w!==l.memoizedState?(Pa(u),cn(u),xc(u,w)):(cn(u),u.flags&=-16777217):(w=l.memoizedProps,Ne?w!==y&&Pa(u):Xp(l,u,S,y),cn(u),ys(u,S,w,y,p)),null}case 27:if(Ei){if(vn(u),p=Yi.current,S=u.type,l!==null&&u.stateNode!=null)Ne?l.memoizedProps!==y&&Pa(u):Xp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}l=Pi.current,Os(u)?Nr(u,l):(l=cm(S,y,p,l,!0),u.stateNode=l,Pa(u))}return cn(u),null}case 5:if(vn(u),S=u.type,l!==null&&u.stateNode!=null)Xp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}if(w=Pi.current,Os(u))Nr(u,w),zy(u.stateNode,S,y,w)&&(u.flags|=64);else{var x=lg(S,y,Yi.current,w,u);rf(u),Qp(x,u,!1,!1),u.stateNode=x,Bs(x,S,y,w)&&Pa(u)}}return cn(u),ys(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)p=l.memoizedProps,Ne?p!==y&&Pa(u):ca&&(p!==y?(l=Yi.current,p=Pi.current,rf(u),u.stateNode=Lo(y,l,p,u)):u.stateNode=l.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(l=Yi.current,p=Pi.current,Os(u)){if(!Sn)throw Error(s(176));if(l=u.stateNode,p=u.memoizedProps,y=null,S=Ti,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}P2(l,p,u,y)||Ve(u,!0)}else rf(u),u.stateNode=Lo(y,l,p,u)}return cn(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(y=Os(u),p!==null){if(l===null){if(!y)throw Error(s(318));if(!Sn)throw Error(s(556));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));Ig(l,u)}else cs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),l=!1}else p=hs(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(ji(u),u):(ji(u),null);if((u.flags&128)!==0)throw Error(s(558))}return cn(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=Os(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!Sn)throw Error(s(344));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));Vy(S,u)}else cs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),S=!1}else S=hs(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(ji(u),u):(ji(u),null)}return ji(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool),w=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==S&&(y.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),of(u,u.updateQueue),cn(u),null);case 4:return ae(),W_(l,u),l===null&&nn(u.stateNode.containerInfo),cn(u),null;case 10:return fs(u.type),cn(u),null;case 19:if(N(Kn),y=u.memoizedState,y===null)return cn(u),null;if(S=(u.flags&128)!==0,w=y.rendering,w===null)if(S)Oc(y,!1);else{if(zn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(w=al(l),w!==null){for(u.flags|=128,Oc(y,!1),l=w.updateQueue,u.updateQueue=l,of(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)Yd(p,l),p=p.sibling;return D(Kn,Kn.current&1|2),we&&Qt(u,y.treeForkCount),u.child}l=l.sibling}y.tail!==null&&ss()>Ul&&(u.flags|=128,S=!0,Oc(y,!1),u.lanes=4194304)}else{if(!S)if(l=al(w),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,of(u,l),Oc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!we)return cn(u),null}else 2*ss()-y.renderingStartTime>Ul&&p!==536870912&&(u.flags|=128,S=!0,Oc(y,!1),u.lanes=4194304);y.isBackwards?(w.sibling=u.child,u.child=w):(l=y.last,l!==null?l.sibling=w:u.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=ss(),l.sibling=null,p=Kn.current,D(Kn,S?p&1|2:p&1),we&&Qt(u,y.treeForkCount),l):(cn(u),null);case 22:case 23:return ji(u),qn(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(cn(u),u.subtreeFlags&6&&(u.flags|=8192)):cn(u),p=u.updateQueue,p!==null&&of(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&N(Dl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),fs(An),cn(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function Jp(l,u){switch(At(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return fs(An),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return vn(u),null;case 31:if(u.memoizedState!==null){if(ji(u),u.alternate===null)throw Error(s(340));cs()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ji(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));cs()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return N(Kn),null;case 4:return ae(),null;case 10:return fs(u.type),null;case 22:case 23:return ji(u),qn(),l!==null&&N(Dl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return fs(An),null;case 25:return null;default:return null}}function $_(l,u){switch(At(u),u.tag){case 3:fs(An),ae();break;case 26:case 27:case 5:vn(u);break;case 4:ae();break;case 31:u.memoizedState!==null&&ji(u);break;case 13:ji(u);break;case 19:N(Kn);break;case 10:fs(u.type);break;case 22:case 23:ji(u),qn(),l!==null&&N(Dl);break;case 24:fs(An)}}function Kr(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&l)===l){y=void 0;var w=p.create,x=p.inst;y=w(),x.destroy=y}p=p.next}while(p!==S)}}catch(Q){re(u,u.return,Q)}}function Yr(l,u,p){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var w=S.next;y=w;do{if((y.tag&l)===l){var x=y.inst,Q=x.destroy;if(Q!==void 0){x.destroy=void 0,S=u;var dt=p,bt=Q;try{bt()}catch(Pt){re(S,dt,Pt)}}}y=y.next}while(y!==w)}}catch(Pt){re(u,u.return,Pt)}}function Mc(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{ia(u,p)}catch(y){re(l,l.return,y)}}}function kd(l,u,p){p.props=qr(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){re(l,u,y)}}function Pc(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=jc(l.stateNode);break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(S){re(l,u,S)}}function is(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){re(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){re(l,u,S)}else p.current=null}function yu(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{dy(y,u,p,l)}catch(S){re(l,l.return,S)}}function lf(l,u,p){try{my(l.stateNode,l.type,p,u,l)}catch(y){re(l,l.return,y)}}function Wp(l){return l.tag===5||l.tag===3||(Ha?l.tag===26:!1)||(Ei?l.tag===27&&Nu(l.type):!1)||l.tag===4}function No(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Wp(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(Ei&&l.tag===27&&Nu(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ld(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?gy(p,l,u):_g(p,l);else if(y!==4&&(Ei&&y===27&&Nu(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(Ld(l,u,p),l=l.sibling;l!==null;)Ld(l,u,p),l=l.sibling}function uf(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?py(p,l,u):gg(p,l);else if(y!==4&&(Ei&&y===27&&Nu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(uf(l,u,p),l=l.sibling;l!==null;)uf(l,u,p),l=l.sibling}function Zp(l,u,p){l=l.containerInfo;try{bg(l,p)}catch(y){re(u,u.return,y)}}function ty(l){var u=l.stateNode,p=l.memoizedProps;try{fi(l.type,p,u,l)}catch(y){re(l,l.return,y)}}function D2(l,u){for($d(l.containerInfo),si=u;si!==null;)if(l=si,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,si=u;else for(;si!==null;){l=si;var p=l.alternate;switch(u=l.flags,l.tag){case 0:if((u&4)!==0&&(u=l.updateQueue,u=u!==null?u.events:null,u!==null))for(var y=0;y<u.length;y++){var S=u[y];S.ref.impl=S.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0,y=l,S=p.memoizedProps,p=p.memoizedState;var w=y.stateNode;try{var x=qr(y.type,S);u=w.getSnapshotBeforeUpdate(x,p),w.__reactInternalSnapshotBeforeUpdate=u}catch(Q){re(y,y.return,Q)}}break;case 3:(u&1024)!==0&&Ne&&Eg(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=l.sibling,u!==null){u.return=l.return,si=u;break}si=l.return}}function ey(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:vs(l,p),y&4&&Kr(5,p);break;case 1:if(vs(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(x){re(p,p.return,x)}else{var S=qr(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(x){re(p,p.return,x)}}y&64&&Mc(p),y&512&&Pc(p,p.return);break;case 3:if(vs(l,p),y&64&&(y=p.updateQueue,y!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=jc(p.child.stateNode);break;case 1:l=p.child.stateNode}try{ia(y,l)}catch(x){re(p,p.return,x)}}break;case 27:Ei&&u===null&&y&4&&ty(p);case 26:case 5:if(vs(l,p),u===null){if(y&4)yu(p);else if(y&64){l=p.type,u=p.memoizedProps,S=p.stateNode;try{Ly(S,l,u,p)}catch(x){re(p,p.return,x)}}}y&512&&Pc(p,p.return);break;case 12:vs(l,p);break;case 31:vs(l,p),y&4&&ka(l,p);break;case 13:vs(l,p),y&4&&hf(l,p),y&64&&(y=p.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(p=x2.bind(null,p),rm(y,p))));break;case 22:if(y=p.memoizedState!==null||Yn,!y){u=u!==null&&u.memoizedState!==null||Qn,S=Yn;var w=Qn;Yn=y,(Qn=u)&&!w?Ua(l,p,(p.subtreeFlags&8772)!==0):vs(l,p),Yn=S,Qn=w}break;case 30:break;default:vs(l,p)}}function $p(l){var u=l.alternate;u!==null&&(l.alternate=null,$p(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&tm(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Va(l,u,p){for(p=p.child;p!==null;)cf(l,u,p),p=p.sibling}function cf(l,u,p){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(Ou,p)}catch{}switch(p.tag){case 26:if(Ha){Qn||is(p,u),Va(l,u,p),p.memoizedState?Il(p.memoizedState):p.stateNode&&Vg(p.stateNode);break}case 27:if(Ei){Qn||is(p,u);var y=Un,S=ai;Nu(p.type)&&(Un=p.stateNode,ai=!1),Va(l,u,p),Mi(p.stateNode),Un=y,ai=S;break}case 5:Qn||is(p,u);case 6:if(Ne){if(y=Un,S=ai,Un=null,Va(l,u,p),Un=y,ai=S,Un!==null)if(ai)try{yg(Un,p.stateNode)}catch(w){re(p,u,w)}else try{_y(Un,p.stateNode)}catch(w){re(p,u,w)}}else Va(l,u,p);break;case 18:Ne&&Un!==null&&(ai?om(Un,p.stateNode):Dg(Un,p.stateNode));break;case 4:Ne?(y=Un,S=ai,Un=p.stateNode.containerInfo,ai=!0,Va(l,u,p),Un=y,ai=S):(ca&&Zp(p.stateNode,p,Tg()),Va(l,u,p));break;case 0:case 11:case 14:case 15:Yr(2,p,u),Qn||Yr(4,p,u),Va(l,u,p);break;case 1:Qn||(is(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&kd(p,u,y)),Va(l,u,p);break;case 21:Va(l,u,p);break;case 22:Qn=(y=Qn)||p.memoizedState!==null,Va(l,u,p),Qn=y;break;default:Va(l,u,p)}}function ka(l,u){if(Sn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{V2(l)}catch(p){re(u,u.return,p)}}}function hf(l,u){if(Sn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{k2(l)}catch(p){re(u,u.return,p)}}function La(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new jg),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new jg),u;default:throw Error(s(435,l.tag))}}function Do(l,u){var p=La(l);u.forEach(function(y){if(!p.has(y)){p.add(y);var S=O2.bind(null,l,y);y.then(S,S)}})}function xi(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],w=l,x=u;if(Ne){var Q=x;t:for(;Q!==null;){switch(Q.tag){case 27:if(Ei){if(Nu(Q.type)){Un=Q.stateNode,ai=!1;break t}break}case 5:Un=Q.stateNode,ai=!1;break t;case 3:case 4:Un=Q.stateNode.containerInfo,ai=!0;break t}Q=Q.return}if(Un===null)throw Error(s(160));cf(w,x,S),Un=null,ai=!1}else cf(w,x,S);w=S.alternate,w!==null&&(w.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)ff(u,l),u=u.sibling}function ff(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:xi(u,l),Oi(l),y&4&&(Yr(3,l,l.return),Kr(3,l),Yr(5,l,l.return));break;case 1:xi(u,l),Oi(l),y&512&&(Qn||p===null||is(p,p.return)),y&64&&Yn&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(Ha){var S=Ze;if(xi(u,l),Oi(l),y&512&&(Qn||p===null||is(p,p.return)),y&4){y=p!==null?p.memoizedState:null;var w=l.memoizedState;p===null?w===null?l.stateNode===null?l.stateNode=qy(S,l.type,l.memoizedProps,l):Pg(S,l.type,l.stateNode):l.stateNode=Mg(S,w,l.memoizedProps):y!==w?(y===null?p.stateNode!==null&&Vg(p.stateNode):Il(y),w===null?Pg(S,l.type,l.stateNode):Mg(S,w,l.memoizedProps)):w===null&&l.stateNode!==null&&lf(l,l.memoizedProps,p.memoizedProps)}break}case 27:if(Ei){xi(u,l),Oi(l),y&512&&(Qn||p===null||is(p,p.return)),p!==null&&y&4&&lf(l,l.memoizedProps,p.memoizedProps);break}case 5:if(xi(u,l),Oi(l),y&512&&(Qn||p===null||is(p,p.return)),Ne){if(l.flags&32){S=l.stateNode;try{vg(S)}catch(Rt){re(l,l.return,Rt)}}y&4&&l.stateNode!=null&&(S=l.memoizedProps,lf(l,S,p!==null?p.memoizedProps:S)),y&1024&&(Zc=!0)}else ca&&l.alternate!==null&&(l.alternate.stateNode=l.stateNode);break;case 6:if(xi(u,l),Oi(l),y&4&&Ne){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,p=p!==null?p.memoizedProps:y,S=l.stateNode;try{fy(S,p,y)}catch(Rt){re(l,l.return,Rt)}}break;case 3:if(Ha?(Fy(),S=Ze,Ze=Af(u.containerInfo),xi(u,l),Ze=S):xi(u,l),Oi(l),y&4){if(Ne&&Sn&&p!==null&&p.memoizedState.isDehydrated)try{Uy(u.containerInfo)}catch(Rt){re(l,l.return,Rt)}if(ca){y=u.containerInfo,p=u.pendingChildren;try{bg(y,p)}catch(Rt){re(l,l.return,Rt)}}}Zc&&(Zc=!1,Ud(l));break;case 4:Ha?(p=Ze,Ze=Af(l.stateNode.containerInfo),xi(u,l),Oi(l),Ze=p):(xi(u,l),Oi(l)),y&4&&ca&&Zp(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:xi(u,l),Oi(l);break;case 31:xi(u,l),Oi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Do(l,y)));break;case 13:xi(u,l),Oi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Pf=ss()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Do(l,y)));break;case 22:S=l.memoizedState!==null;var x=p!==null&&p.memoizedState!==null,Q=Yn,dt=Qn;if(Yn=Q||S,Qn=dt||x,xi(u,l),Qn=dt,Yn=Q,Oi(l),y&8192&&(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(p===null||x||Yn||Qn||pl(l)),Ne)){t:if(p=null,Ne)for(u=l;;){if(u.tag===5||Ha&&u.tag===26){if(p===null){x=p=u;try{w=x.stateNode,S?M2(w):vy(x.stateNode,x.memoizedProps)}catch(Rt){re(x,x.return,Rt)}}}else if(u.tag===6){if(p===null){x=u;try{var bt=x.stateNode;S?yy(bt):Ey(bt,x.memoizedProps)}catch(Rt){re(x,x.return,Rt)}}}else if(u.tag===18){if(p===null){x=u;try{var Pt=x.stateNode;S?By(Pt):Gy(x.stateNode)}catch(Rt){re(x,x.return,Rt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Do(l,p))));break;case 19:xi(u,l),Oi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Do(l,y)));break;case 30:break;case 21:break;default:xi(u,l),Oi(l)}}function Oi(l){var u=l.flags;if(u&2){try{for(var p,y=l.return;y!==null;){if(Wp(y)){p=y;break}y=y.return}if(Ne){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(Ei){var S=p.stateNode,w=No(l);uf(l,w,S);break}case 5:var x=p.stateNode;p.flags&32&&(vg(x),p.flags&=-33);var Q=No(l);uf(l,Q,x);break;case 3:case 4:var dt=p.stateNode.containerInfo,bt=No(l);Ld(l,bt,dt);break;default:throw Error(s(161))}}}catch(Pt){re(l,l.return,Pt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Ud(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Ud(u),u.tag===5&&u.flags&1024&&fg(u.stateNode),l=l.sibling}}function vs(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ey(l,u.alternate,u),u=u.sibling}function pl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Yr(4,u,u.return),pl(u);break;case 1:is(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&kd(u,u.return,p),pl(u);break;case 27:Ei&&Mi(u.stateNode);case 26:case 5:is(u,u.return),pl(u);break;case 22:u.memoizedState===null&&pl(u);break;case 30:pl(u);break;default:pl(u)}l=l.sibling}}function Ua(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,w=u,x=w.flags;switch(w.tag){case 0:case 11:case 15:Ua(S,w,p),Kr(4,w);break;case 1:if(Ua(S,w,p),y=w,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(bt){re(y,y.return,bt)}if(y=w,S=y.updateQueue,S!==null){var Q=y.stateNode;try{var dt=S.shared.hiddenCallbacks;if(dt!==null)for(S.shared.hiddenCallbacks=null,S=0;S<dt.length;S++)or(dt[S],Q)}catch(bt){re(y,y.return,bt)}}p&&x&64&&Mc(w),Pc(w,w.return);break;case 27:Ei&&ty(w);case 26:case 5:Ua(S,w,p),p&&y===null&&x&4&&yu(w),Pc(w,w.return);break;case 12:Ua(S,w,p);break;case 31:Ua(S,w,p),p&&x&4&&ka(S,w);break;case 13:Ua(S,w,p),p&&x&4&&hf(S,w);break;case 22:w.memoizedState===null&&Ua(S,w,p),Pc(w,w.return);break;case 30:break;default:Ua(S,w,p)}u=u.sibling}}function gl(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&ds(p))}function tg(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ds(l))}function Pn(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)zd(l,u,p,y),u=u.sibling}function zd(l,u,p,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:Pn(l,u,p,y),S&2048&&Kr(9,u);break;case 1:Pn(l,u,p,y);break;case 3:Pn(l,u,p,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ds(l)));break;case 12:if(S&2048){Pn(l,u,p,y),l=u.stateNode;try{var w=u.memoizedProps,x=w.id,Q=w.onPostCommit;typeof Q=="function"&&Q(x,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(dt){re(u,u.return,dt)}}else Pn(l,u,p,y);break;case 31:Pn(l,u,p,y);break;case 13:Pn(l,u,p,y);break;case 23:break;case 22:w=u.stateNode,x=u.alternate,u.memoizedState!==null?w._visibility&2?Pn(l,u,p,y):Vc(l,u):w._visibility&2?Pn(l,u,p,y):(w._visibility|=2,Ls(l,u,p,y,(u.subtreeFlags&10256)!==0||!1)),S&2048&&gl(x,u);break;case 24:Pn(l,u,p,y),S&2048&&tg(u.alternate,u);break;default:Pn(l,u,p,y)}}function Ls(l,u,p,y,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=l,x=u,Q=p,dt=y,bt=x.flags;switch(x.tag){case 0:case 11:case 15:Ls(w,x,Q,dt,S),Kr(8,x);break;case 23:break;case 22:var Pt=x.stateNode;x.memoizedState!==null?Pt._visibility&2?Ls(w,x,Q,dt,S):Vc(w,x):(Pt._visibility|=2,Ls(w,x,Q,dt,S)),S&&bt&2048&&gl(x.alternate,x);break;case 24:Ls(w,x,Q,dt,S),S&&bt&2048&&tg(x.alternate,x);break;default:Ls(w,x,Q,dt,S)}u=u.sibling}}function Vc(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,S=y.flags;switch(y.tag){case 22:Vc(p,y),S&2048&&gl(y.alternate,y);break;case 24:Vc(p,y),S&2048&&tg(y.alternate,y);break;default:Vc(p,y)}u=u.sibling}}function Qr(l,u,p){if(l.subtreeFlags&ma)for(l=l.child;l!==null;)_l(l,u,p),l=l.sibling}function _l(l,u,p){switch(l.tag){case 26:if(Qr(l,u,p),l.flags&ma)if(l.memoizedState!==null)jy(p,Ze,l.memoizedState,l.memoizedProps);else{var y=l.stateNode,S=l.type;l=l.memoizedProps,((u&335544128)===u||cg(S,l))&&em(p,y,S,l)}break;case 5:Qr(l,u,p),l.flags&ma&&(y=l.stateNode,S=l.type,l=l.memoizedProps,((u&335544128)===u||cg(S,l))&&em(p,y,S,l));break;case 3:case 4:Ha?(y=Ze,Ze=Af(l.stateNode.containerInfo),Qr(l,u,p),Ze=y):Qr(l,u,p);break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=ma,ma=16777216,Qr(l,u,p),ma=y):Qr(l,u,p));break;default:Qr(l,u,p)}}function Bd(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function kc(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];si=y,oa(y,l)}Bd(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Gd(l),l=l.sibling}function Gd(l){switch(l.tag){case 0:case 11:case 15:kc(l),l.flags&2048&&Yr(9,l,l.return);break;case 3:kc(l);break;case 12:kc(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,df(l)):kc(l);break;default:kc(l)}}function df(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];si=y,oa(y,l)}Bd(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Yr(8,u,u.return),df(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,df(u));break;default:df(u)}l=l.sibling}}function oa(l,u){for(;si!==null;){var p=si;switch(p.tag){case 0:case 11:case 15:Yr(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:ds(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,si=y;else t:for(p=l;si!==null;){y=si;var S=y.sibling,w=y.return;if($p(y),y===p){si=null;break t}if(S!==null){S.return=w,si=S;break t}si=w}}}function yl(l){var u=fe(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(l=ni(l),l===null)throw Error(s(362));return l.stateNode.current}function vl(l,u){var p=l.tag;switch(u.$$typeof){case Ja:if(l.type===u.value)return!0;break;case th:t:{for(u=u.value,l=[l,0],p=0;p<l.length;){var y=l[p++],S=y.tag,w=l[p++],x=u[w];if(S!==5&&S!==26&&S!==27||!Rl(y)){for(;x!=null&&vl(y,x);)w++,x=u[w];if(w===u.length){u=!0;break t}else for(y=y.child;y!==null;)l.push(y,w),y=y.sibling}}u=!1}return u;case eh:if((p===5||p===26||p===27)&&pg(l.stateNode,u.value))return!0;break;case Pl:if((p===5||p===6||p===26||p===27)&&(l=Sf(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Of:if((p===5||p===26||p===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Lc(l){switch(l.$$typeof){case Ja:return"<"+(b(l.value)||"Unknown")+">";case th:return":has("+(Lc(l)||"")+")";case eh:return'[role="'+l.value+'"]';case Pl:return'"'+l.value+'"';case Of:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function Uc(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var S=l[y++],w=S.tag,x=l[y++],Q=u[x];if(w!==5&&w!==26&&w!==27||!Rl(S)){for(;Q!=null&&vl(S,Q);)x++,Q=u[x];if(x===u.length)p.push(S);else for(S=S.child;S!==null;)l.push(S,x),S=S.sibling}}return p}function Us(l,u){if(!vi)throw Error(s(363));l=yl(l),l=Uc(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++],S=y.tag;if(S===5||S===26||S===27)Rl(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}function Tn(){return(Se&2)!==0&&Re!==0?Re&-Re:Zt.T!==null?ms():Yc()}function xo(){if(Rs===0)if((Re&536870912)===0||we){var l=xu;xu<<=1,(xu&3932160)===0&&(xu=262144),Rs=l}else Rs=536870912;return l=Fs.current,l!==null&&(l.flags|=32),Rs}function Vn(l,u,p){(l===ye&&($e===2||$e===9)||l.cancelPendingCommit!==null)&&(jn(l,0),Jr(l,Re,Rs,!1)),lt(l,p),((Se&2)===0||l!==ye)&&(l===ye&&((Se&2)===0&&(Ll|=p),zn===4&&Jr(l,Re,Rs,!1)),yt(l))}function _r(l,u,p){if((Se&6)!==0)throw Error(s(327));var y=!p&&(u&127)===0&&(u&l.expiredLanes)===0||j(l,u),S=y?sy(l,u):Wr(l,u,!0),w=y;do{if(S===0){Vl&&!y&&Jr(l,u,0,!1);break}else{if(p=l.current.alternate,w&&!ny(p)){S=Wr(l,u,!1),w=!1;continue}if(S===2){if(w=u,l.errorRecoveryDisabledLanes&w)var x=0;else x=l.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;t:{var Q=l;S=Mf;var dt=Sn&&Q.current.memoizedState.isDehydrated;if(dt&&(jn(Q,x).flags|=256),x=Wr(Q,x,!1),x!==2){if(kl&&!dt){Q.errorRecoveryDisabledLanes|=w,Ll|=w,S=4;break t}w=js,js=S,w!==null&&(js===null?js=w:js.push.apply(js,w))}S=x}if(w=!1,S!==2)continue}}if(S===1){jn(l,0),Jr(l,u,0,!0);break}t:{switch(y=l,w=S,w){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Jr(y,u,Rs,!Tr);break t;case 2:js=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(S=Pf+300-ss(),10<S)){if(Jr(y,u,Rs,!Tr),G(y,0,!0)!==0)break t;ho=u,y.timeoutHandle=ug(Xr.bind(null,y,p,js,Vf,bm,u,Rs,Ll,ih,Tr,w,"Throttled",-0,0),S);break t}Xr(y,p,js,Vf,bm,u,Rs,Ll,ih,Tr,w,null,-0,0)}}break}while(!0);yt(l)}function Xr(l,u,p,y,S,w,x,Q,dt,bt,Pt,Rt,Gt,ce){if(l.timeoutHandle=Gs,Rt=u.subtreeFlags,Rt&8192||(Rt&16785408)===16785408){Rt=hg(),_l(u,w,Rt);var ki=(w&62914560)===w?Pf-ss():(w&4194048)===w?Uu-ss():0;if(ki=hy(Rt,ki),ki!==null){ho=w,l.cancelPendingCommit=ki($r.bind(null,l,u,w,p,y,S,x,Q,dt,Pt,Rt,null,Gt,ce)),Jr(l,w,x,!bt);return}}$r(l,u,w,p,y,S,x,Q,dt)}function ny(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],w=S.getSnapshot;S=S.value;try{if(!ii(w(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Jr(l,u,p,y){u&=~nh,u&=~Ll,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var w=31-Hs(S),x=1<<w;y[w]=-1,S&=~x}p!==0&&M(l,p,u)}function Hd(){return(Se&6)===0?(Ot(0),!1):!0}function qd(){if(be!==null){if($e===0)var l=be.return;else l=be,vr=fn=null,je(l),xl=null,Mu=0,l=be;for(;l!==null;)$_(l.alternate,l),l=l.return;be=null}}function jn(l,u){var p=l.timeoutHandle;p!==Gs&&(l.timeoutHandle=Gs,cy(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),ho=0,qd(),ye=l,be=p=ua(l.current,null),Re=u,$e=0,di=null,Tr=!1,Vl=j(l,u),kl=!1,ih=Rs=nh=Ll=qo=zn=0,js=Mf=null,bm=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-Hs(y),w=1<<S;u|=l[S],y&=~w}return co=u,Mr(),p}function hn(l,u){de=null,Zt.H=da,u===bi||u===Qa?(u=ar(),$e=3):u===Tm?(u=ar(),$e=4):$e=u===ws?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,di=u,be===null&&(zn=1,mu(l,zt(u,l.current)))}function Ie(){var l=Fs.current;return l===null?!0:(Re&4194048)===Re?As===null:(Re&62914560)===Re||(Re&536870912)!==0?l===As:!1}function Oo(){var l=Zt.H;return Zt.H=da,l===null?da:l}function la(){var l=Zt.A;return Zt.A=$c,l}function zc(){zn=4,Tr||(Re&4194048)!==Re&&Fs.current!==null||(Vl=!0),(qo&134217727)===0&&(Ll&134217727)===0||ye===null||Jr(ye,Re,Rs,!1)}function Wr(l,u,p){var y=Se;Se|=2;var S=Oo(),w=la();(ye!==l||Re!==u)&&(Vf=null,jn(l,u)),u=!1;var x=zn;t:do try{if($e!==0&&be!==null){var Q=be,dt=di;switch($e){case 8:qd(),x=6;break t;case 3:case 2:case 9:case 6:Fs.current===null&&(u=!0);var bt=$e;if($e=0,di=null,Zr(l,Q,dt,bt),p&&Vl){x=0;break t}break;default:bt=$e,$e=0,di=null,Zr(l,Q,dt,bt)}}iy(),x=zn;break}catch(Pt){hn(l,Pt)}while(!0);return u&&l.shellSuspendCounter++,vr=fn=null,Se=y,Zt.H=S,Zt.A=w,be===null&&(ye=null,Re=0,Mr()),x}function iy(){for(;be!==null;)El(be)}function sy(l,u){var p=Se;Se|=2;var y=Oo(),S=la();ye!==l||Re!==u?(Vf=null,Ul=ss()+500,jn(l,u)):Vl=j(l,u);t:do try{if($e!==0&&be!==null){u=be;var w=di;e:switch($e){case 1:$e=0,di=null,Zr(l,u,w,1);break;case 2:case 9:if(wa(w)){$e=0,di=null,Fd(u);break}u=function(){$e!==2&&$e!==9||ye!==l||($e=7),yt(l)},w.then(u,u);break t;case 3:$e=7;break t;case 4:$e=5;break t;case 7:wa(w)?($e=0,di=null,Fd(u)):($e=0,di=null,Zr(l,u,w,7));break;case 5:var x=null;switch(be.tag){case 26:x=be.memoizedState;case 5:case 27:var Q=be,dt=Q.type,bt=Q.pendingProps;if(x?Lg(x):kn(Q.stateNode,dt,bt)){$e=0,di=null;var Pt=Q.sibling;if(Pt!==null)be=Pt;else{var Rt=Q.return;Rt!==null?(be=Rt,Gc(Rt)):be=null}break e}}$e=0,di=null,Zr(l,u,w,5);break;case 6:$e=0,di=null,Zr(l,u,w,6);break;case 8:qd(),zn=6;break t;default:throw Error(s(462))}}Bc();break}catch(Gt){hn(l,Gt)}while(!0);return vr=fn=null,Zt.H=y,Zt.A=S,Se=p,be!==null?0:(ye=null,Re=0,Mr(),zn)}function Bc(){for(;be!==null&&!Yy();)El(be)}function El(l){var u=Yp(l.alternate,l,co);l.memoizedProps=l.pendingProps,u===null?Gc(l):be=u}function Fd(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=pu(p,u,u.pendingProps,u.type,void 0,Re);break;case 11:u=pu(p,u,u.pendingProps,u.type.render,u.ref,Re);break;case 5:je(u);default:$_(p,u),u=be=Yd(u,co),u=Yp(p,u,co)}l.memoizedProps=l.pendingProps,u===null?Gc(l):be=u}function Zr(l,u,p,y){vr=fn=null,je(u),xl=null,Mu=0;var S=u.return;try{if(P(l,S,u,p,Re)){zn=1,mu(l,zt(p,l.current)),be=null;return}}catch(w){if(S!==null)throw be=S,w;zn=1,mu(l,zt(p,l.current)),be=null;return}u.flags&32768?(we||y===1?l=!0:Vl||(Re&536870912)!==0?l=!1:(Tr=l=!0,(y===2||y===9||y===3||y===6)&&(y=Fs.current,y!==null&&y.tag===13&&(y.flags|=16384))),Tl(u,l)):Gc(u)}function Gc(l){var u=l;do{if((u.flags&32768)!==0){Tl(u,Tr);return}l=u.return;var p=Z_(u.alternate,u,co);if(p!==null){be=p;return}if(u=u.sibling,u!==null){be=u;return}be=u=l}while(u!==null);zn===0&&(zn=5)}function Tl(l,u){do{var p=Jp(l.alternate,l);if(p!==null){p.flags&=32767,be=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){be=l;return}be=l=p}while(l!==null);zn=6,be=null}function $r(l,u,p,y,S,w,x,Q,dt){l.cancelPendingCommit=null;do eo();while(mi!==0);if((Se&6)!==0)throw Error(s(327));if(u!==null){if(u===l.current)throw Error(s(177));if(w=u.lanes|u.childLanes,w|=Pu,V(l,p,w,x,Q,dt),l===ye&&(be=ye=null,Re=0),zu=u,jo=l,ho=p,sh=w,Am=S,Kg=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,hi(Rf,function(){return mf(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=Zt.T,Zt.T=null,S=Ga(),Ae(2),x=Se,Se|=4;try{D2(l,u,p)}finally{Se=x,Ae(S),Zt.T=y}}mi=1,Mo(),to(),jd()}}function Mo(){if(mi===1){mi=0;var l=jo,u=zu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=Zt.T,Zt.T=null;var y=Ga();Ae(2);var S=Se;Se|=4;try{ff(u,l),uy(l.containerInfo)}finally{Se=S,Ae(y),Zt.T=p}}l.current=u,mi=2}}function to(){if(mi===2){mi=0;var l=jo,u=zu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=Zt.T,Zt.T=null;var y=Ga();Ae(2);var S=Se;Se|=4;try{ey(l,u.alternate,u)}finally{Se=S,Ae(y),Zt.T=p}}mi=3}}function jd(){if(mi===4||mi===3){mi=0,zg();var l=jo,u=zu,p=ho,y=Kg;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?mi=5:(mi=0,zu=jo=null,Kd(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(Fo=null),K(p),u=u.stateNode,qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(Ou,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=Zt.T,S=Ga(),Ae(2),Zt.T=null;try{for(var w=l.onRecoverableError,x=0;x<y.length;x++){var Q=y[x];w(Q.value,{componentStack:Q.stack})}}finally{Zt.T=u,Ae(S)}}(ho&3)!==0&&eo(),yt(l),S=l.pendingLanes,(p&261930)!==0&&(S&42)!==0?l===kf?He++:(He=0,kf=l):He=0,Sn&&bf(),Ot(0)}}function Kd(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,ds(u)))}function eo(){return Mo(),to(),jd(),mf()}function mf(){if(mi!==5)return!1;var l=jo,u=sh;sh=0;var p=K(ho),y=32>p?32:p;p=Zt.T;var S=Ga();try{Ae(y),Zt.T=null,y=Am,Am=null;var w=jo,x=ho;if(mi=0,zu=jo=null,ho=0,(Se&6)!==0)throw Error(s(331));var Q=Se;if(Se|=4,Gd(w.current),zd(w,w.current,x,y),Se=Q,Ot(0,!1),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(Ou,w)}catch{}return!0}finally{Ae(S),Zt.T=p,Kd(l,u)}}function Sl(l,u,p){u=zt(p,u),u=_(l.stateNode,u,2),l=Pr(l,u,2),l!==null&&(lt(l,2),yt(l))}function re(l,u,p){if(l.tag===3)Sl(l,l,p);else for(;u!==null;){if(u.tag===3){Sl(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Fo===null||!Fo.has(y))){l=zt(p,l),p=R(2),y=Pr(u,p,2),y!==null&&(I(p,y,u,l),lt(y,2),yt(y));break}}u=u.return}}function Hc(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new pa;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(p)||(kl=!0,S.add(p),l=ay.bind(null,l,u,p),u.then(l,l))}function ay(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,ye===l&&(Re&p)===p&&(zn===4||zn===3&&(Re&62914560)===Re&&300>ss()-Pf?(Se&2)===0&&jn(l,0):nh|=p,ih===Re&&(ih=0)),yt(l)}function ry(l,u){u===0&&(u=Z()),l=qi(l,u),l!==null&&(lt(l,u),yt(l))}function x2(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),ry(l,p)}function O2(l,u){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),ry(l,p)}function hi(l,u){return wf(l,u)}function eg(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ua(l,u){var p=l.alternate;return p===null?(p=e(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Yd(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Po(l,u,p,y,S,w){var x=0;if(y=l,typeof l=="function")vu(l)&&(x=1);else if(typeof l=="string")x=Ha&&Ei?lm(l,p,Pi.current)?26:Ug(l)?27:5:Ha?lm(l,p,Pi.current)?26:5:Ei&&Ug(l)?27:5;else t:switch(l){case yf:return l=e(31,p,u,S),l.elementType=yf,l.lanes=w,l;case bu:return za(p.children,S,w,u);case Au:x=8,S|=24;break;case wu:return l=e(12,p,u,S|2),l.elementType=wu,l.lanes=w,l;case Wd:return l=e(13,p,u,S),l.elementType=Wd,l.lanes=w,l;case Vo:return l=e(19,p,u,S),l.elementType=Vo,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Ba:x=10;break t;case _f:x=9;break t;case qc:x=11;break t;case Zd:x=14;break t;case Es:x=16,y=null;break t}x=29,p=Error(s(130,l===null?"null":typeof l,"")),y=null}return u=e(x,p,u,S),u.elementType=l,u.type=y,u.lanes=w,u}function za(l,u,p,y){return l=e(7,l,y,u),l.lanes=p,l}function ng(l,u,p){return l=e(6,l,null,u),l.lanes=p,l}function ig(l){var u=e(18,null,null,0);return u.stateNode=l,u}function sg(l,u,p){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function oy(l,u,p,y,S,w,x,Q,dt){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Gs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.hiddenUpdates=gt(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=w,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=dt,this.incompleteTransitions=new Map}function bl(l,u,p,y,S,w,x,Q,dt,bt,Pt,Rt){return l=new oy(l,u,p,x,dt,bt,Pt,Rt,Q),u=1,w===!0&&(u|=24),w=e(3,null,null,u),l.current=w,w.stateNode=l,u=Aa(),u.refCount++,l.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:u},ci(w),l}function Qd(l){return l?(l=io,l):io}function pf(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=f(u),l=l!==null?m(l):null,l===null?null:jc(l.stateNode)}function ag(l,u,p,y,S,w){S=Qd(S),y.context===null?y.context=S:y.pendingContext=S,y=na(u),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Pr(l,y,u),p!==null&&(Vn(p,l,u),sl(p,l,u))}function Eu(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function gf(l,u){Eu(l,u),(l=l.alternate)&&Eu(l,u)}var ge={},Xd=Ov(),zs=aS(),Jd=Object.assign,Tu=Symbol.for("react.element"),no=Symbol.for("react.transitional.element"),Su=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),Au=Symbol.for("react.strict_mode"),wu=Symbol.for("react.profiler"),_f=Symbol.for("react.consumer"),Ba=Symbol.for("react.context"),qc=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),Vo=Symbol.for("react.suspense_list"),Zd=Symbol.for("react.memo"),Es=Symbol.for("react.lazy"),yf=Symbol.for("react.activity"),rg=Symbol.for("react.memo_cache_sentinel"),ko=Symbol.iterator,Al=Symbol.for("react.client.reference"),wl=Array.isArray,Zt=Xd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,og=t.rendererVersion,vf=t.rendererPackageName,Fc=t.extraDevToolsConfig,jc=t.getPublicInstance,ly=t.getRootHostContext,Kc=t.getChildHostContext,$d=t.prepareForCommit,uy=t.resetAfterCommit,lg=t.createInstance;t.cloneMutableInstance;var Ef=t.appendInitialChild,Bs=t.finalizeInitialChildren,Ts=t.shouldSetTextContent,Lo=t.createTextInstance;t.cloneMutableTextInstance;var ug=t.scheduleTimeout,cy=t.cancelTimeout,Gs=t.noTimeout,ei=t.isPrimaryRenderer;t.warnsIfNotActing;var Ne=t.supportsMutation,ca=t.supportsPersistence,Sn=t.supportsHydration,fe=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var nn=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ae=t.setCurrentUpdatePriority,Ga=t.getCurrentUpdatePriority,Yc=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var Ru=t.shouldAttemptEagerTransition,tm=t.detachDeletedInstance;t.requestPostPaintCallback;var Tf=t.maySuspendCommit,Qc=t.maySuspendCommitOnUpdate,cg=t.maySuspendCommitInSyncRender,kn=t.preloadInstance,hg=t.startSuspendingCommit,em=t.suspendInstance;t.suspendOnActiveViewTransition;var hy=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var Cu=t.NotPendingTransition,Iu=t.HostTransitionContext,fg=t.resetFormInstance;t.bindToConsole;var dg=t.supportsMicrotasks,mg=t.scheduleMicrotask,vi=t.supportsTestSelectors,ni=t.findFiberRoot,nm=t.getBoundingRect,Sf=t.getTextContent,Rl=t.isHiddenSubtree,pg=t.matchAccessibilityRole,Uo=t.setFocusIfFocusable,im=t.setupIntersectionObserver,gg=t.appendChild,_g=t.appendChildToContainer,fy=t.commitTextUpdate,dy=t.commitMount,my=t.commitUpdate,py=t.insertBefore,gy=t.insertInContainerBefore,_y=t.removeChild,yg=t.removeChildFromContainer,vg=t.resetTextContent,M2=t.hideInstance,yy=t.hideTextInstance,vy=t.unhideInstance,Ey=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Eg=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var Ty=t.cloneInstance,Tg=t.createContainerChildSet,Sg=t.appendChildToContainerChildSet,Sy=t.finalizeContainerChildren,bg=t.replaceContainerChildren,by=t.cloneHiddenInstance,Ag=t.cloneHiddenTextInstance,Cl=t.isSuspenseInstancePending,sm=t.isSuspenseInstanceFallback,am=t.getSuspenseInstanceFallbackErrorDetails,rm=t.registerSuspenseInstanceRetry,Ay=t.canHydrateFormStateMarker,wg=t.isFormStateMarkerMatching,wy=t.getNextHydratableSibling,Ry=t.getNextHydratableSiblingAfterSingleton,Cy=t.getFirstHydratableChild,Iy=t.getFirstHydratableChildWithinContainer,Ny=t.getFirstHydratableChildWithinActivityInstance,Dy=t.getFirstHydratableChildWithinSuspenseInstance,Rg=t.getFirstHydratableChildWithinSingleton,xy=t.canHydrateInstance,Oy=t.canHydrateTextInstance,Cg=t.canHydrateActivityInstance,My=t.canHydrateSuspenseInstance,Py=t.hydrateInstance,P2=t.hydrateTextInstance,Ig=t.hydrateActivityInstance,Vy=t.hydrateSuspenseInstance,ky=t.getNextHydratableInstanceAfterActivityInstance,Ng=t.getNextHydratableInstanceAfterSuspenseInstance,Ly=t.commitHydratedInstance,Uy=t.commitHydratedContainer,V2=t.commitHydratedActivityInstance,k2=t.commitHydratedSuspenseInstance,zy=t.finalizeHydratedChildren,bf=t.flushHydrationEvents;t.clearActivityBoundary;var Dg=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var om=t.clearSuspenseBoundaryFromContainer,By=t.hideDehydratedBoundary,Gy=t.unhideDehydratedBoundary,Xc=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Hy=t.validateHydratableInstance,xg=t.validateHydratableTextInstance,Ha=t.supportsResources,lm=t.isHostHoistableType,Af=t.getHoistableRoot,Og=t.getResource,Mg=t.acquireResource,Il=t.releaseResource,qy=t.hydrateHoistable,Pg=t.mountHoistable,Vg=t.unmountHoistable,um=t.createHoistableInstance,Fy=t.prepareToCommitHoistables,kg=t.mayResourceSuspendCommit,Lg=t.preloadResource,jy=t.suspendResource,Ei=t.supportsSingletons,cm=t.resolveSingletonInstance,fi=t.acquireSingletonInstance,Mi=t.releaseSingletonInstance,Ug=t.isHostSingletonType,Nu=t.isSingletonScope,hm=[],Du=-1,io={},Hs=Math.clz32?Math.clz32:L,fm=Math.log,Ky=Math.LN2,dm=256,xu=262144,Jc=4194304,wf=zs.unstable_scheduleCallback,mm=zs.unstable_cancelCallback,Yy=zs.unstable_shouldYield,zg=zs.unstable_requestPaint,ss=zs.unstable_now,pm=zs.unstable_ImmediatePriority,Qy=zs.unstable_UserBlockingPriority,Rf=zs.unstable_NormalPriority,gm=zs.unstable_IdlePriority,Bg=zs.log,Xy=zs.unstable_setDisableYieldValue,Ou=null,qs=null,ii=typeof Object.is=="function"?Object.is:Ft,_m=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},L2=Object.prototype.hasOwnProperty,ym,so,Cf=!1,Gg=new WeakMap,zo=[],ao=0,sn=null,If=0,qa=[],ha=0,Fa=null,Ki=1,yr="",Pi=A(null),Bo=A(null),Yi=A(null),Nf=A(null),Ti=null,bn=null,we=!1,ro=null,Ss=!1,vm=Error(s(519)),ja=A(null),fn=null,vr=null,Jy=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},Vi=zs.unstable_scheduleCallback,U2=zs.unstable_NormalPriority,An={$$typeof:Ba,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Df=null,We=null,as=!1,Ka=!1,Em=!1,Nl=0,Wc=null,Hg=0,Go=0,Si=null,Ya=Zt.S;Zt.S=function(l,u){Uu=ss(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&el(l,u),Ya!==null&&Ya(l,u)};var Dl=A(null),bi=Error(s(460)),Tm=Error(s(474)),Qa=Error(s(542)),oo={then:function(){}},bs=null,xl=null,Mu=0,Qi=mc(!0),qg=mc(!1),Xi=[],lo=0,Pu=0,fa=!1,Sm=!1,Vu=A(null),Ol=A(0),Fs=A(null),As=null,Kn=A(0),Ho=0,de=null,Jt=null,oe=null,_e=!1,pe=!1,xe=!1,rs=0,Xa=0,Er=null,Fg=0,da={readContext:en,use:bo,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};da.useEffectEvent=un;var Ln={readContext:en,use:bo,useCallback:function(l,u){return ti().memoizedState=[l,u===void 0?null:u],l},useContext:en,useEffect:ul,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,Br(4194308,4,Ro.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Br(4194308,4,l,u)},useInsertionEffect:function(l,u){Br(4,2,l,u)},useMemo:function(l,u){var p=ti();u=u===void 0?null:u;var y=l();if(xe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=ti();if(p!==void 0){var S=p(u);if(xe){z(!0);try{p(u)}finally{z(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=Ic.bind(null,de,l),[y.memoizedState,l]},useRef:function(l){var u=ti();return l={current:l},u.memoizedState=l},useState:function(l){l=zr(l);var u=l.queue,p=ef.bind(null,de,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:Hr,useDeferredValue:function(l,u){var p=ti();return cl(p,l,u)},useTransition:function(){var l=zr(!1);return l=hl.bind(null,de,l.queue,!0,!1),ti().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=de,S=ti();if(we){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),ye===null)throw Error(s(349));(Re&127)!==0||Zh(y,u,p)}S.memoizedState=p;var w={value:p,getSnapshot:u};return S.queue=w,ul(Tc.bind(null,y,w,l),[l]),y.flags|=2048,gs(9,{destroy:void 0},Ec.bind(null,y,w,p,u),null),p},useId:function(){var l=ti(),u=ye.identifierPrefix;if(we){var p=yr,y=Ki;p=(y&~(1<<32-Hs(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=rs++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Fg++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Rc,useFormState:wo,useActionState:wo,useOptimistic:function(l){var u=ti();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Ma.bind(null,de,!0,p),p.dispatch=u,[l,u]},useMemoCache:yc,useCacheRefresh:function(){return ti().memoizedState=Pd.bind(null,de)},useEffectEvent:function(l){var u=ti(),p={impl:l};return u.memoizedState=p,function(){if((Se&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},uo={readContext:en,use:bo,useCallback:fu,useContext:en,useEffect:hr,useImperativeHandle:Ac,useInsertionEffect:Gr,useLayoutEffect:dr,useMemo:mr,useReducer:ur,useRef:bc,useState:function(){return ur(sa)},useDebugValue:Hr,useDeferredValue:function(l,u){var p=Ke();return wc(p,Jt.memoizedState,l,u)},useTransition:function(){var l=ur(sa)[0],u=Ke().memoizedState;return[typeof l=="boolean"?l:Ni(l),u]},useSyncExternalStore:ps,useId:fl,useHostTransitionStatus:Rc,useFormState:Oa,useActionState:Oa,useOptimistic:function(l,u){var p=Ke();return uu(p,Jt,l,u)},useMemoCache:yc,useCacheRefresh:Cc};uo.useEffectEvent=Di;var Ml={readContext:en,use:bo,useCallback:fu,useContext:en,useEffect:hr,useImperativeHandle:Ac,useInsertionEffect:Gr,useLayoutEffect:dr,useMemo:mr,useReducer:Ur,useRef:bc,useState:function(){return Ur(sa)},useDebugValue:Hr,useDeferredValue:function(l,u){var p=Ke();return Jt===null?cl(p,l,u):wc(p,Jt.memoizedState,l,u)},useTransition:function(){var l=Ur(sa)[0],u=Ke().memoizedState;return[typeof l=="boolean"?l:Ni(l),u]},useSyncExternalStore:ps,useId:fl,useHostTransitionStatus:Rc,useFormState:Je,useActionState:Je,useOptimistic:function(l,u){var p=Ke();return Jt!==null?uu(p,Jt,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:yc,useCacheRefresh:Cc};Ml.useEffectEvent=Di;var xf={enqueueSetState:function(l,u,p){l=l._reactInternals;var y=Tn(),S=na(y);S.payload=u,p!=null&&(S.callback=p),u=Pr(l,S,y),u!==null&&(Vn(u,l,y),sl(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=Tn(),S=na(y);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=Pr(l,S,y),u!==null&&(Vn(u,l,y),sl(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=Tn(),y=na(p);y.tag=2,u!=null&&(y.callback=u),u=Pr(l,y,p),u!==null&&(Vn(u,l,p),sl(u,l,p))}},ws=Error(s(461)),_n=!1,ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Yn=!1,Qn=!1,Zc=!1,jg=typeof WeakSet=="function"?WeakSet:Set,si=null,Un=null,ai=!1,Ze=null,ma=8192,$c={getCacheForType:function(l){var u=en(An),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return en(An).controller.signal}},Ja=0,th=1,eh=2,Of=3,Pl=4;if(typeof Symbol=="function"&&Symbol.for){var Lu=Symbol.for;Ja=Lu("selector.component"),th=Lu("selector.has_pseudo_class"),eh=Lu("selector.role"),Of=Lu("selector.test_id"),Pl=Lu("selector.text")}var pa=typeof WeakMap=="function"?WeakMap:Map,Se=0,ye=null,be=null,Re=0,$e=0,di=null,Tr=!1,Vl=!1,kl=!1,co=0,zn=0,qo=0,Ll=0,nh=0,Rs=0,ih=0,Mf=null,js=null,bm=!1,Pf=0,Uu=0,Ul=1/0,Vf=null,Fo=null,mi=0,jo=null,zu=null,ho=0,sh=0,Am=null,Kg=null,He=0,kf=null;return ge.attemptContinuousHydration=function(l){if(l.tag===13||l.tag===31){var u=qi(l,67108864);u!==null&&Vn(u,l,67108864),gf(l,67108864)}},ge.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13||l.tag===31){var u=Tn();u=H(u);var p=qi(l,u);p!==null&&Vn(p,l,u),gf(l,u)}},ge.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=U(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var p=1<<31-Hs(u);l.entanglements[1]|=p,u&=~p}yt(l),(Se&6)===0&&(Ul=ss()+500,Ot(0))}}break;case 31:case 13:u=qi(l,2),u!==null&&Vn(u,l,2),Hd(),gf(l,2)}},ge.batchedUpdates=function(l,u){return l(u)},ge.createComponentSelector=function(l){return{$$typeof:Ja,value:l}},ge.createContainer=function(l,u,p,y,S,w,x,Q,dt,bt){return bl(l,u,!1,null,p,y,w,null,x,Q,dt,bt)},ge.createHasPseudoClassSelector=function(l){return{$$typeof:th,value:l}},ge.createHydrationContainer=function(l,u,p,y,S,w,x,Q,dt,bt,Pt,Rt,Gt,ce){return l=bl(p,y,!0,l,S,w,Q,ce,dt,bt,Pt,Rt),l.context=Qd(null),p=l.current,y=Tn(),y=H(y),S=na(y),S.callback=u??null,Pr(p,S,y),u=y,l.current.lanes=u,lt(l,u),yt(l),l},ge.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Su,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},ge.createRoleSelector=function(l){return{$$typeof:eh,value:l}},ge.createTestNameSelector=function(l){return{$$typeof:Of,value:l}},ge.createTextSelector=function(l){return{$$typeof:Pl,value:l}},ge.defaultOnCaughtError=function(l){console.error(l)},ge.defaultOnRecoverableError=function(l){_m(l)},ge.defaultOnUncaughtError=function(l){_m(l)},ge.deferredUpdates=function(l){var u=Zt.T,p=Ga();try{return Ae(32),Zt.T=null,l()}finally{Ae(p),Zt.T=u}},ge.discreteUpdates=function(l,u,p,y,S){var w=Zt.T,x=Ga();try{return Ae(2),Zt.T=null,l(u,p,y,S)}finally{Ae(x),Zt.T=w,Se===0&&(Ul=ss()+500)}},ge.findAllNodes=Us,ge.findBoundingRects=function(l,u){if(!vi)throw Error(s(363));u=Us(l,u),l=[];for(var p=0;p<u.length;p++)l.push(nm(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,S=y+p.width,w=p.y,x=w+p.height,Q=u-1;0<=Q;Q--)if(u!==Q){var dt=l[Q],bt=dt.x,Pt=bt+dt.width,Rt=dt.y,Gt=Rt+dt.height;if(y>=bt&&w>=Rt&&S<=Pt&&x<=Gt){l.splice(u,1);break}else if(y!==bt||p.width!==dt.width||Gt<w||Rt>x){if(!(w!==Rt||p.height!==dt.height||Pt<y||bt>S)){bt>y&&(dt.width+=bt-y,dt.x=y),Pt<S&&(dt.width=S-bt),l.splice(u,1);break}}else{Rt>w&&(dt.height+=Rt-w,dt.y=w),Gt<x&&(dt.height=x-Rt),l.splice(u,1);break}}}return l},ge.findHostInstance=pf,ge.findHostInstanceWithNoPortals=function(l){return l=f(l),l=l!==null?g(l):null,l===null?null:jc(l.stateNode)},ge.findHostInstanceWithWarning=function(l){return pf(l)},ge.flushPassiveEffects=eo,ge.flushSyncFromReconciler=function(l){var u=Se;Se|=1;var p=Zt.T,y=Ga();try{if(Ae(2),Zt.T=null,l)return l()}finally{Ae(y),Zt.T=p,Se=u,(Se&6)===0&&Ot(0)}},ge.flushSyncWork=Hd,ge.focusWithin=function(l,u){if(!vi)throw Error(s(363));for(l=yl(l),u=Uc(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++],y=p.tag;if(!Rl(p)){if((y===5||y===26||y===27)&&Uo(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},ge.getFindAllNodesFailureDescription=function(l,u){if(!vi)throw Error(s(363));var p=0,y=[];l=[yl(l),0];for(var S=0;S<l.length;){var w=l[S++],x=w.tag,Q=l[S++],dt=u[Q];if((x!==5&&x!==26&&x!==27||!Rl(w))&&(vl(w,dt)&&(y.push(Lc(dt)),Q++,Q>p&&(p=Q)),Q<u.length))for(w=w.child;w!==null;)l.push(w,Q),w=w.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(Lc(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},ge.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return jc(l.child.stateNode);default:return l.child.stateNode}},ge.injectIntoDevTools=function(){var l={bundleType:0,version:og,rendererPackageName:vf,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(Fc!==null&&(l.rendererConfig=Fc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Ou=u.inject(l),qs=u}catch{}l=!!u.checkDCE}}return l},ge.isAlreadyRendering=function(){return(Se&6)!==0},ge.observeVisibleRects=function(l,u,p,y){if(!vi)throw Error(s(363));l=Us(l,u);var S=im(l,p,y).disconnect;return{disconnect:function(){S()}}},ge.shouldError=function(){return null},ge.shouldSuspend=function(){return!1},ge.startHostTransition=function(l,u,p,y){if(l.tag!==5)throw Error(s(476));var S=tf(l).queue;hl(l,S,u,Cu,p===null?i:function(){var w=tf(l);return w.next===null&&(w=l.alternate.memoizedState),dl(l,w.next.queue,{},Tn()),p(y)})},ge.updateContainer=function(l,u,p,y){var S=u.current,w=Tn();return ag(S,w,l,u,p,y),w},ge.updateContainerSync=function(l,u,p,y){return ag(u.current,2,l,u,p,y),2},ge},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(SE)),SE.exports}var zA;function WD(){return zA||(zA=1,TE.exports=JD()),TE.exports}var ZD=WD();const $D=V6(ZD);var bE={exports:{}},Gu={};var BA;function tx(){return BA||(BA=1,Gu.ConcurrentRoot=1,Gu.ContinuousEventPriority=8,Gu.DefaultEventPriority=32,Gu.DiscreteEventPriority=2,Gu.IdleEventPriority=268435456,Gu.LegacyRoot=0,Gu.NoEventPriority=0),Gu}var GA;function ex(){return GA||(GA=1,bE.exports=tx()),bE.exports}var kv=ex();const HA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let qA=!1,FA=!1;const Z1=".react-konva-event",nx=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,ix=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,sx={};function Lv(n,t,e=sx){if(!qA&&"zIndex"in t&&(console.warn(ix),qA=!0),!FA&&t.draggable){var i=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;i&&!s&&(console.warn(nx),FA=!0)}for(var o in e)if(!HA[o]){var c=o.slice(0,2)==="on",f=e[o]!==t[o];if(c&&f){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),n.off(m,e[o])}var g=!t.hasOwnProperty(o);g&&n.setAttr(o,void 0)}var E=t._useStrictMode,b={},A=!1;const N={};for(var o in t)if(!HA[o]){var c=o.slice(0,2)==="on",D=e[o]!==t[o];if(c&&D){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[o]&&(N[m]=t[o])}!c&&(t[o]!==e[o]||E&&t[o]!==n.getAttr(o))&&(A=!0,b[o]=t[o])}A&&(n.setAttrs(b),qh(n));for(var m in N)n.off(m+Z1),n.on(m+Z1,N[m])}function qh(n){if(!kt.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var AE=aS();const mw={},ax={};np.Node.prototype._applyProps=Lv;let pw=kv.DefaultEventPriority;function rx(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),qh(n)}function ox(n,t,e){let i=np[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=np.Group);const s={},o={};for(var c in t)if(c!=="ref"){var f=c.slice(0,2)==="on";f?o[c]=t[c]:s[c]=t[c]}const m=new i(s);return Lv(m,o),m}function lx(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function ux(n,t,e){return!1}function cx(n){return n}function hx(){return null}function fx(){return null}function dx(n,t,e,i){return ax}function mx(){}function px(n){}function gx(n,t){return!1}function _x(){return mw}function yx(){return mw}const vx=setTimeout,Ex=clearTimeout,Tx=!0,Sx=n=>{n()},bx=-1;function Ax(n,t){return!1}const wx=!1,Rx=!1,Cx=!0,Ix=!1,Nx=!1;function Dx(n,t){t.parent===n?t.moveToTop():n.add(t),qh(n)}function xx(n,t){t.parent===n?t.moveToTop():n.add(t),qh(n)}function gw(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),qh(n)}function Ox(n,t,e){gw(n,t,e)}function Mx(n,t){t.destroy(),t.off(Z1),qh(n)}function Px(n,t){t.destroy(),t.off(Z1),qh(n)}function Vx(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function kx(n,t,e){}function Lx(n,t,e,i){Lv(n,i,e)}function Ux(n){n.hide(),qh(n)}function zx(n){}function Bx(n,t){(t.visible==null||t.visible)&&n.show()}function Gx(n,t){}function Hx(n){}function qx(){}function Fx(){return null}function jx(){}function Kx(){}function Yx(){return kv.DefaultEventPriority}function Qx(){}function Xx(){return null}function Jx(n){pw=n}function Wx(){return pw}function Zx(){return kv.DiscreteEventPriority}function $x(){return!1}function tO(){}function eO(){return null}function nO(){return-1.1}function iO(){}function sO(){return!1}function aO(){return!0}function rO(){}function oO(){}function lO(){return null}const uO=null,cO=Ji.createContext(null);function hO(){}const fO=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:cO,NotPendingTransition:uO,afterActiveInstanceBlur:Kx,appendChild:Dx,appendChildToContainer:xx,appendInitialChild:rx,beforeActiveInstanceBlur:jx,cancelTimeout:Ex,clearContainer:Hx,commitMount:kx,commitTextUpdate:Vx,commitUpdate:Lx,createInstance:ox,createTextInstance:lx,detachDeletedInstance:qx,finalizeInitialChildren:ux,getChildHostContext:yx,getCurrentEventPriority:Yx,getCurrentUpdatePriority:Wx,getInstanceFromNode:Fx,getInstanceFromScope:Xx,getPublicInstance:cx,getRootHostContext:_x,hideInstance:Ux,hideTextInstance:zx,idlePriority:AE.unstable_IdlePriority,insertBefore:gw,insertInContainerBefore:Ox,isPrimaryRenderer:wx,maySuspendCommit:sO,noTimeout:bx,now:AE.unstable_now,preloadInstance:aO,prepareForCommit:hx,preparePortalMount:fx,prepareScopeUpdate:Qx,prepareUpdate:dx,removeChild:Mx,removeChildFromContainer:Px,requestPostPaintCallback:iO,resetAfterCommit:mx,resetFormInstance:hO,resetTextContent:px,resolveEventTimeStamp:nO,resolveEventType:eO,resolveUpdatePriority:Zx,run:AE.unstable_runWithPriority,scheduleMicrotask:Sx,scheduleTimeout:vx,setCurrentUpdatePriority:Jx,shouldAttemptEagerTransition:$x,shouldDeprioritizeSubtree:gx,shouldSetTextContent:Ax,startSuspendingCommit:rO,supportsHydration:Nx,supportsMicrotasks:Tx,supportsMutation:Cx,supportsPersistence:Ix,suspendInstance:oO,trackSchedulerEvent:tO,unhideInstance:Bx,unhideTextInstance:Gx,waitForCommitToBeReady:lO,warnsIfNotActing:Rx},Symbol.toStringTag,{value:"Module"}));function _w(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=_w(i,t,e);if(s)return s;i=i.sibling}}function yw(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const fS=yw(he.createContext(null));class vw extends he.Component{render(){return he.createElement(fS.Provider,{value:this._reactInternals},this.props.children)}}function dO(){const n=he.useContext(fS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=he.useId();return he.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=_w(e,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[n,t])}const mO=Symbol.for("react.context"),pO=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===mO;function gO(){const n=dO(),[t]=he.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;pO(i)&&i!==fS&&!t.has(i)&&t.set(i,he.use(yw(i))),e=e.return}return t}function _O(){const n=gO();return he.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>he.createElement(t,null,he.createElement(e.Provider,{...i,value:n.get(e)})),t=>he.createElement(vw,{...t})),[n])}if(Ji.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function yO(n){const t=Ji.useRef({});return Ji.useLayoutEffect(()=>{t.current=n}),Ji.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const vO=()=>{const n=Ji.useRef(0);return Ji.useMemo(()=>{n.current++},[]),n.current>1},EO=n=>{const t=Ji.useRef(null),e=Ji.useRef(null),i=Ji.useRef(null),s=yO(n),o=_O(),c=Ji.useRef(null),f=E=>{const{forwardedRef:b}=n;b&&(typeof b=="function"?b(E):b.current=E)},m=vO(),g=()=>{f(null),u0.updateContainer(null,i.current,null),e.current?.destroy(),e.current=null};return Ji.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),e.current?f(e.current):(e.current=new np.Stage({width:n.width,height:n.height,container:t.current}),f(e.current),i.current=u0.createContainer(e.current,kv.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),u0.updateContainer(Ji.createElement(o,{},n.children),i.current,null,()=>{})),()=>{m?c.current=setTimeout(g,0):g()}),[]),Ji.useLayoutEffect(()=>{f(e.current),Lv(e.current,n,s),u0.flushSyncFromReconciler(()=>{u0.updateContainer(Ji.createElement(o,{},n.children),i.current,null)})}),Ji.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},TO="Layer",SO="Group",bO="Rect",wE="Circle",AO="Line",pT="Image",jA="Text",u0=$D(fO),wO=Ji.forwardRef((n,t)=>Ji.createElement(vw,{},Ji.createElement(EO,{...n,forwardedRef:t})));const Ew=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const RO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const CO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const KA=n=>{const t=CO(n);return t.charAt(0).toUpperCase()+t.slice(1)};var IO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const NO=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const DO=he.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...f},m)=>he.createElement("svg",{ref:m,...IO,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:Ew("lucide",s),...!o&&!NO(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,E])=>he.createElement(g,E)),...Array.isArray(o)?o:[o]]));const Fh=(n,t)=>{const e=he.forwardRef(({className:i,...s},o)=>he.createElement(DO,{ref:o,iconNode:t,className:Ew(`lucide-${RO(KA(n))}`,`lucide-${n}`,i),...s}));return e.displayName=KA(n),e};const xO=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],OO=Fh("eraser",xO);const MO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],YA=Fh("folder-open",MO);const PO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],VO=Fh("plus",PO);const kO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],QA=Fh("save",kO);const LO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],RE=Fh("trash-2",LO);const UO=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],zO=Fh("undo",UO);const BO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],XA=Fh("user-plus",BO);const GO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],JA=Fh("x",GO),HO=()=>{};var WA={};const Tw=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},qO=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[e++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[e++],c=n[e++],f=n[e++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return t.join("")},Sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,E=o>>2,b=(o&3)<<4|f>>4;let A=(f&15)<<2|g>>6,N=g&63;m||(N=64,c||(A=64)),i.push(e[E],e[b],e[A],e[N])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Tw(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):qO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=e[n.charAt(s++)],f=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const b=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||f==null||g==null||b==null)throw new FO;const A=o<<2|f>>4;if(i.push(A),g!==64){const N=f<<4&240|g>>2;if(i.push(N),b!==64){const D=g<<6&192|b;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class FO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jO=function(n){const t=Tw(n);return Sw.encodeByteArray(t,!0)},$1=function(n){return jO(n).replace(/\./g,"")},dS=function(n){try{return Sw.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tv(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!KO(e)||(n[e]=tv(n[e],t[e]));return n}function KO(n){return n!=="__proto__"}function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const YO=()=>mS().__FIREBASE_DEFAULTS__,QO=()=>{if(typeof process>"u"||typeof WA>"u")return;const n=WA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&dS(n[1]);return t&&JSON.parse(t)},pS=()=>{try{return HO()||YO()||QO()||XO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gS=()=>pS()?.config,JO=n=>pS()?.[`_${n}`];class WO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function iu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Uv(n){return(await fetch(n,{credentials:"include"})).ok}function bw(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$1(JSON.stringify(e)),$1(JSON.stringify(c)),""].join(".")}const L0={};function ZO(){const n={prod:[],emulator:[]};for(const t of Object.keys(L0))L0[t]?n.emulator.push(t):n.prod.push(t);return n}function $O(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let ZA=!1;function zv(n,t){if(typeof window>"u"||typeof document>"u"||!iu(window.location.host)||L0[n]===t||L0[n]||ZA)return;L0[n]=t;function e(A){return`__firebase__banner__${A}`}const i="__firebase__banner",o=ZO().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,N){A.setAttribute("width","24"),A.setAttribute("id",N),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{ZA=!0,c()},A}function E(A,N){A.setAttribute("id",N),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=$O(i),N=e("text"),D=document.getElementById(N)||document.createElement("span"),L=e("learnmore"),U=document.getElementById(L)||document.createElement("a"),G=e("preprendIcon"),j=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;f(X),E(U,L);const Z=g();m(j,G),X.append(j,D,U,Z),document.body.appendChild(X)}o?(D.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function ri(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ri())}function Bv(){const n=pS()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eM(){return typeof window<"u"||Aw()}function Aw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function nM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ww(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rw(){const n=ri();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Cw(){return!Bv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Iw(){return!Bv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function id(){try{return typeof indexedDB=="object"}catch{return!1}}function iM(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}function sM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const aM="FirebaseError";class Gi extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=aM,Object.setPrototypeOf(this,Gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],c=o?rM(o,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Gi(s,f,i)}}function rM(n,t){return n.replace(oM,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const oM=/\{\$([^}]+)}/g;function $A(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function lM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Nh(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const o=n[s],c=t[s];if(t3(o)&&t3(c)){if(!Nh(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function t3(n){return n!==null&&typeof n=="object"}function Ip(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function jm(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function R0(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function Nw(n,t){const e=new uM(n,t);return e.subscribe.bind(e)}class uM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");cM(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=CE),s.error===void 0&&(s.error=CE),s.complete===void 0&&(s.complete=CE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cM(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function CE(){}function jt(n){return n&&n._delegate?n._delegate:n}class Hi{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const zf="[DEFAULT]";class hM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new WO;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dM(t))try{this.getOrInitializeService({instanceIdentifier:zf})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=zf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zf){return this.instances.has(t)}getOptions(t=zf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);i===f&&c.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=zf){return this.component?this.component.multipleInstances?t:zf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fM(n){return n===zf?void 0:n}function dM(n){return n.instantiationMode==="EAGER"}class Dw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new hM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const yS=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const xw={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},mM=Me.INFO,pM={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},gM=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=pM[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gv{constructor(t){this.name=t,this._logLevel=mM,this._logHandler=gM,this._userLogHandler=null,yS.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...t),this._logHandler(this,Me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...t),this._logHandler(this,Me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...t),this._logHandler(this,Me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...t),this._logHandler(this,Me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...t),this._logHandler(this,Me.ERROR,...t)}}function _M(n){yS.forEach(t=>{t.setLogLevel(n)})}function yM(n,t){for(const e of yS){let i=null;t&&t.level&&(i=xw[t.level]),n===null?e.userLogHandler=null:e.userLogHandler=(s,o,...c)=>{const f=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");o>=(i??s.logLevel)&&n({level:Me[o].toLowerCase(),message:f,args:c,type:s.name})}}}const vM=(n,t)=>t.some(e=>n instanceof e);let e3,n3;function EM(){return e3||(e3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TM(){return n3||(n3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,gT=new WeakMap,Mw=new WeakMap,IE=new WeakMap,vS=new WeakMap;function SM(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Xu(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Ow.set(e,n)}).catch(()=>{}),vS.set(t,n),t}function bM(n){if(gT.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});gT.set(n,t)}let _T={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return gT.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Mw.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Xu(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function AM(n){_T=n(_T)}function wM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(NE(this),t,...e);return Mw.set(i,t.sort?t.sort():[t]),Xu(i)}:TM().includes(n)?function(...t){return n.apply(NE(this),t),Xu(Ow.get(this))}:function(...t){return Xu(n.apply(NE(this),t))}}function RM(n){return typeof n=="function"?wM(n):(n instanceof IDBTransaction&&bM(n),vM(n,EM())?new Proxy(n,_T):n)}function Xu(n){if(n instanceof IDBRequest)return SM(n);if(IE.has(n))return IE.get(n);const t=RM(n);return t!==n&&(IE.set(n,t),vS.set(t,n)),t}const NE=n=>vS.get(n);function Np(n,t,{blocked:e,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(n,t),f=Xu(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Xu(c.result),m.oldVersion,m.newVersion,Xu(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}function Km(n,{blocked:t}={}){const e=indexedDB.deleteDatabase(n);return t&&e.addEventListener("blocked",i=>t(i.oldVersion,i)),Xu(e).then(()=>{})}const CM=["get","getKey","getAll","getAllKeys","count"],IM=["put","add","delete","clear"],DE=new Map;function i3(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(DE.get(t))return DE.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=IM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||CM.includes(e)))return;const o=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),s&&m.done]))[0]};return DE.set(t,o),o}AM(n=>({...n,get:(t,e,i)=>i3(t,e)||n.get(t,e,i),has:(t,e)=>!!i3(t,e)||n.has(t,e)}));class NM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(DM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function DM(n){return n.getComponent()?.type==="VERSION"}const ev="@firebase/app",yT="0.14.8";const Zu=new Gv("@firebase/app"),xM="@firebase/app-compat",OM="@firebase/analytics-compat",MM="@firebase/analytics",PM="@firebase/app-check-compat",VM="@firebase/app-check",kM="@firebase/auth",LM="@firebase/auth-compat",UM="@firebase/database",zM="@firebase/data-connect",BM="@firebase/database-compat",GM="@firebase/functions",HM="@firebase/functions-compat",qM="@firebase/installations",FM="@firebase/installations-compat",jM="@firebase/messaging",KM="@firebase/messaging-compat",YM="@firebase/performance",QM="@firebase/performance-compat",XM="@firebase/remote-config",JM="@firebase/remote-config-compat",WM="@firebase/storage",ZM="@firebase/storage-compat",$M="@firebase/firestore",tP="@firebase/ai",eP="@firebase/firestore-compat",nP="firebase",iP="12.9.0";const Dh="[DEFAULT]",sP={[ev]:"fire-core",[xM]:"fire-core-compat",[MM]:"fire-analytics",[OM]:"fire-analytics-compat",[VM]:"fire-app-check",[PM]:"fire-app-check-compat",[kM]:"fire-auth",[LM]:"fire-auth-compat",[UM]:"fire-rtdb",[zM]:"fire-data-connect",[BM]:"fire-rtdb-compat",[GM]:"fire-fn",[HM]:"fire-fn-compat",[qM]:"fire-iid",[FM]:"fire-iid-compat",[jM]:"fire-fcm",[KM]:"fire-fcm-compat",[YM]:"fire-perf",[QM]:"fire-perf-compat",[XM]:"fire-rc",[JM]:"fire-rc-compat",[WM]:"fire-gcs",[ZM]:"fire-gcs-compat",[$M]:"fire-fst",[eP]:"fire-fst-compat",[tP]:"fire-vertex","fire-js":"fire-js",[nP]:"fire-js-all"};const xh=new Map,ip=new Map,sp=new Map;function t_(n,t){try{n.container.addComponent(t)}catch(e){Zu.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Pw(n,t){n.container.addOrOverwriteComponent(t)}function Sa(n){const t=n.name;if(sp.has(t))return Zu.debug(`There were multiple attempts to register component ${t}.`),!1;sp.set(t,n);for(const e of xh.values())t_(e,n);for(const e of ip.values())t_(e,n);return!0}function Hv(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function aP(n,t,e=Dh){Hv(n,t).clearInstance(e)}function ES(n){return n.options!==void 0}function Vw(n){return ES(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Cn(n){return n==null?!1:n.settings!==void 0}function rP(){sp.clear()}const oP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new su("app","Firebase",oP);let kw=class{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}};function s3(n,t){const e=dS(n.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(e).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class lP extends kw{constructor(t,e,i,s){const o=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,c={name:i,automaticDataCollectionEnabled:o};if(t.apiKey!==void 0)super(t,c,s);else{const f=t;super(f.options,c,s)}this._serverConfig={automaticDataCollectionEnabled:o,...e},this._serverConfig.authIdToken&&s3(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&s3(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Wi(ev,yT,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){SS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Cr.create("server-app-deleted")}}const ac=iP;function TS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Dh,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Cr.create("bad-app-name",{appName:String(s)});if(e||(e=gS()),!e)throw Cr.create("no-options");const o=xh.get(s);if(o){if(Nh(e,o.options)&&Nh(i,o.config))return o;throw Cr.create("duplicate-app",{appName:s})}const c=new Dw(s);for(const m of sp.values())c.addComponent(m);const f=new kw(e,i,c);return xh.set(s,f),f}function uP(n,t={}){if(eM()&&!Aw())throw Cr.create("invalid-server-app-environment");let e,i=t||{};if(n&&(ES(n)?e=n.options:Vw(n)?i=n:e=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),e||(e=gS()),!e)throw Cr.create("no-options");const s={...i,...e};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const o=E=>[...E].reduce((b,A)=>Math.imul(31,b)+A.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Cr.create("finalization-registry-not-supported",{});const c=""+o(JSON.stringify(s)),f=ip.get(c);if(f)return f.incRefCount(i.releaseOnDeref),f;const m=new Dw(c);for(const E of sp.values())m.addComponent(E);const g=new lP(e,i,c,m);return ip.set(c,g),g}function cP(n=Dh){const t=xh.get(n);if(!t&&n===Dh&&gS())return TS();if(!t)throw Cr.create("no-app",{appName:n});return t}function hP(){return Array.from(xh.values())}async function SS(n){let t=!1;const e=n.name;xh.has(e)?(t=!0,xh.delete(e)):ip.has(e)&&n.decRefCount()<=0&&(ip.delete(e),t=!0),t&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Wi(n,t,e){let i=sP[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${t}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Zu.warn(c.join(" "));return}Sa(new Hi(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function Lw(n,t){if(n!==null&&typeof n!="function")throw Cr.create("invalid-log-argument");yM(n,t)}function Uw(n){_M(n)}const fP="firebase-heartbeat-database",dP=1,e_="firebase-heartbeat-store";let xE=null;function zw(){return xE||(xE=Np(fP,dP,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(e_)}catch(e){console.warn(e)}}}}).catch(n=>{throw Cr.create("idb-open",{originalErrorMessage:n.message})})),xE}async function mP(n){try{const e=(await zw()).transaction(e_),i=await e.objectStore(e_).get(Bw(n));return await e.done,i}catch(t){if(t instanceof Gi)Zu.warn(t.message);else{const e=Cr.create("idb-get",{originalErrorMessage:t?.message});Zu.warn(e.message)}}}async function a3(n,t){try{const i=(await zw()).transaction(e_,"readwrite");await i.objectStore(e_).put(t,Bw(n)),await i.done}catch(e){if(e instanceof Gi)Zu.warn(e.message);else{const i=Cr.create("idb-set",{originalErrorMessage:e?.message});Zu.warn(i.message)}}}function Bw(n){return`${n.name}!${n.options.appId}`}const pP=1024,gP=30;class _P{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new vP(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>gP){const s=EP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Zu.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=r3(),{heartbeatsToSend:e,unsentEntries:i}=yP(this._heartbeatsCache.heartbeats),s=$1(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Zu.warn(t),""}}}function r3(){return new Date().toISOString().substring(0,10)}function yP(n,t=pP){const e=[];let i=n.slice();for(const s of n){const o=e.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),o3(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),o3(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class vP{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return id()?iM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await mP(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return a3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return a3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function o3(n){return $1(JSON.stringify({version:2,heartbeats:n})).length}function EP(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function TP(n){Sa(new Hi("platform-logger",t=>new NM(t),"PRIVATE")),Sa(new Hi("heartbeat",t=>new _P(t),"PRIVATE")),Wi(ev,yT,n),Wi(ev,yT,"esm2020"),Wi("fire-js","")}TP("");const SP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gi,SDK_VERSION:ac,_DEFAULT_ENTRY_NAME:Dh,_addComponent:t_,_addOrOverwriteComponent:Pw,_apps:xh,_clearComponents:rP,_components:sp,_getProvider:Hv,_isFirebaseApp:ES,_isFirebaseServerApp:Cn,_isFirebaseServerAppSettings:Vw,_registerComponent:Sa,_removeServiceInstance:aP,_serverApps:ip,deleteApp:SS,getApp:cP,getApps:hP,initializeApp:TS,initializeServerApp:uP,onLog:Lw,registerVersion:Wi,setLogLevel:Uw},Symbol.toStringTag,{value:"Module"}));var l3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wh,Gw;(function(){var n;function t(V,M){function k(){}k.prototype=M.prototype,V.F=M.prototype,V.prototype=new k,V.prototype.constructor=V,V.D=function(q,H,K){for(var z=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)z[Ft-2]=arguments[Ft];return M.prototype[H].apply(q,z)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(V,M,k){k||(k=0);const q=Array(16);if(typeof M=="string")for(var H=0;H<16;++H)q[H]=M.charCodeAt(k++)|M.charCodeAt(k++)<<8|M.charCodeAt(k++)<<16|M.charCodeAt(k++)<<24;else for(H=0;H<16;++H)q[H]=M[k++]|M[k++]<<8|M[k++]<<16|M[k++]<<24;M=V.g[0],k=V.g[1],H=V.g[2];let K=V.g[3],z;z=M+(K^k&(H^K))+q[0]+3614090360&4294967295,M=k+(z<<7&4294967295|z>>>25),z=K+(H^M&(k^H))+q[1]+3905402710&4294967295,K=M+(z<<12&4294967295|z>>>20),z=H+(k^K&(M^k))+q[2]+606105819&4294967295,H=K+(z<<17&4294967295|z>>>15),z=k+(M^H&(K^M))+q[3]+3250441966&4294967295,k=H+(z<<22&4294967295|z>>>10),z=M+(K^k&(H^K))+q[4]+4118548399&4294967295,M=k+(z<<7&4294967295|z>>>25),z=K+(H^M&(k^H))+q[5]+1200080426&4294967295,K=M+(z<<12&4294967295|z>>>20),z=H+(k^K&(M^k))+q[6]+2821735955&4294967295,H=K+(z<<17&4294967295|z>>>15),z=k+(M^H&(K^M))+q[7]+4249261313&4294967295,k=H+(z<<22&4294967295|z>>>10),z=M+(K^k&(H^K))+q[8]+1770035416&4294967295,M=k+(z<<7&4294967295|z>>>25),z=K+(H^M&(k^H))+q[9]+2336552879&4294967295,K=M+(z<<12&4294967295|z>>>20),z=H+(k^K&(M^k))+q[10]+4294925233&4294967295,H=K+(z<<17&4294967295|z>>>15),z=k+(M^H&(K^M))+q[11]+2304563134&4294967295,k=H+(z<<22&4294967295|z>>>10),z=M+(K^k&(H^K))+q[12]+1804603682&4294967295,M=k+(z<<7&4294967295|z>>>25),z=K+(H^M&(k^H))+q[13]+4254626195&4294967295,K=M+(z<<12&4294967295|z>>>20),z=H+(k^K&(M^k))+q[14]+2792965006&4294967295,H=K+(z<<17&4294967295|z>>>15),z=k+(M^H&(K^M))+q[15]+1236535329&4294967295,k=H+(z<<22&4294967295|z>>>10),z=M+(H^K&(k^H))+q[1]+4129170786&4294967295,M=k+(z<<5&4294967295|z>>>27),z=K+(k^H&(M^k))+q[6]+3225465664&4294967295,K=M+(z<<9&4294967295|z>>>23),z=H+(M^k&(K^M))+q[11]+643717713&4294967295,H=K+(z<<14&4294967295|z>>>18),z=k+(K^M&(H^K))+q[0]+3921069994&4294967295,k=H+(z<<20&4294967295|z>>>12),z=M+(H^K&(k^H))+q[5]+3593408605&4294967295,M=k+(z<<5&4294967295|z>>>27),z=K+(k^H&(M^k))+q[10]+38016083&4294967295,K=M+(z<<9&4294967295|z>>>23),z=H+(M^k&(K^M))+q[15]+3634488961&4294967295,H=K+(z<<14&4294967295|z>>>18),z=k+(K^M&(H^K))+q[4]+3889429448&4294967295,k=H+(z<<20&4294967295|z>>>12),z=M+(H^K&(k^H))+q[9]+568446438&4294967295,M=k+(z<<5&4294967295|z>>>27),z=K+(k^H&(M^k))+q[14]+3275163606&4294967295,K=M+(z<<9&4294967295|z>>>23),z=H+(M^k&(K^M))+q[3]+4107603335&4294967295,H=K+(z<<14&4294967295|z>>>18),z=k+(K^M&(H^K))+q[8]+1163531501&4294967295,k=H+(z<<20&4294967295|z>>>12),z=M+(H^K&(k^H))+q[13]+2850285829&4294967295,M=k+(z<<5&4294967295|z>>>27),z=K+(k^H&(M^k))+q[2]+4243563512&4294967295,K=M+(z<<9&4294967295|z>>>23),z=H+(M^k&(K^M))+q[7]+1735328473&4294967295,H=K+(z<<14&4294967295|z>>>18),z=k+(K^M&(H^K))+q[12]+2368359562&4294967295,k=H+(z<<20&4294967295|z>>>12),z=M+(k^H^K)+q[5]+4294588738&4294967295,M=k+(z<<4&4294967295|z>>>28),z=K+(M^k^H)+q[8]+2272392833&4294967295,K=M+(z<<11&4294967295|z>>>21),z=H+(K^M^k)+q[11]+1839030562&4294967295,H=K+(z<<16&4294967295|z>>>16),z=k+(H^K^M)+q[14]+4259657740&4294967295,k=H+(z<<23&4294967295|z>>>9),z=M+(k^H^K)+q[1]+2763975236&4294967295,M=k+(z<<4&4294967295|z>>>28),z=K+(M^k^H)+q[4]+1272893353&4294967295,K=M+(z<<11&4294967295|z>>>21),z=H+(K^M^k)+q[7]+4139469664&4294967295,H=K+(z<<16&4294967295|z>>>16),z=k+(H^K^M)+q[10]+3200236656&4294967295,k=H+(z<<23&4294967295|z>>>9),z=M+(k^H^K)+q[13]+681279174&4294967295,M=k+(z<<4&4294967295|z>>>28),z=K+(M^k^H)+q[0]+3936430074&4294967295,K=M+(z<<11&4294967295|z>>>21),z=H+(K^M^k)+q[3]+3572445317&4294967295,H=K+(z<<16&4294967295|z>>>16),z=k+(H^K^M)+q[6]+76029189&4294967295,k=H+(z<<23&4294967295|z>>>9),z=M+(k^H^K)+q[9]+3654602809&4294967295,M=k+(z<<4&4294967295|z>>>28),z=K+(M^k^H)+q[12]+3873151461&4294967295,K=M+(z<<11&4294967295|z>>>21),z=H+(K^M^k)+q[15]+530742520&4294967295,H=K+(z<<16&4294967295|z>>>16),z=k+(H^K^M)+q[2]+3299628645&4294967295,k=H+(z<<23&4294967295|z>>>9),z=M+(H^(k|~K))+q[0]+4096336452&4294967295,M=k+(z<<6&4294967295|z>>>26),z=K+(k^(M|~H))+q[7]+1126891415&4294967295,K=M+(z<<10&4294967295|z>>>22),z=H+(M^(K|~k))+q[14]+2878612391&4294967295,H=K+(z<<15&4294967295|z>>>17),z=k+(K^(H|~M))+q[5]+4237533241&4294967295,k=H+(z<<21&4294967295|z>>>11),z=M+(H^(k|~K))+q[12]+1700485571&4294967295,M=k+(z<<6&4294967295|z>>>26),z=K+(k^(M|~H))+q[3]+2399980690&4294967295,K=M+(z<<10&4294967295|z>>>22),z=H+(M^(K|~k))+q[10]+4293915773&4294967295,H=K+(z<<15&4294967295|z>>>17),z=k+(K^(H|~M))+q[1]+2240044497&4294967295,k=H+(z<<21&4294967295|z>>>11),z=M+(H^(k|~K))+q[8]+1873313359&4294967295,M=k+(z<<6&4294967295|z>>>26),z=K+(k^(M|~H))+q[15]+4264355552&4294967295,K=M+(z<<10&4294967295|z>>>22),z=H+(M^(K|~k))+q[6]+2734768916&4294967295,H=K+(z<<15&4294967295|z>>>17),z=k+(K^(H|~M))+q[13]+1309151649&4294967295,k=H+(z<<21&4294967295|z>>>11),z=M+(H^(k|~K))+q[4]+4149444226&4294967295,M=k+(z<<6&4294967295|z>>>26),z=K+(k^(M|~H))+q[11]+3174756917&4294967295,K=M+(z<<10&4294967295|z>>>22),z=H+(M^(K|~k))+q[2]+718787259&4294967295,H=K+(z<<15&4294967295|z>>>17),z=k+(K^(H|~M))+q[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(H+(z<<21&4294967295|z>>>11))&4294967295,V.g[2]=V.g[2]+H&4294967295,V.g[3]=V.g[3]+K&4294967295}i.prototype.v=function(V,M){M===void 0&&(M=V.length);const k=M-this.blockSize,q=this.C;let H=this.h,K=0;for(;K<M;){if(H==0)for(;K<=k;)s(this,V,K),K+=this.blockSize;if(typeof V=="string"){for(;K<M;)if(q[H++]=V.charCodeAt(K++),H==this.blockSize){s(this,q),H=0;break}}else for(;K<M;)if(q[H++]=V[K++],H==this.blockSize){s(this,q),H=0;break}}this.h=H,this.o+=M},i.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;M=this.o*8;for(var k=V.length-8;k<V.length;++k)V[k]=M&255,M/=256;for(this.v(V),V=Array(16),M=0,k=0;k<4;++k)for(let q=0;q<32;q+=8)V[M++]=this.g[k]>>>q&255;return V};function o(V,M){var k=f;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=M(V)}function c(V,M){this.h=M;const k=[];let q=!0;for(let H=V.length-1;H>=0;H--){const K=V[H]|0;q&&K==M||(k[H]=K,q=!1)}this.g=k}var f={};function m(V){return-128<=V&&V<128?o(V,function(M){return new c([M|0],M<0?-1:0)}):new c([V|0],V<0?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return b;if(V<0)return U(g(-V));const M=[];let k=1;for(let q=0;V>=k;q++)M[q]=V/k|0,k*=4294967296;return new c(M,0)}function E(V,M){if(V.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V.charAt(0)=="-")return U(E(V.substring(1),M));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=g(Math.pow(M,8));let q=b;for(let K=0;K<V.length;K+=8){var H=Math.min(8,V.length-K);const z=parseInt(V.substring(K,K+H),M);H<8?(H=g(Math.pow(M,H)),q=q.j(H).add(g(z))):(q=q.j(k),q=q.add(g(z)))}return q}var b=m(0),A=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-U(this).m();let V=0,M=1;for(let k=0;k<this.g.length;k++){const q=this.i(k);V+=(q>=0?q:4294967296+q)*M,M*=4294967296}return V},n.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(D(this))return"0";if(L(this))return"-"+U(this).toString(V);const M=g(Math.pow(V,6));var k=this;let q="";for(;;){const H=Z(k,M).g;k=G(k,H.j(M));let K=((k.g.length>0?k.g[0]:k.h)>>>0).toString(V);if(k=H,D(k))return K+q;for(;K.length<6;)K="0"+K;q=K+q}},n.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function D(V){if(V.h!=0)return!1;for(let M=0;M<V.g.length;M++)if(V.g[M]!=0)return!1;return!0}function L(V){return V.h==-1}n.l=function(V){return V=G(this,V),L(V)?-1:D(V)?0:1};function U(V){const M=V.g.length,k=[];for(let q=0;q<M;q++)k[q]=~V.g[q];return new c(k,~V.h).add(A)}n.abs=function(){return L(this)?U(this):this},n.add=function(V){const M=Math.max(this.g.length,V.g.length),k=[];let q=0;for(let H=0;H<=M;H++){let K=q+(this.i(H)&65535)+(V.i(H)&65535),z=(K>>>16)+(this.i(H)>>>16)+(V.i(H)>>>16);q=z>>>16,K&=65535,z&=65535,k[H]=z<<16|K}return new c(k,k[k.length-1]&-2147483648?-1:0)};function G(V,M){return V.add(U(M))}n.j=function(V){if(D(this)||D(V))return b;if(L(this))return L(V)?U(this).j(U(V)):U(U(this).j(V));if(L(V))return U(this.j(U(V)));if(this.l(N)<0&&V.l(N)<0)return g(this.m()*V.m());const M=this.g.length+V.g.length,k=[];for(var q=0;q<2*M;q++)k[q]=0;for(q=0;q<this.g.length;q++)for(let H=0;H<V.g.length;H++){const K=this.i(q)>>>16,z=this.i(q)&65535,Ft=V.i(H)>>>16,Ut=V.i(H)&65535;k[2*q+2*H]+=z*Ut,j(k,2*q+2*H),k[2*q+2*H+1]+=K*Ut,j(k,2*q+2*H+1),k[2*q+2*H+1]+=z*Ft,j(k,2*q+2*H+1),k[2*q+2*H+2]+=K*Ft,j(k,2*q+2*H+2)}for(V=0;V<M;V++)k[V]=k[2*V+1]<<16|k[2*V];for(V=M;V<2*M;V++)k[V]=0;return new c(k,0)};function j(V,M){for(;(V[M]&65535)!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function X(V,M){this.g=V,this.h=M}function Z(V,M){if(D(M))throw Error("division by zero");if(D(V))return new X(b,b);if(L(V))return M=Z(U(V),M),new X(U(M.g),U(M.h));if(L(M))return M=Z(V,U(M)),new X(U(M.g),M.h);if(V.g.length>30){if(L(V)||L(M))throw Error("slowDivide_ only works with positive integers.");for(var k=A,q=M;q.l(V)<=0;)k=gt(k),q=gt(q);var H=lt(k,1),K=lt(q,1);for(q=lt(q,2),k=lt(k,2);!D(q);){var z=K.add(q);z.l(V)<=0&&(H=H.add(k),K=z),q=lt(q,1),k=lt(k,1)}return M=G(V,H.j(M)),new X(H,M)}for(H=b;V.l(M)>=0;){for(k=Math.max(1,Math.floor(V.m()/M.m())),q=Math.ceil(Math.log(k)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),K=g(k),z=K.j(M);L(z)||z.l(V)>0;)k-=q,K=g(k),z=K.j(M);D(K)&&(K=A),H=H.add(K),V=G(V,z)}return new X(H,V)}n.B=function(V){return Z(this,V).h},n.and=function(V){const M=Math.max(this.g.length,V.g.length),k=[];for(let q=0;q<M;q++)k[q]=this.i(q)&V.i(q);return new c(k,this.h&V.h)},n.or=function(V){const M=Math.max(this.g.length,V.g.length),k=[];for(let q=0;q<M;q++)k[q]=this.i(q)|V.i(q);return new c(k,this.h|V.h)},n.xor=function(V){const M=Math.max(this.g.length,V.g.length),k=[];for(let q=0;q<M;q++)k[q]=this.i(q)^V.i(q);return new c(k,this.h^V.h)};function gt(V){const M=V.g.length+1,k=[];for(let q=0;q<M;q++)k[q]=V.i(q)<<1|V.i(q-1)>>>31;return new c(k,V.h)}function lt(V,M){const k=M>>5;M%=32;const q=V.g.length-k,H=[];for(let K=0;K<q;K++)H[K]=M>0?V.i(K+k)>>>M|V.i(K+k+1)<<32-M:V.i(K+k);return new c(H,V.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Gw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=E,wh=c}).apply(typeof l3<"u"?l3:typeof self<"u"?self:typeof window<"u"?window:{});var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hw,C0,qw,k1,vT,Fw,jw,Kw;(function(){var n,t=Object.defineProperty;function e(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof b1=="object"&&b1];for(var R=0;R<_.length;++R){var I=_[R];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=e(this);function s(_,R){if(R)t:{var I=i;_=_.split(".");for(var P=0;P<_.length-1;P++){var $=_[P];if(!($ in I))break t;I=I[$]}_=_[_.length-1],P=I[_],R=R(P),R!=P&&R!=null&&t(I,_,{configurable:!0,writable:!0,value:R})}}s("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(_){return _||function(R){var I=[],P;for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&I.push([P,R[P]]);return I}});var o=o||{},c=this||self;function f(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function m(_,R,I){return _.call.apply(_.bind,arguments)}function g(_,R,I){return g=m,g.apply(null,arguments)}function E(_,R){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),_.apply(this,P)}}function b(_,R){function I(){}I.prototype=R.prototype,_.Z=R.prototype,_.prototype=new I,_.prototype.constructor=_,_.Ob=function(P,$,ut){for(var Vt=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)Vt[ue-2]=arguments[ue];return R.prototype[$].apply(P,Vt)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function N(_){const R=_.length;if(R>0){const I=Array(R);for(let P=0;P<R;P++)I[P]=_[P];return I}return[]}function D(_,R){for(let P=1;P<arguments.length;P++){const $=arguments[P];var I=typeof $;if(I=I!="object"?I:$?Array.isArray($)?"array":I:"null",I=="array"||I=="object"&&typeof $.length=="number"){I=_.length||0;const ut=$.length||0;_.length=I+ut;for(let Vt=0;Vt<ut;Vt++)_[I+Vt]=$[Vt]}else _.push($)}}class L{constructor(R,I){this.i=R,this.j=I,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function U(_){c.setTimeout(()=>{throw _},0)}function G(){var _=V;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class j{constructor(){this.h=this.g=null}add(R,I){const P=X.get();P.set(R,I),this.h?this.h.next=P:this.g=P,this.h=P}}var X=new L(()=>new Z,_=>_.reset());class Z{constructor(){this.next=this.g=this.h=null}set(R,I){this.h=R,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,lt=!1,V=new j,M=()=>{const _=Promise.resolve(void 0);gt=()=>{_.then(k)}};function k(){for(var _;_=G();){try{_.h.call(_.g)}catch(I){U(I)}var R=X;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}lt=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var K=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const I=()=>{};c.addEventListener("test",I,R),c.removeEventListener("test",I,R)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function Ft(_,R){H.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}b(Ft,H),Ft.prototype.init=function(_,R){const I=this.type=_.type,P=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(I=="mouseover"?R=_.fromElement:I=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Ft.Z.h.call(this)},Ft.prototype.h=function(){Ft.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Ut="closure_listenable_"+(Math.random()*1e6|0),W=0;function St(_,R,I,P,$){this.listener=_,this.proxy=null,this.src=R,this.type=I,this.capture=!!P,this.ha=$,this.key=++W,this.da=this.fa=!1}function Et(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function zt(_,R,I){for(const P in _)R.call(I,_[P],P,_)}function Qt(_,R){for(const I in _)R.call(void 0,_[I],I,_)}function F(_){const R={};for(const I in _)R[I]=_[I];return R}const ft="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function At(_,R){let I,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(I in P)_[I]=P[I];for(let ut=0;ut<ft.length;ut++)I=ft[ut],Object.prototype.hasOwnProperty.call(P,I)&&(_[I]=P[I])}}function Ht(_){this.src=_,this.g={},this.h=0}Ht.prototype.add=function(_,R,I,P,$){const ut=_.toString();_=this.g[ut],_||(_=this.g[ut]=[],this.h++);const Vt=ae(_,R,P,$);return Vt>-1?(R=_[Vt],I||(R.fa=!1)):(R=new St(R,this.src,ut,!!P,$),R.fa=I,_.push(R)),R};function ee(_,R){const I=R.type;if(I in _.g){var P=_.g[I],$=Array.prototype.indexOf.call(P,R,void 0),ut;(ut=$>=0)&&Array.prototype.splice.call(P,$,1),ut&&(Et(R),_.g[I].length==0&&(delete _.g[I],_.h--))}}function ae(_,R,I,P){for(let $=0;$<_.length;++$){const ut=_[$];if(!ut.da&&ut.listener==R&&ut.capture==!!I&&ut.ha==P)return $}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),vn={};function Ve(_,R,I,P,$){if(Array.isArray(R)){for(let ut=0;ut<R.length;ut++)Ve(_,R[ut],I,P,$);return null}return I=Dr(I),_&&_[Ut]?_.J(R,I,f(P)?!!P.capture:!1,$):Nr(_,R,I,!1,P,$)}function Nr(_,R,I,P,$,ut){if(!R)throw Error("Invalid event type");const Vt=f($)?!!$.capture:!!$;let ue=es(_);if(ue||(_[Te]=ue=new Ht(_)),I=ue.add(R,I,P,Vt,ut),I.proxy)return I;if(P=To(),I.proxy=P,P.src=_,P.listener=I,_.addEventListener)K||($=Vt),$===void 0&&($=!1),_.addEventListener(R.toString(),P,$);else if(_.attachEvent)_.attachEvent(hs(R.toString()),P);else if(_.addListener&&_.removeListener)_.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return I}function To(){function _(I){return R.call(_.src,_.listener,I)}const R=ir;return _}function Os(_,R,I,P,$){if(Array.isArray(R))for(var ut=0;ut<R.length;ut++)Os(_,R[ut],I,P,$);else P=f(P)?!!P.capture:!!P,I=Dr(I),_&&_[Ut]?(_=_.i,ut=String(R).toString(),ut in _.g&&(R=_.g[ut],I=ae(R,I,P,$),I>-1&&(Et(R[I]),Array.prototype.splice.call(R,I,1),R.length==0&&(delete _.g[ut],_.h--)))):_&&(_=es(_))&&(R=_.g[R.toString()],_=-1,R&&(_=ae(R,I,P,$)),(I=_>-1?R[_]:null)&&cs(I))}function cs(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Ut])ee(R.i,_);else{var I=_.type,P=_.proxy;R.removeEventListener?R.removeEventListener(I,P,_.capture):R.detachEvent?R.detachEvent(hs(I),P):R.addListener&&R.removeListener&&R.removeListener(P),(I=es(R))?(ee(I,_),I.h==0&&(I.src=null,R[Te]=null)):Et(_)}}}function hs(_){return _ in vn?vn[_]:vn[_]="on"+_}function ir(_,R){if(_.da)_=!0;else{R=new Ft(R,this);const I=_.listener,P=_.ha||_.src;_.fa&&cs(_),_=I.call(P,R)}return _}function es(_){return _=_[Te],_ instanceof Ht?_:null}var fs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dr(_){return typeof _=="function"?_:(_[fs]||(_[fs]=function(R){return _.handleEvent(R)}),_[fs])}function En(){q.call(this),this.i=new Ht(this),this.M=this,this.G=null}b(En,q),En.prototype[Ut]=!0,En.prototype.removeEventListener=function(_,R,I,P){Os(this,_,R,I,P)};function ln(_,R){var I,P=_.G;if(P)for(I=[];P;P=P.G)I.push(P);if(_=_.M,P=R.type||R,typeof R=="string")R=new H(R,_);else if(R instanceof H)R.target=R.target||_;else{var $=R;R=new H(P,_),At(R,$)}$=!0;let ut,Vt;if(I)for(Vt=I.length-1;Vt>=0;Vt--)ut=R.g=I[Vt],$=Zn(ut,P,!0,R)&&$;if(ut=R.g=_,$=Zn(ut,P,!0,R)&&$,$=Zn(ut,P,!1,R)&&$,I)for(Vt=0;Vt<I.length;Vt++)ut=R.g=I[Vt],$=Zn(ut,P,!1,R)&&$}En.prototype.N=function(){if(En.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const I=_.g[R];for(let P=0;P<I.length;P++)Et(I[P]);delete _.g[R],_.h--}}this.G=null},En.prototype.J=function(_,R,I,P){return this.i.add(String(_),R,!1,I,P)},En.prototype.K=function(_,R,I,P){return this.i.add(String(_),R,!0,I,P)};function Zn(_,R,I,P){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let $=!0;for(let ut=0;ut<R.length;++ut){const Vt=R[ut];if(Vt&&!Vt.da&&Vt.capture==I){const ue=Vt.listener,Fn=Vt.ha||Vt.src;Vt.fa&&ee(_.i,Vt),$=ue.call(Fn,P)!==!1&&$}}return $&&!P.defaultPrevented}function Ci(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=g(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(_,R||0)}function en(_){_.g=Ci(()=>{_.g=null,_.i&&(_.i=!1,en(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class pn extends q{constructor(R,I){super(),this.m=R,this.l=I,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:en(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(_){q.call(this),this.h=_,this.g={}}b($s,q);var Aa=[];function ds(_){zt(_.g,function(R,I){this.g.hasOwnProperty(I)&&cs(R)},_),_.g={}}$s.prototype.N=function(){$s.Z.N.call(this),ds(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ta=c.JSON.stringify,yt=c.JSON.parse,Ot=class{stringify(_){return c.JSON.stringify(_,void 0)}parse(_){return c.JSON.parse(_,void 0)}};function ne(){}function Ge(){}var ke={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ce(){H.call(this,"d")}b(Ce,H);function yi(){H.call(this,"c")}b(yi,H);var xn={},ms=null;function el(){return ms=ms||new En}xn.Ia="serverreachability";function au(_){H.call(this,xn.Ia,_)}b(au,H);function xr(_){const R=el();ln(R,new au(R))}xn.STAT_EVENT="statevent";function So(_,R){H.call(this,xn.STAT_EVENT,_),this.stat=R}b(So,H);function On(_){const R=el();ln(R,new So(R,_))}xn.Ja="timingevent";function sr(_,R){H.call(this,xn.Ja,_),this.size=R}b(sr,H);function ea(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){_()},R)}function wa(){this.g=!0}wa.prototype.ua=function(){this.g=!1};function Md(_,R,I,P,$,ut){_.info(function(){if(_.g)if(ut){var Vt="",ue=ut.split("&");for(let De=0;De<ue.length;De++){var Fn=ue[De].split("=");if(Fn.length>1){const gn=Fn[0];Fn=Fn[1];const _s=gn.split("_");Vt=_s.length>=2&&_s[1]=="type"?Vt+(gn+"="+Fn+"&"):Vt+(gn+"=redacted&")}}}else Vt=null;else Vt=ut;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+R+`
`+I+`
`+Vt})}function Or(_,R,I,P,$,ut,Vt){_.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+R+`
`+I+`
`+ut+" "+Vt})}function ar(_,R,I,P){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+dc(_,I)+(P?" "+P:"")})}function nl(_,R){_.info(function(){return"TIMEOUT: "+R})}wa.prototype.info=function(){};function dc(_,R){if(!_.g)return R;if(!R)return null;try{const ut=JSON.parse(R);if(ut){for(_=0;_<ut.length;_++)if(Array.isArray(ut[_])){var I=ut[_];if(!(I.length<2)){var P=I[1];if(Array.isArray(P)&&!(P.length<1)){var $=P[0];if($!="noop"&&$!="stop"&&$!="close")for(let Vt=1;Vt<P.length;Vt++)P[Vt]=""}}}}return ta(ut)}catch{return R}}var rr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},il={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mc;function Mr(){}b(Mr,ne),Mr.prototype.g=function(){return new XMLHttpRequest},mc=new Mr;function Ra(_){return encodeURIComponent(String(_))}function pc(_){var R=1;_=_.split(":");const I=[];for(;R>0&&_.length;)I.push(_.shift()),R--;return _.length&&I.push(_.join(":")),I}function qi(_,R,I,P){this.j=_,this.i=R,this.l=I,this.S=P||1,this.V=new $s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}var Mn={},ci={};function Ia(_,R,I){_.M=1,_.A=ti($n(R)),_.u=I,_.R=!0,na(_,null)}function na(_,R){_.F=Date.now(),Ms(_),_.B=$n(_.A);var I=_.B,P=_.S;Array.isArray(P)||(P=[String(P)]),lu(I.i,"t",P),_.C=0,I=_.j.L,_.h=new Ca,_.g=sf(_.j,I?R:null,!_.u),_.P>0&&(_.O=new pn(g(_.Y,_,_.g),_.P)),R=_.V,I=_.g,P=_.ba;var $="readystatechange";Array.isArray($)||($&&(Aa[0]=$.toString()),$=Aa);for(let ut=0;ut<$.length;ut++){const Vt=Ve(I,$[ut],P||R.handleEvent,!1,R.h||R);if(!Vt)break;R.g[Vt.key]=Vt}R=_.J?F(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),xr(),Md(_.i,_.v,_.B,_.l,_.S,_.u)}qi.prototype.ba=function(_){_=_.target;const R=this.O;R&&fr(_)==3?R.j():this.Y(_)},qi.prototype.Y=function(_){try{if(_==this.g)t:{const ue=fr(this.g),Fn=this.g.ya(),De=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Di(this.g)))){this.K||ue!=4||Fn==7||(Fn==8||De<=0?xr(3):xr(2)),or(this);var R=this.g.ca();this.X=R;var I=Pr(this);if(this.o=R==200,Or(this.i,this.v,this.B,this.l,this.S,ue,R),this.o){if(this.U&&!this.L){e:{if(this.g){var P,$=this.g;if((P=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(P)){var ut=P;break e}}ut=null}if(_=ut)ar(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Na(this,_);else{this.o=!1,this.m=3,On(12),Ps(this),ia(this);break t}}if(this.R){_=!0;let gn;for(;!this.K&&this.C<I.length;)if(gn=gc(this,I),gn==ci){ue==4&&(this.m=4,On(14),_=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Mn){this.m=4,On(15),ar(this.i,this.l,I,"[Invalid Chunk]"),_=!1;break}else ar(this.i,this.l,gn,null),Na(this,gn);if(sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||I.length!=0||this.h.h||(this.m=1,On(16),_=!1),this.o=this.o&&_,!_)ar(this.i,this.l,I,"[Invalid Chunked Response]"),Ps(this),ia(this);else if(I.length>0&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.aa&&!Vt.P&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Cc(Vt),Vt.P=!0,On(11))}}else ar(this.i,this.l,I,null),Na(this,I);ue==4&&Ps(this),this.o&&!this.K&&(ue==4?ef(this.j,this):(this.o=!1,Ms(this)))}else Gr(this.g),R==400&&I.indexOf("Unknown SID")>0?(this.m=3,On(12)):(this.m=0,On(13)),Ps(this),ia(this)}}}catch{}};function Pr(_){if(!sl(_))return _.g.la();const R=Di(_.g);if(R==="")return"";let I="";const P=R.length,$=fr(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Ps(_),ia(_),"";_.h.i=new c.TextDecoder}for(let ut=0;ut<P;ut++)_.h.h=!0,I+=_.h.i.decode(R[ut],{stream:!($&&ut==P-1)});return R.length=0,_.h.g+=I,_.C=0,_.h.g}function sl(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function gc(_,R){var I=_.C,P=R.indexOf(`
`,I);return P==-1?ci:(I=Number(R.substring(I,P)),isNaN(I)?Mn:(P+=1,P+I>R.length?ci:(R=R.slice(P,P+I),_.C=P+I,R)))}qi.prototype.cancel=function(){this.K=!0,Ps(this)};function Ms(_){_.T=Date.now()+_.H,Vr(_,_.H)}function Vr(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=ea(g(_.aa,_),R)}function or(_){_.D&&(c.clearTimeout(_.D),_.D=null)}qi.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(nl(this.i,this.B),this.M!=2&&(xr(),On(17)),Ps(this),this.m=2,ia(this)):Vr(this,this.T-_)};function ia(_){_.j.I==0||_.K||ef(_.j,_)}function Ps(_){or(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,ds(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function Na(_,R){try{var I=_.j;if(I.I!=0&&(I.g==_||Fi(I.h,_))){if(!_.L&&Fi(I.h,_)&&I.I==3){try{var P=I.Ba.g.parse(R)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){t:if(!I.v){if(I.g)if(I.g.F+3e3<_.F)Ic(I),Hr(I);else break t;fl(I),On(18)}}else I.xa=$[1],0<I.xa-I.K&&$[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=ea(g(I.Va,I),6e3));lr(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ma(I,11)}else if((_.L||I.g==_)&&Ic(I),!z(R))for($=I.Ba.g.parse(R),R=0;R<$.length;R++){let De=$[R];const gn=De[0];if(!(gn<=I.K))if(I.K=gn,De=De[1],I.I==2)if(De[0]=="c"){I.M=De[1],I.ba=De[2];const _s=De[3];_s!=null&&(I.ka=_s,I.j.info("VER="+I.ka));const pr=De[4];pr!=null&&(I.za=pr,I.j.info("SVER="+I.za));const gr=De[5];gr!=null&&typeof gr=="number"&&gr>0&&(P=1.5*gr,I.O=P,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const ks=_.g;if(ks){const Io=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var ut=P.h;ut.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(ji(ut,ut.h),ut.h=null))}if(P.G){const pu=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(P.wa=pu,je(P.J,P.G,pu))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-_.F,I.j.info("Handshake RTT: "+I.T+"ms")),P=I;var Vt=_;if(P.na=nf(P,P.L?P.ba:null,P.W),Vt.L){al(P.h,Vt);var ue=Vt,Fn=P.O;Fn&&(ue.H=Fn),ue.D&&(or(ue),Ms(ue)),P.g=Vt}else Rc(P);I.i.length>0&&mr(I)}else De[0]!="stop"&&De[0]!="close"||Ma(I,7);else I.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Ma(I,7):Ac(I):De[0]!="noop"&&I.l&&I.l.qa(De),I.A=0)}}xr(4)}catch{}}var qn=class{constructor(_,R){this.g=_,this.map=R}};function Da(_){this.l=_||10,c.PerformanceNavigationTiming?(_=c.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ru(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function lr(_){return _.h?1:_.g?_.g.size:0}function Fi(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function ji(_,R){_.g?_.g.add(R):_.h=R}function al(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}Da.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function un(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const I of _.g.values())R=R.concat(I.G);return R}return N(_.i)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(_,R){if(_){_=_.split("&");for(let I=0;I<_.length;I++){const P=_[I].indexOf("=");let $,ut=null;P>=0?($=_[I].substring(0,P),ut=_[I].substring(P+1)):$=_[I],R($,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}function Vs(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof Vs?(this.l=_.l,Ii(this,_.j),this.o=_.o,this.g=_.g,kr(this,_.u),this.h=_.h,ou(this,$h(_.i)),this.m=_.m):_&&(R=String(_).match(_c))?(this.l=!1,Ii(this,R[1]||"",!0),this.o=Ke(R[2]||""),this.g=Ke(R[3]||"",!0),kr(this,R[4]),this.h=Ke(R[5]||"",!0),ou(this,R[6]||"",!0),this.m=Ke(R[7]||"")):(this.l=!1,this.i=new Ur(null,this.l))}Vs.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Lr(R,bo,!0),":");var I=this.g;return(I||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Lr(R,bo,!0),"@"),_.push(Ra(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&_.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&_.push("/"),_.push(Lr(I,I.charAt(0)=="/"?sa:yc,!0))),(I=this.i.toString())&&_.push("?",I),(I=this.m)&&_.push("#",Lr(I,vc)),_.join("")},Vs.prototype.resolve=function(_){const R=$n(this);let I=!!_.j;I?Ii(R,_.j):I=!!_.o,I?R.o=_.o:I=!!_.g,I?R.g=_.g:I=_.u!=null;var P=_.h;if(I)kr(R,_.u);else if(I=!!_.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var $=R.h.lastIndexOf("/");$!=-1&&(P=R.h.slice(0,$+1)+P)}if($=P,$==".."||$==".")P="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){P=$.lastIndexOf("/",0)==0,$=$.split("/");const ut=[];for(let Vt=0;Vt<$.length;){const ue=$[Vt++];ue=="."?P&&Vt==$.length&&ut.push(""):ue==".."?((ut.length>1||ut.length==1&&ut[0]!="")&&ut.pop(),P&&Vt==$.length&&ut.push("")):(ut.push(ue),P=!0)}P=ut.join("/")}else P=$}return I?R.h=P:I=_.i.toString()!=="",I?ou(R,$h(_.i)):I=!!_.m,I&&(R.m=_.m),R};function $n(_){return new Vs(_)}function Ii(_,R,I){_.j=I?Ke(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function kr(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function ou(_,R,I){R instanceof Ur?(_.i=R,uu(_.i,_.l)):(I||(R=Lr(R,ur)),_.i=new Ur(R,_.l))}function je(_,R,I){_.i.set(R,I)}function ti(_){return je(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Ke(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Lr(_,R,I){return typeof _=="string"?(_=encodeURI(_).replace(R,Ni),I&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ni(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var bo=/[#\/\?@]/g,yc=/[#\?:]/g,sa=/[#\?]/g,ur=/[#\?@]/g,vc=/#/g;function Ur(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function ps(_){_.g||(_.g=new Map,_.h=0,_.i&&rl(_.i,function(R,I){_.add(decodeURIComponent(R.replace(/\+/g," ")),I)}))}n=Ur.prototype,n.add=function(_,R){ps(this),this.i=null,_=zr(this,_);let I=this.g.get(_);return I||this.g.set(_,I=[]),I.push(R),this.h+=1,this};function Zh(_,R){ps(_),R=zr(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function Ec(_,R){return ps(_),R=zr(_,R),_.g.has(R)}n.forEach=function(_,R){ps(this),this.g.forEach(function(I,P){I.forEach(function($){_.call(R,$,P,this)},this)},this)};function Tc(_,R){ps(_);let I=[];if(typeof R=="string")Ec(_,R)&&(I=I.concat(_.g.get(zr(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)I=I.concat(_[R]);return I}n.set=function(_,R){return ps(this),this.i=null,_=zr(this,_),Ec(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=Tc(this,_),_.length>0?String(_[0]):R):R};function lu(_,R,I){Zh(_,R),I.length>0&&(_.i=null,_.g.set(zr(_,R),N(I)),_.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let P=0;P<R.length;P++){var I=R[P];const $=Ra(I);I=Tc(this,I);for(let ut=0;ut<I.length;ut++){let Vt=$;I[ut]!==""&&(Vt+="="+Ra(I[ut])),_.push(Vt)}}return this.i=_.join("&")};function $h(_){const R=new Ur;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function zr(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function uu(_,R){R&&!_.j&&(ps(_),_.i=null,_.g.forEach(function(I,P){const $=P.toLowerCase();P!=$&&(Zh(this,P),lu(this,$,I))},_)),_.j=R}function cr(_,R){const I=new wa;if(c.Image){const P=new Image;P.onload=E(aa,I,"TestLoadImage: loaded",!0,R,P),P.onerror=E(aa,I,"TestLoadImage: error",!1,R,P),P.onabort=E(aa,I,"TestLoadImage: abort",!1,R,P),P.ontimeout=E(aa,I,"TestLoadImage: timeout",!1,R,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=_}else R(!1)}function Sc(_,R){const I=new wa,P=new AbortController,$=setTimeout(()=>{P.abort(),aa(I,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:P.signal}).then(ut=>{clearTimeout($),ut.ok?aa(I,"TestPingServer: ok",!0,R):aa(I,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout($),aa(I,"TestPingServer: error",!1,R)})}function aa(_,R,I,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(I)}catch{}}function Ao(){this.g=new Ot}function xa(_){this.i=_.Sb||null,this.h=_.ab||!1}b(xa,ne),xa.prototype.g=function(){return new ol(this.i,this.h)};function ol(_,R){En.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ol,En),n=ol.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Oa(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wo(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cu(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function cu(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?wo(this):Oa(this),this.readyState==3&&cu(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,wo(this))},n.Na=function(_){this.g&&(this.response=_,wo(this))},n.ga=function(){this.g&&wo(this)};function wo(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Oa(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var I=R.next();!I.done;)I=I.value,_.push(I[0]+": "+I[1]),I=R.next();return _.join(`\r
`)};function Oa(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function ra(_){let R="";return zt(_,function(I,P){R+=P,R+=":",R+=I,R+=`\r
`}),R}function hu(_,R,I){t:{for(P in I){var P=!1;break t}P=!0}P||(I=ra(I),typeof _=="string"?I!=null&&Ra(I):je(_,R,I))}function Je(_){En.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Je,En);var gs=/^https?$/i,bc=["POST","PUT"];n=Je.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mc.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(ut){Br(this,ut);return}if(_=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)I.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ut of P.keys())I.set(ut,P.get(ut));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(I.keys()).find(ut=>ut.toLowerCase()=="content-type"),$=c.FormData&&_ instanceof c.FormData,!(Array.prototype.indexOf.call(bc,R,void 0)>=0)||P||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Vt]of I)this.g.setRequestHeader(ut,Vt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(ut){Br(this,ut)}};function Br(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,ll(_),hr(_)}function ll(_){_.A||(_.A=!0,ln(_,"complete"),ln(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,ln(this,"complete"),ln(this,"abort"),hr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hr(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ul(this):this.Xa())},n.Xa=function(){ul(this)};function ul(_){if(_.h&&typeof o<"u"){if(_.v&&fr(_)==4)setTimeout(_.Ca.bind(_),0);else if(ln(_,"readystatechange"),fr(_)==4){_.h=!1;try{const ut=_.ca();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var I;if(!(I=R)){var P;if(P=ut===0){let Vt=String(_.D).match(_c)[1]||null;!Vt&&c.self&&c.self.location&&(Vt=c.self.location.protocol.slice(0,-1)),P=!gs.test(Vt?Vt.toLowerCase():"")}I=P}if(I)ln(_,"complete"),ln(_,"success");else{_.o=6;try{var $=fr(_)>2?_.g.statusText:""}catch{$=""}_.l=$+" ["+_.ca()+"]",ll(_)}}finally{hr(_)}}}}function hr(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const I=_.g;_.g=null,R||ln(_,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function fr(_){return _.g?_.g.readyState:0}n.ca=function(){try{return fr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),yt(R)}};function Di(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Gr(_){const R={};_=(_.g&&fr(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<_.length;P++){if(z(_[P]))continue;var I=pc(_[P]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ut=R[$]||[];R[$]=ut,ut.push(I)}Qt(R,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(_,R,I){return I&&I.internalChannelParams&&I.internalChannelParams[_]||R}function Ro(_){this.za=0,this.i=[],this.j=new wa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dr("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dr("baseRetryDelayMs",5e3,_),this.Za=dr("retryDelaySeedMs",1e4,_),this.Ta=dr("forwardChannelMaxRetries",2,_),this.va=dr("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Da(_&&_.concurrentRequestLimit),this.Ba=new Ao,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ro.prototype,n.ka=8,n.I=1,n.connect=function(_,R,I,P){On(0),this.W=_,this.H=R||{},I&&P!==void 0&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.J=nf(this,null,this.W),mr(this)};function Ac(_){if(fu(_),_.I==3){var R=_.V++,I=$n(_.J);if(je(I,"SID",_.M),je(I,"RID",R),je(I,"TYPE","terminate"),hl(_,I),R=new qi(_,_.j,R),R.M=2,R.A=ti($n(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=R.A,I=!0),I||(R.g=sf(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Ms(R)}du(_)}function Hr(_){_.g&&(Cc(_),_.g.cancel(),_.g=null)}function fu(_){Hr(_),_.v&&(c.clearTimeout(_.v),_.v=null),Ic(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&c.clearTimeout(_.m),_.m=null)}function mr(_){if(!ru(_.h)&&!_.m){_.m=!0;var R=_.Ea;gt||M(),lt||(gt(),lt=!0),V.add(R,_),_.D=0}}function cl(_,R){return lr(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=ea(g(_.Ea,_,R),dl(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const $=new qi(this,this.j,_);let ut=this.o;if(this.U&&(ut?(ut=F(ut),At(ut,this.U)):ut=this.U),this.u!==null||this.R||($.J=ut,ut=null),this.S)t:{for(var R=0,I=0;I<this.i.length;I++){e:{var P=this.i[I];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(R+=P,R>4096){R=I;break t}if(R===4096||I===this.i.length-1){R=I+1;break t}}R=1e3}else R=1e3;R=tf(this,$,R),I=$n(this.J),je(I,"RID",_),je(I,"CVER",22),this.G&&je(I,"X-HTTP-Session-Id",this.G),hl(this,I),ut&&(this.R?R="headers="+Ra(ra(ut))+"&"+R:this.u&&hu(I,this.u,ut)),ji(this.h,$),this.Ra&&je(I,"TYPE","init"),this.S?(je(I,"$req",R),je(I,"SID","null"),$.U=!0,Ia($,I,null)):Ia($,I,R),this.I=2}}else this.I==3&&(_?wc(this,_):this.i.length==0||ru(this.h)||wc(this))};function wc(_,R){var I;R?I=R.l:I=_.V++;const P=$n(_.J);je(P,"SID",_.M),je(P,"RID",I),je(P,"AID",_.K),hl(_,P),_.u&&_.o&&hu(P,_.u,_.o),I=new qi(_,_.j,I,_.D+1),_.u===null&&(I.J=_.o),R&&(_.i=R.G.concat(_.i)),R=tf(_,I,1e3),I.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),ji(_.h,I),Ia(I,P,R)}function hl(_,R){_.H&&zt(_.H,function(I,P){je(R,P,I)}),_.l&&zt({},function(I,P){je(R,P,I)})}function tf(_,R,I){I=Math.min(_.i.length,I);const P=_.l?g(_.l.Ka,_.l,_):null;t:{var $=_.i;let ue=-1;for(;;){const Fn=["count="+I];ue==-1?I>0?(ue=$[0].g,Fn.push("ofs="+ue)):ue=0:Fn.push("ofs="+ue);let De=!0;for(let gn=0;gn<I;gn++){var ut=$[gn].g;const _s=$[gn].map;if(ut-=ue,ut<0)ue=Math.max(0,$[gn].g-100),De=!1;else try{ut="req"+ut+"_"||"";try{var Vt=_s instanceof Map?_s:Object.entries(_s);for(const[pr,gr]of Vt){let ks=gr;f(gr)&&(ks=ta(gr)),Fn.push(ut+pr+"="+encodeURIComponent(ks))}}catch(pr){throw Fn.push(ut+"type="+encodeURIComponent("_badmap")),pr}}catch{P&&P(_s)}}if(De){Vt=Fn.join("&");break t}}Vt=void 0}return _=_.i.splice(0,I),R.G=_,Vt}function Rc(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;gt||M(),lt||(gt(),lt=!0),V.add(R,_),_.A=0}}function fl(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=ea(g(_.Da,_),dl(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,Pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=ea(g(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,On(10),Hr(this),Pd(this))};function Cc(_){_.B!=null&&(c.clearTimeout(_.B),_.B=null)}function Pd(_){_.g=new qi(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=$n(_.na);je(R,"RID","rpc"),je(R,"SID",_.M),je(R,"AID",_.K),je(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&je(R,"TO",_.ia),je(R,"TYPE","xmlhttp"),hl(_,R),_.u&&_.o&&hu(R,_.u,_.o),_.O&&(_.g.H=_.O);var I=_.g;_=_.ba,I.M=1,I.A=ti($n(R)),I.u=null,I.R=!0,na(I,_)}n.Va=function(){this.C!=null&&(this.C=null,Hr(this),fl(this),On(19))};function Ic(_){_.C!=null&&(c.clearTimeout(_.C),_.C=null)}function ef(_,R){var I=null;if(_.g==R){Ic(_),Cc(_),_.g=null;var P=2}else if(Fi(_.h,R))I=R.G,al(_.h,R),P=1;else return;if(_.I!=0){if(R.o)if(P==1){I=R.u?R.u.length:0,R=Date.now()-R.F;var $=_.D;P=el(),ln(P,new sr(P,I)),mr(_)}else Rc(_);else if($=R.m,$==3||$==0&&R.X>0||!(P==1&&cl(_,R)||P==2&&fl(_)))switch(I&&I.length>0&&(R=_.h,R.i=R.i.concat(I)),$){case 1:Ma(_,5);break;case 4:Ma(_,10);break;case 3:Ma(_,6);break;default:Ma(_,2)}}}function dl(_,R){let I=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(I*=2),I*R}function Ma(_,R){if(_.j.info("Error code "+R),R==2){var I=g(_.bb,_),P=_.Ua;const $=!P;P=new Vs(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ii(P,"https"),ti(P),$?cr(P.toString(),I):Sc(P.toString(),I)}else On(2);_.I=0,_.l&&_.l.pa(R),du(_),fu(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))};function du(_){if(_.I=0,_.ja=[],_.l){const R=un(_.h);(R.length!=0||_.i.length!=0)&&(D(_.ja,R),D(_.ja,_.i),_.h.i.length=0,N(_.i),_.i.length=0),_.l.oa()}}function nf(_,R,I){var P=I instanceof Vs?$n(I):new Vs(I);if(P.g!="")R&&(P.g=R+"."+P.g),kr(P,P.u);else{var $=c.location;P=$.protocol,R=R?R+"."+$.hostname:$.hostname,$=+$.port;const ut=new Vs(null);P&&Ii(ut,P),R&&(ut.g=R),$&&kr(ut,$),I&&(ut.h=I),P=ut}return I=_.G,R=_.wa,I&&R&&je(P,I,R),je(P,"VER",_.ka),hl(_,P),P}function sf(_,R,I){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new Je(new xa({ab:I})):new Je(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}n=Nc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Co(){}Co.prototype.g=function(_,R){return new ns(_,R)};function ns(_,R){En.call(this),this.g=new Ro(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!z(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!z(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new Fr(this)}b(ns,En),ns.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ns.prototype.close=function(){Ac(this.g)},ns.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var I={};I.__data__=_,_=I}else this.v&&(I={},I.__data__=ta(_),_=I);R.i.push(new qn(R.Ya++,_)),R.I==3&&mr(R)},ns.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,ns.Z.N.call(this)};function qr(_){Ce.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){t:{for(const I in R){_=I;break t}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}b(qr,Ce);function mu(){yi.call(this),this.status=1}b(mu,yi);function Fr(_){this.g=_}b(Fr,Nc),Fr.prototype.ra=function(){ln(this.g,"a")},Fr.prototype.qa=function(_){ln(this.g,new qr(_))},Fr.prototype.pa=function(_){ln(this.g,new mu)},Fr.prototype.oa=function(){ln(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,ns.prototype.send=ns.prototype.o,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,Kw=function(){return new Co},jw=function(){return el()},Fw=xn,vT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,k1=rr,il.COMPLETE="complete",qw=il,Ge.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",En.prototype.listen=En.prototype.J,C0=Ge,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Hw=Je}).apply(typeof b1<"u"?b1:typeof self<"u"?self:typeof window<"u"?window:{});let ls=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");let Dp="12.9.0";function bP(n){Dp=n}const Oh=new Gv("@firebase/firestore");function zm(){return Oh.logLevel}function AP(n){Oh.setLogLevel(n)}function wt(n,...t){if(Oh.logLevel<=Me.DEBUG){const e=t.map(bS);Oh.debug(`Firestore (${Dp}): ${n}`,...e)}}function Ai(n,...t){if(Oh.logLevel<=Me.ERROR){const e=t.map(bS);Oh.error(`Firestore (${Dp}): ${n}`,...e)}}function Wo(n,...t){if(Oh.logLevel<=Me.WARN){const e=t.map(bS);Oh.warn(`Firestore (${Dp}): ${n}`,...e)}}function bS(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function qt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Yw(n,i,e)}function Yw(n,t,e){let i=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ai(i),new Error(i)}function Yt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||Yw(t,s,i)}function wP(n,t){n||qt(57014,t)}function Bt(n,t){return n}const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Gi{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ds{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Qw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class RP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ls.UNAUTHENTICATED)))}shutdown(){}}class CP{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class IP{constructor(t){this.t=t,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let o=new Ds;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ds,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=o;t.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ds)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yt(typeof i.accessToken=="string",31837,{l:i}),new Qw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new ls(t)}}class NP{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class DP{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new NP(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(ls.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class u3{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xP{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0,3512);const i=o=>{o.error!=null&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,wt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const s=o=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new u3(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Yt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new u3(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OP(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class AS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=OP(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<e&&(i+=t.charAt(s[o]%62))}return i}}function le(n,t){return n<t?-1:n>t?1:0}function ET(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),o=t.charAt(i);if(s!==o)return OE(s)===OE(o)?le(s,o):OE(s)?1:-1}return le(n.length,t.length)}const MP=55296,PP=57343;function OE(n){const t=n.charCodeAt(0);return t>=MP&&t<=PP}function ap(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}function Xw(n){return n+"\0"}const c3="__name__";class Bl{constructor(t,e,i){e===void 0?e=0:e>t.length&&qt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&qt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Bl.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Bl?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const o=Bl.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return le(t.length,e.length)}static compareSegments(t,e){const i=Bl.isNumericId(t),s=Bl.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Bl.extractNumericId(t).compare(Bl.extractNumericId(e)):ET(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wh.fromString(t.substring(4,t.length-2))}}class Pe extends Bl{construct(t,e,i){return new Pe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new Pe(e)}static emptyPath(){return new Pe([])}}const VP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Bl{construct(t,e,i){return new Jn(t,e,i)}static isValidIdentifier(t){return VP.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c3}static keyField(){return new Jn([c3])}static fromServerFormat(t){const e=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new Tt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Tt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(o(),s++)}if(o(),c)throw new Tt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jn(e)}static emptyPath(){return new Jn([])}}class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(Pe.fromString(t))}static fromName(t){return new Lt(Pe.fromString(t).popFirst(5))}static empty(){return new Lt(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Pe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new Pe(t.slice()))}}function wS(n,t,e){if(!e)throw new Tt(ht.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Jw(n,t,e,i){if(t===!0&&i===!0)throw new Tt(ht.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function h3(n){if(!Lt.isDocumentKey(n))throw new Tt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f3(n){if(Lt.isDocumentKey(n))throw new Tt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ww(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":qt(12329,{type:typeof n})}function Xe(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Tt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qv(n);throw new Tt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function Zw(n,t){if(t<=0)throw new Tt(ht.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}function Bi(n,t){const e={typeString:n};return t&&(e.value=t),e}function A_(n,t){if(!Ww(n))throw new Tt(ht.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new Tt(ht.INVALID_ARGUMENT,e);return!0}const d3=-62135596800,m3=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(t){return an.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*m3);return new an(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<d3)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m3}_compareTo(t){return this.seconds===t.seconds?le(this.nanoseconds,t.nanoseconds):le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:an._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(A_(t,an._jsonSchema))return new an(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-d3;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}an._jsonSchemaVersion="firestore/timestamp/1.0",an._jsonSchema={type:Bi("string",an._jsonSchemaVersion),seconds:Bi("number"),nanoseconds:Bi("number")};class Wt{static fromTimestamp(t){return new Wt(t)}static min(){return new Wt(new an(0,0))}static max(){return new Wt(new an(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rp=-1;class nv{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}}function TT(n){return n.fields.find((t=>t.kind===2))}function Bf(n){return n.fields.filter((t=>t.kind!==2))}nv.UNKNOWN_ID=-1;class L1{constructor(t,e){this.fieldPath=t,this.kind=e}}class n_{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n_(0,Ir.min())}}function $w(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Wt.fromTimestamp(i===1e9?new an(e+1,0):new an(e,i));return new Ir(s,Lt.empty(),t)}function tR(n){return new Ir(n.readTime,n.key,rp)}class Ir{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ir(Wt.min(),Lt.empty(),rp)}static max(){return new Ir(Wt.max(),Lt.empty(),rp)}}function RS(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Lt.comparator(n.documentKey,t.documentKey),e!==0?e:le(n.largestBatchId,t.largestBatchId))}const eR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function jh(n){if(n.code!==ht.FAILED_PRECONDITION||n.message!==eR)throw n;wt("LocalStore","Unexpectedly lost primary lease")}class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new it(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof it?e:it.resolve(e)}catch(e){return it.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):it.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):it.reject(e)}static resolve(t){return new it(((e,i)=>{e(t)}))}static reject(t){return new it(((e,i)=>{i(t)}))}static waitFor(t){return new it(((e,i)=>{let s=0,o=0,c=!1;t.forEach((f=>{++s,f.next((()=>{++o,c&&o===s&&e()}),(m=>i(m)))})),c=!0,o===s&&e()}))}static or(t){let e=it.resolve(!1);for(const i of t)e=e.next((s=>s?it.resolve(s):i()));return e}static forEach(t,e){const i=[];return t.forEach(((s,o)=>{i.push(e.call(this,s,o))})),this.waitFor(i)}static mapArray(t,e){return new it(((i,s)=>{const o=t.length,c=new Array(o);let f=0;for(let m=0;m<o;m++){const g=m;e(t[g]).next((E=>{c[g]=E,++f,f===o&&i(c)}),(E=>s(E)))}}))}static doWhile(t,e){return new it(((i,s)=>{const o=()=>{t()===!0?e().next((()=>{o()}),s):i()};o()}))}}const Sr="SimpleDb";class Fv{static open(t,e,i,s){try{return new Fv(e,t.transaction(s,i))}catch(o){throw new U0(e,o)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Ds,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new U0(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=CS(i.target.error);this.S.reject(new U0(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(wt(Sr,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new LP(e)}}class Jl{static delete(t){return wt(Sr,"Removing database:",t),Hf(mS().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!id())return!1;if(Jl.F())return!0;const t=ri(),e=Jl.M(t),i=0<e&&e<10,s=iR(t),o=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Jl.M(ri())===12.2&&Ai("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(wt(Sr,"Opening database:",this.name),this.db=await new Promise(((e,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;e(c)},s.onblocked=()=>{i(new U0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?i(new Tt(ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new Tt(ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new U0(t,c))},s.onupgradeneeded=o=>{wt(Sr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{wt(Sr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,s){const o=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const f=Fv.open(this.db,t,o?"readonly":"readwrite",i),m=s(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),it.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(wt(Sr,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iR(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class kP{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return Hf(this.U.delete())}}class U0 extends Tt{constructor(t,e){super(ht.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Kh(n){return n.name==="IndexedDbTransactionError"}class LP{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(wt(Sr,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(wt(Sr,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Hf(i)}add(t){return wt(Sr,"ADD",this.store.name,t,t),Hf(this.store.add(t))}get(t){return Hf(this.store.get(t)).next((e=>(e===void 0&&(e=null),wt(Sr,"GET",this.store.name,t,e),e)))}delete(t){return wt(Sr,"DELETE",this.store.name,t),Hf(this.store.delete(t))}count(){return wt(Sr,"COUNT",this.store.name),Hf(this.store.count())}H(t,e){const i=this.options(t,e),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new it(((c,f)=>{o.onerror=m=>{f(m.target.error)},o.onsuccess=m=>{c(m.target.result)}}))}{const o=this.cursor(i),c=[];return this.J(o,((f,m)=>{c.push(m)})).next((()=>c))}}Z(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new it(((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}}))}X(t,e){wt(Sr,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const s=this.cursor(i);return this.J(s,((o,c,f)=>f.delete()))}ee(t,e){let i;e?i=t:(i={},e=t);const s=this.cursor(i);return this.J(s,e)}te(t){const e=this.cursor({});return new it(((i,s)=>{e.onerror=o=>{const c=CS(o.target.error);s(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}J(t,e){const i=[];return new it(((s,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const f=c.target.result;if(!f)return void s();const m=new kP(f),g=e(f.primaryKey,f.value,m);if(g instanceof it){const E=g.catch((b=>(m.done(),it.reject(b))));i.push(E)}m.isDone?s():m.G===null?f.continue():f.continue(m.G)}})).next((()=>it.waitFor(i)))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Hf(n){return new it(((t,e)=>{n.onsuccess=i=>{const s=i.target.result;t(s)},n.onerror=i=>{const s=CS(i.target.error);e(s)}}))}let p3=!1;function CS(n){const t=Jl.M(ri());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p3||(p3=!0,setTimeout((()=>{throw i}),0)),i}}return n}const z0="IndexBackfiller";class UP{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){wt(z0,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();wt(z0,`Documents written: ${e}`)}catch(e){Kh(e)?wt(z0,"Ignoring IndexedDB error during index backfill: ",e):await jh(e)}await this.re(6e4)}))}}class zP{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const i=new Set;let s=e,o=!0;return it.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!i.has(c))return wt(z0,`Processing collection: ${c}`),this.oe(t,c,s).next((f=>{s-=f,i.add(c)}));o=!1})))).next((()=>e-s))}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((s=>this.localStore.localDocuments.getNextDocuments(t,e,s,i).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(s,o))).next((f=>(wt(z0,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(t,e,f)))).next((()=>c.size))}))))}_e(t,e){let i=t;return e.changes.forEach(((s,o)=>{const c=tR(o);RS(c,i)>0&&(i=c)})),new Ir(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class $a{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}$a.ce=-1;const Rh=-1;function w_(n){return n==null}function i_(n){return n===0&&1/n==-1/0}function sR(n){return typeof n=="number"&&Number.isInteger(n)&&!i_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const iv="";function Ws(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=g3(t)),t=BP(n.get(e),t);return g3(t)}function BP(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":e+="";break;case iv:e+="";break;default:e+=o}}return e}function g3(n){return n+iv+""}function Yl(n){const t=n.length;if(Yt(t>=2,64408,{path:n}),t===2)return Yt(n.charAt(0)===iv&&n.charAt(1)==="",56145,{path:n}),Pe.emptyPath();const e=t-2,i=[];let s="";for(let o=0;o<t;){const c=n.indexOf(iv,o);switch((c<0||c>e)&&qt(50515,{path:n}),n.charAt(c+1)){case"":const f=n.substring(o,c);let m;s.length===0?m=f:(s+=f,m=s,s=""),i.push(m);break;case"":s+=n.substring(o,c),s+="\0";break;case"":s+=n.substring(o,c+1);break;default:qt(61167,{path:n})}o=c+2}return new Pe(i)}const Gf="remoteDocuments",R_="owner",xm="owner",s_="mutationQueues",GP="userId",Ko="mutations",_3="batchId",Qf="userMutationsIndex",y3=["userId","batchId"];function U1(n,t){return[n,Ws(t)]}function aR(n,t,e){return[n,Ws(t),e]}const HP={},op="documentMutations",sv="remoteDocumentsV14",qP=["prefixPath","collectionGroup","readTime","documentId"],z1="documentKeyIndex",FP=["prefixPath","collectionGroup","documentId"],rR="collectionGroupIndex",jP=["collectionGroup","readTime","prefixPath","documentId"],a_="remoteDocumentGlobal",ST="remoteDocumentGlobalKey",lp="targets",oR="queryTargetsIndex",KP=["canonicalId","targetId"],up="targetDocuments",YP=["targetId","path"],IS="documentTargetsIndex",QP=["path","targetId"],av="targetGlobalKey",$f="targetGlobal",r_="collectionParents",XP=["collectionId","parent"],cp="clientMetadata",JP="clientId",jv="bundles",WP="bundleId",Kv="namedQueries",ZP="name",NS="indexConfiguration",$P="indexId",bT="collectionGroupIndex",tV="collectionGroup",B0="indexState",eV=["indexId","uid"],lR="sequenceNumberIndex",nV=["uid","sequenceNumber"],G0="indexEntries",iV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uR="documentKeyIndex",sV=["indexId","uid","orderedDocumentKey"],Yv="documentOverlays",aV=["userId","collectionPath","documentId"],AT="collectionPathOverlayIndex",rV=["userId","collectionPath","largestBatchId"],cR="collectionGroupOverlayIndex",oV=["userId","collectionGroup","largestBatchId"],DS="globals",lV="name",hR=[s_,Ko,op,Gf,lp,R_,$f,up,cp,a_,r_,jv,Kv],uV=[...hR,Yv],fR=[s_,Ko,op,sv,lp,R_,$f,up,cp,a_,r_,jv,Kv,Yv],dR=fR,xS=[...dR,NS,B0,G0],cV=xS,mR=[...xS,DS],hV=mR;class wT extends nR{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function ts(n,t){const e=Bt(n);return Jl.O(e.le,t)}function v3(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Yh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function pR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Dn{constructor(t,e){this.comparator=t,this.root=e||Is.EMPTY}insert(t,e){return new Dn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Is.BLACK,null,null))}remove(t){return new Dn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Is.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new A1(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new A1(this.root,t,this.comparator,!1)}getReverseIterator(){return new A1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new A1(this.root,t,this.comparator,!0)}}class A1{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Is{constructor(t,e,i,s,o){this.key=t,this.value=e,this.color=i??Is.RED,this.left=s??Is.EMPTY,this.right=o??Is.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,o){return new Is(t??this.key,e??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,i),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Is.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Is.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw qt(27949);return t+(this.isRed()?0:1)}}Is.EMPTY=null,Is.RED=!0,Is.BLACK=!1;Is.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(t,e,i,s,o){return this}insert(t,e,i){return new Is(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class on{constructor(t){this.comparator=t,this.data=new Dn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new E3(this.data.getIterator())}getIteratorFrom(t){return new E3(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof on)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new on(this.comparator);return e.data=t,e}}class E3{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Om(n){return n.hasNext()?n.getNext():void 0}class tr{constructor(t){this.fields=t,t.sort(Jn.comparator)}static empty(){return new tr([])}unionWith(t){let e=new on(Jn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new tr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ap(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class gR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function fV(){return typeof atob<"u"}class pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gR("Invalid base64 string: "+o):o}})(t);return new pi(e)}static fromUint8Array(t){const e=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(t);return new pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const dV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(n){if(Yt(!!n,39018),typeof n=="string"){let t=0;const e=dV.exec(n);if(Yt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tc(n){return typeof n=="string"?pi.fromBase64String(n):pi.fromUint8Array(n)}const _R="server_timestamp",yR="__type__",vR="__previous_value__",ER="__local_write_time__";function Qv(n){return(n?.mapValue?.fields||{})[yR]?.stringValue===_R}function Xv(n){const t=n.mapValue.fields[vR];return Qv(t)?Xv(t):t}function o_(n){const t=$u(n.mapValue.fields[ER].timestampValue);return new an(t.seconds,t.nanos)}class mV{constructor(t,e,i,s,o,c,f,m,g,E,b){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=E,this.apiKey=b}}const RT="(default)";class Mh{constructor(t,e){this.projectId=t,this.database=e||RT}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===RT}isEqual(t){return t instanceof Mh&&t.projectId===this.projectId&&t.database===this.database}}function pV(n,t){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Tt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(n.options.projectId,t)}const OS="__type__",TR="__max__",Sh={mapValue:{fields:{__type__:{stringValue:TR}}}},MS="__vector__",hp="value",B1={nullValue:"NULL_VALUE"};function Ph(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qv(n)?4:SR(n)?9007199254740991:Jv(n)?10:11:qt(28295,{value:n})}function tu(n,t){if(n===t)return!0;const e=Ph(n);if(e!==Ph(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return o_(n).isEqual(o_(t));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=$u(s.timestampValue),f=$u(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,o){return tc(s.bytesValue).isEqual(tc(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,o){return Xn(s.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(s.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)})(n,t);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Xn(s.integerValue)===Xn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Xn(s.doubleValue),f=Xn(o.doubleValue);return c===f?i_(c)===i_(f):isNaN(c)&&isNaN(f)}return!1})(n,t);case 9:return ap(n.arrayValue.values||[],t.arrayValue.values||[],tu);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},f=o.mapValue.fields||{};if(v3(c)!==v3(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!tu(c[m],f[m])))return!1;return!0})(n,t);default:return qt(52216,{left:n})}}function l_(n,t){return(n.values||[]).find((e=>tu(e,t)))!==void 0}function Vh(n,t){if(n===t)return 0;const e=Ph(n),i=Ph(t);if(e!==i)return le(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const f=Xn(o.integerValue||o.doubleValue),m=Xn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,t);case 3:return T3(n.timestampValue,t.timestampValue);case 4:return T3(o_(n),o_(t));case 5:return ET(n.stringValue,t.stringValue);case 6:return(function(o,c){const f=tc(o),m=tc(c);return f.compareTo(m)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const f=o.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const E=le(f[g],m[g]);if(E!==0)return E}return le(f.length,m.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const f=le(Xn(o.latitude),Xn(c.latitude));return f!==0?f:le(Xn(o.longitude),Xn(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return S3(n.arrayValue,t.arrayValue);case 10:return(function(o,c){const f=o.fields||{},m=c.fields||{},g=f[hp]?.arrayValue,E=m[hp]?.arrayValue,b=le(g?.values?.length||0,E?.values?.length||0);return b!==0?b:S3(g,E)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===Sh.mapValue&&c===Sh.mapValue)return 0;if(o===Sh.mapValue)return 1;if(c===Sh.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),g=c.fields||{},E=Object.keys(g);m.sort(),E.sort();for(let b=0;b<m.length&&b<E.length;++b){const A=ET(m[b],E[b]);if(A!==0)return A;const N=Vh(f[m[b]],g[E[b]]);if(N!==0)return N}return le(m.length,E.length)})(n.mapValue,t.mapValue);default:throw qt(23264,{he:e})}}function T3(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return le(n,t);const e=$u(n),i=$u(t),s=le(e.seconds,i.seconds);return s!==0?s:le(e.nanos,i.nanos)}function S3(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const o=Vh(e[s],i[s]);if(o)return o}return le(e.length,i.length)}function fp(n){return CT(n)}function CT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=$u(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return tc(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return Lt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(const o of e.values||[])s?s=!1:i+=",",i+=CT(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${CT(e.fields[c])}`;return s+"}"})(n.mapValue):qt(61005,{value:n})}function G1(n){switch(Ph(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xv(n);return t?16+G1(t):16;case 5:return 2*n.stringValue.length;case 6:return tc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+G1(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Yh(i.fields,((o,c)=>{s+=o.length+G1(c)})),s})(n.mapValue);default:throw qt(13486,{value:n})}}function sd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function IT(n){return!!n&&"integerValue"in n}function u_(n){return!!n&&"arrayValue"in n}function b3(n){return!!n&&"nullValue"in n}function A3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function H1(n){return!!n&&"mapValue"in n}function Jv(n){return(n?.mapValue?.fields||{})[OS]?.stringValue===MS}function H0(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Yh(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=H0(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=H0(n.arrayValue.values[e]);return t}return{...n}}function SR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TR}const bR={mapValue:{fields:{[OS]:{stringValue:MS},[hp]:{arrayValue:{}}}}};function gV(n){return"nullValue"in n?B1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sd(Mh.empty(),Lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Jv(n)?bR:{mapValue:{}}:qt(35942,{value:n})}function _V(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sd(Mh.empty(),Lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?bR:"mapValue"in n?Jv(n)?{mapValue:{}}:Sh:qt(61959,{value:n})}function w3(n,t){const e=Vh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function R3(n,t){const e=Vh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Ns{constructor(t){this.value=t}static empty(){return new Ns({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!H1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=H0(e)}setAll(t){let e=Jn.emptyPath(),i={},s=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=f.popLast()}c?i[f.lastSegment()]=H0(c):s.push(f.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,s)}delete(t){const e=this.field(t.popLast());H1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return tu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];H1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Yh(e,((s,o)=>t[s]=o));for(const s of i)delete t[s]}clone(){return new Ns(H0(this.value))}}function AR(n){const t=[];return Yh(n.fields,((e,i)=>{const s=new Jn([e]);if(H1(i)){const o=AR(i.mapValue).fields;if(o.length===0)t.push(s);else for(const c of o)t.push(s.child(c))}else t.push(s)})),new tr(t)}class Gn{constructor(t,e,i,s,o,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(t){return new Gn(t,0,Wt.min(),Wt.min(),Wt.min(),Ns.empty(),0)}static newFoundDocument(t,e,i,s){return new Gn(t,1,e,Wt.min(),i,s,0)}static newNoDocument(t,e){return new Gn(t,2,e,Wt.min(),Wt.min(),Ns.empty(),0)}static newUnknownDocument(t,e){return new Gn(t,3,e,Wt.min(),Wt.min(),Ns.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ns.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Gn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kh{constructor(t,e){this.position=t,this.inclusive=e}}function C3(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const o=t[s],c=n.position[s];if(o.field.isKeyField()?i=Lt.comparator(Lt.fromName(c.referenceValue),e.key):i=Vh(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function I3(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!tu(n.position[e],t.position[e]))return!1;return!0}class c_{constructor(t,e="asc"){this.field=t,this.dir=e}}function yV(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class wR{}class ze extends wR{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new vV(t,e,i):e==="array-contains"?new SV(t,i):e==="in"?new xR(t,i):e==="not-in"?new bV(t,i):e==="array-contains-any"?new AV(t,i):new ze(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new EV(t,i):new TV(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Vh(e,this.value)):e!==null&&Ph(this.value)===Ph(e)&&this.matchesComparison(Vh(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends wR{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new rn(t,e)}matches(t){return dp(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dp(n){return n.op==="and"}function NT(n){return n.op==="or"}function PS(n){return RR(n)&&dp(n)}function RR(n){for(const t of n.filters)if(t instanceof rn)return!1;return!0}function DT(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+fp(n.value);if(PS(n))return n.filters.map((t=>DT(t))).join(",");{const t=n.filters.map((e=>DT(e))).join(",");return`${n.op}(${t})`}}function CR(n,t){return n instanceof ze?(function(i,s){return s instanceof ze&&i.op===s.op&&i.field.isEqual(s.field)&&tu(i.value,s.value)})(n,t):n instanceof rn?(function(i,s){return s instanceof rn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,c,f)=>o&&CR(c,s.filters[f])),!0):!1})(n,t):void qt(19439)}function IR(n,t){const e=n.filters.concat(t);return rn.create(e,n.op)}function NR(n){return n instanceof ze?(function(e){return`${e.field.canonicalString()} ${e.op} ${fp(e.value)}`})(n):n instanceof rn?(function(e){return e.op.toString()+" {"+e.getFilters().map(NR).join(" ,")+"}"})(n):"Filter"}class vV extends ze{constructor(t,e,i){super(t,e,i),this.key=Lt.fromName(i.referenceValue)}matches(t){const e=Lt.comparator(t.key,this.key);return this.matchesComparison(e)}}class EV extends ze{constructor(t,e){super(t,"in",e),this.keys=DR("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class TV extends ze{constructor(t,e){super(t,"not-in",e),this.keys=DR("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function DR(n,t){return(t.arrayValue?.values||[]).map((e=>Lt.fromName(e.referenceValue)))}class SV extends ze{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return u_(e)&&l_(e.arrayValue,this.value)}}class xR extends ze{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&l_(this.value.arrayValue,e)}}class bV extends ze{constructor(t,e){super(t,"not-in",e)}matches(t){if(l_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!l_(this.value.arrayValue,e)}}class AV extends ze{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!u_(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>l_(this.value.arrayValue,i)))}}class wV{constructor(t,e=null,i=[],s=[],o=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function xT(n,t=null,e=[],i=[],s=null,o=null,c=null){return new wV(n,t,e,i,s,o,c)}function ad(n){const t=Bt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>DT(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),w_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>fp(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>fp(i))).join(",")),t.Te=e}return t.Te}function C_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!yV(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!CR(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!I3(n.startAt,t.startAt)&&I3(n.endAt,t.endAt)}function rv(n){return Lt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ov(n,t){return n.filters.filter((e=>e instanceof ze&&e.field.isEqual(t)))}function N3(n,t,e){let i=B1,s=!0;for(const o of ov(n,t)){let c=B1,f=!0;switch(o.op){case"<":case"<=":c=gV(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,f=!1;break;case"!=":case"not-in":c=B1}w3({value:i,inclusive:s},{value:c,inclusive:f})<0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];w3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})<0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}function D3(n,t,e){let i=Sh,s=!0;for(const o of ov(n,t)){let c=Sh,f=!0;switch(o.op){case">=":case">":c=_V(o.value),f=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,f=!1;break;case"!=":case"not-in":c=Sh}R3({value:i,inclusive:s},{value:c,inclusive:f})>0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];R3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})>0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}class rc{constructor(t,e=null,i=[],s=[],o=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function OR(n,t,e,i,s,o,c,f){return new rc(n,t,e,i,s,o,c,f)}function xp(n){return new rc(n)}function x3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RV(n){return Lt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function VS(n){return n.collectionGroup!==null}function Ym(n){const t=Bt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new on(Jn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new c_(o,i))})),e.has(Jn.keyField().canonicalString())||t.Ie.push(new c_(Jn.keyField(),i))}return t.Ie}function Ea(n){const t=Bt(n);return t.Ee||(t.Ee=CV(t,Ym(n))),t.Ee}function CV(n,t){if(n.limitType==="F")return xT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new c_(s.field,o)}));const e=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return xT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function OT(n,t){const e=n.filters.concat([t]);return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function IV(n,t){const e=n.explicitOrderBy.concat([t]);return new rc(n.path,n.collectionGroup,e,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function lv(n,t,e){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function NV(n,t){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,t,n.endAt)}function DV(n,t){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,t)}function I_(n,t){return C_(Ea(n),Ea(t))&&n.limitType===t.limitType}function MR(n){return`${ad(Ea(n))}|lt:${n.limitType}`}function Bm(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>NR(s))).join(", ")}]`),w_(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>fp(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>fp(s))).join(",")),`Target(${i})`})(Ea(n))}; limitType=${n.limitType})`}function N_(n,t){return t.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Lt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,s){for(const o of Ym(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(c,f,m){const g=C3(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,Ym(i),s)||i.endAt&&!(function(c,f,m){const g=C3(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,Ym(i),s))})(n,t)}function PR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VR(n){return(t,e)=>{let i=!1;for(const s of Ym(n)){const o=xV(s,t,e);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function xV(n,t,e){const i=n.field.isKeyField()?Lt.comparator(t.key,e.key):(function(o,c,f){const m=c.data.field(o),g=f.data.field(o);return m!==null&&g!==null?Vh(m,g):qt(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qt(19790,{direction:n.dir})}}class oc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Yh(this.inner,((e,i)=>{for(const[s,o]of i)t(s,o)}))}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}const OV=new Dn(Lt.comparator);function er(){return OV}const kR=new Dn(Lt.comparator);function I0(...n){let t=kR;for(const e of n)t=t.insert(e.key,e);return t}function LR(n){let t=kR;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Ql(){return q0()}function UR(){return q0()}function q0(){return new oc((n=>n.toString()),((n,t)=>n.isEqual(t)))}const MV=new Dn(Lt.comparator),PV=new on(Lt.comparator);function ve(...n){let t=PV;for(const e of n)t=t.add(e);return t}const VV=new on(le);function kS(){return VV}function LS(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:i_(t)?"-0":t}}function zR(n){return{integerValue:""+n}}function BR(n,t){return sR(t)?zR(t):LS(n,t)}class Wv{constructor(){this._=void 0}}function kV(n,t,e){return n instanceof mp?(function(s,o){const c={fields:{[yR]:{stringValue:_R},[ER]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Qv(o)&&(o=Xv(o)),o&&(c.fields[vR]=o),{mapValue:c}})(e,t):n instanceof rd?HR(n,t):n instanceof od?qR(n,t):(function(s,o){const c=GR(s,o),f=O3(c)+O3(s.Ae);return IT(c)&&IT(s.Ae)?zR(f):LS(s.serializer,f)})(n,t)}function LV(n,t,e){return n instanceof rd?HR(n,t):n instanceof od?qR(n,t):e}function GR(n,t){return n instanceof pp?(function(i){return IT(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class mp extends Wv{}class rd extends Wv{constructor(t){super(),this.elements=t}}function HR(n,t){const e=FR(t);for(const i of n.elements)e.some((s=>tu(s,i)))||e.push(i);return{arrayValue:{values:e}}}class od extends Wv{constructor(t){super(),this.elements=t}}function qR(n,t){let e=FR(t);for(const i of n.elements)e=e.filter((s=>!tu(s,i)));return{arrayValue:{values:e}}}class pp extends Wv{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function O3(n){return Xn(n.integerValue||n.doubleValue)}function FR(n){return u_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D_{constructor(t,e){this.field=t,this.transform=e}}function UV(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof rd&&s instanceof rd||i instanceof od&&s instanceof od?ap(i.elements,s.elements,tu):i instanceof pp&&s instanceof pp?tu(i.Ae,s.Ae):i instanceof mp&&s instanceof mp})(n.transform,t.transform)}class zV{constructor(t,e){this.version=t,this.transformResults=e}}class Wn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function q1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Zv{}function jR(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Mp(n.key,Wn.none()):new Op(n.key,n.data,Wn.none());{const e=n.data,i=Ns.empty();let s=new on(Jn.comparator);for(let o of t.fields)if(!s.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new lc(n.key,i,new tr(s.toArray()),Wn.none())}}function BV(n,t,e){n instanceof Op?(function(s,o,c){const f=s.value.clone(),m=P3(s.fieldTransforms,o,c.transformResults);f.setAll(m),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):n instanceof lc?(function(s,o,c){if(!q1(s.precondition,o))return void o.convertToUnknownDocument(c.version);const f=P3(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(KR(s)),m.setAll(f),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function F0(n,t,e,i){return n instanceof Op?(function(o,c,f,m){if(!q1(o.precondition,c))return f;const g=o.value.clone(),E=V3(o.fieldTransforms,m,c);return g.setAll(E),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof lc?(function(o,c,f,m){if(!q1(o.precondition,c))return f;const g=V3(o.fieldTransforms,m,c),E=c.data;return E.setAll(KR(o)),E.setAll(g),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,t,e,i):(function(o,c,f){return q1(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,t,e)}function GV(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),o=GR(i.transform,s||null);o!=null&&(e===null&&(e=Ns.empty()),e.set(i.field,o))}return e||null}function M3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ap(i,s,((o,c)=>UV(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Op extends Zv{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class lc extends Zv{constructor(t,e,i,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function KR(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function P3(n,t,e){const i=new Map;Yt(n.length===e.length,32656,{Ve:e.length,de:n.length});for(let s=0;s<e.length;s++){const o=n[s],c=o.transform,f=t.data.field(o.field);i.set(o.field,LV(c,f,e[s]))}return i}function V3(n,t,e){const i=new Map;for(const s of n){const o=s.transform,c=e.data.field(s.field);i.set(s.field,kV(o,c,t))}return i}class Mp extends Zv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class US extends Zv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zS{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&BV(o,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=F0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=F0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=UR();return this.mutations.forEach((s=>{const o=t.get(s.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=e.has(s.key)?null:f;const m=jR(c,f);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Wt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ve())}isEqual(t){return this.batchId===t.batchId&&ap(this.mutations,t.mutations,((e,i)=>M3(e,i)))&&ap(this.baseMutations,t.baseMutations,((e,i)=>M3(e,i)))}}class BS{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Yt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=(function(){return MV})();const o=t.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new BS(t,e,i,s)}}class GS{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HV{constructor(t,e){this.count=t,this.unchangedNames=e}}var Ui,Fe;function YR(n){switch(n){case ht.OK:return qt(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return qt(15467,{code:n})}}function QR(n){if(n===void 0)return Ai("GRPC error has no .code"),ht.UNKNOWN;switch(n){case Ui.OK:return ht.OK;case Ui.CANCELLED:return ht.CANCELLED;case Ui.UNKNOWN:return ht.UNKNOWN;case Ui.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Ui.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Ui.INTERNAL:return ht.INTERNAL;case Ui.UNAVAILABLE:return ht.UNAVAILABLE;case Ui.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Ui.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Ui.NOT_FOUND:return ht.NOT_FOUND;case Ui.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Ui.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Ui.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Ui.ABORTED:return ht.ABORTED;case Ui.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Ui.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Ui.DATA_LOSS:return ht.DATA_LOSS;default:return qt(39323,{code:n})}}(Fe=Ui||(Ui={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";function XR(){return new TextEncoder}const qV=new wh([4294967295,4294967295],0);function k3(n){const t=XR().encode(n),e=new Gw;return e.update(t),new Uint8Array(e.digest())}function L3(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new wh([e,i],0),new wh([s,o],0)]}class HS{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new N0(`Invalid padding: ${e}`);if(i<0)throw new N0(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new N0(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new N0(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=wh.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(wh.fromNumber(i)));return s.compare(qV)===1&&(s=new wh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=k3(t),[i,s]=L3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new HS(o,s,e);return i.forEach((f=>c.insert(f))),c}insert(t){if(this.ge===0)return;const e=k3(t),[i,s]=L3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);this.be(c)}}be(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class N0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class x_{constructor(t,e,i,s,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,O_.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new x_(Wt.min(),s,new Dn(le),er(),ve())}}class O_{constructor(t,e,i,s,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new O_(i,e,ve(),ve(),ve())}}class F1{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=s}}class JR{constructor(t,e){this.targetId=t,this.Ce=e}}class WR{constructor(t,e,i=pi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class U3{constructor(){this.ve=0,this.Fe=z3(),this.Me=pi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ve(),e=ve(),i=ve();return this.Fe.forEach(((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:qt(38017,{changeType:o})}})),new O_(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=z3()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class FV{constructor(t){this.Ge=t,this.ze=new Map,this.je=er(),this.He=w1(),this.Je=w1(),this.Ze=new Dn(le)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:qt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const o=s.target;if(rv(o))if(i===0){const c=new Lt(o.path);this.et(e,c,Gn.newNoDocument(c,Wt.min()))}else Yt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const f=this.ut(t),m=f?this.ct(f,t,c):1;if(m!==0){this.it(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=e;let c,f;try{c=tc(i).toUint8Array()}catch(m){if(m instanceof gR)return Wo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new HS(c,s,o)}catch(m){return Wo(m instanceof N0?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(f)||(this.et(e,o,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&rv(f.target)){const m=new Lt(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Gn.newNoDocument(m,t))}o.Be&&(e.set(c,o.ke()),o.Ke())}}));let i=ve();this.Je.forEach(((o,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const s=new x_(t,e,this.Ze,this.je,i);return this.je=er(),this.He=w1(),this.Je=w1(),this.Ze=new Dn(le),s}Ye(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.qe(e,1):s.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new U3,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new on(le),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new on(le),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||wt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new U3),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function w1(){return new Dn(Lt.comparator)}function z3(){return new Dn(Lt.comparator)}const jV={asc:"ASCENDING",desc:"DESCENDING"},KV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YV={and:"AND",or:"OR"};class QV{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function MT(n,t){return n.useProto3Json||w_(t)?t:{value:t}}function gp(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ZR(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function XV(n,t){return gp(n,t.toTimestamp())}function wi(n){return Yt(!!n,49232),Wt.fromTimestamp((function(e){const i=$u(e);return new an(i.seconds,i.nanos)})(n))}function qS(n,t){return PT(n,t).canonicalString()}function PT(n,t){const e=(function(s){return new Pe(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function $R(n){const t=Pe.fromString(n);return Yt(uC(t),10190,{key:t.toString()}),t}function h_(n,t){return qS(n.databaseId,t.path)}function Wl(n,t){const e=$R(t);if(e.get(1)!==n.databaseId.projectId)throw new Tt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Tt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Lt(nC(e))}function tC(n,t){return qS(n.databaseId,t)}function eC(n){const t=$R(n);return t.length===4?Pe.emptyPath():nC(t)}function VT(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nC(n){return Yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function B3(n,t,e){return{name:h_(n,t),fields:e.value.mapValue.fields}}function iC(n,t,e){const i=Wl(n,t.name),s=wi(t.updateTime),o=t.createTime?wi(t.createTime):Wt.min(),c=new Ns({mapValue:{fields:t.fields}}),f=Gn.newFoundDocument(i,s,o,c);return e&&f.setHasCommittedMutations(),e?f.setHasCommittedMutations():f}function JV(n,t){return"found"in t?(function(i,s){Yt(!!s.found,43571),s.found.name,s.found.updateTime;const o=Wl(i,s.found.name),c=wi(s.found.updateTime),f=s.found.createTime?wi(s.found.createTime):Wt.min(),m=new Ns({mapValue:{fields:s.found.fields}});return Gn.newFoundDocument(o,c,f,m)})(n,t):"missing"in t?(function(i,s){Yt(!!s.missing,3894),Yt(!!s.readTime,22933);const o=Wl(i,s.missing),c=wi(s.readTime);return Gn.newNoDocument(o,c)})(n,t):qt(7234,{result:t})}function WV(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:qt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=(function(g,E){return g.useProto3Json?(Yt(E===void 0||typeof E=="string",58123),pi.fromBase64String(E||"")):(Yt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),pi.fromUint8Array(E||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const E=g.code===void 0?ht.UNKNOWN:QR(g.code);return new Tt(E,g.message||"")})(c);e=new WR(i,s,o,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Wl(n,i.document.name),o=wi(i.document.updateTime),c=i.document.createTime?wi(i.document.createTime):Wt.min(),f=new Ns({mapValue:{fields:i.document.fields}}),m=Gn.newFoundDocument(s,o,c,f),g=i.targetIds||[],E=i.removedTargetIds||[];e=new F1(g,E,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Wl(n,i.document),o=i.readTime?wi(i.readTime):Wt.min(),c=Gn.newNoDocument(s,o),f=i.removedTargetIds||[];e=new F1([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Wl(n,i.document),o=i.removedTargetIds||[];e=new F1([],o,s,null)}else{if(!("filter"in t))return qt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new HV(s,o),f=i.targetId;e=new JR(f,c)}}return e}function f_(n,t){let e;if(t instanceof Op)e={update:B3(n,t.key,t.value)};else if(t instanceof Mp)e={delete:h_(n,t.key)};else if(t instanceof lc)e={update:B3(n,t.key,t.data),updateMask:ik(t.fieldMask)};else{if(!(t instanceof US))return qt(16599,{dt:t.type});e={verify:h_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const f=c.transform;if(f instanceof mp)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof rd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof od)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pp)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw qt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:XV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:qt(27497)})(n,t.precondition)),e}function kT(n,t){const e=t.currentDocument?(function(o){return o.updateTime!==void 0?Wn.updateTime(wi(o.updateTime)):o.exists!==void 0?Wn.exists(o.exists):Wn.none()})(t.currentDocument):Wn.none(),i=t.updateTransforms?t.updateTransforms.map((s=>(function(c,f){let m=null;if("setToServerValue"in f)Yt(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new mp;else if("appendMissingElements"in f){const E=f.appendMissingElements.values||[];m=new rd(E)}else if("removeAllFromArray"in f){const E=f.removeAllFromArray.values||[];m=new od(E)}else"increment"in f?m=new pp(c,f.increment):qt(16584,{proto:f});const g=Jn.fromServerFormat(f.fieldPath);return new D_(g,m)})(n,s))):[];if(t.update){t.update.name;const s=Wl(n,t.update.name),o=new Ns({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new tr(g.map((E=>Jn.fromServerFormat(E))))})(t.updateMask);return new lc(s,o,c,e,i)}return new Op(s,o,e,i)}if(t.delete){const s=Wl(n,t.delete);return new Mp(s,e)}if(t.verify){const s=Wl(n,t.verify);return new US(s,e)}return qt(1463,{proto:t})}function ZV(n,t){return n&&n.length>0?(Yt(t!==void 0,14353),n.map((e=>(function(s,o){let c=s.updateTime?wi(s.updateTime):wi(o);return c.isEqual(Wt.min())&&(c=wi(o)),new zV(c,s.transformResults||[])})(e,t)))):[]}function sC(n,t){return{documents:[tC(n,t.path)]}}function aC(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=tC(n,s);const o=(function(g){if(g.length!==0)return lC(rn.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(g){if(g.length!==0)return g.map((E=>(function(A){return{field:Gm(A.field),direction:tk(A.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=MT(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:s}}function rC(n){let t=eC(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Yt(i===1,65062);const E=e.from[0];E.allDescendants?s=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=(function(b){const A=oC(b);return A instanceof rn&&PS(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(b){return b.map((A=>(function(D){return new c_(Hm(D.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(A)))})(e.orderBy));let f=null;e.limit&&(f=(function(b){let A;return A=typeof b=="object"?b.value:b,w_(A)?null:A})(e.limit));let m=null;e.startAt&&(m=(function(b){const A=!!b.before,N=b.values||[];return new kh(N,A)})(e.startAt));let g=null;return e.endAt&&(g=(function(b){const A=!b.before,N=b.values||[];return new kh(N,A)})(e.endAt)),OR(t,s,c,o,f,"F",m,g)}function $V(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function oC(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Hm(e.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Hm(e.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hm(e.unaryFilter.field);return ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hm(e.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return ze.create(Hm(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return rn.create(e.compositeFilter.filters.map((i=>oC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qt(1026)}})(e.compositeFilter.op))})(n):qt(30097,{filter:n})}function tk(n){return jV[n]}function ek(n){return KV[n]}function nk(n){return YV[n]}function Gm(n){return{fieldPath:n.canonicalString()}}function Hm(n){return Jn.fromServerFormat(n.fieldPath)}function lC(n){return n instanceof ze?(function(e){if(e.op==="=="){if(A3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NAN"}};if(b3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(A3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NOT_NAN"}};if(b3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gm(e.field),op:ek(e.op),value:e.value}}})(n):n instanceof rn?(function(e){const i=e.getFilters().map((s=>lC(s)));return i.length===1?i[0]:{compositeFilter:{op:nk(e.op),filters:i}}})(n):qt(54877,{filter:n})}function ik(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function uC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function cC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Ku{constructor(t,e,i,s,o=Wt.min(),c=Wt.min(),f=pi.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new Ku(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class hC{constructor(t){this.yt=t}}function sk(n,t){let e;if(t.document)e=iC(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Lt.fromSegments(t.noDocument.path),s=ud(t.noDocument.readTime);e=Gn.newNoDocument(i,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return qt(56709);{const i=Lt.fromSegments(t.unknownDocument.path),s=ud(t.unknownDocument.version);e=Gn.newUnknownDocument(i,s)}}return t.readTime&&e.setReadTime((function(s){const o=new an(s[0],s[1]);return Wt.fromTimestamp(o)})(t.readTime)),e}function G3(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:uv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=(function(o,c){return{name:h_(o,c.key),fields:c.data.value.mapValue.fields,updateTime:gp(o,c.version.toTimestamp()),createTime:gp(o,c.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:ld(t.version)};else{if(!t.isUnknownDocument())return qt(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:ld(t.version)}}return i}function uv(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function ld(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ud(n){const t=new an(n.seconds,n.nanoseconds);return Wt.fromTimestamp(t)}function qf(n,t){const e=(t.baseMutations||[]).map((o=>kT(n.yt,o)));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){const f=t.mutations[o+1];c.updateTransforms=f.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const i=t.mutations.map((o=>kT(n.yt,o))),s=an.fromMillis(t.localWriteTimeMs);return new zS(t.batchId,s,e,i)}function D0(n){const t=ud(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?ud(n.lastLimboFreeSnapshotVersion):Wt.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Yt(c===1,1966,{count:c}),Ea(xp(eC(o.documents[0])))})(n.query):(function(o){return Ea(rC(o))})(n.query),new Ku(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,pi.fromBase64String(n.resumeToken))}function fC(n,t){const e=ld(t.snapshotVersion),i=ld(t.lastLimboFreeSnapshotVersion);let s;s=rv(t.target)?sC(n.yt,t.target):aC(n.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ad(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function FS(n){const t=rC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lv(t,t.limit,"L"):t}function ME(n,t){return new GS(t.largestBatchId,kT(n.yt,t.overlayMutation))}function H3(n,t){const e=t.path.lastSegment();return[n,Ws(t.path.popLast()),e]}function q3(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:ld(i.readTime),documentKey:Ws(i.documentKey.path),largestBatchId:i.largestBatchId}}class ak{getBundleMetadata(t,e){return F3(t).get(e).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:ud(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(t,e){return F3(t).put((function(s){return{bundleId:s.id,createTime:ld(wi(s.createTime)),version:s.version}})(e))}getNamedQuery(t,e){return j3(t).get(e).next((i=>{if(i)return(function(o){return{name:o.name,query:FS(o.bundledQuery),readTime:ud(o.readTime)}})(i)}))}saveNamedQuery(t,e){return j3(t).put((function(s){return{name:s.name,readTime:ld(wi(s.readTime)),bundledQuery:s.bundledQuery}})(e))}}function F3(n){return ts(n,jv)}function j3(n){return ts(n,Kv)}class $v{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new $v(t,i)}getOverlay(t,e){return c0(t).get(H3(this.userId,e)).next((i=>i?ME(this.serializer,i):null))}getOverlays(t,e){const i=Ql();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){const s=[];return i.forEach(((o,c)=>{const f=new GS(e,c);s.push(this.bt(t,f))})),it.waitFor(s)}removeOverlaysForBatchId(t,e,i){const s=new Set;e.forEach((c=>s.add(Ws(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(c0(t).X(AT,f))})),it.waitFor(o)}getOverlaysForCollection(t,e,i){const s=Ql(),o=Ws(e),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return c0(t).H(AT,c).next((f=>{for(const m of f){const g=ME(this.serializer,m);s.set(g.getKey(),g)}return s}))}getOverlaysForCollectionGroup(t,e,i,s){const o=Ql();let c;const f=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return c0(t).ee({index:cR,range:f},((m,g,E)=>{const b=ME(this.serializer,g);o.size()<s||b.largestBatchId===c?(o.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>o))}bt(t,e){return c0(t).put((function(s,o,c){const[f,m,g]=H3(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:f_(s.yt,c.mutation)}})(this.serializer,this.userId,e))}}function c0(n){return ts(n,Yv)}class rk{St(t){return ts(t,DS)}getSessionToken(t){return this.St(t).get("sessionToken").next((e=>{const i=e?.value;return i?pi.fromUint8Array(i):pi.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Ff{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Xn(t.integerValue));else if("doubleValue"in t){const i=Xn(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),i_(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=$u(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(tc(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?SR(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Jv(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):qt(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){const i=t.fields||{};this.Ft(e,55);for(const s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){const i=t.fields||{};this.Ft(e,53);const s=hp,o=i[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(Xn(o)),this.Ot(s,e),this.Ct(i[s],e)}qt(t,e){const i=t.values||[];this.Ft(e,50);for(const s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),Lt.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Ff.Wt=new Ff;const Mm=255;function ok(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function K3(n){const t=64-(function(i){let s=0;for(let o=0;o<8;++o){const c=ok(255&i[o]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(t/8)}class lk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ht(i.value),i=e.next();this.Jt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const s=e.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(t){const e=this.en(t),i=K3(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),i=K3(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(Mm),this.sn(255)}_n(){this.an(Mm),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let s=1;s<e.length;++s)e[s]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Mm?(this.sn(Mm),this.sn(0)):this.sn(e)}Ht(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Mm?(this.an(Mm),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class uk{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class ck{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class h0{constructor(){this.cn=new lk,this.ascending=new uk(this.cn),this.descending=new ck(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class jf{constructor(t,e,i,s){this.hn=t,this.Pn=e,this.Tn=i,this.In=s}En(){const t=this.In.length,e=t===0||this.In[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.In,0),e!==t?i.set([0],this.In.length):++i[i.length-1],new jf(this.hn,this.Pn,this.Tn,i)}Rn(t,e,i){return{indexId:this.hn,uid:t,arrayValue:j1(this.Tn),directionalValue:j1(this.In),orderedDocumentKey:j1(e),documentKey:i.path.toArray()}}An(t,e,i){const s=this.Rn(t,e,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function fh(n,t){let e=n.hn-t.hn;return e!==0?e:(e=Y3(n.Tn,t.Tn),e!==0?e:(e=Y3(n.In,t.In),e!==0?e:Lt.comparator(n.Pn,t.Pn)))}function Y3(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}function j1(n){return Iw()?(function(e){let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return i})(n):n}function Q3(n){return typeof n!="string"?n:(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(n)}class X3{constructor(t){this.Vn=new on(((e,i)=>Jn.comparator(e.field,i.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(t){if(Yt(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const e=TT(t);if(e!==void 0&&!this.pn(e))return!1;const i=Bf(t);let s=new Set,o=0,c=0;for(;o<i.length&&this.pn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!s.has(f.field.canonicalString())){const m=i[o];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++o}for(;o<i.length;++o){const f=i[o];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let t=new on(Jn.comparator);const e=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new L1(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new L1(i.field,0))}for(const i of this.dn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new L1(i.field,i.dir==="asc"?0:1)));return new nv(nv.UNKNOWN_ID,this.collectionId,e,n_.empty())}pn(t){for(const e of this.mn)if(this.yn(e,t))return!0;return!1}yn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}wn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function dC(n){if(Yt(n instanceof ze||n instanceof rn,20012),n instanceof ze){if(n instanceof xR){const e=n.value.arrayValue?.values?.map((i=>ze.create(n.field,"==",i)))||[];return rn.create(e,"or")}return n}const t=n.filters.map((e=>dC(e)));return rn.create(t,n.op)}function hk(n){if(n.getFilters().length===0)return[];const t=zT(dC(n));return Yt(mC(t),7391),LT(t)||UT(t)?[t]:t.getFilters()}function LT(n){return n instanceof ze}function UT(n){return n instanceof rn&&PS(n)}function mC(n){return LT(n)||UT(n)||(function(e){if(e instanceof rn&&NT(e)){for(const i of e.getFilters())if(!LT(i)&&!UT(i))return!1;return!0}return!1})(n)}function zT(n){if(Yt(n instanceof ze||n instanceof rn,34018),n instanceof ze)return n;if(n.filters.length===1)return zT(n.filters[0]);const t=n.filters.map((i=>zT(i)));let e=rn.create(t,n.op);return e=cv(e),mC(e)?e:(Yt(e instanceof rn,64498),Yt(dp(e),40251),Yt(e.filters.length>1,57927),e.filters.reduce(((i,s)=>jS(i,s))))}function jS(n,t){let e;return Yt(n instanceof ze||n instanceof rn,38388),Yt(t instanceof ze||t instanceof rn,25473),e=n instanceof ze?t instanceof ze?(function(s,o){return rn.create([s,o],"and")})(n,t):J3(n,t):t instanceof ze?J3(t,n):(function(s,o){if(Yt(s.filters.length>0&&o.filters.length>0,48005),dp(s)&&dp(o))return IR(s,o.getFilters());const c=NT(s)?s:o,f=NT(s)?o:s,m=c.filters.map((g=>jS(g,f)));return rn.create(m,"or")})(n,t),cv(e)}function J3(n,t){if(dp(t))return IR(t,n.getFilters());{const e=t.filters.map((i=>jS(n,i)));return rn.create(e,"or")}}function cv(n){if(Yt(n instanceof ze||n instanceof rn,11850),n instanceof ze)return n;const t=n.getFilters();if(t.length===1)return cv(t[0]);if(RR(n))return n;const e=t.map((s=>cv(s))),i=[];return e.forEach((s=>{s instanceof ze?i.push(s):s instanceof rn&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:rn.create(i,n.op)}class fk{constructor(){this.Sn=new KS}addToCollectionParentIndex(t,e){return this.Sn.add(e),it.resolve()}getCollectionParents(t,e){return it.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return it.resolve()}deleteFieldIndex(t,e){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,e){return it.resolve()}getDocumentsMatchingTarget(t,e){return it.resolve(null)}getIndexType(t,e){return it.resolve(0)}getFieldIndexes(t,e){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,e){return it.resolve(Ir.min())}getMinOffsetFromCollectionGroup(t,e){return it.resolve(Ir.min())}updateCollectionGroup(t,e,i){return it.resolve()}updateIndexEntries(t,e){return it.resolve()}}class KS{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new on(Pe.comparator),o=!s.has(i);return this.index[e]=s.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new on(Pe.comparator)).toArray()}}const W3="IndexedDbIndexManager",R1=new Uint8Array(0);class dk{constructor(t,e){this.databaseId=e,this.Dn=new KS,this.Cn=new oc((i=>ad(i)),((i,s)=>C_(i,s))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Dn.has(e)){const i=e.lastSegment(),s=e.popLast();t.addOnCommittedListener((()=>{this.Dn.add(e)}));const o={collectionId:i,parent:Ws(s)};return Z3(t).put(o)}return it.resolve()}getCollectionParents(t,e){const i=[],s=IDBKeyRange.bound([e,""],[Xw(e),""],!1,!0);return Z3(t).H(s).next((o=>{for(const c of o){if(c.collectionId!==e)break;i.push(Yl(c.parent))}return i}))}addFieldIndex(t,e){const i=f0(t),s=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(e);delete s.indexId;const o=i.add(s);if(e.indexState){const c=Vm(t);return o.next((f=>{c.put(q3(f,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return o.next()}deleteFieldIndex(t,e){const i=f0(t),s=Vm(t),o=Pm(t);return i.delete(e.indexId).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=f0(t),i=Pm(t),s=Vm(t);return e.X().next((()=>i.X())).next((()=>s.X()))}createTargetIndexes(t,e){return it.forEach(this.vn(e),(i=>this.getIndexType(t,i).next((s=>{if(s===0||s===1){const o=new X3(i).bn();if(o!=null)return this.addFieldIndex(t,o)}}))))}getDocumentsMatchingTarget(t,e){const i=Pm(t);let s=!0;const o=new Map;return it.forEach(this.vn(e),(c=>this.Fn(t,c).next((f=>{s&&(s=!!f),o.set(c,f)})))).next((()=>{if(s){let c=ve();const f=[];return it.forEach(o,((m,g)=>{wt(W3,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(m)} to execute ${ad(e)}`);const E=(function(X,Z){const gt=TT(Z);if(gt===void 0)return null;for(const lt of ov(X,gt.fieldPath))switch(lt.op){case"array-contains-any":return lt.value.arrayValue.values||[];case"array-contains":return[lt.value]}return null})(g,m),b=(function(X,Z){const gt=new Map;for(const lt of Bf(Z))for(const V of ov(X,lt.fieldPath))switch(V.op){case"==":case"in":gt.set(lt.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return gt.set(lt.fieldPath.canonicalString(),V.value),Array.from(gt.values())}return null})(g,m),A=(function(X,Z){const gt=[];let lt=!0;for(const V of Bf(Z)){const M=V.kind===0?N3(X,V.fieldPath,X.startAt):D3(X,V.fieldPath,X.startAt);gt.push(M.value),lt&&(lt=M.inclusive)}return new kh(gt,lt)})(g,m),N=(function(X,Z){const gt=[];let lt=!0;for(const V of Bf(Z)){const M=V.kind===0?D3(X,V.fieldPath,X.endAt):N3(X,V.fieldPath,X.endAt);gt.push(M.value),lt&&(lt=M.inclusive)}return new kh(gt,lt)})(g,m),D=this.Mn(m,g,A),L=this.Mn(m,g,N),U=this.xn(m,g,b),G=this.On(m.indexId,E,D,A.inclusive,L,N.inclusive,U);return it.forEach(G,(j=>i.Z(j,e.limit).next((X=>{X.forEach((Z=>{const gt=Lt.fromSegments(Z.documentKey);c.has(gt)||(c=c.add(gt),f.push(gt))}))}))))})).next((()=>f))}return it.resolve(null)}))}vn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=hk(rn.create(t.filters,"and")).map((i=>xT(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,e),e)}On(t,e,i,s,o,c,f){const m=(e!=null?e.length:1)*Math.max(i.length,o.length),g=m/(e!=null?e.length:1),E=[];for(let b=0;b<m;++b){const A=e?this.Nn(e[b/g]):R1,N=this.Bn(t,A,i[b%g],s),D=this.Ln(t,A,o[b%g],c),L=f.map((U=>this.Bn(t,A,U,!0)));E.push(...this.createRange(N,D,L))}return E}Bn(t,e,i,s){const o=new jf(t,Lt.empty(),e,i);return s?o:o.En()}Ln(t,e,i,s){const o=new jf(t,Lt.empty(),e,i);return s?o.En():o}Fn(t,e){const i=new X3(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next((o=>{let c=null;for(const f of o)i.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(t,e){let i=2;const s=this.vn(e);return it.forEach(s,(o=>this.Fn(t,o).next((c=>{c?i!==0&&c.fields.length<(function(m){let g=new on(Jn.comparator),E=!1;for(const b of m.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:g=g.add(A.field));for(const b of m.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(E?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(e)&&s.length>1&&i===2?1:i))}kn(t,e){const i=new h0;for(const s of Bf(t)){const o=e.data.field(s.fieldPath);if(o==null)return null;const c=i.ln(s.kind);Ff.Wt.Dt(o,c)}return i.un()}Nn(t){const e=new h0;return Ff.Wt.Dt(t,e.ln(0)),e.un()}Kn(t,e){const i=new h0;return Ff.Wt.Dt(sd(this.databaseId,e),i.ln((function(o){const c=Bf(o);return c.length===0?0:c[c.length-1].kind})(t))),i.un()}xn(t,e,i){if(i===null)return[];let s=[];s.push(new h0);let o=0;for(const c of Bf(t)){const f=i[o++];for(const m of s)if(this.qn(e,c.fieldPath)&&u_(f))s=this.Un(s,c,f);else{const g=m.ln(c.kind);Ff.Wt.Dt(f,g)}}return this.$n(s)}Mn(t,e,i){return this.xn(t,e,i.position)}$n(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Un(t,e,i){const s=[...t],o=[];for(const c of i.arrayValue.values||[])for(const f of s){const m=new h0;m.seed(f.un()),Ff.Wt.Dt(c,m.ln(e.kind)),o.push(m)}return o}qn(t,e){return!!t.filters.find((i=>i instanceof ze&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(t,e){const i=f0(t),s=Vm(t);return(e?i.H(bT,IDBKeyRange.bound(e,e)):i.H()).next((o=>{const c=[];return it.forEach(o,(f=>s.get([f.indexId,this.uid]).next((m=>{c.push((function(E,b){const A=b?new n_(b.sequenceNumber,new Ir(ud(b.readTime),new Lt(Yl(b.documentKey)),b.largestBatchId)):n_.empty(),N=E.fields.map((([D,L])=>new L1(Jn.fromServerFormat(D),L)));return new nv(E.indexId,E.collectionGroup,N,A)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:le(i.collectionGroup,s.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,i){const s=f0(t),o=Vm(t);return this.Wn(t).next((c=>s.H(bT,IDBKeyRange.bound(e,e)).next((f=>it.forEach(f,(m=>o.put(q3(m.indexId,this.uid,c,i))))))))}updateIndexEntries(t,e){const i=new Map;return it.forEach(e,((s,o)=>{const c=i.get(s.collectionGroup);return(c?it.resolve(c):this.getFieldIndexes(t,s.collectionGroup)).next((f=>(i.set(s.collectionGroup,f),it.forEach(f,(m=>this.Qn(t,s,m).next((g=>{const E=this.Gn(o,m);return g.isEqual(E)?it.resolve():this.zn(t,o,m,g,E)})))))))}))}jn(t,e,i,s){return Pm(t).put(s.Rn(this.uid,this.Kn(i,e.key),e.key))}Hn(t,e,i,s){return Pm(t).delete(s.An(this.uid,this.Kn(i,e.key),e.key))}Qn(t,e,i){const s=Pm(t);let o=new on(fh);return s.ee({index:uR,range:IDBKeyRange.only([i.indexId,this.uid,j1(this.Kn(i,e))])},((c,f)=>{o=o.add(new jf(i.indexId,e,Q3(f.arrayValue),Q3(f.directionalValue)))})).next((()=>o))}Gn(t,e){let i=new on(fh);const s=this.kn(e,t);if(s==null)return i;const o=TT(e);if(o!=null){const c=t.data.field(o.fieldPath);if(u_(c))for(const f of c.arrayValue.values||[])i=i.add(new jf(e.indexId,t.key,this.Nn(f),s))}else i=i.add(new jf(e.indexId,t.key,R1,s));return i}zn(t,e,i,s,o){wt(W3,"Updating index entries for document '%s'",e.key);const c=[];return(function(m,g,E,b,A){const N=m.getIterator(),D=g.getIterator();let L=Om(N),U=Om(D);for(;L||U;){let G=!1,j=!1;if(L&&U){const X=E(L,U);X<0?j=!0:X>0&&(G=!0)}else L!=null?j=!0:G=!0;G?(b(U),U=Om(D)):j?(A(L),L=Om(N)):(L=Om(N),U=Om(D))}})(s,o,fh,(f=>{c.push(this.jn(t,e,i,f))}),(f=>{c.push(this.Hn(t,e,i,f))})),it.waitFor(c)}Wn(t){let e=1;return Vm(t).ee({index:lR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),e=s.sequenceNumber+1})).next((()=>e))}createRange(t,e,i){i=i.sort(((c,f)=>fh(c,f))).filter(((c,f,m)=>!f||fh(c,m[f-1])!==0));const s=[];s.push(t);for(const c of i){const f=fh(c,t),m=fh(c,e);if(f===0)s[0]=t.En();else if(f>0&&m<0)s.push(c),s.push(c.En());else if(m>0)break}s.push(e);const o=[];for(let c=0;c<s.length;c+=2){if(this.Jn(s[c],s[c+1]))return[];const f=s[c].An(this.uid,R1,Lt.empty()),m=s[c+1].An(this.uid,R1,Lt.empty());o.push(IDBKeyRange.bound(f,m))}return o}Jn(t,e){return fh(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next($3)}getMinOffset(t,e){return it.mapArray(this.vn(e),(i=>this.Fn(t,i).next((s=>s||qt(44426))))).next($3)}}function Z3(n){return ts(n,r_)}function Pm(n){return ts(n,G0)}function f0(n){return ts(n,NS)}function Vm(n){return ts(n,B0)}function $3(n){Yt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;RS(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Ir(t.readTime,t.documentKey,e)}const t5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pC=41943040;class Qs{static withCacheSize(t){return new Qs(t,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}function gC(n,t,e){const i=n.store(Ko),s=n.store(op),o=[],c=IDBKeyRange.only(e.batchId);let f=0;const m=i.ee({range:c},((E,b,A)=>(f++,A.delete())));o.push(m.next((()=>{Yt(f===1,47070,{batchId:e.batchId})})));const g=[];for(const E of e.mutations){const b=aR(t,E.key.path,e.batchId);o.push(s.delete(b)),g.push(E.key)}return it.waitFor(o).next((()=>g))}function hv(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw qt(14731);t=n.noDocument}return JSON.stringify(t).length}Qs.DEFAULT_COLLECTION_PERCENTILE=10,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qs.DEFAULT=new Qs(pC,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qs.DISABLED=new Qs(-1,0,0);class t2{constructor(t,e,i,s){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=s,this.Zn={}}static wt(t,e,i,s){Yt(t.uid!=="",64387);const o=t.isAuthenticated()?t.uid:"";return new t2(o,e,i,s)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).ee({index:Qf,range:i},((s,o,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,i,s){const o=qm(t),c=dh(t);return c.add({}).next((f=>{Yt(typeof f=="number",49019);const m=new zS(f,e,i,s),g=(function(N,D,L){const U=L.baseMutations.map((j=>f_(N.yt,j))),G=L.mutations.map((j=>f_(N.yt,j)));return{userId:D,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:U,mutations:G}})(this.serializer,this.userId,m),E=[];let b=new on(((A,N)=>le(A.canonicalString(),N.canonicalString())));for(const A of s){const N=aR(this.userId,A.key.path,f);b=b.add(A.key.path.popLast()),E.push(c.put(g)),E.push(o.put(N,HP))}return b.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(t,A))})),t.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),it.waitFor(E).next((()=>m))}))}lookupMutationBatch(t,e){return dh(t).get(e).next((i=>i?(Yt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),qf(this.serializer,i)):null))}Xn(t,e){return this.Zn[e]?it.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next((i=>{if(i){const s=i.keys();return this.Zn[e]=s,s}return null}))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return dh(t).ee({index:Qf,range:s},((c,f,m)=>{f.userId===this.userId&&(Yt(f.batchId>=i,47524,{Yn:i}),o=qf(this.serializer,f)),m.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Rh;return dh(t).ee({index:Qf,range:e,reverse:!0},((s,o,c)=>{i=o.batchId,c.done()})).next((()=>i))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Rh],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).H(Qf,e).next((i=>i.map((s=>qf(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=U1(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=[];return qm(t).ee({range:s},((c,f,m)=>{const[g,E,b]=c,A=Yl(E);if(g===this.userId&&e.path.isEqual(A))return dh(t).get(b).next((N=>{if(!N)throw qt(61480,{er:c,batchId:b});Yt(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:b}),o.push(qf(this.serializer,N))}));m.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new on(le);const s=[];return e.forEach((o=>{const c=U1(this.userId,o.path),f=IDBKeyRange.lowerBound(c),m=qm(t).ee({range:f},((g,E,b)=>{const[A,N,D]=g,L=Yl(N);A===this.userId&&o.path.isEqual(L)?i=i.add(D):b.done()}));s.push(m)})),it.waitFor(s).next((()=>this.tr(t,i)))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1,o=U1(this.userId,i),c=IDBKeyRange.lowerBound(o);let f=new on(le);return qm(t).ee({range:c},((m,g,E)=>{const[b,A,N]=m,D=Yl(A);b===this.userId&&i.isPrefixOf(D)?D.length===s&&(f=f.add(N)):E.done()})).next((()=>this.tr(t,f)))}tr(t,e){const i=[],s=[];return e.forEach((o=>{s.push(dh(t).get(o).next((c=>{if(c===null)throw qt(35274,{batchId:o});Yt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),i.push(qf(this.serializer,c))})))})),it.waitFor(s).next((()=>i))}removeMutationBatch(t,e){return gC(t.le,this.userId,e).next((i=>(t.addOnCommittedListener((()=>{this.nr(e.batchId)})),it.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return it.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return qm(t).ee({range:i},((o,c,f)=>{if(o[0]===this.userId){const m=Yl(o[1]);s.push(m)}else f.done()})).next((()=>{Yt(s.length===0,56720,{rr:s.map((o=>o.canonicalString()))})}))}))}containsKey(t,e){return _C(t,this.userId,e)}ir(t){return yC(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Rh,lastStreamToken:""}))}}function _C(n,t,e){const i=U1(t,e.path),s=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return qm(n).ee({range:o,Y:!0},((f,m,g)=>{const[E,b,A]=f;E===t&&b===s&&(c=!0),g.done()})).next((()=>c))}function dh(n){return ts(n,Ko)}function qm(n){return ts(n,op)}function yC(n){return ts(n,s_)}class cd{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new cd(0)}static ar(){return new cd(-1)}}class mk{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.ur(t).next((e=>{const i=new cd(e.highestTargetId);return e.highestTargetId=i.next(),this.cr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((e=>Wt.fromTimestamp(new an(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,i){return this.ur(t).next((s=>(s.highestListenSequenceNumber=e,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.cr(t,s))))}addTargetData(t,e){return this.lr(t,e).next((()=>this.ur(t).next((i=>(i.targetCount+=1,this.hr(e,i),this.cr(t,i))))))}updateTargetData(t,e){return this.lr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>km(t).delete(e.targetId))).next((()=>this.ur(t))).next((i=>(Yt(i.targetCount>0,8065),i.targetCount-=1,this.cr(t,i))))}removeTargets(t,e,i){let s=0;const o=[];return km(t).ee(((c,f)=>{const m=D0(f);m.sequenceNumber<=e&&i.get(m.targetId)===null&&(s++,o.push(this.removeTargetData(t,m)))})).next((()=>it.waitFor(o))).next((()=>s))}forEachTarget(t,e){return km(t).ee(((i,s)=>{const o=D0(s);e(o)}))}ur(t){return e5(t).get(av).next((e=>(Yt(e!==null,2888),e)))}cr(t,e){return e5(t).put(av,e)}lr(t,e){return km(t).put(fC(this.serializer,e))}hr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.ur(t).next((e=>e.targetCount))}getTargetData(t,e){const i=ad(e),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return km(t).ee({range:s,index:oR},((c,f,m)=>{const g=D0(f);C_(e,g.target)&&(o=g,m.done())})).next((()=>o))}addMatchingKeys(t,e,i){const s=[],o=Th(t);return e.forEach((c=>{const f=Ws(c.path);s.push(o.put({targetId:i,path:f})),s.push(this.referenceDelegate.addReference(t,i,c))})),it.waitFor(s)}removeMatchingKeys(t,e,i){const s=Th(t);return it.forEach(e,(o=>{const c=Ws(o.path);return it.waitFor([s.delete([i,c]),this.referenceDelegate.removeReference(t,i,o)])}))}removeMatchingKeysForTargetId(t,e){const i=Th(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),s=Th(t);let o=ve();return s.ee({range:i,Y:!0},((c,f,m)=>{const g=Yl(c[1]),E=new Lt(g);o=o.add(E)})).next((()=>o))}containsKey(t,e){const i=Ws(e.path),s=IDBKeyRange.bound([i],[Xw(i)],!1,!0);let o=0;return Th(t).ee({index:IS,Y:!0,range:s},(([c,f],m,g)=>{c!==0&&(o++,g.done())})).next((()=>o>0))}At(t,e){return km(t).get(e).next((i=>i?D0(i):null))}}function km(n){return ts(n,lp)}function e5(n){return ts(n,$f)}function Th(n){return ts(n,up)}const n5="LruGarbageCollector",pk=1048576;function i5([n,t],[e,i]){const s=le(n,e);return s===0?le(t,i):s}class gk{constructor(t){this.Pr=t,this.buffer=new on(i5),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();i5(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class vC{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){wt(n5,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Kh(e)?wt(n5,"Ignoring IndexedDB error during garbage collection: ",e):await jh(e)}await this.Ar(3e5)}))}}class _k{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return it.resolve($a.ce);const i=new gk(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(t5)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t5):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,s,o,c,f,m,g;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,c=Date.now(),this.nthSequenceNumber(t,s)))).next((b=>(i=b,f=Date.now(),this.removeTargets(t,i,e)))).next((b=>(o=b,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((b=>(g=Date.now(),zm()<=Me.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-E}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function EC(n,t){return new _k(n,t)}class yk{constructor(t,e){this.db=t,this.garbageCollector=EC(this,e)}dr(t){const e=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}mr(t,e){return this.yr(t,((i,s)=>e(s)))}addReference(t,e,i){return C1(t,i)}removeReference(t,e,i){return C1(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return C1(t,e)}wr(t,e){return(function(s,o){let c=!1;return yC(s).te((f=>_C(s,f,o).next((m=>(m&&(c=!0),it.resolve(!m)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.yr(t,((c,f)=>{if(f<=e){const m=this.wr(t,c).next((g=>{if(!g)return o++,i.getEntry(t,c).next((()=>(i.removeEntry(c,Wt.min()),Th(t).delete((function(b){return[0,Ws(b.path)]})(c)))))}));s.push(m)}})).next((()=>it.waitFor(s))).next((()=>i.apply(t))).next((()=>o))}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return C1(t,e)}yr(t,e){const i=Th(t);let s,o=$a.ce;return i.ee({index:IS},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(o!==$a.ce&&e(new Lt(Yl(s)),o),o=g,s=m):o=$a.ce})).next((()=>{o!==$a.ce&&e(new Lt(Yl(s)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function C1(n,t){return Th(n).put((function(i,s){return{targetId:0,path:Ws(i.path),sequenceNumber:s}})(t,n.currentSequenceNumber))}class TC{constructor(){this.changes=new oc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Gn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?it.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class vk{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Uf(t).put(i)}removeEntry(t,e,i){return Uf(t).delete((function(o,c){const f=o.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],uv(c),f[f.length-1]]})(e,i))}updateMetadata(t,e){return this.getMetadata(t).next((i=>(i.byteSize+=e,this.br(t,i))))}getEntry(t,e){let i=Gn.newInvalidDocument(e);return Uf(t).ee({index:z1,range:IDBKeyRange.only(d0(e))},((s,o)=>{i=this.Sr(e,o)})).next((()=>i))}Dr(t,e){let i={size:0,document:Gn.newInvalidDocument(e)};return Uf(t).ee({index:z1,range:IDBKeyRange.only(d0(e))},((s,o)=>{i={document:this.Sr(e,o),size:hv(o)}})).next((()=>i))}getEntries(t,e){let i=er();return this.Cr(t,e,((s,o)=>{const c=this.Sr(s,o);i=i.insert(s,c)})).next((()=>i))}vr(t,e){let i=er(),s=new Dn(Lt.comparator);return this.Cr(t,e,((o,c)=>{const f=this.Sr(o,c);i=i.insert(o,f),s=s.insert(o,hv(c))})).next((()=>({documents:i,Fr:s})))}Cr(t,e,i){if(e.isEmpty())return it.resolve();let s=new on(r5);e.forEach((m=>s=s.add(m)));const o=IDBKeyRange.bound(d0(s.first()),d0(s.last())),c=s.getIterator();let f=c.getNext();return Uf(t).ee({index:z1,range:o},((m,g,E)=>{const b=Lt.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&r5(f,b)<0;)i(f,null),f=c.getNext();f&&f.isEqual(b)&&(i(f,g),f=c.hasNext()?c.getNext():null),f?E.j(d0(f)):E.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,i,s,o){const c=e.path,f=[c.popLast().toArray(),c.lastSegment(),uv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uf(t).H(IDBKeyRange.bound(f,m,!0)).next((g=>{o?.incrementDocumentReadCount(g.length);let E=er();for(const b of g){const A=this.Sr(Lt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(N_(e,A)||s.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(t,e,i,s){let o=er();const c=a5(e,i),f=a5(e,Ir.max());return Uf(t).ee({index:rR,range:IDBKeyRange.bound(c,f,!0)},((m,g,E)=>{const b=this.Sr(Lt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(b.key,b),o.size===s&&E.done()})).next((()=>o))}newChangeBuffer(t){return new Ek(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return s5(t).get(ST).next((e=>(Yt(!!e,20021),e)))}br(t,e){return s5(t).put(ST,e)}Sr(t,e){if(e){const i=sk(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Wt.min())))return i}return Gn.newInvalidDocument(t)}}function SC(n){return new vk(n)}class Ek extends TC{constructor(t,e){super(),this.Mr=t,this.trackRemovals=e,this.Or=new oc((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(t){const e=[];let i=0,s=new on(((o,c)=>le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const f=this.Or.get(o);if(e.push(this.Mr.removeEntry(t,o,f.readTime)),c.isValidDocument()){const m=G3(this.Mr.serializer,c);s=s.add(o.path.popLast());const g=hv(m);i+=g-f.size,e.push(this.Mr.addEntry(t,o,m))}else if(i-=f.size,this.trackRemovals){const m=G3(this.Mr.serializer,c.convertToNoDocument(Wt.min()));e.push(this.Mr.addEntry(t,o,m))}})),s.forEach((o=>{e.push(this.Mr.indexManager.addToCollectionParentIndex(t,o))})),e.push(this.Mr.updateMetadata(t,i)),it.waitFor(e)}getFromCache(t,e){return this.Mr.Dr(t,e).next((i=>(this.Or.set(e,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(t,e){return this.Mr.vr(t,e).next((({documents:i,Fr:s})=>(s.forEach(((o,c)=>{this.Or.set(o,{size:c,readTime:i.get(o).readTime})})),i)))}}function s5(n){return ts(n,a_)}function Uf(n){return ts(n,sv)}function d0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function a5(n,t){const e=t.documentKey.path.toArray();return[n,uv(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function r5(n,t){const e=n.path.toArray(),i=t.path.toArray();let s=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(s=le(e[o],i[o]),s)return s;return s=le(e.length,i.length),s||(s=le(e[e.length-2],i[i.length-2]),s||le(e[e.length-1],i[i.length-1]))}class Tk{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class bC{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&F0(i.mutation,s,tr.empty(),an.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,ve()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=ve()){const s=Ql();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((o=>{let c=I0();return o.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Ql();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,ve())))}populateOverlays(t,e,i){const s=[];return i.forEach((o=>{e.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(t,s).next((o=>{o.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,i,s){let o=er();const c=q0(),f=(function(){return q0()})();return e.forEach(((m,g)=>{const E=i.get(g.key);s.has(g.key)&&(E===void 0||E.mutation instanceof lc)?o=o.insert(g.key,g):E!==void 0?(c.set(g.key,E.mutation.getFieldMask()),F0(E.mutation,g,E.mutation.getFieldMask(),an.now())):c.set(g.key,tr.empty())})),this.recalculateAndSaveOverlays(t,o).next((m=>(m.forEach(((g,E)=>c.set(g,E))),e.forEach(((g,E)=>f.set(g,new Tk(E,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(t,e){const i=q0();let s=new Dn(((c,f)=>c-f)),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let E=i.get(m)||tr.empty();E=f.applyToLocalView(g,E),i.set(m,E);const b=(s.get(f.batchId)||ve()).add(m);s=s.insert(f.batchId,b)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,E=m.value,b=UR();E.forEach((A=>{if(!o.has(A)){const N=jR(e.get(A),i.get(A));N!==null&&b.set(A,N),o=o.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,b))}return it.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return RV(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):VS(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-o.size):it.resolve(Ql());let f=rp,m=o;return c.next((g=>it.forEach(g,((E,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),o.get(E)?it.resolve():this.remoteDocumentCache.getEntry(t,E).next((A=>{m=m.insert(E,A)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,m,g,ve()))).next((E=>({batchId:f,changes:LR(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Lt(e)).next((i=>{let s=I0();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const o=e.collectionGroup;let c=I0();return this.indexManager.getCollectionParents(t,o).next((f=>it.forEach(f,(m=>{const g=(function(b,A){return new rc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(e,m.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next((E=>{E.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,s)))).next((c=>{o.forEach(((m,g)=>{const E=g.getKey();c.get(E)===null&&(c=c.insert(E,Gn.newInvalidDocument(E)))}));let f=I0();return c.forEach(((m,g)=>{const E=o.get(m);E!==void 0&&F0(E.mutation,g,tr.empty(),an.now()),N_(e,g)&&(f=f.insert(m,g))})),f}))}}class Sk{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return it.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:wi(s.createTime)}})(e)),it.resolve()}getNamedQuery(t,e){return it.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(s){return{name:s.name,query:FS(s.bundledQuery),readTime:wi(s.readTime)}})(e)),it.resolve()}}class bk{constructor(){this.overlays=new Dn(Lt.comparator),this.Lr=new Map}getOverlay(t,e){return it.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ql();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,o)=>{this.bt(t,e,o)})),it.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(i)),it.resolve()}getOverlaysForCollection(t,e,i){const s=Ql(),o=e.length+1,c=new Lt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>i&&s.set(m.getKey(),m)}return it.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let o=new Dn(((g,E)=>g-E));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let E=o.get(g.largestBatchId);E===null&&(E=Ql(),o=o.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const f=Ql(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,E)=>f.set(g,E))),!(f.size()>=s)););return it.resolve(f)}bt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new GS(e,i));let o=this.Lr.get(e);o===void 0&&(o=ve(),this.Lr.set(e,o)),this.Lr.set(e,o.add(i.key))}}class Ak{constructor(){this.sessionToken=pi.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,it.resolve()}}class YS{constructor(){this.kr=new on(os.Kr),this.qr=new on(os.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const i=new os(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new os(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){const e=new Lt(new Pe([])),i=new os(e,t),s=new os(e,t+1),o=[];return this.qr.forEachInRange([i,s],(c=>{this.Wr(c),o.push(c.key)})),o}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new Lt(new Pe([])),i=new os(e,t),s=new os(e,t+1);let o=ve();return this.qr.forEachInRange([i,s],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new os(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class os{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return Lt.comparator(t.key,e.key)||le(t.Hr,e.Hr)}static Ur(t,e){return le(t.Hr,e.Hr)||Lt.comparator(t.key,e.key)}}class wk{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new on(os.Kr)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zS(o,e,i,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new os(f.key,o)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,e){return it.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),o=s<0?0:s;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?Rh:this.Yn-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new os(e,0),s=new os(e,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],(c=>{const f=this.Zr(c.Hr);o.push(f)})),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new on(le);return e.forEach((s=>{const o=new os(s,0),c=new os(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],(f=>{i=i.add(f.Hr)}))})),it.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let o=i;Lt.isDocumentKey(o)||(o=o.child(""));const c=new os(new Lt(o),0);let f=new on(le);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Hr)),!0)}),c),it.resolve(this.Yr(f))}Yr(t){const e=[];return t.forEach((i=>{const s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){Yt(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return it.forEach(e.mutations,(s=>{const o=new os(s.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){const i=new os(e,0),s=this.Jr.firstAfterOrEqual(i);return it.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Rk{constructor(t){this.ti=t,this.docs=(function(){return new Dn(Lt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),o=s?s.size:0,c=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return it.resolve(i?i.document.mutableCopy():Gn.newInvalidDocument(e))}getEntries(t,e){let i=er();return e.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Gn.newInvalidDocument(s))})),it.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let o=er();const c=e.path,f=new Lt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:E}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||RS(tR(E),i)<=0||(s.has(E.key)||N_(e,E))&&(o=o.insert(E.key,E.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,e,i,s){qt(9500)}ni(t,e){return it.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new Ck(this)}getSize(t){return it.resolve(this.size)}}class Ck extends TC{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Mr.addEntry(t,s)):this.Mr.removeEntry(i)})),it.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class Ik{constructor(t){this.persistence=t,this.ri=new oc((e=>ad(e)),C_),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.ii=0,this.si=new YS,this.targetCount=0,this.oi=cd._r()}forEachTarget(t,e){return this.ri.forEach(((i,s)=>e(s))),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),it.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new cd(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,it.resolve()}updateTargetData(t,e){return this.lr(e),it.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,e,i){let s=0;const o=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),it.waitFor(o).next((()=>s))}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,e){const i=this.ri.get(e)||null;return it.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),it.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);const s=this.persistence.referenceDelegate,o=[];return s&&e.forEach((c=>{o.push(s.markPotentiallyOrphaned(t,c))})),it.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),it.resolve()}getMatchingKeysForTargetId(t,e){const i=this.si.jr(e);return it.resolve(i)}containsKey(t,e){return it.resolve(this.si.containsKey(e))}}class QS{constructor(t,e){this._i={},this.overlays={},this.ai=new $a(0),this.ui=!1,this.ui=!0,this.ci=new Ak,this.referenceDelegate=t(this),this.li=new Ik(this),this.indexManager=new fk,this.remoteDocumentCache=(function(s){return new Rk(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new hC(e),this.Pi=new Sk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new bk,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new wk(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){wt("MemoryPersistence","Starting transaction:",t);const s=new Nk(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(t,e){return it.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}}class Nk extends nR{constructor(t){super(),this.currentSequenceNumber=t}}class e2{constructor(t){this.persistence=t,this.Ri=new YS,this.Ai=null}static Vi(t){return new e2(t)}get di(){if(this.Ai)return this.Ai;throw qt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),it.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),it.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),it.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.di,(i=>{const s=Lt.fromPath(i);return this.mi(t,s).next((o=>{o||e.removeEntry(s,Wt.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return it.or([()=>it.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class fv{constructor(t,e){this.persistence=t,this.fi=new oc((i=>Ws(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=EC(this,e)}static Vi(t,e){return new fv(t,e)}Ti(){}Ii(t){return it.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return it.forEach(this.fi,((i,s)=>this.wr(t,i,s).next((o=>o?it.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(t,(c=>this.wr(t,c,e).next((f=>{f||(i++,o.removeEntry(c,Wt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=G1(t.data.value)),e}wr(t,e,i){return it.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.fi.get(e);return it.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Dk{constructor(t){this.serializer=t}k(t,e,i,s){const o=new Fv("createOrUpgrade",e);i<1&&s>=1&&((function(m){m.createObjectStore(R_)})(t),(function(m){m.createObjectStore(s_,{keyPath:GP}),m.createObjectStore(Ko,{keyPath:_3,autoIncrement:!0}).createIndex(Qf,y3,{unique:!0}),m.createObjectStore(op)})(t),o5(t),(function(m){m.createObjectStore(Gf)})(t));let c=it.resolve();return i<3&&s>=3&&(i!==0&&((function(m){m.deleteObjectStore(up),m.deleteObjectStore(lp),m.deleteObjectStore($f)})(t),o5(t)),c=c.next((()=>(function(m){const g=m.store($f),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return g.put(av,E)})(o)))),i<4&&s>=4&&(i!==0&&(c=c.next((()=>(function(m,g){return g.store(Ko).H().next((b=>{m.deleteObjectStore(Ko),m.createObjectStore(Ko,{keyPath:_3,autoIncrement:!0}).createIndex(Qf,y3,{unique:!0});const A=g.store(Ko),N=b.map((D=>A.put(D)));return it.waitFor(N)}))})(t,o)))),c=c.next((()=>{(function(m){m.createObjectStore(cp,{keyPath:JP})})(t)}))),i<5&&s>=5&&(c=c.next((()=>this.gi(o)))),i<6&&s>=6&&(c=c.next((()=>((function(m){m.createObjectStore(a_)})(t),this.pi(o))))),i<7&&s>=7&&(c=c.next((()=>this.yi(o)))),i<8&&s>=8&&(c=c.next((()=>this.wi(t,o)))),i<9&&s>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)}))),i<10&&s>=10&&(c=c.next((()=>this.bi(o)))),i<11&&s>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(jv,{keyPath:WP})})(t),(function(m){m.createObjectStore(Kv,{keyPath:ZP})})(t)}))),i<12&&s>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Yv,{keyPath:aV});g.createIndex(AT,rV,{unique:!1}),g.createIndex(cR,oV,{unique:!1})})(t)}))),i<13&&s>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(sv,{keyPath:qP});g.createIndex(z1,FP),g.createIndex(rR,jP)})(t))).next((()=>this.Si(t,o))).next((()=>t.deleteObjectStore(Gf)))),i<14&&s>=14&&(c=c.next((()=>this.Di(t,o)))),i<15&&s>=15&&(c=c.next((()=>(function(m){m.createObjectStore(NS,{keyPath:$P,autoIncrement:!0}).createIndex(bT,tV,{unique:!1}),m.createObjectStore(B0,{keyPath:eV}).createIndex(lR,nV,{unique:!1}),m.createObjectStore(G0,{keyPath:iV}).createIndex(uR,sV,{unique:!1})})(t)))),i<16&&s>=16&&(c=c.next((()=>{e.objectStore(B0).clear()})).next((()=>{e.objectStore(G0).clear()}))),i<17&&s>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(DS,{keyPath:lV})})(t)}))),i<18&&s>=18&&Iw()&&(c=c.next((()=>{e.objectStore(B0).clear()})).next((()=>{e.objectStore(G0).clear()}))),c}pi(t){let e=0;return t.store(Gf).ee(((i,s)=>{e+=hv(s)})).next((()=>{const i={byteSize:e};return t.store(a_).put(ST,i)}))}gi(t){const e=t.store(s_),i=t.store(Ko);return e.H().next((s=>it.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,Rh],[o.userId,o.lastAcknowledgedBatchId]);return i.H(Qf,c).next((f=>it.forEach(f,(m=>{Yt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=qf(this.serializer,m);return gC(t,o.userId,g).next((()=>{}))}))))}))))}yi(t){const e=t.store(up),i=t.store(Gf);return t.store($f).get(av).next((s=>{const o=[];return i.ee(((c,f)=>{const m=new Pe(c),g=(function(b){return[0,Ws(b)]})(m);o.push(e.get(g).next((E=>E?it.resolve():(b=>e.put({targetId:0,path:Ws(b),sequenceNumber:s.highestListenSequenceNumber}))(m))))})).next((()=>it.waitFor(o)))}))}wi(t,e){t.createObjectStore(r_,{keyPath:XP});const i=e.store(r_),s=new KS,o=c=>{if(s.add(c)){const f=c.lastSegment(),m=c.popLast();return i.put({collectionId:f,parent:Ws(m)})}};return e.store(Gf).ee({Y:!0},((c,f)=>{const m=new Pe(c);return o(m.popLast())})).next((()=>e.store(op).ee({Y:!0},(([c,f,m],g)=>{const E=Yl(f);return o(E.popLast())}))))}bi(t){const e=t.store(lp);return e.ee(((i,s)=>{const o=D0(s),c=fC(this.serializer,o);return e.put(c)}))}Si(t,e){const i=e.store(Gf),s=[];return i.ee(((o,c)=>{const f=e.store(sv),m=(function(b){return b.document?new Lt(Pe.fromString(b.document.name).popFirst(5)):b.noDocument?Lt.fromSegments(b.noDocument.path):b.unknownDocument?Lt.fromSegments(b.unknownDocument.path):qt(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(f.put(g))})).next((()=>it.waitFor(s)))}Di(t,e){const i=e.store(Ko),s=SC(this.serializer),o=new QS(e2.Vi,this.serializer.yt);return i.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??ve();qf(this.serializer,m).keys().forEach((E=>g=g.add(E))),f.set(m.userId,g)})),it.forEach(f,((m,g)=>{const E=new ls(g),b=$v.wt(this.serializer,E),A=o.getIndexManager(E),N=t2.wt(E,this.serializer,A,o.referenceDelegate);return new bC(s,N,b,A).recalculateAndSaveOverlaysForDocumentKeys(new wT(e,$a.ce),m).next()}))}))}}function o5(n){n.createObjectStore(up,{keyPath:YP}).createIndex(IS,QP,{unique:!0}),n.createObjectStore(lp,{keyPath:"targetId"}).createIndex(oR,KP,{unique:!0}),n.createObjectStore($f)}const mh="IndexedDbPersistence",PE=18e5,VE=5e3,kE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",AC="main";class XS{constructor(t,e,i,s,o,c,f,m,g,E,b=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Ci=o,this.window=c,this.document=f,this.Fi=g,this.Mi=E,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=A=>Promise.resolve(),!XS.v())throw new Tt(ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yk(this,s),this.Ki=e+AC,this.serializer=new hC(m),this.qi=new Jl(this.Ki,this.xi,new Dk(this.serializer)),this.ci=new rk,this.li=new mk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SC(this.serializer),this.Pi=new ak,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,E===!1&&Ai(mh,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(ht.FAILED_PRECONDITION,kE);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new $a(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>I1(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((e=>this.isPrimary&&!e?this.Ji(t).next((()=>!1)):!!e&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(Kh(t))return wt(mh,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return wt(mh,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return m0(t).get(xm).next((e=>it.resolve(this.Xi(e))))}Yi(t){return I1(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,PE)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const i=ts(e,cp);return i.H().next((s=>{const o=this.ns(s,PE),c=s.filter((f=>o.indexOf(f)===-1));return it.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const e of t)this.Ui.removeItem(this.rs(e.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?it.resolve(!0):m0(t).get(xm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,VE)&&!this.ss(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new Tt(ht.FAILED_PRECONDITION,kE);return!1}}return!(!this.networkEnabled||!this.inForeground)||I1(t).H().next((i=>this.ns(i,VE).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,f=this.networkEnabled===s.networkEnabled;if(o||c&&f)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&wt(mh,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[R_,cp],(t=>{const e=new wT(t,$a.ce);return this.Ji(e).next((()=>this.Yi(e)))})),this.qi.close(),this.ls()}ns(t,e){return t.filter((i=>this.ts(i.updateTimeMs,e)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>I1(t).H().next((e=>this.ns(e,PE).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,e){return t2.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new dk(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return $v.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,e,i){wt(mh,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",o=(function(m){return m===18?hV:m===17?mR:m===16?cV:m===15?xS:m===14?dR:m===13?fR:m===12?uV:m===11?hR:void qt(60245)})(this.xi);let c;return this.qi.runTransaction(t,s,o,(f=>(c=new wT(f,this.ai?this.ai.next():$a.ce),e==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Ai(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Tt(ht.FAILED_PRECONDITION,eR);return i(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(t){return m0(t).get(xm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,VE)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Tt(ht.FAILED_PRECONDITION,kE)}))}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return m0(t).put(xm,e)}static v(){return Jl.v()}Ji(t){const e=m0(t);return e.get(xm).next((i=>this.Xi(i)?(wt(mh,"Releasing primary lease."),e.delete(xm)):it.resolve()))}ts(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Ai(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Cw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){try{const e=this.Ui?.getItem(this.rs(t))!==null;return wt(mh,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Ai(mh,"Failed to get zombied client id.",e),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){Ai("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function m0(n){return ts(n,R_)}function I1(n){return ts(n,cp)}function JS(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class WS{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=s}static Es(t,e){let i=ve(),s=ve();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new WS(t,e.fromCache,i,s)}}class xk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class wC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Cw()?8:iR(ri())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const o={result:null};return this.gs(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ps(t,e,s,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new xk;return this.ys(t,e,c).next((f=>{if(o.result=f,this.As)return this.ws(t,e,c,f.size)}))})).next((()=>o.result))}ws(t,e,i,s){return i.documentReadCount<this.Vs?(zm()<=Me.DEBUG&&wt("QueryEngine","SDK will not create cache indexes for query:",Bm(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),it.resolve()):(zm()<=Me.DEBUG&&wt("QueryEngine","Query:",Bm(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(zm()<=Me.DEBUG&&wt("QueryEngine","The SDK decides to create cache indexes for query:",Bm(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ea(e))):it.resolve())}gs(t,e){if(x3(e))return it.resolve(null);let i=Ea(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=lv(e,null,"F"),i=Ea(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=ve(...o);return this.fs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,i).next((m=>{const g=this.bs(e,f);return this.Ss(e,g,c,m.readTime)?this.gs(t,lv(e,null,"F")):this.Ds(t,g,e,m)}))))})))))}ps(t,e,i,s){return x3(e)||s.isEqual(Wt.min())?it.resolve(null):this.fs.getDocuments(t,i).next((o=>{const c=this.bs(e,o);return this.Ss(e,c,i,s)?it.resolve(null):(zm()<=Me.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bm(e)),this.Ds(t,c,e,$w(s,rp)).next((f=>f)))}))}bs(t,e){let i=new on(VR(t));return e.forEach(((s,o)=>{N_(t,o)&&(i=i.add(o))})),i}Ss(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(t,e,i){return zm()<=Me.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",Bm(e)),this.fs.getDocumentsMatchingQuery(t,e,Ir.min(),i)}Ds(t,e,i,s){return this.fs.getDocumentsMatchingQuery(t,i,s).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const ZS="LocalStore",Ok=3e8;class Mk{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.vs=new Dn(le),this.Fs=new oc((o=>ad(o)),C_),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function RC(n,t,e,i){return new Mk(n,t,e,i)}async function CC(n,t){const e=Bt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],f=[];let m=ve();for(const g of s){c.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}for(const g of o){f.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}return e.localDocuments.getDocuments(i,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function Pk(n,t){const e=Bt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=t.batch.keys(),o=e.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,E){const b=g.batch,A=b.keys();let N=it.resolve();return A.forEach((D=>{N=N.next((()=>E.getEntry(m,D))).next((L=>{const U=g.docVersions.get(D);Yt(U!==null,48541),L.version.compareTo(U)<0&&(b.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),E.addEntry(L)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,b)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=ve();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,s)))}))}function IC(n){const t=Bt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function Vk(n,t){const e=Bt(n),i=t.snapshotVersion;let s=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});s=e.vs;const f=[];t.targetChanges.forEach(((E,b)=>{const A=s.get(b);if(!A)return;f.push(e.li.removeMatchingKeys(o,E.removedDocuments,b).next((()=>e.li.addMatchingKeys(o,E.addedDocuments,b))));let N=A.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(b)!==null?N=N.withResumeToken(pi.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),s=s.insert(b,N),(function(L,U,G){return L.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=Ok?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(A,N,E)&&f.push(e.li.updateTargetData(o,N))}));let m=er(),g=ve();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(o,E))})),f.push(NC(o,c,t.documentUpdates).next((E=>{m=E.Bs,g=E.Ls}))),!i.isEqual(Wt.min())){const E=e.li.getLastRemoteSnapshotVersion(o).next((b=>e.li.setTargetsMetadata(o,o.currentSequenceNumber,i)));f.push(E)}return it.waitFor(f).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,m,g))).next((()=>m))})).then((o=>(e.vs=s,o)))}function NC(n,t,e){let i=ve(),s=ve();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=er();return e.forEach(((f,m)=>{const g=o.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(Wt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):wt(ZS,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function kk(n,t){const e=Bt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Rh),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function _p(n,t){const e=Bt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.li.getTargetData(i,t).next((o=>o?(s=o,it.resolve(s)):e.li.allocateTargetId(i).next((c=>(s=new Ku(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=e.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function yp(n,t,e){const i=Bt(n),s=i.vs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Kh(c))throw c;wt(ZS,`Failed to update sequence numbers for target ${t}: ${c}`)}i.vs=i.vs.remove(t),i.Fs.delete(s.target)}function dv(n,t,e){const i=Bt(n);let s=Wt.min(),o=ve();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,E){const b=Bt(m),A=b.Fs.get(E);return A!==void 0?it.resolve(b.vs.get(A)):b.li.getTargetData(g,E)})(i,c,Ea(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{o=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?s:Wt.min(),e?o:ve()))).next((f=>(OC(i,PR(t),f),{documents:f,ks:o})))))}function DC(n,t){const e=Bt(n),i=Bt(e.li),s=e.vs.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,t).next((c=>c?c.target:null))))}function xC(n,t){const e=Bt(n),i=e.Ms.get(t)||Wt.min();return e.persistence.runTransaction("Get new document changes","readonly",(s=>e.xs.getAllFromCollectionGroup(s,t,$w(i,rp),Number.MAX_SAFE_INTEGER))).then((s=>(OC(e,t,s),s)))}function OC(n,t,e){let i=n.Ms.get(t)||Wt.min();e.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Ms.set(t,i)}async function Lk(n,t,e,i){const s=Bt(n);let o=ve(),c=er();for(const g of e){const E=t.Ks(g.metadata.name);g.document&&(o=o.add(E));const b=t.qs(g);b.setReadTime(t.Us(g.metadata.readTime)),c=c.insert(E,b)}const f=s.xs.newChangeBuffer({trackRemovals:!0}),m=await _p(s,(function(E){return Ea(xp(Pe.fromString(`__bundle__/docs/${E}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(g=>NC(g,f,c).next((E=>(f.apply(g),E))).next((E=>s.li.removeMatchingKeysForTargetId(g,m.targetId).next((()=>s.li.addMatchingKeys(g,o,m.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(g,E.Bs,E.Ls))).next((()=>E.Bs))))))}async function Uk(n,t,e=ve()){const i=await _p(n,Ea(FS(t.bundledQuery))),s=Bt(n);return s.persistence.runTransaction("Save named query","readwrite",(o=>{const c=wi(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return s.Pi.saveNamedQuery(o,t);const f=i.withResumeToken(pi.EMPTY_BYTE_STRING,c);return s.vs=s.vs.insert(f.targetId,f),s.li.updateTargetData(o,f).next((()=>s.li.removeMatchingKeysForTargetId(o,i.targetId))).next((()=>s.li.addMatchingKeys(o,e,i.targetId))).next((()=>s.Pi.saveNamedQuery(o,t)))}))}const MC="firestore_clients";function l5(n,t){return`${MC}_${n}_${t}`}const PC="firestore_mutations";function u5(n,t,e){let i=`${PC}_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const VC="firestore_targets";function LE(n,t){return`${VC}_${n}_${t}`}const Gl="SharedClientState";class mv{constructor(t,e,i,s){this.user=t,this.batchId=e,this.state=i,this.error=s}static $s(t,e,i){const s=JSON.parse(i);let o,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(o=new Tt(s.error.code,s.error.message))),c?new mv(t,e,s.state,o):(Ai(Gl,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class j0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Tt(i.error.code,i.error.message))),o?new j0(t,i.state,s):(Ai(Gl,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class pv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=kS();for(let c=0;s&&c<i.activeTargetIds.length;++c)s=sR(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return s?new pv(t,o):(Ai(Gl,`Failed to parse client data for instance '${t}': ${e}`),null)}}class $S{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new $S(e.clientId,e.onlineState):(Ai(Gl,`Failed to parse online state: ${t}`),null)}}class BT{constructor(){this.activeTargetIds=kS()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UE{constructor(t,e,i,s,o){this.window=t,this.Ci=e,this.persistenceKey=i,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Dn(le),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=l5(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new BT),this.eo=new RegExp(`^${MC}_${c}_([^_]*)$`),this.no=new RegExp(`^${PC}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${VC}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const i of t){if(i===this.zs)continue;const s=this.getItem(l5(this.persistenceKey,i));if(s){const o=pv.$s(i,s);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();const e=this.storage.getItem(this.io);if(e){const i=this._o(e);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let e=!1;return this.Js.forEach(((i,s)=>{s.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,e,i){this.co(t,e,i),this.lo(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(LE(this.persistenceKey,t));if(s){const o=j0.$s(t,s);o&&(i=o.state)}}return e&&this.ho.Qs(t),this.oo(),i}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(LE(this.persistenceKey,t))}updateQueryState(t,e,i){this.Po(t,e,i)}handleUserChange(t,e,i){e.forEach((s=>{this.lo(s)})),this.currentUser=t,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return wt(Gl,"READ",t,e),e}setItem(t,e){wt(Gl,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){wt(Gl,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(wt(Gl,"EVENT",e.key,e.newValue),e.key===this.Xs)return void Ai("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.eo.test(e.key)){if(e.newValue==null){const i=this.Eo(e.key);return this.Ro(i,null)}{const i=this.Ao(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(e.key)){if(e.newValue!==null){const i=this.Vo(e.key,e.newValue);if(i)return this.mo(i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(e.key===this.io){if(e.newValue!==null){const i=this._o(e.newValue);if(i)return this.ao(i)}}else if(e.key===this.Ys){const i=(function(o){let c=$a.ce;if(o!=null)try{const f=JSON.parse(o);Yt(typeof f=="number",30636,{yo:o}),c=f}catch(f){Ai(Gl,"Failed to read sequence number from WebStorage",f)}return c})(e.newValue);i!==$a.ce&&this.sequenceNumberHandler(i)}else if(e.key===this.so){const i=this.wo(e.newValue);await Promise.all(i.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(e)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,e,i){const s=new mv(this.currentUser,t,e,i),o=u5(this.persistenceKey,this.currentUser,t);this.setItem(o,s.Ws())}lo(t){const e=u5(this.persistenceKey,this.currentUser,t);this.removeItem(e)}To(t){const e={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(e))}Po(t,e,i){const s=LE(this.persistenceKey,t),o=new j0(t,e,i);this.setItem(s,o.Ws())}Io(t){const e=JSON.stringify(Array.from(t));this.setItem(this.so,e)}Eo(t){const e=this.eo.exec(t);return e?e[1]:null}Ao(t,e){const i=this.Eo(t);return pv.$s(i,e)}Vo(t,e){const i=this.no.exec(t),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return mv.$s(new ls(o),s,e)}fo(t,e){const i=this.ro.exec(t),s=Number(i[1]);return j0.$s(s,e)}_o(t){return $S.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);wt(Gl,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Js.insert(t,e):this.Js.remove(t),s=this.uo(this.Js),o=this.uo(i),c=[],f=[];return o.forEach((m=>{s.has(m)||c.push(m)})),s.forEach((m=>{o.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=i}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let e=kS();return t.forEach(((i,s)=>{e=e.unionWith(s.activeTargetIds)})),e}}class kC{constructor(){this.vo=new BT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new BT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class zk{Mo(t){}shutdown(){}}const c5="ConnectivityMonitor";class h5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){wt(c5,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){wt(c5,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let N1=null;function GT(){return N1===null?N1=(function(){return 268435456+Math.round(2147483648*Math.random())})():N1++,"0x"+N1.toString(16)}const zE="RestConnection",Bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Gk{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===RT?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,o){const c=GT(),f=this.Qo(t,e.toUriEncodedString());wt(zE,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,o);const{host:g}=new URL(f),E=iu(g);return this.zo(t,f,m,i,E).then((b=>(wt(zE,`Received RPC '${t}' ${c}: `,b),b)),(b=>{throw Wo(zE,`RPC '${t}' ${c} failed with error: `,b,"url: ",f,"request:",i),b}))}jo(t,e,i,s,o,c){return this.Wo(t,e,i,s,o)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dp})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,o)=>t[o]=s)),i&&i.headers.forEach(((s,o)=>t[o]=s))}Qo(t,e){const i=Bk[t];let s=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class Hk{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const Ys="WebChannelConnection",p0=(n,t,e)=>{n.listen(t,(i=>{try{e(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Qm extends Gk{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Qm.c_){const t=jw();p0(t,Fw.STAT_EVENT,(e=>{e.stat===vT.PROXY?wt(Ys,"STAT_EVENT: detected buffering proxy"):e.stat===vT.NOPROXY&&wt(Ys,"STAT_EVENT: detected no buffering proxy")})),Qm.c_=!0}}zo(t,e,i,s,o){const c=GT();return new Promise(((f,m)=>{const g=new Hw;g.setWithCredentials(!0),g.listenOnce(qw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case k1.NO_ERROR:const b=g.getResponseJson();wt(Ys,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),f(b);break;case k1.TIMEOUT:wt(Ys,`RPC '${t}' ${c} timed out`),m(new Tt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case k1.HTTP_ERROR:const A=g.getStatus();if(wt(Ys,`RPC '${t}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const D=N?.error;if(D&&D.status&&D.message){const L=(function(G){const j=G.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(j)>=0?j:ht.UNKNOWN})(D.status);m(new Tt(L,D.message))}else m(new Tt(ht.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Tt(ht.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{wt(Ys,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(s);wt(Ys,`RPC '${t}' ${c} sending request:`,s),g.send(e,"POST",E,i,15)}))}T_(t,e,i){const s=GT(),o=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const g=o.join("");wt(Ys,`Creating RPC '${t}' stream ${s}: ${g}`,f);const E=c.createWebChannel(g,f);this.I_(E);let b=!1,A=!1;const N=new Hk({Ho:D=>{A?wt(Ys,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(b||(wt(Ys,`Opening RPC '${t}' stream ${s} transport.`),E.open(),b=!0),wt(Ys,`RPC '${t}' stream ${s} sending:`,D),E.send(D))},Jo:()=>E.close()});return p0(E,C0.EventType.OPEN,(()=>{A||(wt(Ys,`RPC '${t}' stream ${s} transport opened.`),N.i_())})),p0(E,C0.EventType.CLOSE,(()=>{A||(A=!0,wt(Ys,`RPC '${t}' stream ${s} transport closed`),N.o_(),this.E_(E))})),p0(E,C0.EventType.ERROR,(D=>{A||(A=!0,Wo(Ys,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),N.o_(new Tt(ht.UNAVAILABLE,"The operation could not be completed")))})),p0(E,C0.EventType.MESSAGE,(D=>{if(!A){const L=D.data[0];Yt(!!L,16349);const U=L,G=U?.error||U[0]?.error;if(G){wt(Ys,`RPC '${t}' stream ${s} received error:`,G);const j=G.status;let X=(function(lt){const V=Ui[lt];if(V!==void 0)return QR(V)})(j),Z=G.message;j==="NOT_FOUND"&&Z.includes("database")&&Z.includes("does not exist")&&Z.includes(this.databaseId.database)&&Wo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),X===void 0&&(X=ht.INTERNAL,Z="Unknown error status: "+j+" with message "+G.message),A=!0,N.o_(new Tt(X,Z)),E.close()}else wt(Ys,`RPC '${t}' stream ${s} received:`,L),N.__(L)}})),Qm.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Kw()}}function qk(n){return new Qm(n)}function LC(){return typeof window<"u"?window:null}function K1(){return typeof document<"u"?document:null}function M_(n){return new QV(n,!0)}Qm.c_=!1;class tb{constructor(t,e,i=1e3,s=1.5,o=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&wt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const f5="PersistentStream";class UC{constructor(t,e,i,s,o,c,f,m){this.Ci=t,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tb(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ht.RESOURCE_EXHAUSTED?(Ai(e.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===e&&this.G_(i,s)}),(i=>{t((()=>{const s=new Tt(ht.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(t,e){const i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return wt(f5,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(wt(f5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fk extends UC{constructor(t,e,i,s,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=WV(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Wt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Wt.min():c.readTime?wi(c.readTime):Wt.min()})(t);return this.listener.J_(e,i)}Z_(t){const e={};e.database=VT(this.serializer),e.addTarget=(function(o,c){let f;const m=c.target;if(f=rv(m)?{documents:sC(o,m)}:{query:aC(o,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=ZR(o,c.resumeToken);const g=MT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Wt.min())>0){f.readTime=gp(o,c.snapshotVersion.toTimestamp());const g=MT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const i=$V(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){const e={};e.database=VT(this.serializer),e.removeTarget=t,this.K_(e)}}class jk extends UC{constructor(t,e,i,s,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=ZV(t.writeResults,t.commitTime),i=wi(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=VT(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>f_(this.serializer,i)))};this.K_(e)}}class Kk{}class Yk extends Kk{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Tt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Wo(t,PT(e,i),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Tt(ht.UNKNOWN,o.toString())}))}jo(t,e,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(t,PT(e,i),s,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Tt(ht.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Qk(n,t,e,i){return new Yk(n,t,e,i)}class Xk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(e),this.aa=!1):wt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const hd="RemoteStore";class Jk{constructor(t,e,i,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Qh(this)&&(wt(hd,"Restarting streams for network reachability change."),await(async function(m){const g=Bt(m);g.Ea.add(4),await Pp(g),g.Va.set("Unknown"),g.Ea.delete(4),await P_(g)})(this))}))})),this.Va=new Xk(i,s)}}async function P_(n){if(Qh(n))for(const t of n.Ra)await t(!0)}async function Pp(n){for(const t of n.Ra)await t(!1)}function n2(n,t){const e=Bt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),ib(e)?nb(e):kp(e).O_()&&eb(e,t))}function vp(n,t){const e=Bt(n),i=kp(e);e.Ia.delete(t),i.O_()&&zC(e,t),e.Ia.size===0&&(i.O_()?i.L_():Qh(e)&&e.Va.set("Unknown"))}function eb(n,t){if(n.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}kp(n).Z_(t)}function zC(n,t){n.da.$e(t),kp(n).X_(t)}function nb(n){n.da=new FV({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),kp(n).start(),n.Va.ua()}function ib(n){return Qh(n)&&!kp(n).x_()&&n.Ia.size>0}function Qh(n){return Bt(n).Ea.size===0}function BC(n){n.da=void 0}async function Wk(n){n.Va.set("Online")}async function Zk(n){n.Ia.forEach(((t,e)=>{eb(n,t)}))}async function $k(n,t){BC(n),ib(n)?(n.Va.ha(t),nb(n)):n.Va.set("Unknown")}async function tL(n,t,e){if(n.Va.set("Online"),t instanceof WR&&t.state===2&&t.cause)try{await(async function(s,o){const c=o.cause;for(const f of o.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,t)}catch(i){wt(hd,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await gv(n,i)}else if(t instanceof F1?n.da.Xe(t):t instanceof JR?n.da.st(t):n.da.tt(t),!e.isEqual(Wt.min()))try{const i=await IC(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const f=o.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.Ia.get(g);E&&o.Ia.set(g,E.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const E=o.Ia.get(m);if(!E)return;o.Ia.set(m,E.withResumeToken(pi.EMPTY_BYTE_STRING,E.snapshotVersion)),zC(o,m);const b=new Ku(E.target,m,g,E.sequenceNumber);eb(o,b)})),o.remoteSyncer.applyRemoteEvent(f)})(n,e)}catch(i){wt(hd,"Failed to raise snapshot:",i),await gv(n,i)}}async function gv(n,t,e){if(!Kh(t))throw t;n.Ea.add(1),await Pp(n),n.Va.set("Offline"),e||(e=()=>IC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{wt(hd,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await P_(n)}))}function GC(n,t){return t().catch((e=>gv(n,e,t)))}async function Vp(n){const t=Bt(n),e=Lh(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Rh;for(;eL(t);)try{const s=await kk(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,nL(t,s)}catch(s){await gv(t,s)}HC(t)&&qC(t)}function eL(n){return Qh(n)&&n.Ta.length<10}function nL(n,t){n.Ta.push(t);const e=Lh(n);e.O_()&&e.Y_&&e.ea(t.mutations)}function HC(n){return Qh(n)&&!Lh(n).x_()&&n.Ta.length>0}function qC(n){Lh(n).start()}async function iL(n){Lh(n).ra()}async function sL(n){const t=Lh(n);for(const e of n.Ta)t.ea(e.mutations)}async function aL(n,t,e){const i=n.Ta.shift(),s=BS.from(i,t,e);await GC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Vp(n)}async function rL(n,t){t&&Lh(n).Y_&&await(async function(i,s){if((function(c){return YR(c)&&c!==ht.ABORTED})(s.code)){const o=i.Ta.shift();Lh(i).B_(),await GC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Vp(i)}})(n,t),HC(n)&&qC(n)}async function d5(n,t){const e=Bt(n);e.asyncQueue.verifyOperationInProgress(),wt(hd,"RemoteStore received new credentials");const i=Qh(e);e.Ea.add(3),await Pp(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await P_(e)}async function HT(n,t){const e=Bt(n);t?(e.Ea.delete(2),await P_(e)):t||(e.Ea.add(2),await Pp(e),e.Va.set("Unknown"))}function kp(n){return n.ma||(n.ma=(function(e,i,s){const o=Bt(e);return o.sa(),new Fk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Wk.bind(null,n),Yo:Zk.bind(null,n),t_:$k.bind(null,n),J_:tL.bind(null,n)}),n.Ra.push((async t=>{t?(n.ma.B_(),ib(n)?nb(n):n.Va.set("Unknown")):(await n.ma.stop(),BC(n))}))),n.ma}function Lh(n){return n.fa||(n.fa=(function(e,i,s){const o=Bt(e);return o.sa(),new jk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iL.bind(null,n),t_:rL.bind(null,n),ta:sL.bind(null,n),na:aL.bind(null,n)}),n.Ra.push((async t=>{t?(n.fa.B_(),await Vp(n)):(await n.fa.stop(),n.Ta.length>0&&(wt(hd,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class sb{constructor(t,e,i,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,o){const c=Date.now()+i,f=new sb(t,e,c,s,o);return f.start(i),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lp(n,t){if(Ai("AsyncQueue",`${t}: ${n}`),Kh(n))return new Tt(ht.UNAVAILABLE,`${t}: ${n}`);throw n}class Xm{static emptySet(t){return new Xm(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Lt.comparator(e.key,i.key):(e,i)=>Lt.comparator(e.key,i.key),this.keyedMap=I0(),this.sortedSet=new Dn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Xm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Xm;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class m5{constructor(){this.ga=new Dn(Lt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):qt(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Ep{constructor(t,e,i,s,o,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,o){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new Ep(t,e,Xm.emptySet(e),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&I_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}class oL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class lL{constructor(){this.queries=p5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=Bt(e),o=s.queries;s.queries=p5(),o.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Tt(ht.ABORTED,"Firestore shutting down"))}}function p5(){return new oc((n=>MR(n)),I_)}async function ab(n,t){const e=Bt(n);let i=3;const s=t.query;let o=e.queries.get(s);o?!o.Sa()&&t.Da()&&(i=2):(o=new oL,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(s,!0);break;case 1:o.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const f=Lp(c,`Initialization of query '${Bm(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,o),o.ba.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&ob(e)}async function rb(n,t){const e=Bt(n),i=t.query;let s=3;const o=e.queries.get(i);if(o){const c=o.ba.indexOf(t);c>=0&&(o.ba.splice(c,1),o.ba.length===0?s=t.Da()?0:1:!o.Sa()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function uL(n,t){const e=Bt(n);let i=!1;for(const s of t){const o=s.query,c=e.queries.get(o);if(c){for(const f of c.ba)f.Fa(s)&&(i=!0);c.wa=s}}i&&ob(e)}function cL(n,t,e){const i=Bt(n),s=i.queries.get(t);if(s)for(const o of s.ba)o.onError(e);i.queries.delete(t)}function ob(n){n.Ca.forEach((t=>{t.next()}))}var qT,g5;(g5=qT||(qT={})).Ma="default",g5.Cache="cache";class lb{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Ep(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Ep.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qT.Cache}}class hL{constructor(t,e){this.qa=t,this.byteLength=e}Ua(){return"metadata"in this.qa}}class _5{constructor(t){this.serializer=t}Ks(t){return Wl(this.serializer,t)}qs(t){return t.metadata.exists?iC(this.serializer,t.document,!1):Gn.newNoDocument(this.Ks(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return wi(t)}}class fL{constructor(t,e){this.$a=t,this.serializer=e,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=FC(t)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Wa.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Qa.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++e;const i=Pe.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.qa.document&&(this.Qa[this.Qa.length-1].document=t.qa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,{...this.progress}):null}za(t){const e=new Map,i=new _5(this.serializer);for(const s of t)if(s.metadata.queries){const o=i.Ks(s.metadata.name);for(const c of s.metadata.queries){const f=(e.get(c)||ve()).add(o);e.set(c,f)}}return e}async ja(t){const e=await Lk(t,new _5(this.serializer),this.Qa,this.$a.id),i=this.za(this.documents);for(const s of this.Wa)await Uk(t,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:e}}}function FC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jC{constructor(t){this.key=t}}class KC{constructor(t){this.key=t}}class YC{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.eu=VR(t),this.tu=new Xm(this.eu)}get nu(){return this.Za}ru(t,e){const i=e?e.iu:new m5,s=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((E,b)=>{const A=s.get(E),N=N_(this.query,b)?b:null,D=!!A&&this.mutatedKeys.has(A.key),L=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;A&&N?A.data.isEqual(N.data)?D!==L&&(i.track({type:3,doc:N}),U=!0):this.su(A,N)||(i.track({type:2,doc:N}),U=!0,(m&&this.eu(N,m)>0||g&&this.eu(N,g)<0)&&(f=!0)):!A&&N?(i.track({type:0,doc:N}),U=!0):A&&!N&&(i.track({type:1,doc:A}),U=!0,(m||g)&&(f=!0)),U&&(N?(c=c.add(N),o=L?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),i.track({type:1,doc:E})}return{tu:c,iu:i,Ss:f,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,b)=>(function(N,D){const L=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Vt:U})}};return L(N)-L(D)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(i),s=s??!1;const f=e&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Ep(this.query,t.tu,o,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new m5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new KC(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new jC(i))})),e}cu(t){this.Za=t.ks,this.Ya=ve();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Ep.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xh="SyncEngine";class dL{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class mL{constructor(t){this.key=t,this.hu=!1}}class pL{constructor(t,e,i,s,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new oc((f=>MR(f)),I_),this.Iu=new Map,this.Eu=new Set,this.Ru=new Dn(Lt.comparator),this.Au=new Map,this.Vu=new YS,this.du={},this.mu=new Map,this.fu=cd.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gL(n,t,e=!0){const i=i2(n);let s;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await QC(i,t,e,!0),s}async function _L(n,t){const e=i2(n);await QC(e,t,!0,!1)}async function QC(n,t,e,i){const s=await _p(n.localStore,Ea(t)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let f;return i&&(f=await ub(n,t,o,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&n2(n.remoteStore,s),f}async function ub(n,t,e,i,s){n.pu=(b,A,N)=>(async function(L,U,G,j){let X=U.view.ru(G);X.Ss&&(X=await dv(L.localStore,U.query,!1).then((({documents:V})=>U.view.ru(V,X))));const Z=j&&j.targetChanges.get(U.targetId),gt=j&&j.targetMismatches.get(U.targetId)!=null,lt=U.view.applyChanges(X,L.isPrimaryClient,Z,gt);return FT(L,U.targetId,lt.au),lt.snapshot})(n,b,A,N);const o=await dv(n.localStore,t,!0),c=new YC(t,o.ks),f=c.ru(o.documents),m=O_.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);FT(n,e,g.au);const E=new dL(t,e,c);return n.Tu.set(t,E),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),g.snapshot}async function yL(n,t,e){const i=Bt(n),s=i.Tu.get(t),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((c=>!I_(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await yp(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&vp(i.remoteStore,s.targetId),Tp(i,s.targetId)})).catch(jh)):(Tp(i,s.targetId),await yp(i.localStore,s.targetId,!0))}async function vL(n,t){const e=Bt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),vp(e.remoteStore,i.targetId))}async function EL(n,t,e){const i=db(n);try{const s=await(function(c,f){const m=Bt(c),g=an.now(),E=f.reduce(((N,D)=>N.add(D.key)),ve());let b,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let D=er(),L=ve();return m.xs.getEntries(N,E).next((U=>{D=U,D.forEach(((G,j)=>{j.isValidDocument()||(L=L.add(G))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,D))).next((U=>{b=U;const G=[];for(const j of f){const X=GV(j,b.get(j.key).overlayedDocument);X!=null&&G.push(new lc(j.key,X,AR(X.value.mapValue),Wn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,g,G,f)})).next((U=>{A=U;const G=U.applyToLocalDocumentSet(b,L);return m.documentOverlayCache.saveOverlays(N,U.batchId,G)}))})).then((()=>({batchId:A.batchId,changes:LR(b)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new Dn(le)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(i,s.batchId,e),await uc(i,s.changes),await Vp(i.remoteStore)}catch(s){const o=Lp(s,"Failed to persist write");e.reject(o)}}async function XC(n,t){const e=Bt(n);try{const i=await Vk(e.localStore,t);t.targetChanges.forEach(((s,o)=>{const c=e.Au.get(o);c&&(Yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Yt(c.hu,14607):s.removedDocuments.size>0&&(Yt(c.hu,42227),c.hu=!1))})),await uc(e,i,t)}catch(i){await jh(i)}}function y5(n,t,e){const i=Bt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach(((o,c)=>{const f=c.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=Bt(c);m.onlineState=f;let g=!1;m.queries.forEach(((E,b)=>{for(const A of b.ba)A.va(f)&&(g=!0)})),g&&ob(m)})(i.eventManager,t),s.length&&i.Pu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function TL(n,t,e){const i=Bt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),o=s&&s.key;if(o){let c=new Dn(Lt.comparator);c=c.insert(o,Gn.newNoDocument(o,Wt.min()));const f=ve().add(o),m=new x_(Wt.min(),new Map,new Dn(le),c,f);await XC(i,m),i.Ru=i.Ru.remove(o),i.Au.delete(t),fb(i)}else await yp(i.localStore,t,!1).then((()=>Tp(i,t,e))).catch(jh)}async function SL(n,t){const e=Bt(n),i=t.batch.batchId;try{const s=await Pk(e.localStore,t);hb(e,i,null),cb(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await uc(e,s)}catch(s){await jh(s)}}async function bL(n,t,e){const i=Bt(n);try{const s=await(function(c,f){const m=Bt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return m.mutationQueue.lookupMutationBatch(g,f).next((b=>(Yt(b!==null,37113),E=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,E,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>m.localDocuments.getDocuments(g,E)))}))})(i.localStore,t);hb(i,t,e),cb(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await uc(i,s)}catch(s){await jh(s)}}async function AL(n,t){const e=Bt(n);Qh(e.remoteStore)||wt(Xh,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(c){const f=Bt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(e.localStore);if(i===Rh)return void t.resolve();const s=e.mu.get(i)||[];s.push(t),e.mu.set(i,s)}catch(i){const s=Lp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(s)}}function cb(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function hb(n,t,e){const i=Bt(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(e?o.reject(e):o.resolve(),s=s.remove(t)),i.du[i.currentUser.toKey()]=s}}function Tp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Vu.Gr(t).forEach((i=>{n.Vu.containsKey(i)||JC(n,i)}))}function JC(n,t){n.Eu.delete(t.path.canonicalString());const e=n.Ru.get(t);e!==null&&(vp(n.remoteStore,e),n.Ru=n.Ru.remove(t),n.Au.delete(e),fb(n))}function FT(n,t,e){for(const i of e)i instanceof jC?(n.Vu.addReference(i.key,t),wL(n,i)):i instanceof KC?(wt(Xh,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,t),n.Vu.containsKey(i.key)||JC(n,i.key)):qt(19791,{wu:i})}function wL(n,t){const e=t.key,i=e.path.canonicalString();n.Ru.get(e)||n.Eu.has(i)||(wt(Xh,"New document in limbo: "+e),n.Eu.add(i),fb(n))}function fb(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Lt(Pe.fromString(t)),i=n.fu.next();n.Au.set(i,new mL(e)),n.Ru=n.Ru.insert(e,i),n2(n.remoteStore,new Ku(Ea(xp(e.path)),i,"TargetPurposeLimboResolution",$a.ce))}}async function uc(n,t,e){const i=Bt(n),s=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,t,e).then((g=>{if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:e?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=WS.Es(m.targetId,g);o.push(E)}})))})),await Promise.all(c),i.Pu.J_(s),await(async function(m,g){const E=Bt(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>it.forEach(g,(A=>it.forEach(A.Ts,(N=>E.persistence.referenceDelegate.addReference(b,A.targetId,N))).next((()=>it.forEach(A.Is,(N=>E.persistence.referenceDelegate.removeReference(b,A.targetId,N)))))))))}catch(b){if(!Kh(b))throw b;wt(ZS,"Failed to update sequence numbers: "+b)}for(const b of g){const A=b.targetId;if(!b.fromCache){const N=E.vs.get(A),D=N.snapshotVersion,L=N.withLastLimboFreeSnapshotVersion(D);E.vs=E.vs.insert(A,L)}}})(i.localStore,o))}async function RL(n,t){const e=Bt(n);if(!e.currentUser.isEqual(t)){wt(Xh,"User change. New user:",t.toKey());const i=await CC(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((f=>{f.forEach((m=>{m.reject(new Tt(ht.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await uc(e,i.Ns)}}function CL(n,t){const e=Bt(n),i=e.Au.get(t);if(i&&i.hu)return ve().add(i.key);{let s=ve();const o=e.Iu.get(t);if(!o)return s;for(const c of o){const f=e.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}async function IL(n,t){const e=Bt(n),i=await dv(e.localStore,t.query,!0),s=t.view.cu(i);return e.isPrimaryClient&&FT(e,t.targetId,s.au),s}async function NL(n,t){const e=Bt(n);return xC(e.localStore,t).then((i=>uc(e,i)))}async function DL(n,t,e,i){const s=Bt(n),o=await(function(f,m){const g=Bt(f),E=Bt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.Xn(b,m).next((A=>A?g.localDocuments.getDocuments(b,A):it.resolve(null)))))})(s.localStore,t);o!==null?(e==="pending"?await Vp(s.remoteStore):e==="acknowledged"||e==="rejected"?(hb(s,t,i||null),cb(s,t),(function(f,m){Bt(Bt(f).mutationQueue).nr(m)})(s.localStore,t)):qt(6720,"Unknown batchState",{bu:e}),await uc(s,o)):wt(Xh,"Cannot apply mutation batch with id: "+t)}async function xL(n,t){const e=Bt(n);if(i2(e),db(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),s=await v5(e,i.toArray());e.gu=!0,await HT(e.remoteStore,!0);for(const o of s)n2(e.remoteStore,o)}else if(t===!1&&e.gu!==!1){const i=[];let s=Promise.resolve();e.Iu.forEach(((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):s=s.then((()=>(Tp(e,c),yp(e.localStore,c,!0)))),vp(e.remoteStore,c)})),await s,await v5(e,i),(function(c){const f=Bt(c);f.Au.forEach(((m,g)=>{vp(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Dn(Lt.comparator)})(e),e.gu=!1,await HT(e.remoteStore,!1)}}async function v5(n,t,e){const i=Bt(n),s=[],o=[];for(const c of t){let f;const m=i.Iu.get(c);if(m&&m.length!==0){f=await _p(i.localStore,Ea(m[0]));for(const g of m){const E=i.Tu.get(g),b=await IL(i,E);b.snapshot&&o.push(b.snapshot)}}else{const g=await DC(i.localStore,c);f=await _p(i.localStore,g),await ub(i,WC(g),c,!1,f.resumeToken)}s.push(f)}return i.Pu.J_(o),s}function WC(n){return OR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OL(n){return(function(e){return Bt(Bt(e).persistence).hs()})(Bt(n).localStore)}async function ML(n,t,e,i){const s=Bt(n);if(s.gu)return void wt(Xh,"Ignoring unexpected query state notification.");const o=s.Iu.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=await xC(s.localStore,PR(o[0])),f=x_.createSynthesizedRemoteEventForCurrentChange(t,e==="current",pi.EMPTY_BYTE_STRING);await uc(s,c,f);break}case"rejected":await yp(s.localStore,t,!0),Tp(s,t,i);break;default:qt(64155,e)}}async function PL(n,t,e){const i=i2(n);if(i.gu){for(const s of t){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){wt(Xh,"Adding an already active target "+s);continue}const o=await DC(i.localStore,s),c=await _p(i.localStore,o);await ub(i,WC(o),c.targetId,!1,c.resumeToken),n2(i.remoteStore,c)}for(const s of e)i.Iu.has(s)&&await yp(i.localStore,s,!1).then((()=>{vp(i.remoteStore,s),Tp(i,s)})).catch(jh)}}function i2(n){const t=Bt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=XC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TL.bind(null,t),t.Pu.J_=uL.bind(null,t.eventManager),t.Pu.yu=cL.bind(null,t.eventManager),t}function db(n){const t=Bt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=SL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bL.bind(null,t),t}function VL(n,t,e){const i=Bt(n);(async function(o,c,f){try{const m=await c.getMetadata();if(await(function(N,D){const L=Bt(N),U=wi(D.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",(G=>L.Pi.getBundleMetadata(G,D.id))).then((G=>!!G&&G.createTime.compareTo(U)>=0))})(o.localStore,m))return await c.close(),f._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(FC(m));const g=new fL(m,c.serializer);let E=await c.Su();for(;E;){const A=await g.Ga(E);A&&f._updateProgress(A),E=await c.Su()}const b=await g.ja(o.localStore);return await uc(o,b.Ja,void 0),await(function(N,D){const L=Bt(N);return L.persistence.runTransaction("Save bundle","readwrite",(U=>L.Pi.saveBundleMetadata(U,D)))})(o.localStore,m),f._completeWith(b.progress),Promise.resolve(b.Ha)}catch(m){return Wo(Xh,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(i,t,e).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class d_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=M_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return RC(this.persistence,new wC,t.initialUser,this.serializer)}Cu(t){return new QS(e2.Vi,this.serializer)}Du(t){return new kC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}d_.provider={build:()=>new d_};class kL extends d_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Yt(this.persistence.referenceDelegate instanceof fv,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new vC(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new QS((i=>fv.Vi(i,e)),this.serializer)}}class ZC extends d_{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await db(this.xu.syncEngine),await Vp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return RC(this.persistence,new wC,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new vC(i,t.asyncQueue,e)}Mu(t,e){const i=new zP(e,this.persistence);return new UP(t.asyncQueue,i)}Cu(t){const e=JS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new XS(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,LC(),K1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new kC}}class LL extends ZC{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof UE&&(this.sharedClientState.syncEngine={So:DL.bind(null,e),Do:ML.bind(null,e),Co:PL.bind(null,e),hs:OL.bind(null,e),bo:NL.bind(null,e)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await xL(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(t){const e=LC();if(!UE.v(e))throw new Tt(ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=JS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new UE(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class m_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>y5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RL.bind(null,this.syncEngine),await HT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new lL})()}createDatastore(t){const e=M_(t.databaseInfo.databaseId),i=qk(t.databaseInfo);return Qk(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,o,c,f){return new Jk(i,s,o,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>y5(this.syncEngine,e,0)),(function(){return h5.v()?new h5:new zk})())}createSyncEngine(t,e){return(function(s,o,c,f,m,g,E){const b=new pL(s,o,c,f,m,g);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=Bt(e);wt(hd,"RemoteStore shutting down."),i.Ea.add(5),await Pp(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m_.provider={build:()=>new m_};function E5(n,t=10240){let e=0;return{async read(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class s2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ai("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class UL{constructor(t,e){this.Bu=t,this.serializer=e,this.metadata=new Ds,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.Ua()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.Ku();if(t===null)return null;const e=this.Lu.decode(t),i=Number(e);isNaN(i)&&this.qu(`length string (${e}) is not valid number`);const s=await this.Uu(i);return new hL(JSON.parse(s),t.length+i)}$u(){return this.buffer.findIndex((t=>t===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Uu(t){for(;this.buffer.length<t;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const e=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Wu(){const t=await this.Bu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}let zL=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Tt(ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await(async function(s,o){const c=Bt(s),f={documents:o.map((b=>h_(c.serializer,b)))},m=await c.jo("BatchGetDocuments",c.serializer.databaseId,Pe.emptyPath(),f,o.length),g=new Map;m.forEach((b=>{const A=JV(c.serializer,b);g.set(A.key.toString(),A)}));const E=[];return o.forEach((b=>{const A=g.get(b.toString());Yt(!!A,55234,{key:b}),E.push(A)})),E})(this.datastore,t);return e.forEach((i=>this.recordVersion(i))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Mp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((e,i)=>{const s=Lt.fromPath(i);this.mutations.push(new US(s,this.precondition(s)))})),await(async function(i,s){const o=Bt(i),c={writes:s.map((f=>f_(o.serializer,f)))};await o.Wo("Commit",o.serializer.databaseId,Pe.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw qt(50498,{Gu:t.constructor.name});e=Wt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Tt(ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Wt.min())?Wn.exists(!1):Wn.updateTime(e):Wn.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wt.min()))throw new Tt(ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(e)}return Wn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};class BL{constructor(t,e,i,s,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=s,this.deferred=o,this.zu=i.maxAttempts,this.M_=new tb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const t=new zL(this.datastore),e=this.Ju(t);e&&e.then((i=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Zu(s)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(t){try{const e=this.updateFunction(t);return!w_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(t){this.zu>0&&this.Xu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(t)}Xu(t){if(t?.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!YR(e)}return!1}}const Uh="FirestoreClient";class GL{constructor(t,e,i,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=s,this.user=ls.UNAUTHENTICATED,this.clientId=AS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{wt(Uh,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(wt(Uh,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Lp(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function BE(n,t){n.asyncQueue.verifyOperationInProgress(),wt(Uh,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await CC(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function T5(n,t){n.asyncQueue.verifyOperationInProgress();const e=await mb(n);wt(Uh,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>d5(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>d5(t.remoteStore,s))),n._onlineComponents=t}async function mb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){wt(Uh,"Using user provided OfflineComponentProvider");try{await BE(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===ht.FAILED_PRECONDITION||s.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Wo("Error using user provided cache. Falling back to memory cache: "+e),await BE(n,new d_)}}else wt(Uh,"Using default OfflineComponentProvider"),await BE(n,new kL(void 0));return n._offlineComponents}async function a2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(wt(Uh,"Using user provided OnlineComponentProvider"),await T5(n,n._uninitializedComponentsProvider._online)):(wt(Uh,"Using default OnlineComponentProvider"),await T5(n,new m_))),n._onlineComponents}function $C(n){return mb(n).then((t=>t.persistence))}function pb(n){return mb(n).then((t=>t.localStore))}function t8(n){return a2(n).then((t=>t.remoteStore))}function gb(n){return a2(n).then((t=>t.syncEngine))}function HL(n){return a2(n).then((t=>t.datastore))}async function Sp(n){const t=await a2(n),e=t.eventManager;return e.onListen=gL.bind(null,t.syncEngine),e.onUnlisten=yL.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=_L.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=vL.bind(null,t.syncEngine),e}function qL(n){return n.asyncQueue.enqueue((async()=>{const t=await $C(n),e=await t8(n);return t.setNetworkEnabled(!0),(function(s){const o=Bt(s);return o.Ea.delete(0),P_(o)})(e)}))}function FL(n){return n.asyncQueue.enqueue((async()=>{const t=await $C(n),e=await t8(n);return t.setNetworkEnabled(!1),(async function(s){const o=Bt(s);o.Ea.add(0),await Pp(o),o.Va.set("Offline")})(e)}))}function jL(n,t,e,i){const s=new s2(i),o=new lb(t,s,e);return n.asyncQueue.enqueueAndForget((async()=>ab(await Sp(n),o))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>rb(await Sp(n),o)))}}function KL(n,t){const e=new Ds;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await(function(g,E){const b=Bt(g);return b.persistence.runTransaction("read document","readonly",(A=>b.localDocuments.getDocument(A,E)))})(s,o);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Tt(ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Lp(f,`Failed to get document '${o} from cache`);c.reject(m)}})(await pb(n),t,e))),e.promise}function e8(n,t,e={}){const i=new Ds;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new s2({next:A=>{E.Nu(),c.enqueueAndForget((()=>rb(o,b)));const N=A.docs.has(f);!N&&A.fromCache?g.reject(new Tt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&m&&m.source==="server"?g.reject(new Tt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new lb(xp(f.path),E,{includeMetadataChanges:!0,Ka:!0});return ab(o,b)})(await Sp(n),n.asyncQueue,t,e,i))),i.promise}function YL(n,t){const e=new Ds;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await dv(s,o,!0),m=new YC(o,f.ks),g=m.ru(f.documents),E=m.applyChanges(g,!1);c.resolve(E.snapshot)}catch(f){const m=Lp(f,`Failed to execute query '${o} against cache`);c.reject(m)}})(await pb(n),t,e))),e.promise}function n8(n,t,e={}){const i=new Ds;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new s2({next:A=>{E.Nu(),c.enqueueAndForget((()=>rb(o,b))),A.fromCache&&m.source==="server"?g.reject(new Tt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new lb(f,E,{includeMetadataChanges:!0,Ka:!0});return ab(o,b)})(await Sp(n),n.asyncQueue,t,e,i))),i.promise}function QL(n,t){const e=new Ds;return n.asyncQueue.enqueueAndForget((async()=>EL(await gb(n),t,e))),e.promise}function XL(n,t){const e=new s2(t);return n.asyncQueue.enqueueAndForget((async()=>(function(s,o){Bt(s).Ca.add(o),o.next()})(await Sp(n),e))),()=>{e.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,o){Bt(s).Ca.delete(o)})(await Sp(n),e)))}}function JL(n,t,e){const i=new Ds;return n.asyncQueue.enqueueAndForget((async()=>{const s=await HL(n);new BL(n.asyncQueue,s,e,t,i).ju()})),i.promise}function WL(n,t,e,i){const s=(function(c,f){let m;return m=typeof c=="string"?XR().encode(c):c,(function(E,b){return new UL(E,b)})((function(E,b){if(E instanceof Uint8Array)return E5(E,b);if(E instanceof ArrayBuffer)return E5(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(e,M_(t));n.asyncQueue.enqueueAndForget((async()=>{VL(await gb(n),s,i)}))}function ZL(n,t){return n.asyncQueue.enqueue((async()=>(function(i,s){const o=Bt(i);return o.persistence.runTransaction("Get named query","readonly",(c=>o.Pi.getNamedQuery(c,s)))})(await pb(n),t)))}function i8(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const $L="ComponentProvider",S5=new Map;function tU(n,t,e,i,s){return new mV(n,t,e,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,i8(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}const s8="firestore.googleapis.com",b5=!0;class A5{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Tt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s8,this.ssl=b5}else this.host=t.host,this.ssl=t.ssl??b5;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pC;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pk)throw new Tt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Jw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i8(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Tt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Tt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Tt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class V_{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Tt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A5(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new RP;switch(i.type){case"firstParty":return new DP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Tt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=S5.get(e);i&&(wt($L,"Removing Datastore"),S5.delete(e),i.terminate())})(this),Promise.resolve()}}function eU(n,t,e,i={}){n=Xe(n,V_);const s=iu(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${t}:${e}`;s&&(Uv(`https://${f}`),zv("Firestore",!0)),o.host!==s8&&o.host!==f&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:f,ssl:s,emulatorOptions:i};if(!Nh(m,c)&&(n._setSettings(m),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=ls.MOCK_USER;else{g=bw(i.mockUserToken,n._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Tt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ls(b)}n._authCredentials=new CP(new Qw(g,E))}}let ba=class a8{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new a8(this.firestore,t,this._query)}},In=class x0{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ch(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new x0(this.firestore,t,this._key)}toJSON(){return{type:x0._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(A_(e,x0._jsonSchema))return new x0(t,i||null,new Lt(Pe.fromString(e.referencePath)))}};In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Bi("string",In._jsonSchemaVersion),referencePath:Bi("string")};let Ch=class r8 extends ba{constructor(t,e,i){super(t,e,xp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new In(this.firestore,null,new Lt(t))}withConverter(t){return new r8(this.firestore,t,this._path)}};function _b(n,t,...e){if(n=jt(n),wS("collection","path",t),n instanceof V_){const i=Pe.fromString(t,...e);return f3(i),new Ch(n,null,i)}{if(!(n instanceof In||n instanceof Ch))throw new Tt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Pe.fromString(t,...e));return f3(i),new Ch(n.firestore,null,i)}}function nU(n,t){if(n=Xe(n,V_),wS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ba(n,null,(function(i){return new rc(Pe.emptyPath(),i)})(t))}function _v(n,t,...e){if(n=jt(n),arguments.length===1&&(t=AS.newId()),wS("doc","path",t),n instanceof V_){const i=Pe.fromString(t,...e);return h3(i),new In(n,null,new Lt(i))}{if(!(n instanceof In||n instanceof Ch))throw new Tt(ht.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Pe.fromString(t,...e));return h3(i),new In(n.firestore,n instanceof Ch?n.converter:null,new Lt(i))}}function o8(n,t){return n=jt(n),t=jt(t),(n instanceof In||n instanceof Ch)&&(t instanceof In||t instanceof Ch)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function l8(n,t){return n=jt(n),t=jt(t),n instanceof ba&&t instanceof ba&&n.firestore===t.firestore&&I_(n._query,t._query)&&n.converter===t.converter}const w5="AsyncQueue";class R5{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tb(this,"async_queue_retry"),this._c=()=>{const i=K1();i&&wt(w5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=K1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=K1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Kh(t))throw t;wt(w5,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",C5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=sb.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&qt(47125,{Pc:C5(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function C5(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class iU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ds,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const sU=-1;let Ri=class extends V_{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new R5,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new R5(t),this._firestoreClient=void 0,await t}}};function Zs(n){if(n._terminated)throw new Tt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||u8(n),n._firestoreClient}function u8(n){const t=n._freezeSettings(),e=tU(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new GL(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}function aU(n,t){Wo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();return c8(n,m_.provider,{build:i=>new ZC(i,e.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}async function rU(n){Wo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();c8(n,m_.provider,{build:e=>new LL(e,t.cacheSizeBytes)})}function c8(n,t,e){if((n=Xe(n,Ri))._firestoreClient||n._terminated)throw new Tt(ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Tt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:t,_offline:e},u8(n)}function oU(n){if(n._initialized&&!n._terminated)throw new Tt(ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ds;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Jl.v())return Promise.resolve();const s=i+AC;await Jl.delete(s)})(JS(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function lU(n){return(function(e){const i=new Ds;return e.asyncQueue.enqueueAndForget((async()=>AL(await gb(e),i))),i.promise})(Zs(n=Xe(n,Ri)))}function uU(n){return qL(Zs(n=Xe(n,Ri)))}function cU(n){return FL(Zs(n=Xe(n,Ri)))}function hU(n,t){const e=Zs(n=Xe(n,Ri)),i=new iU;return WL(e,n._databaseId,t,i),i}function fU(n,t){return ZL(Zs(n=Xe(n,Ri)),t).then((e=>e?new ba(n,null,e.query):null))}class Xs{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xs(pi.fromBase64String(t))}catch(e){throw new Tt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Xs(pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(A_(t,Xs._jsonSchema))return Xs.fromBase64String(t.bytes)}}Xs._jsonSchemaVersion="firestore/bytes/1.0",Xs._jsonSchema={type:Bi("string",Xs._jsonSchemaVersion),bytes:Bi("string")};let fd=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Tt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};let Id=class{constructor(t){this._methodName=t}};class Qo{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Tt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Tt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return le(this._lat,t._lat)||le(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qo._jsonSchemaVersion}}static fromJSON(t){if(A_(t,Qo._jsonSchema))return new Qo(t.latitude,t.longitude)}}Qo._jsonSchemaVersion="firestore/geoPoint/1.0",Qo._jsonSchema={type:Bi("string",Qo._jsonSchemaVersion),latitude:Bi("number"),longitude:Bi("number")};class Xo{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Xo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(A_(t,Xo._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Xo(t.vectorValues);throw new Tt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xo._jsonSchemaVersion="firestore/vectorValue/1.0",Xo._jsonSchema={type:Bi("string",Xo._jsonSchemaVersion),vectorValues:Bi("object")};const dU=/^__.*__$/;class mU{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new lc(t,this.data,this.fieldMask,e,this.fieldTransforms):new Op(t,this.data,e,this.fieldTransforms)}}class h8{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new lc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function f8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt(40011,{dataSource:n})}}class r2{constructor(t,e,i,s,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new r2({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return yv(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(f8(this.dataSource)&&dU.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class pU{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||M_(t)}createContext(t,e,i,s=!1){return new r2({dataSource:t,methodName:e,targetDoc:i,path:Jn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nd(n){const t=n._freezeSettings(),e=M_(n._databaseId);return new pU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function o2(n,t,e,i,s,o={}){const c=n.createContext(o.merge||o.mergeFields?2:0,t,e,s);Ab("Data must be an object, but it was:",c,i);const f=p8(i,c);let m,g;if(o.merge)m=new tr(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const b of o.mergeFields){const A=dd(t,b,e);if(!c.contains(A))throw new Tt(ht.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);y8(E,A)||E.push(A)}m=new tr(E),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new mU(new Ns(f),m,g)}class k_ extends Id{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof k_}}function d8(n,t,e){return new r2({dataSource:3,targetDoc:t.settings.targetDoc,methodName:n._methodName,arrayElement:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class yb extends Id{_toFieldTransform(t){return new D_(t.path,new mp)}isEqual(t){return t instanceof yb}}class vb extends Id{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=d8(this,t,!0),i=this.Ac.map((o=>Dd(o,e))),s=new rd(i);return new D_(t.path,s)}isEqual(t){return t instanceof vb&&Nh(this.Ac,t.Ac)}}class Eb extends Id{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=d8(this,t,!0),i=this.Ac.map((o=>Dd(o,e))),s=new od(i);return new D_(t.path,s)}isEqual(t){return t instanceof Eb&&Nh(this.Ac,t.Ac)}}class Tb extends Id{constructor(t,e){super(t),this.Vc=e}_toFieldTransform(t){const e=new pp(t.serializer,BR(t.serializer,this.Vc));return new D_(t.path,e)}isEqual(t){return t instanceof Tb&&this.Vc===t.Vc}}function Sb(n,t,e,i){const s=n.createContext(1,t,e);Ab("Data must be an object, but it was:",s,i);const o=[],c=Ns.empty();Yh(i,((m,g)=>{const E=_8(t,m,e);g=jt(g);const b=s.childContextForFieldPath(E);if(g instanceof k_)o.push(E);else{const A=Dd(g,b);A!=null&&(o.push(E),c.set(E,A))}}));const f=new tr(o);return new h8(c,f,s.fieldTransforms)}function bb(n,t,e,i,s,o){const c=n.createContext(1,t,e),f=[dd(t,i,e)],m=[s];if(o.length%2!=0)throw new Tt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)f.push(dd(t,o[A])),m.push(o[A+1]);const g=[],E=Ns.empty();for(let A=f.length-1;A>=0;--A)if(!y8(g,f[A])){const N=f[A];let D=m[A];D=jt(D);const L=c.childContextForFieldPath(N);if(D instanceof k_)g.push(N);else{const U=Dd(D,L);U!=null&&(g.push(N),E.set(N,U))}}const b=new tr(g);return new h8(E,b,c.fieldTransforms)}function m8(n,t,e,i=!1){return Dd(e,n.createContext(i?4:3,t))}function Dd(n,t){if(g8(n=jt(n)))return Ab("Unsupported field value:",t,n),p8(n,t);if(n instanceof Id)return(function(i,s){if(!f8(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,s){const o=[];let c=0;for(const f of i){let m=Dd(f,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,s){if((i=jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=an.fromDate(i);return{timestampValue:gp(s.serializer,o)}}if(i instanceof an){const o=new an(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gp(s.serializer,o)}}if(i instanceof Qo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xs)return{bytesValue:ZR(s.serializer,i._byteString)};if(i instanceof In){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Xo)return(function(c,f){const m=c instanceof Xo?c.toArray():c;return{mapValue:{fields:{[OS]:{stringValue:MS},[hp]:{arrayValue:{values:m.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return LS(f.serializer,E)}))}}}}}})(i,s);if(cC(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qv(i)}`)})(n,t)}function p8(n,t){const e={};return pR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yh(n,((i,s)=>{const o=Dd(s,t.childContextForField(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function g8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof an||n instanceof Qo||n instanceof Xs||n instanceof In||n instanceof Id||n instanceof Xo||cC(n))}function Ab(n,t,e){if(!g8(e)||!Ww(e)){const i=qv(e);throw i==="an object"?t.createError(n+" a custom object"):t.createError(n+" "+i)}}function dd(n,t,e){if((t=jt(t))instanceof fd)return t._internalPath;if(typeof t=="string")return _8(n,t);throw yv("Field path arguments must be of type string or ",n,!1,void 0,e)}const gU=new RegExp("[~\\*/\\[\\]]");function _8(n,t,e){if(t.search(gU)>=0)throw yv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new fd(...t.split("."))._internalPath}catch{throw yv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function yv(n,t,e,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new Tt(ht.INVALID_ARGUMENT,f+n+m)}function y8(n,t){return n.some((e=>e.isEqual(t)))}class wb{convertValue(t,e="none"){switch(Ph(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(tc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw qt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Yh(t,((s,o)=>{i[s]=this.convertValue(o,e)})),i}convertVectorValue(t){const e=t.fields?.[hp].arrayValue?.values?.map((i=>Xn(i.doubleValue)));return new Xo(e)}convertGeoPoint(t){return new Qo(Xn(t.latitude),Xn(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Xv(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(o_(t));default:return null}}convertTimestamp(t){const e=$u(t);return new an(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Pe.fromString(t);Yt(uC(i),9688,{name:t});const s=new Mh(i.get(1),i.get(3)),o=new Lt(i.popFirst(5));return s.isEqual(e)||Ai(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}class xd extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xs(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,e)}}function _U(){return new k_("deleteField")}function yU(){return new yb("serverTimestamp")}function vU(...n){return new vb("arrayUnion",n)}function EU(...n){return new Eb("arrayRemove",n)}function TU(n){return new Tb("increment",n)}const I5="@firebase/firestore",N5="4.11.0";function jT(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class p_{constructor(t,e,i,s,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new SU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(dd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class SU extends p_{data(){return super.data()}}function v8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Tt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rb{}class L_ extends Rb{}function ph(n,t,...e){let i=[];t instanceof Rb&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((m=>m instanceof Cb)).length,f=o.filter((m=>m instanceof l2)).length;if(c>1||c>0&&f>0)throw new Tt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class l2 extends L_{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new l2(t,e,i)}_apply(t){const e=this._parse(t);return T8(t._query,e),new ba(t.firestore,t.converter,OT(t._query,e))}_parse(t){const e=Nd(t.firestore);return(function(o,c,f,m,g,E,b){let A;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Tt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){x5(b,E);const D=[];for(const L of b)D.push(D5(m,o,L));A={arrayValue:{values:D}}}else A=D5(m,o,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||x5(b,E),A=m8(f,c,b,E==="in"||E==="not-in");return ze.create(g,E,A)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function bU(n,t,e){const i=t,s=dd("where",n);return l2._create(s,i,e)}class Cb extends Rb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Cb(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:rn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,o){let c=s;const f=o.getFlattenedFilters();for(const m of f)T8(c,m),c=OT(c,m)})(t._query,e),new ba(t.firestore,t.converter,OT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ib extends L_{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ib(t,e)}_apply(t){const e=(function(s,o,c){if(s.startAt!==null)throw new Tt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Tt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new c_(o,c)})(t._query,this._field,this._direction);return new ba(t.firestore,t.converter,IV(t._query,e))}}function AU(n,t="asc"){const e=t,i=dd("orderBy",n);return Ib._create(i,e)}class u2 extends L_{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new u2(t,e,i)}_apply(t){return new ba(t.firestore,t.converter,lv(t._query,this._limit,this._limitType))}}function wU(n){return Zw("limit",n),u2._create("limit",n,"F")}function RU(n){return Zw("limitToLast",n),u2._create("limitToLast",n,"L")}class c2 extends L_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new c2(t,e,i)}_apply(t){const e=E8(t,this.type,this._docOrFields,this._inclusive);return new ba(t.firestore,t.converter,NV(t._query,e))}}function CU(...n){return c2._create("startAt",n,!0)}function IU(...n){return c2._create("startAfter",n,!1)}class h2 extends L_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new h2(t,e,i)}_apply(t){const e=E8(t,this.type,this._docOrFields,this._inclusive);return new ba(t.firestore,t.converter,DV(t._query,e))}}function NU(...n){return h2._create("endBefore",n,!1)}function DU(...n){return h2._create("endAt",n,!0)}function E8(n,t,e,i){if(e[0]=jt(e[0]),e[0]instanceof p_)return(function(o,c,f,m,g){if(!m)throw new Tt(ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const E=[];for(const b of Ym(o))if(b.field.isKeyField())E.push(sd(c,m.key));else{const A=m.data.field(b.field);if(Qv(A))throw new Tt(ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const N=b.field.canonicalString();throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(A)}return new kh(E,g)})(n._query,n.firestore._databaseId,t,e[0]._document,i);{const s=Nd(n.firestore);return(function(c,f,m,g,E,b){const A=c.explicitOrderBy;if(E.length>A.length)throw new Tt(ht.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let D=0;D<E.length;D++){const L=E[D];if(A[D].field.isKeyField()){if(typeof L!="string")throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof L}`);if(!VS(c)&&L.indexOf("/")!==-1)throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${L}' contains a slash.`);const U=c.path.child(Pe.fromString(L));if(!Lt.isDocumentKey(U))throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const G=new Lt(U);N.push(sd(f,G))}else{const U=m8(m,g,L);N.push(U)}}return new kh(N,b)})(n._query,n.firestore._databaseId,s,t,e,i)}}function D5(n,t,e){if(typeof(e=jt(e))=="string"){if(e==="")throw new Tt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VS(t)&&e.indexOf("/")!==-1)throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Pe.fromString(e));if(!Lt.isDocumentKey(i))throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return sd(n,new Lt(i))}if(e instanceof In)return sd(n,e._key);throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qv(e)}.`)}function x5(n,t){if(!Array.isArray(n)||n.length===0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function T8(n,t){const e=(function(s,o){for(const c of s)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Tt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Tt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function f2(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class xU extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xs(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,e)}}class Xf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let yo=class S8 extends p_{constructor(t,e,i,s,o,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new K0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(dd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=S8._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:Bi("string",yo._jsonSchemaVersion),bundleSource:Bi("string","DocumentSnapshot"),bundleName:Bi("string"),bundle:Bi("string")};let K0=class extends yo{data(t={}){return super.data(t)}},Jo=class b8{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Xf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new K0(this._firestore,this._userDataWriter,i.key,i,new Xf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Tt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new K0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Xf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const m=new K0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Xf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,E=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),E=c.indexOf(f.doc.key)),{type:OU(f.type),doc:m,oldIndex:g,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=b8._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=AS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function OU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:n})}}function A8(n,t){return n instanceof yo&&t instanceof yo?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Jo&&t instanceof Jo&&n._firestore===t._firestore&&l8(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:Bi("string",Jo._jsonSchemaVersion),bundleSource:Bi("string","QuerySnapshot"),bundleName:Bi("string"),bundle:Bi("string")};const MU={maxAttempts:5};let PU=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Nd(t)}set(t,e,i){this._verifyNotCommitted();const s=bh(t,this._firestore),o=f2(s.converter,e,i),c=o2(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Wn.none())),this}update(t,e,i,...s){this._verifyNotCommitted();const o=bh(t,this._firestore);let c;return c=typeof(e=jt(e))=="string"||e instanceof fd?bb(this._dataReader,"WriteBatch.update",o._key,e,i,s):Sb(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Wn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=bh(t,this._firestore);return this._mutations=this._mutations.concat(new Mp(e._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function bh(n,t){if((n=jt(n)).firestore!==t)throw new Tt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class VU{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Nd(t)}get(t){const e=bh(t,this._firestore),i=new xU(this._firestore);return this._transaction.lookup([e._key]).then((s=>{if(!s||s.length!==1)return qt(24041);const o=s[0];if(o.isFoundDocument())return new p_(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new p_(this._firestore,i,e._key,null,e.converter);throw qt(18433,{doc:o})}))}set(t,e,i){const s=bh(t,this._firestore),o=f2(s.converter,e,i),c=o2(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(t,e,i,...s){const o=bh(t,this._firestore);let c;return c=typeof(e=jt(e))=="string"||e instanceof fd?bb(this._dataReader,"Transaction.update",o._key,e,i,s):Sb(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=bh(t,this._firestore);return this._transaction.delete(e._key),this}}let kU=class extends VU{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=bh(t,this._firestore),i=new xd(this._firestore);return super.get(t).then((s=>new yo(this._firestore,i,e._key,s._document,new Xf(!1,!1),e.converter)))}};function LU(n,t,e){n=Xe(n,Ri);const i={...MU,...e};(function(c){if(c.maxAttempts<1)throw new Tt(ht.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const s=Zs(n);return JL(s,(o=>t(new kU(n,o))),i)}function UU(n){n=Xe(n,In);const t=Xe(n.firestore,Ri),e=Zs(t);return e8(e,n._key).then((i=>Nb(t,n,i)))}function zU(n){n=Xe(n,In);const t=Xe(n.firestore,Ri),e=Zs(t),i=new xd(t);return KL(e,n._key).then((s=>new yo(t,i,n._key,s,new Xf(s!==null&&s.hasLocalMutations,!0),n.converter)))}function BU(n){n=Xe(n,In);const t=Xe(n.firestore,Ri),e=Zs(t);return e8(e,n._key,{source:"server"}).then((i=>Nb(t,n,i)))}function w8(n){n=Xe(n,ba);const t=Xe(n.firestore,Ri),e=Zs(t),i=new xd(t);return v8(n._query),n8(e,n._query).then((s=>new Jo(t,i,n,s)))}function GU(n){n=Xe(n,ba);const t=Xe(n.firestore,Ri),e=Zs(t),i=new xd(t);return YL(e,n._query).then((s=>new Jo(t,i,n,s)))}function HU(n){n=Xe(n,ba);const t=Xe(n.firestore,Ri),e=Zs(t),i=new xd(t);return n8(e,n._query,{source:"server"}).then((s=>new Jo(t,i,n,s)))}function O5(n,t,e){n=Xe(n,In);const i=Xe(n.firestore,Ri),s=f2(n.converter,t,e),o=Nd(i);return U_(i,[o2(o,"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,Wn.none())])}function M5(n,t,e,...i){n=Xe(n,In);const s=Xe(n.firestore,Ri),o=Nd(s);let c;return c=typeof(t=jt(t))=="string"||t instanceof fd?bb(o,"updateDoc",n._key,t,e,i):Sb(o,"updateDoc",n._key,t),U_(s,[c.toMutation(n._key,Wn.exists(!0))])}function qU(n){return U_(Xe(n.firestore,Ri),[new Mp(n._key,Wn.none())])}function FU(n,t){const e=Xe(n.firestore,Ri),i=_v(n),s=f2(n.converter,t),o=Nd(n.firestore);return U_(e,[o2(o,"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then((()=>i))}function R8(n,...t){n=jt(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||jT(t[i])||(e=t[i++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(jT(t[i])){const g=t[i];t[i]=g.next?.bind(g),t[i+1]=g.error?.bind(g),t[i+2]=g.complete?.bind(g)}let o,c,f;if(n instanceof In)c=Xe(n.firestore,Ri),f=xp(n._key.path),o={next:g=>{t[i]&&t[i](Nb(c,n,g))},error:t[i+1],complete:t[i+2]};else{const g=Xe(n,ba);c=Xe(g.firestore,Ri),f=g._query;const E=new xd(c);o={next:b=>{t[i]&&t[i](new Jo(c,E,g,b))},error:t[i+1],complete:t[i+2]},v8(n._query)}const m=Zs(c);return jL(m,f,s,o)}function jU(n,t){n=Xe(n,Ri);const e=Zs(n),i=jT(t)?t:{next:t};return XL(e,i)}function U_(n,t){const e=Zs(n);return QL(e,t)}function Nb(n,t,e){const i=e.docs.get(t._key),s=new xd(n);return new yo(n,s,t._key,i,new Xf(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){bP(ac),Sa(new Hi("firestore",((i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),f=new Ri(new IP(i.getProvider("auth-internal")),new xP(c,i.getProvider("app-check-internal")),pV(c,s),c);return o={useFetchStreams:e,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Wi(I5,N5,t),Wi(I5,N5,"esm2020")})();class KU{constructor(t,e){this._delegate=t,this.firebase=e,t_(t,new Hi("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),SS(this._delegate)))}_getService(t,e=Dh){this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=Dh){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){t_(this._delegate,t)}_addOrOverwriteComponent(t){Pw(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const YU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},P5=new su("app-compat","Firebase",YU);function QU(n){const t={},e={__esModule:!0,initializeApp:o,app:s,registerVersion:Wi,setLogLevel:Uw,onLog:Lw,apps:null,SDK_VERSION:ac,INTERNAL:{registerComponent:f,removeApp:i,useAsService:m,modularAPIs:SP}};e.default=e,Object.defineProperty(e,"apps",{get:c});function i(g){delete t[g]}function s(g){if(g=g||Dh,!$A(t,g))throw P5.create("no-app",{appName:g});return t[g]}s.App=n;function o(g,E={}){const b=TS(g,E);if($A(t,b.name))return t[b.name];const A=new n(b,e);return t[b.name]=A,A}function c(){return Object.keys(t).map(g=>t[g])}function f(g){const E=g.name,b=E.replace("-compat","");if(Sa(g)&&g.type==="PUBLIC"){const A=(N=s())=>{if(typeof N[b]!="function")throw P5.create("invalid-app-argument",{appName:E});return N[b]()};g.serviceProps!==void 0&&tv(A,g.serviceProps),e[b]=A,n.prototype[b]=function(...N){return this._getService.bind(this,E).apply(this,g.multipleInstances?N:[])}}return g.type==="PUBLIC"?e[b]:null}function m(g,E){return E==="serverAuth"?null:E}return e}function C8(){const n=QU(KU);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:C8,extendNamespace:t,createSubscribe:Nw,ErrorFactory:su,deepExtend:tv};function t(e){tv(n,e)}return n}const XU=C8();const V5=new Gv("@firebase/app-compat"),JU="@firebase/app-compat",WU="0.5.8";function ZU(n){Wi(JU,WU,n)}try{const n=mS();if(n.firebase!==void 0){V5.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=n.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&V5.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Eo=XU;ZU();var $U="firebase",tz="12.9.0";Eo.registerVersion($U,tz,"app-compat");const g0={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Lm={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function ez(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function I8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nz=ez,iz=I8,N8=new su("auth","Firebase",I8());const vv=new Gv("@firebase/auth");function sz(n,...t){vv.logLevel<=Me.WARN&&vv.warn(`Auth (${ac}): ${n}`,...t)}function Y1(n,...t){vv.logLevel<=Me.ERROR&&vv.error(`Auth (${ac}): ${n}`,...t)}function xs(n,...t){throw xb(n,...t)}function Zi(n,...t){return xb(n,...t)}function Db(n,t,e){const i={...iz(),[t]:e};return new su("auth","Firebase",i).create(t,{appName:n.name})}function us(n){return Db(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Up(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&xs(n,"argument-error"),Db(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xb(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return N8.create(n,...t)}function Nt(n,t,...e){if(!n)throw xb(t,...e)}function Xl(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Y1(t),new Error(t)}function Zo(n,t){n||Xl(t)}function g_(){return typeof self<"u"&&self.location?.href||""}function Ob(){return k5()==="http:"||k5()==="https:"}function k5(){return typeof self<"u"&&self.location?.protocol||null}function az(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ob()||ww()||"connection"in navigator)?navigator.onLine:!0}function rz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class z_{constructor(t,e){this.shortDelay=t,this.longDelay=e,Zo(e>t,"Short delay should be less than long delay!"),this.isMobile=tM()||_S()}get(){return az()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mb(n,t){Zo(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class D8{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uz=new z_(3e4,6e4);function gi(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function _i(n,t,e,i,s={}){return x8(n,s,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const f=Ip({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:t,headers:m,...o};return nM()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&iu(n.emulatorConfig.host)&&(g.credentials="include"),D8.fetch()(await O8(n,n.config.apiHost,e,f),g)})}async function x8(n,t,e){n._canInitEmulator=!1;const i={...oz,...t};try{const s=new hz(n),o=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw O0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw O0(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw O0(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw O0(n,"user-disabled",c);const E=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Db(n,E,g);xs(n,E)}}catch(s){if(s instanceof Gi)throw s;xs(n,"network-request-failed",{message:String(s)})}}async function cc(n,t,e,i,s={}){const o=await _i(n,t,e,i,s);return"mfaPendingCredential"in o&&xs(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function O8(n,t,e,i){const s=`${t}${e}?${i}`,o=n,c=o.config.emulator?Mb(n.config,s):`${n.config.apiScheme}://${s}`;return lz.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function cz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Zi(this.auth,"network-request-failed")),uz.get())})}}function O0(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Zi(n,t,i);return s.customData._tokenResponse=e,s}function L5(n){return n!==void 0&&n.getResponse!==void 0}function U5(n){return n!==void 0&&n.enterprise!==void 0}class M8{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return cz(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fz(n){return(await _i(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function P8(n,t){return _i(n,"GET","/v2/recaptchaConfig",gi(n,t))}async function dz(n,t){return _i(n,"POST","/v1/accounts:delete",t)}async function mz(n,t){return _i(n,"POST","/v1/accounts:update",t)}async function Ev(n,t){return _i(n,"POST","/v1/accounts:lookup",t)}function Y0(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function pz(n,t=!1){const e=jt(n),i=await e.getIdToken(t),s=d2(i);Nt(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:Y0(GE(s.auth_time)),issuedAtTime:Y0(GE(s.iat)),expirationTime:Y0(GE(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function GE(n){return Number(n)*1e3}function d2(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Y1("JWT malformed, contained fewer than 3 sections"),null;try{const s=dS(e);return s?JSON.parse(s):(Y1("Failed to decode base64 JWT payload"),null)}catch(s){return Y1("Caught error parsing JWT payload as JSON",s?.toString()),null}}function z5(n){const t=d2(n);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function ec(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Gi&&gz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function gz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class _z{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class KT{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Y0(this.lastLoginAt),this.creationTime=Y0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function __(n){const t=n.auth,e=await n.getIdToken(),i=await ec(n,Ev(t,{idToken:e}));Nt(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?V8(s.providerUserInfo):[],c=vz(n.providerData,o),f=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!c?.length,g=f?m:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new KT(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,E)}async function yz(n){const t=jt(n);await __(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function vz(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function V8(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function Ez(n,t){const e=await x8(n,{},async()=>{const i=Ip({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=await O8(n,s,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&iu(n.emulatorConfig.host)&&(m.credentials="include"),D8.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function Tz(n,t){return _i(n,"POST","/v2/accounts:revokeToken",gi(n,t))}class Jm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):z5(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const e=z5(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:o}=await Ez(t,e);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:o}=e,c=new Jm;return i&&(Nt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(Nt(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),o&&(Nt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jm,this.toJSON())}_performRefresh(){return Xl("not implemented")}}function gh(n,t){Nt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Yo{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new _z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new KT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await ec(this,this.stsTokenManager.getToken(this.auth,t));return Nt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return pz(this,t)}reload(){return yz(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Yo({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await __(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(us(this.auth));const t=await this.getIdToken();return await ec(this,dz(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,f=e.tenantId??void 0,m=e._redirectEventId??void 0,g=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:N,providerData:D,stsTokenManager:L}=e;Nt(b&&L,t,"internal-error");const U=Jm.fromJSON(this.name,L);Nt(typeof b=="string",t,"internal-error"),gh(i,t.name),gh(s,t.name),Nt(typeof A=="boolean",t,"internal-error"),Nt(typeof N=="boolean",t,"internal-error"),gh(o,t.name),gh(c,t.name),gh(f,t.name),gh(m,t.name),gh(g,t.name),gh(E,t.name);const G=new Yo({uid:b,auth:t,email:s,emailVerified:A,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:U,createdAt:g,lastLoginAt:E});return D&&Array.isArray(D)&&(G.providerData=D.map(j=>({...j}))),m&&(G._redirectEventId=m),G}static async _fromIdTokenResponse(t,e,i=!1){const s=new Jm;s.updateFromServerResponse(e);const o=new Yo({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await __(o),o}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Nt(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?V8(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,f=new Jm;f.updateFromIdToken(i);const m=new Yo({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new KT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(m,g),m}}const B5=new Map;function wr(n){Zo(n instanceof Function,"Expected a class definition");let t=B5.get(n);return t?(Zo(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,B5.set(n,t),t)}class k8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}k8.type="NONE";const bp=k8;function td(n,t,e){return`firebase:${n}:${t}:${e}`}class Wm{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=td(this.userKey,s.apiKey,o),this.fullPersistenceKey=td("persistence",s.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Ev(this.auth,{idToken:t}).catch(()=>{});return e?Yo._fromGetAccountInfoResponse(this.auth,e,t):null}return Yo._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Wm(wr(bp),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=s[0]||wr(bp);const c=td(i,t.config.apiKey,t.name);let f=null;for(const g of e)try{const E=await g._get(c);if(E){let b;if(typeof E=="string"){const A=await Ev(t,{idToken:E}).catch(()=>{});if(!A)break;b=await Yo._fromGetAccountInfoResponse(t,A,E)}else b=Yo._fromJSON(t,E);g!==o&&(f=b),o=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Wm(o,t,i):(o=m[0],f&&await o._set(c,f.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new Wm(o,t,i))}}function G5(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(B8(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(L8(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(G8(t))return"Blackberry";if(H8(t))return"Webos";if(U8(t))return"Safari";if((t.includes("chrome/")||z8(t))&&!t.includes("edge/"))return"Chrome";if(B_(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function L8(n=ri()){return/firefox\//i.test(n)}function U8(n=ri()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function z8(n=ri()){return/crios\//i.test(n)}function B8(n=ri()){return/iemobile/i.test(n)}function B_(n=ri()){return/android/i.test(n)}function G8(n=ri()){return/blackberry/i.test(n)}function H8(n=ri()){return/webos/i.test(n)}function G_(n=ri()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Sz(n=ri()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function bz(n=ri()){return G_(n)&&!!window.navigator?.standalone}function Az(){return Rw()&&document.documentMode===10}function q8(n=ri()){return G_(n)||B_(n)||H8(n)||G8(n)||/windows phone/i.test(n)||B8(n)}function F8(n,t=[]){let e;switch(n){case"Browser":e=G5(ri());break;case"Worker":e=`${G5(ri())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ac}/${i}`}class wz{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,f)=>{try{const m=t(o);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Rz(n,t={}){return _i(n,"GET","/v2/passwordPolicy",gi(n,t))}const Cz=6;class Iz{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??Cz,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}class Nz{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H5(this),this.idTokenSubscription=new H5(this),this.beforeStateQueue=new wz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=wr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wm.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Ev(this,{idToken:t}),i=await Yo._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(t);(!o||o===c)&&f?.user&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await __(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=rz()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Cn(this.app))return Promise.reject(us(this));const e=t?jt(t):null;return e&&Nt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Cn(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Rz(this),e=new Iz(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new su("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await Tz(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&wr(t)||this._popupRedirectResolver;Nt(e,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[wr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=F8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&sz(`Error while retrieving App Check token: ${t.error}`),t?.token}}function oi(n){return jt(n)}class H5{constructor(t){this.auth=t,this.observer=null,this.addObserver=Nw(e=>this.observer=e)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let H_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dz(n){H_=n}function Pb(n){return H_.loadJS(n)}function xz(){return H_.recaptchaV2Script}function Oz(){return H_.recaptchaEnterpriseScript}function Mz(){return H_.gapiScript}function j8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Pz=500,Vz=6e4,D1=1e12;class kz{constructor(t){this.auth=t,this.counter=D1,this._widgets=new Map}render(t,e){const i=this.counter;return this._widgets.set(i,new zz(t,this.auth.name,e||{})),this.counter++,i}reset(t){const e=t||D1;this._widgets.get(e)?.delete(),this._widgets.delete(e)}getResponse(t){const e=t||D1;return this._widgets.get(e)?.getResponse()||""}async execute(t){const e=t||D1;return this._widgets.get(e)?.execute(),""}}class Lz{constructor(){this.enterprise=new Uz}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Uz{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class zz{constructor(t,e,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof t=="string"?document.getElementById(t):t;Nt(s,"argument-error",{appName:e}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Bz(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch{}this.isVisible&&this.execute()},Vz)},Pz))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Bz(n){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)t.push(e.charAt(Math.floor(Math.random()*e.length)));return t.join("")}const Gz="recaptcha-enterprise",Q0="NO_RECAPTCHA";class K8{constructor(t){this.type=Gz,this.auth=oi(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{P8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new M8(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(o,c,f){const m=window.grecaptcha;U5(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:t}).then(g=>{c(g)}).catch(()=>{c(Q0)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Lz().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(f=>{if(!e&&U5(window.grecaptcha))s(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Oz();m.length!==0&&(m+=f),Pb(m).then(()=>{s(f,o,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function _0(n,t,e,i=!1,s=!1){const o=new K8(n);let c;if(s)c=Q0;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const f={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ih(n,t,e,i,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _0(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await _0(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const o=await _0(n,t,e);return i(n,o).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);const f=await _0(n,t,e,!1,!0);return i(n,f)}return Promise.reject(c)})}else{const o=await _0(n,t,e,!1,!0);return i(n,o)}else return Promise.reject(s+" provider is not supported.")}async function Hz(n){const t=oi(n),e=await P8(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new M8(e);t.tenantId==null?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new K8(t).verify()}function qz(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(wr);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function Fz(n,t,e){const i=oi(n);Nt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!e?.disableWarnings,o=Y8(t),{host:c,port:f}=jz(t),m=f===null?"":`:${f}`,g={url:`${o}//${c}${m}/`},E=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Nt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Nt(Nh(g,i.config.emulator)&&Nh(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,iu(c)?(Uv(`${o}//${c}${m}`),zv("Auth",!0)):s||Kz()}function Y8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function jz(n){const t=Y8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:q5(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:q5(c)}}}function q5(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function Kz(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class zp{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Xl("not implemented")}_getIdTokenResponse(t){return Xl("not implemented")}_linkToIdToken(t,e){return Xl("not implemented")}_getReauthenticationResolver(t){return Xl("not implemented")}}async function Q8(n,t){return _i(n,"POST","/v1/accounts:resetPassword",gi(n,t))}async function Yz(n,t){return _i(n,"POST","/v1/accounts:update",t)}async function Qz(n,t){return _i(n,"POST","/v1/accounts:signUp",t)}async function Xz(n,t){return _i(n,"POST","/v1/accounts:update",gi(n,t))}async function Jz(n,t){return cc(n,"POST","/v1/accounts:signInWithPassword",gi(n,t))}async function m2(n,t){return _i(n,"POST","/v1/accounts:sendOobCode",gi(n,t))}async function Wz(n,t){return m2(n,t)}async function Zz(n,t){return m2(n,t)}async function $z(n,t){return m2(n,t)}async function tB(n,t){return m2(n,t)}async function eB(n,t){return cc(n,"POST","/v1/accounts:signInWithEmailLink",gi(n,t))}async function nB(n,t){return cc(n,"POST","/v1/accounts:signInWithEmailLink",gi(n,t))}class y_ extends zp{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new y_(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new y_(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(t,e,"signInWithPassword",Jz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eB(t,{email:this._email,oobCode:this._password});default:xs(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(t,i,"signUpPassword",Qz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nB(t,{idToken:e,email:this._email,oobCode:this._password});default:xs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ju(n,t){return cc(n,"POST","/v1/accounts:signInWithIdp",gi(n,t))}const iB="http://localhost";class eu extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new eu(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):xs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...o}=e;if(!i||!s)return null;const c=new eu(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Ju(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ju(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ju(t,e)}buildRequest(){const t={requestUri:iB,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ip(e)}return t}}async function F5(n,t){return _i(n,"POST","/v1/accounts:sendVerificationCode",gi(n,t))}async function sB(n,t){return cc(n,"POST","/v1/accounts:signInWithPhoneNumber",gi(n,t))}async function aB(n,t){const e=await cc(n,"POST","/v1/accounts:signInWithPhoneNumber",gi(n,t));if(e.temporaryProof)throw O0(n,"account-exists-with-different-credential",e);return e}const rB={USER_NOT_FOUND:"user-not-found"};async function oB(n,t){const e={...t,operation:"REAUTH"};return cc(n,"POST","/v1/accounts:signInWithPhoneNumber",gi(n,e),rB)}class ed extends zp{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new ed({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new ed({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return sB(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return aB(t,{idToken:e,...this._makeVerificationRequest()})}_getReauthenticationResolver(t){return oB(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o}=t;return!i&&!e&&!s&&!o?null:new ed({verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o})}}function lB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uB(n){const t=jm(R0(n)).link,e=t?jm(R0(t)).deep_link_id:null,i=jm(R0(n)).deep_link_id;return(i?jm(R0(i)).link:null)||i||e||t||n}class p2{constructor(t){const e=jm(R0(t)),i=e.apiKey??null,s=e.oobCode??null,o=lB(e.mode??null);Nt(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=uB(t);try{return new p2(e)}catch{return null}}}class Jh{constructor(){this.providerId=Jh.PROVIDER_ID}static credential(t,e){return y_._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=p2.parseLink(e);return Nt(i,"argument-error"),y_._fromEmailAndCode(t,i.code,i.tenantId)}}Jh.PROVIDER_ID="password";Jh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hc{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Bp extends hc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Zm extends Bp{static credentialFromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;return Nt("providerId"in e&&"signInMethod"in e,"argument-error"),eu._fromParams(e)}credential(t){return this._credential({...t,nonce:t.rawNonce})}_credential(t){return Nt(t.idToken||t.accessToken,"argument-error"),eu._fromParams({...t,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(t){return Zm.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Zm.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:c,providerId:f}=t;if(!i&&!s&&!e&&!o||!f)return null;try{return new Zm(f)._credential({idToken:e,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}class Hl extends Bp{constructor(){super("facebook.com")}static credential(t){return eu._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hl.credentialFromTaggedObject(t)}static credentialFromError(t){return Hl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hl.credential(t.oauthAccessToken)}catch{return null}}}Hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hl.PROVIDER_ID="facebook.com";class ql extends Bp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return eu._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ql.credentialFromTaggedObject(t)}static credentialFromError(t){return ql.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return ql.credential(e,i)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";class Fl extends Bp{constructor(){super("github.com")}static credential(t){return eu._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fl.credentialFromTaggedObject(t)}static credentialFromError(t){return Fl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fl.credential(t.oauthAccessToken)}catch{return null}}}Fl.GITHUB_SIGN_IN_METHOD="github.com";Fl.PROVIDER_ID="github.com";const cB="http://localhost";class Ap extends zp{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return Ju(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ju(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ju(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,pendingToken:o}=e;return!i||!s||!o||i!==s?null:new Ap(i,o)}static _create(t,e){return new Ap(t,e)}buildRequest(){return{requestUri:cB,returnSecureToken:!0,pendingToken:this.pendingToken}}}const hB="saml.";class Tv extends hc{constructor(t){Nt(t.startsWith(hB),"argument-error"),super(t)}static credentialFromResult(t){return Tv.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Tv.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=Ap.fromJSON(t);return Nt(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:i}=t;if(!e||!i)return null;try{return Ap._create(i,e)}catch{return null}}}class jl extends Bp{constructor(){super("twitter.com")}static credential(t,e){return eu._fromParams({providerId:jl.PROVIDER_ID,signInMethod:jl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return jl.credentialFromTaggedObject(t)}static credentialFromError(t){return jl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return jl.credential(e,i)}catch{return null}}}jl.TWITTER_SIGN_IN_METHOD="twitter.com";jl.PROVIDER_ID="twitter.com";async function X8(n,t){return cc(n,"POST","/v1/accounts:signUp",gi(n,t))}class vo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const o=await Yo._fromIdTokenResponse(t,i,s),c=j5(i);return new vo({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=j5(i);return new vo({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function j5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function fB(n){if(Cn(n.app))return Promise.reject(us(n));const t=oi(n);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new vo({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await X8(t,{returnSecureToken:!0}),i=await vo._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class Sv extends Gi{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Sv.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Sv(t,e,i,s)}}function J8(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sv._fromErrorAndOperation(n,o,t,i):o})}function W8(n){return new Set(n.map(({providerId:t})=>t).filter(t=>!!t))}async function dB(n,t){const e=jt(n);await g2(!0,e,t);const{providerUserInfo:i}=await mz(e.auth,{idToken:await e.getIdToken(),deleteProvider:[t]}),s=W8(i||[]);return e.providerData=e.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(e.phoneNumber=null),await e.auth._persistUserIfCurrent(e),e}async function Vb(n,t,e=!1){const i=await ec(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return vo._forOperation(n,"link",i)}async function g2(n,t,e){await __(t);const i=W8(t.providerData),s=n===!1?"provider-already-linked":"no-such-provider";Nt(i.has(e)===n,t.auth,s)}async function Z8(n,t,e=!1){const{auth:i}=n;if(Cn(i.app))return Promise.reject(us(i));const s="reauthenticate";try{const o=await ec(n,J8(i,s,t,n),e);Nt(o.idToken,i,"internal-error");const c=d2(o.idToken);Nt(c,i,"internal-error");const{sub:f}=c;return Nt(n.uid===f,i,"user-mismatch"),vo._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&xs(i,"user-mismatch"),o}}async function $8(n,t,e=!1){if(Cn(n.app))return Promise.reject(us(n));const i="signIn",s=await J8(n,i,t),o=await vo._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(o.user),o}async function _2(n,t){return $8(oi(n),t)}async function t9(n,t){const e=jt(n);return await g2(!1,e,t.providerId),Vb(e,t)}async function e9(n,t){return Z8(jt(n),t)}async function mB(n,t){return cc(n,"POST","/v1/accounts:signInWithCustomToken",gi(n,t))}async function pB(n,t){if(Cn(n.app))return Promise.reject(us(n));const e=oi(n),i=await mB(e,{token:t,returnSecureToken:!0}),s=await vo._fromIdTokenResponse(e,"signIn",i);return await e._updateCurrentUser(s.user),s}class q_{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?kb._fromServerResponse(t,e):"totpInfo"in e?Lb._fromServerResponse(t,e):xs(t,"internal-error")}}class kb extends q_{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new kb(e)}}class Lb extends q_{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new Lb(e)}}function y2(n,t,e){Nt(e.url?.length>0,n,"invalid-continue-uri"),Nt(typeof e.dynamicLinkDomain>"u"||e.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Nt(typeof e.linkDomain>"u"||e.linkDomain.length>0,n,"invalid-hosting-link-domain"),t.continueUrl=e.url,t.dynamicLinkDomain=e.dynamicLinkDomain,t.linkDomain=e.linkDomain,t.canHandleCodeInApp=e.handleCodeInApp,e.iOS&&(Nt(e.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=e.iOS.bundleId),e.android&&(Nt(e.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=e.android.installApp,t.androidMinimumVersionCode=e.android.minimumVersion,t.androidPackageName=e.android.packageName)}async function Ub(n){const t=oi(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function gB(n,t,e){const i=oi(n),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};e&&y2(i,s,e),await Ih(i,s,"getOobCode",Zz,"EMAIL_PASSWORD_PROVIDER")}async function _B(n,t,e){await Q8(jt(n),{oobCode:t,newPassword:e}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ub(n),i})}async function yB(n,t){await Xz(jt(n),{oobCode:t})}async function n9(n,t){const e=jt(n),i=await Q8(e,{oobCode:t}),s=i.requestType;switch(Nt(s,e,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Nt(i.newEmail,e,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Nt(i.mfaInfo,e,"internal-error");default:Nt(i.email,e,"internal-error")}let o=null;return i.mfaInfo&&(o=q_._fromServerResponse(oi(e),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function vB(n,t){const{data:e}=await n9(jt(n),t);return e.email}async function EB(n,t,e){if(Cn(n.app))return Promise.reject(us(n));const i=oi(n),c=await Ih(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X8,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Ub(n),m}),f=await vo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function TB(n,t,e){return Cn(n.app)?Promise.reject(us(n)):_2(jt(n),Jh.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ub(n),i})}async function SB(n,t,e){const i=oi(n),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(c,f){Nt(f.handleCodeInApp,i,"argument-error"),f&&y2(i,c,f)}o(s,e),await Ih(i,s,"getOobCode",$z,"EMAIL_PASSWORD_PROVIDER")}function bB(n,t){return p2.parseLink(t)?.operation==="EMAIL_SIGNIN"}async function AB(n,t,e){if(Cn(n.app))return Promise.reject(us(n));const i=jt(n),s=Jh.credentialWithLink(t,e||g_());return Nt(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),_2(i,s)}async function wB(n,t){return _i(n,"POST","/v1/accounts:createAuthUri",gi(n,t))}async function RB(n,t){const e=Ob()?g_():"http://localhost",i={identifier:t,continueUri:e},{signinMethods:s}=await wB(jt(n),i);return s||[]}async function CB(n,t){const e=jt(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};t&&y2(e.auth,s,t);const{email:o}=await Wz(e.auth,s);o!==n.email&&await n.reload()}async function IB(n,t,e){const i=jt(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:t};e&&y2(i.auth,o,e);const{email:c}=await tB(i.auth,o);c!==n.email&&await n.reload()}async function NB(n,t){return _i(n,"POST","/v1/accounts:update",t)}async function DB(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const i=jt(n),o={idToken:await i.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},c=await ec(i,NB(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function xB(n,t){const e=jt(n);return Cn(e.auth.app)?Promise.reject(us(e.auth)):i9(e,t,null)}function OB(n,t){return i9(jt(n),null,t)}async function i9(n,t,e){const{auth:i}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(o.email=t),e&&(o.password=e);const c=await ec(n,Yz(i,o));await n._updateTokensIfNecessary(c,!0)}function MB(n){if(!n)return null;const{providerId:t}=n,e=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!t&&n?.idToken){const s=d2(n.idToken)?.firebase?.sign_in_provider;if(s){const o=s!=="anonymous"&&s!=="custom"?s:null;return new $m(i,o)}}if(!t)return null;switch(t){case"facebook.com":return new PB(i,e);case"github.com":return new VB(i,e);case"google.com":return new kB(i,e);case"twitter.com":return new LB(i,e,n.screenName||null);case"custom":case"anonymous":return new $m(i,null);default:return new $m(i,t,e)}}class $m{constructor(t,e,i={}){this.isNewUser=t,this.providerId=e,this.profile=i}}class s9 extends $m{constructor(t,e,i,s){super(t,e,i),this.username=s}}class PB extends $m{constructor(t,e){super(t,"facebook.com",e)}}class VB extends s9{constructor(t,e){super(t,"github.com",e,typeof e?.login=="string"?e?.login:null)}}class kB extends $m{constructor(t,e){super(t,"google.com",e)}}class LB extends s9{constructor(t,e,i){super(t,"twitter.com",e,i)}}function UB(n){const{user:t,_tokenResponse:e}=n;return t.isAnonymous&&!e?{providerId:null,isNewUser:!1,profile:null}:MB(e)}class Jf{constructor(t,e,i){this.type=t,this.credential=e,this.user=i}static _fromIdtoken(t,e){return new Jf("enroll",t,e)}static _fromMfaPendingCredential(t){return new Jf("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){if(t?.multiFactorSession){if(t.multiFactorSession?.pendingCredential)return Jf._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(t.multiFactorSession?.idToken)return Jf._fromIdtoken(t.multiFactorSession.idToken)}return null}}class zb{constructor(t,e,i){this.session=t,this.hints=e,this.signInResolver=i}static _fromError(t,e){const i=oi(t),s=e.customData._serverResponse,o=(s.mfaInfo||[]).map(f=>q_._fromServerResponse(i,f));Nt(s.mfaPendingCredential,i,"internal-error");const c=Jf._fromMfaPendingCredential(s.mfaPendingCredential);return new zb(c,o,async f=>{const m=await f._process(i,c);delete s.mfaInfo,delete s.mfaPendingCredential;const g={...s,idToken:m.idToken,refreshToken:m.refreshToken};switch(e.operationType){case"signIn":const E=await vo._fromIdTokenResponse(i,e.operationType,g);return await i._updateCurrentUser(E.user),E;case"reauthenticate":return Nt(e.user,i,"internal-error"),vo._forOperation(e.user,e.operationType,g);default:xs(i,"internal-error")}})}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function zB(n,t){const e=jt(n),i=t;return Nt(t.customData.operationType,e,"argument-error"),Nt(i.customData._serverResponse?.mfaPendingCredential,e,"argument-error"),zb._fromError(e,i)}function K5(n,t){return _i(n,"POST","/v2/accounts/mfaEnrollment:start",gi(n,t))}function BB(n,t){return _i(n,"POST","/v2/accounts/mfaEnrollment:finalize",gi(n,t))}function GB(n,t){return _i(n,"POST","/v2/accounts/mfaEnrollment:withdraw",gi(n,t))}class Bb{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(i=>q_._fromServerResponse(t.auth,i)))})}static _fromUser(t){return new Bb(t)}async getSession(){return Jf._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,e){const i=t,s=await this.getSession(),o=await ec(this.user,i._process(this.user.auth,s,e));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(t){const e=typeof t=="string"?t:t.uid,i=await this.user.getIdToken();try{const s=await ec(this.user,GB(this.user.auth,{idToken:i,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==e),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const HE=new WeakMap;function HB(n){const t=jt(n);return HE.has(t)||HE.set(t,Bb._fromUser(t)),HE.get(t)}const bv="__sak";class a9{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(bv,"1"),this.storage.removeItem(bv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const qB=1e3,FB=10;class r9 extends a9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);Az()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,FB):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},qB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}r9.type="LOCAL";const Gb=r9;class o9 extends a9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}o9.type="SESSION";const md=o9;function jB(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class v2{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new v2(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:o}=e.data,c=this.handlersMap[s];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async g=>g(e.origin,o)),m=await jB(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}v2.receivers=[];function F_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class KB{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,m)=>{const g=F_("",20);s.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(b){const A=b;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(E),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(A.data.response);break;default:clearTimeout(E),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function zi(){return window}function YB(n){zi().location.href=n}function Hb(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function QB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XB(){return navigator?.serviceWorker?.controller||null}function JB(){return Hb()?self:null}const l9="firebaseLocalStorageDb",WB=1,Av="firebaseLocalStorage",u9="fbase_key";class j_{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function E2(n,t){return n.transaction([Av],t?"readwrite":"readonly").objectStore(Av)}function ZB(){const n=indexedDB.deleteDatabase(l9);return new j_(n).toPromise()}function YT(){const n=indexedDB.open(l9,WB);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Av,{keyPath:u9})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Av)?t(i):(i.close(),await ZB(),t(await YT()))})})}async function Y5(n,t,e){const i=E2(n,!0).put({[u9]:t,value:e});return new j_(i).toPromise()}async function $B(n,t){const e=E2(n,!1).get(t),i=await new j_(e).toPromise();return i===void 0?null:i.value}function Q5(n,t){const e=E2(n,!0).delete(t);return new j_(e).toPromise()}const tG=800,eG=3;class c9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YT(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>eG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=v2._getInstance(JB()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QB(),!this.activeServiceWorker)return;this.sender=new KB(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||XB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await YT();return await Y5(t,bv,"1"),await Q5(t,bv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Y5(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>$B(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Q5(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=E2(s,!1).getAll();return new j_(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}c9.type="LOCAL";const v_=c9;function X5(n,t){return _i(n,"POST","/v2/accounts/mfaSignIn:start",gi(n,t))}function nG(n,t){return _i(n,"POST","/v2/accounts/mfaSignIn:finalize",gi(n,t))}const qE=j8("rcb"),iG=new z_(3e4,6e4);class sG{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!zi().grecaptcha?.render}load(t,e=""){return Nt(aG(e),t,"argument-error"),this.shouldResolveImmediately(e)&&L5(zi().grecaptcha)?Promise.resolve(zi().grecaptcha):new Promise((i,s)=>{const o=zi().setTimeout(()=>{s(Zi(t,"network-request-failed"))},iG.get());zi()[qE]=()=>{zi().clearTimeout(o),delete zi()[qE];const f=zi().grecaptcha;if(!f||!L5(f)){s(Zi(t,"internal-error"));return}const m=f.render;f.render=(g,E)=>{const b=m(g,E);return this.counter++,b},this.hostLanguage=e,i(f)};const c=`${xz()}?${Ip({onload:qE,render:"explicit",hl:e})}`;Pb(c).catch(()=>{clearTimeout(o),s(Zi(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!zi().grecaptcha?.render&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function aG(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class rG{async load(t){return new kz(t)}clearedOneInstance(){}}const X0="recaptcha",oG={theme:"light",type:"image"};let lG=class{constructor(t,e,i={...oG}){this.parameters=i,this.type=X0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=oi(t),this.isInvisible=this.parameters.size==="invisible",Nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;Nt(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rG:new sG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),i=e.getResponse(t);return i||new Promise(s=>{const o=c=>{c&&(this.tokenChangeListeners.delete(o),s(c))};this.tokenChangeListeners.add(o),this.isInvisible&&e.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){Nt(!this.parameters.sitekey,this.auth,"argument-error"),Nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(i=>i(e)),typeof t=="function")t(e);else if(typeof t=="string"){const i=zi()[t];typeof i=="function"&&i(e)}}}assertNotDestroyed(){Nt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){Nt(Ob()&&!Hb(),this.auth,"internal-error"),await uG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await fz(this.auth);Nt(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return Nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function uG(){let n=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}n=()=>t(),window.addEventListener("load",n)}).catch(t=>{throw n&&window.removeEventListener("load",n),t})}class qb{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=ed._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function cG(n,t,e){if(Cn(n.app))return Promise.reject(us(n));const i=oi(n),s=await T2(i,t,jt(e));return new qb(s,o=>_2(i,o))}async function hG(n,t,e){const i=jt(n);await g2(!1,i,"phone");const s=await T2(i.auth,t,jt(e));return new qb(s,o=>t9(i,o))}async function fG(n,t,e){const i=jt(n);if(Cn(i.auth.app))return Promise.reject(us(i.auth));const s=await T2(i.auth,t,jt(e));return new qb(s,o=>e9(i,o))}async function T2(n,t,e){if(!n._getRecaptchaConfig())try{await Hz(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof t=="string"?i={phoneNumber:t}:i=t,"session"in i){const s=i.session;if("phoneNumber"in i){Nt(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ih(n,o,"mfaSmsEnrollment",async(g,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===Q0){Nt(e?.type===X0,g,"argument-error");const b=await FE(g,E,e);return K5(g,b)}return K5(g,E)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{Nt(s.type==="signin",n,"internal-error");const o=i.multiFactorHint?.uid||i.multiFactorUid;Nt(o,n,"missing-multi-factor-info");const c={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ih(n,c,"mfaSmsSignIn",async(E,b)=>{if(b.phoneSignInInfo.captchaResponse===Q0){Nt(e?.type===X0,E,"argument-error");const A=await FE(E,b,e);return X5(E,A)}return X5(E,b)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ih(n,s,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===Q0){Nt(e?.type===X0,m,"argument-error");const E=await FE(m,g,e);return F5(m,E)}return F5(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{e?._reset()}}async function dG(n,t){const e=jt(n);if(Cn(e.auth.app))return Promise.reject(us(e.auth));await Vb(e,t)}async function FE(n,t,e){Nt(e.type===X0,n,"argument-error");const i=await e.verify();Nt(typeof i=="string",n,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,c=s.phoneEnrollmentInfo.captchaResponse,f=s.phoneEnrollmentInfo.clientType,m=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i,captchaResponse:c,clientType:f,recaptchaVersion:m}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,c=s.phoneSignInInfo.clientType,f=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:o,clientType:c,recaptchaVersion:f}}),s}else return Object.assign(s,{recaptchaToken:i}),s}let pd=class Q1{constructor(t){this.providerId=Q1.PROVIDER_ID,this.auth=oi(t)}verifyPhoneNumber(t,e){return T2(this.auth,t,jt(e))}static credential(t,e){return ed._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Q1.credentialFromTaggedObject(e)}static credentialFromError(t){return Q1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:i}=t;return e&&i?ed._fromTokenResponse(e,i):null}};pd.PROVIDER_ID="phone";pd.PHONE_SIGN_IN_METHOD="phone";function Od(n,t){return t?wr(t):(Nt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Fb extends zp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ju(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ju(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ju(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function mG(n){return $8(n.auth,new Fb(n),n.bypassAuthState)}function pG(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),Z8(e,new Fb(n),n.bypassAuthState)}async function gG(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),Vb(e,new Fb(n),n.bypassAuthState)}class h9{constructor(t,e,i,s,o=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:o,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mG;case"linkViaPopup":case"linkViaRedirect":return gG;case"reauthViaPopup":case"reauthViaRedirect":return pG;default:xs(this.auth,"internal-error")}}resolve(t){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _G=new z_(2e3,1e4);async function yG(n,t,e){if(Cn(n.app))return Promise.reject(Zi(n,"operation-not-supported-in-this-environment"));const i=oi(n);Up(n,t,hc);const s=Od(i,e);return new Yu(i,"signInViaPopup",t,s).executeNotNull()}async function vG(n,t,e){const i=jt(n);if(Cn(i.auth.app))return Promise.reject(Zi(i.auth,"operation-not-supported-in-this-environment"));Up(i.auth,t,hc);const s=Od(i.auth,e);return new Yu(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function EG(n,t,e){const i=jt(n);Up(i.auth,t,hc);const s=Od(i.auth,e);return new Yu(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class Yu extends h9{constructor(t,e,i,s,o){super(t,e,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Yu.currentPopupAction&&Yu.currentPopupAction.cancel(),Yu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Zo(this.filter.length===1,"Popup operations only handle one event");const t=F_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yu.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_G.get())};t()}}Yu.currentPopupAction=null;const TG="pendingRedirect",J0=new Map;class SG extends h9{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=J0.get(this.auth._key());if(!t){try{const i=await bG(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}J0.set(this.auth._key(),t)}return this.bypassAuthState||J0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bG(n,t){const e=d9(t),i=f9(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}async function jb(n,t){return f9(n)._set(d9(t),"true")}function AG(){J0.clear()}function Kb(n,t){J0.set(n._key(),t)}function f9(n){return wr(n._redirectPersistence)}function d9(n){return td(TG,n.config.apiKey,n.name)}function wG(n,t,e){return RG(n,t,e)}async function RG(n,t,e){if(Cn(n.app))return Promise.reject(us(n));const i=oi(n);Up(n,t,hc),await i._initializationPromise;const s=Od(i,e);return await jb(s,i),s._openRedirect(i,t,"signInViaRedirect")}function CG(n,t,e){return IG(n,t,e)}async function IG(n,t,e){const i=jt(n);if(Up(i.auth,t,hc),Cn(i.auth.app))return Promise.reject(us(i.auth));await i.auth._initializationPromise;const s=Od(i.auth,e);await jb(s,i.auth);const o=await m9(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}function NG(n,t,e){return DG(n,t,e)}async function DG(n,t,e){const i=jt(n);Up(i.auth,t,hc),await i.auth._initializationPromise;const s=Od(i.auth,e);await g2(!1,i,t.providerId),await jb(s,i.auth);const o=await m9(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}async function xG(n,t){return await oi(n)._initializationPromise,S2(n,t,!1)}async function S2(n,t,e=!1){if(Cn(n.app))return Promise.reject(us(n));const i=oi(n),s=Od(i,t),c=await new SG(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}async function m9(n){const t=F_(`${n.uid}:::`);return n._redirectEventId=t,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),t}const OG=600*1e3;class p9{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!MG(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!g9(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Zi(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=OG&&this.cachedEventUids.clear(),this.cachedEventUids.has(J5(t))}saveEventToCache(t){this.cachedEventUids.add(J5(t)),this.lastProcessedEventTime=Date.now()}}function J5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function g9({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function MG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g9(n);default:return!1}}async function _9(n,t={}){return _i(n,"GET","/v1/projects",t)}const PG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VG=/^https?/;async function kG(n){if(n.config.emulator)return;const{authorizedDomains:t}=await _9(n);for(const e of t)try{if(LG(e))return}catch{}xs(n,"unauthorized-domain")}function LG(n){const t=g_(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!VG.test(e))return!1;if(PG.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const UG=new z_(3e4,6e4);function W5(){const n=zi().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function zG(n){return new Promise((t,e)=>{function i(){W5(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{W5(),e(Zi(n,"network-request-failed"))},timeout:UG.get()})}if(zi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(zi().gapi?.load)i();else{const s=j8("iframefcb");return zi()[s]=()=>{gapi.load?i():e(Zi(n,"network-request-failed"))},Pb(`${Mz()}?onload=${s}`).catch(o=>e(o))}}).catch(t=>{throw X1=null,t})}let X1=null;function BG(n){return X1=X1||zG(n),X1}const GG=new z_(5e3,15e3),HG="__/auth/iframe",qG="emulator/auth/iframe",FG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KG(n){const t=n.config;Nt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Mb(t,qG):`https://${n.config.authDomain}/${HG}`,i={apiKey:t.apiKey,appName:n.name,v:ac},s=jG.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Ip(i).slice(1)}`}async function YG(n){const t=await BG(n),e=zi().gapi;return Nt(e,n,"internal-error"),t.open({where:document.body,url:KG(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FG,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=Zi(n,"network-request-failed"),f=zi().setTimeout(()=>{o(c)},GG.get());function m(){zi().clearTimeout(f),s(i)}i.ping(m).then(m,()=>{o(c)})}))}const QG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XG=500,JG=600,WG="_blank",ZG="http://localhost";class Z5{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $G(n,t,e,i=XG,s=JG){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...QG,width:i.toString(),height:s.toString(),top:o,left:c},g=ri().toLowerCase();e&&(f=z8(g)?WG:e),L8(g)&&(t=t||ZG,m.scrollbars="yes");const E=Object.entries(m).reduce((A,[N,D])=>`${A}${N}=${D},`,"");if(bz(g)&&f!=="_self")return tH(t||"",f),new Z5(null);const b=window.open(t||"",f,E);Nt(b,n,"popup-blocked");try{b.focus()}catch{}return new Z5(b)}function tH(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const eH="__/auth/handler",nH="emulator/auth/handler",iH=encodeURIComponent("fac");async function QT(n,t,e,i,s,o){Nt(n.config.authDomain,n,"auth-domain-config-required"),Nt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:ac,eventId:s};if(t instanceof hc){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",lM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,b]of Object.entries(o||{}))c[E]=b}if(t instanceof Bp){const E=t.getScopes().filter(b=>b!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const m=await n._getAppCheckToken(),g=m?`#${iH}=${encodeURIComponent(m)}`:"";return`${sH(n)}?${Ip(f).slice(1)}${g}`}function sH({config:n}){return n.emulator?Mb(n,nH):`https://${n.authDomain}/${eH}`}const jE="webStorageSupport";class aH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=md,this._completeRedirectFn=S2,this._overrideRedirectResult=Kb}async _openPopup(t,e,i,s){Zo(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await QT(t,e,i,g_(),s);return $G(t,o,F_())}async _openRedirect(t,e,i,s){await this._originValidation(t);const o=await QT(t,e,i,g_(),s);return YB(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:o}=this.eventManagers[e];return s?Promise.resolve(s):(Zo(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await YG(t),i=new p9(t);return e.register("authEvent",s=>(Nt(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(jE,{type:jE},s=>{const o=s?.[0]?.[jE];o!==void 0&&e(!!o),xs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=kG(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return q8()||U8()||G_()}}const rH=aH;class oH{constructor(t){this.factorId=t}_process(t,e,i){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,i);case"signin":return this._finalizeSignIn(t,e.credential);default:return Xl("unexpected MultiFactorSessionType")}}}class Yb extends oH{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Yb(t)}_finalizeEnroll(t,e,i){return BB(t,{idToken:e,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return nG(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class y9{constructor(){}static assertion(t){return Yb._fromCredential(t)}}y9.FACTOR_ID="phone";var $5="@firebase/auth",t6="1.12.0";class lH{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function uH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cH(n){Sa(new Hi("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F8(n)},g=new Nz(i,s,o,m);return qz(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Sa(new Hi("auth-internal",t=>{const e=oi(t.getProvider("auth").getImmediate());return(i=>new lH(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi($5,t6,uH(n)),Wi($5,t6,"esm2020")}const hH=300;JO("authIdTokenMaxAge");function fH(){return document.getElementsByTagName("head")?.[0]??document}Dz({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const o=Zi("internal-error");o.customData=s,e(o)},i.type="text/javascript",i.charset="UTF-8",fH().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cH("Browser");function gd(){return window}const dH=2e3;async function mH(n,t,e){const{BuildInfo:i}=gd();Zo(t.sessionId,"AuthEvent did not contain a session ID");const s=await vH(t.sessionId),o={};return G_()?o.ibi=i.packageName:B_()?o.apn=i.packageName:xs(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,QT(n,e,t.type,void 0,t.eventId??void 0,o)}async function pH(n){const{BuildInfo:t}=gd(),e={};G_()?e.iosBundleId=t.packageName:B_()?e.androidPackageName=t.packageName:xs(n,"operation-not-supported-in-this-environment"),await _9(n,e)}function gH(n){const{cordova:t}=gd();return new Promise(e=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(n):s=t.InAppBrowser.open(n,Sz()?"_blank":"_system","location=yes"),e(s)})})}async function _H(n,t,e){const{cordova:i}=gd();let s=()=>{};try{await new Promise((o,c)=>{let f=null;function m(){o();const b=i.plugins.browsertab?.close;typeof b=="function"&&b(),typeof e?.close=="function"&&e.close()}function g(){f||(f=window.setTimeout(()=>{c(Zi(n,"redirect-cancelled-by-user"))},dH))}function E(){document?.visibilityState==="visible"&&g()}t.addPassiveListener(m),document.addEventListener("resume",g,!1),B_()&&document.addEventListener("visibilitychange",E,!1),s=()=>{t.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",E,!1),f&&window.clearTimeout(f)}})}finally{s()}}function yH(n){const t=gd();Nt(typeof t?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Nt(typeof t?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Nt(typeof t?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nt(typeof t?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nt(typeof t?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function vH(n){const t=EH(n),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}function EH(n){if(Zo(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const t=new ArrayBuffer(n.length),e=new Uint8Array(t);for(let i=0;i<n.length;i++)e[i]=n.charCodeAt(i);return e}const TH=20;class SH extends p9{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInitialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInitialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}async initialized(){await this.initPromise}}function bH(n,t,e=null){return{type:t,eventId:e,urlResponse:null,sessionId:RH(),postBody:null,tenantId:n.tenantId,error:Zi(n,"no-auth-event")}}function AH(n,t){return XT()._set(JT(n),t)}async function e6(n){const t=await XT()._get(JT(n));return t&&await XT()._remove(JT(n)),t}function wH(n,t){const e=IH(t);if(e.includes("/__/auth/callback")){const i=J1(e),o=(i.firebaseError?CH(decodeURIComponent(i.firebaseError)):null)?.code?.split("auth/")?.[1],c=o?Zi(o):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:e,postBody:null}}return null}function RH(){const n=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<TH;e++){const i=Math.floor(Math.random()*t.length);n.push(t.charAt(i))}return n.join("")}function XT(){return wr(Gb)}function JT(n){return td("authEvent",n.config.apiKey,n.name)}function CH(n){try{return JSON.parse(n)}catch{return null}}function IH(n){const t=J1(n),e=t.link?decodeURIComponent(t.link):void 0,i=J1(e).link,s=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return J1(s).link||s||i||e||n}function J1(n){if(!n?.includes("?"))return{};const[t,...e]=n.split("?");return jm(e.join("?"))}const NH=500;class DH{constructor(){this._redirectPersistence=md,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=S2,this._overrideRedirectResult=Kb}async _initialize(t){const e=t._key();let i=this.eventManagers.get(e);return i||(i=new SH(t),this.eventManagers.set(e,i),this.attachCallbackListeners(t,i)),i}_openPopup(t){xs(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,i,s){yH(t);const o=await this._initialize(t);await o.initialized(),o.resetRedirect(),AG(),await this._originValidation(t);const c=bH(t,i,s);await AH(t,c);const f=await mH(t,c,e),m=await gH(f);return _H(t,o,m)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=pH(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:i,handleOpenURL:s,BuildInfo:o}=gd(),c=setTimeout(async()=>{await e6(t),e.onEvent(n6())},NH),f=async E=>{clearTimeout(c);const b=await e6(t);let A=null;b&&E?.url&&(A=wH(b,E.url)),e.onEvent(A||n6())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,f);const m=s,g=`${o.packageName.toLowerCase()}://`;gd().handleOpenURL=async E=>{if(E.toLowerCase().startsWith(g)&&f({url:E}),typeof m=="function")try{m(E)}catch(b){console.error(b)}}}}const xH=DH;function n6(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zi("no-auth-event")}}function OH(n,t){oi(n)._logFramework(t)}var MH="@firebase/auth-compat",PH="0.6.2";const VH=1e3;function W0(){return self?.location?.protocol||null}function kH(){return W0()==="http:"||W0()==="https:"}function v9(n=ri()){return!!((W0()==="file:"||W0()==="ionic:"||W0()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function LH(){return _S()||Bv()}function UH(){return Rw()&&document?.documentMode===11}function zH(n=ri()){return/Edge\/\d+/.test(n)}function BH(n=ri()){return UH()||zH(n)}function E9(){try{const n=self.localStorage,t=F_();if(n)return n.setItem(t,"1"),n.removeItem(t),BH()?id():!0}catch{return Qb()&&id()}return!1}function Qb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function KE(){return(kH()||ww()||v9())&&!LH()&&E9()&&!Qb()}function T9(){return v9()&&typeof document<"u"}async function GH(){return T9()?new Promise(n=>{const t=setTimeout(()=>{n(!1)},VH);document.addEventListener("deviceready",()=>{clearTimeout(t),n(!0)})}):!1}function HH(){return typeof window<"u"?window:null}const br={LOCAL:"local",NONE:"none",SESSION:"session"},y0=Nt,S9="persistence";function qH(n,t){if(y0(Object.values(br).includes(t),n,"invalid-persistence-type"),_S()){y0(t!==br.SESSION,n,"unsupported-persistence-type");return}if(Bv()){y0(t===br.NONE,n,"unsupported-persistence-type");return}if(Qb()){y0(t===br.NONE||t===br.LOCAL&&id(),n,"unsupported-persistence-type");return}y0(t===br.NONE||E9(),n,"unsupported-persistence-type")}async function WT(n){await n._initializationPromise;const t=b9(),e=td(S9,n.config.apiKey,n.name);t&&t.setItem(e,n._getPersistenceType())}function FH(n,t){const e=b9();if(!e)return[];const i=td(S9,n,t);switch(e.getItem(i)){case br.NONE:return[bp];case br.LOCAL:return[v_,md];case br.SESSION:return[md];default:return[]}}function b9(){try{return HH()?.sessionStorage||null}catch{return null}}const jH=Nt;class Ah{constructor(){this.browserResolver=wr(rH),this.cordovaResolver=wr(xH),this.underlyingResolver=null,this._redirectPersistence=md,this._completeRedirectFn=S2,this._overrideRedirectResult=Kb}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,i,s)}async _openRedirect(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,i,s)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return T9()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jH(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await GH();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}function A9(n){return n.unwrap()}function KH(n){return n.wrapped()}function YH(n){return w9(n)}function QH(n,t){const e=t.customData?._tokenResponse;if(t?.code==="auth/multi-factor-auth-required"){const i=t;i.resolver=new XH(n,zB(n,t))}else if(e){const i=w9(t),s=t;i&&(s.credential=i,s.tenantId=e.tenantId||void 0,s.email=e.email||void 0,s.phoneNumber=e.phoneNumber||void 0)}}function w9(n){const{_tokenResponse:t}=n instanceof Gi?n.customData:n;if(!t)return null;if(!(n instanceof Gi)&&"temporaryProof"in t&&"phoneNumber"in t)return pd.credentialFromResult(n);const e=t.providerId;if(!e||e===g0.PASSWORD)return null;let i;switch(e){case g0.GOOGLE:i=ql;break;case g0.FACEBOOK:i=Hl;break;case g0.GITHUB:i=Fl;break;case g0.TWITTER:i=jl;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:c,pendingToken:f,nonce:m}=t;return!o&&!c&&!s&&!f?null:f?e.startsWith("saml.")?Ap._create(e,f):eu._fromParams({providerId:e,signInMethod:e,pendingToken:f,idToken:s,accessToken:o}):new Zm(e).credential({idToken:s,accessToken:o,rawNonce:m})}return n instanceof Gi?i.credentialFromError(n):i.credentialFromResult(n)}function Za(n,t){return t.catch(e=>{throw e instanceof Gi&&QH(n,e),e}).then(e=>{const i=e.operationType,s=e.user;return{operationType:i,credential:YH(e),additionalUserInfo:UB(e),user:Qu.getOrCreate(s)}})}async function ZT(n,t){const e=await t;return{verificationId:e.verificationId,confirm:i=>Za(n,e.confirm(i))}}class XH{constructor(t,e){this.resolver=e,this.auth=KH(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return Za(A9(this.auth),this.resolver.resolveSignIn(t))}}class Qu{constructor(t){this._delegate=t,this.multiFactor=HB(t)}static getOrCreate(t){return Qu.USER_MAP.has(t)||Qu.USER_MAP.set(t,new Qu(t)),Qu.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return Za(this.auth,t9(this._delegate,t))}async linkWithPhoneNumber(t,e){return ZT(this.auth,hG(this._delegate,t,e))}async linkWithPopup(t){return Za(this.auth,EG(this._delegate,t,Ah))}async linkWithRedirect(t){return await WT(oi(this.auth)),NG(this._delegate,t,Ah)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return Za(this.auth,e9(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return ZT(this.auth,fG(this._delegate,t,e))}reauthenticateWithPopup(t){return Za(this.auth,vG(this._delegate,t,Ah))}async reauthenticateWithRedirect(t){return await WT(oi(this.auth)),CG(this._delegate,t,Ah)}sendEmailVerification(t){return CB(this._delegate,t)}async unlink(t){return await dB(this._delegate,t),this}updateEmail(t){return xB(this._delegate,t)}updatePassword(t){return OB(this._delegate,t)}updatePhoneNumber(t){return dG(this._delegate,t)}updateProfile(t){return DB(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return IB(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qu.USER_MAP=new WeakMap;const v0=Nt;class $T{constructor(t,e){if(this.app=t,e.isInitialized()){this._delegate=e.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=t.options;v0(i,"invalid-api-key",{appName:t.name}),v0(i,"invalid-api-key",{appName:t.name});const s=typeof window<"u"?Ah:void 0;this._delegate=e.initialize({options:{persistence:JH(i,t.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(nz),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){Fz(this._delegate,t,e)}applyActionCode(t){return yB(this._delegate,t)}checkActionCode(t){return n9(this._delegate,t)}confirmPasswordReset(t,e){return _B(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return Za(this._delegate,EB(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return RB(this._delegate,t)}isSignInWithEmailLink(t){return bB(this._delegate,t)}async getRedirectResult(){v0(KE(),this._delegate,"operation-not-supported-in-this-environment");const t=await xG(this._delegate,Ah);return t?Za(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){OH(this._delegate,t)}onAuthStateChanged(t,e,i){const{next:s,error:o,complete:c}=i6(t,e,i);return this._delegate.onAuthStateChanged(s,o,c)}onIdTokenChanged(t,e,i){const{next:s,error:o,complete:c}=i6(t,e,i);return this._delegate.onIdTokenChanged(s,o,c)}sendSignInLinkToEmail(t,e){return SB(this._delegate,t,e)}sendPasswordResetEmail(t,e){return gB(this._delegate,t,e||void 0)}async setPersistence(t){qH(this._delegate,t);let e;switch(t){case br.SESSION:e=md;break;case br.LOCAL:e=await wr(v_)._isAvailable()?v_:Gb;break;case br.NONE:e=bp;break;default:return xs("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return Za(this._delegate,fB(this._delegate))}signInWithCredential(t){return Za(this._delegate,_2(this._delegate,t))}signInWithCustomToken(t){return Za(this._delegate,pB(this._delegate,t))}signInWithEmailAndPassword(t,e){return Za(this._delegate,TB(this._delegate,t,e))}signInWithEmailLink(t,e){return Za(this._delegate,AB(this._delegate,t,e))}signInWithPhoneNumber(t,e){return ZT(this._delegate,cG(this._delegate,t,e))}async signInWithPopup(t){return v0(KE(),this._delegate,"operation-not-supported-in-this-environment"),Za(this._delegate,yG(this._delegate,t,Ah))}async signInWithRedirect(t){return v0(KE(),this._delegate,"operation-not-supported-in-this-environment"),await WT(this._delegate),wG(this._delegate,t,Ah)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return vB(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}$T.Persistence=br;function i6(n,t,e){let i=n;typeof n!="function"&&({next:i,error:t,complete:e}=n);const s=i;return{next:c=>s(c&&Qu.getOrCreate(c)),error:t,complete:e}}function JH(n,t){const e=FH(n,t);if(typeof self<"u"&&!e.includes(v_)&&e.push(v_),typeof window<"u")for(const i of[Gb,md])e.includes(i)||e.push(i);return e.includes(bp)||e.push(bp),e}class Xb{static credential(t,e){return pd.credential(t,e)}constructor(){this.providerId="phone",this._delegate=new pd(A9(Eo.auth()))}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Xb.PHONE_SIGN_IN_METHOD=pd.PHONE_SIGN_IN_METHOD;Xb.PROVIDER_ID=pd.PROVIDER_ID;const WH=Nt;class ZH{constructor(t,e,i=Eo.app()){WH(i.options?.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new lG(i.auth(),t,e),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const $H="auth-compat";function tq(n){n.INTERNAL.registerComponent(new Hi($H,t=>{const e=t.getProvider("app-compat").getImmediate(),i=t.getProvider("auth");return new $T(e,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Lm.EMAIL_SIGNIN,PASSWORD_RESET:Lm.PASSWORD_RESET,RECOVER_EMAIL:Lm.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Lm.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Lm.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Lm.VERIFY_EMAIL}},EmailAuthProvider:Jh,FacebookAuthProvider:Hl,GithubAuthProvider:Fl,GoogleAuthProvider:ql,OAuthProvider:Zm,SAMLAuthProvider:Tv,PhoneAuthProvider:Xb,PhoneMultiFactorGenerator:y9,RecaptchaVerifier:ZH,TwitterAuthProvider:jl,Auth:$T,AuthCredential:zp,Error:Gi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(MH,PH)}tq(Eo);const eq="@firebase/firestore-compat",nq="0.4.5";function Jb(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Tt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function s6(){if(typeof Uint8Array>"u")throw new Tt("unimplemented","Uint8Arrays are not available in this environment.")}function a6(){if(!fV())throw new Tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}let R9=class tS{constructor(t){this._delegate=t}static fromBase64String(t){return a6(),new tS(Xs.fromBase64String(t))}static fromUint8Array(t){return s6(),new tS(Xs.fromUint8Array(t))}toBase64(){return a6(),this._delegate.toBase64()}toUint8Array(){return s6(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function eS(n){return iq(n,["next","error","complete"])}function iq(n,t){if(typeof n!="object"||n===null)return!1;const e=n;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}class sq{enableIndexedDbPersistence(t,e){return aU(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return rU(t._delegate)}clearIndexedDbPersistence(t){return oU(t._delegate)}}class C9{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Mh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Wo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t={...e,...t},delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){eU(this._delegate,t,e,i)}enableNetwork(){return uU(this._delegate)}disableNetwork(){return cU(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Jw("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return lU(this._delegate)}onSnapshotsInSync(t){return jU(this._delegate,t)}get app(){if(!this._appCompat)throw new Tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new wp(this,_b(this._delegate,t))}catch(e){throw ya(e,"collection()","Firestore.collection()")}}doc(t){try{return new go(this,_v(this._delegate,t))}catch(e){throw ya(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new _a(this,nU(this._delegate,t))}catch(e){throw ya(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return LU(this._delegate,e=>t(new I9(this,e)))}batch(){return Zs(this._delegate),new N9(new PU(this._delegate,t=>U_(this._delegate,t)))}loadBundle(t){return hU(this._delegate,t)}namedQuery(t){return fU(this._delegate,t).then(e=>e?new _a(this,e):null)}}class b2 extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new R9(new Xs(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return go.forKey(e,this.firestore,null)}}function aq(n){AP(n)}class I9{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new b2(t)}get(t){const e=Wf(t);return this._delegate.get(e).then(i=>new E_(this._firestore,new yo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const s=Wf(t);return i?(Jb("Transaction.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Wf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Wf(t);return this._delegate.delete(e),this}}class N9{constructor(t){this._delegate=t}set(t,e,i){const s=Wf(t);return i?(Jb("WriteBatch.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Wf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Wf(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class _d{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new K0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new T_(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=_d.INSTANCES;let s=i.get(t);s||(s=new WeakMap,i.set(t,s));let o=s.get(e);return o||(o=new _d(t,new b2(t),e),s.set(e,o)),o}}_d.INSTANCES=new WeakMap;class go{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new b2(t)}static forPath(t,e,i){if(t.length%2!==0)throw new Tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new go(e,new In(e._delegate,i,new Lt(t)))}static forKey(t,e,i){return new go(e,new In(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new wp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new wp(this.firestore,_b(this._delegate,t))}catch(e){throw ya(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=jt(t),t instanceof In?o8(this._delegate,t):!1}set(t,e){e=Jb("DocumentReference.set",e);try{return e?O5(this._delegate,t,e):O5(this._delegate,t)}catch(i){throw ya(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?M5(this._delegate,t):M5(this._delegate,t,e,...i)}catch(s){throw ya(s,"updateDoc()","DocumentReference.update()")}}delete(){return qU(this._delegate)}onSnapshot(...t){const e=D9(t),i=x9(t,s=>new E_(this.firestore,new yo(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return R8(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=zU(this._delegate):t?.source==="server"?e=BU(this._delegate):e=UU(this._delegate),e.then(i=>new E_(this.firestore,new yo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new go(this.firestore,t?this._delegate.withConverter(_d.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function ya(n,t,e){return n.message=n.message.replace(t,e),n}function D9(n){for(const t of n)if(typeof t=="object"&&!eS(t))return t;return{}}function x9(n,t){let e;return eS(n[0])?e=n[0]:eS(n[1])?e=n[1]:typeof n[0]=="function"?e={next:n[0],error:n[1],complete:n[2]}:e={next:n[1],error:n[2],complete:n[3]},{next:i=>{e.next&&e.next(t(i))},error:e.error?.bind(e),complete:e.complete?.bind(e)}}class E_{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return A8(this._delegate,t._delegate)}}class T_ extends E_{data(t){const e=this._delegate.data(t);return this._delegate._converter||wP(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}}class _a{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new b2(t)}where(t,e,i){try{return new _a(this.firestore,ph(this._delegate,bU(t,e,i)))}catch(s){throw ya(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new _a(this.firestore,ph(this._delegate,AU(t,e)))}catch(i){throw ya(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new _a(this.firestore,ph(this._delegate,wU(t)))}catch(e){throw ya(e,"limit()","Query.limit()")}}limitToLast(t){try{return new _a(this.firestore,ph(this._delegate,RU(t)))}catch(e){throw ya(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new _a(this.firestore,ph(this._delegate,CU(...t)))}catch(e){throw ya(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new _a(this.firestore,ph(this._delegate,IU(...t)))}catch(e){throw ya(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new _a(this.firestore,ph(this._delegate,NU(...t)))}catch(e){throw ya(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new _a(this.firestore,ph(this._delegate,DU(...t)))}catch(e){throw ya(e,"endAt()","Query.endAt()")}}isEqual(t){return l8(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=GU(this._delegate):t?.source==="server"?e=HU(this._delegate):e=w8(this._delegate),e.then(i=>new nS(this.firestore,new Jo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=D9(t),i=x9(t,s=>new nS(this.firestore,new Jo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return R8(this._delegate,e,i)}withConverter(t){return new _a(this.firestore,t?this._delegate.withConverter(_d.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class rq{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new T_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nS{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new _a(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new T_(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new rq(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new T_(this._firestore,i))})}isEqual(t){return A8(this._delegate,t._delegate)}}class wp extends _a{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new go(this.firestore,t):null}doc(t){try{return t===void 0?new go(this.firestore,_v(this._delegate)):new go(this.firestore,_v(this._delegate,t))}catch(e){throw ya(e,"doc()","CollectionReference.doc()")}}add(t){return FU(this._delegate,t).then(e=>new go(this.firestore,e))}isEqual(t){return o8(this._delegate,t._delegate)}withConverter(t){return new wp(this.firestore,t?this._delegate.withConverter(_d.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Wf(n){return Xe(n,In)}class Wb{constructor(...t){this._delegate=new fd(...t)}static documentId(){return new Wb(Jn.keyField().canonicalString())}isEqual(t){return t=jt(t),t instanceof fd?this._delegate._internalPath.isEqual(t._internalPath):!1}}class Kf{static serverTimestamp(){const t=yU();return t._methodName="FieldValue.serverTimestamp",new Kf(t)}static delete(){const t=_U();return t._methodName="FieldValue.delete",new Kf(t)}static arrayUnion(...t){const e=vU(...t);return e._methodName="FieldValue.arrayUnion",new Kf(e)}static arrayRemove(...t){const e=EU(...t);return e._methodName="FieldValue.arrayRemove",new Kf(e)}static increment(t){const e=TU(t);return e._methodName="FieldValue.increment",new Kf(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}const oq={Firestore:C9,GeoPoint:Qo,Timestamp:an,Blob:R9,Transaction:I9,WriteBatch:N9,DocumentReference:go,DocumentSnapshot:E_,Query:_a,QueryDocumentSnapshot:T_,QuerySnapshot:nS,CollectionReference:wp,FieldPath:Wb,FieldValue:Kf,setLogLevel:aq,CACHE_SIZE_UNLIMITED:sU};function lq(n,t){n.INTERNAL.registerComponent(new Hi("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("firestore").getImmediate();return t(i,s)},"PUBLIC").setServiceProps({...oq}))}function uq(n){lq(n,(t,e)=>new C9(t,e,new sq)),n.registerVersion(eq,nq)}uq(Eo);const O9="firebasestorage.googleapis.com",M9="storageBucket",cq=120*1e3,hq=600*1e3,fq=1e3;class ui extends Gi{constructor(t,e,i=0){super(YE(t),`Firebase Storage: ${e} (${YE(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ui.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return YE(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hn||(Hn={}));function YE(n){return"storage/"+n}function Zb(){const n="An unknown error occurred, please check the error payload for server response.";return new ui(Hn.UNKNOWN,n)}function dq(n){return new ui(Hn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function mq(n){return new ui(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pq(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ui(Hn.UNAUTHENTICATED,n)}function gq(){return new ui(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _q(n){return new ui(Hn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function P9(){return new ui(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V9(){return new ui(Hn.CANCELED,"User canceled the upload/download.")}function yq(n){return new ui(Hn.INVALID_URL,"Invalid URL '"+n+"'.")}function vq(n){return new ui(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Eq(){return new ui(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+M9+"' property when initializing the app?")}function k9(){return new ui(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tq(){return new ui(Hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Sq(){return new ui(Hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bq(n){return new ui(Hn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(n){return new ui(Hn.INVALID_ARGUMENT,n)}function L9(){return new ui(Hn.APP_DELETED,"The Firebase app was deleted.")}function U9(n){return new ui(Hn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Z0(n,t){return new ui(Hn.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function E0(n){throw new ui(Hn.INTERNAL_ERROR,"Internal error: "+n)}class Js{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Js.makeFromUrl(t,e)}catch{return new Js(t,"")}if(i.path==="")return i;throw vq(t)}static makeFromUrl(t,e){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),m={bucket:1,path:3};function g(Z){Z.path_=decodeURIComponent(Z.path)}const E="v[A-Za-z0-9_]+",b=e.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${E}/b/${s}/o${A}`,"i"),D={bucket:1,path:3},L=e===O9?"(?:storage.googleapis.com|storage.cloud.google.com)":e,U="([^?#]*)",G=new RegExp(`^https?://${L}/${s}/${U}`,"i"),X=[{regex:f,indices:m,postModify:o},{regex:N,indices:D,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let Z=0;Z<X.length;Z++){const gt=X[Z],lt=gt.regex.exec(t);if(lt){const V=lt[gt.indices.bucket];let M=lt[gt.indices.path];M||(M=""),i=new Js(V,M),gt.postModify(i);break}}if(i==null)throw yq(t);return i}}class Aq{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function wq(n,t,e){let i=1,s=null,o=null,c=!1,f=0;function m(){return f===2}let g=!1;function E(...U){g||(g=!0,t.apply(null,U))}function b(U){s=setTimeout(()=>{s=null,n(N,m())},U)}function A(){o&&clearTimeout(o)}function N(U,...G){if(g){A();return}if(U){A(),E.call(null,U,...G);return}if(m()||c){A(),E.call(null,U,...G);return}i<64&&(i*=2);let X;f===1?(f=2,X=0):X=(i+Math.random())*1e3,b(X)}let D=!1;function L(U){D||(D=!0,A(),!g&&(s!==null?(U||(f=2),clearTimeout(s),b(0)):U||(f=1)))}return b(0),o=setTimeout(()=>{c=!0,L(!0)},e),L}function Rq(n){n(!1)}function Cq(n){return n!==void 0}function Iq(n){return typeof n=="function"}function Nq(n){return typeof n=="object"&&!Array.isArray(n)}function A2(n){return typeof n=="string"||n instanceof String}function r6(n){return $b()&&n instanceof Blob}function $b(){return typeof Blob<"u"}function iS(n,t,e,i){if(i<t)throw tp(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw tp(`Invalid value for '${n}'. Expected ${e} or less.`)}function Wh(n,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function z9(n){const t=encodeURIComponent;let e="?";for(const i in n)if(n.hasOwnProperty(i)){const s=t(i)+"="+t(n[i]);e=e+s+"&"}return e=e.slice(0,-1),e}var nd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(nd||(nd={}));function B9(n,t){const e=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||s||o}class Dq{constructor(t,e,i,s,o,c,f,m,g,E,b,A=!0,N=!1){this.url_=t,this.method_=e,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=E,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,L)=>{this.resolve_=D,this.reject_=L,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new x1(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===nd.NO_ERROR,m=o.getStatus();if(!f||B9(m,this.additionalRetryCodes_)&&this.retry){const E=o.getErrorCode()===nd.ABORT;i(!1,new x1(!1,null,E));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new x1(g,o))})},e=(i,s)=>{const o=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());Cq(m)?o(m):o()}catch(m){c(m)}else if(f!==null){const m=Zb();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(s.canceled){const m=this.appDelete_?L9():V9();c(m)}else{const m=P9();c(m)}};this.canceled_?e(!1,new x1(!1,null,!0)):this.backoffId_=wq(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Rq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class x1{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function xq(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function Oq(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Mq(n,t){t&&(n["X-Firebase-GMPID"]=t)}function Pq(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function Vq(n,t,e,i,s,o,c=!0,f=!1){const m=z9(n.urlParams),g=n.url+m,E=Object.assign({},n.headers);return Mq(E,t),xq(E,e),Oq(E,o),Pq(E,i),new Dq(g,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,f)}function kq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Lq(...n){const t=kq();if(t!==void 0){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}else{if($b())return new Blob(n);throw new ui(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Uq(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function zq(n){if(typeof atob>"u")throw bq("base-64");return atob(n)}const _o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class QE{constructor(t,e){this.data=t,this.contentType=e||null}}function G9(n,t){switch(n){case _o.RAW:return new QE(H9(t));case _o.BASE64:case _o.BASE64URL:return new QE(q9(n,t));case _o.DATA_URL:return new QE(Gq(t),Hq(t))}throw Zb()}function H9(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{const o=i,c=n.charCodeAt(++e);i=65536|(o&1023)<<10|c&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function Bq(n){let t;try{t=decodeURIComponent(n)}catch{throw Z0(_o.DATA_URL,"Malformed data URL.")}return H9(t)}function q9(n,t){switch(n){case _o.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw Z0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case _o.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw Z0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=zq(t)}catch(s){throw s.message.includes("polyfill")?s:Z0(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}class F9{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(e===null)throw Z0(_o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;i!=null&&(this.base64=qq(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function Gq(n){const t=new F9(n);return t.base64?q9(_o.BASE64,t.rest):Bq(t.rest)}function Hq(n){return new F9(n).contentType}function qq(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}class ju{constructor(t,e){let i=0,s="";r6(t)?(this.data_=t,i=t.size,s=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,e){if(r6(this.data_)){const i=this.data_,s=Uq(i,t,e);return s===null?null:new ju(s)}else{const i=new Uint8Array(this.data_.buffer,t,e-t);return new ju(i,!0)}}static getBlob(...t){if($b()){const e=t.map(i=>i instanceof ju?i.data_:i);return new ju(Lq.apply(null,e))}else{const e=t.map(c=>A2(c)?G9(_o.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let o=0;return e.forEach(c=>{for(let f=0;f<c.length;f++)s[o++]=c[f]}),new ju(s,!0)}}uploadData(){return this.data_}}function t4(n){let t;try{t=JSON.parse(n)}catch{return null}return Nq(t)?t:null}function Fq(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function jq(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return n.length===0?e:n+"/"+e}function j9(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function Kq(n,t){return t}class ga{constructor(t,e,i,s){this.server=t,this.local=e||t,this.writable=!!i,this.xform=s||Kq}}let O1=null;function Yq(n){return!A2(n)||n.length<2?n:j9(n)}function w2(){if(O1)return O1;const n=[];n.push(new ga("bucket")),n.push(new ga("generation")),n.push(new ga("metageneration")),n.push(new ga("name","fullPath",!0));function t(o,c){return Yq(c)}const e=new ga("name");e.xform=t,n.push(e);function i(o,c){return c!==void 0?Number(c):c}const s=new ga("size");return s.xform=i,n.push(s),n.push(new ga("timeCreated")),n.push(new ga("updated")),n.push(new ga("md5Hash",null,!0)),n.push(new ga("cacheControl",null,!0)),n.push(new ga("contentDisposition",null,!0)),n.push(new ga("contentEncoding",null,!0)),n.push(new ga("contentLanguage",null,!0)),n.push(new ga("contentType",null,!0)),n.push(new ga("metadata","customMetadata",!0)),O1=n,O1}function Qq(n,t){function e(){const i=n.bucket,s=n.fullPath,o=new Js(i,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:e})}function Xq(n,t,e){const i={};i.type="file";const s=e.length;for(let o=0;o<s;o++){const c=e[o];i[c.local]=c.xform(i,t[c.server])}return Qq(i,n),i}function K9(n,t,e){const i=t4(t);return i===null?null:Xq(n,i,e)}function Jq(n,t,e,i){const s=t4(t);if(s===null||!A2(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const E=n.bucket,b=n.fullPath,A="/b/"+c(E)+"/o/"+c(b),N=Wh(A,e,i),D=z9({alt:"media",token:g});return N+D})[0]}function e4(n,t){const e={},i=t.length;for(let s=0;s<i;s++){const o=t[s];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const o6="prefixes",l6="items";function Wq(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[o6])for(const s of e[o6]){const o=s.replace(/\/$/,""),c=n._makeStorageReference(new Js(t,o));i.prefixes.push(c)}if(e[l6])for(const s of e[l6]){const o=n._makeStorageReference(new Js(t,s.name));i.items.push(o)}return i}function Zq(n,t,e){const i=t4(e);return i===null?null:Wq(n,t,i)}class fc{constructor(t,e,i,s){this.url=t,this.method=e,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zl(n){if(!n)throw Zb()}function R2(n,t){function e(i,s){const o=K9(n,s,t);return Zl(o!==null),o}return e}function $q(n,t){function e(i,s){const o=Zq(n,t,s);return Zl(o!==null),o}return e}function tF(n,t){function e(i,s){const o=K9(n,s,t);return Zl(o!==null),Jq(o,s,n.host,n._protocol)}return e}function Gp(n){function t(e,i){let s;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?s=gq():s=pq():e.getStatus()===402?s=mq(n.bucket):e.getStatus()===403?s=_q(n.path):s=i,s.status=e.getStatus(),s.serverResponse=i.serverResponse,s}return t}function C2(n){const t=Gp(n);function e(i,s){let o=t(i,s);return i.getStatus()===404&&(o=dq(n.path)),o.serverResponse=s.serverResponse,o}return e}function Y9(n,t,e){const i=t.fullServerUrl(),s=Wh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new fc(s,o,R2(n,e),c);return f.errorHandler=C2(t),f}function eF(n,t,e,i,s){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",e.length>0&&(o.delimiter=e),i&&(o.pageToken=i),s&&(o.maxResults=s);const c=t.bucketOnlyServerUrl(),f=Wh(c,n.host,n._protocol),m="GET",g=n.maxOperationRetryTime,E=new fc(f,m,$q(n,t.bucket),g);return E.urlParams=o,E.errorHandler=Gp(t),E}function nF(n,t,e){const i=t.fullServerUrl(),s=Wh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new fc(s,o,tF(n,e),c);return f.errorHandler=C2(t),f}function iF(n,t,e,i){const s=t.fullServerUrl(),o=Wh(s,n.host,n._protocol),c="PATCH",f=e4(e,i),m={"Content-Type":"application/json; charset=utf-8"},g=n.maxOperationRetryTime,E=new fc(o,c,R2(n,i),g);return E.headers=m,E.body=f,E.errorHandler=C2(t),E}function sF(n,t){const e=t.fullServerUrl(),i=Wh(e,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function c(m,g){}const f=new fc(i,s,c,o);return f.successCodes=[200,204],f.errorHandler=C2(t),f}function aF(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function Q9(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=aF(null,t)),i}function rF(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let X="";for(let Z=0;Z<2;Z++)X=X+Math.random().toString().slice(2);return X}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const g=Q9(t,i,s),E=e4(g,e),b="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+m+"--",N=ju.getBlob(b,i,A);if(N===null)throw k9();const D={name:g.fullPath},L=Wh(o,n.host,n._protocol),U="POST",G=n.maxUploadRetryTime,j=new fc(L,U,R2(n,e),G);return j.urlParams=D,j.headers=c,j.body=N.uploadData(),j.errorHandler=Gp(t),j}class wv{constructor(t,e,i,s){this.current=t,this.total=e,this.finalized=!!i,this.metadata=s||null}}function n4(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zl(!1)}return Zl(!!e&&(t||["active"]).indexOf(e)!==-1),e}function oF(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c=Q9(t,i,s),f={name:c.fullPath},m=Wh(o,n.host,n._protocol),g="POST",E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},b=e4(c,e),A=n.maxUploadRetryTime;function N(L){n4(L);let U;try{U=L.getResponseHeader("X-Goog-Upload-URL")}catch{Zl(!1)}return Zl(A2(U)),U}const D=new fc(m,g,N,A);return D.urlParams=f,D.headers=E,D.body=b,D.errorHandler=Gp(t),D}function lF(n,t,e,i){const s={"X-Goog-Upload-Command":"query"};function o(g){const E=n4(g,["active","final"]);let b=null;try{b=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zl(!1)}b||Zl(!1);const A=Number(b);return Zl(!isNaN(A)),new wv(A,i.size(),E==="final")}const c="POST",f=n.maxUploadRetryTime,m=new fc(e,c,o,f);return m.headers=s,m.errorHandler=Gp(t),m}const u6=256*1024;function uF(n,t,e,i,s,o,c,f){const m=new wv(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw Tq();const g=m.total-m.current;let E=g;s>0&&(E=Math.min(E,s));const b=m.current,A=b+E;let N="";E===0?N="finalize":g===E?N="upload, finalize":N="upload";const D={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${m.current}`},L=i.slice(b,A);if(L===null)throw k9();function U(Z,gt){const lt=n4(Z,["active","final"]),V=m.current+E,M=i.size();let k;return lt==="final"?k=R2(t,o)(Z,gt):k=null,new wv(V,M,lt==="final",k)}const G="POST",j=t.maxUploadRetryTime,X=new fc(e,G,U,j);return X.headers=D,X.body=L.uploadData(),X.progressCallback=f||null,X.errorHandler=Gp(n),X}const cF={STATE_CHANGED:"state_changed"},va={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function XE(n){switch(n){case"running":case"pausing":case"canceling":return va.RUNNING;case"paused":return va.PAUSED;case"success":return va.SUCCESS;case"canceled":return va.CANCELED;case"error":return va.ERROR;default:return va.ERROR}}class hF{constructor(t,e,i){if(Iq(t)||e!=null||i!=null)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Um(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class fF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nd.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nd.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nd.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,s,o){if(this.sent_)throw E0("cannot .send() more than once");if(iu(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw E0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw E0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw E0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw E0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class dF extends fF{initXhr(){this.xhr_.responseType="text"}}function Kl(){return new dF}class X9{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=w2(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(B9(s.status,[]))if(o)s=P9();else{this.sleepTime=Math.max(this.sleepTime*2,fq),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Hn.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,e)=>{const i=oF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Kl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const s=lF(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(s,Kl,e,i);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=u6*this._chunkMultiplier,e=new wv(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,o)=>{let c;try{c=uF(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(c,Kl,s,o,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){u6*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=Y9(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,Kl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=rF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Kl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e=this._state==="paused";this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=V9(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=XE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,s){const o=new hF(e||void 0,i||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);e!==-1&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(XE(this._state)){case va.SUCCESS:Um(this._resolve.bind(null,this.snapshot))();break;case va.CANCELED:case va.ERROR:const e=this._reject;Um(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(XE(this._state)){case va.RUNNING:case va.PAUSED:t.next&&Um(t.next.bind(t,this.snapshot))();break;case va.SUCCESS:t.complete&&Um(t.complete.bind(t))();break;case va.CANCELED:case va.ERROR:t.error&&Um(t.error.bind(t,this._error))();break;default:t.error&&Um(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}class yd{constructor(t,e){this._service=t,e instanceof Js?this._location=e:this._location=Js.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new yd(t,e)}get root(){const t=new Js(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j9(this._location.path)}get storage(){return this._service}get parent(){const t=Fq(this._location.path);if(t===null)return null;const e=new Js(this._location.bucket,t);return new yd(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw U9(t)}}function mF(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new X9(n,new ju(t),e)}function pF(n){const t={prefixes:[],items:[]};return J9(n,t).then(()=>t)}async function J9(n,t,e){const s=await W9(n,{pageToken:e});t.prefixes.push(...s.prefixes),t.items.push(...s.items),s.nextPageToken!=null&&await J9(n,t,s.nextPageToken)}function W9(n,t){t!=null&&typeof t.maxResults=="number"&&iS("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=eF(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Kl)}function gF(n){n._throwIfRoot("getMetadata");const t=Y9(n.storage,n._location,w2());return n.storage.makeRequestWithTokens(t,Kl)}function _F(n,t){n._throwIfRoot("updateMetadata");const e=iF(n.storage,n._location,t,w2());return n.storage.makeRequestWithTokens(e,Kl)}function yF(n){n._throwIfRoot("getDownloadURL");const t=nF(n.storage,n._location,w2());return n.storage.makeRequestWithTokens(t,Kl).then(e=>{if(e===null)throw Sq();return e})}function vF(n){n._throwIfRoot("deleteObject");const t=sF(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Kl)}function Z9(n,t){const e=jq(n._location.path,t),i=new Js(n._location.bucket,e);return new yd(n.storage,i)}function EF(n){return/^[A-Za-z]+:\/\//.test(n)}function TF(n,t){return new yd(n,t)}function $9(n,t){if(n instanceof i4){const e=n;if(e._bucket==null)throw Eq();const i=new yd(e,e._bucket);return t!=null?$9(i,t):i}else return t!==void 0?Z9(n,t):n}function SF(n,t){if(t&&EF(t)){if(n instanceof i4)return TF(n,t);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return $9(n,t)}function c6(n,t){const e=t?.[M9];return e==null?null:Js.makeFromBucketSpec(e,n)}function bF(n,t,e,i={}){n.host=`${t}:${e}`;const s=iu(t);s&&(Uv(`https://${n.host}/b`),zv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:bw(o,n.app.options.projectId))}class i4{constructor(t,e,i,s,o,c=!1){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=O9,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cq,this._maxUploadRetryTime=hq,this._requests=new Set,s!=null?this._bucket=Js.makeFromBucketSpec(s,this._host):this._bucket=c6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Js.makeFromBucketSpec(this._url,t):this._bucket=c6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){iS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){iS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new yd(this,t)}_makeRequest(t,e,i,s,o=!0){if(this._deleted)return new Aq(L9());{const c=Vq(t,this._appId,i,s,e,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,e){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,s).getPromise()}}const h6="@firebase/storage",f6="0.14.0";const AF="storage";function wF(n,t,e){return n=jt(n),mF(n,t,e)}function RF(n){return n=jt(n),gF(n)}function CF(n,t){return n=jt(n),_F(n,t)}function IF(n,t){return n=jt(n),W9(n,t)}function NF(n){return n=jt(n),pF(n)}function DF(n){return n=jt(n),yF(n)}function xF(n){return n=jt(n),vF(n)}function d6(n,t){return n=jt(n),SF(n,t)}function OF(n,t){return Z9(n,t)}function MF(n,t,e,i={}){bF(n,t,e,i)}function PF(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new i4(e,i,s,t,ac)}function VF(){Sa(new Hi(AF,PF,"PUBLIC").setMultipleInstances(!0)),Wi(h6,f6,""),Wi(h6,f6,"esm2020")}VF();class M1{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class m6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new M1(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new M1(i,this,this._ref))},e)}on(t,e,i,s){let o;return e&&(typeof e=="function"?o=c=>e(new M1(c,this,this._ref)):o={next:e.next?c=>e.next(new M1(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,i||void 0,s||void 0)}}class p6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Wu(t,this._service))}get items(){return this._delegate.items.map(t=>new Wu(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wu{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=OF(this._delegate,t);return new Wu(e,this.storage)}get root(){return new Wu(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return t==null?null:new Wu(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new m6(wF(this._delegate,t,e),this)}putString(t,e=_o.RAW,i){this._throwIfRoot("putString");const s=G9(e,t),o={...i};return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),new m6(new X9(this._delegate,new ju(s.data,!0),o),this)}listAll(){return NF(this._delegate).then(t=>new p6(t,this.storage))}list(t){return IF(this._delegate,t||void 0).then(e=>new p6(e,this.storage))}getMetadata(){return RF(this._delegate)}updateMetadata(t){return CF(this._delegate,t)}getDownloadURL(){return DF(this._delegate)}delete(){return this._throwIfRoot("delete"),xF(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw U9(t)}}class tI{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(g6(t))throw tp("ref() expected a child path but got a URL, use refFromURL instead.");return new Wu(d6(this._delegate,t),this)}refFromURL(t){if(!g6(t))throw tp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Js.makeFromUrl(t,this._delegate.host)}catch{throw tp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wu(d6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){MF(this._delegate,t,e,i)}}function g6(n){return/^[A-Za-z]+:\/\//.test(n)}const kF="@firebase/storage-compat",LF="0.4.0";const UF="storage-compat";function zF(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new tI(e,i)}function BF(n){const t={TaskState:va,TaskEvent:cF,StringFormat:_o,Storage:tI,Reference:Wu};n.INTERNAL.registerComponent(new Hi(UF,zF,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion(kF,LF)}BF(Eo);const eI="@firebase/installations",s4="0.6.19";const nI=1e4,iI=`w:${s4}`,sI="FIS_v2",GF="https://firebaseinstallations.googleapis.com/v1",HF=3600*1e3,qF="installations",FF="Installations";const jF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vd=new su(qF,FF,jF);function aI(n){return n instanceof Gi&&n.code.includes("request-failed")}function rI({projectId:n}){return`${GF}/projects/${n}/installations`}function oI(n){return{token:n.token,requestStatus:2,expiresIn:YF(n.expiresIn),creationTime:Date.now()}}async function lI(n,t){const i=(await t.json()).error;return vd.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function uI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function KF(n,{refreshToken:t}){const e=uI(n);return e.append("Authorization",QF(t)),e}async function cI(n){const t=await n();return t.status>=500&&t.status<600?n():t}function YF(n){return Number(n.replace("s","000"))}function QF(n){return`${sI} ${n}`}async function XF({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=rI(n),s=uI(n),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={fid:e,authVersion:sI,appId:n.appId,sdkVersion:iI},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await cI(()=>fetch(i,f));if(m.ok){const g=await m.json();return{fid:g.fid||e,registrationStatus:2,refreshToken:g.refreshToken,authToken:oI(g.authToken)}}else throw await lI("Create Installation",m)}function hI(n){return new Promise(t=>{setTimeout(t,n)})}function JF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const WF=/^[cdef][\w-]{21}$/,sS="";function ZF(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=$F(n);return WF.test(e)?e:sS}catch{return sS}}function $F(n){return JF(n).substr(0,22)}function I2(n){return`${n.appName}!${n.appId}`}const fI=new Map;function dI(n,t){const e=I2(n);mI(e,t),tj(e,t)}function mI(n,t){const e=fI.get(n);if(e)for(const i of e)i(t)}function tj(n,t){const e=ej();e&&e.postMessage({key:n,fid:t}),nj()}let Zf=null;function ej(){return!Zf&&"BroadcastChannel"in self&&(Zf=new BroadcastChannel("[Firebase] FID Change"),Zf.onmessage=n=>{mI(n.data.key,n.data.fid)}),Zf}function nj(){fI.size===0&&Zf&&(Zf.close(),Zf=null)}const ij="firebase-installations-database",sj=1,Ed="firebase-installations-store";let JE=null;function a4(){return JE||(JE=Np(ij,sj,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Ed)}})),JE}async function Rv(n,t){const e=I2(n),s=(await a4()).transaction(Ed,"readwrite"),o=s.objectStore(Ed),c=await o.get(e);return await o.put(t,e),await s.done,(!c||c.fid!==t.fid)&&dI(n,t.fid),t}async function pI(n){const t=I2(n),i=(await a4()).transaction(Ed,"readwrite");await i.objectStore(Ed).delete(t),await i.done}async function N2(n,t){const e=I2(n),s=(await a4()).transaction(Ed,"readwrite"),o=s.objectStore(Ed),c=await o.get(e),f=t(c);return f===void 0?await o.delete(e):await o.put(f,e),await s.done,f&&(!c||c.fid!==f.fid)&&dI(n,f.fid),f}async function r4(n){let t;const e=await N2(n.appConfig,i=>{const s=aj(i),o=rj(n,s);return t=o.registrationPromise,o.installationEntry});return e.fid===sS?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function aj(n){const t=n||{fid:ZF(),registrationStatus:0};return gI(t)}function rj(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vd.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=oj(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:lj(n)}:{installationEntry:t}}async function oj(n,t){try{const e=await XF(n,t);return Rv(n.appConfig,e)}catch(e){throw aI(e)&&e.customData.serverCode===409?await pI(n.appConfig):await Rv(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function lj(n){let t=await _6(n.appConfig);for(;t.registrationStatus===1;)await hI(100),t=await _6(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await r4(n);return i||e}return t}function _6(n){return N2(n,t=>{if(!t)throw vd.create("installation-not-found");return gI(t)})}function gI(n){return uj(n)?{fid:n.fid,registrationStatus:0}:n}function uj(n){return n.registrationStatus===1&&n.registrationTime+nI<Date.now()}async function cj({appConfig:n,heartbeatServiceProvider:t},e){const i=hj(n,e),s=KF(n,e),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={installation:{sdkVersion:iI,appId:n.appId}},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await cI(()=>fetch(i,f));if(m.ok){const g=await m.json();return oI(g)}else throw await lI("Generate Auth Token",m)}function hj(n,{fid:t}){return`${rI(n)}/${t}/authTokens:generate`}async function o4(n,t=!1){let e;const i=await N2(n.appConfig,o=>{if(!_I(o))throw vd.create("not-registered");const c=o.authToken;if(!t&&mj(c))return o;if(c.requestStatus===1)return e=fj(n,t),o;{if(!navigator.onLine)throw vd.create("app-offline");const f=gj(o);return e=dj(n,f),f}});return e?await e:i.authToken}async function fj(n,t){let e=await y6(n.appConfig);for(;e.authToken.requestStatus===1;)await hI(100),e=await y6(n.appConfig);const i=e.authToken;return i.requestStatus===0?o4(n,t):i}function y6(n){return N2(n,t=>{if(!_I(t))throw vd.create("not-registered");const e=t.authToken;return _j(e)?{...t,authToken:{requestStatus:0}}:t})}async function dj(n,t){try{const e=await cj(n,t),i={...t,authToken:e};return await Rv(n.appConfig,i),e}catch(e){if(aI(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await pI(n.appConfig);else{const i={...t,authToken:{requestStatus:0}};await Rv(n.appConfig,i)}throw e}}function _I(n){return n!==void 0&&n.registrationStatus===2}function mj(n){return n.requestStatus===2&&!pj(n)}function pj(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+HF}function gj(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function _j(n){return n.requestStatus===1&&n.requestTime+nI<Date.now()}async function yj(n){const t=n,{installationEntry:e,registrationPromise:i}=await r4(t);return i?i.catch(console.error):o4(t).catch(console.error),e.fid}async function vj(n,t=!1){const e=n;return await Ej(e),(await o4(e,t)).token}async function Ej(n){const{registrationPromise:t}=await r4(n);t&&await t}function Tj(n){if(!n||!n.options)throw WE("App Configuration");if(!n.name)throw WE("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw WE(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function WE(n){return vd.create("missing-app-config-values",{valueName:n})}const yI="installations",Sj="installations-internal",bj=n=>{const t=n.getProvider("app").getImmediate(),e=Tj(t),i=Hv(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Aj=n=>{const t=n.getProvider("app").getImmediate(),e=Hv(t,yI).getImmediate();return{getId:()=>yj(e),getToken:s=>vj(e,s)}};function wj(){Sa(new Hi(yI,bj,"PUBLIC")),Sa(new Hi(Sj,Aj,"PRIVATE"))}wj();Wi(eI,s4);Wi(eI,s4,"esm2020");const Rj="/firebase-messaging-sw.js",Cj="/firebase-cloud-messaging-push-scope",vI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ij="https://fcmregistrations.googleapis.com/v1",EI="google.c.a.c_id",Nj="google.c.a.c_l",Dj="google.c.a.ts",xj="google.c.a.e",v6=1e4;var E6;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(E6||(E6={}));var S_;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(S_||(S_={}));function qu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oj(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const ZE="fcm_token_details_db",Mj=5,T6="fcm_token_object_Store";async function Pj(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(ZE))return null;let t=null;return(await Np(ZE,Mj,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(T6))return;const f=c.objectStore(T6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:qu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:qu(g.auth),p256dh:qu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:qu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:qu(g.auth),p256dh:qu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:qu(g.vapidKey)}}}}}})).close(),await Km(ZE),await Km("fcm_vapid_details_db"),await Km("undefined"),Vj(t)?t:null}function Vj(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const kj="firebase-messaging-database",Lj=1,Td="firebase-messaging-store";let $E=null;function l4(){return $E||($E=Np(kj,Lj,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Td)}})),$E}async function TI(n){const t=c4(n),i=await(await l4()).transaction(Td).objectStore(Td).get(t);if(i)return i;{const s=await Pj(n.appConfig.senderId);if(s)return await u4(n,s),s}}async function u4(n,t){const e=c4(n),s=(await l4()).transaction(Td,"readwrite");return await s.objectStore(Td).put(t,e),await s.done,t}async function Uj(n){const t=c4(n),i=(await l4()).transaction(Td,"readwrite");await i.objectStore(Td).delete(t),await i.done}function c4({appConfig:n}){return n.appId}const zj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ta=new su("messaging","Messaging",zj);async function Bj(n,t){const e=await f4(n),i=bI(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(h4(n.appConfig),s)).json()}catch(c){throw Ta.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Ta.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Ta.create("token-subscribe-no-token");return o.token}async function Gj(n,t){const e=await f4(n),i=bI(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${h4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw Ta.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Ta.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Ta.create("token-update-no-token");return o.token}async function SI(n,t){const i={method:"DELETE",headers:await f4(n)};try{const o=await(await fetch(`${h4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw Ta.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw Ta.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function h4({projectId:n}){return`${Ij}/projects/${n}/registrations`}async function f4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function bI({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==vI&&(s.web.applicationPubKey=i),s}const Hj=10080*60*1e3;async function qj(n){const t=await Kj(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:qu(t.getKey("auth")),p256dh:qu(t.getKey("p256dh"))},i=await TI(n.firebaseDependencies);if(i){if(Yj(i.subscriptionOptions,e))return Date.now()>=i.createTime+Hj?jj(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await SI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return S6(n.firebaseDependencies,e)}else return S6(n.firebaseDependencies,e)}async function Fj(n){const t=await TI(n.firebaseDependencies);t&&(await SI(n.firebaseDependencies,t.token),await Uj(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function jj(n,t){try{const e=await Gj(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await u4(n.firebaseDependencies,i),e}catch(e){throw e}}async function S6(n,t){const i={token:await Bj(n,t),createTime:Date.now(),subscriptionOptions:t};return await u4(n,i),i.token}async function Kj(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oj(t)})}function Yj(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function b6(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Qj(t,n),Xj(t,n),Jj(t,n),t}function Qj(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function Xj(n,t){t.data&&(n.data=t.data)}function Jj(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function Wj(n){return typeof n=="object"&&!!n&&EI in n}function Zj(n){if(!n||!n.options)throw tT("App Configuration Object");if(!n.name)throw tT("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw tT(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function tT(n){return Ta.create("missing-app-config-values",{valueName:n})}let $j=class{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Zj(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}};async function AI(n){try{n.swRegistration=await navigator.serviceWorker.register(Rj,{scope:Cj}),n.swRegistration.update().catch(()=>{}),await tK(n.swRegistration)}catch(t){throw Ta.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function tK(n){return new Promise((t,e)=>{const i=setTimeout(()=>e(new Error(`Service worker not registered after ${v6} ms`)),v6),s=n.installing||n.waiting;n.active?(clearTimeout(i),t()):s?s.onstatechange=o=>{o.target?.state==="activated"&&(s.onstatechange=null,clearTimeout(i),t())}:(clearTimeout(i),e(new Error("No incoming service worker found.")))})}async function eK(n,t){if(!t&&!n.swRegistration&&await AI(n),!(!t&&n.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw Ta.create("invalid-sw-registration");n.swRegistration=t}}async function nK(n,t){t?n.vapidKey=t:n.vapidKey||(n.vapidKey=vI)}async function wI(n,t){if(!navigator)throw Ta.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ta.create("permission-blocked");return await nK(n,t?.vapidKey),await eK(n,t?.serviceWorkerRegistration),qj(n)}async function iK(n,t,e){const i=sK(t);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:e[EI],message_name:e[Nj],message_time:e[Dj],message_device_time:Math.floor(Date.now()/1e3)})}function sK(n){switch(n){case S_.NOTIFICATION_CLICKED:return"notification_open";case S_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function aK(n,t){const e=t.data;if(!e.isFirebaseMessaging)return;n.onMessageHandler&&e.messageType===S_.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(b6(e)):n.onMessageHandler.next(b6(e)));const i=e.data;Wj(i)&&i[xj]==="1"&&await iK(n,e.messageType,i)}const A6="@firebase/messaging",w6="0.12.23";const rK=n=>{const t=new $j(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>aK(t,e)),t},oK=n=>{const t=n.getProvider("messaging").getImmediate();return{getToken:i=>wI(t,i)}};function lK(){Sa(new Hi("messaging",rK,"PUBLIC")),Sa(new Hi("messaging-internal",oK,"PRIVATE")),Wi(A6,w6),Wi(A6,w6,"esm2020")}async function uK(n){if(!navigator)throw Ta.create("only-available-in-window");return n.swRegistration||await AI(n),Fj(n)}function cK(n,t){if(!navigator)throw Ta.create("only-available-in-window");return n.onMessageHandler=t,()=>{n.onMessageHandler=null}}async function hK(n,t){return n=jt(n),wI(n,t)}function fK(n){return n=jt(n),uK(n)}function dK(n,t){return n=jt(n),cK(n,t)}lK();const RI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mK="https://fcmregistrations.googleapis.com/v1",CI="FCM_MSG",pK="google.c.a.c_id",gK=3,_K=1;var Cv;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Cv||(Cv={}));var Iv;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Iv||(Iv={}));function Fu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yK(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const eT="fcm_token_details_db",vK=5,R6="fcm_token_object_Store";async function EK(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(eT))return null;let t=null;return(await Np(eT,vK,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(R6))return;const f=c.objectStore(R6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Fu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Fu(g.auth),p256dh:Fu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Fu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Fu(g.auth),p256dh:Fu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Fu(g.vapidKey)}}}}}})).close(),await Km(eT),await Km("fcm_vapid_details_db"),await Km("undefined"),TK(t)?t:null}function TK(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const SK="firebase-messaging-database",bK=1,Sd="firebase-messaging-store";let nT=null;function d4(){return nT||(nT=Np(SK,bK,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Sd)}})),nT}async function m4(n){const t=g4(n),i=await(await d4()).transaction(Sd).objectStore(Sd).get(t);if(i)return i;{const s=await EK(n.appConfig.senderId);if(s)return await p4(n,s),s}}async function p4(n,t){const e=g4(n),s=(await d4()).transaction(Sd,"readwrite");return await s.objectStore(Sd).put(t,e),await s.done,t}async function AK(n){const t=g4(n),i=(await d4()).transaction(Sd,"readwrite");await i.objectStore(Sd).delete(t),await i.done}function g4({appConfig:n}){return n.appId}const wK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},$l=new su("messaging","Messaging",wK);async function RK(n,t){const e=await y4(n),i=NI(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(_4(n.appConfig),s)).json()}catch(c){throw $l.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw $l.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw $l.create("token-subscribe-no-token");return o.token}async function CK(n,t){const e=await y4(n),i=NI(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${_4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw $l.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw $l.create("token-update-failed",{errorInfo:c})}if(!o.token)throw $l.create("token-update-no-token");return o.token}async function II(n,t){const i={method:"DELETE",headers:await y4(n)};try{const o=await(await fetch(`${_4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw $l.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw $l.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function _4({projectId:n}){return`${mK}/projects/${n}/registrations`}async function y4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function NI({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==RI&&(s.web.applicationPubKey=i),s}const IK=10080*60*1e3;async function NK(n){const t=await xK(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:Fu(t.getKey("auth")),p256dh:Fu(t.getKey("p256dh"))},i=await m4(n.firebaseDependencies);if(i){if(OK(i.subscriptionOptions,e))return Date.now()>=i.createTime+IK?DK(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await II(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return I6(n.firebaseDependencies,e)}else return I6(n.firebaseDependencies,e)}async function C6(n){const t=await m4(n.firebaseDependencies);t&&(await II(n.firebaseDependencies,t.token),await AK(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function DK(n,t){try{const e=await CK(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await p4(n.firebaseDependencies,i),e}catch(e){throw e}}async function I6(n,t){const i={token:await RK(n,t),createTime:Date.now(),subscriptionOptions:t};return await p4(n,i),i.token}async function xK(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yK(t)})}function OK(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function MK(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return PK(t,n),VK(t,n),kK(t,n),t}function PK(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function VK(n,t){t.data&&(n.data=t.data)}function kK(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function LK(n){return typeof n=="object"&&!!n&&pK in n}function UK(n){return new Promise(t=>{setTimeout(t,n)})}async function zK(n,t){const e=BK(t,await n.firebaseDependencies.installations.getId());GK(n,e,t.productId)}function BK(n,t){const e={};return n.from&&(e.project_number=n.from),n.fcmMessageId&&(e.message_id=n.fcmMessageId),e.instance_id=t,n.notification?e.message_type=Cv.DISPLAY_NOTIFICATION.toString():e.message_type=Cv.DATA_MESSAGE.toString(),e.sdk_platform=gK.toString(),e.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(e.collapse_key=n.collapse_key),e.event=_K.toString(),n.fcmOptions?.analytics_label&&(e.analytics_label=n.fcmOptions?.analytics_label),e}function GK(n,t,e){const i={};i.event_time_ms=Math.floor(Date.now()).toString(),i.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),e&&(i.compliance_data=HK(e)),n.logEvents.push(i)}function HK(n){return{privacy_context:{prequest:{origin_associated_product_id:n}}}}async function qK(n,t){const{newSubscription:e}=n;if(!e){await C6(t);return}const i=await m4(t.firebaseDependencies);await C6(t),t.vapidKey=i?.subscriptionOptions?.vapidKey??RI,await NK(t)}async function FK(n,t){const e=YK(n);if(!e)return;t.deliveryMetricsExportedToBigQueryEnabled&&await zK(t,e);const i=await DI();if(XK(i))return JK(i,e);if(e.notification&&await WK(KK(e)),!!t&&t.onBackgroundMessageHandler){const s=MK(e);typeof t.onBackgroundMessageHandler=="function"?await t.onBackgroundMessageHandler(s):t.onBackgroundMessageHandler.next(s)}}async function jK(n){const t=n.notification?.data?.[CI];if(t){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const e=ZK(t);if(!e)return;const i=new URL(e,self.location.href),s=new URL(self.location.origin);if(i.host!==s.host)return;let o=await QK(i);if(o?o=await o.focus():(o=await self.clients.openWindow(e),await UK(3e3)),!!o)return t.messageType=Iv.NOTIFICATION_CLICKED,t.isFirebaseMessaging=!0,o.postMessage(t)}function KK(n){const t={...n.notification};return t.data={[CI]:n},t}function YK({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function QK(n){const t=await DI();for(const e of t){const i=new URL(e.url,self.location.href);if(n.host===i.host)return e}return null}function XK(n){return n.some(t=>t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://"))}function JK(n,t){t.isFirebaseMessaging=!0,t.messageType=Iv.PUSH_RECEIVED;for(const e of n)e.postMessage(t)}function DI(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function WK(n){const{actions:t}=n,{maxActions:e}=Notification;return t&&e&&t.length>e&&console.warn(`This browser only supports ${e} actions. The remaining actions will not be displayed.`),self.registration.showNotification(n.title??"",n)}function ZK(n){const t=n.fcmOptions?.link??n.notification?.click_action;return t||(LK(n.data)?self.location.origin:null)}function $K(n){if(!n||!n.options)throw iT("App Configuration Object");if(!n.name)throw iT("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw iT(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function iT(n){return $l.create("missing-app-config-values",{valueName:n})}class tY{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=$K(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}}const eY=n=>{const t=new tY(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",e=>{e.waitUntil(FK(e,t))}),self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(qK(e,t))}),self.addEventListener("notificationclick",e=>{e.waitUntil(jK(e))}),t};function nY(){Sa(new Hi("messaging-sw",eY,"PUBLIC"))}function iY(n,t){if(self.document!==void 0)throw $l.create("only-available-in-sw");return n.onBackgroundMessageHandler=t,()=>{n.onBackgroundMessageHandler=null}}function sY(n,t){return n=jt(n),iY(n,t)}nY();const aY="@firebase/messaging-compat",rY="0.2.23";function oY(){return self&&"ServiceWorkerGlobalScope"in self?uY():lY()}function lY(){return typeof window<"u"&&id()&&sM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function uY(){return id()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class N6{constructor(t,e){this.app=t,this._delegate=e,this.app=t,this._delegate=e}async getToken(t){return hK(this._delegate,t)}async deleteToken(){return fK(this._delegate)}onMessage(t){return dK(this._delegate,t)}onBackgroundMessage(t){return sY(this._delegate,t)}}const cY=n=>self&&"ServiceWorkerGlobalScope"in self?new N6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new N6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),hY={isSupported:oY};function fY(){Eo.INTERNAL.registerComponent(new Hi("messaging-compat",cY,"PUBLIC").setServiceProps(hY))}fY();Eo.registerVersion(aY,rY);const dY="type.googleapis.com/google.protobuf.Int64Value",mY="type.googleapis.com/google.protobuf.UInt64Value";function xI(n,t){const e={};for(const i in n)n.hasOwnProperty(i)&&(e[i]=t(n[i]));return e}function Nv(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(t=>Nv(t));if(typeof n=="function"||typeof n=="object")return xI(n,t=>Nv(t));throw new Error("Data cannot be encoded in JSON: "+n)}function Rp(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case dY:case mY:{const t=Number(n.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+n);return t}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(t=>Rp(t)):typeof n=="function"||typeof n=="object"?xI(n,t=>Rp(t)):n}const OI="functions";const D6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nr extends Gi{constructor(t,e,i){super(`${OI}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,nr.prototype)}}function pY(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Dv(n,t){let e=pY(n),i=e,s;try{const o=t&&t.error;if(o){const c=o.status;if(typeof c=="string"){if(!D6[c])return new nr("internal","internal");e=D6[c],i=c}const f=o.message;typeof f=="string"&&(i=f),s=o.details,s!==void 0&&(s=Rp(s))}}catch{}return e==="ok"?null:new nr(e,i,s)}class gY{constructor(t,e,i,s){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Cn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:s}}}const x6="us-central1",_Y=/^data: (.*?)(?:\n|$)/;function yY(n){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new nr("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{t&&clearTimeout(t)}}}let vY=class{constructor(t,e,i,s,o=x6,c=(...f)=>fetch(...f)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new gY(t,e,i,s),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(o);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=x6}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}};function EY(n,t,e){const i=iu(t);n.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(Uv(n.emulatorOrigin+"/backends"),zv("Functions",!0))}function TY(n,t,e){const i=s=>AY(n,t,s,e||{});return i.stream=(s,o)=>wY(n,t,s,o),i}function SY(n,t,e){const i=s=>VI(n,t,s,e||{});return i.stream=(s,o)=>kI(n,t,s,o||{}),i}function MI(n){return n.emulatorOrigin&&iu(n.emulatorOrigin)?"include":void 0}async function bY(n,t,e,i,s){e["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(t),headers:e,credentials:MI(s)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function PI(n,t){const e={},i=await n.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function AY(n,t,e,i){const s=n._url(t);return VI(n,s,e,i)}async function VI(n,t,e,i){e=Nv(e);const s={data:e},o=await PI(n,i),c=i.timeout||7e4,f=yY(c),m=await Promise.race([bY(t,s,o,n.fetchImpl,n),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new nr("cancelled","Firebase Functions instance was deleted.");const g=Dv(m.status,m.json);if(g)throw g;if(!m.json)throw new nr("internal","Response is not valid JSON object.");let E=m.json.data;if(typeof E>"u"&&(E=m.json.result),typeof E>"u")throw new nr("internal","Response is missing data field.");return{data:Rp(E)}}function wY(n,t,e,i){const s=n._url(t);return kI(n,s,e,i||{})}async function kI(n,t,e,i){e=Nv(e);const s={data:e},o=await PI(n,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await n.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:i?.signal,credentials:MI(n)})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const D=new nr("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const N=Dv(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let f,m;const g=new Promise((A,N)=>{f=A,m=N});i?.signal?.addEventListener("abort",()=>{const A=new nr("cancelled","Request was cancelled.");m(A)});const E=c.body.getReader(),b=RY(E,f,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const A=b.getReader();return{async next(){const{value:N,done:D}=await A.read();return{value:N,done:D}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:g}}function RY(n,t,e,i){const s=(c,f)=>{const m=c.match(_Y);if(!m)return;const g=m[1];try{const E=JSON.parse(g);if("result"in E){t(Rp(E.result));return}if("message"in E){f.enqueue(Rp(E.message));return}if("error"in E){const b=Dv(0,E);f.error(b),e(b);return}}catch(E){if(E instanceof nr){f.error(E),e(E);return}}},o=new TextDecoder;return new ReadableStream({start(c){let f="";return m();async function m(){if(i?.aborted){const g=new nr("cancelled","Request was cancelled");return c.error(g),e(g),Promise.resolve()}try{const{value:g,done:E}=await n.read();if(E){f.trim()&&s(f.trim(),c),c.close();return}if(i?.aborted){const A=new nr("cancelled","Request was cancelled");c.error(A),e(A),await n.cancel();return}f+=o.decode(g,{stream:!0});const b=f.split(`
`);f=b.pop()||"";for(const A of b)A.trim()&&s(A.trim(),c);return m()}catch(g){const E=g instanceof nr?g:Dv(0,null);c.error(E),e(E)}}},cancel(){return n.cancel()}})}const O6="@firebase/functions",M6="0.13.1";const CY="auth-internal",IY="app-check-internal",NY="messaging-internal";function DY(n){const t=(e,{instanceIdentifier:i})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider(CY),c=e.getProvider(NY),f=e.getProvider(IY);return new vY(s,o,c,f,i)};Sa(new Hi(OI,t,"PUBLIC").setMultipleInstances(!0)),Wi(O6,M6,n),Wi(O6,M6,"esm2020")}function P6(n,t,e){EY(jt(n),t,e)}function xY(n,t,e){return TY(jt(n),t,e)}function OY(n,t,e){return SY(jt(n),t,e)}DY();const MY="@firebase/functions-compat",PY="0.4.1";class LI{constructor(t,e){this.app=t,this._delegate=e,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(t,e){return xY(this._delegate,t,e)}httpsCallableFromURL(t,e){return OY(this._delegate,t,e)}useFunctionsEmulator(t){const e=t.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(e==null)throw new Gi("functions","No origin provided to useFunctionsEmulator()");if(e[2]==null)throw new Gi("functions","Port missing in origin provided to useFunctionsEmulator()");return P6(this._delegate,e[1],Number(e[2]))}useEmulator(t,e){return P6(this._delegate,t,e)}}const VY="us-central1",kY=(n,{instanceIdentifier:t})=>{const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("functions").getImmediate({identifier:t??VY});return new LI(e,i)};function LY(){const n={Functions:LI};Eo.INTERNAL.registerComponent(new Hi("functions-compat",kY,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}LY();Eo.registerVersion(MY,PY);const UY={apiKey:"AIzaSyCZ2yeJJ34VwYAmQnFCEv72Q1uDFFGKKjQ",authDomain:"ancb-painel-db.firebaseapp.com",projectId:"ancb-painel-db",storageBucket:"ancb-painel-db.appspot.com",messagingSenderId:"792900234002",appId:"1:792900234002:web:2a37004deb046cb8f261cb",measurementId:"G-VCMEKP1XP4"},K_=Eo.initializeApp(UY),zY=K_.firestore();K_.auth();K_.storage();K_.functions();let BY=null;try{typeof window<"u"&&"serviceWorker"in navigator&&Eo.messaging.isSupported()&&(BY=K_.messaging())}catch(n){console.warn("Firebase Messaging not supported in this environment",n)}const vh={courtHalf:"https://i.imgur.com/SIdCxjw.png",courtFull:"https://i.imgur.com/cw3dO3o.png",logo:"https://i.imgur.com/sfO9ILj.png",defaultAvatar:"https://ui-avatars.com/api/?background=0D8ABC&color=fff&rounded=true&bold=true&name="},GY=["#ff0000","#000000","#ffffff","#ffff00","#00ff00"],xv=.044,HY=()=>{const n=[1,2,3,4,5].map((e,i)=>({id:`rival-${e}`,type:"rival",numero:e,xRatio:xv,yRatio:.07+i*.09})),t=[1,2,3,4,5].map((e,i)=>({id:`generic-${e}`,type:"generic",numero:e,xRatio:xv,yRatio:.52+i*.09}));return[...n,...t]},qY=({token:n,canvasW:t,canvasH:e,onDragEnd:i,onSelect:s,isSelected:o})=>{const[c,f]=he.useState(null),[m,g]=he.useState("loading");he.useEffect(()=>{if(n.type!=="ancb"){g("error");return}const j=new window.Image,X=n.foto||`${vh.defaultAvatar}${n.nome}`;X.startsWith("data:")?j.src=X:(j.crossOrigin="Anonymous",j.src=`${X}${X.includes("?")?"&":"?"}t=${Date.now()}`),j.onload=()=>{j.width>0?(f(j),g("loaded")):g("error")},j.onerror=()=>g("error")},[n.foto,n.nome,n.type]);const E=n.xRatio*t,b=n.yRatio*e,A=22,N=n.type==="rival",D=n.type==="generic",L=N?"#ef4444":D?"#1e3a5f":"#062553",U=N?"#991b1b":D?"#0f1f33":"#041b3d",G=N||D||m!=="loaded";return Ct.jsxs(SO,{draggable:!0,x:E,y:b,onDragEnd:j=>i(n.id,j.target.x()/t,j.target.y()/e),onClick:j=>{j.cancelBubble=!0,s(n.id)},onTap:j=>{j.cancelBubble=!0,s(n.id)},children:[Ct.jsx(wE,{radius:A,fill:"black",opacity:.3,offsetX:-2,offsetY:-2}),G&&Ct.jsx(wE,{radius:A,fill:L}),!G&&c&&Ct.jsx(pT,{image:c,width:A*2,height:A*2,x:-A,y:-A,cornerRadius:A}),Ct.jsx(wE,{radius:A,stroke:o?"#F27405":U,strokeWidth:o?4:2,fillEnabled:!1}),G&&Ct.jsx(jA,{text:N||D?n.numero?.toString():n.nome?.charAt(0).toUpperCase(),fontSize:20,fontStyle:"bold",fill:"white",align:"center",verticalAlign:"middle",offsetX:6,offsetY:8,listening:!1}),n.type==="ancb"&&n.nome&&Ct.jsx(jA,{text:n.nome.split(" ")[0],y:A+5,fontSize:10,fill:"white",align:"center",width:80,offsetX:40,shadowColor:"black",shadowBlur:3,listening:!1})]})},FY=()=>{const n=he.useRef(null),t=he.useRef(null),[e,i]=he.useState({width:0,height:0}),[s,o]=he.useState({lines:null,logo:null}),[c,f]=he.useState([]),[m,g]=he.useState(!1),[E,b]=he.useState(null),[A,N]=he.useState([{courtType:"half",tokens:HY(),lines:[]}]),[D,L]=he.useState(0),U=A[D],G=U.tokens,j=U.lines,X=U.courtType,Z=e.height>e.width,[gt,lt]=he.useState("#ff0000"),[V,M]=he.useState(!1),[k,q]=he.useState(!1),[H,K]=he.useState({top:0,right:0}),z=he.useRef(null),Ft=he.useRef(!1),[Ut,W]=he.useState(!1),[St,Et]=he.useState(!1),[zt,Qt]=he.useState(""),[F,ft]=he.useState([]);he.useEffect(()=>{(async()=>{try{const Ge=(await w8(_b(zY,"jogadores"))).docs.map(ke=>({id:ke.id,...ke.data()}));f(Ge.sort((ke,Ce)=>ke.nome.localeCompare(Ce.nome)))}catch(ne){console.error(ne)}})();const Ot=localStorage.getItem("ancb_plays");if(Ot)try{ft(JSON.parse(Ot))}catch{}},[]),he.useEffect(()=>{const yt=new window.Image;yt.crossOrigin="Anonymous",yt.src=X==="half"?vh.courtHalf:vh.courtFull;const Ot=new window.Image;Ot.crossOrigin="Anonymous",Ot.src=vh.logo,Promise.all([new Promise(ne=>{yt.onload=ne,yt.onerror=ne}),new Promise(ne=>{Ot.onload=ne,Ot.onerror=ne})]).then(()=>o({lines:yt,logo:Ot}))},[X]),he.useEffect(()=>{const yt=()=>{if(n.current){const Ot=n.current.offsetWidth,ne=n.current.offsetHeight,Ge=ne>Ot;i({width:Ge?Ot:Ot-72,height:Ge?ne-60:ne})}};return yt(),window.addEventListener("resize",yt),window.addEventListener("orientationchange",()=>setTimeout(yt,200)),()=>{window.removeEventListener("resize",yt),window.removeEventListener("orientationchange",yt)}},[]),he.useEffect(()=>{const yt=()=>{k&&q(!1)};return document.addEventListener("mousedown",yt),()=>document.removeEventListener("mousedown",yt)},[k]);const At=yt=>{N(Ot=>{const ne=[...Ot];return ne[D]={...ne[D],...yt},ne})},Ht=yt=>{At({courtType:yt});const Ot=new window.Image;Ot.crossOrigin="Anonymous",Ot.src=yt==="half"?vh.courtHalf:vh.courtFull,Ot.onload=()=>o(ne=>({...ne,lines:Ot}))},ee=yt=>{yt>=0&&yt<A.length&&(L(yt),b(null))},ae=()=>{const yt=JSON.parse(JSON.stringify(G)),Ot={courtType:X,tokens:yt,lines:[]};N(ne=>{const Ge=[...ne,Ot];return L(Ge.length-1),Ge}),b(null)},Te=()=>{A.length<=1||confirm("Deseja apagar este frame?")&&N(yt=>{const Ot=yt.filter((Ge,ke)=>ke!==D),ne=Math.min(D,Ot.length-1);return L(ne),Ot})},vn=yt=>{const Ot=G.filter(ms=>ms.type==="ancb");if(Ot.some(ms=>ms.nome===yt.nome))return;const ne=Ot.length,Ge=ne+1,ke=.1,Ce=(Ge-1)*ke,yi=G.map(ms=>{if(ms.type!=="ancb")return ms;const el=Ot.findIndex(au=>au.id===ms.id);return{...ms,xRatio:.5-Ce/2+el*ke,yRatio:.07}}),xn={id:`${yt.id}-${Date.now()}`,type:"ancb",nome:yt.nome,foto:yt.foto??null,xRatio:.5-Ce/2+ne*ke,yRatio:.07};At({tokens:[...yi,xn]})},Ve=(yt,Ot,ne)=>{const Ge=Math.max(.02,Math.min(.98,Ot)),ke=Math.max(.02,Math.min(.98,ne));At({tokens:G.map(Ce=>Ce.id===yt?{...Ce,xRatio:Ge,yRatio:ke}:Ce)})},Nr=()=>{if(E){if(E.startsWith("rival-")){const yt=parseInt(E.split("-")[1]);At({tokens:G.map(Ot=>Ot.id===E?{...Ot,xRatio:xv,yRatio:.07+(yt-1)*.09}:Ot)})}else if(E.startsWith("generic-")){const yt=parseInt(E.split("-")[1]);At({tokens:G.map(Ot=>Ot.id===E?{...Ot,xRatio:xv,yRatio:.52+(yt-1)*.09}:Ot)})}else At({tokens:G.filter(yt=>yt.id!==E)});b(null)}},To=(yt,Ot)=>{for(const Ge of G){const ke=Ge.xRatio*Zn-yt,Ce=Ge.yRatio*Ci-Ot;if(Math.sqrt(ke*ke+Ce*Ce)<=30)return Ge.id}return null},Os=yt=>{const Ot=yt.target.getStage()?.getPointerPosition();if(!Ot)return;const ne=Ot,Ge=To(ne.x,ne.y);if(z.current={tokenId:Ge},Ft.current=!1,!Ge){Ft.current=!0,M(!0);const ke={tool:"pen",color:gt,pointRatios:[ne.x/Zn,ne.y/Ci]};At({lines:[...j,ke]})}},cs=yt=>{if(!Ft.current||!V)return;const Ot=yt.target.getStage()?.getPointerPosition();Ot&&N(ne=>{const Ge=[...ne],ke={...Ge[D]},Ce=[...ke.lines],yi={...Ce[Ce.length-1]};return yi.pointRatios=[...yi.pointRatios,Ot.x/Zn,Ot.y/Ci],Ce[Ce.length-1]=yi,ke.lines=Ce,Ge[D]=ke,Ge})},hs=()=>{M(!1),z.current=null,Ft.current=!1},ir=()=>At({lines:j.slice(0,-1)}),es=()=>At({lines:[]}),fs=yt=>{if(yt.stopPropagation(),t.current){const Ot=t.current.getBoundingClientRect();K({top:Ot.top,right:window.innerWidth-Ot.left+8})}q(Ot=>!Ot)},Dr=()=>{if(!zt.trim())return alert("Digite um nome!");const Ot=[{id:Date.now().toString(),name:zt,frames:A,createdAt:Date.now()},...F];ft(Ot),localStorage.setItem("ancb_plays",JSON.stringify(Ot)),W(!1),Qt(""),alert("Salvo!")},En=yt=>{N(yt.frames),L(0),Et(!1)},ln=(yt,Ot)=>{if(Ot.stopPropagation(),confirm("Apagar jogada?")){const ne=F.filter(Ge=>Ge.id!==yt);ft(ne),localStorage.setItem("ancb_plays",JSON.stringify(ne))}},Zn=Z?e.height:e.width,Ci=Z?e.width:e.height;let en=0,pn=0,$s=0,Aa=0,ds={w:0,h:0,x:0,y:0};if(s.lines&&Zn>0){const yt=Math.min(Zn*.99/s.lines.width,Ci*.99/s.lines.height);if(en=s.lines.width*yt,pn=s.lines.height*yt,$s=(Zn-en)/2,Aa=(Ci-pn)/2,s.logo){const Ot=en*.22/s.logo.width;ds={w:s.logo.width*Ot,h:s.logo.height*Ot,x:$s+(en-s.logo.width*Ot)/2,y:Aa+(pn-s.logo.height*Ot)/2}}}const ta=j.map(yt=>({...yt,points:yt.pointRatios.reduce((Ot,ne,Ge)=>(Ot.push(Ge%2===0?ne*Zn:ne*Ci),Ot),[])}));return Ct.jsxs("div",{className:"flex flex-col bg-slate-900 text-white font-sans",style:{userSelect:"none",WebkitUserSelect:"none",width:"100vw",height:"100vh",overflow:"hidden",maxWidth:"100vw",maxHeight:"100vh"},children:[Ct.jsxs("header",{className:"px-3 py-2 flex justify-between items-center bg-[#062553] border-b-4 border-[#041b3d] shadow-lg shrink-0 z-20",style:{height:56},children:[Ct.jsxs("div",{className:"flex items-center gap-2",children:[Ct.jsx("img",{src:vh.logo,alt:"Logo",className:"w-9 h-9 object-contain drop-shadow-md"}),Ct.jsxs("div",{children:[Ct.jsx("h1",{className:"font-bold text-sm leading-tight",children:"Prancheta ANCB"}),Ct.jsx("p",{className:"text-[10px] text-gray-300",children:"Modo Offline"})]})]}),Ct.jsxs("div",{className:"flex items-center gap-2",children:[Ct.jsxs("button",{onClick:()=>Et(!0),className:"bg-slate-700 hover:bg-slate-600 px-2.5 py-1.5 rounded-lg text-white font-bold text-xs flex items-center gap-1 transition-colors",children:[Ct.jsx(YA,{size:15}),Ct.jsx("span",{children:"Jogadas"})]}),Ct.jsxs("button",{onClick:()=>W(!0),className:"bg-green-600 hover:bg-green-700 px-2.5 py-1.5 rounded-lg text-white font-bold text-xs flex items-center gap-1 shadow-lg transition-colors",children:[Ct.jsx(QA,{size:15}),Ct.jsx("span",{children:"Salvar"})]}),E&&Ct.jsx("button",{onClick:Nr,className:"bg-red-600 p-1.5 rounded-lg text-white shadow animate-pulse",children:Ct.jsx(RE,{size:16})}),Ct.jsx("button",{onClick:()=>g(!0),className:"bg-[#F27405] hover:bg-orange-600 text-white px-2.5 py-1.5 rounded-lg font-bold flex items-center gap-1",children:Ct.jsx(XA,{size:16})})]})]}),Ct.jsxs("main",{className:"flex-1 w-full relative bg-slate-800 overflow-hidden",ref:n,style:{display:"flex",flexDirection:Z?"column":"row"},children:[Ct.jsx("div",{className:"flex-1 relative overflow-hidden",children:e.width>0&&Ct.jsx(wO,{width:Zn,height:Ci,onMouseDown:Os,onMousemove:cs,onMouseup:hs,onTouchStart:Os,onTouchMove:cs,onTouchEnd:hs,style:{cursor:"crosshair",touchAction:"none",display:"block",...Z?{transformOrigin:"top left",transform:"rotate(90deg) translateY(-100%)",position:"absolute",top:0,left:0}:{}},onClick:yt=>{yt.target===yt.target.getStage()&&b(null)},children:Ct.jsxs(TO,{children:[Ct.jsx(bO,{x:$s,y:Aa,width:en,height:pn,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:en,y:pn},fillLinearGradientColorStops:[0,"#2574d1",1,"#1c64b6"],cornerRadius:5}),s.logo&&Ct.jsx(pT,{image:s.logo,width:ds.w,height:ds.h,x:ds.x,y:ds.y,opacity:.3,listening:!1}),s.lines&&Ct.jsx(pT,{image:s.lines,width:en,height:pn,x:$s,y:Aa,listening:!1}),ta.map((yt,Ot)=>Ct.jsx(AO,{points:yt.points,stroke:yt.color,strokeWidth:4,tension:.5,lineCap:"round",lineJoin:"round",opacity:.9,listening:!1},Ot)),G.map(yt=>Ct.jsx(qY,{token:yt,canvasW:Zn,canvasH:Ci,onDragEnd:Ve,onSelect:b,isSelected:E===yt.id},yt.id))]})})}),Ct.jsxs("div",{className:"bg-gray-900 z-30 shrink-0 flex items-center gap-2",style:Z?{flexDirection:"row",width:"100%",height:60,borderTop:"1px solid #374151",paddingLeft:8,paddingRight:8,overflowX:"auto"}:{flexDirection:"column",width:72,height:"100%",borderLeft:"1px solid #374151",paddingTop:12,paddingBottom:12,overflowY:"auto"},children:[Ct.jsx("button",{ref:t,onClick:fs,className:"p-2.5 rounded-xl bg-gray-700 hover:bg-gray-600 shadow-lg transition-all shrink-0",title:"Cor da caneta",children:Ct.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white",style:{backgroundColor:gt}})}),Ct.jsx("button",{onClick:ir,className:"p-2.5 rounded-xl text-gray-400 hover:bg-gray-800 shrink-0",title:"Desfazer",children:Ct.jsx(zO,{size:20})}),Ct.jsx("button",{onClick:es,className:"p-2.5 rounded-xl text-gray-400 hover:text-red-500 shrink-0",title:"Limpar",children:Ct.jsx(OO,{size:20})}),Ct.jsxs("div",{className:`flex gap-1 items-center shrink-0 ${Z?"flex-row":"flex-col w-full px-2"}`,children:[Ct.jsx("button",{onClick:()=>Ht("half"),className:`text-[9px] font-bold py-1 px-2 rounded transition-all ${X==="half"?"bg-[#F27405] text-white":"bg-gray-700 text-gray-300"}`,children:"1/2"}),Ct.jsx("button",{onClick:()=>Ht("full"),className:`text-[9px] font-bold py-1 px-2 rounded transition-all ${X==="full"?"bg-[#F27405] text-white":"bg-gray-700 text-gray-300"}`,children:"Full"})]}),Ct.jsx("div",{className:Z?"w-px h-8 bg-gray-700 mx-1 shrink-0":"h-px w-10 bg-gray-700 shrink-0"}),Ct.jsx("div",{className:"flex gap-2 items-center",style:Z?{flexDirection:"row",overflowX:"auto",maxWidth:200}:{flexDirection:"column",overflowY:"auto",maxHeight:"40vh",width:"100%",padding:"0 8px"},children:A.map((yt,Ot)=>Ct.jsxs("button",{onClick:()=>ee(Ot),className:`relative rounded-lg font-bold text-xs flex flex-col items-center justify-center transition-all border-2 shrink-0
                  ${Ot===D?"bg-[#F27405] border-[#F27405] text-white shadow-lg":"bg-white/10 border-transparent text-gray-300 hover:bg-white/20"}`,style:{width:40,height:40},children:[Ct.jsx("span",{children:Ot+1}),Ct.jsx("span",{className:"text-[7px] opacity-70",children:yt.courtType==="half"?"1/2":"Full"}),yt.lines.length>0&&Ct.jsx("div",{className:"absolute bottom-0.5 w-1 h-1 bg-white rounded-full opacity-50"})]},Ot))}),Ct.jsx("button",{onClick:ae,className:"bg-blue-600 hover:bg-blue-500 p-2.5 rounded-full text-white shadow-md transition-transform active:scale-95 shrink-0",title:"Novo Frame",children:Ct.jsx(VO,{size:20})}),A.length>1&&Ct.jsx("button",{onClick:Te,className:"text-red-400 hover:text-red-300 hover:bg-white/10 p-1.5 rounded-lg transition-colors shrink-0",title:"Apagar frame",children:Ct.jsx(RE,{size:17})})]})]}),k&&Ct.jsx("div",{className:"fixed flex flex-col gap-2 bg-gray-800 p-3 rounded-2xl shadow-2xl border border-gray-600",style:{top:H.top,right:H.right,zIndex:9999},onMouseDown:yt=>yt.stopPropagation(),children:GY.map(yt=>Ct.jsx("button",{onClick:()=>{lt(yt),q(!1)},className:"w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 active:scale-95",style:{backgroundColor:yt,borderColor:gt===yt?"#F27405":"rgba(255,255,255,0.2)",boxShadow:gt===yt?"0 0 0 2px #F27405":"none"}},yt))}),Ut&&Ct.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:Ct.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-sm shadow-2xl border border-gray-700",children:[Ct.jsxs("h3",{className:"text-xl font-bold mb-4 text-white flex items-center gap-2",children:[Ct.jsx(QA,{size:20,className:"text-green-500"})," Salvar Jogada"]}),Ct.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nome da jogada",className:"w-full p-3 rounded-lg bg-gray-700 border border-gray-600 text-white mb-4 outline-none focus:ring-2 focus:ring-[#F27405]",value:zt,onChange:yt=>Qt(yt.target.value),onKeyDown:yt=>yt.key==="Enter"&&Dr()}),Ct.jsxs("div",{className:"flex gap-2 justify-end",children:[Ct.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 text-gray-400 hover:text-gray-200",children:"Cancelar"}),Ct.jsx("button",{onClick:Dr,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold",children:"Salvar"})]})]})}),St&&Ct.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:Ct.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md shadow-2xl border border-gray-700 flex flex-col",style:{maxHeight:"80vh"},children:[Ct.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[Ct.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[Ct.jsx(YA,{size:20,className:"text-[#F27405]"})," Minhas Jogadas"]}),Ct.jsx("button",{onClick:()=>Et(!1),className:"text-gray-400 hover:text-white",children:Ct.jsx(JA,{size:24})})]}),Ct.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:F.length===0?Ct.jsx("p",{className:"text-center py-8 text-gray-500",children:"Nenhuma jogada salva."}):Ct.jsx("div",{className:"space-y-2",children:F.map(yt=>Ct.jsxs("div",{onClick:()=>En(yt),className:"bg-gray-700/50 hover:bg-gray-700 p-3 rounded-lg cursor-pointer border border-transparent hover:border-[#F27405] transition-all group flex justify-between items-center text-white",children:[Ct.jsxs("div",{children:[Ct.jsx("p",{className:"font-bold",children:yt.name}),Ct.jsxs("p",{className:"text-xs text-gray-400",children:[yt.frames.length," frame",yt.frames.length>1?"s":""]})]}),Ct.jsx("button",{onClick:Ot=>ln(yt.id,Ot),className:"p-2 text-gray-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:Ct.jsx(RE,{size:18})})]},yt.id))})})]})}),m&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>g(!1)}),Ct.jsxs("div",{className:"fixed top-0 right-0 h-full bg-gray-900 shadow-2xl z-50 flex flex-col border-l border-gray-700",style:{width:280},children:[Ct.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-[#062553]",children:[Ct.jsxs("h2",{className:"font-bold text-white text-base flex items-center gap-2",children:[Ct.jsx(XA,{size:18,className:"text-[#F27405]"})," Elenco ANCB"]}),Ct.jsx("button",{onClick:()=>g(!1),className:"text-gray-300 hover:text-white",children:Ct.jsx(JA,{size:22})})]}),Ct.jsx("p",{className:"text-xs text-gray-400 px-4 pt-3 pb-1",children:"Toque para adicionar. Feche quando terminar."}),Ct.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:Ct.jsx("div",{className:"grid gap-1",children:c.map(yt=>{const Ot=G.some(ne=>ne.type==="ancb"&&ne.nome===yt.nome);return Ct.jsxs("button",{onClick:()=>vn(yt),disabled:Ot,className:`flex items-center gap-3 p-2 rounded-lg transition-colors text-left w-full ${Ot?"opacity-40":"hover:bg-gray-800"}`,children:[Ct.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden border-2 border-[#062553] bg-gray-700 shrink-0",children:Ct.jsx("img",{src:yt.foto||`${vh.defaultAvatar}${yt.nome}`,alt:yt.nome,className:"w-full h-full object-cover"})}),Ct.jsxs("div",{children:[Ct.jsx("p",{className:"font-bold text-sm text-white",children:yt.nome}),Ot&&Ct.jsx("p",{className:"text-[10px] text-green-400",children:" Na quadra"})]})]},yt.id)})})})]})]})]})};R7.createRoot(document.getElementById("root")).render(Ct.jsx(he.StrictMode,{children:Ct.jsx(FY,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function P6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rE={exports:{}},e0={};var eA;function _7(){if(eA)return e0;eA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:o}}return e0.Fragment=t,e0.jsx=e,e0.jsxs=e,e0}var nA;function y7(){return nA||(nA=1,rE.exports=_7()),rE.exports}var At=y7(),oE={exports:{}},de={};var iA;function v7(){if(iA)return de;iA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function N(q){return q===null||typeof q!="object"?null:(q=A&&q[A]||q["@@iterator"],typeof q=="function"?q:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function H(q,dt,Nt){this.props=q,this.context=dt,this.refs=U,this.updater=Nt||D}H.prototype.isReactComponent={},H.prototype.setState=function(q,dt){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,dt,"setState")},H.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function Y(){}Y.prototype=H.prototype;function X(q,dt,Nt){this.props=q,this.context=dt,this.refs=U,this.updater=Nt||D}var Z=X.prototype=new Y;Z.constructor=X,V(Z,H.prototype),Z.isPureReactComponent=!0;var pt=Array.isArray;function lt(){}var k={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function L(q,dt,Nt){var Gt=Nt.ref;return{$$typeof:n,type:q,key:dt,ref:Gt!==void 0?Gt:null,props:Nt}}function j(q,dt){return L(q.type,dt,q.props)}function G(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function F(q){var dt={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Nt){return dt[Nt]})}var z=/\/+/g;function Ht(q,dt){return typeof q=="object"&&q!==null&&q.key!=null?F(""+q.key):dt.toString(36)}function Lt(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(lt,lt):(q.status="pending",q.then(function(dt){q.status==="pending"&&(q.status="fulfilled",q.value=dt)},function(dt){q.status==="pending"&&(q.status="rejected",q.reason=dt)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function W(q,dt,Nt,Gt,ee){var ie=typeof q;(ie==="undefined"||ie==="boolean")&&(q=null);var Te=!1;if(q===null)Te=!0;else switch(ie){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(q.$$typeof){case n:case t:Te=!0;break;case E:return Te=q._init,W(Te(q._payload),dt,Nt,Gt,ee)}}if(Te)return ee=ee(q),Te=Gt===""?"."+Ht(q,0):Gt,pt(ee)?(Nt="",Te!=null&&(Nt=Te.replace(z,"$&/")+"/"),W(ee,dt,Nt,"",function($a){return $a})):ee!=null&&(G(ee)&&(ee=j(ee,Nt+(ee.key==null||q&&q.key===ee.key?"":(""+ee.key).replace(z,"$&/")+"/")+Te)),dt.push(ee)),1;Te=0;var mn=Gt===""?".":Gt+":";if(pt(q))for(var Ne=0;Ne<q.length;Ne++)Gt=q[Ne],ie=mn+Ht(Gt,Ne),Te+=W(Gt,dt,Nt,ie,ee);else if(Ne=N(q),typeof Ne=="function")for(q=Ne.call(q),Ne=0;!(Gt=q.next()).done;)Gt=Gt.value,ie=mn+Ht(Gt,Ne++),Te+=W(Gt,dt,Nt,ie,ee);else if(ie==="object"){if(typeof q.then=="function")return W(Lt(q),dt,Nt,Gt,ee);throw dt=String(q),Error("Objects are not valid as a React child (found: "+(dt==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":dt)+"). If you meant to render a collection of children, use an array instead.")}return Te}function Et(q,dt,Nt){if(q==null)return q;var Gt=[],ee=0;return W(q,Gt,"","",function(ie){return dt.call(Nt,ie,ee++)}),Gt}function vt(q){if(q._status===-1){var dt=q._result;dt=dt(),dt.then(function(Nt){(q._status===0||q._status===-1)&&(q._status=1,q._result=Nt)},function(Nt){(q._status===0||q._status===-1)&&(q._status=2,q._result=Nt)}),q._status===-1&&(q._status=0,q._result=dt)}if(q._status===1)return q._result.default;throw q._result}var Ut=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var dt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(dt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Kt={map:Et,forEach:function(q,dt,Nt){Et(q,function(){dt.apply(this,arguments)},Nt)},count:function(q){var dt=0;return Et(q,function(){dt++}),dt},toArray:function(q){return Et(q,function(dt){return dt})||[]},only:function(q){if(!G(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return de.Activity=b,de.Children=Kt,de.Component=H,de.Fragment=e,de.Profiler=s,de.PureComponent=X,de.StrictMode=i,de.Suspense=m,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,de.__COMPILER_RUNTIME={__proto__:null,c:function(q){return k.H.useMemoCache(q)}},de.cache=function(q){return function(){return q.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(q,dt,Nt){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Gt=V({},q.props),ee=q.key;if(dt!=null)for(ie in dt.key!==void 0&&(ee=""+dt.key),dt)!M.call(dt,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&dt.ref===void 0||(Gt[ie]=dt[ie]);var ie=arguments.length-2;if(ie===1)Gt.children=Nt;else if(1<ie){for(var Te=Array(ie),mn=0;mn<ie;mn++)Te[mn]=arguments[mn+2];Gt.children=Te}return L(q.type,ee,Gt)},de.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},de.createElement=function(q,dt,Nt){var Gt,ee={},ie=null;if(dt!=null)for(Gt in dt.key!==void 0&&(ie=""+dt.key),dt)M.call(dt,Gt)&&Gt!=="key"&&Gt!=="__self"&&Gt!=="__source"&&(ee[Gt]=dt[Gt]);var Te=arguments.length-2;if(Te===1)ee.children=Nt;else if(1<Te){for(var mn=Array(Te),Ne=0;Ne<Te;Ne++)mn[Ne]=arguments[Ne+2];ee.children=mn}if(q&&q.defaultProps)for(Gt in Te=q.defaultProps,Te)ee[Gt]===void 0&&(ee[Gt]=Te[Gt]);return L(q,ie,ee)},de.createRef=function(){return{current:null}},de.forwardRef=function(q){return{$$typeof:f,render:q}},de.isValidElement=G,de.lazy=function(q){return{$$typeof:E,_payload:{_status:-1,_result:q},_init:vt}},de.memo=function(q,dt){return{$$typeof:g,type:q,compare:dt===void 0?null:dt}},de.startTransition=function(q){var dt=k.T,Nt={};k.T=Nt;try{var Gt=q(),ee=k.S;ee!==null&&ee(Nt,Gt),typeof Gt=="object"&&Gt!==null&&typeof Gt.then=="function"&&Gt.then(lt,Ut)}catch(ie){Ut(ie)}finally{dt!==null&&Nt.types!==null&&(dt.types=Nt.types),k.T=dt}},de.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},de.use=function(q){return k.H.use(q)},de.useActionState=function(q,dt,Nt){return k.H.useActionState(q,dt,Nt)},de.useCallback=function(q,dt){return k.H.useCallback(q,dt)},de.useContext=function(q){return k.H.useContext(q)},de.useDebugValue=function(){},de.useDeferredValue=function(q,dt){return k.H.useDeferredValue(q,dt)},de.useEffect=function(q,dt){return k.H.useEffect(q,dt)},de.useEffectEvent=function(q){return k.H.useEffectEvent(q)},de.useId=function(){return k.H.useId()},de.useImperativeHandle=function(q,dt,Nt){return k.H.useImperativeHandle(q,dt,Nt)},de.useInsertionEffect=function(q,dt){return k.H.useInsertionEffect(q,dt)},de.useLayoutEffect=function(q,dt){return k.H.useLayoutEffect(q,dt)},de.useMemo=function(q,dt){return k.H.useMemo(q,dt)},de.useOptimistic=function(q,dt){return k.H.useOptimistic(q,dt)},de.useReducer=function(q,dt,Nt){return k.H.useReducer(q,dt,Nt)},de.useRef=function(q){return k.H.useRef(q)},de.useState=function(q){return k.H.useState(q)},de.useSyncExternalStore=function(q,dt,Nt){return k.H.useSyncExternalStore(q,dt,Nt)},de.useTransition=function(){return k.H.useTransition()},de.version="19.2.4",de}var sA;function xv(){return sA||(sA=1,oE.exports=v7()),oE.exports}var ce=xv();const Ki=P6(ce);var lE={exports:{}},n0={},uE={exports:{}},cE={};var aA;function E7(){return aA||(aA=1,(function(n){function t(W,Et){var vt=W.length;W.push(Et);t:for(;0<vt;){var Ut=vt-1>>>1,Kt=W[Ut];if(0<s(Kt,Et))W[Ut]=Et,W[vt]=Kt,vt=Ut;else break t}}function e(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Et=W[0],vt=W.pop();if(vt!==Et){W[0]=vt;t:for(var Ut=0,Kt=W.length,q=Kt>>>1;Ut<q;){var dt=2*(Ut+1)-1,Nt=W[dt],Gt=dt+1,ee=W[Gt];if(0>s(Nt,vt))Gt<Kt&&0>s(ee,Nt)?(W[Ut]=ee,W[Gt]=vt,Ut=Gt):(W[Ut]=Nt,W[dt]=vt,Ut=dt);else if(Gt<Kt&&0>s(ee,vt))W[Ut]=ee,W[Gt]=vt,Ut=Gt;else break t}}return Et}function s(W,Et){var vt=W.sortIndex-Et.sortIndex;return vt!==0?vt:W.id-Et.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],E=1,b=null,A=3,N=!1,D=!1,V=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function Z(W){for(var Et=e(g);Et!==null;){if(Et.callback===null)i(g);else if(Et.startTime<=W)i(g),Et.sortIndex=Et.expirationTime,t(m,Et);else break;Et=e(g)}}function pt(W){if(V=!1,Z(W),!D)if(e(m)!==null)D=!0,lt||(lt=!0,F());else{var Et=e(g);Et!==null&&Lt(pt,Et.startTime-W)}}var lt=!1,k=-1,M=5,L=-1;function j(){return U?!0:!(n.unstable_now()-L<M)}function G(){if(U=!1,lt){var W=n.unstable_now();L=W;var Et=!0;try{t:{D=!1,V&&(V=!1,Y(k),k=-1),N=!0;var vt=A;try{e:{for(Z(W),b=e(m);b!==null&&!(b.expirationTime>W&&j());){var Ut=b.callback;if(typeof Ut=="function"){b.callback=null,A=b.priorityLevel;var Kt=Ut(b.expirationTime<=W);if(W=n.unstable_now(),typeof Kt=="function"){b.callback=Kt,Z(W),Et=!0;break e}b===e(m)&&i(m),Z(W)}else i(m);b=e(m)}if(b!==null)Et=!0;else{var q=e(g);q!==null&&Lt(pt,q.startTime-W),Et=!1}}break t}finally{b=null,A=vt,N=!1}Et=void 0}}finally{Et?F():lt=!1}}}var F;if(typeof X=="function")F=function(){X(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Ht=z.port2;z.port1.onmessage=G,F=function(){Ht.postMessage(null)}}else F=function(){H(G,0)};function Lt(W,Et){k=H(function(){W(n.unstable_now())},Et)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(W){switch(A){case 1:case 2:case 3:var Et=3;break;default:Et=A}var vt=A;A=Et;try{return W()}finally{A=vt}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(W,Et){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var vt=A;A=W;try{return Et()}finally{A=vt}},n.unstable_scheduleCallback=function(W,Et,vt){var Ut=n.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Ut+vt:Ut):vt=Ut,W){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=vt+Kt,W={id:E++,callback:Et,priorityLevel:W,startTime:vt,expirationTime:Kt,sortIndex:-1},vt>Ut?(W.sortIndex=vt,t(g,W),e(m)===null&&W===e(g)&&(V?(Y(k),k=-1):V=!0,Lt(pt,vt-Ut))):(W.sortIndex=Kt,t(m,W),D||N||(D=!0,lt||(lt=!0,F()))),W},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(W){var Et=A;return function(){var vt=A;A=Et;try{return W.apply(this,arguments)}finally{A=vt}}}})(cE)),cE}var rA;function sS(){return rA||(rA=1,uE.exports=E7()),uE.exports}var hE={exports:{}},Gs={};var oA;function T7(){if(oA)return Gs;oA=1;var n=xv();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:m,containerInfo:g,implementation:E}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gs.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(m,g,null,E)},Gs.flushSync=function(m){var g=c.T,E=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=E,i.d.f()}},Gs.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Gs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Gs.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:N}):E==="script"&&i.d.X(m,{crossOrigin:b,integrity:A,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Gs.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Gs.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin);i.d.L(m,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Gs.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Gs.requestFormReset=function(m){i.d.r(m)},Gs.unstable_batchedUpdates=function(m,g){return m(g)},Gs.useFormState=function(m,g,E){return c.H.useFormState(m,g,E)},Gs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Gs.version="19.2.4",Gs}var lA;function S7(){if(lA)return hE.exports;lA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),hE.exports=T7(),hE.exports}var uA;function b7(){if(uA)return n0;uA=1;var n=sS(),t=xv(),e=S7();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var r=a,h=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(h=r.return),a=r.return;while(a)}return r.tag===3?h:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function f(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function m(a){if(o(a)!==a)throw Error(i(188))}function g(a){var r=a.alternate;if(!r){if(r=o(a),r===null)throw Error(i(188));return r!==a?null:a}for(var h=a,d=r;;){var v=h.return;if(v===null)break;var T=v.alternate;if(T===null){if(d=v.return,d!==null){h=d;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===h)return m(v),a;if(T===d)return m(v),r;T=T.sibling}throw Error(i(188))}if(h.return!==d.return)h=v,d=T;else{for(var C=!1,O=v.child;O;){if(O===h){C=!0,h=v,d=T;break}if(O===d){C=!0,d=v,h=T;break}O=O.sibling}if(!C){for(O=T.child;O;){if(O===h){C=!0,h=T,d=v;break}if(O===d){C=!0,d=T,h=v;break}O=O.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==d)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:r}function E(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=E(a),r!==null)return r;a=a.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),X=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function F(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var z=Symbol.for("react.client.reference");function Ht(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case V:return"Fragment";case H:return"Profiler";case U:return"StrictMode";case pt:return"Suspense";case lt:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case D:return"Portal";case X:return a.displayName||"Context";case Y:return(a._context.displayName||"Context")+".Consumer";case Z:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return r=a.displayName||null,r!==null?r:Ht(a.type)||"Memo";case M:r=a._payload,a=a._init;try{return Ht(a(r))}catch{}}return null}var Lt=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},Ut=[],Kt=-1;function q(a){return{current:a}}function dt(a){0>Kt||(a.current=Ut[Kt],Ut[Kt]=null,Kt--)}function Nt(a,r){Kt++,Ut[Kt]=a.current,a.current=r}var Gt=q(null),ee=q(null),ie=q(null),Te=q(null);function mn(a,r){switch(Nt(ie,r),Nt(ee,a),Nt(Gt,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?A4(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=A4(r),a=w4(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}dt(Gt),Nt(Gt,a)}function Ne(){dt(Gt),dt(ee),dt(ie)}function $a(a){a.memoizedState!==null&&Nt(Te,a);var r=Gt.current,h=w4(r,a.type);r!==h&&(Nt(ee,a),Nt(Gt,h))}function yo(a){ee.current===a&&(dt(Gt),dt(ee)),Te.current===a&&(dt(Te),Wg._currentValue=vt)}var Qs,ws;function Rs(a){if(Qs===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);Qs=r&&r[1]||"",ws=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qs+a+ws}var tr=!1;function Wi(a,r){if(!a||tr)return"";tr=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(mt){var ot=mt}Reflect.construct(a,[],yt)}else{try{yt.call()}catch(mt){ot=mt}a.call(yt.prototype)}}else{try{throw Error()}catch(mt){ot=mt}(yt=a())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(mt){if(mt&&ot&&typeof mt.stack=="string")return[mt.stack,ot.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),C=T[0],O=T[1];if(C&&O){var K=C.split(`
`),at=O.split(`
`);for(v=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;v<at.length&&!at[v].includes("DetermineComponentFrameRoot");)v++;if(d===K.length||v===at.length)for(d=K.length-1,v=at.length-1;1<=d&&0<=v&&K[d]!==at[v];)v--;for(;1<=d&&0<=v;d--,v--)if(K[d]!==at[v]){if(d!==1||v!==1)do if(d--,v--,0>v||K[d]!==at[v]){var gt=`
`+K[d].replace(" at new "," at ");return a.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",a.displayName)),gt}while(1<=d&&0<=v);break}}}finally{tr=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?Rs(h):""}function Zi(a,r){switch(a.tag){case 26:case 27:case 5:return Rs(a.type);case 16:return Rs("Lazy");case 13:return a.child!==r&&r!==null?Rs("Suspense Fallback"):Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 15:return Wi(a.type,!1);case 11:return Wi(a.type.render,!1);case 1:return Wi(a.type,!0);case 31:return Rs("Activity");default:return""}}function er(a){try{var r="",h=null;do r+=Zi(a,h),h=a,a=a.return;while(a);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ke=Object.prototype.hasOwnProperty,He=n.unstable_scheduleCallback,$i=n.unstable_cancelCallback,Cs=n.unstable_shouldYield,je=n.unstable_requestPaint,St=n.unstable_now,Qt=n.unstable_getCurrentPriorityLevel,pe=n.unstable_ImmediatePriority,Ve=n.unstable_UserBlockingPriority,Ui=n.unstable_NormalPriority,va=n.unstable_LowPriority,vo=n.unstable_IdlePriority,Qh=n.log,Xh=n.unstable_setDisableYieldValue,Ea=null,Si=null;function Xs(a){if(typeof Qh=="function"&&Xh(a),Si&&typeof Si.setStrictMode=="function")try{Si.setStrictMode(Ea,a)}catch{}}var Qn=Math.clz32?Math.clz32:Jh,uc=Math.log,cc=Math.LN2;function Jh(a){return a>>>=0,a===0?32:31-(uc(a)/cc|0)|0}var Cr=256,Eo=262144,In=4194304;function nr(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Js(a,r,h){var d=a.pendingLanes;if(d===0)return 0;var v=0,T=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var O=d&134217727;return O!==0?(d=O&~T,d!==0?v=nr(d):(C&=O,C!==0?v=nr(C):h||(h=O&~a,h!==0&&(v=nr(h))))):(O=d&~T,O!==0?v=nr(O):C!==0?v=nr(C):h||(h=d&~a,h!==0&&(v=nr(h)))),v===0?0:r!==0&&r!==v&&(r&T)===0&&(T=v&-v,h=r&-r,T>=h||T===32&&(h&4194048)!==0)?r:v}function Ta(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Od(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(){var a=In;return In<<=1,(In&62914560)===0&&(In=4194304),a}function ir(a){for(var r=[],h=0;31>h;h++)r.push(a);return r}function $o(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function hc(a,r,h,d,v,T){var C=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var O=a.entanglements,K=a.expirationTimes,at=a.hiddenUpdates;for(h=C&~h;0<h;){var gt=31-Qn(h),yt=1<<gt;O[gt]=0,K[gt]=-1;var ot=at[gt];if(ot!==null)for(at[gt]=null,gt=0;gt<ot.length;gt++){var mt=ot[gt];mt!==null&&(mt.lane&=-536870913)}h&=~yt}d!==0&&sr(a,d,0),T!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=T&~(C&~r))}function sr(a,r,h){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-Qn(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function tl(a,r){var h=a.entangledLanes|=r;for(a=a.entanglements;h;){var d=31-Qn(h),v=1<<d;v&r|a[d]&r&&(a[d]|=r),h&=~v}}function fc(a,r){var h=r&-r;return h=(h&42)!==0?1:Nr(h),(h&(a.suspendedLanes|r))!==0?0:h}function Nr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Sa(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function dc(){var a=Et.p;return a!==0?a:(a=window.event,a===void 0?32:Q4(a.type))}function zi(a,r){var h=Et.p;try{return Et.p=a,r()}finally{Et.p=h}}var ba=Math.random().toString(36).slice(2),Nn="__reactFiber$"+ba,ri="__reactProps$"+ba,Aa="__reactContainer$"+ba,Ws="__reactEvents$"+ba,Dr="__reactListeners$"+ba,el="__reactHandles$"+ba,mc="__reactResources$"+ba,Is="__reactMarker$"+ba;function xr(a){delete a[Nn],delete a[ri],delete a[Ws],delete a[Dr],delete a[el]}function ar(a){var r=a[Nn];if(r)return r;for(var h=a.parentNode;h;){if(r=h[Aa]||h[Nn]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(a=O4(a);a!==null;){if(h=a[Nn])return h;a=O4(a)}return r}a=h,h=a.parentNode}return null}function Zs(a){if(a=a[Nn]||a[Aa]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function Ns(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function wa(a){var r=a[mc];return r||(r=a[mc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zn(a){a[Is]=!0}var Ra=new Set,nu={};function rr(a,r){Bi(a,r),Bi(a+"Capture",r)}function Bi(a,r){for(nu[a]=r,a=0;a<r.length;a++)Ra.add(r[a])}var Gi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},ln={};function pc(a){return Ke.call(ln,a)?!0:Ke.call(nl,a)?!1:Gi.test(a)?ln[a]=!0:(nl[a]=!0,!1)}function il(a,r,h){if(pc(r))if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+h)}}function Ds(a,r,h){if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+h)}}function Xn(a,r,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(r,h,""+d)}}function bi(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Or(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function iu(a,r,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,T=d.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return v.call(this)},set:function(C){h=""+C,T.call(this,C)}}),Object.defineProperty(a,r,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function Fe(a){if(!a._valueTracker){var r=Or(a)?"checked":"value";a._valueTracker=iu(a,r,""+a[r])}}function Jn(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var h=r.getValue(),d="";return a&&(d=Or(a)?a.checked?"true":"false":a.value),a=d,a!==h?(r.setValue(a),!0):!1}function Ye(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Mr=/[\n"\\]/g;function Ai(a){return a.replace(Mr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function To(a,r,h,d,v,T,C,O){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),r!=null?C==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+bi(r)):a.value!==""+bi(r)&&(a.value=""+bi(r)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),r!=null?$s(a,C,bi(r)):h!=null?$s(a,C,bi(h)):d!=null&&a.removeAttribute("value"),v==null&&T!=null&&(a.defaultChecked=!!T),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+bi(O):a.removeAttribute("name")}function gc(a,r,h,d,v,T,C,O){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),r!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){Fe(a);return}h=h!=null?""+bi(h):"",r=r!=null?""+bi(r):h,O||r===a.value||(a.value=r),a.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=O?a.checked:!!d,a.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C),Fe(a)}function $s(a,r,h){r==="number"&&Ye(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function or(a,r,h,d){if(a=a.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=r.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&d&&(a[h].defaultSelected=!0)}else{for(h=""+bi(h),r=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}r!==null||a[v].disabled||(r=a[v])}r!==null&&(r.selected=!0)}}function _c(a,r,h){if(r!=null&&(r=""+bi(r),r!==a.value&&(a.value=r),h==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=h!=null?""+bi(h):""}function Pr(a,r,h,d){if(r==null){if(d!=null){if(h!=null)throw Error(i(92));if(Lt(d)){if(1<d.length)throw Error(i(93));d=d[0]}h=d}h==null&&(h=""),r=h}h=bi(r),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),Fe(a)}function ls(a,r){if(r){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=r;return}}a.textContent=r}var Wh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yc(a,r,h){var d=r.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,h):typeof h!="number"||h===0||Wh.has(r)?r==="float"?a.cssFloat=h:a[r]=(""+h).trim():a[r]=h+"px"}function vc(a,r,h){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&h[v]!==d&&yc(a,v,d)}else for(var T in r)r.hasOwnProperty(T)&&yc(a,T,r[T])}function su(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function au(a){return Vr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function lr(){}var Ec=null;function ta(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var So=null,Ca=null;function sl(a){var r=Zs(a);if(r&&(a=r.stateNode)){var h=a[ri]||null;t:switch(a=r.stateNode,r.type){case"input":if(To(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),r=h.name,h.type==="radio"&&r!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ai(""+r)+'"][type="radio"]'),r=0;r<h.length;r++){var d=h[r];if(d!==a&&d.form===a.form){var v=d[ri]||null;if(!v)throw Error(i(90));To(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<h.length;r++)d=h[r],d.form===a.form&&Jn(d)}break t;case"textarea":_c(a,h.value,h.defaultValue);break t;case"select":r=h.value,r!=null&&or(a,!!h.multiple,r,!1)}}}var ru=!1;function bo(a,r,h){if(ru)return a(r,h);ru=!0;try{var d=a(r);return d}finally{if(ru=!1,(So!==null||Ca!==null)&&(vr(),So&&(r=So,a=Ca,Ca=So=null,sl(r),a)))for(r=0;r<a.length;r++)sl(a[r])}}function Ia(a,r){var h=a.stateNode;if(h===null)return null;var d=h[ri]||null;if(d===null)return null;h=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,r,typeof h));return h}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(ea)try{var We={};Object.defineProperty(We,"passive",{get:function(){ou=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{ou=!1}var us=null,Tc=null,kr=null;function al(){if(kr)return kr;var a,r=Tc,h=r.length,d,v="value"in us?us.value:us.textContent,T=v.length;for(a=0;a<h&&r[a]===v[a];a++);var C=h-a;for(d=1;d<=C&&r[h-d]===v[T-d];d++);return kr=v.slice(a,1<d?1-d:void 0)}function rl(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function ur(){return!0}function cr(){return!1}function wi(a){function r(h,d,v,T,C){this._reactName=h,this._targetInst=v,this.type=d,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(h=a[O],this[O]=h?h(T):T[O]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ur:cr,this.isPropagationStopped=cr,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),r}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=wi(Lr),Ao=b({},Lr,{view:0,detail:0}),Sc=wi(Ao),Ur,lu,fr,ol=b({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fr&&(fr&&a.type==="mousemove"?(Ur=a.screenX-fr.screenX,lu=a.screenY-fr.screenY):lu=Ur=0,fr=a),Ur)},movementY:function(a){return"movementY"in a?a.movementY:lu}}),bc=wi(ol),ll=b({},ol,{dataTransfer:0}),$h=wi(ll),Ac=b({},Ao,{relatedTarget:0}),ul=wi(Ac),wc=b({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Md=wi(wc),Rc=b({},Lr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),tf=wi(Rc),cl=b({},Lr,{data:0}),Na=wi(cl),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ef={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=nf[a])?!!r[a]:!1}function wo(){return Cc}var ts=b({},Ao,{key:function(a){if(a.key){var r=uu[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=rl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ef[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wo,charCode:function(a){return a.type==="keypress"?rl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?rl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),zr=wi(ts),cu=b({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Br=wi(cu),_=b({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wo}),R=wi(_),I=b({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=wi(I),$=b({},ol,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ut=wi($),Pt=b({},Lr,{newState:0,oldState:0}),le=wi(Pt),Bn=[9,13,27,32],De=ea&&"CompositionEvent"in window,pn=null;ea&&"documentMode"in document&&(pn=document.documentMode);var cs=ea&&"TextEvent"in window&&!pn,dr=ea&&(!De||pn&&8<pn&&11>=pn),mr=" ",xs=!1;function Ro(a,r){switch(a){case"keyup":return Bn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var fu=!1;function Y_(a,r){switch(a){case"compositionend":return hu(r);case"keypress":return r.which!==32?null:(xs=!0,mr);case"textInput":return a=r.data,a===mr&&xs?null:a;default:return null}}function qp(a,r){if(fu)return a==="compositionend"||!De&&Ro(a,r)?(a=al(),kr=Tc=us=null,fu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return dr&&r.locale!=="ko"?null:r.data;default:return null}}var Hp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!Hp[a.type]:r==="textarea"}function Pd(a,r,h,d){So?Ca?Ca.push(d):Ca=[d]:So=d,r=Zy(r,"onChange"),0<r.length&&(h=new hr("onChange","change",null,h,d),a.push({event:h,listeners:r}))}var hl=null,du=null;function Q_(a){y4(a,0)}function Ic(a){var r=Ns(a);if(Jn(r))return a}function Fp(a,r){if(a==="change")return r}var Gr=!1;if(ea){var sf;if(ea){var Kp="oninput"in document;if(!Kp){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Kp=typeof Yp.oninput=="function"}sf=Kp}else sf=!1;Gr=sf&&(!document.documentMode||9<document.documentMode)}function Da(){hl&&(hl.detachEvent("onpropertychange",af),du=hl=null)}function af(a){if(a.propertyName==="value"&&Ic(du)){var r=[];Pd(r,du,a,ta(a)),bo(Q_,r)}}function X_(a,r,h){a==="focusin"?(Da(),hl=r,du=h,hl.attachEvent("onpropertychange",af)):a==="focusout"&&Da()}function Qp(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ic(du)}function J_(a,r){if(a==="click")return Ic(r)}function W_(a,r){if(a==="input"||a==="change")return Ic(r)}function Xp(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var hs=typeof Object.is=="function"?Object.is:Xp;function Nc(a,r){if(hs(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var h=Object.keys(a),d=Object.keys(r);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var v=h[d];if(!Ke.call(r,v)||!hs(a[v],r[v]))return!1}return!0}function rf(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Dc(a,r){var h=rf(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=r&&d>=r)return{node:h,offset:r-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=rf(h)}}function un(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?un(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function Z_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=Ye(a.document);r instanceof a.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)a=r.contentWindow;else break;r=Ye(a.document)}return r}function Jp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var $_=ea&&"documentMode"in document&&11>=document.documentMode,qr=null,Hr=null,xc=null,Vd=!1;function Oc(a,r,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vd||qr==null||qr!==Ye(d)||(d=qr,"selectionStart"in d&&Jp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xc&&Nc(xc,d)||(xc=d,d=Zy(Hr,"onSelect"),0<d.length&&(r=new hr("onSelect","select",null,r,h),a.push({event:r,listeners:d}),r.target=qr)))}function es(a,r){var h={};return h[a.toLowerCase()]=r.toLowerCase(),h["Webkit"+a]="webkit"+r,h["Moz"+a]="moz"+r,h}var mu={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},of={},Wp={};ea&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete mu.animationend.animation,delete mu.animationiteration.animation,delete mu.animationstart.animation),"TransitionEvent"in window||delete mu.transitionend.transition);function Co(a){if(of[a])return of[a];if(!mu[a])return a;var r=mu[a],h;for(h in r)if(r.hasOwnProperty(h)&&h in Wp)return of[a]=r[h];return a}var kd=Co("animationend"),lf=Co("animationiteration"),Zp=Co("animationstart"),ty=Co("transitionrun"),N2=Co("transitionstart"),ey=Co("transitioncancel"),$p=Co("transitionend"),xa=new Map,uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uf.push("scrollEnd");function Oa(a,r){xa.set(a,r),rr(r,[a])}var cf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ma=[],Io=0,Ri=0;function hf(){for(var a=Io,r=Ri=Io=0;r<a;){var h=Ma[r];Ma[r++]=null;var d=Ma[r];Ma[r++]=null;var v=Ma[r];Ma[r++]=null;var T=Ma[r];if(Ma[r++]=null,d!==null&&v!==null){var C=d.pending;C===null?v.next=v:(v.next=C.next,C.next=v),d.pending=v}T!==0&&fl(h,v,T)}}function Ci(a,r,h,d){Ma[Io++]=a,Ma[Io++]=r,Ma[Io++]=h,Ma[Io++]=d,Ri|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Ld(a,r,h,d){return Ci(a,r,h,d),Pa(a)}function fs(a,r){return Ci(a,null,null,r),Pa(a)}function fl(a,r,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var v=!1,T=a.return;T!==null;)T.childLanes|=h,d=T.alternate,d!==null&&(d.childLanes|=h),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(v=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,v&&r!==null&&(v=31-Qn(h),a=T.hiddenUpdates,d=a[v],d===null?a[v]=[r]:d.push(r),r.lane=h|536870912),T):null}function Pa(a){if(50<xl)throw xl=0,Mu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var dl={};function tg(a,r,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(a,r,h,d){return new tg(a,r,h,d)}function Ud(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Os(a,r){var h=a.alternate;return h===null?(h=Dn(a.tag,r,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=r,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,r=a.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Mc(a,r){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,r=h.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function jr(a,r,h,d,v,T){var C=0;if(d=a,typeof a=="function")Ud(a)&&(C=1);else if(typeof a=="string")C=a7(a,h,Gt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case L:return a=Dn(31,h,r,v),a.elementType=L,a.lanes=T,a;case V:return ml(h.children,v,T,r);case U:C=8,v|=24;break;case H:return a=Dn(12,h,r,v|2),a.elementType=H,a.lanes=T,a;case pt:return a=Dn(13,h,r,v),a.elementType=pt,a.lanes=T,a;case lt:return a=Dn(19,h,r,v),a.elementType=lt,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case X:C=10;break t;case Y:C=9;break t;case Z:C=11;break t;case k:C=14;break t;case M:C=16,d=null;break t}C=29,h=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=Dn(C,h,r,v),r.elementType=a,r.type=d,r.lanes=T,r}function ml(a,r,h,d){return a=Dn(7,a,d,r),a.lanes=h,a}function zd(a,r,h){return a=Dn(6,a,null,r),a.lanes=h,a}function Pc(a){var r=Dn(18,null,null,0);return r.stateNode=a,r}function Bd(a,r,h){return r=Dn(4,a.children!==null?a.children:[],a.key,r),r.lanes=h,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var ff=new WeakMap;function na(a,r){if(typeof a=="object"&&a!==null){var h=ff.get(a);return h!==void 0?h:(r={value:a,source:r,stack:er(r)},ff.set(a,r),r)}return{value:a,source:r,stack:er(r)}}var pl=[],gl=0,Vc=null,kc=0,Ms=[],yn=0,No=null,xn=1,pr="";function Fr(a,r){pl[gl++]=kc,pl[gl++]=Vc,Vc=a,kc=r}function ny(a,r,h){Ms[yn++]=xn,Ms[yn++]=pr,Ms[yn++]=No,No=a;var d=xn;a=pr;var v=32-Qn(d)-1;d&=~(1<<v),h+=1;var T=32-Qn(r)+v;if(30<T){var C=v-v%5;T=(d&(1<<C)-1).toString(32),d>>=C,v-=C,xn=1<<32-Qn(r)+v|h<<v|d,pr=T+a}else xn=1<<T|h<<v|d,pr=a}function Kr(a){a.return!==null&&(Fr(a,1),ny(a,1,0))}function Gd(a){for(;a===Vc;)Vc=pl[--gl],pl[gl]=null,kc=pl[--gl],pl[gl]=null;for(;a===No;)No=Ms[--yn],Ms[yn]=null,pr=Ms[--yn],Ms[yn]=null,xn=Ms[--yn],Ms[yn]=null}function qd(a,r){Ms[yn++]=xn,Ms[yn++]=pr,Ms[yn++]=No,xn=r.id,pr=r.overflow,No=a}var Gn=null,cn=null,Ce=!1,Do=null,ia=!1,Lc=Error(i(519));function Yr(a){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qr(na(r,a)),Lc}function iy(a){var r=a.stateNode,h=a.type,d=a.memoizedProps;switch(r[Nn]=a,r[ri]=d,h){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(h=0;h<Ya.length;h++)Oe(Ya[h],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),gc(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Pr(r,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||r.textContent===""+h||d.suppressHydrationWarning===!0||S4(r.textContent,h)?(d.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),d.onScroll!=null&&Oe("scroll",r),d.onScrollEnd!=null&&Oe("scrollend",r),d.onClick!=null&&(r.onclick=lr),r=!0):r=!1,r||Yr(a,!0)}function sy(a){for(Gn=a.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:Gn=Gn.return}}function Uc(a){if(a!==Gn)return!1;if(!Ce)return sy(a),Ce=!0,!1;var r=a.tag,h;if((h=r!==3&&r!==27)&&((h=r===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||F2(a.type,a.memoizedProps)),h=!h),h&&cn&&Yr(a),sy(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));cn=x4(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));cn=x4(a)}else r===27?(r=cn,sh(a.type)?(a=J2,J2=null,cn=a):cn=r):cn=Gn?lo(a.stateNode.nextSibling):null;return!0}function _l(){cn=Gn=null,Ce=!1}function Hd(){var a=Do;return a!==null&&(Hn===null?Hn=a:Hn.push.apply(Hn,a),Do=null),a}function Qr(a){Do===null?Do=[a]:Do.push(a)}var zc=q(null),yl=null,Xr=null;function xo(a,r,h){Nt(zc,r._currentValue),r._currentValue=h}function Jr(a){a._currentValue=zc.current,dt(zc)}function jd(a,r,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===h)break;a=a.return}}function Fd(a,r,h,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var T=v.dependencies;if(T!==null){var C=v.child;T=T.firstContext;t:for(;T!==null;){var O=T;T=v;for(var K=0;K<r.length;K++)if(O.context===r[K]){T.lanes|=h,O=T.alternate,O!==null&&(O.lanes|=h),jd(T.return,h,a),d||(C=null);break t}T=O.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=h,T=C.alternate,T!==null&&(T.lanes|=h),jd(C,h,a),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===a){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function Wr(a,r,h,d){a=null;for(var v=r,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=v.type;hs(v.pendingProps.value,C.value)||(a!==null?a.push(O):a=[O])}}else if(v===Te.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Wg):a=[Wg])}v=v.return}a!==null&&Fd(r,a,h,d),r.flags|=262144}function df(a){for(a=a.firstContext;a!==null;){if(!hs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function vl(a){yl=a,Xr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ae(a){return ay(yl,a)}function Bc(a,r){return yl===null&&vl(a),ay(a,r)}function ay(a,r){var h=r._currentValue;if(r={context:r,memoizedValue:h,next:null},Xr===null){if(a===null)throw Error(i(308));Xr=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else Xr=Xr.next=r;return h}var ry=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(h){return h()})}},D2=n.unstable_scheduleCallback,x2=n.unstable_NormalPriority,oi={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eg(){return{controller:new ry,data:new Map,refCount:0}}function pu(a){a.refCount--,a.refCount===0&&D2(x2,function(){a.controller.abort()})}var sa=null,Kd=0,Oo=0,Va=null;function ng(a,r){if(sa===null){var h=sa=[];Kd=0,Oo=ct(),Va={status:"pending",value:void 0,then:function(d){h.push(d)}}}return Kd++,r.then(ig,ig),r}function ig(){if(--Kd===0&&sa!==null){Va!==null&&(Va.status="fulfilled");var a=sa;sa=null,Oo=0,Va=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function sg(a,r){var h=[],d={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<h.length;v++)(0,h[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),d}var oy=W.S;W.S=function(a,r){Fg=St(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ng(a,r),oy!==null&&oy(a,r)};var El=q(null);function Yd(){var a=El.current;return a!==null?a:re.pooledCache}function mf(a,r){r===null?Nt(El,El.current):Nt(El,r.pool)}function ag(){var a=Yd();return a===null?null:{parent:oi._currentValue,pool:a}}var gu=Error(i(460)),pf=Error(i(474)),ge=Error(i(542)),Qd={then:function(){}};function Ps(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xd(a,r,h){switch(h=a[h],h===void 0?a.push(r):h!==r&&(r.then(lr,lr),r=h),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,vu(a),a;default:if(typeof r.status=="string")r.then(lr,lr);else{if(a=re,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,vu(a),a}throw Zr=r,gu}}function _u(a){try{var r=a._init;return r(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Zr=h,gu):h}}var Zr=null;function yu(){if(Zr===null)throw Error(i(459));var a=Zr;return Zr=null,a}function vu(a){if(a===gu||a===ge)throw Error(i(483))}var Eu=null,Tu=0;function gf(a){var r=Tu;return Tu+=1,Eu===null&&(Eu=[]),Xd(Eu,a,r)}function ka(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function Gc(a,r){throw r.$$typeof===A?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function Jd(a){function r(tt,J){if(a){var st=tt.deletions;st===null?(tt.deletions=[J],tt.flags|=16):st.push(J)}}function h(tt,J){if(!a)return null;for(;J!==null;)r(tt,J),J=J.sibling;return null}function d(tt){for(var J=new Map;tt!==null;)tt.key!==null?J.set(tt.key,tt):J.set(tt.index,tt),tt=tt.sibling;return J}function v(tt,J){return tt=Os(tt,J),tt.index=0,tt.sibling=null,tt}function T(tt,J,st){return tt.index=st,a?(st=tt.alternate,st!==null?(st=st.index,st<J?(tt.flags|=67108866,J):st):(tt.flags|=67108866,J)):(tt.flags|=1048576,J)}function C(tt){return a&&tt.alternate===null&&(tt.flags|=67108866),tt}function O(tt,J,st,_t){return J===null||J.tag!==6?(J=zd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function K(tt,J,st,_t){var $t=st.type;return $t===V?gt(tt,J,st.props.children,_t,st.key):J!==null&&(J.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&_u($t)===J.type)?(J=v(J,st.props),ka(J,st),J.return=tt,J):(J=jr(st.type,st.key,st.props,null,tt.mode,_t),ka(J,st),J.return=tt,J)}function at(tt,J,st,_t){return J===null||J.tag!==4||J.stateNode.containerInfo!==st.containerInfo||J.stateNode.implementation!==st.implementation?(J=Bd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st.children||[]),J.return=tt,J)}function gt(tt,J,st,_t,$t){return J===null||J.tag!==7?(J=ml(st,tt.mode,_t,$t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function yt(tt,J,st){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=zd(""+J,tt.mode,st),J.return=tt,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return st=jr(J.type,J.key,J.props,null,tt.mode,st),ka(st,J),st.return=tt,st;case D:return J=Bd(J,tt.mode,st),J.return=tt,J;case M:return J=_u(J),yt(tt,J,st)}if(Lt(J)||F(J))return J=ml(J,tt.mode,st,null),J.return=tt,J;if(typeof J.then=="function")return yt(tt,gf(J),st);if(J.$$typeof===X)return yt(tt,Bc(tt,J),st);Gc(tt,J)}return null}function ot(tt,J,st,_t){var $t=J!==null?J.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return $t!==null?null:O(tt,J,""+st,_t);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case N:return st.key===$t?K(tt,J,st,_t):null;case D:return st.key===$t?at(tt,J,st,_t):null;case M:return st=_u(st),ot(tt,J,st,_t)}if(Lt(st)||F(st))return $t!==null?null:gt(tt,J,st,_t,null);if(typeof st.then=="function")return ot(tt,J,gf(st),_t);if(st.$$typeof===X)return ot(tt,J,Bc(tt,st),_t);Gc(tt,st)}return null}function mt(tt,J,st,_t,$t){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return tt=tt.get(st)||null,O(J,tt,""+_t,$t);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case N:return tt=tt.get(_t.key===null?st:_t.key)||null,K(J,tt,_t,$t);case D:return tt=tt.get(_t.key===null?st:_t.key)||null,at(J,tt,_t,$t);case M:return _t=_u(_t),mt(tt,J,st,_t,$t)}if(Lt(_t)||F(_t))return tt=tt.get(st)||null,gt(J,tt,_t,$t,null);if(typeof _t.then=="function")return mt(tt,J,st,gf(_t),$t);if(_t.$$typeof===X)return mt(tt,J,st,Bc(J,_t),$t);Gc(J,_t)}return null}function Ft(tt,J,st,_t){for(var $t=null,Qe=null,Xt=J,Ee=J=0,Le=null;Xt!==null&&Ee<st.length;Ee++){Xt.index>Ee?(Le=Xt,Xt=null):Le=Xt.sibling;var Xe=ot(tt,Xt,st[Ee],_t);if(Xe===null){Xt===null&&(Xt=Le);break}a&&Xt&&Xe.alternate===null&&r(tt,Xt),J=T(Xe,J,Ee),Qe===null?$t=Xe:Qe.sibling=Xe,Qe=Xe,Xt=Le}if(Ee===st.length)return h(tt,Xt),Ce&&Fr(tt,Ee),$t;if(Xt===null){for(;Ee<st.length;Ee++)Xt=yt(tt,st[Ee],_t),Xt!==null&&(J=T(Xt,J,Ee),Qe===null?$t=Xt:Qe.sibling=Xt,Qe=Xt);return Ce&&Fr(tt,Ee),$t}for(Xt=d(Xt);Ee<st.length;Ee++)Le=mt(Xt,tt,Ee,st[Ee],_t),Le!==null&&(a&&Le.alternate!==null&&Xt.delete(Le.key===null?Ee:Le.key),J=T(Le,J,Ee),Qe===null?$t=Le:Qe.sibling=Le,Qe=Le);return a&&Xt.forEach(function(uh){return r(tt,uh)}),Ce&&Fr(tt,Ee),$t}function se(tt,J,st,_t){if(st==null)throw Error(i(151));for(var $t=null,Qe=null,Xt=J,Ee=J=0,Le=null,Xe=st.next();Xt!==null&&!Xe.done;Ee++,Xe=st.next()){Xt.index>Ee?(Le=Xt,Xt=null):Le=Xt.sibling;var uh=ot(tt,Xt,Xe.value,_t);if(uh===null){Xt===null&&(Xt=Le);break}a&&Xt&&uh.alternate===null&&r(tt,Xt),J=T(uh,J,Ee),Qe===null?$t=uh:Qe.sibling=uh,Qe=uh,Xt=Le}if(Xe.done)return h(tt,Xt),Ce&&Fr(tt,Ee),$t;if(Xt===null){for(;!Xe.done;Ee++,Xe=st.next())Xe=yt(tt,Xe.value,_t),Xe!==null&&(J=T(Xe,J,Ee),Qe===null?$t=Xe:Qe.sibling=Xe,Qe=Xe);return Ce&&Fr(tt,Ee),$t}for(Xt=d(Xt);!Xe.done;Ee++,Xe=st.next())Xe=mt(Xt,tt,Ee,Xe.value,_t),Xe!==null&&(a&&Xe.alternate!==null&&Xt.delete(Xe.key===null?Ee:Xe.key),J=T(Xe,J,Ee),Qe===null?$t=Xe:Qe.sibling=Xe,Qe=Xe);return a&&Xt.forEach(function(g7){return r(tt,g7)}),Ce&&Fr(tt,Ee),$t}function dn(tt,J,st,_t){if(typeof st=="object"&&st!==null&&st.type===V&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case N:t:{for(var $t=st.key;J!==null;){if(J.key===$t){if($t=st.type,$t===V){if(J.tag===7){h(tt,J.sibling),_t=v(J,st.props.children),_t.return=tt,tt=_t;break t}}else if(J.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&_u($t)===J.type){h(tt,J.sibling),_t=v(J,st.props),ka(_t,st),_t.return=tt,tt=_t;break t}h(tt,J);break}else r(tt,J);J=J.sibling}st.type===V?(_t=ml(st.props.children,tt.mode,_t,st.key),_t.return=tt,tt=_t):(_t=jr(st.type,st.key,st.props,null,tt.mode,_t),ka(_t,st),_t.return=tt,tt=_t)}return C(tt);case D:t:{for($t=st.key;J!==null;){if(J.key===$t)if(J.tag===4&&J.stateNode.containerInfo===st.containerInfo&&J.stateNode.implementation===st.implementation){h(tt,J.sibling),_t=v(J,st.children||[]),_t.return=tt,tt=_t;break t}else{h(tt,J);break}else r(tt,J);J=J.sibling}_t=Bd(st,tt.mode,_t),_t.return=tt,tt=_t}return C(tt);case M:return st=_u(st),dn(tt,J,st,_t)}if(Lt(st))return Ft(tt,J,st,_t);if(F(st)){if($t=F(st),typeof $t!="function")throw Error(i(150));return st=$t.call(st),se(tt,J,st,_t)}if(typeof st.then=="function")return dn(tt,J,gf(st),_t);if(st.$$typeof===X)return dn(tt,J,Bc(tt,st),_t);Gc(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,J!==null&&J.tag===6?(h(tt,J.sibling),_t=v(J,st),_t.return=tt,tt=_t):(h(tt,J),_t=zd(st,tt.mode,_t),_t.return=tt,tt=_t),C(tt)):h(tt,J)}return function(tt,J,st,_t){try{Tu=0;var $t=dn(tt,J,st,_t);return Eu=null,$t}catch(Xt){if(Xt===gu||Xt===ge)throw Xt;var Qe=Dn(29,Xt,null,tt.mode);return Qe.lanes=_t,Qe.return=tt,Qe}}}var Mo=Jd(!0),Wd=Jd(!1),ds=!1;function _f(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rg(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Po(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Tl(a,r,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Jt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=Pa(a),fl(a,null,h),r}return Ci(a,d,r,h),Pa(a)}function Sl(a,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,tl(a,h)}}function Zt(a,r){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var v=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?v=T=C:T=T.next=C,h=h.next}while(h!==null);T===null?v=T=r:T=T.next=r}else v=T=r;h={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=r:a.next=r,h.lastBaseUpdate=r}var og=!1;function yf(){if(og){var a=Va;if(a!==null)throw a}}function qc(a,r,h,d){og=!1;var v=a.updateQueue;ds=!1;var T=v.firstBaseUpdate,C=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var K=O,at=K.next;K.next=null,C===null?T=at:C.next=at,C=K;var gt=a.alternate;gt!==null&&(gt=gt.updateQueue,O=gt.lastBaseUpdate,O!==C&&(O===null?gt.firstBaseUpdate=at:O.next=at,gt.lastBaseUpdate=K))}if(T!==null){var yt=v.baseState;C=0,gt=at=K=null,O=T;do{var ot=O.lane&-536870913,mt=ot!==O.lane;if(mt?(me&ot)===ot:(d&ot)===ot){ot!==0&&ot===Oo&&(og=!0),gt!==null&&(gt=gt.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var Ft=a,se=O;ot=r;var dn=h;switch(se.tag){case 1:if(Ft=se.payload,typeof Ft=="function"){yt=Ft.call(dn,yt,ot);break t}yt=Ft;break t;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=se.payload,ot=typeof Ft=="function"?Ft.call(dn,yt,ot):Ft,ot==null)break t;yt=b({},yt,ot);break t;case 2:ds=!0}}ot=O.callback,ot!==null&&(a.flags|=64,mt&&(a.flags|=8192),mt=v.callbacks,mt===null?v.callbacks=[ot]:mt.push(ot))}else mt={lane:ot,tag:O.tag,payload:O.payload,callback:O.callback,next:null},gt===null?(at=gt=mt,K=yt):gt=gt.next=mt,C|=ot;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;mt=O,O=mt.next,mt.next=null,v.lastBaseUpdate=mt,v.shared.pending=null}}while(!0);gt===null&&(K=yt),v.baseState=K,v.firstBaseUpdate=at,v.lastBaseUpdate=gt,T===null&&(v.shared.lanes=0),ao|=C,a.lanes=C,a.memoizedState=yt}}function Hc(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function ly(a,r){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)Hc(h[a],r)}var jc=q(null),Zd=q(0);function uy(a,r){a=la,Nt(Zd,a),Nt(jc,r),la=a|r.baseLanes}function lg(){Nt(Zd,la),Nt(jc,jc.current)}function vf(){la=Zd.current,dt(jc),dt(Zd)}var Vs=q(null),ms=null;function Vo(a){var r=a.alternate;Nt(Ie,Ie.current&1),Nt(Vs,a),ms===null&&(r===null||jc.current!==null||r.memoizedState!==null)&&(ms=a)}function ug(a){Nt(Ie,Ie.current),Nt(Vs,a),ms===null&&(ms=a)}function cy(a){a.tag===22?(Nt(Ie,Ie.current),Nt(Vs,a),ms===null&&(ms=a)):ks()}function ks(){Nt(Ie,Ie.current),Nt(Vs,Vs.current)}function Wn(a){dt(Vs),ms===a&&(ms=null),dt(Ie)}var Ie=q(0);function aa(a){for(var r=a;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Q2(h)||X2(h)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vn=0,he=null,nn=null,Ae=null,La=!1,Fc=!1,Su=!1,$d=0,Ef=0,Kc=null,cg=0;function On(){throw Error(i(321))}function hg(a,r){if(r===null)return!1;for(var h=0;h<r.length&&h<a.length;h++)if(!hs(a[h],r[h]))return!1;return!0}function tm(a,r,h,d,v,T){return vn=T,he=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=a===null||a.memoizedState===null?qy:xg,Su=!1,T=h(d,v),Su=!1,Fc&&(T=bu(r,h,d,v)),hy(a),T}function hy(a){W.H=Yc;var r=nn!==null&&nn.next!==null;if(vn=0,Ae=nn=he=null,La=!1,Ef=0,Kc=null,r)throw Error(i(300));a===null||li||(a=a.dependencies,a!==null&&df(a)&&(li=!0))}function bu(a,r,h,d){he=a;var v=0;do{if(Fc&&(Kc=null),Ef=0,Fc=!1,25<=v)throw Error(i(301));if(v+=1,Ae=nn=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}W.H=Ua,T=r(h,d)}while(Fc);return T}function Au(){var a=W.H,r=a.useState()[0];return r=typeof r.then=="function"?Tf(r):r,a=a.useState()[0],(nn!==null?nn.memoizedState:null)!==a&&(he.flags|=1024),r}function fg(){var a=$d!==0;return $d=0,a}function dg(a,r,h){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~h}function mg(a){if(La){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}La=!1}vn=0,Ae=nn=he=null,Fc=!1,Ef=$d=0,Kc=null}function mi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?he.memoizedState=Ae=a:Ae=Ae.next=a,Ae}function Zn(){if(nn===null){var a=he.alternate;a=a!==null?a.memoizedState:null}else a=nn.next;var r=Ae===null?he.memoizedState:Ae.next;if(r!==null)Ae=r,nn=a;else{if(a===null)throw he.alternate===null?Error(i(467)):Error(i(310));nn=a,a={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Ae===null?he.memoizedState=Ae=a:Ae=Ae.next=a}return Ae}function em(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tf(a){var r=Ef;return Ef+=1,Kc===null&&(Kc=[]),a=Xd(Kc,a,r),r=he,(Ae===null?r.memoizedState:Ae.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?qy:xg),a}function bl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Tf(a);if(a.$$typeof===X)return ae(a)}throw Error(i(438,String(a)))}function pg(a){var r=null,h=he.updateQueue;if(h!==null&&(r=h.memoCache),r==null){var d=he.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),h===null&&(h=em(),he.updateQueue=h),h.memoCache=r,h=r.data[r.index],h===void 0)for(h=r.data[r.index]=Array(a),d=0;d<a;d++)h[d]=j;return r.index++,h}function ko(a,r){return typeof r=="function"?r(a):r}function nm(a){var r=Zn();return gg(r,nn,a)}function gg(a,r,h){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=h;var v=a.baseQueue,T=d.pending;if(T!==null){if(v!==null){var C=v.next;v.next=T.next,T.next=C}r.baseQueue=v=T,d.pending=null}if(T=a.baseState,v===null)a.memoizedState=T;else{r=v.next;var O=C=null,K=null,at=r,gt=!1;do{var yt=at.lane&-536870913;if(yt!==at.lane?(me&yt)===yt:(vn&yt)===yt){var ot=at.revertLane;if(ot===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),yt===Oo&&(gt=!0);else if((vn&ot)===ot){at=at.next,ot===Oo&&(gt=!0);continue}else yt={lane:0,revertLane:at.revertLane,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},K===null?(O=K=yt,C=T):K=K.next=yt,he.lanes|=ot,ao|=ot;yt=at.action,Su&&h(T,yt),T=at.hasEagerState?at.eagerState:h(T,yt)}else ot={lane:yt,revertLane:at.revertLane,gesture:at.gesture,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},K===null?(O=K=ot,C=T):K=K.next=ot,he.lanes|=yt,ao|=yt;at=at.next}while(at!==null&&at!==r);if(K===null?C=T:K.next=O,!hs(T,a.memoizedState)&&(li=!0,gt&&(h=Va,h!==null)))throw h;a.memoizedState=T,a.baseState=C,a.baseQueue=K,d.lastRenderedState=T}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function _g(a){var r=Zn(),h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var d=h.dispatch,v=h.pending,T=r.memoizedState;if(v!==null){h.pending=null;var C=v=v.next;do T=a(T,C.action),C=C.next;while(C!==v);hs(T,r.memoizedState)||(li=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),h.lastRenderedState=T}return[T,d]}function fy(a,r,h){var d=he,v=Zn(),T=Ce;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=r();var C=!hs((nn||v).memoizedState,h);if(C&&(v.memoizedState=h,li=!0),v=v.queue,wg(py.bind(null,d,v,a),[a]),v.getSnapshot!==r||C||Ae!==null&&Ae.memoizedState.tag&1){if(d.flags|=2048,Al(9,{destroy:void 0},my.bind(null,d,v,h,r),null),re===null)throw Error(i(349));T||(vn&127)!==0||dy(d,r,h)}return h}function dy(a,r,h){a.flags|=16384,a={getSnapshot:r,value:h},r=he.updateQueue,r===null?(r=em(),he.updateQueue=r,r.stores=[a]):(h=r.stores,h===null?r.stores=[a]:h.push(a))}function my(a,r,h,d){r.value=h,r.getSnapshot=d,gy(r)&&_y(a)}function py(a,r,h){return h(function(){gy(r)&&_y(a)})}function gy(a){var r=a.getSnapshot;a=a.value;try{var h=r();return!hs(a,h)}catch{return!0}}function _y(a){var r=fs(a,2);r!==null&&ye(r,a,2)}function yg(a){var r=mi();if(typeof a=="function"){var h=a;if(a=h(),Su){Xs(!0);try{h()}finally{Xs(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:a},r}function vg(a,r,h,d){return a.baseState=h,gg(a,nn,typeof d=="function"?d:ko)}function O2(a,r,h,d,v){if(rm(a))throw Error(i(485));if(a=r.action,a!==null){var T={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};W.T!==null?h(!0):T.isTransition=!1,d(T),h=r.pending,h===null?(T.next=r.pending=T,yy(r,T)):(T.next=h.next,r.pending=h.next=T)}}function yy(a,r){var h=r.action,d=r.payload,v=a.state;if(r.isTransition){var T=W.T,C={};W.T=C;try{var O=h(v,d),K=W.S;K!==null&&K(C,O),vy(a,r,O)}catch(at){Eg(a,r,at)}finally{T!==null&&C.types!==null&&(T.types=C.types),W.T=T}}else try{T=h(v,d),vy(a,r,T)}catch(at){Eg(a,r,at)}}function vy(a,r,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){Ey(a,r,d)},function(d){return Eg(a,r,d)}):Ey(a,r,h)}function Ey(a,r,h){r.status="fulfilled",r.value=h,Ty(r),a.state=h,r=a.pending,r!==null&&(h=r.next,h===r?a.pending=null:(h=h.next,r.next=h,yy(a,h)))}function Eg(a,r,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=h,Ty(r),r=r.next;while(r!==d)}a.action=null}function Ty(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Tg(a,r){return r}function Sg(a,r){if(Ce){var h=re.formState;if(h!==null){t:{var d=he;if(Ce){if(cn){e:{for(var v=cn,T=ia;v.nodeType!==8;){if(!T){v=null;break e}if(v=lo(v.nextSibling),v===null){v=null;break e}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){cn=lo(v.nextSibling),d=v.data==="F!";break t}}Yr(d)}d=!1}d&&(r=h[0])}}return h=mi(),h.memoizedState=h.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:r},h.queue=d,h=zy.bind(null,he,d),d.dispatch=h,d=yg(!1),T=Dg.bind(null,he,!1,d.queue),d=mi(),v={state:r,dispatch:null,action:a,pending:null},d.queue=v,h=O2.bind(null,he,v,T,h),v.dispatch=h,d.memoizedState=a,[r,h,!1]}function Sy(a){var r=Zn();return bg(r,nn,a)}function bg(a,r,h){if(r=gg(a,r,Tg)[0],a=nm(ko)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Tf(r)}catch(C){throw C===gu?ge:C}else d=r;r=Zn();var v=r.queue,T=v.dispatch;return h!==r.memoizedState&&(he.flags|=2048,Al(9,{destroy:void 0},by.bind(null,v,h),null)),[d,T,a]}function by(a,r){a.action=r}function Ag(a){var r=Zn(),h=nn;if(h!==null)return bg(r,h,a);Zn(),r=r.memoizedState,h=Zn();var d=h.queue.dispatch;return h.memoizedState=a,[r,d,!1]}function Al(a,r,h,d){return a={tag:a,create:h,deps:d,inst:r,next:null},r=he.updateQueue,r===null&&(r=em(),he.updateQueue=r),h=r.lastEffect,h===null?r.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,r.lastEffect=a),a}function im(){return Zn().memoizedState}function sm(a,r,h,d){var v=mi();he.flags|=a,v.memoizedState=Al(1|r,{destroy:void 0},h,d===void 0?null:d)}function am(a,r,h,d){var v=Zn();d=d===void 0?null:d;var T=v.memoizedState.inst;nn!==null&&d!==null&&hg(d,nn.memoizedState.deps)?v.memoizedState=Al(r,T,h,d):(he.flags|=a,v.memoizedState=Al(1|r,T,h,d))}function Ay(a,r){sm(8390656,8,a,r)}function wg(a,r){am(2048,8,a,r)}function wy(a){he.flags|=4;var r=he.updateQueue;if(r===null)r=em(),he.updateQueue=r,r.events=[a];else{var h=r.events;h===null?r.events=[a]:h.push(a)}}function Ry(a){var r=Zn().memoizedState;return wy({ref:r,nextImpl:a}),function(){if((Jt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Cy(a,r){return am(4,2,a,r)}function Iy(a,r){return am(4,4,a,r)}function Ny(a,r){if(typeof r=="function"){a=a();var h=r(a);return function(){typeof h=="function"?h():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function Dy(a,r,h){h=h!=null?h.concat([a]):null,am(4,4,Ny.bind(null,r,a),h)}function Rg(){}function xy(a,r){var h=Zn();r=r===void 0?null:r;var d=h.memoizedState;return r!==null&&hg(r,d[1])?d[0]:(h.memoizedState=[a,r],a)}function Oy(a,r){var h=Zn();r=r===void 0?null:r;var d=h.memoizedState;if(r!==null&&hg(r,d[1]))return d[0];if(d=a(),Su){Xs(!0);try{a()}finally{Xs(!1)}}return h.memoizedState=[d,r],d}function Cg(a,r,h){return h===void 0||(vn&1073741824)!==0&&(me&261930)===0?a.memoizedState=r:(a.memoizedState=h,a=Se(),he.lanes|=a,ao|=a,h)}function My(a,r,h,d){return hs(h,r)?h:jc.current!==null?(a=Cg(a,h,d),hs(a,r)||(li=!0),a):(vn&42)===0||(vn&1073741824)!==0&&(me&261930)===0?(li=!0,a.memoizedState=h):(a=Se(),he.lanes|=a,ao|=a,r)}function Py(a,r,h,d,v){var T=Et.p;Et.p=T!==0&&8>T?T:8;var C=W.T,O={};W.T=O,Dg(a,!1,r,h);try{var K=v(),at=W.S;if(at!==null&&at(O,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var gt=sg(K,d);Sf(a,r,gt,ca(a))}else Sf(a,r,d,ca(a))}catch(yt){Sf(a,r,{then:function(){},status:"rejected",reason:yt},ca())}finally{Et.p=T,C!==null&&O.types!==null&&(C.types=O.types),W.T=C}}function M2(){}function Ig(a,r,h,d){if(a.tag!==5)throw Error(i(476));var v=Vy(a).queue;Py(a,v,r,vt,h===null?M2:function(){return ky(a),h(d)})}function Vy(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:vt},next:null};var h={};return r.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:h},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function ky(a){var r=Vy(a);r.next===null&&(r=a.alternate.memoizedState),Sf(a,r.next.queue,{},ca())}function Ng(){return ae(Wg)}function Ly(){return Zn().memoizedState}function Uy(){return Zn().memoizedState}function P2(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var h=ca();a=Po(h);var d=Tl(r,a,h);d!==null&&(ye(d,r,h),Sl(d,r,h)),r={cache:eg()},a.payload=r;return}r=r.return}}function V2(a,r,h){var d=ca();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},rm(a)?By(r,h):(h=Ld(a,r,h,d),h!==null&&(ye(h,a,d),Gy(h,r,d)))}function zy(a,r,h){var d=ca();Sf(a,r,h,d)}function Sf(a,r,h,d){var v={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(rm(a))By(r,v);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,O=T(C,h);if(v.hasEagerState=!0,v.eagerState=O,hs(O,C))return Ci(a,r,v,0),re===null&&hf(),!1}catch{}if(h=Ld(a,r,v,d),h!==null)return ye(h,a,d),Gy(h,r,d),!0}return!1}function Dg(a,r,h,d){if(d={lane:2,revertLane:ct(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},rm(a)){if(r)throw Error(i(479))}else r=Ld(a,h,d,2),r!==null&&ye(r,a,2)}function rm(a){var r=a.alternate;return a===he||r!==null&&r===he}function By(a,r){Fc=La=!0;var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}function Gy(a,r,h){if((h&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,tl(a,h)}}var Yc={readContext:ae,use:bl,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};Yc.useEffectEvent=On;var qy={readContext:ae,use:bl,useCallback:function(a,r){return mi().memoizedState=[a,r===void 0?null:r],a},useContext:ae,useEffect:Ay,useImperativeHandle:function(a,r,h){h=h!=null?h.concat([a]):null,sm(4194308,4,Ny.bind(null,r,a),h)},useLayoutEffect:function(a,r){return sm(4194308,4,a,r)},useInsertionEffect:function(a,r){sm(4,2,a,r)},useMemo:function(a,r){var h=mi();r=r===void 0?null:r;var d=a();if(Su){Xs(!0);try{a()}finally{Xs(!1)}}return h.memoizedState=[d,r],d},useReducer:function(a,r,h){var d=mi();if(h!==void 0){var v=h(r);if(Su){Xs(!0);try{h(r)}finally{Xs(!1)}}}else v=r;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=V2.bind(null,he,a),[d.memoizedState,a]},useRef:function(a){var r=mi();return a={current:a},r.memoizedState=a},useState:function(a){a=yg(a);var r=a.queue,h=zy.bind(null,he,r);return r.dispatch=h,[a.memoizedState,h]},useDebugValue:Rg,useDeferredValue:function(a,r){var h=mi();return Cg(h,a,r)},useTransition:function(){var a=yg(!1);return a=Py.bind(null,he,a.queue,!0,!1),mi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,h){var d=he,v=mi();if(Ce){if(h===void 0)throw Error(i(407));h=h()}else{if(h=r(),re===null)throw Error(i(349));(me&127)!==0||dy(d,r,h)}v.memoizedState=h;var T={value:h,getSnapshot:r};return v.queue=T,Ay(py.bind(null,d,T,a),[a]),d.flags|=2048,Al(9,{destroy:void 0},my.bind(null,d,T,h,r),null),h},useId:function(){var a=mi(),r=re.identifierPrefix;if(Ce){var h=pr,d=xn;h=(d&~(1<<32-Qn(d)-1)).toString(32)+h,r="_"+r+"R_"+h,h=$d++,0<h&&(r+="H"+h.toString(32)),r+="_"}else h=cg++,r="_"+r+"r_"+h.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Ng,useFormState:Sg,useActionState:Sg,useOptimistic:function(a){var r=mi();r.memoizedState=r.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=h,r=Dg.bind(null,he,!0,h),h.dispatch=r,[a,r]},useMemoCache:pg,useCacheRefresh:function(){return mi().memoizedState=P2.bind(null,he)},useEffectEvent:function(a){var r=mi(),h={impl:a};return r.memoizedState=h,function(){if((Jt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},xg={readContext:ae,use:bl,useCallback:xy,useContext:ae,useEffect:wg,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:nm,useRef:im,useState:function(){return nm(ko)},useDebugValue:Rg,useDeferredValue:function(a,r){var h=Zn();return My(h,nn.memoizedState,a,r)},useTransition:function(){var a=nm(ko)[0],r=Zn().memoizedState;return[typeof a=="boolean"?a:Tf(a),r]},useSyncExternalStore:fy,useId:Ly,useHostTransitionStatus:Ng,useFormState:Sy,useActionState:Sy,useOptimistic:function(a,r){var h=Zn();return vg(h,nn,a,r)},useMemoCache:pg,useCacheRefresh:Uy};xg.useEffectEvent=Ry;var Ua={readContext:ae,use:bl,useCallback:xy,useContext:ae,useEffect:wg,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:_g,useRef:im,useState:function(){return _g(ko)},useDebugValue:Rg,useDeferredValue:function(a,r){var h=Zn();return nn===null?Cg(h,a,r):My(h,nn.memoizedState,a,r)},useTransition:function(){var a=_g(ko)[0],r=Zn().memoizedState;return[typeof a=="boolean"?a:Tf(a),r]},useSyncExternalStore:fy,useId:Ly,useHostTransitionStatus:Ng,useFormState:Ag,useActionState:Ag,useOptimistic:function(a,r){var h=Zn();return nn!==null?vg(h,nn,a,r):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:pg,useCacheRefresh:Uy};Ua.useEffectEvent=Ry;function om(a,r,h,d){r=a.memoizedState,h=h(d,r),h=h==null?r:b({},r,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var bf={enqueueSetState:function(a,r,h){a=a._reactInternals;var d=ca(),v=Po(d);v.payload=r,h!=null&&(v.callback=h),r=Tl(a,v,d),r!==null&&(ye(r,a,d),Sl(r,a,d))},enqueueReplaceState:function(a,r,h){a=a._reactInternals;var d=ca(),v=Po(d);v.tag=1,v.payload=r,h!=null&&(v.callback=h),r=Tl(a,v,d),r!==null&&(ye(r,a,d),Sl(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var h=ca(),d=Po(h);d.tag=2,r!=null&&(d.callback=r),r=Tl(a,d,h),r!==null&&(ye(r,a,h),Sl(r,a,h))}};function Og(a,r,h,d,v,T,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,T,C):r.prototype&&r.prototype.isPureReactComponent?!Nc(h,d)||!Nc(v,T):!0}function Mg(a,r,h,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,d),r.state!==a&&bf.enqueueReplaceState(r,r.state,null)}function wl(a,r){var h=r;if("ref"in r){h={};for(var d in r)d!=="ref"&&(h[d]=r[d])}if(a=a.defaultProps){h===r&&(h=b({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}function Hy(a){cf(a)}function Pg(a){console.error(a)}function Vg(a){cf(a)}function lm(a,r){try{var h=a.onUncaughtError;h(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function jy(a,r,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function kg(a,r,h){return h=Po(h),h.tag=3,h.payload={element:null},h.callback=function(){lm(a,r)},h}function Lg(a){return a=Po(a),a.tag=3,a}function Fy(a,r,h,d){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var T=d.value;a.payload=function(){return v(T)},a.callback=function(){jy(r,h,d)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){jy(r,h,d),typeof v!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function pi(a,r,h,d,v){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=h.alternate,r!==null&&Wr(r,h,v,!0),h=Vs.current,h!==null){switch(h.tag){case 31:case 13:return ms===null?th():h.alternate===null&&Mn===0&&(Mn=3),h.flags&=-257,h.flags|=65536,h.lanes=v,d===Qd?h.flags|=16384:(r=h.updateQueue,r===null?h.updateQueue=new Set([d]):r.add(d),Vf(a,d,v)),!1;case 22:return h.flags|=65536,d===Qd?h.flags|=16384:(r=h.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=r):(h=r.retryQueue,h===null?r.retryQueue=new Set([d]):h.add(d)),Vf(a,d,v)),!1}throw Error(i(435,h.tag))}return Vf(a,d,v),th(),!1}if(Ce)return r=Vs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==Lc&&(a=Error(i(422),{cause:d}),Qr(na(a,h)))):(d!==Lc&&(r=Error(i(423),{cause:d}),Qr(na(r,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=na(d,h),v=kg(a.stateNode,d,v),Zt(a,v),Mn!==4&&(Mn=2)),!1;var T=Error(i(520),{cause:d});if(T=na(T,h),Ou===null?Ou=[T]:Ou.push(T),Mn!==4&&(Mn=2),r===null)return!0;d=na(d,h),h=r;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=kg(h.stateNode,d,a),Zt(h,a),!1;case 1:if(r=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ei===null||!ei.has(T))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Lg(v),Fy(v,a,h,d),Zt(h,v),!1}h=h.return}while(h!==null);return!1}var um=Error(i(461)),li=!1;function Ii(a,r,h,d){r.child=a===null?Wd(r,null,h,d):Mo(r,a.child,h,d)}function Ug(a,r,h,d,v){h=h.render;var T=r.ref;if("ref"in d){var C={};for(var O in d)O!=="ref"&&(C[O]=d[O])}else C=d;return vl(r),d=tm(a,r,h,C,T,v),O=fg(),a!==null&&!li?(dg(a,r,v),$n(a,r,v)):(Ce&&O&&Kr(r),r.flags|=1,Ii(a,r,d,v),r.child)}function wu(a,r,h,d,v){if(a===null){var T=h.type;return typeof T=="function"&&!Ud(T)&&T.defaultProps===void 0&&h.compare===null?(r.tag=15,r.type=T,cm(a,r,T,d,v)):(a=jr(h.type,null,d,r,r.mode,v),a.ref=r.ref,a.return=r,r.child=a)}if(T=a.child,!gm(a,v)){var C=T.memoizedProps;if(h=h.compare,h=h!==null?h:Nc,h(C,d)&&a.ref===r.ref)return $n(a,r,v)}return r.flags|=1,a=Os(T,d),a.ref=r.ref,a.return=r,r.child=a}function cm(a,r,h,d,v){if(a!==null){var T=a.memoizedProps;if(Nc(T,d)&&a.ref===r.ref)if(li=!1,r.pendingProps=d=T,gm(a,v))(a.flags&131072)!==0&&(li=!0);else return r.lanes=a.lanes,$n(a,r,v)}return Qc(a,r,h,d,v)}function Ru(a,r,h,d){var v=d.children,T=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,a!==null){for(d=r.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~T}else d=0,r.child=null;return Ls(a,r,T,h,d)}if((h&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&mf(r,T!==null?T.cachePool:null),T!==null?uy(r,T):lg(),cy(r);else return d=r.lanes=536870912,Ls(a,r,T!==null?T.baseLanes|h:h,h,d)}else T!==null?(mf(r,T.cachePool),uy(r,T),ks(),r.memoizedState=null):(a!==null&&mf(r,null),lg(),ks());return Ii(a,r,v,h),r.child}function $r(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ls(a,r,h,d,v){var T=Yd();return T=T===null?null:{parent:oi._currentValue,pool:T},r.memoizedState={baseLanes:h,cachePool:T},a!==null&&mf(r,null),lg(),cy(r),a!==null&&Wr(a,r,d,!0),r.childLanes=v,null}function hm(a,r){return r=pm({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function Ky(a,r,h){return Mo(r,a.child,null,h),a=hm(r,r.pendingProps),a.flags|=2,Wn(r),r.memoizedState=null,a}function fm(a,r,h){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(Ce){if(d.mode==="hidden")return a=hm(r,d),r.lanes=536870912,$r(null,a);if(ug(r),(a=cn)?(a=D4(a,ia),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:No!==null?{id:xn,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},h=Pc(a),h.return=r,r.child=h,Gn=r,cn=null)):a=null,a===null)throw Yr(r);return r.lanes=536870912,null}return hm(r,d)}var T=a.memoizedState;if(T!==null){var C=T.dehydrated;if(ug(r),v)if(r.flags&256)r.flags&=-257,r=Ky(a,r,h);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(i(558));else if(li||Wr(a,r,h,!1),v=(h&a.childLanes)!==0,li||v){if(d=re,d!==null&&(C=fc(d,h),C!==0&&C!==T.retryLane))throw T.retryLane=C,fs(a,C),ye(d,a,C),um;th(),r=Ky(a,r,h)}else a=T.treeContext,cn=lo(C.nextSibling),Gn=r,Ce=!0,Do=null,ia=!1,a!==null&&qd(r,a),r=hm(r,d),r.flags|=4096;return r}return a=Os(a.child,{mode:d.mode,children:d.children}),a.ref=r.ref,r.child=a,a.return=r,a}function Cu(a,r){var h=r.ref;if(h===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(r.flags|=4194816)}}function Qc(a,r,h,d,v){return vl(r),h=tm(a,r,h,d,void 0,v),d=fg(),a!==null&&!li?(dg(a,r,v),$n(a,r,v)):(Ce&&d&&Kr(r),r.flags|=1,Ii(a,r,h,v),r.child)}function Af(a,r,h,d,v,T){return vl(r),r.updateQueue=null,h=bu(r,d,h,v),hy(a),d=fg(),a!==null&&!li?(dg(a,r,T),$n(a,r,T)):(Ce&&d&&Kr(r),r.flags|=1,Ii(a,r,h,T),r.child)}function dm(a,r,h,d,v){if(vl(r),r.stateNode===null){var T=dl,C=h.contextType;typeof C=="object"&&C!==null&&(T=ae(C)),T=new h(d,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=bf,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=d,T.state=r.memoizedState,T.refs={},_f(r),C=h.contextType,T.context=typeof C=="object"&&C!==null?ae(C):dl,T.state=r.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(om(r,h,C,d),T.state=r.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&bf.enqueueReplaceState(T,T.state,null),qc(r,d,T,v),yf(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){T=r.stateNode;var O=r.memoizedProps,K=wl(h,O);T.props=K;var at=T.context,gt=h.contextType;C=dl,typeof gt=="object"&&gt!==null&&(C=ae(gt));var yt=h.getDerivedStateFromProps;gt=typeof yt=="function"||typeof T.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,gt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O||at!==C)&&Mg(r,T,d,C),ds=!1;var ot=r.memoizedState;T.state=ot,qc(r,d,T,v),yf(),at=r.memoizedState,O||ot!==at||ds?(typeof yt=="function"&&(om(r,h,yt,d),at=r.memoizedState),(K=ds||Og(r,h,K,d,ot,at,C))?(gt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=at),T.props=d,T.state=at,T.context=C,d=K):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{T=r.stateNode,rg(a,r),C=r.memoizedProps,gt=wl(h,C),T.props=gt,yt=r.pendingProps,ot=T.context,at=h.contextType,K=dl,typeof at=="object"&&at!==null&&(K=ae(at)),O=h.getDerivedStateFromProps,(at=typeof O=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==yt||ot!==K)&&Mg(r,T,d,K),ds=!1,ot=r.memoizedState,T.state=ot,qc(r,d,T,v),yf();var mt=r.memoizedState;C!==yt||ot!==mt||ds||a!==null&&a.dependencies!==null&&df(a.dependencies)?(typeof O=="function"&&(om(r,h,O,d),mt=r.memoizedState),(gt=ds||Og(r,h,gt,d,ot,mt,K)||a!==null&&a.dependencies!==null&&df(a.dependencies))?(at||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,mt,K),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,mt,K)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=mt),T.props=d,T.state=mt,T.context=K,d=gt):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ot===a.memoizedState||(r.flags|=1024),d=!1)}return T=d,Cu(a,r),d=(r.flags&128)!==0,T||d?(T=r.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,a!==null&&d?(r.child=Mo(r,a.child,null,v),r.child=Mo(r,null,h,v)):Ii(a,r,h,v),r.memoizedState=T.state,a=r.child):a=$n(a,r,v),a}function Yy(a,r,h,d){return _l(),r.flags|=256,Ii(a,r,h,d),r.child}var zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ns(a){return{baseLanes:a,cachePool:ag()}}function mm(a,r,h){return a=a!==null?a.childLanes&~h:0,r&&(a|=ys),a}function Qy(a,r,h){var d=r.pendingProps,v=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=a!==null&&a.memoizedState===null?!1:(Ie.current&2)!==0),C&&(v=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,a===null){if(Ce){if(v?Vo(r):ks(),(a=cn)?(a=D4(a,ia),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:No!==null?{id:xn,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},h=Pc(a),h.return=r,r.child=h,Gn=r,cn=null)):a=null,a===null)throw Yr(r);return X2(a)?r.lanes=32:r.lanes=536870912,null}var O=d.children;return d=d.fallback,v?(ks(),v=r.mode,O=pm({mode:"hidden",children:O},v),d=ml(d,v,h,null),O.return=r,d.return=r,O.sibling=d,r.child=O,d=r.child,d.memoizedState=ns(h),d.childLanes=mm(a,C,h),r.memoizedState=zg,$r(null,d)):(Vo(r),wf(r,O))}var K=a.memoizedState;if(K!==null&&(O=K.dehydrated,O!==null)){if(T)r.flags&256?(Vo(r),r.flags&=-257,r=Bg(a,r,h)):r.memoizedState!==null?(ks(),r.child=a.child,r.flags|=128,r=null):(ks(),O=d.fallback,v=r.mode,d=pm({mode:"visible",children:d.children},v),O=ml(O,v,h,null),O.flags|=2,d.return=r,O.return=r,d.sibling=O,r.child=d,Mo(r,a.child,null,h),d=r.child,d.memoizedState=ns(h),d.childLanes=mm(a,C,h),r.memoizedState=zg,r=$r(null,d));else if(Vo(r),X2(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var at=C.dgst;C=at,d=Error(i(419)),d.stack="",d.digest=C,Qr({value:d,source:null,stack:null}),r=Bg(a,r,h)}else if(li||Wr(a,r,h,!1),C=(h&a.childLanes)!==0,li||C){if(C=re,C!==null&&(d=fc(C,h),d!==0&&d!==K.retryLane))throw K.retryLane=d,fs(a,d),ye(C,a,d),um;Q2(O)||th(),r=Bg(a,r,h)}else Q2(O)?(r.flags|=192,r.child=a.child,r=null):(a=K.treeContext,cn=lo(O.nextSibling),Gn=r,Ce=!0,Do=null,ia=!1,a!==null&&qd(r,a),r=wf(r,d.children),r.flags|=4096);return r}return v?(ks(),O=d.fallback,v=r.mode,K=a.child,at=K.sibling,d=Os(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,at!==null?O=Os(at,O):(O=ml(O,v,h,null),O.flags|=2),O.return=r,d.return=r,d.sibling=O,r.child=d,$r(null,d),d=r.child,O=a.child.memoizedState,O===null?O=ns(h):(v=O.cachePool,v!==null?(K=oi._currentValue,v=v.parent!==K?{parent:K,pool:K}:v):v=ag(),O={baseLanes:O.baseLanes|h,cachePool:v}),d.memoizedState=O,d.childLanes=mm(a,C,h),r.memoizedState=zg,$r(a.child,d)):(Vo(r),h=a.child,a=h.sibling,h=Os(h,{mode:"visible",children:d.children}),h.return=r,h.sibling=null,a!==null&&(C=r.deletions,C===null?(r.deletions=[a],r.flags|=16):C.push(a)),r.child=h,r.memoizedState=null,h)}function wf(a,r){return r=pm({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function pm(a,r){return a=Dn(22,a,null,r),a.lanes=0,a}function Bg(a,r,h){return Mo(r,a.child,null,h),a=wf(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function Xy(a,r,h){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),jd(a.return,r,h)}function Iu(a,r,h,d,v,T){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:v,treeForkCount:T}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=h,C.tailMode=v,C.treeForkCount=T)}function Us(a,r,h){var d=r.pendingProps,v=d.revealOrder,T=d.tail;d=d.children;var C=Ie.current,O=(C&2)!==0;if(O?(C=C&1|2,r.flags|=128):C&=1,Nt(Ie,C),Ii(a,r,d,h),d=Ce?kc:0,!O&&a!==null&&(a.flags&128)!==0)t:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Xy(a,h,r);else if(a.tag===19)Xy(a,h,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(h=r.child,v=null;h!==null;)a=h.alternate,a!==null&&aa(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),Iu(r,!1,v,h,T,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(a=v.alternate,a!==null&&aa(a)===null){r.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}Iu(r,!0,h,null,T,d);break;case"together":Iu(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function $n(a,r,h){if(a!==null&&(r.dependencies=a.dependencies),ao|=r.lanes,(h&r.childLanes)===0)if(a!==null){if(Wr(a,r,h,!1),(h&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,h=Os(a,a.pendingProps),r.child=h,h.return=r;a.sibling!==null;)a=a.sibling,h=h.sibling=Os(a,a.pendingProps),h.return=r;h.sibling=null}return r.child}function gm(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&df(a)))}function k2(a,r,h){switch(r.tag){case 3:mn(r,r.stateNode.containerInfo),xo(r,oi,a.memoizedState.cache),_l();break;case 27:case 5:$a(r);break;case 4:mn(r,r.stateNode.containerInfo);break;case 10:xo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ug(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Vo(r),r.flags|=128,null):(h&r.child.childLanes)!==0?Qy(a,r,h):(Vo(r),a=$n(a,r,h),a!==null?a.sibling:null);Vo(r);break;case 19:var v=(a.flags&128)!==0;if(d=(h&r.childLanes)!==0,d||(Wr(a,r,h,!1),d=(h&r.childLanes)!==0),v){if(d)return Us(a,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Nt(Ie,Ie.current),d)break;return null;case 22:return r.lanes=0,Ru(a,r,h,r.pendingProps);case 24:xo(r,oi,a.memoizedState.cache)}return $n(a,r,h)}function _m(a,r,h){if(a!==null)if(a.memoizedProps!==r.pendingProps)li=!0;else{if(!gm(a,h)&&(r.flags&128)===0)return li=!1,k2(a,r,h);li=(a.flags&131072)!==0}else li=!1,Ce&&(r.flags&1048576)!==0&&ny(r,kc,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(a=_u(r.elementType),r.type=a,typeof a=="function")Ud(a)?(d=wl(a,d),r.tag=1,r=dm(null,r,a,d,h)):(r.tag=0,r=Qc(null,r,a,d,h));else{if(a!=null){var v=a.$$typeof;if(v===Z){r.tag=11,r=Ug(null,r,a,d,h);break t}else if(v===k){r.tag=14,r=wu(null,r,a,d,h);break t}}throw r=Ht(a)||a,Error(i(306,r,""))}}return r;case 0:return Qc(a,r,r.type,r.pendingProps,h);case 1:return d=r.type,v=wl(d,r.pendingProps),dm(a,r,d,v,h);case 3:t:{if(mn(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var T=r.memoizedState;v=T.element,rg(a,r),qc(r,d,null,h);var C=r.memoizedState;if(d=C.cache,xo(r,oi,d),d!==T.cache&&Fd(r,[oi],h,!0),yf(),d=C.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=Yy(a,r,d,h);break t}else if(d!==v){v=na(Error(i(424)),r),Qr(v),r=Yy(a,r,d,h);break t}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,cn=lo(a.firstChild),Gn=r,Ce=!0,Do=null,ia=!0,h=Wd(r,null,d,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(_l(),d===v){r=$n(a,r,h);break t}Ii(a,r,d,h)}r=r.child}return r;case 26:return Cu(a,r),a===null?(h=k4(r.type,null,r.pendingProps,null))?r.memoizedState=h:Ce||(h=r.type,a=r.pendingProps,d=$y(ie.current).createElement(h),d[Nn]=r,d[ri]=a,Es(d,h,a),zn(d),r.stateNode=d):r.memoizedState=k4(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return $a(r),a===null&&Ce&&(d=r.stateNode=M4(r.type,r.pendingProps,ie.current),Gn=r,ia=!0,v=cn,sh(r.type)?(J2=v,cn=lo(d.firstChild)):cn=v),Ii(a,r,r.pendingProps.children,h),Cu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&Ce&&((v=d=cn)&&(d=KI(d,r.type,r.pendingProps,ia),d!==null?(r.stateNode=d,Gn=r,cn=lo(d.firstChild),ia=!1,v=!0):v=!1),v||Yr(r)),$a(r),v=r.type,T=r.pendingProps,C=a!==null?a.memoizedProps:null,d=T.children,F2(v,T)?d=null:C!==null&&F2(v,C)&&(r.flags|=32),r.memoizedState!==null&&(v=tm(a,r,Au,null,null,h),Wg._currentValue=v),Cu(a,r),Ii(a,r,d,h),r.child;case 6:return a===null&&Ce&&((a=h=cn)&&(h=YI(h,r.pendingProps,ia),h!==null?(r.stateNode=h,Gn=r,cn=null,a=!0):a=!1),a||Yr(r)),null;case 13:return Qy(a,r,h);case 4:return mn(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=Mo(r,null,d,h):Ii(a,r,d,h),r.child;case 11:return Ug(a,r,r.type,r.pendingProps,h);case 7:return Ii(a,r,r.pendingProps,h),r.child;case 8:return Ii(a,r,r.pendingProps.children,h),r.child;case 12:return Ii(a,r,r.pendingProps.children,h),r.child;case 10:return d=r.pendingProps,xo(r,r.type,d.value),Ii(a,r,d.children,h),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,vl(r),v=ae(v),d=d(v),r.flags|=1,Ii(a,r,d,h),r.child;case 14:return wu(a,r,r.type,r.pendingProps,h);case 15:return cm(a,r,r.type,r.pendingProps,h);case 19:return Us(a,r,h);case 31:return fm(a,r,h);case 22:return Ru(a,r,h,r.pendingProps);case 24:return vl(r),d=ae(oi),a===null?(v=Yd(),v===null&&(v=re,T=eg(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=h),v=T),r.memoizedState={parent:d,cache:v},_f(r),xo(r,oi,v)):((a.lanes&h)!==0&&(rg(a,r),qc(r,null,null,h),yf()),v=a.memoizedState,T=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),xo(r,oi,d)):(d=T.cache,xo(r,oi,d),d!==v.cache&&Fd(r,[oi],h,!0))),Ii(a,r,r.pendingProps.children,h),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function to(a){a.flags|=4}function Rf(a,r,h,d,v){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(Vn())a.flags|=8192;else throw Zr=Qd,pf}else a.flags&=-16777217}function Gg(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!G4(r))if(Vn())a.flags|=8192;else throw Zr=Qd,pf}function Lo(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Ir():536870912,a.lanes|=r,gn|=r)}function eo(a,r){if(!Ce)switch(a.tailMode){case"hidden":r=a.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function sn(a){var r=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(r)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=h,r}function Cf(a,r,h){var d=r.pendingProps;switch(Gd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(r),null;case 1:return sn(r),null;case 3:return h=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Jr(oi),Ne(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Uc(r)?to(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hd())),sn(r),null;case 26:var v=r.type,T=r.memoizedState;return a===null?(to(r),T!==null?(sn(r),Gg(r,T)):(sn(r),Rf(r,v,null,d,h))):T?T!==a.memoizedState?(to(r),sn(r),Gg(r,T)):(sn(r),r.flags&=-16777217):(a=a.memoizedProps,a!==d&&to(r),sn(r),Rf(r,v,a,d,h)),null;case 27:if(yo(r),h=ie.current,v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&to(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return sn(r),null}a=Gt.current,Uc(r)?iy(r):(a=M4(v,d,h),r.stateNode=a,to(r))}return sn(r),null;case 5:if(yo(r),v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&to(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return sn(r),null}if(T=Gt.current,Uc(r))iy(r);else{var C=$y(ie.current);switch(T){case 1:T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=C.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?C.createElement(v,{is:d.is}):C.createElement(v)}}T[Nn]=r,T[ri]=d;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)T.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=T;t:switch(Es(T,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&to(r)}}return sn(r),Rf(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,h),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&to(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=ie.current,Uc(r)){if(a=r.stateNode,h=r.memoizedProps,d=null,v=Gn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[Nn]=r,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||S4(a.nodeValue,h)),a||Yr(r,!0)}else a=$y(a).createTextNode(d),a[Nn]=r,r.stateNode=a}return sn(r),null;case 31:if(h=r.memoizedState,a===null||a.memoizedState!==null){if(d=Uc(r),h!==null){if(a===null){if(!d)throw Error(i(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[Nn]=r}else _l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sn(r),a=!1}else h=Hd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return r.flags&256?(Wn(r),r):(Wn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return sn(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Uc(r),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Nn]=r}else _l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sn(r),v=!1}else v=Hd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Wn(r),r):(Wn(r),null)}return Wn(r),(r.flags&128)!==0?(r.lanes=h,r):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==v&&(d.flags|=2048)),h!==a&&h&&(r.child.flags|=8192),Lo(r,r.updateQueue),sn(r),null);case 4:return Ne(),a===null&&B2(r.stateNode.containerInfo),sn(r),null;case 10:return Jr(r.type),sn(r),null;case 19:if(dt(Ie),d=r.memoizedState,d===null)return sn(r),null;if(v=(r.flags&128)!==0,T=d.rendering,T===null)if(v)eo(d,!1);else{if(Mn!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(T=aa(a),T!==null){for(r.flags|=128,eo(d,!1),a=T.updateQueue,r.updateQueue=a,Lo(r,a),r.subtreeFlags=0,a=h,h=r.child;h!==null;)Mc(h,a),h=h.sibling;return Nt(Ie,Ie.current&1|2),Ce&&Fr(r,d.treeForkCount),r.child}a=a.sibling}d.tail!==null&&St()>ti&&(r.flags|=128,v=!0,eo(d,!1),r.lanes=4194304)}else{if(!v)if(a=aa(T),a!==null){if(r.flags|=128,v=!0,a=a.updateQueue,r.updateQueue=a,Lo(r,a),eo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!Ce)return sn(r),null}else 2*St()-d.renderingStartTime>ti&&h!==536870912&&(r.flags|=128,v=!0,eo(d,!1),r.lanes=4194304);d.isBackwards?(T.sibling=r.child,r.child=T):(a=d.last,a!==null?a.sibling=T:r.child=T,d.last=T)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=St(),a.sibling=null,h=Ie.current,Nt(Ie,v?h&1|2:h&1),Ce&&Fr(r,d.treeForkCount),a):(sn(r),null);case 22:case 23:return Wn(r),vf(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(h&536870912)!==0&&(r.flags&128)===0&&(sn(r),r.subtreeFlags&6&&(r.flags|=8192)):sn(r),h=r.updateQueue,h!==null&&Lo(r,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048),a!==null&&dt(El),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Jr(oi),sn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function za(a,r){switch(Gd(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return Jr(oi),Ne(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return yo(r),null;case 31:if(r.memoizedState!==null){if(Wn(r),r.alternate===null)throw Error(i(340));_l()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(Wn(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));_l()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return dt(Ie),null;case 4:return Ne(),null;case 10:return Jr(r.type),null;case 22:case 23:return Wn(r),vf(),a!==null&&dt(El),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return Jr(oi),null;case 25:return null;default:return null}}function ra(a,r){switch(Gd(r),r.tag){case 3:Jr(oi),Ne();break;case 26:case 27:case 5:yo(r);break;case 4:Ne();break;case 31:r.memoizedState!==null&&Wn(r);break;case 13:Wn(r);break;case 19:dt(Ie);break;case 10:Jr(r.type);break;case 22:case 23:Wn(r),vf(),a!==null&&dt(El);break;case 24:Jr(oi)}}function Ba(a,r){try{var h=r.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var v=d.next;h=v;do{if((h.tag&a)===a){d=void 0;var T=h.create,C=h.inst;d=T(),C.destroy=d}h=h.next}while(h!==v)}}catch(O){Be(r,r.return,O)}}function qi(a,r,h){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var T=v.next;d=T;do{if((d.tag&a)===a){var C=d.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,v=r;var K=h,at=O;try{at()}catch(gt){Be(v,K,gt)}}}d=d.next}while(d!==T)}}catch(gt){Be(r,r.return,gt)}}function gr(a){var r=a.updateQueue;if(r!==null){var h=a.stateNode;try{ly(r,h)}catch(d){Be(a,a.return,d)}}}function Ni(a,r,h){h.props=wl(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){Be(a,r,d)}}function Uo(a,r){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(v){Be(a,r,v)}}function Hi(a,r){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(v){Be(a,r,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){Be(a,r,v)}else h.current=null}function If(a){var r=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(v){Be(a,a.return,v)}}function gi(a,r,h){try{var d=a.stateNode;BI(d,a.type,h,r),d[ri]=r}catch(v){Be(a,a.return,v)}}function En(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&sh(a.type)||a.tag===4}function we(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||En(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&sh(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function no(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,r):(r=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,r.appendChild(a),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=lr));else if(d!==4&&(d===27&&sh(a.type)&&(h=a.stateNode,r=null),a=a.child,a!==null))for(no(a,r,h),a=a.sibling;a!==null;)no(a,r,h),a=a.sibling}function ps(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?h.insertBefore(a,r):h.appendChild(a);else if(d!==4&&(d===27&&sh(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(ps(a,r,h),a=a.sibling;a!==null;)ps(a,r,h),a=a.sibling}function ym(a){var r=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Es(r,d,h),r[Nn]=a,r[ri]=h}catch(T){Be(a,a.return,T)}}var Ga=!1,hn=!1,_r=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,Di=null;function L2(a,r){if(a=a.containerInfo,H2=r1,a=Z_(a),Jp(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var v=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break t}var C=0,O=-1,K=-1,at=0,gt=0,yt=a,ot=null;e:for(;;){for(var mt;yt!==h||v!==0&&yt.nodeType!==3||(O=C+v),yt!==T||d!==0&&yt.nodeType!==3||(K=C+d),yt.nodeType===3&&(C+=yt.nodeValue.length),(mt=yt.firstChild)!==null;)ot=yt,yt=mt;for(;;){if(yt===a)break e;if(ot===h&&++at===v&&(O=C),ot===T&&++gt===d&&(K=C),(mt=yt.nextSibling)!==null)break;yt=ot,ot=yt.parentNode}yt=mt}h=O===-1||K===-1?null:{start:O,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(j2={focusedElem:a,selectionRange:h},r1=!1,Di=r;Di!==null;)if(r=Di,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Di=a;else for(;Di!==null;){switch(r=Di,T=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)v=a[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,h=r,v=T.memoizedProps,T=T.memoizedState,d=h.stateNode;try{var Ft=wl(h.type,v);a=d.getSnapshotBeforeUpdate(Ft,T),d.__reactInternalSnapshotBeforeUpdate=a}catch(se){Be(h,h.return,se)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,h=a.nodeType,h===9)Y2(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Y2(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Di=a;break}Di=r.return}}function Tn(a,r,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:ja(a,h),d&4&&Ba(5,h);break;case 1:if(ja(a,h),d&4)if(a=h.stateNode,r===null)try{a.componentDidMount()}catch(C){Be(h,h.return,C)}else{var v=wl(h.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(v,r,a.__reactInternalSnapshotBeforeUpdate)}catch(C){Be(h,h.return,C)}}d&64&&gr(h),d&512&&Uo(h,h.return);break;case 3:if(ja(a,h),d&64&&(a=h.updateQueue,a!==null)){if(r=null,h.child!==null)switch(h.child.tag){case 27:case 5:r=h.child.stateNode;break;case 1:r=h.child.stateNode}try{ly(a,r)}catch(C){Be(h,h.return,C)}}break;case 27:r===null&&d&4&&ym(h);case 26:case 5:ja(a,h),r===null&&d&4&&If(h),d&512&&Uo(h,h.return);break;case 12:ja(a,h);break;case 31:ja(a,h),d&4&&Rl(a,h);break;case 13:ja(a,h),d&4&&Xc(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=p.bind(null,h),QI(a,h))));break;case 22:if(d=h.memoizedState!==null||Ga,!d){r=r!==null&&r.memoizedState!==null||hn,v=Ga;var T=hn;Ga=d,(hn=r)&&!T?gs(a,h,(h.subtreeFlags&8772)!==0):ja(a,h),Ga=v,hn=T}break;case 30:break;default:ja(a,h)}}function Nf(a){var r=a.alternate;r!==null&&(a.alternate=null,Nf(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&xr(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ze=null,is=!1;function qa(a,r,h){for(h=h.child;h!==null;)vm(a,r,h),h=h.sibling}function vm(a,r,h){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(Ea,h)}catch{}switch(h.tag){case 26:hn||Hi(h,r),qa(a,r,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:hn||Hi(h,r);var d=Ze,v=is;sh(h.type)&&(Ze=h.stateNode,is=!1),qa(a,r,h),Qg(h.stateNode),Ze=d,is=v;break;case 5:hn||Hi(h,r);case 6:if(d=Ze,v=is,Ze=null,qa(a,r,h),Ze=d,is=v,Ze!==null)if(is)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(h.stateNode)}catch(T){Be(h,r,T)}else try{Ze.removeChild(h.stateNode)}catch(T){Be(h,r,T)}break;case 18:Ze!==null&&(is?(a=Ze,I4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Cm(a)):I4(Ze,h.stateNode));break;case 4:d=Ze,v=is,Ze=h.stateNode.containerInfo,is=!0,qa(a,r,h),Ze=d,is=v;break;case 0:case 11:case 14:case 15:qi(2,h,r),hn||qi(4,h,r),qa(a,r,h);break;case 1:hn||(Hi(h,r),d=h.stateNode,typeof d.componentWillUnmount=="function"&&Ni(h,r,d)),qa(a,r,h);break;case 21:qa(a,r,h);break;case 22:hn=(d=hn)||h.memoizedState!==null,qa(a,r,h),hn=d;break;default:qa(a,r,h)}}function Rl(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Cm(a)}catch(h){Be(r,r.return,h)}}}function Xc(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Cm(a)}catch(h){Be(r,r.return,h)}}function qg(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new Jy),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new Jy),r;default:throw Error(i(435,a.tag))}}function zo(a,r){var h=qg(a);r.forEach(function(d){if(!h.has(d)){h.add(d);var v=y.bind(null,a,d);d.then(v,v)}})}function _i(a,r){var h=r.deletions;if(h!==null)for(var d=0;d<h.length;d++){var v=h[d],T=a,C=r,O=C;t:for(;O!==null;){switch(O.tag){case 27:if(sh(O.type)){Ze=O.stateNode,is=!1;break t}break;case 5:Ze=O.stateNode,is=!1;break t;case 3:case 4:Ze=O.stateNode.containerInfo,is=!0;break t}O=O.return}if(Ze===null)throw Error(i(160));vm(T,C,v),Ze=null,is=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Cl(r,a),r=r.sibling}var Ha=null;function Cl(a,r){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:_i(r,a),yi(a),d&4&&(qi(3,a,a.return),Ba(3,a),qi(5,a,a.return));break;case 1:_i(r,a),yi(a),d&512&&(hn||h===null||Hi(h,h.return)),d&64&&Ga&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var v=Ha;if(_i(r,a),yi(a),d&512&&(hn||h===null||Hi(h,h.return)),d&4){var T=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":T=v.getElementsByTagName("title")[0],(!T||T[Is]||T[Nn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(d),v.head.insertBefore(T,v.querySelector("head > title"))),Es(T,d,h),T[Nn]=a,zn(T),d=T;break t;case"link":var C=z4("link","href",v).get(d+(h.href||""));if(C){for(var O=0;O<C.length;O++)if(T=C[O],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(O,1);break e}}T=v.createElement(d),Es(T,d,h),v.head.appendChild(T);break;case"meta":if(C=z4("meta","content",v).get(d+(h.content||""))){for(O=0;O<C.length;O++)if(T=C[O],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(O,1);break e}}T=v.createElement(d),Es(T,d,h),v.head.appendChild(T);break;default:throw Error(i(468,d))}T[Nn]=a,zn(T),d=T}a.stateNode=d}else B4(v,a.type,a.stateNode);else a.stateNode=U4(v,d,a.memoizedProps);else T!==d?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,d===null?B4(v,a.type,a.stateNode):U4(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&gi(a,a.memoizedProps,h.memoizedProps)}break;case 27:_i(r,a),yi(a),d&512&&(hn||h===null||Hi(h,h.return)),h!==null&&d&4&&gi(a,a.memoizedProps,h.memoizedProps);break;case 5:if(_i(r,a),yi(a),d&512&&(hn||h===null||Hi(h,h.return)),a.flags&32){v=a.stateNode;try{ls(v,"")}catch(Ft){Be(a,a.return,Ft)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,gi(a,v,h!==null?h.memoizedProps:v)),d&1024&&(_r=!0);break;case 6:if(_i(r,a),yi(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(Ft){Be(a,a.return,Ft)}}break;case 3:if(n1=null,v=Ha,Ha=t1(r.containerInfo),_i(r,a),Ha=v,yi(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Cm(r.containerInfo)}catch(Ft){Be(a,a.return,Ft)}_r&&(_r=!1,Em(a));break;case 4:d=Ha,Ha=t1(a.stateNode.containerInfo),_i(r,a),yi(a),Ha=d;break;case 12:_i(r,a),yi(a);break;case 31:_i(r,a),yi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,zo(a,d)));break;case 13:_i(r,a),yi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Jc=St()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,zo(a,d)));break;case 22:v=a.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,at=Ga,gt=hn;if(Ga=at||v,hn=gt||K,_i(r,a),hn=gt,Ga=at,yi(a),d&8192)t:for(r=a.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(h===null||K||Ga||hn||io(a)),h=null,r=a;;){if(r.tag===5||r.tag===26){if(h===null){K=h=r;try{if(T=K.stateNode,v)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=K.stateNode;var yt=K.memoizedProps.style,ot=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;O.style.display=ot==null||typeof ot=="boolean"?"":(""+ot).trim()}}catch(Ft){Be(K,K.return,Ft)}}}else if(r.tag===6){if(h===null){K=r;try{K.stateNode.nodeValue=v?"":K.memoizedProps}catch(Ft){Be(K,K.return,Ft)}}}else if(r.tag===18){if(h===null){K=r;try{var mt=K.stateNode;v?N4(mt,!0):N4(K.stateNode,!1)}catch(Ft){Be(K,K.return,Ft)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;h===r&&(h=null),r=r.return}h===r&&(h=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,zo(a,h))));break;case 19:_i(r,a),yi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,zo(a,d)));break;case 30:break;case 21:break;default:_i(r,a),yi(a)}}function yi(a){var r=a.flags;if(r&2){try{for(var h,d=a.return;d!==null;){if(En(d)){h=d;break}d=d.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,T=we(a);ps(a,T,v);break;case 5:var C=h.stateNode;h.flags&32&&(ls(C,""),h.flags&=-33);var O=we(a);ps(a,O,C);break;case 3:case 4:var K=h.stateNode.containerInfo,at=we(a);no(a,at,K);break;default:throw Error(i(161))}}catch(gt){Be(a,a.return,gt)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Em(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Em(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function ja(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Tn(a,r.alternate,r),r=r.sibling}function io(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:qi(4,r,r.return),io(r);break;case 1:Hi(r,r.return);var h=r.stateNode;typeof h.componentWillUnmount=="function"&&Ni(r,r.return,h),io(r);break;case 27:Qg(r.stateNode);case 26:case 5:Hi(r,r.return),io(r);break;case 22:r.memoizedState===null&&io(r);break;case 30:io(r);break;default:io(r)}a=a.sibling}}function gs(a,r,h){for(h=h&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=a,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:gs(v,T,h),Ba(4,T);break;case 1:if(gs(v,T,h),d=T,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(at){Be(d,d.return,at)}if(d=T,v=d.updateQueue,v!==null){var O=d.stateNode;try{var K=v.shared.hiddenCallbacks;if(K!==null)for(v.shared.hiddenCallbacks=null,v=0;v<K.length;v++)Hc(K[v],O)}catch(at){Be(d,d.return,at)}}h&&C&64&&gr(T),Uo(T,T.return);break;case 27:ym(T);case 26:case 5:gs(v,T,h),h&&d===null&&C&4&&If(T),Uo(T,T.return);break;case 12:gs(v,T,h);break;case 31:gs(v,T,h),h&&C&4&&Rl(v,T);break;case 13:gs(v,T,h),h&&C&4&&Xc(v,T);break;case 22:T.memoizedState===null&&gs(v,T,h),Uo(T,T.return);break;case 30:break;default:gs(v,T,h)}r=r.sibling}}function Il(a,r){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&pu(h))}function Nu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&pu(a))}function ji(a,r,h,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Hg(a,r,h,d),r=r.sibling}function Hg(a,r,h,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:ji(a,r,h,d),v&2048&&Ba(9,r);break;case 1:ji(a,r,h,d);break;case 3:ji(a,r,h,d),v&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&pu(a)));break;case 12:if(v&2048){ji(a,r,h,d),a=r.stateNode;try{var T=r.memoizedProps,C=T.id,O=T.onPostCommit;typeof O=="function"&&O(C,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(K){Be(r,r.return,K)}}else ji(a,r,h,d);break;case 31:ji(a,r,h,d);break;case 13:ji(a,r,h,d);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?ji(a,r,h,d):so(a,r):T._visibility&2?ji(a,r,h,d):(T._visibility|=2,Fi(a,r,h,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Il(C,r);break;case 24:ji(a,r,h,d),v&2048&&Nu(r.alternate,r);break;default:ji(a,r,h,d)}}function Fi(a,r,h,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=a,C=r,O=h,K=d,at=C.flags;switch(C.tag){case 0:case 11:case 15:Fi(T,C,O,K,v),Ba(8,C);break;case 23:break;case 22:var gt=C.stateNode;C.memoizedState!==null?gt._visibility&2?Fi(T,C,O,K,v):so(T,C):(gt._visibility|=2,Fi(T,C,O,K,v)),v&&at&2048&&Il(C.alternate,C);break;case 24:Fi(T,C,O,K,v),v&&at&2048&&Nu(C.alternate,C);break;default:Fi(T,C,O,K,v)}r=r.sibling}}function so(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var h=a,d=r,v=d.flags;switch(d.tag){case 22:so(h,d),v&2048&&Il(d.alternate,d);break;case 24:so(h,d),v&2048&&Nu(d.alternate,d);break;default:so(h,d)}r=r.sibling}}var Du=8192;function oa(a,r,h){if(a.subtreeFlags&Du)for(a=a.child;a!==null;)Tm(a,r,h),a=a.sibling}function Tm(a,r,h){switch(a.tag){case 26:oa(a,r,h),a.flags&Du&&a.memoizedState!==null&&r7(h,Ha,a.memoizedState,a.memoizedProps);break;case 5:oa(a,r,h);break;case 3:case 4:var d=Ha;Ha=t1(a.stateNode.containerInfo),oa(a,r,h),Ha=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Du,Du=16777216,oa(a,r,h),Du=d):oa(a,r,h));break;default:oa(a,r,h)}}function xu(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function Nl(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Di=d,qn(d,a)}xu(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)zs(a),a=a.sibling}function zs(a){switch(a.tag){case 0:case 11:case 15:Nl(a),a.flags&2048&&qi(9,a,a.return);break;case 3:Nl(a);break;case 12:Nl(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,_s(a)):Nl(a);break;default:Nl(a)}}function _s(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Di=d,qn(d,a)}xu(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:qi(8,r,r.return),_s(r);break;case 22:h=r.stateNode,h._visibility&2&&(h._visibility&=-3,_s(r));break;default:_s(r)}a=a.sibling}}function qn(a,r){for(;Di!==null;){var h=Di;switch(h.tag){case 0:case 11:case 15:qi(8,h,r);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:pu(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Di=d;else t:for(h=a;Di!==null;){d=Di;var v=d.sibling,T=d.return;if(Nf(d),d===h){Di=null;break t}if(v!==null){v.return=T,Di=v;break t}Di=T}}}var Bo={getCacheForType:function(a){var r=ae(oi),h=r.data.get(a);return h===void 0&&(h=a(),r.data.set(a,h)),h},cacheSignal:function(){return ae(oi).controller.signal}},fe=typeof WeakMap=="function"?WeakMap:Map,Jt=0,re=null,_e=null,me=0,xe=0,ss=null,Fa=!1,yr=!1,jg=!1,la=0,Mn=0,ao=0,Dl=0,Df=0,ys=0,gn=0,Ou=null,Hn=null,jn=!1,Jc=0,Fg=0,ti=1/0,Pn=null,ei=null,$e=0,ua=null,Wc=null,Ka=0,Zc=0,$c=null,xf=null,xl=0,Mu=null;function ca(){return(Jt&2)!==0&&me!==0?me&-me:W.T!==null?ct():dc()}function Se(){if(ys===0)if((me&536870912)===0||Ce){var a=Eo;Eo<<=1,(Eo&3932160)===0&&(Eo=262144),ys=a}else ys=536870912;return a=Vs.current,a!==null&&(a.flags|=32),ys}function ye(a,r,h){(a===re&&(xe===2||xe===9)||a.cancelPendingCommit!==null)&&(Ml(a,0),ui(a,me,ys,!1)),$o(a,h),((Jt&2)===0||a!==re)&&(a===re&&((Jt&2)===0&&(Dl|=h),Mn===4&&ui(a,me,ys,!1)),Rt(a))}function be(a,r,h){if((Jt&6)!==0)throw Error(i(327));var d=!h&&(r&127)===0&&(r&a.expiredLanes)===0||Ta(a,r),v=d?Of(a,r):vs(a,r,!0),T=d;do{if(v===0){yr&&!d&&ui(a,r,0,!1);break}else{if(h=a.current.alternate,T&&!tn(h)){v=vs(a,r,!1),T=!1;continue}if(v===2){if(T=r,a.errorRecoveryDisabledLanes&T)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var O=a;v=Ou;var K=O.current.memoizedState.isDehydrated;if(K&&(Ml(O,C).flags|=256),C=vs(O,C,!1),C!==2){if(jg&&!K){O.errorRecoveryDisabledLanes|=T,Dl|=T,v=4;break t}T=Hn,Hn=v,T!==null&&(Hn===null?Hn=T:Hn.push.apply(Hn,T))}v=C}if(T=!1,v!==2)continue}}if(v===1){Ml(a,0),ui(a,r,0,!0);break}t:{switch(d=a,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ui(d,r,ys,!Fa);break t;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Jc+300-St(),10<v)){if(ui(d,r,ys,!Fa),Js(d,0,!0)!==0)break t;Ka=r,d.timeoutHandle=R4(Re.bind(null,d,h,Hn,Pn,jn,r,ys,Dl,gn,Fa,T,"Throttled",-0,0),v);break t}Re(d,h,Hn,Pn,jn,r,ys,Dl,gn,Fa,T,null,-0,0)}}break}while(!0);Rt(a)}function Re(a,r,h,d,v,T,C,O,K,at,gt,yt,ot,mt){if(a.timeoutHandle=-1,yt=r.subtreeFlags,yt&8192||(yt&16785408)===16785408){yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},Tm(r,T,yt);var Ft=(T&62914560)===T?Jc-St():(T&4194048)===T?Fg-St():0;if(Ft=o7(yt,Ft),Ft!==null){Ka=T,a.cancelPendingCommit=Ft(qo.bind(null,a,r,T,h,d,v,C,O,K,gt,yt,null,ot,mt)),ui(a,T,C,!at);return}}qo(a,r,T,h,d,v,C,O,K)}function tn(a){for(var r=a;;){var h=r.tag;if((h===0||h===11||h===15)&&r.flags&16384&&(h=r.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var v=h[d],T=v.getSnapshot;v=v.value;try{if(!hs(T(),v))return!1}catch{return!1}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ui(a,r,h,d){r&=~Df,r&=~Dl,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var v=r;0<v;){var T=31-Qn(v),C=1<<T;d[T]=-1,v&=~C}h!==0&&sr(a,h,r)}function vr(){return(Jt&6)===0?(Bt(0),!1):!0}function Ol(){if(_e!==null){if(xe===0)var a=_e.return;else a=_e,Xr=yl=null,mg(a),Eu=null,Tu=0,a=_e;for(;a!==null;)ra(a.alternate,a),a=a.return;_e=null}}function Ml(a,r){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,HI(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Ka=0,Ol(),re=a,_e=h=Os(a.current,null),me=r,xe=0,ss=null,Fa=!1,yr=Ta(a,r),jg=!1,gn=ys=Df=Dl=ao=Mn=0,Hn=Ou=null,jn=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var v=31-Qn(d),T=1<<v;r|=a[v],d&=~T}return la=r,hf(),h}function ro(a,r){he=null,W.H=Yc,r===gu||r===ge?(r=yu(),xe=3):r===pf?(r=yu(),xe=4):xe=r===um?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ss=r,_e===null&&(Mn=1,lm(a,na(r,a.current)))}function Vn(){var a=Vs.current;return a===null?!0:(me&4194048)===me?ms===null:(me&62914560)===me||(me&536870912)!==0?a===ms:!1}function Go(){var a=W.H;return W.H=Yc,a===null?Yc:a}function Pl(){var a=W.A;return W.A=Bo,a}function th(){Mn=4,Fa||(me&4194048)!==me&&Vs.current!==null||(yr=!0),(ao&134217727)===0&&(Dl&134217727)===0||re===null||ui(re,me,ys,!1)}function vs(a,r,h){var d=Jt;Jt|=2;var v=Go(),T=Pl();(re!==a||me!==r)&&(Pn=null,Ml(a,r)),r=!1;var C=Mn;t:do try{if(xe!==0&&_e!==null){var O=_e,K=ss;switch(xe){case 8:Ol(),C=6;break t;case 3:case 2:case 9:case 6:Vs.current===null&&(r=!0);var at=xe;if(xe=0,ss=null,Pu(a,O,K,at),h&&yr){C=0;break t}break;default:at=xe,xe=0,ss=null,Pu(a,O,K,at)}}eh(),C=Mn;break}catch(gt){ro(a,gt)}while(!0);return r&&a.shellSuspendCounter++,Xr=yl=null,Jt=d,W.H=v,W.A=T,_e===null&&(re=null,me=0,hf()),C}function eh(){for(;_e!==null;)Sm(_e)}function Of(a,r){var h=Jt;Jt|=2;var d=Go(),v=Pl();re!==a||me!==r?(Pn=null,ti=St()+500,Ml(a,r)):yr=Ta(a,r);t:do try{if(xe!==0&&_e!==null){r=_e;var T=ss;e:switch(xe){case 1:xe=0,ss=null,Pu(a,r,T,1);break;case 2:case 9:if(Ps(T)){xe=0,ss=null,Mf(r);break}r=function(){xe!==2&&xe!==9||re!==a||(xe=7),Rt(a)},T.then(r,r);break t;case 3:xe=7;break t;case 4:xe=5;break t;case 7:Ps(T)?(xe=0,ss=null,Mf(r)):(xe=0,ss=null,Pu(a,r,T,7));break;case 5:var C=null;switch(_e.tag){case 26:C=_e.memoizedState;case 5:case 27:var O=_e;if(C?G4(C):O.stateNode.complete){xe=0,ss=null;var K=O.sibling;if(K!==null)_e=K;else{var at=O.return;at!==null?(_e=at,Vl(at)):_e=null}break e}}xe=0,ss=null,Pu(a,r,T,5);break;case 6:xe=0,ss=null,Pu(a,r,T,6);break;case 8:Ol(),Mn=6;break t;default:throw Error(i(462))}}Bs();break}catch(gt){ro(a,gt)}while(!0);return Xr=yl=null,W.H=d,W.A=v,Jt=h,_e!==null?0:(re=null,me=0,hf(),Mn)}function Bs(){for(;_e!==null&&!Cs();)Sm(_e)}function Sm(a){var r=_m(a.alternate,a,la);a.memoizedProps=a.pendingProps,r===null?Vl(a):_e=r}function Mf(a){var r=a,h=r.alternate;switch(r.tag){case 15:case 0:r=Af(h,r,r.pendingProps,r.type,void 0,me);break;case 11:r=Af(h,r,r.pendingProps,r.type.render,r.ref,me);break;case 5:mg(r);default:ra(h,r),r=_e=Mc(r,la),r=_m(h,r,la)}a.memoizedProps=a.pendingProps,r===null?Vl(a):_e=r}function Pu(a,r,h,d){Xr=yl=null,mg(r),Eu=null,Tu=0;var v=r.return;try{if(pi(a,v,r,h,me)){Mn=1,lm(a,na(h,a.current)),_e=null;return}}catch(T){if(v!==null)throw _e=v,T;Mn=1,lm(a,na(h,a.current)),_e=null;return}r.flags&32768?(Ce||d===1?a=!0:yr||(me&536870912)!==0?a=!1:(Fa=a=!0,(d===2||d===9||d===3||d===6)&&(d=Vs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Pf(r,a)):Vl(r)}function Vl(a){var r=a;do{if((r.flags&32768)!==0){Pf(r,Fa);return}a=r.return;var h=Cf(r.alternate,r,la);if(h!==null){_e=h;return}if(r=r.sibling,r!==null){_e=r;return}_e=r=a}while(r!==null);Mn===0&&(Mn=5)}function Pf(a,r){do{var h=za(a.alternate,a);if(h!==null){h.flags&=32767,_e=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!r&&(a=a.sibling,a!==null)){_e=a;return}_e=a=h}while(a!==null);Mn=6,_e=null}function qo(a,r,h,d,v,T,C,O,K){a.cancelPendingCommit=null;do nh();while($e!==0);if((Jt&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=Ri,hc(a,h,T,C,O,K),a===re&&(_e=re=null,me=0),Wc=r,ua=a,Ka=h,Zc=T,$c=v,xf=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,S(Ui,function(){return bm(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=W.T,W.T=null,v=Et.p,Et.p=2,C=Jt,Jt|=4;try{L2(a,r,h)}finally{Jt=C,Et.p=v,W.T=d}}$e=1,ci(),Ho(),Vu()}}function ci(){if($e===1){$e=0;var a=ua,r=Wc,h=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var d=Et.p;Et.p=2;var v=Jt;Jt|=4;try{Cl(r,a);var T=j2,C=Z_(a.containerInfo),O=T.focusedElem,K=T.selectionRange;if(C!==O&&O&&O.ownerDocument&&un(O.ownerDocument.documentElement,O)){if(K!==null&&Jp(O)){var at=K.start,gt=K.end;if(gt===void 0&&(gt=at),"selectionStart"in O)O.selectionStart=at,O.selectionEnd=Math.min(gt,O.value.length);else{var yt=O.ownerDocument||document,ot=yt&&yt.defaultView||window;if(ot.getSelection){var mt=ot.getSelection(),Ft=O.textContent.length,se=Math.min(K.start,Ft),dn=K.end===void 0?se:Math.min(K.end,Ft);!mt.extend&&se>dn&&(C=dn,dn=se,se=C);var tt=Dc(O,se),J=Dc(O,dn);if(tt&&J&&(mt.rangeCount!==1||mt.anchorNode!==tt.node||mt.anchorOffset!==tt.offset||mt.focusNode!==J.node||mt.focusOffset!==J.offset)){var st=yt.createRange();st.setStart(tt.node,tt.offset),mt.removeAllRanges(),se>dn?(mt.addRange(st),mt.extend(J.node,J.offset)):(st.setEnd(J.node,J.offset),mt.addRange(st))}}}}for(yt=[],mt=O;mt=mt.parentNode;)mt.nodeType===1&&yt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<yt.length;O++){var _t=yt[O];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}r1=!!H2,j2=H2=null}finally{Jt=v,Et.p=d,W.T=h}}a.current=r,$e=2}}function Ho(){if($e===2){$e=0;var a=ua,r=Wc,h=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var d=Et.p;Et.p=2;var v=Jt;Jt|=4;try{Tn(a,r.alternate,r)}finally{Jt=v,Et.p=d,W.T=h}}$e=3}}function Vu(){if($e===4||$e===3){$e=0,je();var a=ua,r=Wc,h=Ka,d=xf;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?$e=5:($e=0,Wc=ua=null,oo(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(ei=null),Sa(h),r=r.stateNode,Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(Ea,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=W.T,v=Et.p,Et.p=2,W.T=null;try{for(var T=a.onRecoverableError,C=0;C<d.length;C++){var O=d[C];T(O.value,{componentStack:O.stack})}}finally{W.T=r,Et.p=v}}(Ka&3)!==0&&nh(),Rt(a),v=a.pendingLanes,(h&261930)!==0&&(v&42)!==0?a===Mu?xl++:(xl=0,Mu=a):xl=0,Bt(0)}}function oo(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,pu(r)))}function nh(){return ci(),Ho(),Vu(),bm()}function bm(){if($e!==5)return!1;var a=ua,r=Zc;Zc=0;var h=Sa(Ka),d=W.T,v=Et.p;try{Et.p=32>h?32:h,W.T=null,h=$c,$c=null;var T=ua,C=Ka;if($e=0,Wc=ua=null,Ka=0,(Jt&6)!==0)throw Error(i(331));var O=Jt;if(Jt|=4,zs(T.current),Hg(T,T.current,C,h),Jt=O,Bt(0,!1),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(Ea,T)}catch{}return!0}finally{Et.p=v,W.T=d,oo(a,r)}}function Kg(a,r,h){r=na(h,r),r=kg(a.stateNode,r,2),a=Tl(a,r,2),a!==null&&($o(a,2),Rt(a))}function Be(a,r,h){if(a.tag===3)Kg(a,a,h);else for(;r!==null;){if(r.tag===3){Kg(r,a,h);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ei===null||!ei.has(d))){a=na(h,a),h=Lg(2),d=Tl(r,h,2),d!==null&&(Fy(h,d,r,a),$o(d,2),Rt(d));break}}r=r.return}}function Vf(a,r,h){var d=a.pingCache;if(d===null){d=a.pingCache=new fe;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(h)||(jg=!0,v.add(h),a=l.bind(null,a,r,h),r.then(a,a))}function l(a,r,h){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,re===a&&(me&h)===h&&(Mn===4||Mn===3&&(me&62914560)===me&&300>St()-Jc?(Jt&2)===0&&Ml(a,0):Df|=h,gn===me&&(gn=0)),Rt(a)}function u(a,r){r===0&&(r=Ir()),a=fs(a,r),a!==null&&($o(a,r),Rt(a))}function p(a){var r=a.memoizedState,h=0;r!==null&&(h=r.retryLane),u(a,h)}function y(a,r){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),u(a,h)}function S(a,r){return He(a,r)}var w=null,x=null,Q=!1,ft=!1,bt=!1,Mt=0;function Rt(a){a!==x&&a.next===null&&(x===null?w=x=a:x=x.next=a),ft=!0,Q||(Q=!0,nt())}function Bt(a,r){if(!bt&&ft){bt=!0;do for(var h=!1,d=w;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var T=0;else{var C=d.suspendedLanes,O=d.pingedLanes;T=(1<<31-Qn(42|a)+1)-1,T&=v&~(C&~O),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,rt(d,T))}else T=me,T=Js(d,d===re?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||Ta(d,T)||(h=!0,rt(d,T));d=d.next}while(h);bt=!1}}function ue(){xi()}function xi(){ft=Q=!1;var a=0;Mt!==0&&qI()&&(a=Mt);for(var r=St(),h=null,d=w;d!==null;){var v=d.next,T=ih(d,r);T===0?(d.next=null,h===null?w=v:h.next=v,v===null&&(x=h)):(h=d,(a!==0||(T&3)!==0)&&(ft=!0)),d=v}$e!==0&&$e!==5||Bt(a),Mt!==0&&(Mt=0)}function ih(a,r){for(var h=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var C=31-Qn(T),O=1<<C,K=v[C];K===-1?((O&h)===0||(O&d)!==0)&&(v[C]=Od(O,r)):K<=r&&(a.expiredLanes|=O),T&=~O}if(r=re,h=me,h=Js(a,a===r?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===r&&(xe===2||xe===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&$i(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Ta(a,h)){if(r=h&-h,r===a.callbackPriority)return r;switch(d!==null&&$i(d),Sa(h)){case 2:case 8:h=Ve;break;case 32:h=Ui;break;case 268435456:h=vo;break;default:h=Ui}return d=kl.bind(null,a),h=He(h,d),a.callbackPriority=r,a.callbackNode=h,r}return d!==null&&d!==null&&$i(d),a.callbackPriority=2,a.callbackNode=null,2}function kl(a,r){if($e!==0&&$e!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(nh()&&a.callbackNode!==h)return null;var d=me;return d=Js(a,a===re?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(be(a,d,r),ih(a,St()),a.callbackNode!=null&&a.callbackNode===h?kl.bind(null,a):null)}function rt(a,r){if(nh())return null;be(a,r,!0)}function nt(){jI(function(){(Jt&6)!==0?He(pe,ue):xi()})}function ct(){if(Mt===0){var a=Oo;a===0&&(a=Cr,Cr<<=1,(Cr&261888)===0&&(Cr=256)),Mt=a}return Mt}function Dt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:au(""+a)}function te(a,r){var h=r.ownerDocument.createElement("input");return h.name=r.name,h.value=r.value,a.id&&h.setAttribute("form",a.id),r.parentNode.insertBefore(h,r),a=new FormData(a),h.parentNode.removeChild(h),a}function kn(a,r,h,d,v){if(r==="submit"&&h&&h.stateNode===v){var T=Dt((v[ri]||null).action),C=d.submitter;C&&(r=(r=C[ri]||null)?Dt(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var O=new hr("action","action",null,d,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Mt!==0){var K=C?te(v,C):new FormData(v);Ig(h,{pending:!0,data:K,method:v.method,action:T},null,K)}}else typeof T=="function"&&(O.preventDefault(),K=C?te(v,C):new FormData(v),Ig(h,{pending:!0,data:K,method:v.method,action:T},T,K))},currentTarget:v}]})}}for(var ne=0;ne<uf.length;ne++){var ke=uf[ne],Oi=ke.toLowerCase(),Ge=ke[0].toUpperCase()+ke.slice(1);Oa(Oi,"on"+Ge)}Oa(kd,"onAnimationEnd"),Oa(lf,"onAnimationIteration"),Oa(Zp,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(ty,"onTransitionRun"),Oa(N2,"onTransitionStart"),Oa(ey,"onTransitionCancel"),Oa($p,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ya));function y4(a,r){r=(r&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],v=d.event;d=d.listeners;t:{var T=void 0;if(r)for(var C=d.length-1;0<=C;C--){var O=d[C],K=O.instance,at=O.currentTarget;if(O=O.listener,K!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(gt){cf(gt)}v.currentTarget=null,T=K}else for(C=0;C<d.length;C++){if(O=d[C],K=O.instance,at=O.currentTarget,O=O.listener,K!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(gt){cf(gt)}v.currentTarget=null,T=K}}}}function Oe(a,r){var h=r[Ws];h===void 0&&(h=r[Ws]=new Set);var d=a+"__bubble";h.has(d)||(v4(r,a,2,!1),h.add(d))}function z2(a,r,h){var d=0;r&&(d|=4),v4(h,a,d,r)}var Wy="_reactListening"+Math.random().toString(36).slice(2);function B2(a){if(!a[Wy]){a[Wy]=!0,Ra.forEach(function(h){h!=="selectionchange"&&(U2.has(h)||z2(h,!1,a),z2(h,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[Wy]||(r[Wy]=!0,z2("selectionchange",!1,r))}}function v4(a,r,h,d){switch(Q4(r)){case 2:var v=c7;break;case 8:v=h7;break;default:v=eE}h=v.bind(null,r,h,a),v=void 0,!ou||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(r,h,{capture:!0,passive:v}):a.addEventListener(r,h,!0):v!==void 0?a.addEventListener(r,h,{passive:v}):a.addEventListener(r,h,!1)}function G2(a,r,h,d,v){var T=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var O=d.stateNode.containerInfo;if(O===v)break;if(C===4)for(C=d.return;C!==null;){var K=C.tag;if((K===3||K===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;O!==null;){if(C=ar(O),C===null)return;if(K=C.tag,K===5||K===6||K===26||K===27){d=T=C;continue t}O=O.parentNode}}d=d.return}bo(function(){var at=T,gt=ta(h),yt=[];t:{var ot=xa.get(a);if(ot!==void 0){var mt=hr,Ft=a;switch(a){case"keypress":if(rl(h)===0)break t;case"keydown":case"keyup":mt=zr;break;case"focusin":Ft="focus",mt=ul;break;case"focusout":Ft="blur",mt=ul;break;case"beforeblur":case"afterblur":mt=ul;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=$h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=R;break;case kd:case lf:case Zp:mt=Md;break;case $p:mt=P;break;case"scroll":case"scrollend":mt=Sc;break;case"wheel":mt=ut;break;case"copy":case"cut":case"paste":mt=tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Br;break;case"toggle":case"beforetoggle":mt=le}var se=(r&4)!==0,dn=!se&&(a==="scroll"||a==="scrollend"),tt=se?ot!==null?ot+"Capture":null:ot;se=[];for(var J=at,st;J!==null;){var _t=J;if(st=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||st===null||tt===null||(_t=Ia(J,tt),_t!=null&&se.push(Yg(J,_t,st))),dn)break;J=J.return}0<se.length&&(ot=new mt(ot,Ft,null,h,gt),yt.push({event:ot,listeners:se}))}}if((r&7)===0){t:{if(ot=a==="mouseover"||a==="pointerover",mt=a==="mouseout"||a==="pointerout",ot&&h!==Ec&&(Ft=h.relatedTarget||h.fromElement)&&(ar(Ft)||Ft[Aa]))break t;if((mt||ot)&&(ot=gt.window===gt?gt:(ot=gt.ownerDocument)?ot.defaultView||ot.parentWindow:window,mt?(Ft=h.relatedTarget||h.toElement,mt=at,Ft=Ft?ar(Ft):null,Ft!==null&&(dn=o(Ft),se=Ft.tag,Ft!==dn||se!==5&&se!==27&&se!==6)&&(Ft=null)):(mt=null,Ft=at),mt!==Ft)){if(se=bc,_t="onMouseLeave",tt="onMouseEnter",J="mouse",(a==="pointerout"||a==="pointerover")&&(se=Br,_t="onPointerLeave",tt="onPointerEnter",J="pointer"),dn=mt==null?ot:Ns(mt),st=Ft==null?ot:Ns(Ft),ot=new se(_t,J+"leave",mt,h,gt),ot.target=dn,ot.relatedTarget=st,_t=null,ar(gt)===at&&(se=new se(tt,J+"enter",Ft,h,gt),se.target=st,se.relatedTarget=dn,_t=se),dn=_t,mt&&Ft)e:{for(se=LI,tt=mt,J=Ft,st=0,_t=tt;_t;_t=se(_t))st++;_t=0;for(var $t=J;$t;$t=se($t))_t++;for(;0<st-_t;)tt=se(tt),st--;for(;0<_t-st;)J=se(J),_t--;for(;st--;){if(tt===J||J!==null&&tt===J.alternate){se=tt;break e}tt=se(tt),J=se(J)}se=null}else se=null;mt!==null&&E4(yt,ot,mt,se,!1),Ft!==null&&dn!==null&&E4(yt,dn,Ft,se,!0)}}t:{if(ot=at?Ns(at):window,mt=ot.nodeName&&ot.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ot.type==="file")var Qe=Fp;else if(jp(ot))if(Gr)Qe=W_;else{Qe=Qp;var Xt=X_}else mt=ot.nodeName,!mt||mt.toLowerCase()!=="input"||ot.type!=="checkbox"&&ot.type!=="radio"?at&&su(at.elementType)&&(Qe=Fp):Qe=J_;if(Qe&&(Qe=Qe(a,at))){Pd(yt,Qe,h,gt);break t}Xt&&Xt(a,ot,at),a==="focusout"&&at&&ot.type==="number"&&at.memoizedProps.value!=null&&$s(ot,"number",ot.value)}switch(Xt=at?Ns(at):window,a){case"focusin":(jp(Xt)||Xt.contentEditable==="true")&&(qr=Xt,Hr=at,xc=null);break;case"focusout":xc=Hr=qr=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Oc(yt,h,gt);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Oc(yt,h,gt)}var Ee;if(De)t:{switch(a){case"compositionstart":var Le="onCompositionStart";break t;case"compositionend":Le="onCompositionEnd";break t;case"compositionupdate":Le="onCompositionUpdate";break t}Le=void 0}else fu?Ro(a,h)&&(Le="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Le="onCompositionStart");Le&&(dr&&h.locale!=="ko"&&(fu||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&fu&&(Ee=al()):(us=gt,Tc="value"in us?us.value:us.textContent,fu=!0)),Xt=Zy(at,Le),0<Xt.length&&(Le=new Na(Le,a,null,h,gt),yt.push({event:Le,listeners:Xt}),Ee?Le.data=Ee:(Ee=hu(h),Ee!==null&&(Le.data=Ee)))),(Ee=cs?Y_(a,h):qp(a,h))&&(Le=Zy(at,"onBeforeInput"),0<Le.length&&(Xt=new Na("onBeforeInput","beforeinput",null,h,gt),yt.push({event:Xt,listeners:Le}),Xt.data=Ee)),kn(yt,a,at,h,gt)}y4(yt,r)})}function Yg(a,r,h){return{instance:a,listener:r,currentTarget:h}}function Zy(a,r){for(var h=r+"Capture",d=[];a!==null;){var v=a,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Ia(a,h),v!=null&&d.unshift(Yg(a,v,T)),v=Ia(a,r),v!=null&&d.push(Yg(a,v,T))),a.tag===3)return d;a=a.return}return[]}function LI(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function E4(a,r,h,d,v){for(var T=r._reactName,C=[];h!==null&&h!==d;){var O=h,K=O.alternate,at=O.stateNode;if(O=O.tag,K!==null&&K===d)break;O!==5&&O!==26&&O!==27||at===null||(K=at,v?(at=Ia(h,T),at!=null&&C.unshift(Yg(h,at,K))):v||(at=Ia(h,T),at!=null&&C.push(Yg(h,at,K)))),h=h.return}C.length!==0&&a.push({event:r,listeners:C})}var UI=/\r\n?/g,zI=/\u0000|\uFFFD/g;function T4(a){return(typeof a=="string"?a:""+a).replace(UI,`
`).replace(zI,"")}function S4(a,r){return r=T4(r),T4(a)===r}function fn(a,r,h,d,v,T){switch(h){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||ls(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&ls(a,""+d);break;case"className":Ds(a,"class",d);break;case"tabIndex":Ds(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ds(a,h,d);break;case"style":vc(a,d,T);break;case"data":if(r!=="object"){Ds(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=au(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(r!=="input"&&fn(a,r,"name",v.name,v,null),fn(a,r,"formEncType",v.formEncType,v,null),fn(a,r,"formMethod",v.formMethod,v,null),fn(a,r,"formTarget",v.formTarget,v,null)):(fn(a,r,"encType",v.encType,v,null),fn(a,r,"method",v.method,v,null),fn(a,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=au(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=lr);break;case"onScroll":d!=null&&Oe("scroll",a);break;case"onScrollEnd":d!=null&&Oe("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=au(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":Oe("beforetoggle",a),Oe("toggle",a),il(a,"popover",d);break;case"xlinkActuate":Xn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Xn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Xn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Xn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Xn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Xn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Xn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Xn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Xn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":il(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Zh.get(h)||h,il(a,h,d))}}function q2(a,r,h,d,v,T){switch(h){case"style":vc(a,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof d=="string"?ls(a,d):(typeof d=="number"||typeof d=="bigint")&&ls(a,""+d);break;case"onScroll":d!=null&&Oe("scroll",a);break;case"onScrollEnd":d!=null&&Oe("scrollend",a);break;case"onClick":d!=null&&(a.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nu.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),r=h.slice(2,v?h.length-7:void 0),T=a[ri]||null,T=T!=null?T[h]:null,typeof T=="function"&&a.removeEventListener(r,T,v),typeof d=="function")){typeof T!="function"&&T!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(r,d,v);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):il(a,h,d)}}}function Es(a,r,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",a),Oe("load",a);var d=!1,v=!1,T;for(T in h)if(h.hasOwnProperty(T)){var C=h[T];if(C!=null)switch(T){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:fn(a,r,T,C,h,null)}}v&&fn(a,r,"srcSet",h.srcSet,h,null),d&&fn(a,r,"src",h.src,h,null);return;case"input":Oe("invalid",a);var O=T=C=v=null,K=null,at=null;for(d in h)if(h.hasOwnProperty(d)){var gt=h[d];if(gt!=null)switch(d){case"name":v=gt;break;case"type":C=gt;break;case"checked":K=gt;break;case"defaultChecked":at=gt;break;case"value":T=gt;break;case"defaultValue":O=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,r));break;default:fn(a,r,d,gt,h,null)}}gc(a,T,O,K,at,C,v,!1);return;case"select":Oe("invalid",a),d=C=T=null;for(v in h)if(h.hasOwnProperty(v)&&(O=h[v],O!=null))switch(v){case"value":T=O;break;case"defaultValue":C=O;break;case"multiple":d=O;default:fn(a,r,v,O,h,null)}r=T,h=C,a.multiple=!!d,r!=null?or(a,!!d,r,!1):h!=null&&or(a,!!d,h,!0);return;case"textarea":Oe("invalid",a),T=v=d=null;for(C in h)if(h.hasOwnProperty(C)&&(O=h[C],O!=null))switch(C){case"value":d=O;break;case"defaultValue":v=O;break;case"children":T=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:fn(a,r,C,O,h,null)}Pr(a,d,v,T);return;case"option":for(K in h)h.hasOwnProperty(K)&&(d=h[K],d!=null)&&(K==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":fn(a,r,K,d,h,null));return;case"dialog":Oe("beforetoggle",a),Oe("toggle",a),Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":Oe("load",a);break;case"video":case"audio":for(d=0;d<Ya.length;d++)Oe(Ya[d],a);break;case"image":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"embed":case"source":case"link":Oe("error",a),Oe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in h)if(h.hasOwnProperty(at)&&(d=h[at],d!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:fn(a,r,at,d,h,null)}return;default:if(su(r)){for(gt in h)h.hasOwnProperty(gt)&&(d=h[gt],d!==void 0&&q2(a,r,gt,d,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(d=h[O],d!=null&&fn(a,r,O,d,h,null))}function BI(a,r,h,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,C=null,O=null,K=null,at=null,gt=null;for(mt in h){var yt=h[mt];if(h.hasOwnProperty(mt)&&yt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":K=yt;default:d.hasOwnProperty(mt)||fn(a,r,mt,null,d,yt)}}for(var ot in d){var mt=d[ot];if(yt=h[ot],d.hasOwnProperty(ot)&&(mt!=null||yt!=null))switch(ot){case"type":T=mt;break;case"name":v=mt;break;case"checked":at=mt;break;case"defaultChecked":gt=mt;break;case"value":C=mt;break;case"defaultValue":O=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,r));break;default:mt!==yt&&fn(a,r,ot,mt,d,yt)}}To(a,C,O,K,at,gt,T,v);return;case"select":mt=C=O=ot=null;for(T in h)if(K=h[T],h.hasOwnProperty(T)&&K!=null)switch(T){case"value":break;case"multiple":mt=K;default:d.hasOwnProperty(T)||fn(a,r,T,null,d,K)}for(v in d)if(T=d[v],K=h[v],d.hasOwnProperty(v)&&(T!=null||K!=null))switch(v){case"value":ot=T;break;case"defaultValue":O=T;break;case"multiple":C=T;default:T!==K&&fn(a,r,v,T,d,K)}r=O,h=C,d=mt,ot!=null?or(a,!!h,ot,!1):!!d!=!!h&&(r!=null?or(a,!!h,r,!0):or(a,!!h,h?[]:"",!1));return;case"textarea":mt=ot=null;for(O in h)if(v=h[O],h.hasOwnProperty(O)&&v!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:fn(a,r,O,null,d,v)}for(C in d)if(v=d[C],T=h[C],d.hasOwnProperty(C)&&(v!=null||T!=null))switch(C){case"value":ot=v;break;case"defaultValue":mt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&fn(a,r,C,v,d,T)}_c(a,ot,mt);return;case"option":for(var Ft in h)ot=h[Ft],h.hasOwnProperty(Ft)&&ot!=null&&!d.hasOwnProperty(Ft)&&(Ft==="selected"?a.selected=!1:fn(a,r,Ft,null,d,ot));for(K in d)ot=d[K],mt=h[K],d.hasOwnProperty(K)&&ot!==mt&&(ot!=null||mt!=null)&&(K==="selected"?a.selected=ot&&typeof ot!="function"&&typeof ot!="symbol":fn(a,r,K,ot,d,mt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in h)ot=h[se],h.hasOwnProperty(se)&&ot!=null&&!d.hasOwnProperty(se)&&fn(a,r,se,null,d,ot);for(at in d)if(ot=d[at],mt=h[at],d.hasOwnProperty(at)&&ot!==mt&&(ot!=null||mt!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,r));break;default:fn(a,r,at,ot,d,mt)}return;default:if(su(r)){for(var dn in h)ot=h[dn],h.hasOwnProperty(dn)&&ot!==void 0&&!d.hasOwnProperty(dn)&&q2(a,r,dn,void 0,d,ot);for(gt in d)ot=d[gt],mt=h[gt],!d.hasOwnProperty(gt)||ot===mt||ot===void 0&&mt===void 0||q2(a,r,gt,ot,d,mt);return}}for(var tt in h)ot=h[tt],h.hasOwnProperty(tt)&&ot!=null&&!d.hasOwnProperty(tt)&&fn(a,r,tt,null,d,ot);for(yt in d)ot=d[yt],mt=h[yt],!d.hasOwnProperty(yt)||ot===mt||ot==null&&mt==null||fn(a,r,yt,ot,d,mt)}function b4(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GI(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var v=h[d],T=v.transferSize,C=v.initiatorType,O=v.duration;if(T&&O&&b4(C)){for(C=0,O=v.responseEnd,d+=1;d<h.length;d++){var K=h[d],at=K.startTime;if(at>O)break;var gt=K.transferSize,yt=K.initiatorType;gt&&b4(yt)&&(K=K.responseEnd,C+=gt*(K<O?1:(O-at)/(K-at)))}if(--d,r+=8*(T+C)/(v.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var H2=null,j2=null;function $y(a){return a.nodeType===9?a:a.ownerDocument}function A4(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w4(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function F2(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var K2=null;function qI(){var a=window.event;return a&&a.type==="popstate"?a===K2?!1:(K2=a,!0):(K2=null,!1)}var R4=typeof setTimeout=="function"?setTimeout:void 0,HI=typeof clearTimeout=="function"?clearTimeout:void 0,C4=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof C4<"u"?function(a){return C4.resolve(null).then(a).catch(FI)}:R4;function FI(a){setTimeout(function(){throw a})}function sh(a){return a==="head"}function I4(a,r){var h=r,d=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(v),Cm(r);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")Qg(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,Qg(h);for(var T=h.firstChild;T;){var C=T.nextSibling,O=T.nodeName;T[Is]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=C}}else h==="body"&&Qg(a.ownerDocument.body);h=v}while(h);Cm(r)}function N4(a,r){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?r?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(r?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function Y2(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var h=r;switch(r=r.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Y2(h),xr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function KI(a,r,h,d){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Is])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=lo(a.nextSibling),a===null)break}return null}function YI(a,r,h){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=lo(a.nextSibling),a===null))return null;return a}function D4(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=lo(a.nextSibling),a===null))return null;return a}function Q2(a){return a.data==="$?"||a.data==="$~"}function X2(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function QI(a,r){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||h.readyState!=="loading")r();else{var d=function(){r(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function lo(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var J2=null;function x4(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(r===0)return lo(a.nextSibling);r--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||r++}a=a.nextSibling}return null}function O4(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(r===0)return a;r--}else h!=="/$"&&h!=="/&"||r++}a=a.previousSibling}return null}function M4(a,r,h){switch(r=$y(h),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Qg(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);xr(a)}var uo=new Map,P4=new Set;function t1(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ku=Et.d;Et.d={f:XI,r:JI,D:WI,C:ZI,L:$I,m:t7,X:n7,S:e7,M:i7};function XI(){var a=ku.f(),r=vr();return a||r}function JI(a){var r=Zs(a);r!==null&&r.tag===5&&r.type==="form"?ky(r):ku.r(a)}var Am=typeof document>"u"?null:document;function V4(a,r,h){var d=Am;if(d&&typeof r=="string"&&r){var v=Ai(r);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),P4.has(v)||(P4.add(v),a={rel:a,crossOrigin:h,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Es(r,"link",a),zn(r),d.head.appendChild(r)))}}function WI(a){ku.D(a),V4("dns-prefetch",a,null)}function ZI(a,r){ku.C(a,r),V4("preconnect",a,r)}function $I(a,r,h){ku.L(a,r,h);var d=Am;if(d&&a&&r){var v='link[rel="preload"][as="'+Ai(r)+'"]';r==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+Ai(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+Ai(h.imageSizes)+'"]')):v+='[href="'+Ai(a)+'"]';var T=v;switch(r){case"style":T=wm(a);break;case"script":T=Rm(a)}uo.has(T)||(a=b({rel:"preload",href:r==="image"&&h&&h.imageSrcSet?void 0:a,as:r},h),uo.set(T,a),d.querySelector(v)!==null||r==="style"&&d.querySelector(Xg(T))||r==="script"&&d.querySelector(Jg(T))||(r=d.createElement("link"),Es(r,"link",a),zn(r),d.head.appendChild(r)))}}function t7(a,r){ku.m(a,r);var h=Am;if(h&&a){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Ai(d)+'"][href="'+Ai(a)+'"]',T=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Rm(a)}if(!uo.has(T)&&(a=b({rel:"modulepreload",href:a},r),uo.set(T,a),h.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Jg(T)))return}d=h.createElement("link"),Es(d,"link",a),zn(d),h.head.appendChild(d)}}}function e7(a,r,h){ku.S(a,r,h);var d=Am;if(d&&a){var v=wa(d).hoistableStyles,T=wm(a);r=r||"default";var C=v.get(T);if(!C){var O={loading:0,preload:null};if(C=d.querySelector(Xg(T)))O.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":r},h),(h=uo.get(T))&&W2(a,h);var K=C=d.createElement("link");zn(K),Es(K,"link",a),K._p=new Promise(function(at,gt){K.onload=at,K.onerror=gt}),K.addEventListener("load",function(){O.loading|=1}),K.addEventListener("error",function(){O.loading|=2}),O.loading|=4,e1(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:O},v.set(T,C)}}}function n7(a,r){ku.X(a,r);var h=Am;if(h&&a){var d=wa(h).hoistableScripts,v=Rm(a),T=d.get(v);T||(T=h.querySelector(Jg(v)),T||(a=b({src:a,async:!0},r),(r=uo.get(v))&&Z2(a,r),T=h.createElement("script"),zn(T),Es(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function i7(a,r){ku.M(a,r);var h=Am;if(h&&a){var d=wa(h).hoistableScripts,v=Rm(a),T=d.get(v);T||(T=h.querySelector(Jg(v)),T||(a=b({src:a,async:!0,type:"module"},r),(r=uo.get(v))&&Z2(a,r),T=h.createElement("script"),zn(T),Es(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function k4(a,r,h,d){var v=(v=ie.current)?t1(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(r=wm(h.href),h=wa(v).hoistableStyles,d=h.get(r),d||(d={type:"style",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=wm(h.href);var T=wa(v).hoistableStyles,C=T.get(a);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,C),(T=v.querySelector(Xg(a)))&&!T._p&&(C.instance=T,C.state.loading=5),uo.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},uo.set(a,h),T||s7(v,a,h,C.state))),r&&d===null)throw Error(i(528,""));return C}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=h.async,h=h.src,typeof h=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Rm(h),h=wa(v).hoistableScripts,d=h.get(r),d||(d={type:"script",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function wm(a){return'href="'+Ai(a)+'"'}function Xg(a){return'link[rel="stylesheet"]['+a+"]"}function L4(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function s7(a,r,h,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Es(r,"link",h),zn(r),a.head.appendChild(r))}function Rm(a){return'[src="'+Ai(a)+'"]'}function Jg(a){return"script[async]"+a}function U4(a,r,h){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+Ai(h.href)+'"]');if(d)return r.instance=d,zn(d),d;var v=b({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),zn(d),Es(d,"style",v),e1(d,h.precedence,a),r.instance=d;case"stylesheet":v=wm(h.href);var T=a.querySelector(Xg(v));if(T)return r.state.loading|=4,r.instance=T,zn(T),T;d=L4(h),(v=uo.get(v))&&W2(d,v),T=(a.ownerDocument||a).createElement("link"),zn(T);var C=T;return C._p=new Promise(function(O,K){C.onload=O,C.onerror=K}),Es(T,"link",d),r.state.loading|=4,e1(T,h.precedence,a),r.instance=T;case"script":return T=Rm(h.src),(v=a.querySelector(Jg(T)))?(r.instance=v,zn(v),v):(d=h,(v=uo.get(T))&&(d=b({},h),Z2(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),zn(v),Es(v,"link",d),a.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,e1(d,h.precedence,a));return r.instance}function e1(a,r,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,T=v,C=0;C<d.length;C++){var O=d[C];if(O.dataset.precedence===r)T=O;else if(T!==v)break}T?T.parentNode.insertBefore(a,T.nextSibling):(r=h.nodeType===9?h.head:h,r.insertBefore(a,r.firstChild))}function W2(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function Z2(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var n1=null;function z4(a,r,h){if(n1===null){var d=new Map,v=n1=new Map;v.set(h,d)}else v=n1,d=v.get(h),d||(d=new Map,v.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var T=h[v];if(!(T[Is]||T[Nn]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=a+C;var O=d.get(C);O?O.push(T):d.set(C,[T])}}return d}function B4(a,r,h){a=a.ownerDocument||a,a.head.insertBefore(h,r==="title"?a.querySelector("head > title"):null)}function a7(a,r,h){if(h===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function r7(a,r,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=wm(d.href),T=r.querySelector(Xg(v));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=i1.bind(a),r.then(a,a)),h.state.loading|=4,h.instance=T,zn(T);return}T=r.ownerDocument||r,d=L4(d),(v=uo.get(v))&&W2(d,v),T=T.createElement("link"),zn(T);var C=T;C._p=new Promise(function(O,K){C.onload=O,C.onerror=K}),Es(T,"link",d),h.instance=T}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,r),(r=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=i1.bind(a),r.addEventListener("load",h),r.addEventListener("error",h))}}var $2=0;function o7(a,r){return a.stylesheets&&a.count===0&&a1(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&a1(a,a.stylesheets),a.unsuspend){var T=a.unsuspend;a.unsuspend=null,T()}},6e4+r);0<a.imgBytes&&$2===0&&($2=62500*GI());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&a1(a,a.stylesheets),a.unsuspend)){var T=a.unsuspend;a.unsuspend=null,T()}},(a.imgBytes>$2?50:800)+r);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function i1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)a1(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var s1=null;function a1(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,s1=new Map,r.forEach(l7,a),s1=null,i1.call(a))}function l7(a,r){if(!(r.state.loading&4)){var h=s1.get(a);if(h)var d=h.get(null);else{h=new Map,s1.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var C=v[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),d=C)}d&&h.set(null,d)}v=r.instance,C=v.getAttribute("data-precedence"),T=h.get(C)||d,T===d&&h.set(null,v),h.set(C,v),this.count++,d=i1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),T?T.parentNode.insertBefore(v,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),r.state.loading|=4}}var Wg={$$typeof:X,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function u7(a,r,h,d,v,T,C,O,K){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function q4(a,r,h,d,v,T,C,O,K,at,gt,yt){return a=new u7(a,r,h,C,K,at,gt,yt,O),r=1,T===!0&&(r|=24),T=Dn(3,null,null,r),a.current=T,T.stateNode=a,r=eg(),r.refCount++,a.pooledCache=r,r.refCount++,T.memoizedState={element:d,isDehydrated:h,cache:r},_f(T),a}function H4(a){return a?(a=dl,a):dl}function j4(a,r,h,d,v,T){v=H4(v),d.context===null?d.context=v:d.pendingContext=v,d=Po(r),d.payload={element:h},T=T===void 0?null:T,T!==null&&(d.callback=T),h=Tl(a,d,r),h!==null&&(ye(h,a,r),Sl(h,a,r))}function F4(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<r?h:r}}function tE(a,r){F4(a,r),(a=a.alternate)&&F4(a,r)}function K4(a){if(a.tag===13||a.tag===31){var r=fs(a,67108864);r!==null&&ye(r,a,67108864),tE(a,67108864)}}function Y4(a){if(a.tag===13||a.tag===31){var r=ca();r=Nr(r);var h=fs(a,r);h!==null&&ye(h,a,r),tE(a,r)}}var r1=!0;function c7(a,r,h,d){var v=W.T;W.T=null;var T=Et.p;try{Et.p=2,eE(a,r,h,d)}finally{Et.p=T,W.T=v}}function h7(a,r,h,d){var v=W.T;W.T=null;var T=Et.p;try{Et.p=8,eE(a,r,h,d)}finally{Et.p=T,W.T=v}}function eE(a,r,h,d){if(r1){var v=nE(d);if(v===null)G2(a,r,d,o1,h),X4(a,d);else if(d7(v,a,r,h,d))d.stopPropagation();else if(X4(a,d),r&4&&-1<f7.indexOf(a)){for(;v!==null;){var T=Zs(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=nr(T.pendingLanes);if(C!==0){var O=T;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var K=1<<31-Qn(C);O.entanglements[1]|=K,C&=~K}Rt(T),(Jt&6)===0&&(ti=St()+500,Bt(0))}}break;case 31:case 13:O=fs(T,2),O!==null&&ye(O,T,2),vr(),tE(T,2)}if(T=nE(d),T===null&&G2(a,r,d,o1,h),T===v)break;v=T}v!==null&&d.stopPropagation()}else G2(a,r,d,null,h)}}function nE(a){return a=ta(a),iE(a)}var o1=null;function iE(a){if(o1=null,a=ar(a),a!==null){var r=o(a);if(r===null)a=null;else{var h=r.tag;if(h===13){if(a=c(r),a!==null)return a;a=null}else if(h===31){if(a=f(r),a!==null)return a;a=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return o1=a,null}function Q4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case pe:return 2;case Ve:return 8;case Ui:case va:return 32;case vo:return 268435456;default:return 32}default:return 32}}var sE=!1,ah=null,rh=null,oh=null,Zg=new Map,$g=new Map,lh=[],f7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X4(a,r){switch(a){case"focusin":case"focusout":ah=null;break;case"dragenter":case"dragleave":rh=null;break;case"mouseover":case"mouseout":oh=null;break;case"pointerover":case"pointerout":Zg.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$g.delete(r.pointerId)}}function t0(a,r,h,d,v,T){return a===null||a.nativeEvent!==T?(a={blockedOn:r,domEventName:h,eventSystemFlags:d,nativeEvent:T,targetContainers:[v]},r!==null&&(r=Zs(r),r!==null&&K4(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),a)}function d7(a,r,h,d,v){switch(r){case"focusin":return ah=t0(ah,a,r,h,d,v),!0;case"dragenter":return rh=t0(rh,a,r,h,d,v),!0;case"mouseover":return oh=t0(oh,a,r,h,d,v),!0;case"pointerover":var T=v.pointerId;return Zg.set(T,t0(Zg.get(T)||null,a,r,h,d,v)),!0;case"gotpointercapture":return T=v.pointerId,$g.set(T,t0($g.get(T)||null,a,r,h,d,v)),!0}return!1}function J4(a){var r=ar(a.target);if(r!==null){var h=o(r);if(h!==null){if(r=h.tag,r===13){if(r=c(h),r!==null){a.blockedOn=r,zi(a.priority,function(){Y4(h)});return}}else if(r===31){if(r=f(h),r!==null){a.blockedOn=r,zi(a.priority,function(){Y4(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function l1(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var h=nE(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);Ec=d,h.target.dispatchEvent(d),Ec=null}else return r=Zs(h),r!==null&&K4(r),a.blockedOn=h,!1;r.shift()}return!0}function W4(a,r,h){l1(a)&&h.delete(r)}function m7(){sE=!1,ah!==null&&l1(ah)&&(ah=null),rh!==null&&l1(rh)&&(rh=null),oh!==null&&l1(oh)&&(oh=null),Zg.forEach(W4),$g.forEach(W4)}function u1(a,r){a.blockedOn===r&&(a.blockedOn=null,sE||(sE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,m7)))}var c1=null;function Z4(a){c1!==a&&(c1=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){c1===a&&(c1=null);for(var r=0;r<a.length;r+=3){var h=a[r],d=a[r+1],v=a[r+2];if(typeof d!="function"){if(iE(d||h)===null)continue;break}var T=Zs(h);T!==null&&(a.splice(r,3),r-=3,Ig(T,{pending:!0,data:v,method:h.method,action:d},d,v))}}))}function Cm(a){function r(K){return u1(K,a)}ah!==null&&u1(ah,a),rh!==null&&u1(rh,a),oh!==null&&u1(oh,a),Zg.forEach(r),$g.forEach(r);for(var h=0;h<lh.length;h++){var d=lh[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<lh.length&&(h=lh[0],h.blockedOn===null);)J4(h),h.blockedOn===null&&lh.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var v=h[d],T=h[d+1],C=v[ri]||null;if(typeof T=="function")C||Z4(h);else if(C){var O=null;if(T&&T.hasAttribute("formAction")){if(v=T,C=T[ri]||null)O=C.formAction;else if(iE(v)!==null)continue}else O=C.action;typeof O=="function"?h[d+1]=O:(h.splice(d,3),d-=3),Z4(h)}}}function $4(){function a(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function aE(a){this._internalRoot=a}h1.prototype.render=aE.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var h=r.current,d=ca();j4(h,d,a,r,null,null)},h1.prototype.unmount=aE.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;j4(a.current,2,null,a,null,null),vr(),r[Aa]=null}};function h1(a){this._internalRoot=a}h1.prototype.unstable_scheduleHydration=function(a){if(a){var r=dc();a={blockedOn:null,target:a,priority:r};for(var h=0;h<lh.length&&r!==0&&r<lh[h].priority;h++);lh.splice(h,0,a),h===0&&J4(a)}};var tA=t.version;if(tA!=="19.2.4")throw Error(i(527,tA,"19.2.4"));Et.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=g(r),a=a!==null?E(a):null,a=a===null?null:a.stateNode,a};var p7={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f1.isDisabled&&f1.supportsFiber)try{Ea=f1.inject(p7),Si=f1}catch{}}return n0.createRoot=function(a,r){if(!s(a))throw Error(i(299));var h=!1,d="",v=Hy,T=Pg,C=Vg;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=q4(a,1,!1,null,null,h,d,null,v,T,C,$4),a[Aa]=r.current,B2(a),new aE(r)},n0.hydrateRoot=function(a,r,h){if(!s(a))throw Error(i(299));var d=!1,v="",T=Hy,C=Pg,O=Vg,K=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(K=h.formState)),r=q4(a,1,!0,r,h??null,d,v,K,T,C,O,$4),r.context=H4(null),h=r.current,d=ca(),d=Nr(d),v=Po(d),v.callback=null,Tl(h,v,d),h=d,r.current.lanes=h,$o(r,h),Rt(r),a[Aa]=r.current,B2(a),new h1(r)},n0.version="19.2.4",n0}var cA;function A7(){if(cA)return lE.exports;cA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),lE.exports=b7(),lE.exports}var w7=A7();const R7=Math.PI/180;function C7(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Kf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Vt={_global:Kf,version:"10.2.0",isBrowser:C7(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return Vt.angleDeg?n*R7:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Vt.DD.isDragging},isTransforming(){var n,t;return(t=(n=Vt.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Vt.DD.node},releaseCanvasOnDestroy:!0,document:Kf.document,_injectGlobal(n){typeof Kf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Kf.Konva=n}},si=n=>{Vt[n.prototype.getClassName()]=n};Vt._injectGlobal(Vt);const I7=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,hA=()=>{if(typeof document>"u")throw new Error(I7)};class Sr{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Sr(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,o=this.m[1]*e+this.m[3]*i,c=this.m[0]*-i+this.m[2]*e,f=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=o,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,c=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=c,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],c=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,o=this.m[0]*t,c=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],i=this.m[2],s=this.m[3],o=this.m[4],c=this.m[5],f=t*s-e*i,m={x:o,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);m.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),m.scaleX=g,m.scaleY=f/g,m.skewX=(t*i+e*s)/f,m.skewY=0}else if(i!=0||s!=0){const g=Math.sqrt(i*i+s*s);m.rotation=Math.PI/2-(s>0?Math.acos(-i/g):-Math.acos(i/g)),m.scaleX=f/g,m.scaleY=g,m.skewX=0,m.skewY=(t*i+e*s)/f}return m.rotation=et._getRotation(m.rotation),m}}const N7="[object Array]",D7="[object Number]",x7="[object String]",O7="[object Boolean]",M7=Math.PI/180,P7=180/Math.PI,i0="#",V7="",k7="0",L7="Konva warning: ",fA="Konva error: ",U7="rgb(",fE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},z7=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let d1=[],s0=null;const B7=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},et={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===N7},_isNumber(n){return Object.prototype.toString.call(n)===D7&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===x7},_isBoolean(n){return Object.prototype.toString.call(n)===O7},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const t=n[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){d1.push(n),d1.length===1&&B7(function(){const t=d1;d1=[],t.forEach(function(e){e()})})},createCanvasElement(){hA();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return hA(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,t){const e=et.createImageElement();e.onload=function(){t(e)},e.src=n},_rgbToHex(n,t,e){return((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(n){n=n.replace(i0,V7);const t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=k7+n;return i0+n},isCanvasFarblingActive(){if(s0!==null)return s0;if(typeof document>"u")return s0=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const t=n.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(e[s*4]!==40||e[s*4+1]!==40||e[s*4+2]!==40||e[s*4+3]!==255){i=!0;break}return s0=i,this.releaseCanvas(n),s0},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,t,e){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,t=Math.round(t/5)*5,e=Math.round(e/5)*5),i0+this._rgbToHex(n,t,e)},getSnappedHexColor(n){const t=this._hexToRgb(n);return i0+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(n){let t;return n in fE?(t=fE[n],{r:t[0],g:t[1],b:t[2]}):n[0]===i0?this._hexToRgb(n.substring(1)):n.substr(0,4)===U7?(t=z7.exec(n.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",et._namedColorToRBA(n)||et._hex3ColorToRGBA(n)||et._hex4ColorToRGBA(n)||et._hex6ColorToRGBA(n)||et._hex8ColorToRGBA(n)||et._rgbColorToRGBA(n)||et._rgbaColorToRGBA(n)||et._hslColorToRGBA(n)},_namedColorToRBA(n){const t=fE[n.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const t=n.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const t=n.split(/ *, */).map((e,i)=>e.slice(-1)==="%"?i===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(e[0])/360,s=Number(e[1])/100,o=Number(e[2])/100;let c,f,m;if(s===0)return m=o*255,{r:Math.round(m),g:Math.round(m),b:Math.round(m),a:1};o<.5?c=o*(1+s):c=o+s-o*s;const g=2*o-c,E=[0,0,0];for(let b=0;b<3;b++)f=i+1/3*-(b-1),f<0&&f++,f>1&&f--,6*f<1?m=g+(c-g)*6*f:2*f<1?m=c:3*f<2?m=g+(c-g)*(2/3-f)*6:m=g,E[b]=m*255;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection(n,t){return!(t.x>n.x+n.width||t.x+t.width<n.x||t.y>n.y+n.height||t.y+t.height<n.y)},cloneObject(n){const t={};for(const e in n)this._isPlainObject(n[e])?t[e]=this.cloneObject(n[e]):this._isArray(n[e])?t[e]=this.cloneArray(n[e]):t[e]=n[e];return t},cloneArray(n){return n.slice(0)},degToRad(n){return n*M7},radToDeg(n){return n*P7},_degToRad(n){return et.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),et.degToRad(n)},_radToDeg(n){return et.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),et.radToDeg(n)},_getRotation(n){return Vt.angleDeg?et.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(fA+n)},error(n){console.error(fA+n)},warn(n){Vt.showWarnings&&console.warn(L7+n)},each(n,t){for(const e in n)t(e,n[e])},_inRange(n,t,e){return t<=n&&n<e},_getProjectionToSegment(n,t,e,i,s,o){let c,f,m;const g=(n-e)*(n-e)+(t-i)*(t-i);if(g==0)c=n,f=t,m=(s-e)*(s-e)+(o-i)*(o-i);else{const E=((s-n)*(e-n)+(o-t)*(i-t))/g;E<0?(c=n,f=t,m=(n-s)*(n-s)+(t-o)*(t-o)):E>1?(c=e,f=i,m=(e-s)*(e-s)+(i-o)*(i-o)):(c=n+E*(e-n),f=t+E*(i-t),m=(c-s)*(c-s)+(f-o)*(f-o))}return[c,f,m]},_getProjectionToLine(n,t,e){const i=et.cloneObject(n);let s=Number.MAX_VALUE;return t.forEach(function(o,c){if(!e&&c===t.length-1)return;const f=t[(c+1)%t.length],m=et._getProjectionToSegment(o.x,o.y,f.x,f.y,n.x,n.y),g=m[0],E=m[1],b=m[2];b<s&&(i.x=g,i.y=E,s=b)}),i},_prepareArrayForTween(n,t,e){const i=[],s=[];if(n.length>t.length){const c=t;t=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<t.length;c+=2)s.push({x:t[c],y:t[c+1]});const o=[];return s.forEach(function(c){const f=et._getProjectionToLine(c,i,e);o.push(f.x),o.push(f.y)}),o},_prepareToStringify(n){let t;n.visitedByCircularReferenceRemoval=!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]&&typeof n[e]=="object"){if(t=Object.getOwnPropertyDescriptor(n,e),n[e].visitedByCircularReferenceRemoval||et._isElement(n[e]))if(t.configurable)delete n[e];else return null;else if(et._prepareToStringify(n[e])===null)if(t.configurable)delete n[e];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,t){for(const e in t)n[e]=t[e];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){Vt.releaseCanvasOnDestroy&&n.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(n,t,e,i){let s=t<0?t:0,o=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let c=0,f=0,m=0,g=0;typeof i=="number"?c=f=m=g=Math.min(i,t/2,e/2):(c=Math.min(i[0]||0,t/2,e/2),f=Math.min(i[1]||0,t/2,e/2),g=Math.min(i[2]||0,t/2,e/2),m=Math.min(i[3]||0,t/2,e/2)),n.moveTo(s+c,o),n.lineTo(s+t-f,o),n.arc(s+t-f,o+f,f,Math.PI*3/2,0,!1),n.lineTo(s+t,o+e-g),n.arc(s+t-g,o+e-g,g,0,Math.PI/2,!1),n.lineTo(s+m,o+e),n.arc(s+m,o+e-m,m,Math.PI/2,Math.PI,!1),n.lineTo(s,o+c),n.arc(s+c,o+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,t,e,i,s){i=Math.abs(i);for(let o=0;o<e;o++){const c=t[(o-1+e)%e],f=t[o],m=t[(o+1)%e],g={x:f.x-c.x,y:f.y-c.y},E={x:m.x-f.x,y:m.y-f.y},b=Math.hypot(g.x,g.y),A=Math.hypot(E.x,E.y);let N;typeof s=="number"?N=s:N=o<s.length?s[o]:0,N=i*Math.cos(Math.PI/e)*Math.min(1,N/i*2);const V={x:g.x/b,y:g.y/b},U={x:E.x/A,y:E.y/A},H={x:f.x-V.x*N,y:f.y-V.y*N},Y={x:f.x+U.x*N,y:f.y+U.y*N};o===0?n.moveTo(H.x,H.y):n.lineTo(H.x,H.y),n.arcTo(f.x,f.y,Y.x,Y.y,N)}}};function G7(n){const t=[],e=n.length,i=et;for(let s=0;s<e;s++){let o=n[s];i._isNumber(o)?o=Math.round(o*1e3)/1e3:i._isString(o)||(o=o+""),t.push(o)}return t}const dA=",",q7="(",H7=")",j7="([",F7="])",K7=";",Y7="()",Q7="=",mA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],X7=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],J7=100;let m1=null;function pA(){if(m1!==null)return m1;try{const t=et.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(m1=!1,!1)}catch{return m1=!1,!1}}class Ov{constructor(t){this.canvas=t,Vt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,s=i.length,o="",c,f,m,g;for(c=0;c<s;c++)f=i[c],m=f.method,m?(g=f.args,o+=m,t?o+=Y7:et._isArray(g[0])?o+=j7+g.join(dA)+F7:(e&&(g=g.map(E=>typeof E=="number"?Math.floor(E):E)),o+=q7+g.join(dA)+H7)):(o+=f.property,t||(o+=Q7+f.val)),o+=K7;return o}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,i;e.push(t),i=e.length,i>=J7&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,o,c){this._context.arc(t,e,i,s,o,c)}arcTo(t,e,i,s,o){this._context.arcTo(t,e,i,s,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,o,c){this._context.bezierCurveTo(t,e,i,s,o,c)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;if(i.length===2)return this._context.createImageData(t,e);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,o,c){return this._context.createRadialGradient(t,e,i,s,o,c)}drawImage(t,e,i,s,o,c,f,m,g){const E=arguments,b=this._context;E.length===3?b.drawImage(t,e,i):E.length===5?b.drawImage(t,e,i,s,o):E.length===9&&b.drawImage(t,e,i,s,o,c,f,m,g)}ellipse(t,e,i,s,o,c,f,m){this._context.ellipse(t,e,i,s,o,c,f,m)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,o){this._context.roundRect(t,e,i,s,o)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,o,c){this._context.setTransform(t,e,i,s,o,c)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,o,c){this._context.transform(t,e,i,s,o,c)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=mA.length,i=this.setAttr,s,o;const c=function(f){let m=t[f],g;t[f]=function(){return o=G7(Array.prototype.slice.call(arguments,0)),g=m.apply(t,arguments),t._trace({method:f,args:o}),g}};for(s=0;s<e;s++)c(mA[s]);t.setAttr=function(){i.apply(t,arguments);const f=arguments[0];let m=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(m=m/this.canvas.getPixelRatio()),t._trace({property:f,val:m})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}X7.forEach(function(n){Object.defineProperty(Ov.prototype,n,{get(){return this._context[n]},set(t){this._context[n]=t}})});class W7 extends Ov{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&i==="linear-gradient"){this._fillLinearGradient(t);return}const c=t.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):s?this._fillPattern(t):o?this._fillLinearGradient(t):c&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)o.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const o=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",c=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},m=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),E=m.x*g,b=m.y*g;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",c*Math.min(Math.abs(E),Math.abs(b))),this.setAttr("shadowOffsetX",f.x*E),this.setAttr("shadowOffsetY",f.y*b)}}class Z7 extends Ov{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let p1;function $7(){if(p1)return p1;const n=et.createCanvasElement(),t=n.getContext("2d");return p1=(function(){const e=Vt._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/i})(),et.releaseCanvas(n),p1}class aS{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||Vt.pixelRatio||$7();this.pixelRatio=i,this._canvas=et.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(s){return et.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class _h extends aS{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new W7(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class rS extends aS{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Z7(this),this.setSize(t.width,t.height)}}const en={get isDragging(){let n=!1;return en._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return en._dragElements.forEach(t=>{n=t.node}),n},_dragElements:new Map,_drag(n){const t=[];en._dragElements.forEach((e,i)=>{const{node:s}=e,o=s.getStage();o.setPointersPositions(n),e.pointerId===void 0&&(e.pointerId=et._getFirstPointerId(n));const c=o._changedPointerPositions.find(f=>f.id===e.pointerId);if(c){if(e.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-e.startPointerPos.x),Math.abs(c.y-e.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,e),t.push(s)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:n},!0)})},_endDragBefore(n){const t=[];en._dragElements.forEach(e=>{const{node:i}=e,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(en.justDragged=!0,Vt._mouseListenClick=!1,Vt._touchListenClick=!1,Vt._pointerListenClick=!1,e.dragStatus="stopped");const c=e.node.getLayer()||e.node instanceof Vt.Stage&&e.node;c&&t.indexOf(c)===-1&&t.push(c)}),t.forEach(e=>{e.draw()})},_endDragAfter(n){en._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:n},!0),t.dragStatus!=="dragging"&&en._dragElements.delete(e)})}};Vt.isBrowser&&(window.addEventListener("mouseup",en._endDragBefore,!0),window.addEventListener("touchend",en._endDragBefore,!0),window.addEventListener("touchcancel",en._endDragBefore,!0),window.addEventListener("mousemove",en._drag),window.addEventListener("touchmove",en._drag),window.addEventListener("mouseup",en._endDragAfter,!1),window.addEventListener("touchend",en._endDragAfter,!1),window.addEventListener("touchcancel",en._endDragAfter,!1));function kh(n){return et._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||et._isBoolean(n)?n:Object.prototype.toString.call(n)}function V6(n){return n>255?255:n<0?0:Math.round(n)}function Ot(){if(Vt.isUnminified)return function(n,t){return et._isNumber(n)||et.warn(kh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),n}}function Mv(n){if(Vt.isUnminified)return function(t,e){let i=et._isNumber(t),s=et._isArray(t)&&t.length==n;return!i&&!s&&et.warn(kh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+n+")"),t}}function oS(){if(Vt.isUnminified)return function(n,t){return et._isNumber(n)||n==="auto"||et.warn(kh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),n}}function Sd(){if(Vt.isUnminified)return function(n,t){return et._isString(n)||et.warn(kh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),n}}function k6(){if(Vt.isUnminified)return function(n,t){const e=et._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return e||i||et.warn(kh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),n}}function tN(){if(Vt.isUnminified)return function(n,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&n instanceof e||(et._isArray(n)?n.forEach(function(i){et._isNumber(i)||et.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):et.warn(kh(n)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),n}}function Wo(){if(Vt.isUnminified)return function(n,t){return n===!0||n===!1||et.warn(kh(n)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),n}}function eN(n){if(Vt.isUnminified)return function(t,e){return t==null||et.isObject(t)||et.warn(kh(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+n),t}}const a0="get",r0="set",B={addGetterSetter(n,t,e,i,s){B.addGetter(n,t,e),B.addSetter(n,t,i,s),B.addOverloadedGetterSetter(n,t)},addGetter(n,t,e){const i=a0+et._capitalize(t);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[t];return s===void 0?e:s}},addSetter(n,t,e,i){const s=r0+et._capitalize(t);n.prototype[s]||B.overWriteSetter(n,t,e,i)},overWriteSetter(n,t,e,i){const s=r0+et._capitalize(t);n.prototype[s]=function(o){return e&&o!==void 0&&o!==null&&(o=e.call(this,o,t)),this._setAttr(t,o),i&&i.call(this),this}},addComponentsGetterSetter(n,t,e,i,s){const o=e.length,c=et._capitalize,f=a0+c(t),m=r0+c(t);n.prototype[f]=function(){const E={};for(let b=0;b<o;b++){const A=e[b];E[A]=this.getAttr(t+c(A))}return E};const g=eN(e);n.prototype[m]=function(E){const b=this.attrs[t];i&&(E=i.call(this,E,t)),g&&g.call(this,E,t);for(const A in E)E.hasOwnProperty(A)&&this._setAttr(t+c(A),E[A]);return E||e.forEach(A=>{this._setAttr(t+c(A),void 0)}),this._fireChangeEvent(t,b,E),s&&s.call(this),this},B.addOverloadedGetterSetter(n,t)},addOverloadedGetterSetter(n,t){const e=et._capitalize(t),i=r0+e,s=a0+e;n.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,t,e,i){et.error("Adding deprecated "+t);const s=a0+et._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){et.error(o);const c=this.attrs[t];return c===void 0?e:c},B.addSetter(n,t,i,function(){et.error(o)}),B.addOverloadedGetterSetter(n,t)},backCompat(n,t){et.each(t,function(e,i){const s=n.prototype[i],o=a0+et._capitalize(e),c=r0+et._capitalize(e);function f(){s.apply(this,arguments),et.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[e]=f,n.prototype[o]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function nN(n){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(n))!==null;){const[,i,s]=e;switch(i){case"blur":{const o=parseFloat(s.replace("px",""));return function(c){this.blurRadius(o*.5);const f=Vt.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const o=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(o);const f=Vt.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const o=parseFloat(s);return function(c){const f=100*(Math.sqrt(o)-1);this.contrast(f);const m=Vt.Filters;m&&m.Contrast&&m.Contrast.call(this,c)}}case"grayscale":return function(o){const c=Vt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,o)};case"sepia":return function(o){const c=Vt.Filters;c&&c.Sepia&&c.Sepia.call(this,o)};case"invert":return function(o){const c=Vt.Filters;c&&c.Invert&&c.Invert.call(this,o)};default:et.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const P1="absoluteOpacity",gA="allEventListeners",Uu="absoluteTransform",_A="absoluteScale",kf="canvas",iN="Change",sN="children",aN="konva",iT="listening",rN="mouseenter",oN="mouseleave",lN="pointerenter",uN="pointerleave",cN="touchenter",hN="touchleave",yA="set",vA="Shape",V1=" ",EA="stage",ph="transform",fN="Stage",sT="visible",dN=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(V1);let mN=1;class xt{constructor(t){this._id=mN++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===ph||t===Uu)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t);return(i===void 0||(t===ph||t===Uu)&&i.dirty===!0)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const s=e.map(o=>o+"Change.konva").join(V1);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(kf)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Uu&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(kf)){const{scene:t,filter:e,hit:i}=this._cache.get(kf);et.releaseCanvas(t._canvas,e._canvas,i._canvas),this._cache.delete(kf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(e.width||i.width),o=Math.ceil(e.height||i.height),c=e.pixelRatio,f=e.x===void 0?Math.floor(i.x):e.x,m=e.y===void 0?Math.floor(i.y):e.y,g=e.offset||0,E=e.drawBorder||!1,b=e.hitCanvasPixelRatio||1;if(!s||!o){et.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const A=Math.abs(Math.round(i.x)-f)>.5?1:0,N=Math.abs(Math.round(i.y)-m)>.5?1:0;s+=g*2+A,o+=g*2+N,f-=g,m-=g;const D=new _h({pixelRatio:c,width:s,height:o}),V=new _h({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),U=new rS({pixelRatio:b,width:s,height:o}),H=D.getContext(),Y=U.getContext(),X=new _h({width:D.width/D.pixelRatio+Math.abs(f),height:D.height/D.pixelRatio+Math.abs(m),pixelRatio:D.pixelRatio}),Z=X.getContext();return U.isCache=!0,D.isCache=!0,this._cache.delete(kf),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(D.getContext()._context.imageSmoothingEnabled=!1,V.getContext()._context.imageSmoothingEnabled=!1),H.save(),Y.save(),Z.save(),H.translate(-f,-m),Y.translate(-f,-m),Z.translate(-f,-m),X.x=f,X.y=m,this._isUnderCache=!0,this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(_A),this.drawScene(D,this,X),this.drawHit(U,this),this._isUnderCache=!1,H.restore(),Y.restore(),E&&(H.save(),H.beginPath(),H.rect(0,0,s,o),H.closePath(),H.setAttr("strokeStyle","red"),H.setAttr("lineWidth",5),H.stroke(),H.restore()),et.releaseCanvas(X._canvas),this._cache.set(kf,{scene:D,filter:V,hit:U,x:f,y:m}),this._requestDraw(),this}isCached(){return this._cache.has(kf)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,o=1/0,c=-1/0,f=-1/0;const m=this.getAbsoluteTransform(e);return i.forEach(function(g){const E=m.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),{x:s,y:o,width:c-s,height:f-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,s=e.filter,o=s.getContext(),c,f,m,g;if(!t||t.length===0)return i;if(this._filterUpToDate)return s;let E=!0;for(let A=0;A<t.length;A++)if(typeof t[A]=="string"&&pA(),typeof t[A]!="string"||!pA()){E=!1;break}const b=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),E){const A=t.join(" ");return o.save(),o.setAttr("filter",A),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),o.restore(),this._filterUpToDate=!0,s}try{for(c=t.length,o.clear(),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),f=o.getImageData(0,0,s.getWidth(),s.getHeight()),m=0;m<c;m++)g=t[m],typeof g=="string"&&(g=nN(g)),g.call(this,f),o.putImageData(f,0,0)}catch(A){et.error("Unable to apply filter. "+A.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,e){if(this._cache&&this._cache.delete(gA),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(V1);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],m=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:m,handler:e})}return this}off(t,e){let i=(t||"").split(V1),s=i.length,o,c,f,m,g,E;if(this._cache&&this._cache.delete(gA),!t)for(c in this.eventListeners)this._off(c);for(o=0;o<s;o++)if(f=i[o],m=f.split("."),g=m[0],E=m[1],g)this.eventListeners[g]&&this._off(g,E,e);else for(c in this.eventListeners)this._off(c,E,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(i){e.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const s=this;this.on(t,function(o){const c=o.target.findAncestors(e,!0,s);for(let f=0;f<c.length;f++)o=et.cloneObject(o),o.currentTarget=c[f],i.call(c[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),en._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Uu),this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(_A),this._clearSelfAndDescendantCache(EA),this._clearSelfAndDescendantCache(sT),this._clearSelfAndDescendantCache(iT)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+et._capitalize(t);return et._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)e!==sN&&(i=yA+et._capitalize(e),et._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(iT,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(sT,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;en._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const o=!e&&!Vt.hitOnDragEnabled&&(s||Vt.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,s,o,c,f;function m(E){for(s=[],o=E.length,c=0;c<o;c++)f=E[c],i++,f.nodeType!==vA&&(s=s.concat(f.getChildren().slice())),f._id===e._id&&(c=o);s.length>0&&s[0].getDepth()<=t&&m(s)}const g=this.getStage();return e.nodeType!==fN&&g&&m(g.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ph),this._clearSelfAndDescendantCache(Uu)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),o=new Sr,c=this.offset();return o.m=s.slice(),o.translate(c.x,c.y),o.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(ph);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(ph),this._clearSelfAndDescendantCache(Uu),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),o=this.y();return e!==void 0&&(s+=e),i!==void 0&&(o+=i),this.setPosition({x:s,y:o}),this}_eachAncestorReverse(t,e){let i=[],s=this.getParent(),o,c;if(!(e&&e._id===this._id)){for(i.unshift(this);s&&(!e||s._id!==e._id);)i.unshift(s),s=s.parent;for(o=i.length,c=0;c<o;c++)t(i[c])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return et.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return et.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return et.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return et.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return et.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&et.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(P1,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,s,o,c;const f={attrs:{},className:this.getClassName()};for(e in t)i=t[e],c=et.isObject(i)&&!et._isPlainObject(i)&&!et._isArray(i),!c&&(s=typeof this[e]=="function"&&this[e],delete t[e],o=s?s.call(this):null,t[e]=i,o!==i&&(f.attrs[e]=i));return et._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let o=this.parent;for(;o;){if(o===i)return s;o._isMatch(t)&&s.push(o),o=o.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,s,o;for(s=0;s<i;s++)if(o=e[s],et.isValidSelector(o)||(et.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),et.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),et.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(EA,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Uu,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new Sr,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?e.multiply(i.getTransform()):s==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;{e=this._cache.get(Uu)||new Sr,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const i=this.transformsEnabled();if(i==="all")e.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,o=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;e.translate(s-c,o-f)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ph,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(ph)||new Sr;i.reset();const s=this.x(),o=this.y(),c=Vt.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,m=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,E=this.attrs.skewY||0,b=this.attrs.offsetX||0,A=this.attrs.offsetY||0;return(s!==0||o!==0)&&i.translate(s,o),c!==0&&i.rotate(c),(g!==0||E!==0)&&i.skew(g,E),(f!==1||m!==1)&&i.scale(f,m),(b!==0||A!==0)&&i.translate(-1*b,-1*A),i.dirty=!1,i}clone(t){let e=et.cloneObject(this.attrs),i,s,o,c,f;for(i in t)e[i]=t[i];const m=new this.constructor(e);for(i in this.eventListeners)for(s=this.eventListeners[i],o=s.length,c=0;c<o;c++)f=s[c],f.name.indexOf(aN)<0&&(m.eventListeners[i]||(m.eventListeners[i]=[]),m.eventListeners[i].push(f));return m}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(e.x),o=t.y!==void 0?t.y:Math.floor(e.y),c=t.pixelRatio||1,f=new _h({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:c}),m=f.getContext(),g=new _h({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(m._context.imageSmoothingEnabled=!1),m.save(),(s||o)&&m.translate(-1*s,-1*o),this.drawScene(f,void 0,g),m.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,et._urlToImage(this.toDataURL(t),function(o){e(o),s?.(o)})}catch(s){i(s)}})}toBlob(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(o=>{e(o),s?.(o)},t?.mimeType,t?.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Vt.dragDistance}_off(t,e,i){let s=this.eventListeners[t],o,c,f;for(o=0;o<s.length;o++)if(c=s[o].name,f=s[o].handler,(c!=="konva"||e==="konva")&&(!e||c===e)&&(!i||i===f)){if(s.splice(o,1),s.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,e,i){this._fire(t+iN,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return i!==-1&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[yA+et._capitalize(t)];return et._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Vt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];i===e&&!et.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===vA&&(e.target=this);const s=[rN,oN,lN,uN,cN,hN];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,e);const c=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i;const{nodeType:s}=this,o=xt.protoListenerMap.get(s)||{};let c=o?.[t];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const m=(i=(e=f.eventListeners)===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:[];c.push(...m),f=Object.getPrototypeOf(f)}o[t]=c,xt.protoListenerMap.set(s,o)}return c}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(let o=0;o<i.length;o++)i[o].handler.call(this,e);const s=this.eventListeners[t];if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const o=i._getPointerById(e)||i._changedPointerPositions[0]||s;en._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-s.x,y:o.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){en._dragElements.has(this._id)||this._createDragElement(t);const i=en._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let s={x:i.x-e.offset.x,y:i.y-e.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const c=o.call(this,s,t);c?s=c:et.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const e=en._dragElements.get(this._id);e&&(e.dragStatus="stopped"),en._endDragBefore(t),en._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=en._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Vt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;en._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=en._dragElements.get(this._id),i=e&&e.dragStatus==="dragging",s=e&&e.dragStatus==="ready";i?this.stopDrag():s&&en._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return et.haveIntersection(i,this.getClientRect())}static create(t,e){return et._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=xt.prototype.getClassName.call(t),s=t.children,o,c,f;e&&(t.attrs.container=e),Vt[i]||(et.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const m=Vt[i];if(o=new m(t.attrs),s)for(c=s.length,f=0;f<c;f++)o.add(xt._createNode(s[f]));return o}}xt.protoListenerMap=new Map;xt.prototype.nodeType="Node";xt.prototype._attrsAffectingSize=[];xt.prototype.eventListeners={};xt.prototype.on.call(xt.prototype,dN,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ph),this._clearSelfAndDescendantCache(Uu)});xt.prototype.on.call(xt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(sT)});xt.prototype.on.call(xt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(iT)});xt.prototype.on.call(xt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(P1)});const _n=B.addGetterSetter;_n(xt,"zIndex");_n(xt,"absolutePosition");_n(xt,"position");_n(xt,"x",0,Ot());_n(xt,"y",0,Ot());_n(xt,"globalCompositeOperation","source-over",Sd());_n(xt,"opacity",1,Ot());_n(xt,"name","",Sd());_n(xt,"id","",Sd());_n(xt,"rotation",0,Ot());B.addComponentsGetterSetter(xt,"scale",["x","y"]);_n(xt,"scaleX",1,Ot());_n(xt,"scaleY",1,Ot());B.addComponentsGetterSetter(xt,"skew",["x","y"]);_n(xt,"skewX",0,Ot());_n(xt,"skewY",0,Ot());B.addComponentsGetterSetter(xt,"offset",["x","y"]);_n(xt,"offsetX",0,Ot());_n(xt,"offsetY",0,Ot());_n(xt,"dragDistance",void 0,Ot());_n(xt,"width",0,Ot());_n(xt,"height",0,Ot());_n(xt,"listening",!0,Wo());_n(xt,"preventDefault",!0,Wo());_n(xt,"filters",void 0,function(n){return this._filterUpToDate=!1,n});_n(xt,"visible",!0,Wo());_n(xt,"transformsEnabled","all",Sd());_n(xt,"size");_n(xt,"dragBoundFunc");_n(xt,"draggable",!1,Wo());B.backCompat(xt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ar extends xt{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants(s=>{const o=s._isMatch(t);return o&&i.push(s),!!(o&&e)}),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=xt.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=xt.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){e.add(i.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,i){e.index=i}),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas(),c=o&&o.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=o&&o.isCache;if(!this.isVisible()&&!g)return this;if(m){c.save();const E=this.getAbsoluteTransform(e).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",o,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,o=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){o.save();const m=this.getAbsoluteTransform(e).getMatrix();o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var o;const c=e&&e.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),E=typeof f=="number"&&typeof m=="number"||g,b=i===this;if(E){c.save();const N=this.getAbsoluteTransform(i);let D=N.getMatrix();c.transform(D[0],D[1],D[2],D[3],D[4],D[5]),c.beginPath();let V;if(g)V=g.call(this,c,this);else{const U=this.clipX(),H=this.clipY();c.rect(U||0,H||0,f,m)}c.clip.apply(c,V),D=N.copy().invert().getMatrix(),c.transform(D[0],D[1],D[2],D[3],D[4],D[5])}const A=!b&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";A&&(c.save(),c._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(N){N[t](e,i,s)}),A&&c.restore(),E&&c.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let o,c,f,m,g={x:1/0,y:1/0,width:0,height:0};const E=this;(e=this.children)===null||e===void 0||e.forEach(function(N){if(!N.visible())return;const D=N.getClientRect({relativeTo:E,skipShadow:t.skipShadow,skipStroke:t.skipStroke});D.width===0&&D.height===0||(o===void 0?(o=D.x,c=D.y,f=D.x+D.width,m=D.y+D.height):(o=Math.min(o,D.x),c=Math.min(c,D.y),f=Math.max(f,D.x+D.width),m=Math.max(m,D.y+D.height)))});const b=this.find("Shape");let A=!1;for(let N=0;N<b.length;N++)if(b[N]._isVisible(this)){A=!0;break}return A&&o!==void 0?g={x:o,y:c,width:f-o,height:m-c}:g={x:0,y:0,width:0,height:0},i?g:this._transformedRect(g,s)}}B.addComponentsGetterSetter(Ar,"clip",["x","y","width","height"]);B.addGetterSetter(Ar,"clipX",void 0,Ot());B.addGetterSetter(Ar,"clipY",void 0,Ot());B.addGetterSetter(Ar,"clipWidth",void 0,Ot());B.addGetterSetter(Ar,"clipHeight",void 0,Ot());B.addGetterSetter(Ar,"clipFunc");const $0=new Map,L6=Vt._global.PointerEvent!==void 0;function dE(n){return $0.get(n)}function lS(n){return{evt:n,pointerId:n.pointerId}}function U6(n,t){return $0.get(n)===t}function z6(n,t){M0(n),t.getStage()&&($0.set(n,t),L6&&t._fire("gotpointercapture",lS(new PointerEvent("gotpointercapture"))))}function M0(n,t){const e=$0.get(n);if(!e)return;const i=e.getStage();i&&i.content,$0.delete(n),L6&&e._fire("lostpointercapture",lS(new PointerEvent("lostpointercapture")))}const pN="Stage",gN="string",TA="px",_N="mouseout",B6="mouseleave",G6="mouseover",q6="mouseenter",H6="mousemove",j6="mousedown",F6="mouseup",T0="pointermove",S0="pointerdown",jm="pointerup",b0="pointercancel",yN="lostpointercapture",g1="pointerout",A0="pointerleave",_1="pointerover",y1="pointerenter",aT="contextmenu",K6="touchstart",Y6="touchend",Q6="touchmove",X6="touchcancel",rT="wheel",vN=5,EN=[[q6,"_pointerenter"],[j6,"_pointerdown"],[H6,"_pointermove"],[F6,"_pointerup"],[B6,"_pointerleave"],[K6,"_pointerdown"],[Q6,"_pointermove"],[Y6,"_pointerup"],[X6,"_pointercancel"],[G6,"_pointerover"],[rT,"_wheel"],[aT,"_contextmenu"],[S0,"_pointerdown"],[T0,"_pointermove"],[jm,"_pointerup"],[b0,"_pointercancel"],[A0,"_pointerleave"],[yN,"_lostpointercapture"]],mE={mouse:{[g1]:_N,[A0]:B6,[_1]:G6,[y1]:q6,[T0]:H6,[S0]:j6,[jm]:F6,[b0]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[g1]:"touchout",[A0]:"touchleave",[_1]:"touchover",[y1]:"touchenter",[T0]:Q6,[S0]:K6,[jm]:Y6,[b0]:X6,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[g1]:g1,[A0]:A0,[_1]:_1,[y1]:y1,[T0]:T0,[S0]:S0,[jm]:jm,[b0]:b0,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},w0=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Im=n=>{const t=w0(n);if(t==="pointer")return Vt.pointerEventsEnabled&&mE.pointer;if(t==="touch")return mE.touch;if(t==="mouse")return mE.mouse};function SA(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&et.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const TN="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",P0=[];let Pv=class extends Ar{constructor(t){super(SA(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),P0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{SA(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",i=t.getType()==="FastLayer";e||i||et.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===gN){let e;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Ar.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&et._isInDocument(t)&&this.container().removeChild(t);const e=P0.indexOf(this);return e>-1&&P0.splice(e,1),et.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(et.warn(TN),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new _h({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach(function(o){if(!o.isVisible())return;const c=o._toKonvaCanvas(t);i.drawImage(c._canvas,t.x,t.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let o=s;o>=0;o--){const c=e[o].getIntersection(t);if(c)return c}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+TA,this.content.style.height=e+TA),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t,...e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const i=this.children.length;return i>vN&&et.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Vt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return U6(t,this)}setPointerCapture(t){z6(t,this)}releaseCapture(t){M0(t)}getLayers(){return this.children}_bindContentEvents(){Vt.isBrowser&&EN.forEach(([t,e])=>{this.content.addEventListener(t,i=>{this[e](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Im(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Im(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Im(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),o=!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled;s&&o?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):o&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Im(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(o=>{const c=this.getIntersection(o);if(en.justDragged=!1,Vt["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}Vt.capturePointerEventsEnabled&&c.setPointerCapture(o.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(e.pointerdown,{evt:t,pointerId:o.id}),s=!0;const f=t.type.indexOf("touch")>=0;c.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Im(t.type),i=w0(t.type);if(!e)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Vt.isDragging()&&en.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled))return;const c={};let f=!1;const m=this._getTargetShape(i);this._changedPointerPositions.forEach(g=>{const E=dE(g.id)||this.getIntersection(g),b=g.id,A={evt:t,pointerId:b},N=m!==E;if(N&&m&&(m._fireAndBubble(e.pointerout,{...A},E),m._fireAndBubble(e.pointerleave,{...A},E)),E){if(c[E._id])return;c[E._id]=!0}E&&E.isListening()?(f=!0,N&&(E._fireAndBubble(e.pointerover,{...A},m),E._fireAndBubble(e.pointerenter,{...A},m),this[i+"targetShape"]=E),E._fireAndBubble(e.pointermove,{...A})):m&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:b}),this[i+"targetShape"]=null)}),f||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Im(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],o=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(m=>{const g=dE(m.id)||this.getIntersection(m);if(g){if(g.releaseCapture(m.id),c[g._id])return;c[g._id]=!0}const E=m.id,b={evt:t,pointerId:E};let A=!1;Vt["_"+i+"InDblClickWindow"]?(A=!0,clearTimeout(this[i+"DblTimeout"])):en.justDragged||(Vt["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Vt["_"+i+"InDblClickWindow"]=!1},Vt.dblClickWindow),g&&g.isListening()?(f=!0,this[i+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...b}),Vt["_"+i+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(e.pointerclick,{...b}),A&&o&&o===g&&g._fireAndBubble(e.pointerdblclick,{...b}))):(this[i+"ClickEndShape"]=null,f||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),Vt["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:E}),A&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:E}))}),f||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Vt["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(aT,{evt:t}):this._fire(aT,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(rT,{evt:t}):this._fire(rT,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=dE(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(jm,lS(t)),M0(t.pointerId)}_lostpointercapture(t){M0(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,s=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}])}_setPointerPosition(t){et.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new _h({width:this.width(),height:this.height()}),this.bufferHitCanvas=new rS({pixelRatio:1,width:this.width(),height:this.height()}),!Vt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return et.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Pv.prototype.nodeType=pN;si(Pv);B.addGetterSetter(Pv,"container");Vt.isBrowser&&document.addEventListener("visibilitychange",()=>{P0.forEach(n=>{n.batchDraw()})});const J6="hasShadow",W6="shadowRGBA",Z6="patternImage",$6="linearGradient",tw="radialGradient";let v1;function pE(){return v1||(v1=et.createCanvasElement().getContext("2d"),v1)}const V0={};function SN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function bN(n){n.stroke()}function AN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function wN(n){n.stroke()}function RN(){this._clearCache(J6)}function CN(){this._clearCache(W6)}function IN(){this._clearCache(Z6)}function NN(){this._clearCache($6)}function DN(){this._clearCache(tw)}class Ct extends xt{constructor(t){super(t);let e,i=0;for(;e=et.getHitColor(),!(e&&!(e in V0));)if(i++,i>=1e4){et.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),e=et.getRandomColor();break}this.colorKey=e,V0[e]=this}getContext(){return et.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return et.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(J6,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Z6,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=pE().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const i=new Sr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(Vt.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),o=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(o)}return e}}_getLinearGradient(){return this._getCache($6,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=pE(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),o=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}_getRadialGradient(){return this._getCache(tw,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=pE(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),o=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}getShadowRGBA(){return this._getCache(W6,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=et.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return xt.prototype.destroy.call(this),delete V0[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const s=t||this.hasFill(),o=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&o&&c)return!0;const f=this.hasShadow(),m=this.shadowForStrokeEnabled();return!!(s&&o&&f&&m)}setStrokeHitEnabled(t){et.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,o=t.relativeTo||e&&this.getStage()||void 0,c=this.getSelfRect(),m=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=c.width+m,E=c.height+m,b=!t.skipShadow&&this.hasShadow(),A=b?this.shadowOffsetX():0,N=b?this.shadowOffsetY():0,D=g+Math.abs(A),V=E+Math.abs(N),U=b&&this.shadowBlur()||0,H=D+U*2,Y=V+U*2,X={width:H,height:Y,x:-(m/2+U)+Math.min(A,0)+c.x,y:-(m/2+U)+Math.min(N,0)+c.y};return s?X:this._transformedRect(X,o)}drawScene(t,e,i){const s=this.getLayer(),o=t||s.getCanvas(),c=o.getContext(),f=this._getCanvasCache(),m=this.getSceneFunc(),g=this.hasShadow();let E;const b=e===this;if(!this.isVisible()&&!b)return this;if(f){c.save();const A=this.getAbsoluteTransform(e).getMatrix();return c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!m)return this;if(c.save(),this._useBufferCanvas()){E=this.getStage();const A=i||E.bufferCanvas,N=A.getContext();i?(N.save(),N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,A.width,A.height),N.restore()):N.clear(),N.save(),N._applyLineJoin(this),N._applyMiterLimit(this);const D=this.getAbsoluteTransform(e).getMatrix();N.transform(D[0],D[1],D[2],D[3],D[4],D[5]),m.call(this,N,this),N.restore();const V=A.pixelRatio;g&&c._applyShadow(this),b||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(A._canvas,A.x||0,A.y||0,A.width/V,A.height/V)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!b){const A=this.getAbsoluteTransform(e).getMatrix();c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}g&&c._applyShadow(this),m.call(this,c,this)}return c.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),o=t||s.hitCanvas,c=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),m=this._getCanvasCache(),g=m&&m.hit;if(this.colorKey||et.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){c.save();const b=this.getAbsoluteTransform(e).getMatrix();return c.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===e)){const b=this.getAbsoluteTransform(e).getMatrix();c.transform(b[0],b[1],b[2],b[3],b[4],b[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,o=s.getContext(),c=s.getWidth(),f=s.getHeight();o.clear(),o.drawImage(i._canvas,0,0,c,f);try{const m=o.getImageData(0,0,c,f),g=m.data,E=g.length,b=et._hexToRgb(this.colorKey);for(let A=0;A<E;A+=4)g[A+3]>t?(g[A]=b.r,g[A+1]=b.g,g[A+2]=b.b,g[A+3]=255):g[A+3]=0;o.putImageData(m,0,0)}catch(m){et.error("Unable to draw hit graph from cached scene canvas. "+m.message)}return this}hasPointerCapture(t){return U6(t,this)}setPointerCapture(t){z6(t,this)}releaseCapture(t){M0(t)}}Ct.prototype._fillFunc=SN;Ct.prototype._strokeFunc=bN;Ct.prototype._fillFuncHit=AN;Ct.prototype._strokeFuncHit=wN;Ct.prototype._centroid=!1;Ct.prototype.nodeType="Shape";si(Ct);Ct.prototype.eventListeners={};Ct.prototype.on.call(Ct.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",RN);Ct.prototype.on.call(Ct.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",CN);Ct.prototype.on.call(Ct.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",IN);Ct.prototype.on.call(Ct.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",NN);Ct.prototype.on.call(Ct.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",DN);B.addGetterSetter(Ct,"stroke",void 0,k6());B.addGetterSetter(Ct,"strokeWidth",2,Ot());B.addGetterSetter(Ct,"fillAfterStrokeEnabled",!1);B.addGetterSetter(Ct,"hitStrokeWidth","auto",oS());B.addGetterSetter(Ct,"strokeHitEnabled",!0,Wo());B.addGetterSetter(Ct,"perfectDrawEnabled",!0,Wo());B.addGetterSetter(Ct,"shadowForStrokeEnabled",!0,Wo());B.addGetterSetter(Ct,"lineJoin");B.addGetterSetter(Ct,"lineCap");B.addGetterSetter(Ct,"miterLimit");B.addGetterSetter(Ct,"sceneFunc");B.addGetterSetter(Ct,"hitFunc");B.addGetterSetter(Ct,"dash");B.addGetterSetter(Ct,"dashOffset",0,Ot());B.addGetterSetter(Ct,"shadowColor",void 0,Sd());B.addGetterSetter(Ct,"shadowBlur",0,Ot());B.addGetterSetter(Ct,"shadowOpacity",1,Ot());B.addComponentsGetterSetter(Ct,"shadowOffset",["x","y"]);B.addGetterSetter(Ct,"shadowOffsetX",0,Ot());B.addGetterSetter(Ct,"shadowOffsetY",0,Ot());B.addGetterSetter(Ct,"fillPatternImage");B.addGetterSetter(Ct,"fill",void 0,k6());B.addGetterSetter(Ct,"fillPatternX",0,Ot());B.addGetterSetter(Ct,"fillPatternY",0,Ot());B.addGetterSetter(Ct,"fillLinearGradientColorStops");B.addGetterSetter(Ct,"strokeLinearGradientColorStops");B.addGetterSetter(Ct,"fillRadialGradientStartRadius",0);B.addGetterSetter(Ct,"fillRadialGradientEndRadius",0);B.addGetterSetter(Ct,"fillRadialGradientColorStops");B.addGetterSetter(Ct,"fillPatternRepeat","repeat");B.addGetterSetter(Ct,"fillEnabled",!0);B.addGetterSetter(Ct,"strokeEnabled",!0);B.addGetterSetter(Ct,"shadowEnabled",!0);B.addGetterSetter(Ct,"dashEnabled",!0);B.addGetterSetter(Ct,"strokeScaleEnabled",!0);B.addGetterSetter(Ct,"fillPriority","color");B.addComponentsGetterSetter(Ct,"fillPatternOffset",["x","y"]);B.addGetterSetter(Ct,"fillPatternOffsetX",0,Ot());B.addGetterSetter(Ct,"fillPatternOffsetY",0,Ot());B.addComponentsGetterSetter(Ct,"fillPatternScale",["x","y"]);B.addGetterSetter(Ct,"fillPatternScaleX",1,Ot());B.addGetterSetter(Ct,"fillPatternScaleY",1,Ot());B.addComponentsGetterSetter(Ct,"fillLinearGradientStartPoint",["x","y"]);B.addComponentsGetterSetter(Ct,"strokeLinearGradientStartPoint",["x","y"]);B.addGetterSetter(Ct,"fillLinearGradientStartPointX",0);B.addGetterSetter(Ct,"strokeLinearGradientStartPointX",0);B.addGetterSetter(Ct,"fillLinearGradientStartPointY",0);B.addGetterSetter(Ct,"strokeLinearGradientStartPointY",0);B.addComponentsGetterSetter(Ct,"fillLinearGradientEndPoint",["x","y"]);B.addComponentsGetterSetter(Ct,"strokeLinearGradientEndPoint",["x","y"]);B.addGetterSetter(Ct,"fillLinearGradientEndPointX",0);B.addGetterSetter(Ct,"strokeLinearGradientEndPointX",0);B.addGetterSetter(Ct,"fillLinearGradientEndPointY",0);B.addGetterSetter(Ct,"strokeLinearGradientEndPointY",0);B.addComponentsGetterSetter(Ct,"fillRadialGradientStartPoint",["x","y"]);B.addGetterSetter(Ct,"fillRadialGradientStartPointX",0);B.addGetterSetter(Ct,"fillRadialGradientStartPointY",0);B.addComponentsGetterSetter(Ct,"fillRadialGradientEndPoint",["x","y"]);B.addGetterSetter(Ct,"fillRadialGradientEndPointX",0);B.addGetterSetter(Ct,"fillRadialGradientEndPointY",0);B.addGetterSetter(Ct,"fillPatternRotation",0);B.addGetterSetter(Ct,"fillRule",void 0,Sd());B.backCompat(Ct,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const xN="beforeDraw",ON="draw",ew=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],MN=ew.length;let bd=class extends Ar{constructor(t){super(t),this.canvas=new _h,this.hitCanvas=new rS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){xt.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!xt.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(xt.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(xt.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return xt.prototype.remove.call(this),t&&t.parentNode&&et._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),xt.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){et.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){et.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,et.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let s=0;s<MN;s++){const o=ew[s],c=this._getIntersection({x:t.x+o.x*e,y:t.y+o.y*e}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=i[3];if(s===255){const o=et.getHitColorKey(i[0],i[1],i[2]),c=V0[o];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas();return this._fire(xN,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),Ar.prototype.drawScene.call(this,o,e,i),this._fire(ON,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Ar.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return et.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};bd.prototype.nodeType="Layer";si(bd);B.addGetterSetter(bd,"imageSmoothingEnabled",!0);B.addGetterSetter(bd,"clearBeforeDraw",!0);B.addGetterSetter(bd,"hitGraphEnabled",!0,Wo());class uS extends bd{constructor(t){super(t),this.listening(!1),et.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}uS.prototype.nodeType="FastLayer";si(uS);let ep=class extends Ar{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to groups.")}};ep.prototype.nodeType="Group";si(ep);const gE=(function(){return Kf.performance&&Kf.performance.now?function(){return Kf.performance.now()}:function(){return new Date().getTime()}})();class co{constructor(t,e){this.id=co.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gE(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=co.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gE(),co._addAnimation(this),this}stop(){return co._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let o=0;o<s;o++)if(i[o].id===e){this.animations.splice(o,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],o=s.layers,c=s.func;s._updateFrameObject(gE());const f=o.length;let m;if(c?m=c.call(s,s.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const E=o[g];E._id!==void 0&&(t[E._id]=E)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=co;t.animations.length?(t._runFrames(),et.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,et.requestAnimFrame(this._animationLoop))}}co.animations=[];co.animIdCounter=0;co.animRunning=!1;const PN={node:1,duration:1,easing:1,onFinish:1,yoyo:1},VN=1,bA=2,AA=3,wA=["fill","stroke","shadowColor"];let kN=0;class LN{constructor(t,e,i,s,o,c,f){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=o-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=bA,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=AA,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===bA?this.setTime(t):this.state===AA&&this.setTime(this.duration-t)}pause(){this.state=VN,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Sn{constructor(t){const e=this,i=t.node,s=i._id,o=t.easing||k0.Linear,c=!!t.yoyo;let f,m;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=i,this._id=kN++;const g=i.getLayer()||(i instanceof Vt.Stage?i.getLayers():null);g||et.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new co(function(){e.tween.onEnterFrame()},g),this.tween=new LN(m,function(E){e._tweenFunc(E)},o,0,1,f*1e3,c),this._addListeners(),Sn.attrs[s]||(Sn.attrs[s]={}),Sn.attrs[s][this._id]||(Sn.attrs[s][this._id]={}),Sn.tweens[s]||(Sn.tweens[s]={});for(m in t)PN[m]===void 0&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,s=i._id;let o,c,f,m,g;const E=Sn.tweens[s][t];E&&delete Sn.attrs[s][E][t];let b=i.getAttr(t);if(et._isArray(e))if(o=[],c=Math.max(e.length,b.length),t==="points"&&e.length!==b.length&&(e.length>b.length?(m=b,b=et._prepareArrayForTween(b,e,i.closed())):(f=e,e=et._prepareArrayForTween(e,b,i.closed()))),t.indexOf("fill")===0)for(let A=0;A<c;A++)if(A%2===0)o.push(e[A]-b[A]);else{const N=et.colorToRGBA(b[A]);g=et.colorToRGBA(e[A]),b[A]=N,o.push({r:g.r-N.r,g:g.g-N.g,b:g.b-N.b,a:g.a-N.a})}else for(let A=0;A<c;A++)o.push(e[A]-b[A]);else wA.indexOf(t)!==-1?(b=et.colorToRGBA(b),g=et.colorToRGBA(e),o={r:g.r-b.r,g:g.g-b.g,b:g.b-b.b,a:g.a-b.a}):o=e-b;Sn.attrs[s][this._id][t]={start:b,diff:o,end:e,trueEnd:f,trueStart:m},Sn.tweens[s][t]=this._id}_tweenFunc(t){const e=this.node,i=Sn.attrs[e._id][this._id];let s,o,c,f,m,g,E,b;for(s in i){if(o=i[s],c=o.start,f=o.diff,b=o.end,et._isArray(c))if(m=[],E=Math.max(c.length,b.length),s.indexOf("fill")===0)for(g=0;g<E;g++)g%2===0?m.push((c[g]||0)+f[g]*t):m.push("rgba("+Math.round(c[g].r+f[g].r*t)+","+Math.round(c[g].g+f[g].g*t)+","+Math.round(c[g].b+f[g].b*t)+","+(c[g].a+f[g].a*t)+")");else for(g=0;g<E;g++)m.push((c[g]||0)+f[g]*t);else wA.indexOf(s)!==-1?m="rgba("+Math.round(c.r+f.r*t)+","+Math.round(c.g+f.g*t)+","+Math.round(c.b+f.b*t)+","+(c.a+f.a*t)+")":m=c+f*t;e.setAttr(s,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=Sn.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=Sn.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=Sn.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete Sn.tweens[t][s];delete Sn.attrs[t][e],Sn.tweens[t]&&(Object.keys(Sn.tweens[t]).length===0&&delete Sn.tweens[t],Object.keys(Sn.attrs[t]).length===0&&delete Sn.attrs[t])}}Sn.attrs={};Sn.tweens={};xt.prototype.to=function(n){const t=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),t&&t()},new Sn(n).play()};const k0={BackEaseIn(n,t,e,i){return e*(n/=i)*n*((1.70158+1)*n-1.70158)+t},BackEaseOut(n,t,e,i){return e*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+t},BackEaseInOut(n,t,e,i){let s=1.70158;return(n/=i/2)<1?e/2*(n*n*(((s*=1.525)+1)*n-s))+t:e/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},ElasticEaseIn(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t)},ElasticEaseOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/o)+e+t)},ElasticEaseInOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i/2)===2?t+e:(o||(o=i*(.3*1.5)),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o)*.5+e+t)},BounceEaseOut(n,t,e,i){return(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},BounceEaseIn(n,t,e,i){return e-k0.BounceEaseOut(i-n,0,e,i)+t},BounceEaseInOut(n,t,e,i){return n<i/2?k0.BounceEaseIn(n*2,0,e,i)*.5+t:k0.BounceEaseOut(n*2-i,0,e,i)*.5+e*.5+t},EaseIn(n,t,e,i){return e*(n/=i)*n+t},EaseOut(n,t,e,i){return-e*(n/=i)*(n-2)+t},EaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*(--n*(n-2)-1)+t},StrongEaseIn(n,t,e,i){return e*(n/=i)*n*n*n*n+t},StrongEaseOut(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},StrongEaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},Linear(n,t,e,i){return e*n/i+t}},np=et._assign(Vt,{Util:et,Transform:Sr,Node:xt,Container:Ar,Stage:Pv,stages:P0,Layer:bd,FastLayer:uS,Group:ep,DD:en,Shape:Ct,shapes:V0,Animation:co,Tween:Sn,Easings:k0,Context:Ov,Canvas:aS});class Zu extends Ct{_sceneFunc(t){const e=Vt.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=Vt.getAngle(i?360-this.angle():this.angle()),o=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),m=Math.sin(Math.min(s,Math.PI/2)),g=o*(o>0?t:e),E=c*e,b=f*(f>0?t:e),A=m*(m>0?e:t);return{x:g,y:i?-1*A:b,width:E-g,height:A-b}}}Zu.prototype._centroid=!0;Zu.prototype.className="Arc";Zu.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];si(Zu);B.addGetterSetter(Zu,"innerRadius",0,Ot());B.addGetterSetter(Zu,"outerRadius",0,Ot());B.addGetterSetter(Zu,"angle",0,Ot());B.addGetterSetter(Zu,"clockwise",!1,Wo());function oT(n,t,e,i,s,o,c){const f=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),m=Math.sqrt(Math.pow(s-e,2)+Math.pow(o-i,2)),g=c*f/(f+m),E=c*m/(f+m),b=e-g*(s-n),A=i-g*(o-t),N=e+E*(s-n),D=i+E*(o-t);return[b,A,N,D]}function RA(n,t){const e=n.length,i=[];for(let s=2;s<e-2;s+=2){const o=oT(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],t);isNaN(o[0])||(i.push(o[0]),i.push(o[1]),i.push(n[s]),i.push(n[s+1]),i.push(o[2]),i.push(o[3]))}return i}function UN(n){const t=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],e=[];for(const i of t){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const o=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=o*o-4*s*c;if(f>=0){const m=Math.sqrt(f);e.push((-o+m)/(2*s)),e.push((-o-m)/(2*s))}}}return e.filter(i=>i>0&&i<1).flatMap(i=>t.map(s=>{const o=1-i;return o*o*o*s[0]+3*o*o*i*s[1]+3*o*i*i*s[2]+i*i*i*s[3]}))}let $u=class extends Ct{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),i=e.length,s=this.tension(),o=this.closed(),c=this.bezier();if(!i)return;let f=0;if(t.beginPath(),t.moveTo(e[0],e[1]),s!==0&&i>4){const m=this.getTensionPoints(),g=m.length;for(f=o?0:4,o||t.quadraticCurveTo(m[0],m[1],m[2],m[3]);f<g-2;)t.bezierCurveTo(m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]);o||t.quadraticCurveTo(m[g-2],m[g-1],e[i-2],e[i-1])}else if(c)for(f=2;f<i;)t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);else for(f=2;f<i;f+=2)t.lineTo(e[f],e[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():RA(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=oT(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=oT(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),c=RA(t,i);return[s[2],s[3]].concat(c).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...UN(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);return{x:e,y:s,width:i-e,height:o-s}}};$u.prototype.className="Line";$u.prototype._attrsAffectingSize=["points","bezier","tension"];si($u);B.addGetterSetter($u,"closed",!1);B.addGetterSetter($u,"bezier",!1);B.addGetterSetter($u,"tension",0,Ot());B.addGetterSetter($u,"points",[],tN());const zN=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],BN=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],GN=[[1],[1,1],[1,2,1],[1,3,3,1]],CA=(n,t,e)=>{let i,s;const c=e/2;i=0;for(let f=0;f<20;f++)s=c*zN[20][f]+c,i+=BN[20][f]*qN(n,t,s);return c*i},IA=(n,t,e)=>{e===void 0&&(e=1);const i=n[0]-2*n[1]+n[2],s=t[0]-2*t[1]+t[2],o=2*n[1]-2*n[0],c=2*t[1]-2*t[0],f=4*(i*i+s*s),m=4*(i*o+s*c),g=o*o+c*c;if(f===0)return e*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(t[2]-t[0],2));const E=m/(2*f),b=g/f,A=e+E,N=b-E*E,D=A*A+N>0?Math.sqrt(A*A+N):0,V=E*E+N>0?Math.sqrt(E*E+N):0,U=E+Math.sqrt(E*E+N)!==0?N*Math.log(Math.abs((A+D)/(E+V))):0;return Math.sqrt(f)/2*(A*D-E*V+U)};function qN(n,t,e){const i=lT(1,e,n),s=lT(1,e,t),o=i*i+s*s;return Math.sqrt(o)}const lT=(n,t,e)=>{const i=e.length-1;let s,o;if(i===0)return 0;if(n===0){o=0;for(let c=0;c<=i;c++)o+=GN[i][c]*Math.pow(1-t,i-c)*Math.pow(t,c)*e[c];return o}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(e[c+1]-e[c]);return lT(n-1,t,s)}},NA=(n,t,e)=>{let i=1,s=n/t,o=(n-e(s))/t,c=0;for(;i>.001;){const f=e(s+o),m=Math.abs(n-f)/t;if(m<i)i=m,s+=o;else{const g=e(s-o),E=Math.abs(n-g)/t;E<i?(i=E,s-=o):o/=2}if(c++,c>500)break}return s};class bn extends Ct{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=bn.parsePathData(this.data()),this.pathLength=bn.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<e.length;s++){const o=e[s].command,c=e[s].points;switch(o){case"L":t.lineTo(c[0],c[1]);break;case"M":t.moveTo(c[0],c[1]);break;case"C":t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],m=c[1],g=c[2],E=c[3],b=c[4],A=c[5],N=c[6],D=c[7],V=g>E?g:E,U=g>E?1:g/E,H=g>E?E/g:1;t.translate(f,m),t.rotate(N),t.scale(U,H),t.arc(0,0,V,b,b+A,1-D),t.scale(1/U,1/H),t.rotate(-N),t.translate(-f,-m);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(m){if(m.command==="A"){const g=m.points[4],E=m.points[5],b=m.points[4]+E;let A=Math.PI/180;if(Math.abs(g-b)<A&&(A=Math.abs(g-b)),E<0)for(let N=g-A;N>b;N-=A){const D=bn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}else for(let N=g+A;N<b;N+=A){const D=bn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}}else if(m.command==="C")for(let g=0;g<=1;g+=.01){const E=bn.getPointOnCubicBezier(g,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);t.push(E.x,E.y)}else t=t.concat(m.points)});let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],isNaN(c)||(e=Math.min(e,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),o=Math.max(o,f));return{x:e,y:s,width:i-e,height:o-s}}getLength(){return this.pathLength}getPointAtLength(t){return bn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,o=e.length;if(!o)return null;for(;s<o&&t>e[s].pathLength;)t-=e[s].pathLength,++s;if(s===o)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return e[s].command==="M"?(i=e[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:e[s].start.x,y:e[s].start.y};const c=e[s],f=c.points;switch(c.command){case"L":return bn.getPointOnLine(t,c.start.x,c.start.y,f[0],f[1]);case"C":return bn.getPointOnCubicBezier(NA(t,bn.getPathLength(e),V=>CA([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],V)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return bn.getPointOnQuadraticBezier(NA(t,bn.getPathLength(e),V=>IA([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],V)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const m=f[0],g=f[1],E=f[2],b=f[3],A=f[5],N=f[6];let D=f[4];return D+=A*t/c.pathLength,bn.getPointOnEllipticalArc(m,g,E,b,D,N)}return null}static getPointOnLine(t,e,i,s,o,c,f){c=c??e,f=f??i;const m=this.getLineLength(e,i,s,o);if(m<1e-10)return{x:e,y:i};if(s===e)return{x:c,y:f+(o>i?t:-t)};const g=(o-i)/(s-e),E=Math.sqrt(t*t/(1+g*g))*(s<e?-1:1),b=g*E;if(Math.abs(f-i-g*(c-e))<1e-10)return{x:c+E,y:f+b};const A=((c-e)*(s-e)+(f-i)*(o-i))/(m*m),N=e+A*(s-e),D=i+A*(o-i),V=this.getLineLength(c,f,N,D),U=Math.sqrt(t*t-V*V),H=Math.sqrt(U*U/(1+g*g))*(s<e?-1:1),Y=g*H;return{x:N+H,y:D+Y}}static getPointOnCubicBezier(t,e,i,s,o,c,f,m,g){function E(U){return U*U*U}function b(U){return 3*U*U*(1-U)}function A(U){return 3*U*(1-U)*(1-U)}function N(U){return(1-U)*(1-U)*(1-U)}const D=m*E(t)+c*b(t)+s*A(t)+e*N(t),V=g*E(t)+f*b(t)+o*A(t)+i*N(t);return{x:D,y:V}}static getPointOnQuadraticBezier(t,e,i,s,o,c,f){function m(N){return N*N}function g(N){return 2*N*(1-N)}function E(N){return(1-N)*(1-N)}const b=c*m(t)+s*g(t)+e*E(t),A=f*m(t)+o*g(t)+i*E(t);return{x:b,y:A}}static getPointOnEllipticalArc(t,e,i,s,o,c){const f=Math.cos(c),m=Math.sin(c),g={x:i*Math.cos(o),y:s*Math.sin(o)};return{x:t+(g.x*f-g.y*m),y:e+(g.x*m+g.y*f)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let b=0;b<i.length;b++)e=e.replace(new RegExp(i[b],"g"),"|"+i[b]);const s=e.split("|"),o=[],c=[];let f=0,m=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let E;for(let b=1;b<s.length;b++){let A=s[b],N=A.charAt(0);for(A=A.slice(1),c.length=0;E=g.exec(A);)c.push(E[0]);let D=[],V=N==="A"||N==="a"?0:-1;for(let U=0,H=c.length;U<H;U++){const Y=c[U];if(Y==="00"){D.push(0,0),V>=0&&(V+=2,V>=7&&(V-=7));continue}if(V>=0){if(V===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(Y)){D.push(parseInt(Y[0],10)),D.push(parseInt(Y[1],10)),D.push(parseFloat(Y.slice(2))),V+=3,V>=7&&(V-=7);continue}if(Y==="11"||Y==="10"||Y==="01"){D.push(parseInt(Y[0],10)),D.push(parseInt(Y[1],10)),V+=2,V>=7&&(V-=7);continue}if(Y==="0"||Y==="1"){D.push(parseInt(Y,10)),V+=1,V>=7&&(V-=7);continue}}else if(V===4){if(/^[01]\d+(?:\.\d+)?$/.test(Y)){D.push(parseInt(Y[0],10)),D.push(parseFloat(Y.slice(1))),V+=2,V>=7&&(V-=7);continue}if(Y==="0"||Y==="1"){D.push(parseInt(Y,10)),V+=1,V>=7&&(V-=7);continue}}const X=parseFloat(Y);isNaN(X)?D.push(0):D.push(X),V+=1,V>=7&&(V-=7)}else{const X=parseFloat(Y);isNaN(X)?D.push(0):D.push(X)}}for(;D.length>0&&!isNaN(D[0]);){let U="",H=[];const Y=f,X=m;let Z,pt,lt,k,M,L,j,G,F,z;switch(N){case"l":f+=D.shift(),m+=D.shift(),U="L",H.push(f,m);break;case"L":f=D.shift(),m=D.shift(),H.push(f,m);break;case"m":const Ht=D.shift(),Lt=D.shift();if(f+=Ht,m+=Lt,U="M",o.length>2&&o[o.length-1].command==="z"){for(let W=o.length-2;W>=0;W--)if(o[W].command==="M"){f=o[W].points[0]+Ht,m=o[W].points[1]+Lt;break}}H.push(f,m),N="l";break;case"M":f=D.shift(),m=D.shift(),U="M",H.push(f,m),N="L";break;case"h":f+=D.shift(),U="L",H.push(f,m);break;case"H":f=D.shift(),U="L",H.push(f,m);break;case"v":m+=D.shift(),U="L",H.push(f,m);break;case"V":m=D.shift(),U="L",H.push(f,m);break;case"C":H.push(D.shift(),D.shift(),D.shift(),D.shift()),f=D.shift(),m=D.shift(),H.push(f,m);break;case"c":H.push(f+D.shift(),m+D.shift(),f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",H.push(f,m);break;case"S":pt=f,lt=m,Z=o[o.length-1],Z.command==="C"&&(pt=f+(f-Z.points[2]),lt=m+(m-Z.points[3])),H.push(pt,lt,D.shift(),D.shift()),f=D.shift(),m=D.shift(),U="C",H.push(f,m);break;case"s":pt=f,lt=m,Z=o[o.length-1],Z.command==="C"&&(pt=f+(f-Z.points[2]),lt=m+(m-Z.points[3])),H.push(pt,lt,f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",H.push(f,m);break;case"Q":H.push(D.shift(),D.shift()),f=D.shift(),m=D.shift(),H.push(f,m);break;case"q":H.push(f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="Q",H.push(f,m);break;case"T":pt=f,lt=m,Z=o[o.length-1],Z.command==="Q"&&(pt=f+(f-Z.points[0]),lt=m+(m-Z.points[1])),f=D.shift(),m=D.shift(),U="Q",H.push(pt,lt,f,m);break;case"t":pt=f,lt=m,Z=o[o.length-1],Z.command==="Q"&&(pt=f+(f-Z.points[0]),lt=m+(m-Z.points[1])),f+=D.shift(),m+=D.shift(),U="Q",H.push(pt,lt,f,m);break;case"A":k=D.shift(),M=D.shift(),L=D.shift(),j=D.shift(),G=D.shift(),F=f,z=m,f=D.shift(),m=D.shift(),U="A",H=this.convertEndpointToCenterParameterization(F,z,f,m,j,G,k,M,L);break;case"a":k=D.shift(),M=D.shift(),L=D.shift(),j=D.shift(),G=D.shift(),F=f,z=m,f+=D.shift(),m+=D.shift(),U="A",H=this.convertEndpointToCenterParameterization(F,z,f,m,j,G,k,M,L);break}o.push({command:U||N,points:H,start:{x:Y,y:X},pathLength:this.calcLength(Y,X,U||N,H)})}(N==="z"||N==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,i,s){let o,c,f,m;const g=bn;switch(i){case"L":return g.getLineLength(t,e,s[0],s[1]);case"C":return CA([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return IA([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":o=0;const E=s[4],b=s[5],A=s[4]+b;let N=Math.PI/180;if(Math.abs(E-A)<N&&(N=Math.abs(E-A)),c=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],E,0),b<0)for(m=E-N;m>A;m-=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(m=E+N;m<A;m+=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],A,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(t,e,i,s,o,c,f,m,g){const E=g*(Math.PI/180),b=Math.cos(E)*(t-i)/2+Math.sin(E)*(e-s)/2,A=-1*Math.sin(E)*(t-i)/2+Math.cos(E)*(e-s)/2,N=b*b/(f*f)+A*A/(m*m);N>1&&(f*=Math.sqrt(N),m*=Math.sqrt(N));let D=Math.sqrt((f*f*(m*m)-f*f*(A*A)-m*m*(b*b))/(f*f*(A*A)+m*m*(b*b)));o===c&&(D*=-1),isNaN(D)&&(D=0);const V=D*f*A/m,U=D*-m*b/f,H=(t+i)/2+Math.cos(E)*V-Math.sin(E)*U,Y=(e+s)/2+Math.sin(E)*V+Math.cos(E)*U,X=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},Z=function(j,G){return(j[0]*G[0]+j[1]*G[1])/(X(j)*X(G))},pt=function(j,G){return(j[0]*G[1]<j[1]*G[0]?-1:1)*Math.acos(Z(j,G))},lt=pt([1,0],[(b-V)/f,(A-U)/m]),k=[(b-V)/f,(A-U)/m],M=[(-1*b-V)/f,(-1*A-U)/m];let L=pt(k,M);return Z(k,M)<=-1&&(L=Math.PI),Z(k,M)>=1&&(L=0),c===0&&L>0&&(L=L-2*Math.PI),c===1&&L<0&&(L=L+2*Math.PI),[H,Y,f,m,lt,L,E,c]}}bn.prototype.className="Path";bn.prototype._attrsAffectingSize=["data"];si(bn);B.addGetterSetter(bn,"data");class Ad extends $u{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,i=this.points();let s=i;const o=this.tension()!==0&&i.length>4;o&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let m,g;if(o){const A=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],N=bn.calcLength(s[s.length-4],s[s.length-3],"C",A),D=bn.getPointOnQuadraticBezier(Math.min(1,1-c/N),A[0],A[1],A[2],A[3],A[4],A[5]);m=i[f-2]-D.x,g=i[f-1]-D.y}else m=i[f-2]-i[f-4],g=i[f-1]-i[f-3];const E=(Math.atan2(g,m)+e)%e,b=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[f-2],i[f-1]),t.rotate(E),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),o?(m=(s[0]+s[2])/2-i[0],g=(s[1]+s[3])/2-i[1]):(m=i[2]-i[0],g=i[3]-i[1]),t.rotate((Math.atan2(-g,-m)+e)%e),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}Ad.prototype.className="Arrow";si(Ad);B.addGetterSetter(Ad,"pointerLength",10,Ot());B.addGetterSetter(Ad,"pointerWidth",10,Ot());B.addGetterSetter(Ad,"pointerAtBeginning",!1);B.addGetterSetter(Ad,"pointerAtEnding",!0);let Cp=class extends Ct{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Cp.prototype._centroid=!0;Cp.prototype.className="Circle";Cp.prototype._attrsAffectingSize=["radius"];si(Cp);B.addGetterSetter(Cp,"radius",0,Ot());class Lh extends Ct{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Lh.prototype.className="Ellipse";Lh.prototype._centroid=!0;Lh.prototype._attrsAffectingSize=["radiusX","radiusY"];si(Lh);B.addComponentsGetterSetter(Lh,"radius",["x","y"]);B.addGetterSetter(Lh,"radiusX",0,Ot());B.addGetterSetter(Lh,"radiusY",0,Ot());let Zo=class nw extends Ct{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),o=this.attrs.image;let c;if(o){const f=this.attrs.cropWidth,m=this.attrs.cropHeight;f&&m?c=[o,this.cropX(),this.cropY(),f,m,0,0,e,i]:c=[o,0,0,e,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),o&&(s&&t.clip(),t.drawImage.apply(t,c))}_hitFunc(t){const e=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return(i=(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:0}getHeight(){var t,e,i;return(i=(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}static fromURL(t,e,i=null){const s=et.createImageElement();s.onload=function(){const o=new nw({image:s});e(o)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}};Zo.prototype.className="Image";Zo.prototype._attrsAffectingSize=["image"];si(Zo);B.addGetterSetter(Zo,"cornerRadius",0,Mv(4));B.addGetterSetter(Zo,"image");B.addComponentsGetterSetter(Zo,"crop",["x","y","width","height"]);B.addGetterSetter(Zo,"cropX",0,Ot());B.addGetterSetter(Zo,"cropY",0,Ot());B.addGetterSetter(Zo,"cropWidth",0,Ot());B.addGetterSetter(Zo,"cropHeight",0,Ot());const iw=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],HN="Change.konva",jN="none",uT="up",cT="right",hT="down",fT="left",FN=iw.length;class cS extends ep{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i;const s=function(){e._sync()};for(i=0;i<FN;i++)t.on(iw[i]+HN,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,s,o,c,f,m,g;if(t&&e){switch(i=t.width(),s=t.height(),o=e.pointerDirection(),c=e.pointerWidth(),g=e.pointerHeight(),f=0,m=0,o){case uT:f=i/2,m=-1*g;break;case cT:f=i+c,m=s/2;break;case hT:f=i/2,m=s+g;break;case fT:f=-1*c,m=s/2;break}e.setAttrs({x:-1*f,y:-1*m,width:i,height:s}),t.setAttrs({x:-1*f,y:-1*m})}}}cS.prototype.className="Label";si(cS);class wd extends Ct{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),o=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let m=0,g=0,E=0,b=0;typeof f=="number"?m=g=E=b=Math.min(f,e/2,i/2):(m=Math.min(f[0]||0,e/2,i/2),g=Math.min(f[1]||0,e/2,i/2),b=Math.min(f[2]||0,e/2,i/2),E=Math.min(f[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(m,0),s===uT&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+o)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),s===cT&&(t.lineTo(e,(i-c)/2),t.lineTo(e+o,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i-b),t.arc(e-b,i-b,b,0,Math.PI/2,!1),s===hT&&(t.lineTo((e+o)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-o)/2,i)),t.lineTo(E,i),t.arc(E,i-E,E,Math.PI/2,Math.PI,!1),s===fT&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-c)/2)),t.lineTo(0,m),t.arc(m,m,m,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),o=this.pointerDirection(),c=this.width(),f=this.height();return o===uT?(e-=s,f+=s):o===hT?f+=s:o===fT?(t-=i*1.5,c+=i):o===cT&&(c+=i*1.5),{x:t,y:e,width:c,height:f}}}wd.prototype.className="Tag";si(wd);B.addGetterSetter(wd,"pointerDirection",jN);B.addGetterSetter(wd,"pointerWidth",0,Ot());B.addGetterSetter(wd,"pointerHeight",0,Ot());B.addGetterSetter(wd,"cornerRadius",0,Mv(4));let b_=class extends Ct{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?et.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}};b_.prototype.className="Rect";si(b_);B.addGetterSetter(b_,"cornerRadius",0,Mv(4));class Uh extends Ct{_sceneFunc(t){const e=this._getPoints(),i=this.radius(),s=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)et.drawRoundedPolygonPath(t,e,s,i,o);else{t.moveTo(e[0].x,e[0].y);for(let c=1;c<e.length;c++)t.lineTo(e[c].x,e[c].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(s*2*Math.PI/t),y:-1*e*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].x,s=t[0].y,o=t[0].y;return t.forEach(c=>{e=Math.min(e,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),o=Math.max(o,c.y)}),{x:e,y:s,width:i-e,height:o-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Uh.prototype.className="RegularPolygon";Uh.prototype._centroid=!0;Uh.prototype._attrsAffectingSize=["radius"];si(Uh);B.addGetterSetter(Uh,"radius",0,Ot());B.addGetterSetter(Uh,"sides",0,Ot());B.addGetterSetter(Uh,"cornerRadius",0,Mv(4));const DA=Math.PI*2;class Rd extends Ct{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,DA,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),DA,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Rd.prototype.className="Ring";Rd.prototype._centroid=!0;Rd.prototype._attrsAffectingSize=["innerRadius","outerRadius"];si(Rd);B.addGetterSetter(Rd,"innerRadius",0,Ot());B.addGetterSetter(Rd,"outerRadius",0,Ot());class $l extends Ct{constructor(t){super(t),this._updated=!0,this.anim=new co(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+0],m=o[s+1],g=o[s+2],E=o[s+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,E),t.closePath(),t.fillStrokeShape(this)),b)if(c){const A=c[e],N=i*2;t.drawImage(b,f,m,g,E,A[N+0],A[N+1],g,E)}else t.drawImage(b,f,m,g,E,0,0,g,E)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+2],m=o[s+3];if(t.beginPath(),c){const g=c[e],E=i*2;t.rect(g[E+0],g[E+1],f,m)}else t.rect(0,0,f,m);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],o=s.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}$l.prototype.className="Sprite";si($l);B.addGetterSetter($l,"animation");B.addGetterSetter($l,"animations");B.addGetterSetter($l,"frameOffsets");B.addGetterSetter($l,"image");B.addGetterSetter($l,"frameIndex",0,Ot());B.addGetterSetter($l,"frameRate",17,Ot());B.backCompat($l,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class zh extends Ct{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let o=1;o<s*2;o++){const c=o%2===0?i:e,f=c*Math.sin(o*Math.PI/s),m=-1*c*Math.cos(o*Math.PI/s);t.lineTo(f,m)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}zh.prototype.className="Star";zh.prototype._centroid=!0;zh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];si(zh);B.addGetterSetter(zh,"numPoints",5,Ot());B.addGetterSetter(zh,"innerRadius",0,Ot());B.addGetterSetter(zh,"outerRadius",0,Ot());function gh(n){return[...n].reduce((t,e,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const o=s[i+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(e+o),s[i+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const Nm="auto",KN="center",sw="inherit",o0="justify",YN="Change.konva",QN="2d",xA="-",aw="left",XN="text",JN="Text",WN="top",ZN="bottom",OA="middle",rw="normal",$N="px ",E1=" ",tD="right",MA="rtl",eD="word",nD="char",PA="none",_E="",ow=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],iD=ow.length;function sD(n){return n.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}let T1;function yE(){return T1||(T1=et.createCanvasElement().getContext(QN),T1)}function aD(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function rD(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function oD(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let Rn=class extends Ct{constructor(t){super(oD(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<iD;e++)this.on(ow[e]+YN,this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;const s=this.textArr,o=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),m=this.lineHeight()*f,g=this.verticalAlign(),E=this.direction(),b=0,A=this.align(),N=this.getWidth(),D=this.letterSpacing(),V=this.charRenderFunc(),U=this.fill(),H=this.textDecoration(),Y=this.underlineOffset(),X=H.indexOf("underline")!==-1,Z=H.indexOf("line-through")!==-1,pt;E=E===sw?t.direction:E;let lt=m/2,k=OA;if(!Vt.legacyTextRendering){const M=this.measureSize("M");k="alphabetic";const L=(e=M.fontBoundingBoxAscent)!==null&&e!==void 0?e:M.actualBoundingBoxAscent,j=(i=M.fontBoundingBoxDescent)!==null&&i!==void 0?i:M.actualBoundingBoxDescent;lt=(L-j)/2+m/2}for(E===MA&&t.setAttr("direction",E),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",k),t.setAttr("textAlign",aw),g===OA?b=(this.getHeight()-o*m-c*2)/2:g===ZN&&(b=this.getHeight()-o*m-c*2),t.translate(c,b+c),pt=0;pt<o;pt++){let M=0,L=0;const j=s[pt],G=j.text,F=j.width,z=j.lastInParagraph;if(t.save(),A===tD?M+=N-F-c*2:A===KN&&(M+=(N-F-c*2)/2),X){t.save(),t.beginPath();const Lt=Y??(Vt.legacyTextRendering?Math.round(f/2):Math.round(f/4)),W=M,Et=lt+L+Lt;t.moveTo(W,Et);const vt=A===o0&&!z?N-c*2:F;t.lineTo(W+Math.round(vt),Et),t.lineWidth=f/15;const Ut=this._getLinearGradient();t.strokeStyle=Ut||U,t.stroke(),t.restore()}const Ht=M;if(E!==MA&&(D!==0||A===o0||V)){const Lt=G.split(" ").length-1,W=gh(G);for(let Et=0;Et<W.length;Et++){const vt=W[Et];if(vt===" "&&!z&&A===o0&&(M+=(N-c*2-F)/Lt),this._partialTextX=M,this._partialTextY=lt+L,this._partialText=vt,V){t.save();const Kt=s.slice(0,pt).reduce((dt,Nt)=>dt+gh(Nt.text).length,0),q=Et+Kt;V({char:vt,index:q,x:M,y:lt+L,lineIndex:pt,column:Et,isLastInLine:z,width:this.measureSize(vt).width,context:t})}t.fillStrokeShape(this),V&&t.restore(),M+=this.measureSize(vt).width+D}}else D!==0&&t.setAttr("letterSpacing",`${D}px`),this._partialTextX=M,this._partialTextY=lt+L,this._partialText=G,t.fillStrokeShape(this);if(Z){t.save(),t.beginPath();const Lt=Vt.legacyTextRendering?0:-Math.round(f/4),W=Ht;t.moveTo(W,lt+L+Lt);const Et=A===o0&&!z?N-c*2:F;t.lineTo(W+Math.round(Et),lt+L+Lt),t.lineWidth=f/15;const vt=this._getLinearGradient();t.strokeStyle=vt||U,t.stroke(),t.restore()}t.restore(),o>1&&(lt+=m)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=et._isString(t)?t:t==null?"":t+"";return this._setAttr(XN,e),this}getWidth(){return this.attrs.width===Nm||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Nm||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,o,c,f,m,g,E,b,A;let N=yE(),D=this.fontSize(),V;N.save(),N.font=this._getContextFont(),V=N.measureText(t),N.restore();const U=D/100;return{actualBoundingBoxAscent:(e=V.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*U,actualBoundingBoxDescent:(i=V.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=V.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*U,actualBoundingBoxRight:(o=V.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*U,alphabeticBaseline:(c=V.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=V.emHeightAscent)!==null&&f!==void 0?f:100*U,emHeightDescent:(m=V.emHeightDescent)!==null&&m!==void 0?m:-20*U,fontBoundingBoxAscent:(g=V.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*U,fontBoundingBoxDescent:(E=V.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*U,hangingBaseline:(b=V.hangingBaseline)!==null&&b!==void 0?b:72.80000305175781*U,ideographicBaseline:(A=V.ideographicBaseline)!==null&&A!==void 0?A:-21*U,width:V.width,height:D}}_getContextFont(){return this.fontStyle()+E1+this.fontVariant()+E1+(this.fontSize()+$N)+sD(this.fontFamily())}_addTextLine(t){this.align()===o0&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return yE().measureText(t).width+e*i}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),i=0,s=this.lineHeight()*e,o=this.attrs.width,c=this.attrs.height,f=o!==Nm&&o!==void 0,m=c!==Nm&&c!==void 0,g=this.padding(),E=o-g*2,b=c-g*2,A=0,N=this.wrap(),D=N!==PA,V=N!==nD&&D,U=this.ellipsis();this.textArr=[],yE().font=this._getContextFont();const H=U?this._getTextWidth(_E):0;for(let Y=0,X=t.length;Y<X;++Y){let Z=t[Y],pt=this._getTextWidth(Z);if(f&&pt>E)for(;Z.length>0;){let lt=0,k=gh(Z).length,M="",L=0;for(;lt<k;){const j=lt+k>>>1,G=gh(Z),F=G.slice(0,j+1).join(""),z=this._getTextWidth(F);(U&&m&&A+s>b?z+H:z)<=E?(lt=j+1,M=F,L=z):k=j}if(M){if(V){const F=gh(Z),z=gh(M),Ht=F[z.length],Lt=Ht===E1||Ht===xA;let W;if(Lt&&L<=E)W=z.length;else{const Et=z.lastIndexOf(E1),vt=z.lastIndexOf(xA);W=Math.max(Et,vt)+1}W>0&&(lt=W,M=F.slice(0,lt).join(""),L=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,L),A+=s,this._shouldHandleEllipsis(A)){this._tryToAddEllipsisToLastLine();break}if(Z=gh(Z).slice(lt).join("").trimLeft(),Z.length>0&&(pt=this._getTextWidth(Z),pt<=E)){this._addTextLine(Z),A+=s,i=Math.max(i,pt);break}}else break}else this._addTextLine(Z),A+=s,i=Math.max(i,pt),this._shouldHandleEllipsis(A)&&Y<X-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),m&&A+s>b)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,o=s!==Nm&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==PA)||o&&t+i>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==Nm&&t!==void 0,i=this.padding(),s=t-i*2,o=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!o||(e&&(this._getTextWidth(c.text+_E)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+_E))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};Rn.prototype._fillFunc=aD;Rn.prototype._strokeFunc=rD;Rn.prototype.className=JN;Rn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];si(Rn);B.overWriteSetter(Rn,"width",oS());B.overWriteSetter(Rn,"height",oS());B.addGetterSetter(Rn,"direction",sw);B.addGetterSetter(Rn,"fontFamily","Arial");B.addGetterSetter(Rn,"fontSize",12,Ot());B.addGetterSetter(Rn,"fontStyle",rw);B.addGetterSetter(Rn,"fontVariant",rw);B.addGetterSetter(Rn,"padding",0,Ot());B.addGetterSetter(Rn,"align",aw);B.addGetterSetter(Rn,"verticalAlign",WN);B.addGetterSetter(Rn,"lineHeight",1,Ot());B.addGetterSetter(Rn,"wrap",eD);B.addGetterSetter(Rn,"ellipsis",!1,Wo());B.addGetterSetter(Rn,"letterSpacing",0,Ot());B.addGetterSetter(Rn,"text","",Sd());B.addGetterSetter(Rn,"textDecoration","");B.addGetterSetter(Rn,"underlineOffset",void 0,Ot());B.addGetterSetter(Rn,"charRenderFunc",void 0);const lD="",lw="normal";function uw(n){n.fillText(this.partialText,0,0)}function cw(n){n.strokeText(this.partialText,0,0)}class Xi extends Ct{constructor(t){super(t),this.dummyCanvas=et.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return bn.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t>e?null:bn.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=bn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),o=this.glyphInfo,c=e.indexOf("underline")!==-1,f=e.indexOf("line-through")!==-1;c&&t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),this.partialText=o[m].text,t.fillStrokeShape(this),c&&(m===0&&t.moveTo(0,s/2+1),t.lineTo(o[m].width,s/2+1)),t.restore()}if(c&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),f){t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),m===0&&t.moveTo(0,0),t.lineTo(o[m].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Rn.prototype.setText.call(this,t)}_getContextFont(){return Rn.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=gh(this.text()),e=[];let i=0;for(let b=0;b<t.length;b++)e.push({char:t[b],width:this._getTextSize(t[b]).width}),i+=e[b].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-m/2)),c==="right"&&(g=Math.max(0,this.pathLength-m));let E=g;for(let b=0;b<e.length;b++){const A=this._getPointAtLength(E);if(!A)return;const N=e[b].char;let D=e[b].width+o;if(N===" "&&c==="justify"){const Z=this.text().split(" ").length-1;D+=(this.pathLength-m)/Z}const V=this._getPointAtLength(E+D);if(!V)return;const U=bn.getLineLength(A.x,A.y,V.x,V.y);let H=0;if(f)try{H=f(e[b-1].char,N)*this.fontSize()}catch{H=0}A.x+=H,V.x+=H,this.textWidth+=H;const Y=bn.getPointOnLine(H+U/2,A.x,A.y,V.x,V.y),X=Math.atan2(V.y-A.y,V.x-A.x);this.glyphInfo.push({transposeX:Y.x,transposeY:Y.y,text:t[b],rotation:X,p0:A,p1:V,width:U}),E+=D}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,i=t[0]||0,s=t[1]||0,o=t[1]||0,c,f;for(let g=0;g<t.length/2;g++)c=t[g*2],f=t[g*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);const m=this.fontSize();return{x:e-m/2,y:s-m/2,width:i-e+m,height:o-s+m}}destroy(){return et.releaseCanvas(this.dummyCanvas),super.destroy()}}Xi.prototype._fillFunc=uw;Xi.prototype._strokeFunc=cw;Xi.prototype._fillFuncHit=uw;Xi.prototype._strokeFuncHit=cw;Xi.prototype.className="TextPath";Xi.prototype._attrsAffectingSize=["text","fontSize","data"];si(Xi);B.addGetterSetter(Xi,"data");B.addGetterSetter(Xi,"fontFamily","Arial");B.addGetterSetter(Xi,"fontSize",12,Ot());B.addGetterSetter(Xi,"fontStyle",lw);B.addGetterSetter(Xi,"align","left");B.addGetterSetter(Xi,"letterSpacing",0,Ot());B.addGetterSetter(Xi,"textBaseline","middle");B.addGetterSetter(Xi,"fontVariant",lw);B.addGetterSetter(Xi,"text",lD);B.addGetterSetter(Xi,"textDecoration","");B.addGetterSetter(Xi,"kerningFunc",void 0);const hw="tr-konva",uD=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${hw}`).join(" "),VA="nodesRect",cD=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],hD={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},fD="ontouchstart"in Vt._global;function dD(n,t,e){if(n==="rotater")return e;t+=et.degToRad(hD[n]||0);const i=(et.radToDeg(t)%360+360)%360;return et._inRange(i,315+22.5,360)||et._inRange(i,0,22.5)?"ns-resize":et._inRange(i,45-22.5,45+22.5)?"nesw-resize":et._inRange(i,90-22.5,90+22.5)?"ew-resize":et._inRange(i,135-22.5,135+22.5)?"nwse-resize":et._inRange(i,180-22.5,180+22.5)?"ns-resize":et._inRange(i,225-22.5,225+22.5)?"nesw-resize":et._inRange(i,270-22.5,270+22.5)?"ew-resize":et._inRange(i,315-22.5,315+22.5)?"nwse-resize":(et.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const W1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function mD(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function fw(n,t,e){const i=e.x+(n.x-e.x)*Math.cos(t)-(n.y-e.y)*Math.sin(t),s=e.y+(n.x-e.x)*Math.sin(t)+(n.y-e.y)*Math.cos(t);return{...n,rotation:n.rotation+t,x:i,y:s}}function pD(n,t){const e=mD(n);return fw(n,t,e)}function gD(n,t,e){let i=t;for(let s=0;s<n.length;s++){const o=Vt.getAngle(n[s]),c=Math.abs(o-t)%(Math.PI*2);Math.min(c,Math.PI*2-c)<e&&(i=o)}return i}let dT=0;class ze extends ep{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(uD,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return et.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return hw+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(s=>s.isAncestorOf(this)?(et.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,o)}s.on(cD.map(c=>c+`.${this._getEventNamespace()}`).join(" "),o),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;const s=t.getAbsolutePosition(),o=s.x-e.x,c=s.y-e.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const m=f.getAbsolutePosition();f.setAbsolutePosition({x:m.x+o,y:m.y+c}),f.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(VA),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(VA,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(i),c=t.getAbsolutePosition(i),f=s.x*o.x-t.offsetX()*o.x,m=s.y*o.y-t.offsetY()*o.y,g=(Vt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),E={x:c.x+f*Math.cos(g)+m*Math.sin(-g),y:c.y+m*Math.cos(g)+f*Math.sin(g),width:s.width*o.x,height:s.height*o.y,rotation:g};return fw(E,-Vt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const E=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=[{x:E.x,y:E.y},{x:E.x+E.width,y:E.y},{x:E.x+E.width,y:E.y+E.height},{x:E.x,y:E.y+E.height}],A=g.getAbsoluteTransform();b.forEach(function(N){const D=A.point(N);e.push(D)})});const i=new Sr;i.rotate(-Vt.getAngle(this.rotation()));let s=1/0,o=1/0,c=-1/0,f=-1/0;e.forEach(function(g){const E=i.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),i.invert();const m=i.point({x:s,y:o});return{x:m.x,y:m.y,width:c-s,height:f-o,rotation:Vt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),W1.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new b_({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:fD?10:"auto"}),i=this;e.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),e.on("dragstart",s=>{e.stopDrag(),s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),e.on("mouseenter",()=>{const s=Vt.getAngle(this.rotation()),o=this.rotateAnchorCursor(),c=dD(t,s,o);e.getStage().content&&(e.getStage().content.style.cursor=c),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new Ct({name:"back",width:0,height:0,sceneFunc(e,i){const s=i.getParent(),o=s.padding(),c=i.width(),f=i.height();if(e.beginPath(),e.rect(-o,-o,c+o*2,f+o*2),s.rotateEnabled()&&s.rotateLineVisible()){const m=s.rotateAnchorAngle(),g=s.rotateAnchorOffset(),E=et.degToRad(m),b=Math.sin(E),A=-Math.cos(E),N=c/2,D=f/2;let V=1/0;A<0?V=Math.min(V,-D/A):A>0&&(V=Math.min(V,(f-D)/A)),b<0?V=Math.min(V,-N/b):b>0&&(V=Math.min(V,(c-N)/b));const U=N+b*V,H=D+A*V,Y=et._sign(f),X=U+b*g*Y,Z=H+A*g*Y;e.moveTo(U,H),e.lineTo(X,Z)}e.fillStrokeShape(i)},hitFunc:(e,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();e.beginPath(),e.rect(-s,-s,i.width()+s*2,i.height()+s*2),e.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/o),this.cos=Math.abs(i/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},dT++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(m=>{m._fire("transformstart",{evt:t.evt,target:m})})}_handleMouseMove(t){let e,i,s;const o=this.findOne("."+this._movingAnchorName),c=o.getStage();c.setPointersPositions(t);const f=c.getPointerPosition();let m={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(m=this.anchorDragBoundFunc()(g,m,t)),o.setAbsolutePosition(m);const E=o.getAbsolutePosition();if(g.x===E.x&&g.y===E.y)return;if(this._movingAnchorName==="rotater"){const Y=this._getNodeRect();e=o.x()-Y.width/2,i=-o.y()+Y.height/2;const X=Vt.getAngle(this.rotateAnchorAngle());let Z=Math.atan2(-i,e)+Math.PI/2-X;Y.height<0&&(Z-=Math.PI);const lt=Vt.getAngle(this.rotation())+Z,k=Vt.getAngle(this.rotationSnapTolerance()),L=gD(this.rotationSnaps(),lt,k)-Y.rotation,j=pD(Y,L);this._fitNodesInto(j,t);return}const b=this.shiftBehavior();let A;b==="inverted"?A=this.keepRatio()&&!t.shiftKey:b==="none"?A=this.keepRatio():A=this.keepRatio()||t.shiftKey;let N=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(A){const Y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(Y.x-o.x(),2)+Math.pow(Y.y-o.y(),2));const X=this.findOne(".top-left").x()>Y.x?-1:1,Z=this.findOne(".top-left").y()>Y.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".top-left").x(Y.x-e),this.findOne(".top-left").y(Y.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(A){const Y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(o.x()-Y.x,2)+Math.pow(Y.y-o.y(),2));const X=this.findOne(".top-right").x()<Y.x?-1:1,Z=this.findOne(".top-right").y()>Y.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".top-right").x(Y.x+e),this.findOne(".top-right").y(Y.y-i)}var D=o.position();this.findOne(".top-left").y(D.y),this.findOne(".bottom-right").x(D.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(A){const Y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(Y.x-o.x(),2)+Math.pow(o.y()-Y.y,2));const X=Y.x<o.x()?-1:1,Z=o.y()<Y.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,o.x(Y.x-e),o.y(Y.y+i)}D=o.position(),this.findOne(".top-left").x(D.x),this.findOne(".bottom-right").y(D.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(A){const Y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(o.x()-Y.x,2)+Math.pow(o.y()-Y.y,2));const X=this.findOne(".bottom-right").x()<Y.x?-1:1,Z=this.findOne(".bottom-right").y()<Y.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".bottom-right").x(Y.x+e),this.findOne(".bottom-right").y(Y.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(N=this.centeredScaling()||t.altKey,N){const Y=this.findOne(".top-left"),X=this.findOne(".bottom-right"),Z=Y.x(),pt=Y.y(),lt=this.getWidth()-X.x(),k=this.getHeight()-X.y();X.move({x:-Z,y:-pt}),Y.move({x:lt,y:k})}const V=this.findOne(".top-left").getAbsolutePosition();e=V.x,i=V.y;const U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),H=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:U,height:H,rotation:Vt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();dT--,this._fire("transformend",{evt:t,target:i}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),i&&this._nodes.forEach(s=>{var o;s._fire("transformend",{evt:t,target:s}),(o=s.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),s=1;if(et._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(et._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const o=new Sr;if(o.rotate(Vt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const A=o.point({x:-this.padding()*2,y:0});t.x+=A.x,t.y+=A.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const A=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const A=o.point({x:0,y:-this.padding()*2});t.x+=A.x,t.y+=A.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const A=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const A=this.boundBoxFunc()(i,t);A?t=A:et.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new Sr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const m=new Sr,g=t.width/c,E=t.height/c;this.flipEnabled()===!1?(m.translate(t.x,t.y),m.rotate(t.rotation),m.translate(t.width<0?t.width:0,t.height<0?t.height:0),m.scale(Math.abs(g),Math.abs(E))):(m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(g,E));const b=m.multiply(f.invert());this._nodes.forEach(A=>{var N;if(!A.getStage())return;const D=A.getParent().getAbsoluteTransform(),V=A.getTransform().copy();V.translate(A.offsetX(),A.offsetY());const U=new Sr;U.multiply(D.copy().invert()).multiply(b).multiply(D).multiply(V);const H=U.decompose();A.setAttrs(H),(N=A.getLayer())===null||N===void 0||N.batchDraw()}),this.rotation(et._getRotation(t.rotation)),this._nodes.forEach(A=>{this._fire("transform",{evt:e,target:A}),A._fire("transform",{evt:e,target:A})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(et._getRotation(e.rotation));const i=e.width,s=e.height,o=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),m=this.anchorSize(),g=this.find("._anchor");g.forEach(lt=>{lt.setAttrs({width:m,height:m,offsetX:m/2,offsetY:m/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:m/2+f,offsetY:m/2+f,visible:c&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:m/2+f,visible:c&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:m/2-f,offsetY:m/2+f,visible:c&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:m/2+f,visible:c&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:m/2-f,visible:c&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:m/2+f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:m/2-f,visible:c&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:m/2-f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-right")>=0});const E=this.rotateAnchorAngle(),b=this.rotateAnchorOffset(),A=et.degToRad(E),N=Math.sin(A),D=-Math.cos(A),V=i/2,U=s/2;let H=1/0;D<0?H=Math.min(H,-U/D):D>0&&(H=Math.min(H,(s-U)/D)),N<0?H=Math.min(H,-V/N):N>0&&(H=Math.min(H,(i-V)/N));const Y=V+N*H,X=U+D*H,Z=et._sign(s);this._batchChangeChild(".rotater",{x:Y+N*b*Z,y:X+D*b*Z-f*D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(lt=>lt.draggable()),x:0,y:0});const pt=this.anchorStyleFunc();pt&&g.forEach(lt=>{pt(lt)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ep.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return xt.prototype.toObject.call(this)}clone(t){return xt.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ze.isTransforming=()=>dT>0;function _D(n){return n instanceof Array||et.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(t){W1.indexOf(t)===-1&&et.warn("Unknown anchor name: "+t+". Available names are: "+W1.join(", "))}),n||[]}ze.prototype.className="Transformer";si(ze);B.addGetterSetter(ze,"enabledAnchors",W1,_D);B.addGetterSetter(ze,"flipEnabled",!0,Wo());B.addGetterSetter(ze,"resizeEnabled",!0);B.addGetterSetter(ze,"anchorSize",10,Ot());B.addGetterSetter(ze,"rotateEnabled",!0);B.addGetterSetter(ze,"rotateLineVisible",!0);B.addGetterSetter(ze,"rotationSnaps",[]);B.addGetterSetter(ze,"rotateAnchorOffset",50,Ot());B.addGetterSetter(ze,"rotateAnchorAngle",0,Ot());B.addGetterSetter(ze,"rotateAnchorCursor","crosshair");B.addGetterSetter(ze,"rotationSnapTolerance",5,Ot());B.addGetterSetter(ze,"borderEnabled",!0);B.addGetterSetter(ze,"anchorStroke","rgb(0, 161, 255)");B.addGetterSetter(ze,"anchorStrokeWidth",1,Ot());B.addGetterSetter(ze,"anchorFill","white");B.addGetterSetter(ze,"anchorCornerRadius",0,Ot());B.addGetterSetter(ze,"borderStroke","rgb(0, 161, 255)");B.addGetterSetter(ze,"borderStrokeWidth",1,Ot());B.addGetterSetter(ze,"borderDash");B.addGetterSetter(ze,"keepRatio",!0);B.addGetterSetter(ze,"shiftBehavior","default");B.addGetterSetter(ze,"centeredScaling",!1);B.addGetterSetter(ze,"ignoreStroke",!1);B.addGetterSetter(ze,"padding",0,Ot());B.addGetterSetter(ze,"nodes");B.addGetterSetter(ze,"node");B.addGetterSetter(ze,"boundBoxFunc");B.addGetterSetter(ze,"anchorDragBoundFunc");B.addGetterSetter(ze,"anchorStyleFunc");B.addGetterSetter(ze,"shouldOverdrawWholeArea",!1);B.addGetterSetter(ze,"useSingleNodeRotation",!0);B.backCompat(ze,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class tc extends Ct{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Vt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}tc.prototype.className="Wedge";tc.prototype._centroid=!0;tc.prototype._attrsAffectingSize=["radius"];si(tc);B.addGetterSetter(tc,"radius",0,Ot());B.addGetterSetter(tc,"angle",0,Ot());B.addGetterSetter(tc,"clockwise",!1);B.backCompat(tc,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function kA(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const yD=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],vD=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function ED(n,t){const e=n.data,i=n.width,s=n.height;let o,c,f,m,g,E,b,A,N,D,V,U,H,Y,X,Z,pt,lt,k,M;const L=t+t+1,j=i-1,G=s-1,F=t+1,z=F*(F+1)/2,Ht=new kA,Lt=yD[t],W=vD[t];let Et=null,vt=Ht,Ut=null,Kt=null;for(let q=1;q<L;q++)vt=vt.next=new kA,q===F&&(Et=vt);vt.next=Ht,f=c=0;for(let q=0;q<s;q++){U=H=Y=X=m=g=E=b=0,A=F*(Z=e[c]),N=F*(pt=e[c+1]),D=F*(lt=e[c+2]),V=F*(k=e[c+3]),m+=z*Z,g+=z*pt,E+=z*lt,b+=z*k,vt=Ht;for(let dt=0;dt<F;dt++)vt.r=Z,vt.g=pt,vt.b=lt,vt.a=k,vt=vt.next;for(let dt=1;dt<F;dt++)o=c+((j<dt?j:dt)<<2),m+=(vt.r=Z=e[o])*(M=F-dt),g+=(vt.g=pt=e[o+1])*M,E+=(vt.b=lt=e[o+2])*M,b+=(vt.a=k=e[o+3])*M,U+=Z,H+=pt,Y+=lt,X+=k,vt=vt.next;Ut=Ht,Kt=Et;for(let dt=0;dt<i;dt++)e[c+3]=k=b*Lt>>W,k!==0?(k=255/k,e[c]=(m*Lt>>W)*k,e[c+1]=(g*Lt>>W)*k,e[c+2]=(E*Lt>>W)*k):e[c]=e[c+1]=e[c+2]=0,m-=A,g-=N,E-=D,b-=V,A-=Ut.r,N-=Ut.g,D-=Ut.b,V-=Ut.a,o=f+((o=dt+t+1)<j?o:j)<<2,U+=Ut.r=e[o],H+=Ut.g=e[o+1],Y+=Ut.b=e[o+2],X+=Ut.a=e[o+3],m+=U,g+=H,E+=Y,b+=X,Ut=Ut.next,A+=Z=Kt.r,N+=pt=Kt.g,D+=lt=Kt.b,V+=k=Kt.a,U-=Z,H-=pt,Y-=lt,X-=k,Kt=Kt.next,c+=4;f+=i}for(let q=0;q<i;q++){H=Y=X=U=g=E=b=m=0,c=q<<2,A=F*(Z=e[c]),N=F*(pt=e[c+1]),D=F*(lt=e[c+2]),V=F*(k=e[c+3]),m+=z*Z,g+=z*pt,E+=z*lt,b+=z*k,vt=Ht;for(let Nt=0;Nt<F;Nt++)vt.r=Z,vt.g=pt,vt.b=lt,vt.a=k,vt=vt.next;let dt=i;for(let Nt=1;Nt<=t;Nt++)c=dt+q<<2,m+=(vt.r=Z=e[c])*(M=F-Nt),g+=(vt.g=pt=e[c+1])*M,E+=(vt.b=lt=e[c+2])*M,b+=(vt.a=k=e[c+3])*M,U+=Z,H+=pt,Y+=lt,X+=k,vt=vt.next,Nt<G&&(dt+=i);c=q,Ut=Ht,Kt=Et;for(let Nt=0;Nt<s;Nt++)o=c<<2,e[o+3]=k=b*Lt>>W,k>0?(k=255/k,e[o]=(m*Lt>>W)*k,e[o+1]=(g*Lt>>W)*k,e[o+2]=(E*Lt>>W)*k):e[o]=e[o+1]=e[o+2]=0,m-=A,g-=N,E-=D,b-=V,A-=Ut.r,N-=Ut.g,D-=Ut.b,V-=Ut.a,o=q+((o=Nt+F)<G?o:G)*i<<2,m+=U+=Ut.r=e[o],g+=H+=Ut.g=e[o+1],E+=Y+=Ut.b=e[o+2],b+=X+=Ut.a=e[o+3],Ut=Ut.next,A+=Z=Kt.r,N+=pt=Kt.g,D+=lt=Kt.b,V+=k=Kt.a,U-=Z,H-=pt,Y-=lt,X-=k,Kt=Kt.next,c+=i}}const TD=function(t){const e=Math.round(this.blurRadius());e>0&&ED(t,e)};B.addGetterSetter(xt,"blurRadius",0,Ot(),B.afterSetFilter);const SD=function(n){const t=this.brightness()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]+=t,e[s+1]+=t,e[s+2]+=t};B.addGetterSetter(xt,"brightness",0,Ot(),B.afterSetFilter);const bD=function(n){const t=this.brightness(),e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=Math.min(255,e[s]*t),e[s+1]=Math.min(255,e[s+1]*t),e[s+2]=Math.min(255,e[s+2]*t)},AD=function(n){const t=Math.pow((this.contrast()+100)/100,2),e=n.data,i=e.length;let s=150,o=150,c=150;for(let f=0;f<i;f+=4)s=e[f],o=e[f+1],c=e[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,c/=255,c-=.5,c*=t,c+=.5,c*=255,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,c=c<0?0:c>255?255:c,e[f]=s,e[f+1]=o,e[f+2]=c};B.addGetterSetter(xt,"contrast",0,Ot(),B.afterSetFilter);const wD=function(n){var t,e,i,s,o,c,f,m,g;const E=n.data,b=n.width,A=n.height,N=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),D=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),U=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,H=!!((g=(m=this.embossBlend)===null||m===void 0?void 0:m.call(this))!==null&&g!==void 0&&g),Y=N*10,X=D*255,Z=U*Math.PI/180,pt=Math.cos(Z),lt=Math.sin(Z),k=128/1020*Y,M=new Uint8ClampedArray(E),L=new Float32Array(b*A);for(let Ht=0,Lt=0;Lt<E.length;Lt+=4,Ht++)L[Ht]=.2126*M[Lt]+.7152*M[Lt+1]+.0722*M[Lt+2];const j=[-1,0,1,-2,0,2,-1,0,1],G=[-1,-2,-1,0,0,0,1,2,1],F=[-b-1,-b,-b+1,-1,0,1,b-1,b,b+1],z=Ht=>Ht<0?0:Ht>255?255:Ht;for(let Ht=1;Ht<A-1;Ht++)for(let Lt=1;Lt<b-1;Lt++){const W=Ht*b+Lt;let Et=0,vt=0;Et+=L[W+F[0]]*j[0],vt+=L[W+F[0]]*G[0],Et+=L[W+F[1]]*j[1],vt+=L[W+F[1]]*G[1],Et+=L[W+F[2]]*j[2],vt+=L[W+F[2]]*G[2],Et+=L[W+F[3]]*j[3],vt+=L[W+F[3]]*G[3],Et+=L[W+F[5]]*j[5],vt+=L[W+F[5]]*G[5],Et+=L[W+F[6]]*j[6],vt+=L[W+F[6]]*G[6],Et+=L[W+F[7]]*j[7],vt+=L[W+F[7]]*G[7],Et+=L[W+F[8]]*j[8],vt+=L[W+F[8]]*G[8];const Ut=pt*Et+lt*vt,Kt=z(X+Ut*k),q=W*4;if(H){const dt=Kt-X;E[q]=z(M[q]+dt),E[q+1]=z(M[q+1]+dt),E[q+2]=z(M[q+2]+dt),E[q+3]=M[q+3]}else E[q]=E[q+1]=E[q+2]=Kt,E[q+3]=M[q+3]}for(let Ht=0;Ht<b;Ht++){let Lt=Ht*4,W=((A-1)*b+Ht)*4;E[Lt]=M[Lt],E[Lt+1]=M[Lt+1],E[Lt+2]=M[Lt+2],E[Lt+3]=M[Lt+3],E[W]=M[W],E[W+1]=M[W+1],E[W+2]=M[W+2],E[W+3]=M[W+3]}for(let Ht=1;Ht<A-1;Ht++){let Lt=Ht*b*4,W=(Ht*b+(b-1))*4;E[Lt]=M[Lt],E[Lt+1]=M[Lt+1],E[Lt+2]=M[Lt+2],E[Lt+3]=M[Lt+3],E[W]=M[W],E[W+1]=M[W+1],E[W+2]=M[W+2],E[W+3]=M[W+3]}return n};B.addGetterSetter(xt,"embossStrength",.5,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"embossWhiteLevel",.5,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"embossDirection","top-left",void 0,B.afterSetFilter);B.addGetterSetter(xt,"embossBlend",!1,void 0,B.afterSetFilter);function vE(n,t,e,i,s){const o=e-t,c=s-i;if(o===0)return i+c/2;if(c===0)return i;let f=(n-t)/o;return f=c*f+i,f}const RD=function(n){const t=n.data,e=t.length;let i=t[0],s=i,o,c=t[1],f=c,m,g=t[2],E=g,b;const A=this.enhance();if(A===0)return;for(let X=0;X<e;X+=4)o=t[X+0],o<i?i=o:o>s&&(s=o),m=t[X+1],m<c?c=m:m>f&&(f=m),b=t[X+2],b<g?g=b:b>E&&(E=b);s===i&&(s=255,i=0),f===c&&(f=255,c=0),E===g&&(E=255,g=0);let N,D,V,U,H,Y;if(A>0)N=s+A*(255-s),D=i-A*(i-0),V=f+A*(255-f),U=c-A*(c-0),H=E+A*(255-E),Y=g-A*(g-0);else{const X=(s+i)*.5;N=s+A*(s-X),D=i+A*(i-X);const Z=(f+c)*.5;V=f+A*(f-Z),U=c+A*(c-Z);const pt=(E+g)*.5;H=E+A*(E-pt),Y=g+A*(g-pt)}for(let X=0;X<e;X+=4)t[X+0]=vE(t[X+0],i,s,D,N),t[X+1]=vE(t[X+1],c,f,U,V),t[X+2]=vE(t[X+2],g,E,Y,H)};B.addGetterSetter(xt,"enhance",0,Ot(),B.afterSetFilter);const CD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};B.addGetterSetter(xt,"hue",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"saturation",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"luminance",0,Ot(),B.afterSetFilter);const ID=function(n){const t=n.data,e=t.length,i=1,s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(o*Math.PI/180),m=i*s*Math.sin(o*Math.PI/180),g=.299*i+.701*f+.167*m,E=.587*i-.587*f+.33*m,b=.114*i-.114*f-.497*m,A=.299*i-.299*f-.328*m,N=.587*i+.413*f+.035*m,D=.114*i-.114*f+.293*m,V=.299*i-.3*f+1.25*m,U=.587*i-.586*f-1.05*m,H=.114*i+.886*f-.2*m;let Y,X,Z,pt;for(let lt=0;lt<e;lt+=4)Y=t[lt+0],X=t[lt+1],Z=t[lt+2],pt=t[lt+3],t[lt+0]=g*Y+E*X+b*Z+c,t[lt+1]=A*Y+N*X+D*Z+c,t[lt+2]=V*Y+U*X+H*Z+c,t[lt+3]=pt},ND=function(n){const t=n.data,e=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(o*Math.PI/180),f=i*s*Math.sin(o*Math.PI/180),m=.299*i+.701*c+.167*f,g=.587*i-.587*c+.33*f,E=.114*i-.114*c-.497*f,b=.299*i-.299*c-.328*f,A=.587*i+.413*c+.035*f,N=.114*i-.114*c+.293*f,D=.299*i-.3*c+1.25*f,V=.587*i-.586*c-1.05*f,U=.114*i+.886*c-.2*f;for(let H=0;H<e;H+=4){const Y=t[H+0],X=t[H+1],Z=t[H+2],pt=t[H+3];t[H+0]=m*Y+g*X+E*Z,t[H+1]=b*Y+A*X+N*Z,t[H+2]=D*Y+V*X+U*Z,t[H+3]=pt}};B.addGetterSetter(xt,"hue",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"saturation",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"value",0,Ot(),B.afterSetFilter);const DD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},xD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,V=360/D*Math.PI/180;for(let U=0;U<D;U+=1){const H=Math.sin(U*V),Y=Math.cos(U*V);for(let X=0;X<N;X+=1){E=Math.floor(f+g*X/N*Y),b=Math.floor(m+g*X/N*H);let Z=(b*o+E)*4;const pt=i[Z+0],lt=i[Z+1],k=i[Z+2],M=i[Z+3];Z=(U+X*o)*4,s[Z+0]=pt,s[Z+1]=lt,s[Z+2]=k,s[Z+3]=M}}},OD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,V=0;let U,H;for(E=0;E<o;E+=1)for(b=0;b<c;b+=1){const Y=E-f,X=b-m,Z=Math.sqrt(Y*Y+X*X)*N/g;let pt=(Math.atan2(X,Y)*180/Math.PI+360+V)%360;pt=pt*D/360,U=Math.floor(pt),H=Math.floor(Z);let lt=(H*o+U)*4;const k=i[lt+0],M=i[lt+1],L=i[lt+2],j=i[lt+3];lt=(b*o+E)*4,s[lt+0]=k,s[lt+1]=M,s[lt+2]=L,s[lt+3]=j}},MD=function(n){const t=n.width,e=n.height;let i,s,o,c,f,m,g,E,b,A,N=Math.round(this.kaleidoscopePower());const D=Math.round(this.kaleidoscopeAngle()),V=Math.floor(t*(D%360)/360);if(N<1)return;const U=et.createCanvasElement();U.width=t,U.height=e;const H=U.getContext("2d").getImageData(0,0,t,e);et.releaseCanvas(U),xD(n,H,{polarCenterX:t/2,polarCenterY:e/2});let Y=t/Math.pow(2,N);for(;Y<=8;)Y=Y*2,N-=1;Y=Math.ceil(Y);let X=Y,Z=0,pt=X,lt=1;for(V+Y>t&&(Z=X,pt=0,lt=-1),s=0;s<e;s+=1)for(i=Z;i!==pt;i+=lt)o=Math.round(i+V)%t,b=(t*s+o)*4,f=H.data[b+0],m=H.data[b+1],g=H.data[b+2],E=H.data[b+3],A=(t*s+i)*4,H.data[A+0]=f,H.data[A+1]=m,H.data[A+2]=g,H.data[A+3]=E;for(s=0;s<e;s+=1)for(X=Math.floor(Y),c=0;c<N;c+=1){for(i=0;i<X+1;i+=1)b=(t*s+i)*4,f=H.data[b+0],m=H.data[b+1],g=H.data[b+2],E=H.data[b+3],A=(t*s+X*2-i-1)*4,H.data[A+0]=f,H.data[A+1]=m,H.data[A+2]=g,H.data[A+3]=E;X*=2}OD(H,n,{})};B.addGetterSetter(xt,"kaleidoscopePower",2,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"kaleidoscopeAngle",0,Ot(),B.afterSetFilter);function S1(n,t,e){let i=(e*n.width+t)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function l0(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2))}function PD(n){const t=[0,0,0];for(let e=0;e<n.length;e++)t[0]+=n[e][0],t[1]+=n[e][1],t[2]+=n[e][2];return t[0]/=n.length,t[1]/=n.length,t[2]/=n.length,t}function VD(n,t){const e=S1(n,0,0),i=S1(n,n.width-1,0),s=S1(n,0,n.height-1),o=S1(n,n.width-1,n.height-1),c=t||10;if(l0(e,i)<c&&l0(i,o)<c&&l0(o,s)<c&&l0(s,e)<c){const f=PD([i,e,o,s]),m=[];for(let g=0;g<n.width*n.height;g++){const E=l0(f,[n.data[g*4],n.data[g*4+1],n.data[g*4+2]]);m[g]=E<c?0:255}return m}}function kD(n,t){for(let e=0;e<n.width*n.height;e++)n.data[4*e+3]=t[e]}function LD(n,t,e){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const V=N*t+D,U=i[b*s+A];E+=n[V]*U}}c[g]=E===2040?255:0}return c}function UD(n,t,e){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const V=N*t+D,U=i[b*s+A];E+=n[V]*U}}c[g]=E>=1020?255:0}return c}function zD(n,t,e){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const V=N*t+D,U=i[b*s+A];E+=n[V]*U}}c[g]=E}return c}const BD=function(n){const t=this.threshold();let e=VD(n,t);return e&&(e=LD(e,n.width,n.height),e=UD(e,n.width,n.height),e=zD(e,n.width,n.height),kD(n,e)),n};B.addGetterSetter(xt,"threshold",0,Ot(),B.afterSetFilter);const GD=function(n){const t=this.noise()*255,e=n.data,i=e.length,s=t/2;for(let o=0;o<i;o+=4)e[o+0]+=s-2*s*Math.random(),e[o+1]+=s-2*s*Math.random(),e[o+2]+=s-2*s*Math.random()};B.addGetterSetter(xt,"noise",.2,Ot(),B.afterSetFilter);const qD=function(n){let t=Math.ceil(this.pixelSize()),e=n.width,i=n.height,s=Math.ceil(e/t),o=Math.ceil(i/t),c=n.data;if(t<=0){et.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let m=0;m<o;m+=1){let g=0,E=0,b=0,A=0;const N=f*t,D=N+t,V=m*t,U=V+t;let H=0;for(let Y=N;Y<D;Y+=1)if(!(Y>=e))for(let X=V;X<U;X+=1){if(X>=i)continue;const Z=(e*X+Y)*4;g+=c[Z+0],E+=c[Z+1],b+=c[Z+2],A+=c[Z+3],H+=1}g=g/H,E=E/H,b=b/H,A=A/H;for(let Y=N;Y<D;Y+=1)if(!(Y>=e))for(let X=V;X<U;X+=1){if(X>=i)continue;const Z=(e*X+Y)*4;c[Z+0]=g,c[Z+1]=E,c[Z+2]=b,c[Z+3]=A}}};B.addGetterSetter(xt,"pixelSize",8,Ot(),B.afterSetFilter);const HD=function(n){const t=Math.round(this.levels()*254)+1,e=n.data,i=e.length,s=255/t;for(let o=0;o<i;o+=1)e[o]=Math.floor(e[o]/s)*s};B.addGetterSetter(xt,"levels",.5,Ot(),B.afterSetFilter);const jD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue();for(let c=0;c<e;c+=4){const f=(.34*t[c]+.5*t[c+1]+.16*t[c+2])/255;t[c]=f*i,t[c+1]=f*s,t[c+2]=f*o,t[c+3]=t[c+3]}};B.addGetterSetter(xt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"blue",0,V6,B.afterSetFilter);const FD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue(),c=this.alpha();for(let f=0;f<e;f+=4){const m=1-c;t[f]=i*c+t[f]*m,t[f+1]=s*c+t[f+1]*m,t[f+2]=o*c+t[f+2]*m}};B.addGetterSetter(xt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"blue",0,V6,B.afterSetFilter);B.addGetterSetter(xt,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const KD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=t[i+0],o=t[i+1],c=t[i+2];t[i+0]=Math.min(255,s*.393+o*.769+c*.189),t[i+1]=Math.min(255,s*.349+o*.686+c*.168),t[i+2]=Math.min(255,s*.272+o*.534+c*.131)}},YD=function(n){const e=n.data;for(let i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],c=e[i+2];.2126*s+.7152*o+.0722*c>=128&&(e[i]=255-s,e[i+1]=255-o,e[i+2]=255-c)}return n},QD=function(n){const t=this.threshold()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=1)e[s]=e[s]<t?0:255};B.addGetterSetter(xt,"threshold",.5,Ot(),B.afterSetFilter);np.Util._assign(np,{Arc:Zu,Arrow:Ad,Circle:Cp,Ellipse:Lh,Image:Zo,Label:cS,Tag:wd,Line:$u,Path:bn,Rect:b_,RegularPolygon:Uh,Ring:Rd,Sprite:$l,Star:zh,Text:Rn,TextPath:Xi,Transformer:ze,Wedge:tc,Filters:{Blur:TD,Brightness:bD,Brighten:SD,Contrast:AD,Emboss:wD,Enhance:RD,Grayscale:CD,HSL:ID,HSV:ND,Invert:DD,Kaleidoscope:MD,Mask:BD,Noise:GD,Pixelate:qD,Posterize:HD,RGB:jD,RGBA:FD,Sepia:KD,Solarize:YD,Threshold:QD}});var EE={exports:{}},TE={exports:{}};var LA;function XD(){return LA||(LA=1,(function(n){n.exports=function(t){function e(l,u,p,y){return new eg(l,u,p,y)}function i(){}function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function c(l){if(o(l)!==l)throw Error(s(188))}function f(l){var u=l.alternate;if(!u){if(u=o(l),u===null)throw Error(s(188));return u!==l?null:l}for(var p=l,y=u;;){var S=p.return;if(S===null)break;var w=S.alternate;if(w===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===w.child){for(w=S.child;w;){if(w===p)return c(S),l;if(w===y)return c(S),u;w=w.sibling}throw Error(s(188))}if(p.return!==y.return)p=S,y=w;else{for(var x=!1,Q=S.child;Q;){if(Q===p){x=!0,p=S,y=w;break}if(Q===y){x=!0,y=S,p=w;break}Q=Q.sibling}if(!x){for(Q=w.child;Q;){if(Q===p){x=!0,p=w,y=S;break}if(Q===y){x=!0,y=w,p=S;break}Q=Q.sibling}if(!x)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}function g(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=g(l),u!==null))return u;l=l.sibling}return null}function E(l){return l===null||typeof l!="object"?null:(l=Po&&l[Po]||l["@@iterator"],typeof l=="function"?l:null)}function b(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Tl?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case vu:return"Fragment";case Tu:return"Profiler";case Eu:return"StrictMode";case Jd:return"Suspense";case Mo:return"SuspenseList";case _f:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case yu:return"Portal";case ka:return l.displayName||"Context";case gf:return(l._context.displayName||"Context")+".Consumer";case Gc:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Wd:return u=l.displayName||null,u!==null?u:b(l.type)||"Memo";case ds:u=l._payload,l=l._init;try{return b(l(u))}catch{}}return null}function A(l){return{current:l}}function N(l){0>Ru||(l.current=cm[Ru],cm[Ru]=null,Ru--)}function D(l,u){Ru++,cm[Ru]=l.current,l.current=u}function V(l){return l>>>=0,l===0?32:31-(hm(l)/Ky|0)|0}function U(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function H(l,u,p){var y=l.pendingLanes;if(y===0)return 0;var S=0,w=l.suspendedLanes,x=l.pingedLanes;l=l.warmLanes;var Q=y&134217727;return Q!==0?(y=Q&~w,y!==0?S=U(y):(x&=Q,x!==0?S=U(x):p||(p=Q&~l,p!==0&&(S=U(p))))):(Q=y&~w,Q!==0?S=U(Q):x!==0?S=U(x):p||(p=y&~l,p!==0&&(S=U(p)))),S===0?0:u!==0&&u!==S&&(u&w)===0&&(w=S&-S,p=u&-u,w>=p||w===32&&(p&4194048)!==0)?u:S}function Y(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function X(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var l=Qc;return Qc<<=1,(Qc&62914560)===0&&(Qc=4194304),l}function pt(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function lt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function k(l,u,p,y,S,w){var x=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Q=l.entanglements,ft=l.expirationTimes,bt=l.hiddenUpdates;for(p=x&~p;0<p;){var Mt=31-Ls(p),Rt=1<<Mt;Q[Mt]=0,ft[Mt]=-1;var Bt=bt[Mt];if(Bt!==null)for(bt[Mt]=null,Mt=0;Mt<Bt.length;Mt++){var ue=Bt[Mt];ue!==null&&(ue.lane&=-536870913)}p&=~Rt}y!==0&&M(l,y,0),w!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=w&~(x&~u))}function M(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-Ls(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function L(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-Ls(p),S=1<<y;S&u|l[y]&u&&(l[y]|=u),p&=~S}}function j(l,u){var p=u&-u;return p=(p&42)!==0?1:G(p),(p&(l.suspendedLanes|u))!==0?0:p}function G(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function F(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function z(l){if(typeof Bg=="function"&&Xy(l),Us&&typeof Us.setStrictMode=="function")try{Us.setStrictMode(Iu,l)}catch{}}function Ht(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function Lt(l){if(_m===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);_m=u&&u[1]||"",to=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_m+l+to}function W(l,u){if(!l||Rf)return"";Rf=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(ue){var Bt=ue}Reflect.construct(l,[],Rt)}else{try{Rt.call()}catch(ue){Bt=ue}l.call(Rt.prototype)}}else{try{throw Error()}catch(ue){Bt=ue}(Rt=l())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(ue){if(ue&&Bt&&typeof ue.stack=="string")return[ue.stack,Bt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),x=w[0],Q=w[1];if(x&&Q){var ft=x.split(`
`),bt=Q.split(`
`);for(S=y=0;y<ft.length&&!ft[y].includes("DetermineComponentFrameRoot");)y++;for(;S<bt.length&&!bt[S].includes("DetermineComponentFrameRoot");)S++;if(y===ft.length||S===bt.length)for(y=ft.length-1,S=bt.length-1;1<=y&&0<=S&&ft[y]!==bt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(ft[y]!==bt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||ft[y]!==bt[S]){var Mt=`
`+ft[y].replace(" at new "," at ");return l.displayName&&Mt.includes("<anonymous>")&&(Mt=Mt.replace("<anonymous>",l.displayName)),Mt}while(1<=y&&0<=S);break}}}finally{Rf=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Lt(p):""}function Et(l,u){switch(l.tag){case 26:case 27:case 5:return Lt(l.type);case 16:return Lt("Lazy");case 13:return l.child!==u&&u!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return W(l.type,!1);case 11:return W(l.type.render,!1);case 1:return W(l.type,!0);case 31:return Lt("Activity");default:return""}}function vt(l){try{var u="",p=null;do u+=Et(l,p),p=l,l=l.return;while(l);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Ut(l,u){if(typeof l=="object"&&l!==null){var p=Gg.get(l);return p!==void 0?p:(u={value:l,source:u,stack:vt(u)},Gg.set(l,u),u)}return{value:l,source:u,stack:vt(u)}}function Kt(l,u){Lo[eo++]=Cf,Lo[eo++]=sn,sn=l,Cf=u}function q(l,u,p){za[ra++]=qi,za[ra++]=gr,za[ra++]=Ba,Ba=l;var y=qi;l=gr;var S=32-Ls(y)-1;y&=~(1<<S),p+=1;var w=32-Ls(u)+S;if(30<w){var x=S-S%5;w=(y&(1<<x)-1).toString(32),y>>=x,S-=x,qi=1<<32-Ls(u)+S|p<<S|y,gr=w+l}else qi=1<<w|p<<S|y,gr=l}function dt(l){l.return!==null&&(Kt(l,1),q(l,1,0))}function Nt(l){for(;l===sn;)sn=Lo[--eo],Lo[eo]=null,Cf=Lo[--eo],Lo[eo]=null;for(;l===Ba;)Ba=za[--ra],za[ra]=null,gr=za[--ra],za[ra]=null,qi=za[--ra],za[ra]=null}function Gt(l,u){za[ra++]=qi,za[ra++]=gr,za[ra++]=Ba,qi=u.id,gr=u.overflow,Ba=l}function ee(l,u){D(Hi,u),D(Uo,l),D(Ni,null),l=ly(u),N(Ni),D(Ni,l)}function ie(){N(Ni),N(Uo),N(Hi)}function Te(l){l.memoizedState!==null&&D(If,l);var u=Ni.current,p=jc(u,l.type);u!==p&&(D(Uo,l),D(Ni,p))}function mn(l){Uo.current===l&&(N(Ni),N(Uo)),If.current===l&&(N(If),Wn?Au._currentValue=bu:Au._currentValue2=bu)}function Ne(l){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tr(Ut(u,l)),ym}function $a(l,u){if(!vn)throw Error(s(175));Py(l.stateNode,l.type,l.memoizedProps,u,l)||Ne(l,!0)}function yo(l){for(gi=l.return;gi;)switch(gi.tag){case 5:case 31:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:gi=gi.return}}function Qs(l){if(!vn||l!==gi)return!1;if(!we)return yo(l),we=!0,!1;var u=l.tag;if(pi?u!==3&&u!==27&&(u!==5||Yc(l.type)&&!ms(l.type,l.memoizedProps))&&En&&Ne(l):u!==3&&(u!==5||Yc(l.type)&&!ms(l.type,l.memoizedProps))&&En&&Ne(l),yo(l),u===13){if(!vn)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));En=Ng(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));En=ky(l)}else En=pi&&u===27?Ry(l.type,En):gi?wy(l.stateNode):null;return!0}function ws(){vn&&(En=gi=null,we=!1)}function Rs(){var l=no;return l!==null&&(Bs===null?Bs=l:Bs.push.apply(Bs,l),no=null),l}function tr(l){no===null?no=[l]:no.push(l)}function Wi(l,u,p){Wn?(D(Ga,u._currentValue),u._currentValue=p):(D(Ga,u._currentValue2),u._currentValue2=p)}function Zi(l){var u=Ga.current;Wn?l._currentValue=u:l._currentValue2=u,N(Ga)}function er(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function Ke(l,u,p,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var w=S.dependencies;if(w!==null){var x=S.child;w=w.firstContext;t:for(;w!==null;){var Q=w;w=S;for(var ft=0;ft<u.length;ft++)if(Q.context===u[ft]){w.lanes|=p,Q=w.alternate,Q!==null&&(Q.lanes|=p),er(w.return,p,l),y||(x=null);break t}w=Q.next}}else if(S.tag===18){if(x=S.return,x===null)throw Error(s(341));x.lanes|=p,w=x.alternate,w!==null&&(w.lanes|=p),er(x,p,l),x=null}else x=S.child;if(x!==null)x.return=S;else for(x=S;x!==null;){if(x===l){x=null;break}if(S=x.sibling,S!==null){S.return=x.return,x=S;break}x=x.return}S=x}}function He(l,u,p,y){l=null;for(var S=u,w=!1;S!==null;){if(!w){if((S.flags&524288)!==0)w=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var x=S.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var Q=S.type;$n(S.pendingProps.value,x.value)||(l!==null?l.push(Q):l=[Q])}}else if(S===If.current){if(x=S.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Au):l=[Au])}S=S.return}l!==null&&Ke(u,l,p,y),u.flags|=262144}function $i(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!$n(Wn?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function Cs(l){hn=l,_r=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function je(l){return Qt(hn,l)}function St(l,u){return hn===null&&Cs(l),Qt(l,u)}function Qt(l,u){var p=Wn?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},_r===null){if(l===null)throw Error(s(308));_r=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else _r=_r.next=u;return p}function pe(){return{controller:new Jy,data:new Map,refCount:0}}function Ve(l){l.refCount--,l.refCount===0&&Di(L2,function(){l.controller.abort()})}function Ui(){}function va(l){l!==Ze&&l.next===null&&(Ze===null?Nf=Ze=l:Ze=Ze.next=l),qa=!0,is||(is=!0,Qn())}function vo(l,u){if(!vm&&qa){vm=!0;do for(var p=!1,y=Nf;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var w=0;else{var x=y.suspendedLanes,Q=y.pingedLanes;w=(1<<31-Ls(42|l)+1)-1,w&=S&~(x&~Q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,Xs(y,w))}else w=Re,w=H(y,y===ye?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==ks),(w&3)===0||Y(y,w)||(p=!0,Xs(y,w));y=y.next}while(p);vm=!1}}function Qh(){Xh()}function Xh(){qa=is=!1;var l=0;Rl!==0&&Su()&&(l=Rl);for(var u=ns(),p=null,y=Nf;y!==null;){var S=y.next,w=Ea(y,u);w===0?(y.next=null,p===null?Nf=S:p.next=S,S===null&&(Ze=p)):(p=y,(l!==0||(w&3)!==0)&&(qa=!0)),y=S}ci!==0&&ci!==5||vo(l),Rl!==0&&(Rl=0)}function Ea(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var x=31-Ls(w),Q=1<<x,ft=S[x];ft===-1?((Q&p)===0||(Q&y)!==0)&&(S[x]=X(Q,u)):ft<=u&&(l.expiredLanes|=Q),w&=~Q}if(u=ye,p=Re,p=H(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==ks),y=l.callbackNode,p===0||l===u&&(tn===2||tn===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&dm(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Y(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&dm(y),F(p)){case 2:case 8:p=Qy;break;case 32:p=wf;break;case 268435456:p=pm;break;default:p=wf}return y=Si.bind(null,l),p=Af(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&dm(y),l.callbackPriority=2,l.callbackNode=null,2}function Si(l,u){if(ci!==0&&ci!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Wr()&&l.callbackNode!==p)return null;var y=Re;return y=H(l,l===ye?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==ks),y===0?null:(pr(l,y,u),Ea(l,ns()),l.callbackNode!=null&&l.callbackNode===p?Si.bind(null,l):null)}function Xs(l,u){if(Wr())return null;pr(l,u,!0)}function Qn(){dg?mg(function(){(Se&6)!==0?Af(mm,Qh):Xh()}):Af(mm,Qh)}function uc(){if(Rl===0){var l=zo;l===0&&(l=fm,fm<<=1,(fm&261888)===0&&(fm=256)),Rl=l}return Rl}function cc(l,u){if(Xc===null){var p=Xc=[];qg=0,zo=uc(),_i={status:"pending",value:void 0,then:function(y){p.push(y)}}}return qg++,u.then(Jh,Jh),u}function Jh(){if(--qg===0&&Xc!==null){_i!==null&&(_i.status="fulfilled");var l=Xc;Xc=null,zo=0,_i=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Cr(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}function Eo(){var l=Cl.current;return l!==null?l:ye.pooledCache}function In(l,u){u===null?D(Cl,Cl.current):D(Cl,u.pool)}function nr(){var l=Eo();return l===null?null:{parent:Wn?Tn._currentValue:Tn._currentValue2,pool:l}}function Js(l,u){if($n(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!k2.call(u,S)||!$n(l[S],u[S]))return!1}return!0}function Ta(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Od(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(Ui,Ui),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$o(l),l;default:if(typeof u.status=="string")u.then(Ui,Ui);else{if(l=ye,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$o(l),l}throw gs=u,yi}}function Ir(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(gs=p,yi):p}}function ir(){if(gs===null)throw Error(s(459));var l=gs;return gs=null,l}function $o(l){if(l===yi||l===ja)throw Error(s(483))}function hc(l){var u=Nu;return Nu+=1,Il===null&&(Il=[]),Od(Il,l,u)}function sr(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function tl(l,u){throw u.$$typeof===_u?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function fc(l){function u(rt,nt){if(l){var ct=rt.deletions;ct===null?(rt.deletions=[nt],rt.flags|=16):ct.push(nt)}}function p(rt,nt){if(!l)return null;for(;nt!==null;)u(rt,nt),nt=nt.sibling;return null}function y(rt){for(var nt=new Map;rt!==null;)rt.key!==null?nt.set(rt.key,rt):nt.set(rt.index,rt),rt=rt.sibling;return nt}function S(rt,nt){return rt=sa(rt,nt),rt.index=0,rt.sibling=null,rt}function w(rt,nt,ct){return rt.index=ct,l?(ct=rt.alternate,ct!==null?(ct=ct.index,ct<nt?(rt.flags|=67108866,nt):ct):(rt.flags|=67108866,nt)):(rt.flags|=1048576,nt)}function x(rt){return l&&rt.alternate===null&&(rt.flags|=67108866),rt}function Q(rt,nt,ct,Dt){return nt===null||nt.tag!==6?(nt=ng(ct,rt.mode,Dt),nt.return=rt,nt):(nt=S(nt,ct),nt.return=rt,nt)}function ft(rt,nt,ct,Dt){var te=ct.type;return te===vu?Mt(rt,nt,ct.props.children,Dt,ct.key):nt!==null&&(nt.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===ds&&Ir(te)===nt.type)?(nt=S(nt,ct.props),sr(nt,ct),nt.return=rt,nt):(nt=Oo(ct.type,ct.key,ct.props,null,rt.mode,Dt),sr(nt,ct),nt.return=rt,nt)}function bt(rt,nt,ct,Dt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==ct.containerInfo||nt.stateNode.implementation!==ct.implementation?(nt=sg(ct,rt.mode,Dt),nt.return=rt,nt):(nt=S(nt,ct.children||[]),nt.return=rt,nt)}function Mt(rt,nt,ct,Dt,te){return nt===null||nt.tag!==7?(nt=Va(ct,rt.mode,Dt,te),nt.return=rt,nt):(nt=S(nt,ct),nt.return=rt,nt)}function Rt(rt,nt,ct){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=ng(""+nt,rt.mode,ct),nt.return=rt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case Zr:return ct=Oo(nt.type,nt.key,nt.props,null,rt.mode,ct),sr(ct,nt),ct.return=rt,ct;case yu:return nt=sg(nt,rt.mode,ct),nt.return=rt,nt;case ds:return nt=Ir(nt),Rt(rt,nt,ct)}if(Sl(nt)||E(nt))return nt=Va(nt,rt.mode,ct,null),nt.return=rt,nt;if(typeof nt.then=="function")return Rt(rt,hc(nt),ct);if(nt.$$typeof===ka)return Rt(rt,St(rt,nt),ct);tl(rt,nt)}return null}function Bt(rt,nt,ct,Dt){var te=nt!==null?nt.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return te!==null?null:Q(rt,nt,""+ct,Dt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case Zr:return ct.key===te?ft(rt,nt,ct,Dt):null;case yu:return ct.key===te?bt(rt,nt,ct,Dt):null;case ds:return ct=Ir(ct),Bt(rt,nt,ct,Dt)}if(Sl(ct)||E(ct))return te!==null?null:Mt(rt,nt,ct,Dt,null);if(typeof ct.then=="function")return Bt(rt,nt,hc(ct),Dt);if(ct.$$typeof===ka)return Bt(rt,nt,St(rt,ct),Dt);tl(rt,ct)}return null}function ue(rt,nt,ct,Dt,te){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return rt=rt.get(ct)||null,Q(nt,rt,""+Dt,te);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case Zr:return rt=rt.get(Dt.key===null?ct:Dt.key)||null,ft(nt,rt,Dt,te);case yu:return rt=rt.get(Dt.key===null?ct:Dt.key)||null,bt(nt,rt,Dt,te);case ds:return Dt=Ir(Dt),ue(rt,nt,ct,Dt,te)}if(Sl(Dt)||E(Dt))return rt=rt.get(ct)||null,Mt(nt,rt,Dt,te,null);if(typeof Dt.then=="function")return ue(rt,nt,ct,hc(Dt),te);if(Dt.$$typeof===ka)return ue(rt,nt,ct,St(nt,Dt),te);tl(nt,Dt)}return null}function xi(rt,nt,ct,Dt){for(var te=null,kn=null,ne=nt,ke=nt=0,Oi=null;ne!==null&&ke<ct.length;ke++){ne.index>ke?(Oi=ne,ne=null):Oi=ne.sibling;var Ge=Bt(rt,ne,ct[ke],Dt);if(Ge===null){ne===null&&(ne=Oi);break}l&&ne&&Ge.alternate===null&&u(rt,ne),nt=w(Ge,nt,ke),kn===null?te=Ge:kn.sibling=Ge,kn=Ge,ne=Oi}if(ke===ct.length)return p(rt,ne),we&&Kt(rt,ke),te;if(ne===null){for(;ke<ct.length;ke++)ne=Rt(rt,ct[ke],Dt),ne!==null&&(nt=w(ne,nt,ke),kn===null?te=ne:kn.sibling=ne,kn=ne);return we&&Kt(rt,ke),te}for(ne=y(ne);ke<ct.length;ke++)Oi=ue(ne,rt,ke,ct[ke],Dt),Oi!==null&&(l&&Oi.alternate!==null&&ne.delete(Oi.key===null?ke:Oi.key),nt=w(Oi,nt,ke),kn===null?te=Oi:kn.sibling=Oi,kn=Oi);return l&&ne.forEach(function(Ya){return u(rt,Ya)}),we&&Kt(rt,ke),te}function ih(rt,nt,ct,Dt){if(ct==null)throw Error(s(151));for(var te=null,kn=null,ne=nt,ke=nt=0,Oi=null,Ge=ct.next();ne!==null&&!Ge.done;ke++,Ge=ct.next()){ne.index>ke?(Oi=ne,ne=null):Oi=ne.sibling;var Ya=Bt(rt,ne,Ge.value,Dt);if(Ya===null){ne===null&&(ne=Oi);break}l&&ne&&Ya.alternate===null&&u(rt,ne),nt=w(Ya,nt,ke),kn===null?te=Ya:kn.sibling=Ya,kn=Ya,ne=Oi}if(Ge.done)return p(rt,ne),we&&Kt(rt,ke),te;if(ne===null){for(;!Ge.done;ke++,Ge=ct.next())Ge=Rt(rt,Ge.value,Dt),Ge!==null&&(nt=w(Ge,nt,ke),kn===null?te=Ge:kn.sibling=Ge,kn=Ge);return we&&Kt(rt,ke),te}for(ne=y(ne);!Ge.done;ke++,Ge=ct.next())Ge=ue(ne,rt,ke,Ge.value,Dt),Ge!==null&&(l&&Ge.alternate!==null&&ne.delete(Ge.key===null?ke:Ge.key),nt=w(Ge,nt,ke),kn===null?te=Ge:kn.sibling=Ge,kn=Ge);return l&&ne.forEach(function(U2){return u(rt,U2)}),we&&Kt(rt,ke),te}function kl(rt,nt,ct,Dt){if(typeof ct=="object"&&ct!==null&&ct.type===vu&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case Zr:t:{for(var te=ct.key;nt!==null;){if(nt.key===te){if(te=ct.type,te===vu){if(nt.tag===7){p(rt,nt.sibling),Dt=S(nt,ct.props.children),Dt.return=rt,rt=Dt;break t}}else if(nt.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===ds&&Ir(te)===nt.type){p(rt,nt.sibling),Dt=S(nt,ct.props),sr(Dt,ct),Dt.return=rt,rt=Dt;break t}p(rt,nt);break}else u(rt,nt);nt=nt.sibling}ct.type===vu?(Dt=Va(ct.props.children,rt.mode,Dt,ct.key),Dt.return=rt,rt=Dt):(Dt=Oo(ct.type,ct.key,ct.props,null,rt.mode,Dt),sr(Dt,ct),Dt.return=rt,rt=Dt)}return x(rt);case yu:t:{for(te=ct.key;nt!==null;){if(nt.key===te)if(nt.tag===4&&nt.stateNode.containerInfo===ct.containerInfo&&nt.stateNode.implementation===ct.implementation){p(rt,nt.sibling),Dt=S(nt,ct.children||[]),Dt.return=rt,rt=Dt;break t}else{p(rt,nt);break}else u(rt,nt);nt=nt.sibling}Dt=sg(ct,rt.mode,Dt),Dt.return=rt,rt=Dt}return x(rt);case ds:return ct=Ir(ct),kl(rt,nt,ct,Dt)}if(Sl(ct))return xi(rt,nt,ct,Dt);if(E(ct)){if(te=E(ct),typeof te!="function")throw Error(s(150));return ct=te.call(ct),ih(rt,nt,ct,Dt)}if(typeof ct.then=="function")return kl(rt,nt,hc(ct),Dt);if(ct.$$typeof===ka)return kl(rt,nt,St(rt,ct),Dt);tl(rt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,nt!==null&&nt.tag===6?(p(rt,nt.sibling),Dt=S(nt,ct),Dt.return=rt,rt=Dt):(p(rt,nt),Dt=ng(ct,rt.mode,Dt),Dt.return=rt,rt=Dt),x(rt)):p(rt,nt)}return function(rt,nt,ct,Dt){try{Nu=0;var te=kl(rt,nt,ct,Dt);return Il=null,te}catch(ne){if(ne===yi||ne===ja)throw ne;var kn=e(29,ne,null,rt.mode);return kn.lanes=Dt,kn.return=rt,kn}}}function Nr(){for(var l=so,u=Du=so=0;u<l;){var p=Fi[u];Fi[u++]=null;var y=Fi[u];Fi[u++]=null;var S=Fi[u];Fi[u++]=null;var w=Fi[u];if(Fi[u++]=null,y!==null&&S!==null){var x=y.pending;x===null?S.next=S:(S.next=x.next,x.next=S),y.pending=S}w!==0&&ba(p,S,w)}}function Sa(l,u,p,y){Fi[so++]=l,Fi[so++]=u,Fi[so++]=p,Fi[so++]=y,Du|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function dc(l,u,p,y){return Sa(l,u,p,y),Nn(l)}function zi(l,u){return Sa(l,null,null,u),Nn(l)}function ba(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var S=!1,w=l.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(S=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,S&&u!==null&&(S=31-Ls(p),l=w.hiddenUpdates,y=l[S],y===null?l[S]=[u]:y.push(u),u.lane=p|536870912),w):null}function Nn(l){if(50<Be)throw Be=0,Vf=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function ri(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Aa(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ws(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Dr(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Se&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=Nn(l),ba(l,null,p),u}return Sa(l,y,u,p),Nn(l)}function el(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,L(l,p)}}function mc(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var x={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?S=w=x:w=w.next=x,p=p.next}while(p!==null);w===null?S=w=u:w=w.next=u}else S=w=u;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Is(){if(Tm){var l=_i;if(l!==null)throw l}}function xr(l,u,p,y){Tm=!1;var S=l.updateQueue;oa=!1;var w=S.firstBaseUpdate,x=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var ft=Q,bt=ft.next;ft.next=null,x===null?w=bt:x.next=bt,x=ft;var Mt=l.alternate;Mt!==null&&(Mt=Mt.updateQueue,Q=Mt.lastBaseUpdate,Q!==x&&(Q===null?Mt.firstBaseUpdate=bt:Q.next=bt,Mt.lastBaseUpdate=ft))}if(w!==null){var Rt=S.baseState;x=0,Mt=bt=ft=null,Q=w;do{var Bt=Q.lane&-536870913,ue=Bt!==Q.lane;if(ue?(Re&Bt)===Bt:(y&Bt)===Bt){Bt!==0&&Bt===zo&&(Tm=!0),Mt!==null&&(Mt=Mt.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});t:{var xi=l,ih=Q;Bt=u;var kl=p;switch(ih.tag){case 1:if(xi=ih.payload,typeof xi=="function"){Rt=xi.call(kl,Rt,Bt);break t}Rt=xi;break t;case 3:xi.flags=xi.flags&-65537|128;case 0:if(xi=ih.payload,Bt=typeof xi=="function"?xi.call(kl,Rt,Bt):xi,Bt==null)break t;Rt=Xd({},Rt,Bt);break t;case 2:oa=!0}}Bt=Q.callback,Bt!==null&&(l.flags|=64,ue&&(l.flags|=8192),ue=S.callbacks,ue===null?S.callbacks=[Bt]:ue.push(Bt))}else ue={lane:Bt,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Mt===null?(bt=Mt=ue,ft=Rt):Mt=Mt.next=ue,x|=Bt;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;ue=Q,Q=ue.next,ue.next=null,S.lastBaseUpdate=ue,S.shared.pending=null}}while(!0);Mt===null&&(ft=Rt),S.baseState=ft,S.firstBaseUpdate=bt,S.lastBaseUpdate=Mt,w===null&&(S.shared.lanes=0),Go|=x,l.lanes=x,l.memoizedState=Rt}}function ar(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function Zs(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)ar(p[l],u)}function Ns(l,u){l=ro,D(Nl,l),D(xu,u),ro=l|u.baseLanes}function wa(){D(Nl,ro),D(xu,xu.current)}function zn(){ro=Nl.current,N(xu),N(Nl)}function Ra(l){var u=l.alternate;D(qn,qn.current&1),D(zs,l),_s===null&&(u===null||xu.current!==null||u.memoizedState!==null)&&(_s=l)}function nu(l){D(qn,qn.current),D(zs,l),_s===null&&(_s=l)}function rr(l){l.tag===22?(D(qn,qn.current),D(zs,l),_s===null&&(_s=l)):Bi()}function Bi(){D(qn,qn.current),D(zs,zs.current)}function Gi(l){N(zs),_s===l&&(_s=null),N(qn)}function nl(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Al(p)||im(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function ln(){throw Error(s(321))}function pc(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!$n(l[p],u[p]))return!1;return!0}function il(l,u,p,y,S,w){return Bo=w,fe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Zt.H=l===null||l.memoizedState===null?Mn:ao,xe=!1,w=p(y,S),xe=!1,me&&(w=Xn(u,p,y,S)),Ds(l),w}function Ds(l){Zt.H=la;var u=Jt!==null&&Jt.next!==null;if(Bo=0,re=Jt=fe=null,_e=!1,Fa=0,yr=null,u)throw Error(s(300));l===null||gn||(l=l.dependencies,l!==null&&$i(l)&&(gn=!0))}function Xn(l,u,p,y){fe=l;var S=0;do{if(me&&(yr=null),Fa=0,me=!1,25<=S)throw Error(s(301));if(S+=1,re=Jt=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Zt.H=Dl,w=u(p,y)}while(me);return w}function bi(){var l=Zt.H,u=l.useState()[0];return u=typeof u.then=="function"?Ai(u):u,l=l.useState()[0],(Jt!==null?Jt.memoizedState:null)!==l&&(fe.flags|=1024),u}function Or(){var l=ss!==0;return ss=0,l}function iu(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function Fe(l){if(_e){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}_e=!1}Bo=0,re=Jt=fe=null,me=!1,Fa=ss=0,yr=null}function Jn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?fe.memoizedState=re=l:re=re.next=l,re}function Ye(){if(Jt===null){var l=fe.alternate;l=l!==null?l.memoizedState:null}else l=Jt.next;var u=re===null?fe.memoizedState:re.next;if(u!==null)re=u,Jt=l;else{if(l===null)throw fe.alternate===null?Error(s(467)):Error(s(310));Jt=l,l={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},re===null?fe.memoizedState=re=l:re=re.next=l}return re}function Mr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ai(l){var u=Fa;return Fa+=1,yr===null&&(yr=[]),l=Od(yr,l,u),u=fe,(re===null?u.memoizedState:re.next)===null&&(u=u.alternate,Zt.H=u===null||u.memoizedState===null?Mn:ao),l}function To(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ai(l);if(l.$$typeof===ka)return je(l)}throw Error(s(438,String(l)))}function gc(l){var u=null,p=fe.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=fe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Mr(),fe.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=rg;return u.index++,p}function $s(l,u){return typeof u=="function"?u(l):u}function or(l){var u=Ye();return _c(u,Jt,l)}function _c(l,u,p){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var S=l.baseQueue,w=y.pending;if(w!==null){if(S!==null){var x=S.next;S.next=w.next,w.next=x}u.baseQueue=S=w,y.pending=null}if(w=l.baseState,S===null)l.memoizedState=w;else{u=S.next;var Q=x=null,ft=null,bt=u,Mt=!1;do{var Rt=bt.lane&-536870913;if(Rt!==bt.lane?(Re&Rt)===Rt:(Bo&Rt)===Rt){var Bt=bt.revertLane;if(Bt===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),Rt===zo&&(Mt=!0);else if((Bo&Bt)===Bt){bt=bt.next,Bt===zo&&(Mt=!0);continue}else Rt={lane:0,revertLane:bt.revertLane,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},ft===null?(Q=ft=Rt,x=w):ft=ft.next=Rt,fe.lanes|=Bt,Go|=Bt;Rt=bt.action,xe&&p(w,Rt),w=bt.hasEagerState?bt.eagerState:p(w,Rt)}else Bt={lane:Rt,revertLane:bt.revertLane,gesture:bt.gesture,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},ft===null?(Q=ft=Bt,x=w):ft=ft.next=Bt,fe.lanes|=Rt,Go|=Rt;bt=bt.next}while(bt!==null&&bt!==u);if(ft===null?x=w:ft.next=Q,!$n(w,l.memoizedState)&&(gn=!0,Mt&&(p=_i,p!==null)))throw p;l.memoizedState=w,l.baseState=x,l.baseQueue=ft,y.lastRenderedState=w}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Pr(l){var u=Ye(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,w=u.memoizedState;if(S!==null){p.pending=null;var x=S=S.next;do w=l(w,x.action),x=x.next;while(x!==S);$n(w,u.memoizedState)||(gn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),p.lastRenderedState=w}return[w,y]}function ls(l,u,p){var y=fe,S=Ye(),w=we;if(w){if(p===void 0)throw Error(s(407));p=p()}else p=u();var x=!$n((Jt||S).memoizedState,p);if(x&&(S.memoizedState=p,gn=!0),S=S.queue,ur(vc.bind(null,y,S,l),[l]),S.getSnapshot!==u||x||re!==null&&re.memoizedState.tag&1){if(y.flags|=2048,us(9,{destroy:void 0},yc.bind(null,y,S,p,u),null),ye===null)throw Error(s(349));w||(Bo&127)!==0||Wh(y,u,p)}return p}function Wh(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=fe.updateQueue,u===null?(u=Mr(),fe.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function yc(l,u,p,y){u.value=p,u.getSnapshot=y,su(u)&&Zh(l)}function vc(l,u,p){return p(function(){su(u)&&Zh(l)})}function su(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!$n(l,p)}catch{return!0}}function Zh(l){var u=zi(l,2);u!==null&&xn(u,l,2)}function Vr(l){var u=Jn();if(typeof l=="function"){var p=l;if(l=p(),xe){z(!0);try{p()}finally{z(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:l},u}function au(l,u,p,y){return l.baseState=p,_c(l,Jt,typeof y=="function"?y:$s)}function lr(l,u,p,y,S){if(uu(l))throw Error(s(485));if(l=u.action,l!==null){var w={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){w.listeners.push(x)}};Zt.T!==null?p(!0):w.isTransition=!1,y(w),p=u.pending,p===null?(w.next=u.pending=w,Ec(u,w)):(w.next=p.next,u.pending=p.next=w)}}function Ec(l,u){var p=u.action,y=u.payload,S=l.state;if(u.isTransition){var w=Zt.T,x={};Zt.T=x;try{var Q=p(S,y),ft=Zt.S;ft!==null&&ft(x,Q),ta(l,u,Q)}catch(bt){Ca(l,u,bt)}finally{w!==null&&x.types!==null&&(w.types=x.types),Zt.T=w}}else try{w=p(S,y),ta(l,u,w)}catch(bt){Ca(l,u,bt)}}function ta(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){So(l,u,y)},function(y){return Ca(l,u,y)}):So(l,u,p)}function So(l,u,p){u.status="fulfilled",u.value=p,sl(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,Ec(l,p)))}function Ca(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,sl(u),u=u.next;while(u!==y)}l.action=null}function sl(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function ru(l,u){return u}function bo(l,u){if(we){var p=ye.formState;if(p!==null){t:{var y=fe;if(we){if(En){var S=Ay(En,ps);if(S){En=wy(S),y=wg(S);break t}}Ne(y)}y=!1}y&&(u=p[0])}}p=Jn(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:u},p.queue=y,p=tf.bind(null,fe,y),y.dispatch=p,y=Vr(!1);var w=Na.bind(null,fe,!1,y.queue);return y=Jn(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,p=lr.bind(null,fe,S,w,p),S.dispatch=p,y.memoizedState=l,[u,p,!1]}function Ia(l){var u=Ye();return ea(u,Jt,l)}function ea(l,u,p){if(u=_c(l,u,ru)[0],l=or($s)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Ai(u)}catch(x){throw x===yi?ja:x}else y=u;u=Ye();var S=u.queue,w=S.dispatch;return p!==u.memoizedState&&(fe.flags|=2048,us(9,{destroy:void 0},ou.bind(null,S,p),null)),[y,w,l]}function ou(l,u){l.action=u}function We(l){var u=Ye(),p=Jt;if(p!==null)return ea(u,p,l);Ye(),u=u.memoizedState,p=Ye();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function us(l,u,p,y){return l={tag:l,create:p,deps:y,inst:u,next:null},u=fe.updateQueue,u===null&&(u=Mr(),fe.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function Tc(){return Ye().memoizedState}function kr(l,u,p,y){var S=Jn();fe.flags|=l,S.memoizedState=us(1|u,{destroy:void 0},p,y===void 0?null:y)}function al(l,u,p,y){var S=Ye();y=y===void 0?null:y;var w=S.memoizedState.inst;Jt!==null&&y!==null&&pc(y,Jt.memoizedState.deps)?S.memoizedState=us(u,w,p,y):(fe.flags|=l,S.memoizedState=us(1|u,w,p,y))}function rl(l,u){kr(8390656,8,l,u)}function ur(l,u){al(2048,8,l,u)}function cr(l){fe.flags|=4;var u=fe.updateQueue;if(u===null)u=Mr(),fe.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function wi(l){var u=Ye().memoizedState;return cr({ref:u,nextImpl:l}),function(){if((Se&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function Lr(l,u){return al(4,2,l,u)}function hr(l,u){return al(4,4,l,u)}function Ao(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Sc(l,u,p){p=p!=null?p.concat([l]):null,al(4,4,Ao.bind(null,u,l),p)}function Ur(){}function lu(l,u){var p=Ye();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&pc(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function fr(l,u){var p=Ye();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&pc(u,y[1]))return y[0];if(y=l(),xe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y}function ol(l,u,p){return p===void 0||(Bo&1073741824)!==0&&(Re&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=No(),fe.lanes|=l,Go|=l,p)}function bc(l,u,p,y){return $n(p,u)?p:xu.current!==null?(l=ol(l,p,y),$n(l,u)||(gn=!0),l):(Bo&42)===0||(Bo&1073741824)!==0&&(Re&261930)===0?(gn=!0,l.memoizedState=p):(l=No(),fe.lanes|=l,Go|=l,u)}function ll(l,u,p,y,S){var w=La();Ae(w!==0&&8>w?w:8);var x=Zt.T,Q={};Zt.T=Q,Na(l,!1,u,p);try{var ft=S(),bt=Zt.S;if(bt!==null&&bt(Q,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var Mt=Cr(ft,y);cl(l,u,Mt,yn(l))}else cl(l,u,y,yn(l))}catch(Rt){cl(l,u,{then:function(){},status:"rejected",reason:Rt},yn())}finally{Ae(w),x!==null&&Q.types!==null&&(x.types=Q.types),Zt.T=x}}function $h(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:bu,baseState:bu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:bu},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Ac(){return je(Au)}function ul(){return Ye().memoizedState}function wc(){return Ye().memoizedState}function Md(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=yn();l=Ws(p);var y=Dr(u,l,p);y!==null&&(xn(y,u,p),el(y,u,p)),u={cache:pe()},l.payload=u;return}u=u.return}}function Rc(l,u,p){var y=yn();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},uu(l)?ef(u,p):(p=dc(l,u,p,y),p!==null&&(xn(p,l,y),nf(p,u,y)))}function tf(l,u,p){var y=yn();cl(l,u,p,y)}function cl(l,u,p,y){var S={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(uu(l))ef(u,S);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var x=u.lastRenderedState,Q=w(x,p);if(S.hasEagerState=!0,S.eagerState=Q,$n(Q,x))return Sa(l,u,S,0),ye===null&&Nr(),!1}catch{}if(p=dc(l,u,S,y),p!==null)return xn(p,l,y),nf(p,u,y),!0}return!1}function Na(l,u,p,y){if(y={lane:2,revertLane:uc(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},uu(l)){if(u)throw Error(s(479))}else u=dc(l,p,y,2),u!==null&&xn(u,l,2)}function uu(l){var u=l.alternate;return l===fe||u!==null&&u===fe}function ef(l,u){me=_e=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function nf(l,u,p){if((p&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,L(l,p)}}function Cc(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:Xd({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}function wo(l,u,p,y,S,w,x){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,w,x):u.prototype&&u.prototype.isPureReactComponent?!Js(p,y)||!Js(S,w):!0}function ts(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&Df.enqueueReplaceState(u,u.state,null)}function zr(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=Xd({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function cu(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function Br(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function _(l,u,p){return p=Ws(p),p.tag=3,p.payload={element:null},p.callback=function(){cu(l,u)},p}function R(l){return l=Ws(l),l.tag=3,l}function I(l,u,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var w=y.value;l.payload=function(){return S(w)},l.callback=function(){Br(u,p,y)}}var x=p.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){Br(u,p,y),typeof S!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var Q=y.stack;this.componentDidCatch(y.value,{componentStack:Q!==null?Q:""})})}function P(l,u,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&He(u,p,S,!0),p=zs.current,p!==null){switch(p.tag){case 31:case 13:return _s===null?Lc():p.alternate===null&&Vn===0&&(Vn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===io?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),Bc(l,y,S)),!1;case 22:return p.flags|=65536,y===io?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),Bc(l,y,S)),!1}throw Error(s(435,p.tag))}return Bc(l,y,S),Lc(),!1}if(we)return u=zs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==ym&&(l=Error(s(422),{cause:y}),tr(Ut(l,p)))):(y!==ym&&(u=Error(s(423),{cause:y}),tr(Ut(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=Ut(y,p),S=_(l.stateNode,y,S),mc(l,S),Vn!==4&&(Vn=2)),!1;var w=Error(s(520),{cause:y});if(w=Ut(w,p),Of===null?Of=[w]:Of.push(w),Vn!==4&&(Vn=2),u===null)return!0;y=Ut(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=_(p.stateNode,y,l),mc(p,l),!1;case 1:if(u=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qo===null||!qo.has(w))))return p.flags|=65536,S&=-S,p.lanes|=S,S=R(S),I(S,l,p,y),mc(p,S),!1}p=p.return}while(p!==null);return!1}function $(l,u,p,y){u.child=l===null?Hg(u,null,p,y):ji(u,l.child,p,y)}function ut(l,u,p,y,S){p=p.render;var w=u.ref;if("ref"in y){var x={};for(var Q in y)Q!=="ref"&&(x[Q]=y[Q])}else x=y;return Cs(u),y=il(l,u,p,x,w,S),Q=Or(),l!==null&&!gn?(iu(l,u,S),Gr(l,u,S)):(we&&Q&&dt(u),u.flags|=1,$(l,u,y,S),u.child)}function Pt(l,u,p,y,S){if(l===null){var w=p.type;return typeof w=="function"&&!pu(w)&&w.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=w,le(l,u,w,y,S)):(l=Oo(p.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(w=l.child,!sf(l,S)){var x=w.memoizedProps;if(p=p.compare,p=p!==null?p:Js,p(x,y)&&l.ref===u.ref)return Gr(l,u,S)}return u.flags|=1,l=sa(w,y),l.ref=u.ref,l.return=u,u.child=l}function le(l,u,p,y,S){if(l!==null){var w=l.memoizedProps;if(Js(w,y)&&l.ref===u.ref)if(gn=!1,u.pendingProps=y=w,sf(l,S))(l.flags&131072)!==0&&(gn=!0);else return u.lanes=l.lanes,Gr(l,u,S)}return Ro(l,u,p,y,S)}function Bn(l,u,p,y){var S=y.children,w=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,l!==null){for(y=u.child=l.child,S=0;y!==null;)S=S|y.lanes|y.childLanes,y=y.sibling;y=S&~w}else y=0,u.child=null;return pn(l,u,w,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&In(u,w!==null?w.cachePool:null),w!==null?Ns(u,w):wa(),rr(u);else return y=u.lanes=536870912,pn(l,u,w!==null?w.baseLanes|p:p,p,y)}else w!==null?(In(u,w.cachePool),Ns(u,w),Bi(),u.memoizedState=null):(l!==null&&In(u,null),wa(),Bi());return $(l,u,S,p),u.child}function De(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function pn(l,u,p,y,S){var w=Eo();return w=w===null?null:{parent:Wn?Tn._currentValue:Tn._currentValue2,pool:w},u.memoizedState={baseLanes:p,cachePool:w},l!==null&&In(u,null),wa(),rr(u),l!==null&&He(l,u,y,!0),u.childLanes=S,null}function cs(l,u){return u=hl({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function dr(l,u,p){return ji(u,l.child,null,p),l=cs(u,u.pendingProps),l.flags|=2,Gi(u),u.memoizedState=null,l}function mr(l,u,p){var y=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(we){if(y.mode==="hidden")return l=cs(u,y),u.lanes=536870912,De(null,l);if(nu(u),(l=En)?(l=Cg(l,ps),l!==null&&(u.memoizedState={dehydrated:l,treeContext:Ba!==null?{id:qi,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},p=ig(l),p.return=u,u.child=p,gi=u,En=null)):l=null,l===null)throw Ne(u);return u.lanes=536870912,null}return cs(u,y)}var w=l.memoizedState;if(w!==null){var x=w.dehydrated;if(nu(u),S)if(u.flags&256)u.flags&=-257,u=dr(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(s(558));else if(gn||He(l,u,p,!1),S=(p&l.childLanes)!==0,gn||S){if(y=ye,y!==null&&(x=j(y,p),x!==0&&x!==w.retryLane))throw w.retryLane=x,zi(l,x),xn(y,l,x),ys;Lc(),u=dr(l,u,p)}else l=w.treeContext,vn&&(En=Ny(x),gi=u,we=!0,no=null,ps=!1,l!==null&&Gt(u,l)),u=cs(u,y),u.flags|=4096;return u}return l=sa(l.child,{mode:y.mode,children:y.children}),l.ref=u.ref,u.child=l,l.return=u,l}function xs(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function Ro(l,u,p,y,S){return Cs(u),p=il(l,u,p,y,void 0,S),y=Or(),l!==null&&!gn?(iu(l,u,S),Gr(l,u,S)):(we&&y&&dt(u),u.flags|=1,$(l,u,p,S),u.child)}function hu(l,u,p,y,S,w){return Cs(u),u.updateQueue=null,p=Xn(u,y,p,S),Ds(l),y=Or(),l!==null&&!gn?(iu(l,u,w),Gr(l,u,w)):(we&&y&&dt(u),u.flags|=1,$(l,u,p,w),u.child)}function fu(l,u,p,y,S){if(Cs(u),u.stateNode===null){var w=$r,x=p.contextType;typeof x=="object"&&x!==null&&(w=je(x)),w=new p(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Df,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},ri(u),x=p.contextType,w.context=typeof x=="object"&&x!==null?je(x):$r,w.state=u.memoizedState,x=p.getDerivedStateFromProps,typeof x=="function"&&(Cc(u,p,x,y),w.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(x=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),x!==w.state&&Df.enqueueReplaceState(w,w.state,null),xr(u,y,w,S),Is(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){w=u.stateNode;var Q=u.memoizedProps,ft=zr(p,Q);w.props=ft;var bt=w.context,Mt=p.contextType;x=$r,typeof Mt=="object"&&Mt!==null&&(x=je(Mt));var Rt=p.getDerivedStateFromProps;Mt=typeof Rt=="function"||typeof w.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,Mt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Q||bt!==x)&&ts(u,w,y,x),oa=!1;var Bt=u.memoizedState;w.state=Bt,xr(u,y,w,S),Is(),bt=u.memoizedState,Q||Bt!==bt||oa?(typeof Rt=="function"&&(Cc(u,p,Rt,y),bt=u.memoizedState),(ft=oa||wo(u,p,ft,y,Bt,bt,x))?(Mt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=bt),w.props=y,w.state=bt,w.context=x,y=ft):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,Aa(l,u),x=u.memoizedProps,Mt=zr(p,x),w.props=Mt,Rt=u.pendingProps,Bt=w.context,bt=p.contextType,ft=$r,typeof bt=="object"&&bt!==null&&(ft=je(bt)),Q=p.getDerivedStateFromProps,(bt=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==Rt||Bt!==ft)&&ts(u,w,y,ft),oa=!1,Bt=u.memoizedState,w.state=Bt,xr(u,y,w,S),Is();var ue=u.memoizedState;x!==Rt||Bt!==ue||oa||l!==null&&l.dependencies!==null&&$i(l.dependencies)?(typeof Q=="function"&&(Cc(u,p,Q,y),ue=u.memoizedState),(Mt=oa||wo(u,p,Mt,y,Bt,ue,ft)||l!==null&&l.dependencies!==null&&$i(l.dependencies))?(bt||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,ue,ft),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,ue,ft)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Bt===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Bt===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ue),w.props=y,w.state=ue,w.context=ft,y=Mt):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Bt===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Bt===l.memoizedState||(u.flags|=1024),y=!1)}return w=y,xs(l,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,l!==null&&y?(u.child=ji(u,l.child,null,S),u.child=ji(u,null,p,S)):$(l,u,p,S),u.memoizedState=w.state,l=u.child):l=Gr(l,u,S),l}function Y_(l,u,p,y){return ws(),u.flags|=256,$(l,u,p,y),u.child}function qp(l){return{baseLanes:l,cachePool:nr()}}function Hp(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=vs),l}function jp(l,u,p){var y=u.pendingProps,S=!1,w=(u.flags&128)!==0,x;if((x=w)||(x=l!==null&&l.memoizedState===null?!1:(qn.current&2)!==0),x&&(S=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,l===null){if(we){if(S?Ra(u):Bi(),(l=En)?(l=My(l,ps),l!==null&&(u.memoizedState={dehydrated:l,treeContext:Ba!==null?{id:qi,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},p=ig(l),p.return=u,u.child=p,gi=u,En=null)):l=null,l===null)throw Ne(u);return im(l)?u.lanes=32:u.lanes=536870912,null}var Q=y.children;return y=y.fallback,S?(Bi(),S=u.mode,Q=hl({mode:"hidden",children:Q},S),y=Va(y,S,p,null),Q.return=u,y.return=u,Q.sibling=y,u.child=Q,y=u.child,y.memoizedState=qp(p),y.childLanes=Hp(l,x,p),u.memoizedState=Ou,De(null,y)):(Ra(u),Pd(u,Q))}var ft=l.memoizedState;if(ft!==null&&(Q=ft.dehydrated,Q!==null)){if(w)u.flags&256?(Ra(u),u.flags&=-257,u=du(l,u,p)):u.memoizedState!==null?(Bi(),u.child=l.child,u.flags|=128,u=null):(Bi(),Q=y.fallback,S=u.mode,y=hl({mode:"visible",children:y.children},S),Q=Va(Q,S,p,null),Q.flags|=2,y.return=u,Q.return=u,y.sibling=Q,u.child=y,ji(u,l.child,null,p),y=u.child,y.memoizedState=qp(p),y.childLanes=Hp(l,x,p),u.memoizedState=Ou,u=De(null,y));else if(Ra(u),im(Q))x=sm(Q).digest,y=Error(s(419)),y.stack="",y.digest=x,tr({value:y,source:null,stack:null}),u=du(l,u,p);else if(gn||He(l,u,p,!1),x=(p&l.childLanes)!==0,gn||x){if(x=ye,x!==null&&(y=j(x,p),y!==0&&y!==ft.retryLane))throw ft.retryLane=y,zi(l,y),xn(x,l,y),ys;Al(Q)||Lc(),u=du(l,u,p)}else Al(Q)?(u.flags|=192,u.child=l.child,u=null):(l=ft.treeContext,vn&&(En=Dy(Q),gi=u,we=!0,no=null,ps=!1,l!==null&&Gt(u,l)),u=Pd(u,y.children),u.flags|=4096);return u}return S?(Bi(),Q=y.fallback,S=u.mode,ft=l.child,w=ft.sibling,y=sa(ft,{mode:"hidden",children:y.children}),y.subtreeFlags=ft.subtreeFlags&65011712,w!==null?Q=sa(w,Q):(Q=Va(Q,S,p,null),Q.flags|=2),Q.return=u,y.return=u,y.sibling=Q,u.child=y,De(null,y),y=u.child,Q=l.child.memoizedState,Q===null?Q=qp(p):(S=Q.cachePool,S!==null?(ft=Wn?Tn._currentValue:Tn._currentValue2,S=S.parent!==ft?{parent:ft,pool:ft}:S):S=nr(),Q={baseLanes:Q.baseLanes|p,cachePool:S}),y.memoizedState=Q,y.childLanes=Hp(l,x,p),u.memoizedState=Ou,De(l.child,y)):(Ra(u),p=l.child,l=p.sibling,p=sa(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(x=u.deletions,x===null?(u.deletions=[l],u.flags|=16):x.push(l)),u.child=p,u.memoizedState=null,p)}function Pd(l,u){return u=hl({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function hl(l,u){return l=e(22,l,null,u),l.lanes=0,l}function du(l,u,p){return ji(u,l.child,null,p),l=Pd(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Q_(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),er(l.return,u,p)}function Ic(l,u,p,y,S,w){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S,treeForkCount:w}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=p,x.tailMode=S,x.treeForkCount=w)}function Fp(l,u,p){var y=u.pendingProps,S=y.revealOrder,w=y.tail;y=y.children;var x=qn.current,Q=(x&2)!==0;if(Q?(x=x&1|2,u.flags|=128):x&=1,D(qn,x),$(l,u,y,p),y=we?Cf:0,!Q&&l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Q_(l,p,u);else if(l.tag===19)Q_(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&nl(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),Ic(u,!1,S,p,w,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&nl(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}Ic(u,!0,p,null,w,y);break;case"together":Ic(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function Gr(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Go|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(He(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,p=sa(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=sa(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function sf(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&$i(l)))}function Kp(l,u,p){switch(u.tag){case 3:ee(u,u.stateNode.containerInfo),Wi(u,Tn,l.memoizedState.cache),ws();break;case 27:case 5:Te(u);break;case 4:ee(u,u.stateNode.containerInfo);break;case 10:Wi(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,nu(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Ra(u),u.flags|=128,null):(p&u.child.childLanes)!==0?jp(l,u,p):(Ra(u),l=Gr(l,u,p),l!==null?l.sibling:null);Ra(u);break;case 19:var S=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(He(l,u,p,!1),y=(p&u.childLanes)!==0),S){if(y)return Fp(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),D(qn,qn.current),y)break;return null;case 22:return u.lanes=0,Bn(l,u,p,u.pendingProps);case 24:Wi(u,Tn,l.memoizedState.cache)}return Gr(l,u,p)}function Yp(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)gn=!0;else{if(!sf(l,p)&&(u.flags&128)===0)return gn=!1,Kp(l,u,p);gn=(l.flags&131072)!==0}else gn=!1,we&&(u.flags&1048576)!==0&&q(u,Cf,u.index);switch(u.lanes=0,u.tag){case 16:t:{var y=u.pendingProps;if(l=Ir(u.elementType),u.type=l,typeof l=="function")pu(l)?(y=zr(l,y),u.tag=1,u=fu(null,u,l,y,p)):(u.tag=0,u=Ro(null,u,l,y,p));else{if(l!=null){var S=l.$$typeof;if(S===Gc){u.tag=11,u=ut(null,u,l,y,p);break t}else if(S===Wd){u.tag=14,u=Pt(null,u,l,y,p);break t}}throw u=b(l)||l,Error(s(306,u,""))}}return u;case 0:return Ro(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,S=zr(y,u.pendingProps),fu(l,u,y,S,p);case 3:t:{if(ee(u,u.stateNode.containerInfo),l===null)throw Error(s(387));var w=u.pendingProps;S=u.memoizedState,y=S.element,Aa(l,u),xr(u,w,null,p);var x=u.memoizedState;if(w=x.cache,Wi(u,Tn,w),w!==S.cache&&Ke(u,[Tn],p,!0),Is(),w=x.element,vn&&S.isDehydrated)if(S={element:w,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Y_(l,u,w,p);break t}else if(w!==y){y=Ut(Error(s(424)),u),tr(y),u=Y_(l,u,w,p);break t}else for(vn&&(En=Iy(u.stateNode.containerInfo),gi=u,we=!0,no=null,ps=!0),p=Hg(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ws(),w===y){u=Gr(l,u,p);break t}$(l,u,w,p)}u=u.child}return u;case 26:if(Ua)return xs(l,u),l===null?(p=Og(u.type,null,u.pendingProps,null))?u.memoizedState=p:we||(u.stateNode=lm(u.type,u.pendingProps,Hi.current,u)):u.memoizedState=Og(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(pi)return Te(u),l===null&&pi&&we&&(y=u.stateNode=um(u.type,u.pendingProps,Hi.current,Ni.current,!1),gi=u,ps=!0,En=Rg(u.type,y,En)),$(l,u,u.pendingProps.children,p),xs(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&we&&(qy(u.type,u.pendingProps,Ni.current),(S=y=En)&&(y=xy(y,u.type,u.pendingProps,ps),y!==null?(u.stateNode=y,gi=u,En=Cy(y),ps=!1,S=!0):S=!1),S||Ne(u)),Te(u),S=u.type,w=u.pendingProps,x=l!==null?l.memoizedProps:null,y=w.children,ms(S,w)?y=null:x!==null&&ms(S,x)&&(u.flags|=32),u.memoizedState!==null&&(S=il(l,u,bi,null,null,p),Wn?Au._currentValue=S:Au._currentValue2=S),xs(l,u),$(l,u,y,p),u.child;case 6:return l===null&&we&&(xg(u.pendingProps,Ni.current),(l=p=En)&&(p=Oy(p,u.pendingProps,ps),p!==null?(u.stateNode=p,gi=u,En=null,l=!0):l=!1),l||Ne(u)),null;case 13:return jp(l,u,p);case 4:return ee(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=ji(u,null,y,p):$(l,u,y,p),u.child;case 11:return ut(l,u,u.type,u.pendingProps,p);case 7:return $(l,u,u.pendingProps,p),u.child;case 8:return $(l,u,u.pendingProps.children,p),u.child;case 12:return $(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,Wi(u,u.type,y.value),$(l,u,y.children,p),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,Cs(u),S=je(S),y=y(S),u.flags|=1,$(l,u,y,p),u.child;case 14:return Pt(l,u,u.type,u.pendingProps,p);case 15:return le(l,u,u.type,u.pendingProps,p);case 19:return Fp(l,u,p);case 31:return mr(l,u,p);case 22:return Bn(l,u,p,u.pendingProps);case 24:return Cs(u),y=je(Tn),l===null?(S=Eo(),S===null&&(S=ye,w=pe(),S.pooledCache=w,w.refCount++,w!==null&&(S.pooledCacheLanes|=p),S=w),u.memoizedState={parent:y,cache:S},ri(u),Wi(u,Tn,S)):((l.lanes&p)!==0&&(Aa(l,u),xr(u,null,null,p),Is()),S=l.memoizedState,w=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),Wi(u,Tn,y)):(y=w.cache,Wi(u,Tn,y),y!==S.cache&&Ke(u,[Tn],p,!0))),$(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function Da(l){l.flags|=4}function af(l){aa&&(l.flags|=8)}function X_(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&8218)!==0||(l.subtreeFlags&8218)!==0)return!0;l=l.sibling}return!1}function Qp(l,u,p,y){if(Ie)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)vf(l,p.stateNode);else if(!(p.tag===4||pi&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(aa)for(var S=u.child;S!==null;){if(S.tag===5){var w=S.stateNode;p&&y&&(w=by(w,S.type,S.memoizedProps)),vf(l,w)}else if(S.tag===6)w=S.stateNode,p&&y&&(w=Ag(w,S.memoizedProps)),vf(l,w);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)w=S.child,w!==null&&(w.return=S),Qp(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function J_(l,u,p,y){var S=!1;if(aa)for(var w=u.child;w!==null;){if(w.tag===5){var x=w.stateNode;p&&y&&(x=by(x,w.type,w.memoizedProps)),Sg(l,x)}else if(w.tag===6)x=w.stateNode,p&&y&&(x=Ag(x,w.memoizedProps)),Sg(l,x);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)S=w.child,S!==null&&(S.return=w),J_(l,w,!0,!0),S=!0;else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return S;w=w.return}w.sibling.return=w.return,w=w.sibling}return S}function W_(l,u){if(aa&&X_(l,u)){l=u.stateNode;var p=l.containerInfo,y=Tg();J_(y,u,!1,!1),l.pendingChildren=y,Da(u),Sy(p,y)}}function Xp(l,u,p,y){if(Ie)l.memoizedProps!==y&&Da(u);else if(aa){var S=l.stateNode,w=l.memoizedProps;if((l=X_(l,u))||w!==y){var x=Ni.current;w=Ty(S,p,w,y,!l,null),w===S?u.stateNode=S:(af(u),Vs(w,p,y,x)&&Da(u),u.stateNode=w,l&&Qp(w,u,!1,!1))}else u.stateNode=S}}function hs(l,u,p,y,S){if((l.mode&32)!==0&&(p===null?Ef(u,y):Kc(u,p,y))){if(l.flags|=16777216,(S&335544128)===S||cg(u,y))if(On(l.stateNode,u,y))l.flags|=8192;else if(Ce())l.flags|=8192;else throw gs=io,Em}else l.flags&=-16777217}function Nc(l,u){if(kg(u)){if(l.flags|=16777216,!Lg(u))if(Ce())l.flags|=8192;else throw gs=io,Em}else l.flags&=-16777217}function rf(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Z():536870912,l.lanes|=u,eh|=u)}function Dc(l,u){if(!we)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function un(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function Z_(l,u,p){var y=u.pendingProps;switch(Nt(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(u),null;case 1:return un(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Zi(Tn),ie(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Qs(u)?Da(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Rs())),W_(l,u),un(u),null;case 26:if(Ua){var S=u.type,w=u.memoizedState;return l===null?(Da(u),w!==null?(un(u),Nc(u,w)):(un(u),hs(u,S,null,y,p))):w?w!==l.memoizedState?(Da(u),un(u),Nc(u,w)):(un(u),u.flags&=-16777217):(w=l.memoizedProps,Ie?w!==y&&Da(u):Xp(l,u,S,y),un(u),hs(u,S,w,y,p)),null}case 27:if(pi){if(mn(u),p=Hi.current,S=u.type,l!==null&&u.stateNode!=null)Ie?l.memoizedProps!==y&&Da(u):Xp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return un(u),null}l=Ni.current,Qs(u)?$a(u,l):(l=um(S,y,p,l,!0),u.stateNode=l,Da(u))}return un(u),null}case 5:if(mn(u),S=u.type,l!==null&&u.stateNode!=null)Xp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return un(u),null}if(w=Ni.current,Qs(u))$a(u,w),zy(u.stateNode,S,y,w)&&(u.flags|=64);else{var x=lg(S,y,Hi.current,w,u);af(u),Qp(x,u,!1,!1),u.stateNode=x,Vs(x,S,y,w)&&Da(u)}}return un(u),hs(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)p=l.memoizedProps,Ie?p!==y&&Da(u):aa&&(p!==y?(l=Hi.current,p=Ni.current,af(u),u.stateNode=Vo(y,l,p,u)):u.stateNode=l.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(l=Hi.current,p=Ni.current,Qs(u)){if(!vn)throw Error(s(176));if(l=u.stateNode,p=u.memoizedProps,y=null,S=gi,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}M2(l,p,u,y)||Ne(u,!0)}else af(u),u.stateNode=Vo(y,l,p,u)}return un(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(y=Qs(u),p!==null){if(l===null){if(!y)throw Error(s(318));if(!vn)throw Error(s(556));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));Ig(l,u)}else ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;un(u),l=!1}else p=Rs(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(Gi(u),u):(Gi(u),null);if((u.flags&128)!==0)throw Error(s(558))}return un(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=Qs(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!vn)throw Error(s(344));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));Vy(S,u)}else ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;un(u),S=!1}else S=Rs(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(Gi(u),u):(Gi(u),null)}return Gi(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool),w=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==S&&(y.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),rf(u,u.updateQueue),un(u),null);case 4:return ie(),W_(l,u),l===null&&nn(u.stateNode.containerInfo),un(u),null;case 10:return Zi(u.type),un(u),null;case 19:if(N(qn),y=u.memoizedState,y===null)return un(u),null;if(S=(u.flags&128)!==0,w=y.rendering,w===null)if(S)Dc(y,!1);else{if(Vn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(w=nl(l),w!==null){for(u.flags|=128,Dc(y,!1),l=w.updateQueue,u.updateQueue=l,rf(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)Kd(p,l),p=p.sibling;return D(qn,qn.current&1|2),we&&Kt(u,y.treeForkCount),u.child}l=l.sibling}y.tail!==null&&ns()>Vl&&(u.flags|=128,S=!0,Dc(y,!1),u.lanes=4194304)}else{if(!S)if(l=nl(w),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,rf(u,l),Dc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!we)return un(u),null}else 2*ns()-y.renderingStartTime>Vl&&p!==536870912&&(u.flags|=128,S=!0,Dc(y,!1),u.lanes=4194304);y.isBackwards?(w.sibling=u.child,u.child=w):(l=y.last,l!==null?l.sibling=w:u.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=ns(),l.sibling=null,p=qn.current,D(qn,S?p&1|2:p&1),we&&Kt(u,y.treeForkCount),l):(un(u),null);case 22:case 23:return Gi(u),zn(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(un(u),u.subtreeFlags&6&&(u.flags|=8192)):un(u),p=u.updateQueue,p!==null&&rf(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&N(Cl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Zi(Tn),un(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function Jp(l,u){switch(Nt(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Zi(Tn),ie(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return mn(u),null;case 31:if(u.memoizedState!==null){if(Gi(u),u.alternate===null)throw Error(s(340));ws()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Gi(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));ws()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return N(qn),null;case 4:return ie(),null;case 10:return Zi(u.type),null;case 22:case 23:return Gi(u),zn(),l!==null&&N(Cl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Zi(Tn),null;case 25:return null;default:return null}}function $_(l,u){switch(Nt(u),u.tag){case 3:Zi(Tn),ie();break;case 26:case 27:case 5:mn(u);break;case 4:ie();break;case 31:u.memoizedState!==null&&Gi(u);break;case 13:Gi(u);break;case 19:N(qn);break;case 10:Zi(u.type);break;case 22:case 23:Gi(u),zn(),l!==null&&N(Cl);break;case 24:Zi(Tn)}}function qr(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&l)===l){y=void 0;var w=p.create,x=p.inst;y=w(),x.destroy=y}p=p.next}while(p!==S)}}catch(Q){ae(u,u.return,Q)}}function Hr(l,u,p){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var w=S.next;y=w;do{if((y.tag&l)===l){var x=y.inst,Q=x.destroy;if(Q!==void 0){x.destroy=void 0,S=u;var ft=p,bt=Q;try{bt()}catch(Mt){ae(S,ft,Mt)}}}y=y.next}while(y!==w)}}catch(Mt){ae(u,u.return,Mt)}}function xc(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{Zs(u,p)}catch(y){ae(l,l.return,y)}}}function Vd(l,u,p){p.props=zr(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){ae(l,u,y)}}function Oc(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=Hc(l.stateNode);break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(S){ae(l,u,S)}}function es(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){ae(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){ae(l,u,S)}else p.current=null}function mu(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{dy(y,u,p,l)}catch(S){ae(l,l.return,S)}}function of(l,u,p){try{my(l.stateNode,l.type,p,u,l)}catch(y){ae(l,l.return,y)}}function Wp(l){return l.tag===5||l.tag===3||(Ua?l.tag===26:!1)||(pi?l.tag===27&&wu(l.type):!1)||l.tag===4}function Co(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Wp(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(pi&&l.tag===27&&wu(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function kd(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?gy(p,l,u):_g(p,l);else if(y!==4&&(pi&&y===27&&wu(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(kd(l,u,p),l=l.sibling;l!==null;)kd(l,u,p),l=l.sibling}function lf(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?py(p,l,u):gg(p,l);else if(y!==4&&(pi&&y===27&&wu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(lf(l,u,p),l=l.sibling;l!==null;)lf(l,u,p),l=l.sibling}function Zp(l,u,p){l=l.containerInfo;try{bg(l,p)}catch(y){ae(u,u.return,y)}}function ty(l){var u=l.stateNode,p=l.memoizedProps;try{li(l.type,p,u,l)}catch(y){ae(l,l.return,y)}}function N2(l,u){for(Zd(l.containerInfo),ti=u;ti!==null;)if(l=ti,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,ti=u;else for(;ti!==null;){l=ti;var p=l.alternate;switch(u=l.flags,l.tag){case 0:if((u&4)!==0&&(u=l.updateQueue,u=u!==null?u.events:null,u!==null))for(var y=0;y<u.length;y++){var S=u[y];S.ref.impl=S.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0,y=l,S=p.memoizedProps,p=p.memoizedState;var w=y.stateNode;try{var x=zr(y.type,S);u=w.getSnapshotBeforeUpdate(x,p),w.__reactInternalSnapshotBeforeUpdate=u}catch(Q){ae(y,y.return,Q)}}break;case 3:(u&1024)!==0&&Ie&&Eg(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=l.sibling,u!==null){u.return=l.return,ti=u;break}ti=l.return}}function ey(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:fs(l,p),y&4&&qr(5,p);break;case 1:if(fs(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(x){ae(p,p.return,x)}else{var S=zr(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(x){ae(p,p.return,x)}}y&64&&xc(p),y&512&&Oc(p,p.return);break;case 3:if(fs(l,p),y&64&&(y=p.updateQueue,y!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=Hc(p.child.stateNode);break;case 1:l=p.child.stateNode}try{Zs(y,l)}catch(x){ae(p,p.return,x)}}break;case 27:pi&&u===null&&y&4&&ty(p);case 26:case 5:if(fs(l,p),u===null){if(y&4)mu(p);else if(y&64){l=p.type,u=p.memoizedProps,S=p.stateNode;try{Ly(S,l,u,p)}catch(x){ae(p,p.return,x)}}}y&512&&Oc(p,p.return);break;case 12:fs(l,p);break;case 31:fs(l,p),y&4&&Oa(l,p);break;case 13:fs(l,p),y&4&&cf(l,p),y&64&&(y=p.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(p=D2.bind(null,p),am(y,p))));break;case 22:if(y=p.memoizedState!==null||Hn,!y){u=u!==null&&u.memoizedState!==null||jn,S=Hn;var w=jn;Hn=y,(jn=u)&&!w?Pa(l,p,(p.subtreeFlags&8772)!==0):fs(l,p),Hn=S,jn=w}break;case 30:break;default:fs(l,p)}}function $p(l){var u=l.alternate;u!==null&&(l.alternate=null,$p(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&$d(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function xa(l,u,p){for(p=p.child;p!==null;)uf(l,u,p),p=p.sibling}function uf(l,u,p){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Iu,p)}catch{}switch(p.tag){case 26:if(Ua){jn||es(p,u),xa(l,u,p),p.memoizedState?wl(p.memoizedState):p.stateNode&&Vg(p.stateNode);break}case 27:if(pi){jn||es(p,u);var y=Pn,S=ei;wu(p.type)&&(Pn=p.stateNode,ei=!1),xa(l,u,p),Ii(p.stateNode),Pn=y,ei=S;break}case 5:jn||es(p,u);case 6:if(Ie){if(y=Pn,S=ei,Pn=null,xa(l,u,p),Pn=y,ei=S,Pn!==null)if(ei)try{yg(Pn,p.stateNode)}catch(w){ae(p,u,w)}else try{_y(Pn,p.stateNode)}catch(w){ae(p,u,w)}}else xa(l,u,p);break;case 18:Ie&&Pn!==null&&(ei?rm(Pn,p.stateNode):Dg(Pn,p.stateNode));break;case 4:Ie?(y=Pn,S=ei,Pn=p.stateNode.containerInfo,ei=!0,xa(l,u,p),Pn=y,ei=S):(aa&&Zp(p.stateNode,p,Tg()),xa(l,u,p));break;case 0:case 11:case 14:case 15:Hr(2,p,u),jn||Hr(4,p,u),xa(l,u,p);break;case 1:jn||(es(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Vd(p,u,y)),xa(l,u,p);break;case 21:xa(l,u,p);break;case 22:jn=(y=jn)||p.memoizedState!==null,xa(l,u,p),jn=y;break;default:xa(l,u,p)}}function Oa(l,u){if(vn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{P2(l)}catch(p){ae(u,u.return,p)}}}function cf(l,u){if(vn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{V2(l)}catch(p){ae(u,u.return,p)}}function Ma(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Fg),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Fg),u;default:throw Error(s(435,l.tag))}}function Io(l,u){var p=Ma(l);u.forEach(function(y){if(!p.has(y)){p.add(y);var S=x2.bind(null,l,y);y.then(S,S)}})}function Ri(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],w=l,x=u;if(Ie){var Q=x;t:for(;Q!==null;){switch(Q.tag){case 27:if(pi){if(wu(Q.type)){Pn=Q.stateNode,ei=!1;break t}break}case 5:Pn=Q.stateNode,ei=!1;break t;case 3:case 4:Pn=Q.stateNode.containerInfo,ei=!0;break t}Q=Q.return}if(Pn===null)throw Error(s(160));uf(w,x,S),Pn=null,ei=!1}else uf(w,x,S);w=S.alternate,w!==null&&(w.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)hf(u,l),u=u.sibling}function hf(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ri(u,l),Ci(l),y&4&&(Hr(3,l,l.return),qr(3,l),Hr(5,l,l.return));break;case 1:Ri(u,l),Ci(l),y&512&&(jn||p===null||es(p,p.return)),y&64&&Hn&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(Ua){var S=$e;if(Ri(u,l),Ci(l),y&512&&(jn||p===null||es(p,p.return)),y&4){y=p!==null?p.memoizedState:null;var w=l.memoizedState;p===null?w===null?l.stateNode===null?l.stateNode=Hy(S,l.type,l.memoizedProps,l):Pg(S,l.type,l.stateNode):l.stateNode=Mg(S,w,l.memoizedProps):y!==w?(y===null?p.stateNode!==null&&Vg(p.stateNode):wl(y),w===null?Pg(S,l.type,l.stateNode):Mg(S,w,l.memoizedProps)):w===null&&l.stateNode!==null&&of(l,l.memoizedProps,p.memoizedProps)}break}case 27:if(pi){Ri(u,l),Ci(l),y&512&&(jn||p===null||es(p,p.return)),p!==null&&y&4&&of(l,l.memoizedProps,p.memoizedProps);break}case 5:if(Ri(u,l),Ci(l),y&512&&(jn||p===null||es(p,p.return)),Ie){if(l.flags&32){S=l.stateNode;try{vg(S)}catch(Rt){ae(l,l.return,Rt)}}y&4&&l.stateNode!=null&&(S=l.memoizedProps,of(l,S,p!==null?p.memoizedProps:S)),y&1024&&(Jc=!0)}else aa&&l.alternate!==null&&(l.alternate.stateNode=l.stateNode);break;case 6:if(Ri(u,l),Ci(l),y&4&&Ie){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,p=p!==null?p.memoizedProps:y,S=l.stateNode;try{fy(S,p,y)}catch(Rt){ae(l,l.return,Rt)}}break;case 3:if(Ua?(jy(),S=$e,$e=bf(u.containerInfo),Ri(u,l),$e=S):Ri(u,l),Ci(l),y&4){if(Ie&&vn&&p!==null&&p.memoizedState.isDehydrated)try{Uy(u.containerInfo)}catch(Rt){ae(l,l.return,Rt)}if(aa){y=u.containerInfo,p=u.pendingChildren;try{bg(y,p)}catch(Rt){ae(l,l.return,Rt)}}}Jc&&(Jc=!1,Ld(l));break;case 4:Ua?(p=$e,$e=bf(l.stateNode.containerInfo),Ri(u,l),Ci(l),$e=p):(Ri(u,l),Ci(l)),y&4&&aa&&Zp(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Ri(u,l),Ci(l);break;case 31:Ri(u,l),Ci(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Io(l,y)));break;case 13:Ri(u,l),Ci(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Mf=ns()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Io(l,y)));break;case 22:S=l.memoizedState!==null;var x=p!==null&&p.memoizedState!==null,Q=Hn,ft=jn;if(Hn=Q||S,jn=ft||x,Ri(u,l),jn=ft,Hn=Q,Ci(l),y&8192&&(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(p===null||x||Hn||jn||fl(l)),Ie)){t:if(p=null,Ie)for(u=l;;){if(u.tag===5||Ua&&u.tag===26){if(p===null){x=p=u;try{w=x.stateNode,S?O2(w):vy(x.stateNode,x.memoizedProps)}catch(Rt){ae(x,x.return,Rt)}}}else if(u.tag===6){if(p===null){x=u;try{var bt=x.stateNode;S?yy(bt):Ey(bt,x.memoizedProps)}catch(Rt){ae(x,x.return,Rt)}}}else if(u.tag===18){if(p===null){x=u;try{var Mt=x.stateNode;S?By(Mt):Gy(x.stateNode)}catch(Rt){ae(x,x.return,Rt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Io(l,p))));break;case 19:Ri(u,l),Ci(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Io(l,y)));break;case 30:break;case 21:break;default:Ri(u,l),Ci(l)}}function Ci(l){var u=l.flags;if(u&2){try{for(var p,y=l.return;y!==null;){if(Wp(y)){p=y;break}y=y.return}if(Ie){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(pi){var S=p.stateNode,w=Co(l);lf(l,w,S);break}case 5:var x=p.stateNode;p.flags&32&&(vg(x),p.flags&=-33);var Q=Co(l);lf(l,Q,x);break;case 3:case 4:var ft=p.stateNode.containerInfo,bt=Co(l);kd(l,bt,ft);break;default:throw Error(s(161))}}}catch(Mt){ae(l,l.return,Mt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Ld(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Ld(u),u.tag===5&&u.flags&1024&&fg(u.stateNode),l=l.sibling}}function fs(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ey(l,u.alternate,u),u=u.sibling}function fl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Hr(4,u,u.return),fl(u);break;case 1:es(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Vd(u,u.return,p),fl(u);break;case 27:pi&&Ii(u.stateNode);case 26:case 5:es(u,u.return),fl(u);break;case 22:u.memoizedState===null&&fl(u);break;case 30:fl(u);break;default:fl(u)}l=l.sibling}}function Pa(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,w=u,x=w.flags;switch(w.tag){case 0:case 11:case 15:Pa(S,w,p),qr(4,w);break;case 1:if(Pa(S,w,p),y=w,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(bt){ae(y,y.return,bt)}if(y=w,S=y.updateQueue,S!==null){var Q=y.stateNode;try{var ft=S.shared.hiddenCallbacks;if(ft!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ft.length;S++)ar(ft[S],Q)}catch(bt){ae(y,y.return,bt)}}p&&x&64&&xc(w),Oc(w,w.return);break;case 27:pi&&ty(w);case 26:case 5:Pa(S,w,p),p&&y===null&&x&4&&mu(w),Oc(w,w.return);break;case 12:Pa(S,w,p);break;case 31:Pa(S,w,p),p&&x&4&&Oa(S,w);break;case 13:Pa(S,w,p),p&&x&4&&cf(S,w);break;case 22:w.memoizedState===null&&Pa(S,w,p),Oc(w,w.return);break;case 30:break;default:Pa(S,w,p)}u=u.sibling}}function dl(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Ve(p))}function tg(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Ve(l))}function Dn(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Ud(l,u,p,y),u=u.sibling}function Ud(l,u,p,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:Dn(l,u,p,y),S&2048&&qr(9,u);break;case 1:Dn(l,u,p,y);break;case 3:Dn(l,u,p,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Ve(l)));break;case 12:if(S&2048){Dn(l,u,p,y),l=u.stateNode;try{var w=u.memoizedProps,x=w.id,Q=w.onPostCommit;typeof Q=="function"&&Q(x,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ft){ae(u,u.return,ft)}}else Dn(l,u,p,y);break;case 31:Dn(l,u,p,y);break;case 13:Dn(l,u,p,y);break;case 23:break;case 22:w=u.stateNode,x=u.alternate,u.memoizedState!==null?w._visibility&2?Dn(l,u,p,y):Mc(l,u):w._visibility&2?Dn(l,u,p,y):(w._visibility|=2,Os(l,u,p,y,(u.subtreeFlags&10256)!==0||!1)),S&2048&&dl(x,u);break;case 24:Dn(l,u,p,y),S&2048&&tg(u.alternate,u);break;default:Dn(l,u,p,y)}}function Os(l,u,p,y,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=l,x=u,Q=p,ft=y,bt=x.flags;switch(x.tag){case 0:case 11:case 15:Os(w,x,Q,ft,S),qr(8,x);break;case 23:break;case 22:var Mt=x.stateNode;x.memoizedState!==null?Mt._visibility&2?Os(w,x,Q,ft,S):Mc(w,x):(Mt._visibility|=2,Os(w,x,Q,ft,S)),S&&bt&2048&&dl(x.alternate,x);break;case 24:Os(w,x,Q,ft,S),S&&bt&2048&&tg(x.alternate,x);break;default:Os(w,x,Q,ft,S)}u=u.sibling}}function Mc(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,S=y.flags;switch(y.tag){case 22:Mc(p,y),S&2048&&dl(y.alternate,y);break;case 24:Mc(p,y),S&2048&&tg(y.alternate,y);break;default:Mc(p,y)}u=u.sibling}}function jr(l,u,p){if(l.subtreeFlags&ua)for(l=l.child;l!==null;)ml(l,u,p),l=l.sibling}function ml(l,u,p){switch(l.tag){case 26:if(jr(l,u,p),l.flags&ua)if(l.memoizedState!==null)Fy(p,$e,l.memoizedState,l.memoizedProps);else{var y=l.stateNode,S=l.type;l=l.memoizedProps,((u&335544128)===u||cg(S,l))&&tm(p,y,S,l)}break;case 5:jr(l,u,p),l.flags&ua&&(y=l.stateNode,S=l.type,l=l.memoizedProps,((u&335544128)===u||cg(S,l))&&tm(p,y,S,l));break;case 3:case 4:Ua?(y=$e,$e=bf(l.stateNode.containerInfo),jr(l,u,p),$e=y):jr(l,u,p);break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=ua,ua=16777216,jr(l,u,p),ua=y):jr(l,u,p));break;default:jr(l,u,p)}}function zd(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Pc(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];ti=y,na(y,l)}zd(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Bd(l),l=l.sibling}function Bd(l){switch(l.tag){case 0:case 11:case 15:Pc(l),l.flags&2048&&Hr(9,l,l.return);break;case 3:Pc(l);break;case 12:Pc(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,ff(l)):Pc(l);break;default:Pc(l)}}function ff(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];ti=y,na(y,l)}zd(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Hr(8,u,u.return),ff(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,ff(u));break;default:ff(u)}l=l.sibling}}function na(l,u){for(;ti!==null;){var p=ti;switch(p.tag){case 0:case 11:case 15:Hr(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Ve(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,ti=y;else t:for(p=l;ti!==null;){y=ti;var S=y.sibling,w=y.return;if($p(y),y===p){ti=null;break t}if(S!==null){S.return=w,ti=S;break t}ti=w}}}function pl(l){var u=he(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(l=Zn(l),l===null)throw Error(s(362));return l.stateNode.current}function gl(l,u){var p=l.tag;switch(u.$$typeof){case Ka:if(l.type===u.value)return!0;break;case Zc:t:{for(u=u.value,l=[l,0],p=0;p<l.length;){var y=l[p++],S=y.tag,w=l[p++],x=u[w];if(S!==5&&S!==26&&S!==27||!bl(y)){for(;x!=null&&gl(y,x);)w++,x=u[w];if(w===u.length){u=!0;break t}else for(y=y.child;y!==null;)l.push(y,w),y=y.sibling}}u=!1}return u;case $c:if((p===5||p===26||p===27)&&pg(l.stateNode,u.value))return!0;break;case xl:if((p===5||p===6||p===26||p===27)&&(l=Tf(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case xf:if((p===5||p===26||p===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Vc(l){switch(l.$$typeof){case Ka:return"<"+(b(l.value)||"Unknown")+">";case Zc:return":has("+(Vc(l)||"")+")";case $c:return'[role="'+l.value+'"]';case xl:return'"'+l.value+'"';case xf:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function kc(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var S=l[y++],w=S.tag,x=l[y++],Q=u[x];if(w!==5&&w!==26&&w!==27||!bl(S)){for(;Q!=null&&gl(S,Q);)x++,Q=u[x];if(x===u.length)p.push(S);else for(S=S.child;S!==null;)l.push(S,x),S=S.sibling}}return p}function Ms(l,u){if(!mi)throw Error(s(363));l=pl(l),l=kc(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++],S=y.tag;if(S===5||S===26||S===27)bl(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}function yn(){return(Se&2)!==0&&Re!==0?Re&-Re:Zt.T!==null?uc():Fc()}function No(){if(vs===0)if((Re&536870912)===0||we){var l=Cu;Cu<<=1,(Cu&3932160)===0&&(Cu=262144),vs=l}else vs=536870912;return l=zs.current,l!==null&&(l.flags|=32),vs}function xn(l,u,p){(l===ye&&(tn===2||tn===9)||l.cancelPendingCommit!==null)&&(Gn(l,0),Kr(l,Re,vs,!1)),lt(l,p),((Se&2)===0||l!==ye)&&(l===ye&&((Se&2)===0&&(Pl|=p),Vn===4&&Kr(l,Re,vs,!1)),va(l))}function pr(l,u,p){if((Se&6)!==0)throw Error(s(327));var y=!p&&(u&127)===0&&(u&l.expiredLanes)===0||Y(l,u),S=y?sy(l,u):Yr(l,u,!0),w=y;do{if(S===0){Ol&&!y&&Kr(l,u,0,!1);break}else{if(p=l.current.alternate,w&&!ny(p)){S=Yr(l,u,!1),w=!1;continue}if(S===2){if(w=u,l.errorRecoveryDisabledLanes&w)var x=0;else x=l.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;t:{var Q=l;S=Of;var ft=vn&&Q.current.memoizedState.isDehydrated;if(ft&&(Gn(Q,x).flags|=256),x=Yr(Q,x,!1),x!==2){if(Ml&&!ft){Q.errorRecoveryDisabledLanes|=w,Pl|=w,S=4;break t}w=Bs,Bs=S,w!==null&&(Bs===null?Bs=w:Bs.push.apply(Bs,w))}S=x}if(w=!1,S!==2)continue}}if(S===1){Gn(l,0),Kr(l,u,0,!0);break}t:{switch(y=l,w=S,w){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Kr(y,u,vs,!vr);break t;case 2:Bs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(S=Mf+300-ns(),10<S)){if(Kr(y,u,vs,!vr),H(y,0,!0)!==0)break t;oo=u,y.timeoutHandle=ug(Fr.bind(null,y,p,Bs,Pf,Sm,u,vs,Pl,eh,vr,w,"Throttled",-0,0),S);break t}Fr(y,p,Bs,Pf,Sm,u,vs,Pl,eh,vr,w,null,-0,0)}}break}while(!0);va(l)}function Fr(l,u,p,y,S,w,x,Q,ft,bt,Mt,Rt,Bt,ue){if(l.timeoutHandle=ks,Rt=u.subtreeFlags,Rt&8192||(Rt&16785408)===16785408){Rt=hg(),ml(u,w,Rt);var xi=(w&62914560)===w?Mf-ns():(w&4194048)===w?Pu-ns():0;if(xi=hy(Rt,xi),xi!==null){oo=w,l.cancelPendingCommit=xi(Xr.bind(null,l,u,w,p,y,S,x,Q,ft,Mt,Rt,null,Bt,ue)),Kr(l,w,x,!bt);return}}Xr(l,u,w,p,y,S,x,Q,ft)}function ny(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],w=S.getSnapshot;S=S.value;try{if(!$n(w(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Kr(l,u,p,y){u&=~th,u&=~Pl,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var w=31-Ls(S),x=1<<w;y[w]=-1,S&=~x}p!==0&&M(l,p,u)}function Gd(){return(Se&6)===0?(vo(0),!1):!0}function qd(){if(be!==null){if(tn===0)var l=be.return;else l=be,_r=hn=null,Fe(l),Il=null,Nu=0,l=be;for(;l!==null;)$_(l.alternate,l),l=l.return;be=null}}function Gn(l,u){var p=l.timeoutHandle;p!==ks&&(l.timeoutHandle=ks,cy(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),oo=0,qd(),ye=l,be=p=sa(l.current,null),Re=u,tn=0,ui=null,vr=!1,Ol=Y(l,u),Ml=!1,eh=vs=th=Pl=Go=Vn=0,Bs=Of=null,Sm=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-Ls(y),w=1<<S;u|=l[S],y&=~w}return ro=u,Nr(),p}function cn(l,u){fe=null,Zt.H=la,u===yi||u===ja?(u=ir(),tn=3):u===Em?(u=ir(),tn=4):tn=u===ys?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ui=u,be===null&&(Vn=1,cu(l,Ut(u,l.current)))}function Ce(){var l=zs.current;return l===null?!0:(Re&4194048)===Re?_s===null:(Re&62914560)===Re||(Re&536870912)!==0?l===_s:!1}function Do(){var l=Zt.H;return Zt.H=la,l===null?la:l}function ia(){var l=Zt.A;return Zt.A=Wc,l}function Lc(){Vn=4,vr||(Re&4194048)!==Re&&zs.current!==null||(Ol=!0),(Go&134217727)===0&&(Pl&134217727)===0||ye===null||Kr(ye,Re,vs,!1)}function Yr(l,u,p){var y=Se;Se|=2;var S=Do(),w=ia();(ye!==l||Re!==u)&&(Pf=null,Gn(l,u)),u=!1;var x=Vn;t:do try{if(tn!==0&&be!==null){var Q=be,ft=ui;switch(tn){case 8:qd(),x=6;break t;case 3:case 2:case 9:case 6:zs.current===null&&(u=!0);var bt=tn;if(tn=0,ui=null,Qr(l,Q,ft,bt),p&&Ol){x=0;break t}break;default:bt=tn,tn=0,ui=null,Qr(l,Q,ft,bt)}}iy(),x=Vn;break}catch(Mt){cn(l,Mt)}while(!0);return u&&l.shellSuspendCounter++,_r=hn=null,Se=y,Zt.H=S,Zt.A=w,be===null&&(ye=null,Re=0,Nr()),x}function iy(){for(;be!==null;)_l(be)}function sy(l,u){var p=Se;Se|=2;var y=Do(),S=ia();ye!==l||Re!==u?(Pf=null,Vl=ns()+500,Gn(l,u)):Ol=Y(l,u);t:do try{if(tn!==0&&be!==null){u=be;var w=ui;e:switch(tn){case 1:tn=0,ui=null,Qr(l,u,w,1);break;case 2:case 9:if(Ta(w)){tn=0,ui=null,Hd(u);break}u=function(){tn!==2&&tn!==9||ye!==l||(tn=7),va(l)},w.then(u,u);break t;case 3:tn=7;break t;case 4:tn=5;break t;case 7:Ta(w)?(tn=0,ui=null,Hd(u)):(tn=0,ui=null,Qr(l,u,w,7));break;case 5:var x=null;switch(be.tag){case 26:x=be.memoizedState;case 5:case 27:var Q=be,ft=Q.type,bt=Q.pendingProps;if(x?Lg(x):On(Q.stateNode,ft,bt)){tn=0,ui=null;var Mt=Q.sibling;if(Mt!==null)be=Mt;else{var Rt=Q.return;Rt!==null?(be=Rt,zc(Rt)):be=null}break e}}tn=0,ui=null,Qr(l,u,w,5);break;case 6:tn=0,ui=null,Qr(l,u,w,6);break;case 8:qd(),Vn=6;break t;default:throw Error(s(462))}}Uc();break}catch(Bt){cn(l,Bt)}while(!0);return _r=hn=null,Zt.H=y,Zt.A=S,Se=p,be!==null?0:(ye=null,Re=0,Nr(),Vn)}function Uc(){for(;be!==null&&!Yy();)_l(be)}function _l(l){var u=Yp(l.alternate,l,ro);l.memoizedProps=l.pendingProps,u===null?zc(l):be=u}function Hd(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=hu(p,u,u.pendingProps,u.type,void 0,Re);break;case 11:u=hu(p,u,u.pendingProps,u.type.render,u.ref,Re);break;case 5:Fe(u);default:$_(p,u),u=be=Kd(u,ro),u=Yp(p,u,ro)}l.memoizedProps=l.pendingProps,u===null?zc(l):be=u}function Qr(l,u,p,y){_r=hn=null,Fe(u),Il=null,Nu=0;var S=u.return;try{if(P(l,S,u,p,Re)){Vn=1,cu(l,Ut(p,l.current)),be=null;return}}catch(w){if(S!==null)throw be=S,w;Vn=1,cu(l,Ut(p,l.current)),be=null;return}u.flags&32768?(we||y===1?l=!0:Ol||(Re&536870912)!==0?l=!1:(vr=l=!0,(y===2||y===9||y===3||y===6)&&(y=zs.current,y!==null&&y.tag===13&&(y.flags|=16384))),yl(u,l)):zc(u)}function zc(l){var u=l;do{if((u.flags&32768)!==0){yl(u,vr);return}l=u.return;var p=Z_(u.alternate,u,ro);if(p!==null){be=p;return}if(u=u.sibling,u!==null){be=u;return}be=u=l}while(u!==null);Vn===0&&(Vn=5)}function yl(l,u){do{var p=Jp(l.alternate,l);if(p!==null){p.flags&=32767,be=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){be=l;return}be=l=p}while(l!==null);Vn=6,be=null}function Xr(l,u,p,y,S,w,x,Q,ft){l.cancelPendingCommit=null;do Wr();while(ci!==0);if((Se&6)!==0)throw Error(s(327));if(u!==null){if(u===l.current)throw Error(s(177));if(w=u.lanes|u.childLanes,w|=Du,k(l,p,w,x,Q,ft),l===ye&&(be=ye=null,Re=0),Vu=u,Ho=l,oo=p,nh=w,bm=S,Kg=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,oi(wf,function(){return df(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=Zt.T,Zt.T=null,S=La(),Ae(2),x=Se,Se|=4;try{N2(l,u,p)}finally{Se=x,Ae(S),Zt.T=y}}ci=1,xo(),Jr(),jd()}}function xo(){if(ci===1){ci=0;var l=Ho,u=Vu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=Zt.T,Zt.T=null;var y=La();Ae(2);var S=Se;Se|=4;try{hf(u,l),uy(l.containerInfo)}finally{Se=S,Ae(y),Zt.T=p}}l.current=u,ci=2}}function Jr(){if(ci===2){ci=0;var l=Ho,u=Vu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=Zt.T,Zt.T=null;var y=La();Ae(2);var S=Se;Se|=4;try{ey(l,u.alternate,u)}finally{Se=S,Ae(y),Zt.T=p}}ci=3}}function jd(){if(ci===4||ci===3){ci=0,zg();var l=Ho,u=Vu,p=oo,y=Kg;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ci=5:(ci=0,Vu=Ho=null,Fd(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(qo=null),F(p),u=u.stateNode,Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Iu,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=Zt.T,S=La(),Ae(2),Zt.T=null;try{for(var w=l.onRecoverableError,x=0;x<y.length;x++){var Q=y[x];w(Q.value,{componentStack:Q.stack})}}finally{Zt.T=u,Ae(S)}}(oo&3)!==0&&Wr(),va(l),S=l.pendingLanes,(p&261930)!==0&&(S&42)!==0?l===Vf?Be++:(Be=0,Vf=l):Be=0,vn&&Sf(),vo(0)}}function Fd(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Ve(u)))}function Wr(){return xo(),Jr(),jd(),df()}function df(){if(ci!==5)return!1;var l=Ho,u=nh;nh=0;var p=F(oo),y=32>p?32:p;p=Zt.T;var S=La();try{Ae(y),Zt.T=null,y=bm,bm=null;var w=Ho,x=oo;if(ci=0,Vu=Ho=null,oo=0,(Se&6)!==0)throw Error(s(331));var Q=Se;if(Se|=4,Bd(w.current),Ud(w,w.current,x,y),Se=Q,vo(0,!1),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Iu,w)}catch{}return!0}finally{Ae(S),Zt.T=p,Fd(l,u)}}function vl(l,u,p){u=Ut(p,u),u=_(l.stateNode,u,2),l=Dr(l,u,2),l!==null&&(lt(l,2),va(l))}function ae(l,u,p){if(l.tag===3)vl(l,l,p);else for(;u!==null;){if(u.tag===3){vl(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(qo===null||!qo.has(y))){l=Ut(p,l),p=R(2),y=Dr(u,p,2),y!==null&&(I(p,y,u,l),lt(y,2),va(y));break}}u=u.return}}function Bc(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new ca;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(p)||(Ml=!0,S.add(p),l=ay.bind(null,l,u,p),u.then(l,l))}function ay(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,ye===l&&(Re&p)===p&&(Vn===4||Vn===3&&(Re&62914560)===Re&&300>ns()-Mf?(Se&2)===0&&Gn(l,0):th|=p,eh===Re&&(eh=0)),va(l)}function ry(l,u){u===0&&(u=Z()),l=zi(l,u),l!==null&&(lt(l,u),va(l))}function D2(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),ry(l,p)}function x2(l,u){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),ry(l,p)}function oi(l,u){return Af(l,u)}function eg(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function sa(l,u){var p=l.alternate;return p===null?(p=e(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Kd(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Oo(l,u,p,y,S,w){var x=0;if(y=l,typeof l=="function")pu(l)&&(x=1);else if(typeof l=="string")x=Ua&&pi?om(l,p,Ni.current)?26:Ug(l)?27:5:Ua?om(l,p,Ni.current)?26:5:pi&&Ug(l)?27:5;else t:switch(l){case _f:return l=e(31,p,u,S),l.elementType=_f,l.lanes=w,l;case vu:return Va(p.children,S,w,u);case Eu:x=8,S|=24;break;case Tu:return l=e(12,p,u,S|2),l.elementType=Tu,l.lanes=w,l;case Jd:return l=e(13,p,u,S),l.elementType=Jd,l.lanes=w,l;case Mo:return l=e(19,p,u,S),l.elementType=Mo,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case ka:x=10;break t;case gf:x=9;break t;case Gc:x=11;break t;case Wd:x=14;break t;case ds:x=16,y=null;break t}x=29,p=Error(s(130,l===null?"null":typeof l,"")),y=null}return u=e(x,p,u,S),u.elementType=l,u.type=y,u.lanes=w,u}function Va(l,u,p,y){return l=e(7,l,y,u),l.lanes=p,l}function ng(l,u,p){return l=e(6,l,null,u),l.lanes=p,l}function ig(l){var u=e(18,null,null,0);return u.stateNode=l,u}function sg(l,u,p){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function oy(l,u,p,y,S,w,x,Q,ft){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ks,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.hiddenUpdates=pt(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=w,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ft,this.incompleteTransitions=new Map}function El(l,u,p,y,S,w,x,Q,ft,bt,Mt,Rt){return l=new oy(l,u,p,x,ft,bt,Mt,Rt,Q),u=1,w===!0&&(u|=24),w=e(3,null,null,u),l.current=w,w.stateNode=l,u=pe(),u.refCount++,l.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:u},ri(w),l}function Yd(l){return l?(l=$r,l):$r}function mf(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=f(u),l=l!==null?m(l):null,l===null?null:Hc(l.stateNode)}function ag(l,u,p,y,S,w){S=Yd(S),y.context===null?y.context=S:y.pendingContext=S,y=Ws(u),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Dr(l,y,u),p!==null&&(xn(p,l,u),el(p,l,u))}function gu(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function pf(l,u){gu(l,u),(l=l.alternate)&&gu(l,u)}var ge={},Qd=xv(),Ps=sS(),Xd=Object.assign,_u=Symbol.for("react.element"),Zr=Symbol.for("react.transitional.element"),yu=Symbol.for("react.portal"),vu=Symbol.for("react.fragment"),Eu=Symbol.for("react.strict_mode"),Tu=Symbol.for("react.profiler"),gf=Symbol.for("react.consumer"),ka=Symbol.for("react.context"),Gc=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Mo=Symbol.for("react.suspense_list"),Wd=Symbol.for("react.memo"),ds=Symbol.for("react.lazy"),_f=Symbol.for("react.activity"),rg=Symbol.for("react.memo_cache_sentinel"),Po=Symbol.iterator,Tl=Symbol.for("react.client.reference"),Sl=Array.isArray,Zt=Qd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,og=t.rendererVersion,yf=t.rendererPackageName,qc=t.extraDevToolsConfig,Hc=t.getPublicInstance,ly=t.getRootHostContext,jc=t.getChildHostContext,Zd=t.prepareForCommit,uy=t.resetAfterCommit,lg=t.createInstance;t.cloneMutableInstance;var vf=t.appendInitialChild,Vs=t.finalizeInitialChildren,ms=t.shouldSetTextContent,Vo=t.createTextInstance;t.cloneMutableTextInstance;var ug=t.scheduleTimeout,cy=t.cancelTimeout,ks=t.noTimeout,Wn=t.isPrimaryRenderer;t.warnsIfNotActing;var Ie=t.supportsMutation,aa=t.supportsPersistence,vn=t.supportsHydration,he=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var nn=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ae=t.setCurrentUpdatePriority,La=t.getCurrentUpdatePriority,Fc=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var Su=t.shouldAttemptEagerTransition,$d=t.detachDeletedInstance;t.requestPostPaintCallback;var Ef=t.maySuspendCommit,Kc=t.maySuspendCommitOnUpdate,cg=t.maySuspendCommitInSyncRender,On=t.preloadInstance,hg=t.startSuspendingCommit,tm=t.suspendInstance;t.suspendOnActiveViewTransition;var hy=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var bu=t.NotPendingTransition,Au=t.HostTransitionContext,fg=t.resetFormInstance;t.bindToConsole;var dg=t.supportsMicrotasks,mg=t.scheduleMicrotask,mi=t.supportsTestSelectors,Zn=t.findFiberRoot,em=t.getBoundingRect,Tf=t.getTextContent,bl=t.isHiddenSubtree,pg=t.matchAccessibilityRole,ko=t.setFocusIfFocusable,nm=t.setupIntersectionObserver,gg=t.appendChild,_g=t.appendChildToContainer,fy=t.commitTextUpdate,dy=t.commitMount,my=t.commitUpdate,py=t.insertBefore,gy=t.insertInContainerBefore,_y=t.removeChild,yg=t.removeChildFromContainer,vg=t.resetTextContent,O2=t.hideInstance,yy=t.hideTextInstance,vy=t.unhideInstance,Ey=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Eg=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var Ty=t.cloneInstance,Tg=t.createContainerChildSet,Sg=t.appendChildToContainerChildSet,Sy=t.finalizeContainerChildren,bg=t.replaceContainerChildren,by=t.cloneHiddenInstance,Ag=t.cloneHiddenTextInstance,Al=t.isSuspenseInstancePending,im=t.isSuspenseInstanceFallback,sm=t.getSuspenseInstanceFallbackErrorDetails,am=t.registerSuspenseInstanceRetry,Ay=t.canHydrateFormStateMarker,wg=t.isFormStateMarkerMatching,wy=t.getNextHydratableSibling,Ry=t.getNextHydratableSiblingAfterSingleton,Cy=t.getFirstHydratableChild,Iy=t.getFirstHydratableChildWithinContainer,Ny=t.getFirstHydratableChildWithinActivityInstance,Dy=t.getFirstHydratableChildWithinSuspenseInstance,Rg=t.getFirstHydratableChildWithinSingleton,xy=t.canHydrateInstance,Oy=t.canHydrateTextInstance,Cg=t.canHydrateActivityInstance,My=t.canHydrateSuspenseInstance,Py=t.hydrateInstance,M2=t.hydrateTextInstance,Ig=t.hydrateActivityInstance,Vy=t.hydrateSuspenseInstance,ky=t.getNextHydratableInstanceAfterActivityInstance,Ng=t.getNextHydratableInstanceAfterSuspenseInstance,Ly=t.commitHydratedInstance,Uy=t.commitHydratedContainer,P2=t.commitHydratedActivityInstance,V2=t.commitHydratedSuspenseInstance,zy=t.finalizeHydratedChildren,Sf=t.flushHydrationEvents;t.clearActivityBoundary;var Dg=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var rm=t.clearSuspenseBoundaryFromContainer,By=t.hideDehydratedBoundary,Gy=t.unhideDehydratedBoundary,Yc=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var qy=t.validateHydratableInstance,xg=t.validateHydratableTextInstance,Ua=t.supportsResources,om=t.isHostHoistableType,bf=t.getHoistableRoot,Og=t.getResource,Mg=t.acquireResource,wl=t.releaseResource,Hy=t.hydrateHoistable,Pg=t.mountHoistable,Vg=t.unmountHoistable,lm=t.createHoistableInstance,jy=t.prepareToCommitHoistables,kg=t.mayResourceSuspendCommit,Lg=t.preloadResource,Fy=t.suspendResource,pi=t.supportsSingletons,um=t.resolveSingletonInstance,li=t.acquireSingletonInstance,Ii=t.releaseSingletonInstance,Ug=t.isHostSingletonType,wu=t.isSingletonScope,cm=[],Ru=-1,$r={},Ls=Math.clz32?Math.clz32:V,hm=Math.log,Ky=Math.LN2,fm=256,Cu=262144,Qc=4194304,Af=Ps.unstable_scheduleCallback,dm=Ps.unstable_cancelCallback,Yy=Ps.unstable_shouldYield,zg=Ps.unstable_requestPaint,ns=Ps.unstable_now,mm=Ps.unstable_ImmediatePriority,Qy=Ps.unstable_UserBlockingPriority,wf=Ps.unstable_NormalPriority,pm=Ps.unstable_IdlePriority,Bg=Ps.log,Xy=Ps.unstable_setDisableYieldValue,Iu=null,Us=null,$n=typeof Object.is=="function"?Object.is:Ht,gm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},k2=Object.prototype.hasOwnProperty,_m,to,Rf=!1,Gg=new WeakMap,Lo=[],eo=0,sn=null,Cf=0,za=[],ra=0,Ba=null,qi=1,gr="",Ni=A(null),Uo=A(null),Hi=A(null),If=A(null),gi=null,En=null,we=!1,no=null,ps=!1,ym=Error(s(519)),Ga=A(null),hn=null,_r=null,Jy=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},Di=Ps.unstable_scheduleCallback,L2=Ps.unstable_NormalPriority,Tn={$$typeof:ka,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Nf=null,Ze=null,is=!1,qa=!1,vm=!1,Rl=0,Xc=null,qg=0,zo=0,_i=null,Ha=Zt.S;Zt.S=function(l,u){Pu=ns(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&cc(l,u),Ha!==null&&Ha(l,u)};var Cl=A(null),yi=Error(s(460)),Em=Error(s(474)),ja=Error(s(542)),io={then:function(){}},gs=null,Il=null,Nu=0,ji=fc(!0),Hg=fc(!1),Fi=[],so=0,Du=0,oa=!1,Tm=!1,xu=A(null),Nl=A(0),zs=A(null),_s=null,qn=A(0),Bo=0,fe=null,Jt=null,re=null,_e=!1,me=!1,xe=!1,ss=0,Fa=0,yr=null,jg=0,la={readContext:je,use:To,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};la.useEffectEvent=ln;var Mn={readContext:je,use:To,useCallback:function(l,u){return Jn().memoizedState=[l,u===void 0?null:u],l},useContext:je,useEffect:rl,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,kr(4194308,4,Ao.bind(null,u,l),p)},useLayoutEffect:function(l,u){return kr(4194308,4,l,u)},useInsertionEffect:function(l,u){kr(4,2,l,u)},useMemo:function(l,u){var p=Jn();u=u===void 0?null:u;var y=l();if(xe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=Jn();if(p!==void 0){var S=p(u);if(xe){z(!0);try{p(u)}finally{z(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=Rc.bind(null,fe,l),[y.memoizedState,l]},useRef:function(l){var u=Jn();return l={current:l},u.memoizedState=l},useState:function(l){l=Vr(l);var u=l.queue,p=tf.bind(null,fe,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:Ur,useDeferredValue:function(l,u){var p=Jn();return ol(p,l,u)},useTransition:function(){var l=Vr(!1);return l=ll.bind(null,fe,l.queue,!0,!1),Jn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=fe,S=Jn();if(we){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),ye===null)throw Error(s(349));(Re&127)!==0||Wh(y,u,p)}S.memoizedState=p;var w={value:p,getSnapshot:u};return S.queue=w,rl(vc.bind(null,y,w,l),[l]),y.flags|=2048,us(9,{destroy:void 0},yc.bind(null,y,w,p,u),null),p},useId:function(){var l=Jn(),u=ye.identifierPrefix;if(we){var p=gr,y=qi;p=(y&~(1<<32-Ls(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=ss++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=jg++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Ac,useFormState:bo,useActionState:bo,useOptimistic:function(l){var u=Jn();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Na.bind(null,fe,!0,p),p.dispatch=u,[l,u]},useMemoCache:gc,useCacheRefresh:function(){return Jn().memoizedState=Md.bind(null,fe)},useEffectEvent:function(l){var u=Jn(),p={impl:l};return u.memoizedState=p,function(){if((Se&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},ao={readContext:je,use:To,useCallback:lu,useContext:je,useEffect:ur,useImperativeHandle:Sc,useInsertionEffect:Lr,useLayoutEffect:hr,useMemo:fr,useReducer:or,useRef:Tc,useState:function(){return or($s)},useDebugValue:Ur,useDeferredValue:function(l,u){var p=Ye();return bc(p,Jt.memoizedState,l,u)},useTransition:function(){var l=or($s)[0],u=Ye().memoizedState;return[typeof l=="boolean"?l:Ai(l),u]},useSyncExternalStore:ls,useId:ul,useHostTransitionStatus:Ac,useFormState:Ia,useActionState:Ia,useOptimistic:function(l,u){var p=Ye();return au(p,Jt,l,u)},useMemoCache:gc,useCacheRefresh:wc};ao.useEffectEvent=wi;var Dl={readContext:je,use:To,useCallback:lu,useContext:je,useEffect:ur,useImperativeHandle:Sc,useInsertionEffect:Lr,useLayoutEffect:hr,useMemo:fr,useReducer:Pr,useRef:Tc,useState:function(){return Pr($s)},useDebugValue:Ur,useDeferredValue:function(l,u){var p=Ye();return Jt===null?ol(p,l,u):bc(p,Jt.memoizedState,l,u)},useTransition:function(){var l=Pr($s)[0],u=Ye().memoizedState;return[typeof l=="boolean"?l:Ai(l),u]},useSyncExternalStore:ls,useId:ul,useHostTransitionStatus:Ac,useFormState:We,useActionState:We,useOptimistic:function(l,u){var p=Ye();return Jt!==null?au(p,Jt,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:gc,useCacheRefresh:wc};Dl.useEffectEvent=wi;var Df={enqueueSetState:function(l,u,p){l=l._reactInternals;var y=yn(),S=Ws(y);S.payload=u,p!=null&&(S.callback=p),u=Dr(l,S,y),u!==null&&(xn(u,l,y),el(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=yn(),S=Ws(y);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=Dr(l,S,y),u!==null&&(xn(u,l,y),el(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=yn(),y=Ws(p);y.tag=2,u!=null&&(y.callback=u),u=Dr(l,y,p),u!==null&&(xn(u,l,p),el(u,l,p))}},ys=Error(s(461)),gn=!1,Ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Hn=!1,jn=!1,Jc=!1,Fg=typeof WeakSet=="function"?WeakSet:Set,ti=null,Pn=null,ei=!1,$e=null,ua=8192,Wc={getCacheForType:function(l){var u=je(Tn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return je(Tn).controller.signal}},Ka=0,Zc=1,$c=2,xf=3,xl=4;if(typeof Symbol=="function"&&Symbol.for){var Mu=Symbol.for;Ka=Mu("selector.component"),Zc=Mu("selector.has_pseudo_class"),$c=Mu("selector.role"),xf=Mu("selector.test_id"),xl=Mu("selector.text")}var ca=typeof WeakMap=="function"?WeakMap:Map,Se=0,ye=null,be=null,Re=0,tn=0,ui=null,vr=!1,Ol=!1,Ml=!1,ro=0,Vn=0,Go=0,Pl=0,th=0,vs=0,eh=0,Of=null,Bs=null,Sm=!1,Mf=0,Pu=0,Vl=1/0,Pf=null,qo=null,ci=0,Ho=null,Vu=null,oo=0,nh=0,bm=null,Kg=null,Be=0,Vf=null;return ge.attemptContinuousHydration=function(l){if(l.tag===13||l.tag===31){var u=zi(l,67108864);u!==null&&xn(u,l,67108864),pf(l,67108864)}},ge.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13||l.tag===31){var u=yn();u=G(u);var p=zi(l,u);p!==null&&xn(p,l,u),pf(l,u)}},ge.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=U(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var p=1<<31-Ls(u);l.entanglements[1]|=p,u&=~p}va(l),(Se&6)===0&&(Vl=ns()+500,vo(0))}}break;case 31:case 13:u=zi(l,2),u!==null&&xn(u,l,2),Gd(),pf(l,2)}},ge.batchedUpdates=function(l,u){return l(u)},ge.createComponentSelector=function(l){return{$$typeof:Ka,value:l}},ge.createContainer=function(l,u,p,y,S,w,x,Q,ft,bt){return El(l,u,!1,null,p,y,w,null,x,Q,ft,bt)},ge.createHasPseudoClassSelector=function(l){return{$$typeof:Zc,value:l}},ge.createHydrationContainer=function(l,u,p,y,S,w,x,Q,ft,bt,Mt,Rt,Bt,ue){return l=El(p,y,!0,l,S,w,Q,ue,ft,bt,Mt,Rt),l.context=Yd(null),p=l.current,y=yn(),y=G(y),S=Ws(y),S.callback=u??null,Dr(p,S,y),u=y,l.current.lanes=u,lt(l,u),va(l),l},ge.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},ge.createRoleSelector=function(l){return{$$typeof:$c,value:l}},ge.createTestNameSelector=function(l){return{$$typeof:xf,value:l}},ge.createTextSelector=function(l){return{$$typeof:xl,value:l}},ge.defaultOnCaughtError=function(l){console.error(l)},ge.defaultOnRecoverableError=function(l){gm(l)},ge.defaultOnUncaughtError=function(l){gm(l)},ge.deferredUpdates=function(l){var u=Zt.T,p=La();try{return Ae(32),Zt.T=null,l()}finally{Ae(p),Zt.T=u}},ge.discreteUpdates=function(l,u,p,y,S){var w=Zt.T,x=La();try{return Ae(2),Zt.T=null,l(u,p,y,S)}finally{Ae(x),Zt.T=w,Se===0&&(Vl=ns()+500)}},ge.findAllNodes=Ms,ge.findBoundingRects=function(l,u){if(!mi)throw Error(s(363));u=Ms(l,u),l=[];for(var p=0;p<u.length;p++)l.push(em(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,S=y+p.width,w=p.y,x=w+p.height,Q=u-1;0<=Q;Q--)if(u!==Q){var ft=l[Q],bt=ft.x,Mt=bt+ft.width,Rt=ft.y,Bt=Rt+ft.height;if(y>=bt&&w>=Rt&&S<=Mt&&x<=Bt){l.splice(u,1);break}else if(y!==bt||p.width!==ft.width||Bt<w||Rt>x){if(!(w!==Rt||p.height!==ft.height||Mt<y||bt>S)){bt>y&&(ft.width+=bt-y,ft.x=y),Mt<S&&(ft.width=S-bt),l.splice(u,1);break}}else{Rt>w&&(ft.height+=Rt-w,ft.y=w),Bt<x&&(ft.height=x-Rt),l.splice(u,1);break}}}return l},ge.findHostInstance=mf,ge.findHostInstanceWithNoPortals=function(l){return l=f(l),l=l!==null?g(l):null,l===null?null:Hc(l.stateNode)},ge.findHostInstanceWithWarning=function(l){return mf(l)},ge.flushPassiveEffects=Wr,ge.flushSyncFromReconciler=function(l){var u=Se;Se|=1;var p=Zt.T,y=La();try{if(Ae(2),Zt.T=null,l)return l()}finally{Ae(y),Zt.T=p,Se=u,(Se&6)===0&&vo(0)}},ge.flushSyncWork=Gd,ge.focusWithin=function(l,u){if(!mi)throw Error(s(363));for(l=pl(l),u=kc(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++],y=p.tag;if(!bl(p)){if((y===5||y===26||y===27)&&ko(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},ge.getFindAllNodesFailureDescription=function(l,u){if(!mi)throw Error(s(363));var p=0,y=[];l=[pl(l),0];for(var S=0;S<l.length;){var w=l[S++],x=w.tag,Q=l[S++],ft=u[Q];if((x!==5&&x!==26&&x!==27||!bl(w))&&(gl(w,ft)&&(y.push(Vc(ft)),Q++,Q>p&&(p=Q)),Q<u.length))for(w=w.child;w!==null;)l.push(w,Q),w=w.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(Vc(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},ge.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return Hc(l.child.stateNode);default:return l.child.stateNode}},ge.injectIntoDevTools=function(){var l={bundleType:0,version:og,rendererPackageName:yf,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(qc!==null&&(l.rendererConfig=qc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Iu=u.inject(l),Us=u}catch{}l=!!u.checkDCE}}return l},ge.isAlreadyRendering=function(){return(Se&6)!==0},ge.observeVisibleRects=function(l,u,p,y){if(!mi)throw Error(s(363));l=Ms(l,u);var S=nm(l,p,y).disconnect;return{disconnect:function(){S()}}},ge.shouldError=function(){return null},ge.shouldSuspend=function(){return!1},ge.startHostTransition=function(l,u,p,y){if(l.tag!==5)throw Error(s(476));var S=$h(l).queue;ll(l,S,u,bu,p===null?i:function(){var w=$h(l);return w.next===null&&(w=l.alternate.memoizedState),cl(l,w.next.queue,{},yn()),p(y)})},ge.updateContainer=function(l,u,p,y){var S=u.current,w=yn();return ag(S,w,l,u,p,y),w},ge.updateContainerSync=function(l,u,p,y){return ag(u.current,2,l,u,p,y),2},ge},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(TE)),TE.exports}var UA;function JD(){return UA||(UA=1,EE.exports=XD()),EE.exports}var WD=JD();const ZD=P6(WD);var SE={exports:{}},Lu={};var zA;function $D(){return zA||(zA=1,Lu.ConcurrentRoot=1,Lu.ContinuousEventPriority=8,Lu.DefaultEventPriority=32,Lu.DiscreteEventPriority=2,Lu.IdleEventPriority=268435456,Lu.LegacyRoot=0,Lu.NoEventPriority=0),Lu}var BA;function tx(){return BA||(BA=1,SE.exports=$D()),SE.exports}var Vv=tx();const GA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let qA=!1,HA=!1;const Z1=".react-konva-event",ex=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,nx=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,ix={};function kv(n,t,e=ix){if(!qA&&"zIndex"in t&&(console.warn(nx),qA=!0),!HA&&t.draggable){var i=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;i&&!s&&(console.warn(ex),HA=!0)}for(var o in e)if(!GA[o]){var c=o.slice(0,2)==="on",f=e[o]!==t[o];if(c&&f){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),n.off(m,e[o])}var g=!t.hasOwnProperty(o);g&&n.setAttr(o,void 0)}var E=t._useStrictMode,b={},A=!1;const N={};for(var o in t)if(!GA[o]){var c=o.slice(0,2)==="on",D=e[o]!==t[o];if(c&&D){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[o]&&(N[m]=t[o])}!c&&(t[o]!==e[o]||E&&t[o]!==n.getAttr(o))&&(A=!0,b[o]=t[o])}A&&(n.setAttrs(b),Bh(n));for(var m in N)n.off(m+Z1),n.on(m+Z1,N[m])}function Bh(n){if(!Vt.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var bE=sS();const dw={},sx={};np.Node.prototype._applyProps=kv;let mw=Vv.DefaultEventPriority;function ax(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),Bh(n)}function rx(n,t,e){let i=np[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=np.Group);const s={},o={};for(var c in t)if(c!=="ref"){var f=c.slice(0,2)==="on";f?o[c]=t[c]:s[c]=t[c]}const m=new i(s);return kv(m,o),m}function ox(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function lx(n,t,e){return!1}function ux(n){return n}function cx(){return null}function hx(){return null}function fx(n,t,e,i){return sx}function dx(){}function mx(n){}function px(n,t){return!1}function gx(){return dw}function _x(){return dw}const yx=setTimeout,vx=clearTimeout,Ex=!0,Tx=n=>{n()},Sx=-1;function bx(n,t){return!1}const Ax=!1,wx=!1,Rx=!0,Cx=!1,Ix=!1;function Nx(n,t){t.parent===n?t.moveToTop():n.add(t),Bh(n)}function Dx(n,t){t.parent===n?t.moveToTop():n.add(t),Bh(n)}function pw(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),Bh(n)}function xx(n,t,e){pw(n,t,e)}function Ox(n,t){t.destroy(),t.off(Z1),Bh(n)}function Mx(n,t){t.destroy(),t.off(Z1),Bh(n)}function Px(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function Vx(n,t,e){}function kx(n,t,e,i){kv(n,i,e)}function Lx(n){n.hide(),Bh(n)}function Ux(n){}function zx(n,t){(t.visible==null||t.visible)&&n.show()}function Bx(n,t){}function Gx(n){}function qx(){}function Hx(){return null}function jx(){}function Fx(){}function Kx(){return Vv.DefaultEventPriority}function Yx(){}function Qx(){return null}function Xx(n){mw=n}function Jx(){return mw}function Wx(){return Vv.DiscreteEventPriority}function Zx(){return!1}function $x(){}function tO(){return null}function eO(){return-1.1}function nO(){}function iO(){return!1}function sO(){return!0}function aO(){}function rO(){}function oO(){return null}const lO=null,uO=Ki.createContext(null);function cO(){}const hO=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:uO,NotPendingTransition:lO,afterActiveInstanceBlur:Fx,appendChild:Nx,appendChildToContainer:Dx,appendInitialChild:ax,beforeActiveInstanceBlur:jx,cancelTimeout:vx,clearContainer:Gx,commitMount:Vx,commitTextUpdate:Px,commitUpdate:kx,createInstance:rx,createTextInstance:ox,detachDeletedInstance:qx,finalizeInitialChildren:lx,getChildHostContext:_x,getCurrentEventPriority:Kx,getCurrentUpdatePriority:Jx,getInstanceFromNode:Hx,getInstanceFromScope:Qx,getPublicInstance:ux,getRootHostContext:gx,hideInstance:Lx,hideTextInstance:Ux,idlePriority:bE.unstable_IdlePriority,insertBefore:pw,insertInContainerBefore:xx,isPrimaryRenderer:Ax,maySuspendCommit:iO,noTimeout:Sx,now:bE.unstable_now,preloadInstance:sO,prepareForCommit:cx,preparePortalMount:hx,prepareScopeUpdate:Yx,prepareUpdate:fx,removeChild:Ox,removeChildFromContainer:Mx,requestPostPaintCallback:nO,resetAfterCommit:dx,resetFormInstance:cO,resetTextContent:mx,resolveEventTimeStamp:eO,resolveEventType:tO,resolveUpdatePriority:Wx,run:bE.unstable_runWithPriority,scheduleMicrotask:Tx,scheduleTimeout:yx,setCurrentUpdatePriority:Xx,shouldAttemptEagerTransition:Zx,shouldDeprioritizeSubtree:px,shouldSetTextContent:bx,startSuspendingCommit:aO,supportsHydration:Ix,supportsMicrotasks:Ex,supportsMutation:Rx,supportsPersistence:Cx,suspendInstance:rO,trackSchedulerEvent:$x,unhideInstance:zx,unhideTextInstance:Bx,waitForCommitToBeReady:oO,warnsIfNotActing:wx},Symbol.toStringTag,{value:"Module"}));function gw(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=gw(i,t,e);if(s)return s;i=i.sibling}}function _w(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const hS=_w(ce.createContext(null));class yw extends ce.Component{render(){return ce.createElement(hS.Provider,{value:this._reactInternals},this.props.children)}}function fO(){const n=ce.useContext(hS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ce.useId();return ce.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=gw(e,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[n,t])}const dO=Symbol.for("react.context"),mO=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===dO;function pO(){const n=fO(),[t]=ce.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;mO(i)&&i!==hS&&!t.has(i)&&t.set(i,ce.use(_w(i))),e=e.return}return t}function gO(){const n=pO();return ce.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>ce.createElement(t,null,ce.createElement(e.Provider,{...i,value:n.get(e)})),t=>ce.createElement(yw,{...t})),[n])}if(Ki.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function _O(n){const t=Ki.useRef({});return Ki.useLayoutEffect(()=>{t.current=n}),Ki.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const yO=()=>{const n=Ki.useRef(0);return Ki.useMemo(()=>{n.current++},[]),n.current>1},vO=n=>{const t=Ki.useRef(null),e=Ki.useRef(null),i=Ki.useRef(null),s=_O(n),o=gO(),c=Ki.useRef(null),f=E=>{const{forwardedRef:b}=n;b&&(typeof b=="function"?b(E):b.current=E)},m=yO(),g=()=>{f(null),u0.updateContainer(null,i.current,null),e.current?.destroy(),e.current=null};return Ki.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),e.current?f(e.current):(e.current=new np.Stage({width:n.width,height:n.height,container:t.current}),f(e.current),i.current=u0.createContainer(e.current,Vv.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),u0.updateContainer(Ki.createElement(o,{},n.children),i.current,null,()=>{})),()=>{m?c.current=setTimeout(g,0):g()}),[]),Ki.useLayoutEffect(()=>{f(e.current),kv(e.current,n,s),u0.flushSyncFromReconciler(()=>{u0.updateContainer(Ki.createElement(o,{},n.children),i.current,null)})}),Ki.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},EO="Layer",TO="Group",SO="Rect",AE="Circle",bO="Line",mT="Image",jA="Text",u0=ZD(hO),AO=Ki.forwardRef((n,t)=>Ki.createElement(yw,{},Ki.createElement(vO,{...n,forwardedRef:t})));const vw=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const wO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const RO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const FA=n=>{const t=RO(n);return t.charAt(0).toUpperCase()+t.slice(1)};var CO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IO=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const NO=ce.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...f},m)=>ce.createElement("svg",{ref:m,...CO,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:vw("lucide",s),...!o&&!IO(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,E])=>ce.createElement(g,E)),...Array.isArray(o)?o:[o]]));const go=(n,t)=>{const e=ce.forwardRef(({className:i,...s},o)=>ce.createElement(NO,{ref:o,iconNode:t,className:vw(`lucide-${wO(FA(n))}`,`lucide-${n}`,i),...s}));return e.displayName=FA(n),e};const DO=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],xO=go("eraser",DO);const OO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],KA=go("folder-open",OO);const MO=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],PO=go("mouse-pointer-2",MO);const VO=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],kO=go("pause",VO);const LO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],UO=go("pencil",LO);const zO=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],BO=go("play",zO);const GO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qO=go("plus",GO);const HO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YA=go("save",HO);const jO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wE=go("trash-2",jO);const FO=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],KO=go("undo",FO);const YO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],QA=go("user-plus",YO);const QO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],XA=go("x",QO),XO=()=>{};var JA={};const Ew=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},JO=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[e++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[e++],c=n[e++],f=n[e++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return t.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,E=o>>2,b=(o&3)<<4|f>>4;let A=(f&15)<<2|g>>6,N=g&63;m||(N=64,c||(A=64)),i.push(e[E],e[b],e[A],e[N])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Ew(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):JO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=e[n.charAt(s++)],f=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const b=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||f==null||g==null||b==null)throw new WO;const A=o<<2|f>>4;if(i.push(A),g!==64){const N=f<<4&240|g>>2;if(i.push(N),b!==64){const D=g<<6&192|b;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZO=function(n){const t=Ew(n);return Tw.encodeByteArray(t,!0)},$1=function(n){return ZO(n).replace(/\./g,"")},fS=function(n){try{return Tw.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tv(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!$O(e)||(n[e]=tv(n[e],t[e]));return n}function $O(n){return n!=="__proto__"}function dS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tM=()=>dS().__FIREBASE_DEFAULTS__,eM=()=>{if(typeof process>"u"||typeof JA>"u")return;const n=JA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&fS(n[1]);return t&&JSON.parse(t)},mS=()=>{try{return XO()||tM()||eM()||nM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pS=()=>mS()?.config,iM=n=>mS()?.[`_${n}`];class sM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function tu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lv(n){return(await fetch(n,{credentials:"include"})).ok}function Sw(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$1(JSON.stringify(e)),$1(JSON.stringify(c)),""].join(".")}const L0={};function aM(){const n={prod:[],emulator:[]};for(const t of Object.keys(L0))L0[t]?n.emulator.push(t):n.prod.push(t);return n}function rM(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let WA=!1;function Uv(n,t){if(typeof window>"u"||typeof document>"u"||!tu(window.location.host)||L0[n]===t||L0[n]||WA)return;L0[n]=t;function e(A){return`__firebase__banner__${A}`}const i="__firebase__banner",o=aM().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,N){A.setAttribute("width","24"),A.setAttribute("id",N),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{WA=!0,c()},A}function E(A,N){A.setAttribute("id",N),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=rM(i),N=e("text"),D=document.getElementById(N)||document.createElement("span"),V=e("learnmore"),U=document.getElementById(V)||document.createElement("a"),H=e("preprendIcon"),Y=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;f(X),E(U,V);const Z=g();m(Y,H),X.append(Y,D,U,Z),document.body.appendChild(X)}o?(D.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function ni(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ni())}function zv(){const n=mS()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lM(){return typeof window<"u"||bw()}function bw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function uM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Aw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ww(){const n=ni();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Rw(){return!zv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cw(){return!zv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function nd(){try{return typeof indexedDB=="object"}catch{return!1}}function cM(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}function hM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const fM="FirebaseError";class ki extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=fM,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],c=o?dM(o,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new ki(s,f,i)}}function dM(n,t){return n.replace(mM,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const mM=/\{\$([^}]+)}/g;function ZA(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function pM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Rh(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const o=n[s],c=t[s];if($A(o)&&$A(c)){if(!Rh(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function $A(n){return n!==null&&typeof n=="object"}function Ip(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Fm(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function R0(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function Iw(n,t){const e=new gM(n,t);return e.subscribe.bind(e)}class gM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");_M(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=RE),s.error===void 0&&(s.error=RE),s.complete===void 0&&(s.complete=RE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _M(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function RE(){}function jt(n){return n&&n._delegate?n._delegate:n}class Li{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Uf="[DEFAULT]";class yM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new sM;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(EM(t))try{this.getOrInitializeService({instanceIdentifier:Uf})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=Uf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Uf){return this.instances.has(t)}getOptions(t=Uf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);i===f&&c.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Uf){return this.component?this.component.multipleInstances?t:Uf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vM(n){return n===Uf?void 0:n}function EM(n){return n.instantiationMode==="EAGER"}class Nw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new yM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const _S=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const Dw={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},TM=Me.INFO,SM={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},bM=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=SM[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bv{constructor(t){this.name=t,this._logLevel=TM,this._logHandler=bM,this._userLogHandler=null,_S.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Dw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...t),this._logHandler(this,Me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...t),this._logHandler(this,Me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...t),this._logHandler(this,Me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...t),this._logHandler(this,Me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...t),this._logHandler(this,Me.ERROR,...t)}}function AM(n){_S.forEach(t=>{t.setLogLevel(n)})}function wM(n,t){for(const e of _S){let i=null;t&&t.level&&(i=Dw[t.level]),n===null?e.userLogHandler=null:e.userLogHandler=(s,o,...c)=>{const f=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");o>=(i??s.logLevel)&&n({level:Me[o].toLowerCase(),message:f,args:c,type:s.name})}}}const RM=(n,t)=>t.some(e=>n instanceof e);let t3,e3;function CM(){return t3||(t3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IM(){return e3||(e3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xw=new WeakMap,pT=new WeakMap,Ow=new WeakMap,CE=new WeakMap,yS=new WeakMap;function NM(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Fu(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&xw.set(e,n)}).catch(()=>{}),yS.set(t,n),t}function DM(n){if(pT.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});pT.set(n,t)}let gT={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return pT.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ow.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fu(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function xM(n){gT=n(gT)}function OM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(IE(this),t,...e);return Ow.set(i,t.sort?t.sort():[t]),Fu(i)}:IM().includes(n)?function(...t){return n.apply(IE(this),t),Fu(xw.get(this))}:function(...t){return Fu(n.apply(IE(this),t))}}function MM(n){return typeof n=="function"?OM(n):(n instanceof IDBTransaction&&DM(n),RM(n,CM())?new Proxy(n,gT):n)}function Fu(n){if(n instanceof IDBRequest)return NM(n);if(CE.has(n))return CE.get(n);const t=MM(n);return t!==n&&(CE.set(n,t),yS.set(t,n)),t}const IE=n=>yS.get(n);function Np(n,t,{blocked:e,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(n,t),f=Fu(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Fu(c.result),m.oldVersion,m.newVersion,Fu(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}function Km(n,{blocked:t}={}){const e=indexedDB.deleteDatabase(n);return t&&e.addEventListener("blocked",i=>t(i.oldVersion,i)),Fu(e).then(()=>{})}const PM=["get","getKey","getAll","getAllKeys","count"],VM=["put","add","delete","clear"],NE=new Map;function n3(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(NE.get(t))return NE.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=VM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||PM.includes(e)))return;const o=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),s&&m.done]))[0]};return NE.set(t,o),o}xM(n=>({...n,get:(t,e,i)=>n3(t,e)||n.get(t,e,i),has:(t,e)=>!!n3(t,e)||n.has(t,e)}));class kM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(LM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function LM(n){return n.getComponent()?.type==="VERSION"}const ev="@firebase/app",_T="0.14.8";const Qu=new Bv("@firebase/app"),UM="@firebase/app-compat",zM="@firebase/analytics-compat",BM="@firebase/analytics",GM="@firebase/app-check-compat",qM="@firebase/app-check",HM="@firebase/auth",jM="@firebase/auth-compat",FM="@firebase/database",KM="@firebase/data-connect",YM="@firebase/database-compat",QM="@firebase/functions",XM="@firebase/functions-compat",JM="@firebase/installations",WM="@firebase/installations-compat",ZM="@firebase/messaging",$M="@firebase/messaging-compat",tP="@firebase/performance",eP="@firebase/performance-compat",nP="@firebase/remote-config",iP="@firebase/remote-config-compat",sP="@firebase/storage",aP="@firebase/storage-compat",rP="@firebase/firestore",oP="@firebase/ai",lP="@firebase/firestore-compat",uP="firebase",cP="12.9.0";const Ch="[DEFAULT]",hP={[ev]:"fire-core",[UM]:"fire-core-compat",[BM]:"fire-analytics",[zM]:"fire-analytics-compat",[qM]:"fire-app-check",[GM]:"fire-app-check-compat",[HM]:"fire-auth",[jM]:"fire-auth-compat",[FM]:"fire-rtdb",[KM]:"fire-data-connect",[YM]:"fire-rtdb-compat",[QM]:"fire-fn",[XM]:"fire-fn-compat",[JM]:"fire-iid",[WM]:"fire-iid-compat",[ZM]:"fire-fcm",[$M]:"fire-fcm-compat",[tP]:"fire-perf",[eP]:"fire-perf-compat",[nP]:"fire-rc",[iP]:"fire-rc-compat",[sP]:"fire-gcs",[aP]:"fire-gcs-compat",[rP]:"fire-fst",[lP]:"fire-fst-compat",[oP]:"fire-vertex","fire-js":"fire-js",[uP]:"fire-js-all"};const Ih=new Map,ip=new Map,sp=new Map;function t_(n,t){try{n.container.addComponent(t)}catch(e){Qu.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Mw(n,t){n.container.addOrOverwriteComponent(t)}function _a(n){const t=n.name;if(sp.has(t))return Qu.debug(`There were multiple attempts to register component ${t}.`),!1;sp.set(t,n);for(const e of Ih.values())t_(e,n);for(const e of ip.values())t_(e,n);return!0}function Gv(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function fP(n,t,e=Ch){Gv(n,t).clearInstance(e)}function vS(n){return n.options!==void 0}function Pw(n){return vS(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function An(n){return n==null?!1:n.settings!==void 0}function dP(){sp.clear()}const mP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new eu("app","Firebase",mP);let Vw=class{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}};function i3(n,t){const e=fS(n.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(e).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class pP extends Vw{constructor(t,e,i,s){const o=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,c={name:i,automaticDataCollectionEnabled:o};if(t.apiKey!==void 0)super(t,c,s);else{const f=t;super(f.options,c,s)}this._serverConfig={automaticDataCollectionEnabled:o,...e},this._serverConfig.authIdToken&&i3(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&i3(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Yi(ev,_T,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){TS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw wr.create("server-app-deleted")}}const ec=cP;function ES(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Ch,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw wr.create("bad-app-name",{appName:String(s)});if(e||(e=pS()),!e)throw wr.create("no-options");const o=Ih.get(s);if(o){if(Rh(e,o.options)&&Rh(i,o.config))return o;throw wr.create("duplicate-app",{appName:s})}const c=new Nw(s);for(const m of sp.values())c.addComponent(m);const f=new Vw(e,i,c);return Ih.set(s,f),f}function gP(n,t={}){if(lM()&&!bw())throw wr.create("invalid-server-app-environment");let e,i=t||{};if(n&&(vS(n)?e=n.options:Pw(n)?i=n:e=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),e||(e=pS()),!e)throw wr.create("no-options");const s={...i,...e};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const o=E=>[...E].reduce((b,A)=>Math.imul(31,b)+A.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw wr.create("finalization-registry-not-supported",{});const c=""+o(JSON.stringify(s)),f=ip.get(c);if(f)return f.incRefCount(i.releaseOnDeref),f;const m=new Nw(c);for(const E of sp.values())m.addComponent(E);const g=new pP(e,i,c,m);return ip.set(c,g),g}function _P(n=Ch){const t=Ih.get(n);if(!t&&n===Ch&&pS())return ES();if(!t)throw wr.create("no-app",{appName:n});return t}function yP(){return Array.from(Ih.values())}async function TS(n){let t=!1;const e=n.name;Ih.has(e)?(t=!0,Ih.delete(e)):ip.has(e)&&n.decRefCount()<=0&&(ip.delete(e),t=!0),t&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Yi(n,t,e){let i=hP[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${t}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qu.warn(c.join(" "));return}_a(new Li(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function kw(n,t){if(n!==null&&typeof n!="function")throw wr.create("invalid-log-argument");wM(n,t)}function Lw(n){AM(n)}const vP="firebase-heartbeat-database",EP=1,e_="firebase-heartbeat-store";let DE=null;function Uw(){return DE||(DE=Np(vP,EP,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(e_)}catch(e){console.warn(e)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),DE}async function TP(n){try{const e=(await Uw()).transaction(e_),i=await e.objectStore(e_).get(zw(n));return await e.done,i}catch(t){if(t instanceof ki)Qu.warn(t.message);else{const e=wr.create("idb-get",{originalErrorMessage:t?.message});Qu.warn(e.message)}}}async function s3(n,t){try{const i=(await Uw()).transaction(e_,"readwrite");await i.objectStore(e_).put(t,zw(n)),await i.done}catch(e){if(e instanceof ki)Qu.warn(e.message);else{const i=wr.create("idb-set",{originalErrorMessage:e?.message});Qu.warn(i.message)}}}function zw(n){return`${n.name}!${n.options.appId}`}const SP=1024,bP=30;class AP{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new RP(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=a3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>bP){const s=CP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qu.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=a3(),{heartbeatsToSend:e,unsentEntries:i}=wP(this._heartbeatsCache.heartbeats),s=$1(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Qu.warn(t),""}}}function a3(){return new Date().toISOString().substring(0,10)}function wP(n,t=SP){const e=[];let i=n.slice();for(const s of n){const o=e.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),r3(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),r3(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class RP{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nd()?cM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await TP(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function r3(n){return $1(JSON.stringify({version:2,heartbeats:n})).length}function CP(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function IP(n){_a(new Li("platform-logger",t=>new kM(t),"PRIVATE")),_a(new Li("heartbeat",t=>new AP(t),"PRIVATE")),Yi(ev,_T,n),Yi(ev,_T,"esm2020"),Yi("fire-js","")}IP("");const NP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ki,SDK_VERSION:ec,_DEFAULT_ENTRY_NAME:Ch,_addComponent:t_,_addOrOverwriteComponent:Mw,_apps:Ih,_clearComponents:dP,_components:sp,_getProvider:Gv,_isFirebaseApp:vS,_isFirebaseServerApp:An,_isFirebaseServerAppSettings:Pw,_registerComponent:_a,_removeServiceInstance:fP,_serverApps:ip,deleteApp:TS,getApp:_P,getApps:yP,initializeApp:ES,initializeServerApp:gP,onLog:kw,registerVersion:Yi,setLogLevel:Lw},Symbol.toStringTag,{value:"Module"}));var o3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sh,Bw;(function(){var n;function t(k,M){function L(){}L.prototype=M.prototype,k.F=M.prototype,k.prototype=new L,k.prototype.constructor=k,k.D=function(j,G,F){for(var z=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)z[Ht-2]=arguments[Ht];return M.prototype[G].apply(j,z)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,M,L){L||(L=0);const j=Array(16);if(typeof M=="string")for(var G=0;G<16;++G)j[G]=M.charCodeAt(L++)|M.charCodeAt(L++)<<8|M.charCodeAt(L++)<<16|M.charCodeAt(L++)<<24;else for(G=0;G<16;++G)j[G]=M[L++]|M[L++]<<8|M[L++]<<16|M[L++]<<24;M=k.g[0],L=k.g[1],G=k.g[2];let F=k.g[3],z;z=M+(F^L&(G^F))+j[0]+3614090360&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+j[1]+3905402710&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+j[2]+606105819&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+j[3]+3250441966&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(F^L&(G^F))+j[4]+4118548399&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+j[5]+1200080426&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+j[6]+2821735955&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+j[7]+4249261313&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(F^L&(G^F))+j[8]+1770035416&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+j[9]+2336552879&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+j[10]+4294925233&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+j[11]+2304563134&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(F^L&(G^F))+j[12]+1804603682&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+j[13]+4254626195&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+j[14]+2792965006&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+j[15]+1236535329&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(G^F&(L^G))+j[1]+4129170786&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+j[6]+3225465664&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+j[11]+643717713&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+j[0]+3921069994&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^F&(L^G))+j[5]+3593408605&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+j[10]+38016083&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+j[15]+3634488961&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+j[4]+3889429448&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^F&(L^G))+j[9]+568446438&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+j[14]+3275163606&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+j[3]+4107603335&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+j[8]+1163531501&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^F&(L^G))+j[13]+2850285829&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+j[2]+4243563512&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+j[7]+1735328473&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+j[12]+2368359562&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(L^G^F)+j[5]+4294588738&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+j[8]+2272392833&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+j[11]+1839030562&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+j[14]+4259657740&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^F)+j[1]+2763975236&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+j[4]+1272893353&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+j[7]+4139469664&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+j[10]+3200236656&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^F)+j[13]+681279174&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+j[0]+3936430074&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+j[3]+3572445317&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+j[6]+76029189&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^F)+j[9]+3654602809&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+j[12]+3873151461&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+j[15]+530742520&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+j[2]+3299628645&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(G^(L|~F))+j[0]+4096336452&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+j[7]+1126891415&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+j[14]+2878612391&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+j[5]+4237533241&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~F))+j[12]+1700485571&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+j[3]+2399980690&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+j[10]+4293915773&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+j[1]+2240044497&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~F))+j[8]+1873313359&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+j[15]+4264355552&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+j[6]+2734768916&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+j[13]+1309151649&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~F))+j[4]+4149444226&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+j[11]+3174756917&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+j[2]+718787259&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(G+(z<<21&4294967295|z>>>11))&4294967295,k.g[2]=k.g[2]+G&4294967295,k.g[3]=k.g[3]+F&4294967295}i.prototype.v=function(k,M){M===void 0&&(M=k.length);const L=M-this.blockSize,j=this.C;let G=this.h,F=0;for(;F<M;){if(G==0)for(;F<=L;)s(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<M;)if(j[G++]=k.charCodeAt(F++),G==this.blockSize){s(this,j),G=0;break}}else for(;F<M;)if(j[G++]=k[F++],G==this.blockSize){s(this,j),G=0;break}}this.h=G,this.o+=M},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;M=this.o*8;for(var L=k.length-8;L<k.length;++L)k[L]=M&255,M/=256;for(this.v(k),k=Array(16),M=0,L=0;L<4;++L)for(let j=0;j<32;j+=8)k[M++]=this.g[L]>>>j&255;return k};function o(k,M){var L=f;return Object.prototype.hasOwnProperty.call(L,k)?L[k]:L[k]=M(k)}function c(k,M){this.h=M;const L=[];let j=!0;for(let G=k.length-1;G>=0;G--){const F=k[G]|0;j&&F==M||(L[G]=F,j=!1)}this.g=L}var f={};function m(k){return-128<=k&&k<128?o(k,function(M){return new c([M|0],M<0?-1:0)}):new c([k|0],k<0?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return b;if(k<0)return U(g(-k));const M=[];let L=1;for(let j=0;k>=L;j++)M[j]=k/L|0,L*=4294967296;return new c(M,0)}function E(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return U(E(k.substring(1),M));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=g(Math.pow(M,8));let j=b;for(let F=0;F<k.length;F+=8){var G=Math.min(8,k.length-F);const z=parseInt(k.substring(F,F+G),M);G<8?(G=g(Math.pow(M,G)),j=j.j(G).add(g(z))):(j=j.j(L),j=j.add(g(z)))}return j}var b=m(0),A=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(V(this))return-U(this).m();let k=0,M=1;for(let L=0;L<this.g.length;L++){const j=this.i(L);k+=(j>=0?j:4294967296+j)*M,M*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(D(this))return"0";if(V(this))return"-"+U(this).toString(k);const M=g(Math.pow(k,6));var L=this;let j="";for(;;){const G=Z(L,M).g;L=H(L,G.j(M));let F=((L.g.length>0?L.g[0]:L.h)>>>0).toString(k);if(L=G,D(L))return F+j;for(;F.length<6;)F="0"+F;j=F+j}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function D(k){if(k.h!=0)return!1;for(let M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function V(k){return k.h==-1}n.l=function(k){return k=H(this,k),V(k)?-1:D(k)?0:1};function U(k){const M=k.g.length,L=[];for(let j=0;j<M;j++)L[j]=~k.g[j];return new c(L,~k.h).add(A)}n.abs=function(){return V(this)?U(this):this},n.add=function(k){const M=Math.max(this.g.length,k.g.length),L=[];let j=0;for(let G=0;G<=M;G++){let F=j+(this.i(G)&65535)+(k.i(G)&65535),z=(F>>>16)+(this.i(G)>>>16)+(k.i(G)>>>16);j=z>>>16,F&=65535,z&=65535,L[G]=z<<16|F}return new c(L,L[L.length-1]&-2147483648?-1:0)};function H(k,M){return k.add(U(M))}n.j=function(k){if(D(this)||D(k))return b;if(V(this))return V(k)?U(this).j(U(k)):U(U(this).j(k));if(V(k))return U(this.j(U(k)));if(this.l(N)<0&&k.l(N)<0)return g(this.m()*k.m());const M=this.g.length+k.g.length,L=[];for(var j=0;j<2*M;j++)L[j]=0;for(j=0;j<this.g.length;j++)for(let G=0;G<k.g.length;G++){const F=this.i(j)>>>16,z=this.i(j)&65535,Ht=k.i(G)>>>16,Lt=k.i(G)&65535;L[2*j+2*G]+=z*Lt,Y(L,2*j+2*G),L[2*j+2*G+1]+=F*Lt,Y(L,2*j+2*G+1),L[2*j+2*G+1]+=z*Ht,Y(L,2*j+2*G+1),L[2*j+2*G+2]+=F*Ht,Y(L,2*j+2*G+2)}for(k=0;k<M;k++)L[k]=L[2*k+1]<<16|L[2*k];for(k=M;k<2*M;k++)L[k]=0;return new c(L,0)};function Y(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function X(k,M){this.g=k,this.h=M}function Z(k,M){if(D(M))throw Error("division by zero");if(D(k))return new X(b,b);if(V(k))return M=Z(U(k),M),new X(U(M.g),U(M.h));if(V(M))return M=Z(k,U(M)),new X(U(M.g),M.h);if(k.g.length>30){if(V(k)||V(M))throw Error("slowDivide_ only works with positive integers.");for(var L=A,j=M;j.l(k)<=0;)L=pt(L),j=pt(j);var G=lt(L,1),F=lt(j,1);for(j=lt(j,2),L=lt(L,2);!D(j);){var z=F.add(j);z.l(k)<=0&&(G=G.add(L),F=z),j=lt(j,1),L=lt(L,1)}return M=H(k,G.j(M)),new X(G,M)}for(G=b;k.l(M)>=0;){for(L=Math.max(1,Math.floor(k.m()/M.m())),j=Math.ceil(Math.log(L)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),F=g(L),z=F.j(M);V(z)||z.l(k)>0;)L-=j,F=g(L),z=F.j(M);D(F)&&(F=A),G=G.add(F),k=H(k,z)}return new X(G,k)}n.B=function(k){return Z(this,k).h},n.and=function(k){const M=Math.max(this.g.length,k.g.length),L=[];for(let j=0;j<M;j++)L[j]=this.i(j)&k.i(j);return new c(L,this.h&k.h)},n.or=function(k){const M=Math.max(this.g.length,k.g.length),L=[];for(let j=0;j<M;j++)L[j]=this.i(j)|k.i(j);return new c(L,this.h|k.h)},n.xor=function(k){const M=Math.max(this.g.length,k.g.length),L=[];for(let j=0;j<M;j++)L[j]=this.i(j)^k.i(j);return new c(L,this.h^k.h)};function pt(k){const M=k.g.length+1,L=[];for(let j=0;j<M;j++)L[j]=k.i(j)<<1|k.i(j-1)>>>31;return new c(L,k.h)}function lt(k,M){const L=M>>5;M%=32;const j=k.g.length-L,G=[];for(let F=0;F<j;F++)G[F]=M>0?k.i(F+L)>>>M|k.i(F+L+1)<<32-M:k.i(F+L);return new c(G,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Bw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=E,Sh=c}).apply(typeof o3<"u"?o3:typeof self<"u"?self:typeof window<"u"?window:{});var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gw,C0,qw,k1,yT,Hw,jw,Fw;(function(){var n,t=Object.defineProperty;function e(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof b1=="object"&&b1];for(var R=0;R<_.length;++R){var I=_[R];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=e(this);function s(_,R){if(R)t:{var I=i;_=_.split(".");for(var P=0;P<_.length-1;P++){var $=_[P];if(!($ in I))break t;I=I[$]}_=_[_.length-1],P=I[_],R=R(P),R!=P&&R!=null&&t(I,_,{configurable:!0,writable:!0,value:R})}}s("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(_){return _||function(R){var I=[],P;for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&I.push([P,R[P]]);return I}});var o=o||{},c=this||self;function f(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function m(_,R,I){return _.call.apply(_.bind,arguments)}function g(_,R,I){return g=m,g.apply(null,arguments)}function E(_,R){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),_.apply(this,P)}}function b(_,R){function I(){}I.prototype=R.prototype,_.Z=R.prototype,_.prototype=new I,_.prototype.constructor=_,_.Ob=function(P,$,ut){for(var Pt=Array(arguments.length-2),le=2;le<arguments.length;le++)Pt[le-2]=arguments[le];return R.prototype[$].apply(P,Pt)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function N(_){const R=_.length;if(R>0){const I=Array(R);for(let P=0;P<R;P++)I[P]=_[P];return I}return[]}function D(_,R){for(let P=1;P<arguments.length;P++){const $=arguments[P];var I=typeof $;if(I=I!="object"?I:$?Array.isArray($)?"array":I:"null",I=="array"||I=="object"&&typeof $.length=="number"){I=_.length||0;const ut=$.length||0;_.length=I+ut;for(let Pt=0;Pt<ut;Pt++)_[I+Pt]=$[Pt]}else _.push($)}}class V{constructor(R,I){this.i=R,this.j=I,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function U(_){c.setTimeout(()=>{throw _},0)}function H(){var _=k;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class Y{constructor(){this.h=this.g=null}add(R,I){const P=X.get();P.set(R,I),this.h?this.h.next=P:this.g=P,this.h=P}}var X=new V(()=>new Z,_=>_.reset());class Z{constructor(){this.next=this.g=this.h=null}set(R,I){this.h=R,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,lt=!1,k=new Y,M=()=>{const _=Promise.resolve(void 0);pt=()=>{_.then(L)}};function L(){for(var _;_=H();){try{_.h.call(_.g)}catch(I){U(I)}var R=X;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}lt=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const I=()=>{};c.addEventListener("test",I,R),c.removeEventListener("test",I,R)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function Ht(_,R){G.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}b(Ht,G),Ht.prototype.init=function(_,R){const I=this.type=_.type,P=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(I=="mouseover"?R=_.fromElement:I=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Ht.Z.h.call(this)},Ht.prototype.h=function(){Ht.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Lt="closure_listenable_"+(Math.random()*1e6|0),W=0;function Et(_,R,I,P,$){this.listener=_,this.proxy=null,this.src=R,this.type=I,this.capture=!!P,this.ha=$,this.key=++W,this.da=this.fa=!1}function vt(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ut(_,R,I){for(const P in _)R.call(I,_[P],P,_)}function Kt(_,R){for(const I in _)R.call(void 0,_[I],I,_)}function q(_){const R={};for(const I in _)R[I]=_[I];return R}const dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nt(_,R){let I,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(I in P)_[I]=P[I];for(let ut=0;ut<dt.length;ut++)I=dt[ut],Object.prototype.hasOwnProperty.call(P,I)&&(_[I]=P[I])}}function Gt(_){this.src=_,this.g={},this.h=0}Gt.prototype.add=function(_,R,I,P,$){const ut=_.toString();_=this.g[ut],_||(_=this.g[ut]=[],this.h++);const Pt=ie(_,R,P,$);return Pt>-1?(R=_[Pt],I||(R.fa=!1)):(R=new Et(R,this.src,ut,!!P,$),R.fa=I,_.push(R)),R};function ee(_,R){const I=R.type;if(I in _.g){var P=_.g[I],$=Array.prototype.indexOf.call(P,R,void 0),ut;(ut=$>=0)&&Array.prototype.splice.call(P,$,1),ut&&(vt(R),_.g[I].length==0&&(delete _.g[I],_.h--))}}function ie(_,R,I,P){for(let $=0;$<_.length;++$){const ut=_[$];if(!ut.da&&ut.listener==R&&ut.capture==!!I&&ut.ha==P)return $}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),mn={};function Ne(_,R,I,P,$){if(Array.isArray(R)){for(let ut=0;ut<R.length;ut++)Ne(_,R[ut],I,P,$);return null}return I=er(I),_&&_[Lt]?_.J(R,I,f(P)?!!P.capture:!1,$):$a(_,R,I,!1,P,$)}function $a(_,R,I,P,$,ut){if(!R)throw Error("Invalid event type");const Pt=f($)?!!$.capture:!!$;let le=Wi(_);if(le||(_[Te]=le=new Gt(_)),I=le.add(R,I,P,Pt,ut),I.proxy)return I;if(P=yo(),I.proxy=P,P.src=_,P.listener=I,_.addEventListener)F||($=Pt),$===void 0&&($=!1),_.addEventListener(R.toString(),P,$);else if(_.attachEvent)_.attachEvent(Rs(R.toString()),P);else if(_.addListener&&_.removeListener)_.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return I}function yo(){function _(I){return R.call(_.src,_.listener,I)}const R=tr;return _}function Qs(_,R,I,P,$){if(Array.isArray(R))for(var ut=0;ut<R.length;ut++)Qs(_,R[ut],I,P,$);else P=f(P)?!!P.capture:!!P,I=er(I),_&&_[Lt]?(_=_.i,ut=String(R).toString(),ut in _.g&&(R=_.g[ut],I=ie(R,I,P,$),I>-1&&(vt(R[I]),Array.prototype.splice.call(R,I,1),R.length==0&&(delete _.g[ut],_.h--)))):_&&(_=Wi(_))&&(R=_.g[R.toString()],_=-1,R&&(_=ie(R,I,P,$)),(I=_>-1?R[_]:null)&&ws(I))}function ws(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Lt])ee(R.i,_);else{var I=_.type,P=_.proxy;R.removeEventListener?R.removeEventListener(I,P,_.capture):R.detachEvent?R.detachEvent(Rs(I),P):R.addListener&&R.removeListener&&R.removeListener(P),(I=Wi(R))?(ee(I,_),I.h==0&&(I.src=null,R[Te]=null)):vt(_)}}}function Rs(_){return _ in mn?mn[_]:mn[_]="on"+_}function tr(_,R){if(_.da)_=!0;else{R=new Ht(R,this);const I=_.listener,P=_.ha||_.src;_.fa&&ws(_),_=I.call(P,R)}return _}function Wi(_){return _=_[Te],_ instanceof Gt?_:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function er(_){return typeof _=="function"?_:(_[Zi]||(_[Zi]=function(R){return _.handleEvent(R)}),_[Zi])}function Ke(){j.call(this),this.i=new Gt(this),this.M=this,this.G=null}b(Ke,j),Ke.prototype[Lt]=!0,Ke.prototype.removeEventListener=function(_,R,I,P){Qs(this,_,R,I,P)};function He(_,R){var I,P=_.G;if(P)for(I=[];P;P=P.G)I.push(P);if(_=_.M,P=R.type||R,typeof R=="string")R=new G(R,_);else if(R instanceof G)R.target=R.target||_;else{var $=R;R=new G(P,_),Nt(R,$)}$=!0;let ut,Pt;if(I)for(Pt=I.length-1;Pt>=0;Pt--)ut=R.g=I[Pt],$=$i(ut,P,!0,R)&&$;if(ut=R.g=_,$=$i(ut,P,!0,R)&&$,$=$i(ut,P,!1,R)&&$,I)for(Pt=0;Pt<I.length;Pt++)ut=R.g=I[Pt],$=$i(ut,P,!1,R)&&$}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const I=_.g[R];for(let P=0;P<I.length;P++)vt(I[P]);delete _.g[R],_.h--}}this.G=null},Ke.prototype.J=function(_,R,I,P){return this.i.add(String(_),R,!1,I,P)},Ke.prototype.K=function(_,R,I,P){return this.i.add(String(_),R,!0,I,P)};function $i(_,R,I,P){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let $=!0;for(let ut=0;ut<R.length;++ut){const Pt=R[ut];if(Pt&&!Pt.da&&Pt.capture==I){const le=Pt.listener,Bn=Pt.ha||Pt.src;Pt.fa&&ee(_.i,Pt),$=le.call(Bn,P)!==!1&&$}}return $&&!P.defaultPrevented}function Cs(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=g(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(_,R||0)}function je(_){_.g=Cs(()=>{_.g=null,_.i&&(_.i=!1,je(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class St extends j{constructor(R,I){super(),this.m=R,this.l=I,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(_){j.call(this),this.h=_,this.g={}}b(Qt,j);var pe=[];function Ve(_){Ut(_.g,function(R,I){this.g.hasOwnProperty(I)&&ws(R)},_),_.g={}}Qt.prototype.N=function(){Qt.Z.N.call(this),Ve(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ui=c.JSON.stringify,va=c.JSON.parse,vo=class{stringify(_){return c.JSON.stringify(_,void 0)}parse(_){return c.JSON.parse(_,void 0)}};function Qh(){}function Xh(){}var Ea={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Si(){G.call(this,"d")}b(Si,G);function Xs(){G.call(this,"c")}b(Xs,G);var Qn={},uc=null;function cc(){return uc=uc||new Ke}Qn.Ia="serverreachability";function Jh(_){G.call(this,Qn.Ia,_)}b(Jh,G);function Cr(_){const R=cc();He(R,new Jh(R))}Qn.STAT_EVENT="statevent";function Eo(_,R){G.call(this,Qn.STAT_EVENT,_),this.stat=R}b(Eo,G);function In(_){const R=cc();He(R,new Eo(R,_))}Qn.Ja="timingevent";function nr(_,R){G.call(this,Qn.Ja,_),this.size=R}b(nr,G);function Js(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){_()},R)}function Ta(){this.g=!0}Ta.prototype.ua=function(){this.g=!1};function Od(_,R,I,P,$,ut){_.info(function(){if(_.g)if(ut){var Pt="",le=ut.split("&");for(let De=0;De<le.length;De++){var Bn=le[De].split("=");if(Bn.length>1){const pn=Bn[0];Bn=Bn[1];const cs=pn.split("_");Pt=cs.length>=2&&cs[1]=="type"?Pt+(pn+"="+Bn+"&"):Pt+(pn+"=redacted&")}}}else Pt=null;else Pt=ut;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+R+`
`+I+`
`+Pt})}function Ir(_,R,I,P,$,ut,Pt){_.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+R+`
`+I+`
`+ut+" "+Pt})}function ir(_,R,I,P){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+hc(_,I)+(P?" "+P:"")})}function $o(_,R){_.info(function(){return"TIMEOUT: "+R})}Ta.prototype.info=function(){};function hc(_,R){if(!_.g)return R;if(!R)return null;try{const ut=JSON.parse(R);if(ut){for(_=0;_<ut.length;_++)if(Array.isArray(ut[_])){var I=ut[_];if(!(I.length<2)){var P=I[1];if(Array.isArray(P)&&!(P.length<1)){var $=P[0];if($!="noop"&&$!="stop"&&$!="close")for(let Pt=1;Pt<P.length;Pt++)P[Pt]=""}}}}return Ui(ut)}catch{return R}}var sr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fc;function Nr(){}b(Nr,Qh),Nr.prototype.g=function(){return new XMLHttpRequest},fc=new Nr;function Sa(_){return encodeURIComponent(String(_))}function dc(_){var R=1;_=_.split(":");const I=[];for(;R>0&&_.length;)I.push(_.shift()),R--;return _.length&&I.push(_.join(":")),I}function zi(_,R,I,P){this.j=_,this.i=R,this.l=I,this.S=P||1,this.V=new Qt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ba}function ba(){this.i=null,this.g="",this.h=!1}var Nn={},ri={};function Aa(_,R,I){_.M=1,_.A=Jn(Xn(R)),_.u=I,_.R=!0,Ws(_,null)}function Ws(_,R){_.F=Date.now(),Is(_),_.B=Xn(_.A);var I=_.B,P=_.S;Array.isArray(P)||(P=[String(P)]),su(I.i,"t",P),_.C=0,I=_.j.L,_.h=new ba,_.g=nf(_.j,I?R:null,!_.u),_.P>0&&(_.O=new St(g(_.Y,_,_.g),_.P)),R=_.V,I=_.g,P=_.ba;var $="readystatechange";Array.isArray($)||($&&(pe[0]=$.toString()),$=pe);for(let ut=0;ut<$.length;ut++){const Pt=Ne(I,$[ut],P||R.handleEvent,!1,R.h||R);if(!Pt)break;R.g[Pt.key]=Pt}R=_.J?q(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),Cr(),Od(_.i,_.v,_.B,_.l,_.S,_.u)}zi.prototype.ba=function(_){_=_.target;const R=this.O;R&&cr(_)==3?R.j():this.Y(_)},zi.prototype.Y=function(_){try{if(_==this.g)t:{const le=cr(this.g),Bn=this.g.ya(),De=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||wi(this.g)))){this.K||le!=4||Bn==7||(Bn==8||De<=0?Cr(3):Cr(2)),ar(this);var R=this.g.ca();this.X=R;var I=Dr(this);if(this.o=R==200,Ir(this.i,this.v,this.B,this.l,this.S,le,R),this.o){if(this.U&&!this.L){e:{if(this.g){var P,$=this.g;if((P=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(P)){var ut=P;break e}}ut=null}if(_=ut)ir(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wa(this,_);else{this.o=!1,this.m=3,In(12),Ns(this),Zs(this);break t}}if(this.R){_=!0;let pn;for(;!this.K&&this.C<I.length;)if(pn=mc(this,I),pn==ri){le==4&&(this.m=4,In(14),_=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Nn){this.m=4,In(15),ir(this.i,this.l,I,"[Invalid Chunk]"),_=!1;break}else ir(this.i,this.l,pn,null),wa(this,pn);if(el(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||I.length!=0||this.h.h||(this.m=1,In(16),_=!1),this.o=this.o&&_,!_)ir(this.i,this.l,I,"[Invalid Chunked Response]"),Ns(this),Zs(this);else if(I.length>0&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.aa&&!Pt.P&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),wc(Pt),Pt.P=!0,In(11))}}else ir(this.i,this.l,I,null),wa(this,I);le==4&&Ns(this),this.o&&!this.K&&(le==4?tf(this.j,this):(this.o=!1,Is(this)))}else Lr(this.g),R==400&&I.indexOf("Unknown SID")>0?(this.m=3,In(12)):(this.m=0,In(13)),Ns(this),Zs(this)}}}catch{}};function Dr(_){if(!el(_))return _.g.la();const R=wi(_.g);if(R==="")return"";let I="";const P=R.length,$=cr(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Ns(_),Zs(_),"";_.h.i=new c.TextDecoder}for(let ut=0;ut<P;ut++)_.h.h=!0,I+=_.h.i.decode(R[ut],{stream:!($&&ut==P-1)});return R.length=0,_.h.g+=I,_.C=0,_.h.g}function el(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function mc(_,R){var I=_.C,P=R.indexOf(`
`,I);return P==-1?ri:(I=Number(R.substring(I,P)),isNaN(I)?Nn:(P+=1,P+I>R.length?ri:(R=R.slice(P,P+I),_.C=P+I,R)))}zi.prototype.cancel=function(){this.K=!0,Ns(this)};function Is(_){_.T=Date.now()+_.H,xr(_,_.H)}function xr(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=Js(g(_.aa,_),R)}function ar(_){_.D&&(c.clearTimeout(_.D),_.D=null)}zi.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?($o(this.i,this.B),this.M!=2&&(Cr(),In(17)),Ns(this),this.m=2,Zs(this)):xr(this,this.T-_)};function Zs(_){_.j.I==0||_.K||tf(_.j,_)}function Ns(_){ar(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,Ve(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function wa(_,R){try{var I=_.j;if(I.I!=0&&(I.g==_||Bi(I.h,_))){if(!_.L&&Bi(I.h,_)&&I.I==3){try{var P=I.Ba.g.parse(R)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){t:if(!I.v){if(I.g)if(I.g.F+3e3<_.F)Rc(I),Ur(I);else break t;ul(I),In(18)}}else I.xa=$[1],0<I.xa-I.K&&$[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Js(g(I.Va,I),6e3));rr(I.h)<=1&&I.ta&&(I.ta=void 0)}else Na(I,11)}else if((_.L||I.g==_)&&Rc(I),!z(R))for($=I.Ba.g.parse(R),R=0;R<$.length;R++){let De=$[R];const pn=De[0];if(!(pn<=I.K))if(I.K=pn,De=De[1],I.I==2)if(De[0]=="c"){I.M=De[1],I.ba=De[2];const cs=De[3];cs!=null&&(I.ka=cs,I.j.info("VER="+I.ka));const dr=De[4];dr!=null&&(I.za=dr,I.j.info("SVER="+I.za));const mr=De[5];mr!=null&&typeof mr=="number"&&mr>0&&(P=1.5*mr,I.O=P,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const xs=_.g;if(xs){const Ro=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var ut=P.h;ut.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(Gi(ut,ut.h),ut.h=null))}if(P.G){const hu=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;hu&&(P.wa=hu,Fe(P.J,P.G,hu))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-_.F,I.j.info("Handshake RTT: "+I.T+"ms")),P=I;var Pt=_;if(P.na=ef(P,P.L?P.ba:null,P.W),Pt.L){nl(P.h,Pt);var le=Pt,Bn=P.O;Bn&&(le.H=Bn),le.D&&(ar(le),Is(le)),P.g=Pt}else Ac(P);I.i.length>0&&fr(I)}else De[0]!="stop"&&De[0]!="close"||Na(I,7);else I.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Na(I,7):Sc(I):De[0]!="noop"&&I.l&&I.l.qa(De),I.A=0)}}Cr(4)}catch{}}var zn=class{constructor(_,R){this.g=_,this.map=R}};function Ra(_){this.l=_||10,c.PerformanceNavigationTiming?(_=c.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nu(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function rr(_){return _.h?1:_.g?_.g.size:0}function Bi(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function Gi(_,R){_.g?_.g.add(R):_.h=R}function nl(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}Ra.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function ln(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const I of _.g.values())R=R.concat(I.G);return R}return N(_.i)}var pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function il(_,R){if(_){_=_.split("&");for(let I=0;I<_.length;I++){const P=_[I].indexOf("=");let $,ut=null;P>=0?($=_[I].substring(0,P),ut=_[I].substring(P+1)):$=_[I],R($,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}function Ds(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof Ds?(this.l=_.l,bi(this,_.j),this.o=_.o,this.g=_.g,Or(this,_.u),this.h=_.h,iu(this,Zh(_.i)),this.m=_.m):_&&(R=String(_).match(pc))?(this.l=!1,bi(this,R[1]||"",!0),this.o=Ye(R[2]||""),this.g=Ye(R[3]||"",!0),Or(this,R[4]),this.h=Ye(R[5]||"",!0),iu(this,R[6]||"",!0),this.m=Ye(R[7]||"")):(this.l=!1,this.i=new Pr(null,this.l))}Ds.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Mr(R,To,!0),":");var I=this.g;return(I||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Mr(R,To,!0),"@"),_.push(Sa(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&_.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&_.push("/"),_.push(Mr(I,I.charAt(0)=="/"?$s:gc,!0))),(I=this.i.toString())&&_.push("?",I),(I=this.m)&&_.push("#",Mr(I,_c)),_.join("")},Ds.prototype.resolve=function(_){const R=Xn(this);let I=!!_.j;I?bi(R,_.j):I=!!_.o,I?R.o=_.o:I=!!_.g,I?R.g=_.g:I=_.u!=null;var P=_.h;if(I)Or(R,_.u);else if(I=!!_.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var $=R.h.lastIndexOf("/");$!=-1&&(P=R.h.slice(0,$+1)+P)}if($=P,$==".."||$==".")P="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){P=$.lastIndexOf("/",0)==0,$=$.split("/");const ut=[];for(let Pt=0;Pt<$.length;){const le=$[Pt++];le=="."?P&&Pt==$.length&&ut.push(""):le==".."?((ut.length>1||ut.length==1&&ut[0]!="")&&ut.pop(),P&&Pt==$.length&&ut.push("")):(ut.push(le),P=!0)}P=ut.join("/")}else P=$}return I?R.h=P:I=_.i.toString()!=="",I?iu(R,Zh(_.i)):I=!!_.m,I&&(R.m=_.m),R};function Xn(_){return new Ds(_)}function bi(_,R,I){_.j=I?Ye(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function Or(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function iu(_,R,I){R instanceof Pr?(_.i=R,au(_.i,_.l)):(I||(R=Mr(R,or)),_.i=new Pr(R,_.l))}function Fe(_,R,I){_.i.set(R,I)}function Jn(_){return Fe(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Ye(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Mr(_,R,I){return typeof _=="string"?(_=encodeURI(_).replace(R,Ai),I&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ai(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var To=/[#\/\?@]/g,gc=/[#\?:]/g,$s=/[#\?]/g,or=/[#\?@]/g,_c=/#/g;function Pr(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function ls(_){_.g||(_.g=new Map,_.h=0,_.i&&il(_.i,function(R,I){_.add(decodeURIComponent(R.replace(/\+/g," ")),I)}))}n=Pr.prototype,n.add=function(_,R){ls(this),this.i=null,_=Vr(this,_);let I=this.g.get(_);return I||this.g.set(_,I=[]),I.push(R),this.h+=1,this};function Wh(_,R){ls(_),R=Vr(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function yc(_,R){return ls(_),R=Vr(_,R),_.g.has(R)}n.forEach=function(_,R){ls(this),this.g.forEach(function(I,P){I.forEach(function($){_.call(R,$,P,this)},this)},this)};function vc(_,R){ls(_);let I=[];if(typeof R=="string")yc(_,R)&&(I=I.concat(_.g.get(Vr(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)I=I.concat(_[R]);return I}n.set=function(_,R){return ls(this),this.i=null,_=Vr(this,_),yc(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=vc(this,_),_.length>0?String(_[0]):R):R};function su(_,R,I){Wh(_,R),I.length>0&&(_.i=null,_.g.set(Vr(_,R),N(I)),_.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let P=0;P<R.length;P++){var I=R[P];const $=Sa(I);I=vc(this,I);for(let ut=0;ut<I.length;ut++){let Pt=$;I[ut]!==""&&(Pt+="="+Sa(I[ut])),_.push(Pt)}}return this.i=_.join("&")};function Zh(_){const R=new Pr;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function Vr(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function au(_,R){R&&!_.j&&(ls(_),_.i=null,_.g.forEach(function(I,P){const $=P.toLowerCase();P!=$&&(Wh(this,P),su(this,$,I))},_)),_.j=R}function lr(_,R){const I=new Ta;if(c.Image){const P=new Image;P.onload=E(ta,I,"TestLoadImage: loaded",!0,R,P),P.onerror=E(ta,I,"TestLoadImage: error",!1,R,P),P.onabort=E(ta,I,"TestLoadImage: abort",!1,R,P),P.ontimeout=E(ta,I,"TestLoadImage: timeout",!1,R,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=_}else R(!1)}function Ec(_,R){const I=new Ta,P=new AbortController,$=setTimeout(()=>{P.abort(),ta(I,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:P.signal}).then(ut=>{clearTimeout($),ut.ok?ta(I,"TestPingServer: ok",!0,R):ta(I,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout($),ta(I,"TestPingServer: error",!1,R)})}function ta(_,R,I,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(I)}catch{}}function So(){this.g=new vo}function Ca(_){this.i=_.Sb||null,this.h=_.ab||!1}b(Ca,Qh),Ca.prototype.g=function(){return new sl(this.i,this.h)};function sl(_,R){Ke.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(sl,Ke),n=sl.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Ia(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ru(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function ru(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?bo(this):Ia(this),this.readyState==3&&ru(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,bo(this))},n.Na=function(_){this.g&&(this.response=_,bo(this))},n.ga=function(){this.g&&bo(this)};function bo(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Ia(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var I=R.next();!I.done;)I=I.value,_.push(I[0]+": "+I[1]),I=R.next();return _.join(`\r
`)};function Ia(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function ea(_){let R="";return Ut(_,function(I,P){R+=P,R+=":",R+=I,R+=`\r
`}),R}function ou(_,R,I){t:{for(P in I){var P=!1;break t}P=!0}P||(I=ea(I),typeof _=="string"?I!=null&&Sa(I):Fe(_,R,I))}function We(_){Ke.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(We,Ke);var us=/^https?$/i,Tc=["POST","PUT"];n=We.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fc.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(ut){kr(this,ut);return}if(_=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)I.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ut of P.keys())I.set(ut,P.get(ut));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(I.keys()).find(ut=>ut.toLowerCase()=="content-type"),$=c.FormData&&_ instanceof c.FormData,!(Array.prototype.indexOf.call(Tc,R,void 0)>=0)||P||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Pt]of I)this.g.setRequestHeader(ut,Pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(ut){kr(this,ut)}};function kr(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,al(_),ur(_)}function al(_){_.A||(_.A=!0,He(_,"complete"),He(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,He(this,"complete"),He(this,"abort"),ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),We.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rl(this):this.Xa())},n.Xa=function(){rl(this)};function rl(_){if(_.h&&typeof o<"u"){if(_.v&&cr(_)==4)setTimeout(_.Ca.bind(_),0);else if(He(_,"readystatechange"),cr(_)==4){_.h=!1;try{const ut=_.ca();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var I;if(!(I=R)){var P;if(P=ut===0){let Pt=String(_.D).match(pc)[1]||null;!Pt&&c.self&&c.self.location&&(Pt=c.self.location.protocol.slice(0,-1)),P=!us.test(Pt?Pt.toLowerCase():"")}I=P}if(I)He(_,"complete"),He(_,"success");else{_.o=6;try{var $=cr(_)>2?_.g.statusText:""}catch{$=""}_.l=$+" ["+_.ca()+"]",al(_)}}finally{ur(_)}}}}function ur(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const I=_.g;_.g=null,R||He(_,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function cr(_){return _.g?_.g.readyState:0}n.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),va(R)}};function wi(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Lr(_){const R={};_=(_.g&&cr(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<_.length;P++){if(z(_[P]))continue;var I=dc(_[P]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ut=R[$]||[];R[$]=ut,ut.push(I)}Kt(R,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hr(_,R,I){return I&&I.internalChannelParams&&I.internalChannelParams[_]||R}function Ao(_){this.za=0,this.i=[],this.j=new Ta,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hr("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hr("baseRetryDelayMs",5e3,_),this.Za=hr("retryDelaySeedMs",1e4,_),this.Ta=hr("forwardChannelMaxRetries",2,_),this.va=hr("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Ra(_&&_.concurrentRequestLimit),this.Ba=new So,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ao.prototype,n.ka=8,n.I=1,n.connect=function(_,R,I,P){In(0),this.W=_,this.H=R||{},I&&P!==void 0&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.J=ef(this,null,this.W),fr(this)};function Sc(_){if(lu(_),_.I==3){var R=_.V++,I=Xn(_.J);if(Fe(I,"SID",_.M),Fe(I,"RID",R),Fe(I,"TYPE","terminate"),ll(_,I),R=new zi(_,_.j,R),R.M=2,R.A=Jn(Xn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=R.A,I=!0),I||(R.g=nf(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Is(R)}uu(_)}function Ur(_){_.g&&(wc(_),_.g.cancel(),_.g=null)}function lu(_){Ur(_),_.v&&(c.clearTimeout(_.v),_.v=null),Rc(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&c.clearTimeout(_.m),_.m=null)}function fr(_){if(!nu(_.h)&&!_.m){_.m=!0;var R=_.Ea;pt||M(),lt||(pt(),lt=!0),k.add(R,_),_.D=0}}function ol(_,R){return rr(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=Js(g(_.Ea,_,R),cl(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const $=new zi(this,this.j,_);let ut=this.o;if(this.U&&(ut?(ut=q(ut),Nt(ut,this.U)):ut=this.U),this.u!==null||this.R||($.J=ut,ut=null),this.S)t:{for(var R=0,I=0;I<this.i.length;I++){e:{var P=this.i[I];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(R+=P,R>4096){R=I;break t}if(R===4096||I===this.i.length-1){R=I+1;break t}}R=1e3}else R=1e3;R=$h(this,$,R),I=Xn(this.J),Fe(I,"RID",_),Fe(I,"CVER",22),this.G&&Fe(I,"X-HTTP-Session-Id",this.G),ll(this,I),ut&&(this.R?R="headers="+Sa(ea(ut))+"&"+R:this.u&&ou(I,this.u,ut)),Gi(this.h,$),this.Ra&&Fe(I,"TYPE","init"),this.S?(Fe(I,"$req",R),Fe(I,"SID","null"),$.U=!0,Aa($,I,null)):Aa($,I,R),this.I=2}}else this.I==3&&(_?bc(this,_):this.i.length==0||nu(this.h)||bc(this))};function bc(_,R){var I;R?I=R.l:I=_.V++;const P=Xn(_.J);Fe(P,"SID",_.M),Fe(P,"RID",I),Fe(P,"AID",_.K),ll(_,P),_.u&&_.o&&ou(P,_.u,_.o),I=new zi(_,_.j,I,_.D+1),_.u===null&&(I.J=_.o),R&&(_.i=R.G.concat(_.i)),R=$h(_,I,1e3),I.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Gi(_.h,I),Aa(I,P,R)}function ll(_,R){_.H&&Ut(_.H,function(I,P){Fe(R,P,I)}),_.l&&Ut({},function(I,P){Fe(R,P,I)})}function $h(_,R,I){I=Math.min(_.i.length,I);const P=_.l?g(_.l.Ka,_.l,_):null;t:{var $=_.i;let le=-1;for(;;){const Bn=["count="+I];le==-1?I>0?(le=$[0].g,Bn.push("ofs="+le)):le=0:Bn.push("ofs="+le);let De=!0;for(let pn=0;pn<I;pn++){var ut=$[pn].g;const cs=$[pn].map;if(ut-=le,ut<0)le=Math.max(0,$[pn].g-100),De=!1;else try{ut="req"+ut+"_"||"";try{var Pt=cs instanceof Map?cs:Object.entries(cs);for(const[dr,mr]of Pt){let xs=mr;f(mr)&&(xs=Ui(mr)),Bn.push(ut+dr+"="+encodeURIComponent(xs))}}catch(dr){throw Bn.push(ut+"type="+encodeURIComponent("_badmap")),dr}}catch{P&&P(cs)}}if(De){Pt=Bn.join("&");break t}}Pt=void 0}return _=_.i.splice(0,I),R.G=_,Pt}function Ac(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;pt||M(),lt||(pt(),lt=!0),k.add(R,_),_.A=0}}function ul(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=Js(g(_.Da,_),cl(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,Md(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=Js(g(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,In(10),Ur(this),Md(this))};function wc(_){_.B!=null&&(c.clearTimeout(_.B),_.B=null)}function Md(_){_.g=new zi(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=Xn(_.na);Fe(R,"RID","rpc"),Fe(R,"SID",_.M),Fe(R,"AID",_.K),Fe(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&Fe(R,"TO",_.ia),Fe(R,"TYPE","xmlhttp"),ll(_,R),_.u&&_.o&&ou(R,_.u,_.o),_.O&&(_.g.H=_.O);var I=_.g;_=_.ba,I.M=1,I.A=Jn(Xn(R)),I.u=null,I.R=!0,Ws(I,_)}n.Va=function(){this.C!=null&&(this.C=null,Ur(this),ul(this),In(19))};function Rc(_){_.C!=null&&(c.clearTimeout(_.C),_.C=null)}function tf(_,R){var I=null;if(_.g==R){Rc(_),wc(_),_.g=null;var P=2}else if(Bi(_.h,R))I=R.G,nl(_.h,R),P=1;else return;if(_.I!=0){if(R.o)if(P==1){I=R.u?R.u.length:0,R=Date.now()-R.F;var $=_.D;P=cc(),He(P,new nr(P,I)),fr(_)}else Ac(_);else if($=R.m,$==3||$==0&&R.X>0||!(P==1&&ol(_,R)||P==2&&ul(_)))switch(I&&I.length>0&&(R=_.h,R.i=R.i.concat(I)),$){case 1:Na(_,5);break;case 4:Na(_,10);break;case 3:Na(_,6);break;default:Na(_,2)}}}function cl(_,R){let I=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(I*=2),I*R}function Na(_,R){if(_.j.info("Error code "+R),R==2){var I=g(_.bb,_),P=_.Ua;const $=!P;P=new Ds(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bi(P,"https"),Jn(P),$?lr(P.toString(),I):Ec(P.toString(),I)}else In(2);_.I=0,_.l&&_.l.pa(R),uu(_),lu(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function uu(_){if(_.I=0,_.ja=[],_.l){const R=ln(_.h);(R.length!=0||_.i.length!=0)&&(D(_.ja,R),D(_.ja,_.i),_.h.i.length=0,N(_.i),_.i.length=0),_.l.oa()}}function ef(_,R,I){var P=I instanceof Ds?Xn(I):new Ds(I);if(P.g!="")R&&(P.g=R+"."+P.g),Or(P,P.u);else{var $=c.location;P=$.protocol,R=R?R+"."+$.hostname:$.hostname,$=+$.port;const ut=new Ds(null);P&&bi(ut,P),R&&(ut.g=R),$&&Or(ut,$),I&&(ut.h=I),P=ut}return I=_.G,R=_.wa,I&&R&&Fe(P,I,R),Fe(P,"VER",_.ka),ll(_,P),P}function nf(_,R,I){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new We(new Ca({ab:I})):new We(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}n=Cc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function wo(){}wo.prototype.g=function(_,R){return new ts(_,R)};function ts(_,R){Ke.call(this),this.g=new Ao(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!z(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!z(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new Br(this)}b(ts,Ke),ts.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ts.prototype.close=function(){Sc(this.g)},ts.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var I={};I.__data__=_,_=I}else this.v&&(I={},I.__data__=Ui(_),_=I);R.i.push(new zn(R.Ya++,_)),R.I==3&&fr(R)},ts.prototype.N=function(){this.g.l=null,delete this.j,Sc(this.g),delete this.g,ts.Z.N.call(this)};function zr(_){Si.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){t:{for(const I in R){_=I;break t}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}b(zr,Si);function cu(){Xs.call(this),this.status=1}b(cu,Xs);function Br(_){this.g=_}b(Br,Cc),Br.prototype.ra=function(){He(this.g,"a")},Br.prototype.qa=function(_){He(this.g,new zr(_))},Br.prototype.pa=function(_){He(this.g,new cu)},Br.prototype.oa=function(){He(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,ts.prototype.send=ts.prototype.o,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,Fw=function(){return new wo},jw=function(){return cc()},Hw=Qn,yT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,k1=sr,tl.COMPLETE="complete",qw=tl,Xh.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,C0=Xh,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,Gw=We}).apply(typeof b1<"u"?b1:typeof self<"u"?self:typeof window<"u"?window:{});let rs=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");let Dp="12.9.0";function DP(n){Dp=n}const Nh=new Bv("@firebase/firestore");function Um(){return Nh.logLevel}function xP(n){Nh.setLogLevel(n)}function wt(n,...t){if(Nh.logLevel<=Me.DEBUG){const e=t.map(SS);Nh.debug(`Firestore (${Dp}): ${n}`,...e)}}function vi(n,...t){if(Nh.logLevel<=Me.ERROR){const e=t.map(SS);Nh.error(`Firestore (${Dp}): ${n}`,...e)}}function Xo(n,...t){if(Nh.logLevel<=Me.WARN){const e=t.map(SS);Nh.warn(`Firestore (${Dp}): ${n}`,...e)}}function SS(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function qt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Kw(n,i,e)}function Kw(n,t,e){let i=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw vi(i),new Error(i)}function Yt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||Kw(t,s,i)}function OP(n,t){n||qt(57014,t)}function zt(n,t){return n}const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends ki{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Yw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class MP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(rs.UNAUTHENTICATED)))}shutdown(){}}class PP{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class VP{constructor(t){this.t=t,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let o=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bs,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=o;t.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bs)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yt(typeof i.accessToken=="string",31837,{l:i}),new Yw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new rs(t)}}class kP{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=rs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class LP{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new kP(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class l3{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UP{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0,3512);const i=o=>{o.error!=null&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,wt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const s=o=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new l3(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Yt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new l3(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zP(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class bS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=zP(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<e&&(i+=t.charAt(s[o]%62))}return i}}function oe(n,t){return n<t?-1:n>t?1:0}function vT(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),o=t.charAt(i);if(s!==o)return xE(s)===xE(o)?oe(s,o):xE(s)?1:-1}return oe(n.length,t.length)}const BP=55296,GP=57343;function xE(n){const t=n.charCodeAt(0);return t>=BP&&t<=GP}function ap(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}function Qw(n){return n+"\0"}const u3="__name__";class Ll{constructor(t,e,i){e===void 0?e=0:e>t.length&&qt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&qt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Ll.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ll?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const o=Ll.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return oe(t.length,e.length)}static compareSegments(t,e){const i=Ll.isNumericId(t),s=Ll.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Ll.extractNumericId(t).compare(Ll.extractNumericId(e)):vT(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Sh.fromString(t.substring(4,t.length-2))}}class Pe extends Ll{construct(t,e,i){return new Pe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new Pe(e)}static emptyPath(){return new Pe([])}}const qP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Ll{construct(t,e,i){return new Kn(t,e,i)}static isValidIdentifier(t){return qP.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u3}static keyField(){return new Kn([u3])}static fromServerFormat(t){const e=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new Tt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Tt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(o(),s++)}if(o(),c)throw new Tt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Kn(e)}static emptyPath(){return new Kn([])}}class kt{constructor(t){this.path=t}static fromPath(t){return new kt(Pe.fromString(t))}static fromName(t){return new kt(Pe.fromString(t).popFirst(5))}static empty(){return new kt(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Pe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new kt(new Pe(t.slice()))}}function AS(n,t,e){if(!e)throw new Tt(ht.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Xw(n,t,e,i){if(t===!0&&i===!0)throw new Tt(ht.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function c3(n){if(!kt.isDocumentKey(n))throw new Tt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function h3(n){if(kt.isDocumentKey(n))throw new Tt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":qt(12329,{type:typeof n})}function Je(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Tt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qv(n);throw new Tt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function Ww(n,t){if(t<=0)throw new Tt(ht.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}function Vi(n,t){const e={typeString:n};return t&&(e.value=t),e}function A_(n,t){if(!Jw(n))throw new Tt(ht.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new Tt(ht.INVALID_ARGUMENT,e);return!0}const f3=-62135596800,d3=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(t){return an.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*d3);return new an(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<f3)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Tt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d3}_compareTo(t){return this.seconds===t.seconds?oe(this.nanoseconds,t.nanoseconds):oe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:an._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(A_(t,an._jsonSchema))return new an(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-f3;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}an._jsonSchemaVersion="firestore/timestamp/1.0",an._jsonSchema={type:Vi("string",an._jsonSchemaVersion),seconds:Vi("number"),nanoseconds:Vi("number")};class Wt{static fromTimestamp(t){return new Wt(t)}static min(){return new Wt(new an(0,0))}static max(){return new Wt(new an(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rp=-1;class nv{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}}function ET(n){return n.fields.find((t=>t.kind===2))}function zf(n){return n.fields.filter((t=>t.kind!==2))}nv.UNKNOWN_ID=-1;class L1{constructor(t,e){this.fieldPath=t,this.kind=e}}class n_{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n_(0,Rr.min())}}function Zw(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Wt.fromTimestamp(i===1e9?new an(e+1,0):new an(e,i));return new Rr(s,kt.empty(),t)}function $w(n){return new Rr(n.readTime,n.key,rp)}class Rr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Rr(Wt.min(),kt.empty(),rp)}static max(){return new Rr(Wt.max(),kt.empty(),rp)}}function wS(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=kt.comparator(n.documentKey,t.documentKey),e!==0?e:oe(n.largestBatchId,t.largestBatchId))}const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Gh(n){if(n.code!==ht.FAILED_PRECONDITION||n.message!==tR)throw n;wt("LocalStore","Unexpectedly lost primary lease")}class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new it(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof it?e:it.resolve(e)}catch(e){return it.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):it.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):it.reject(e)}static resolve(t){return new it(((e,i)=>{e(t)}))}static reject(t){return new it(((e,i)=>{i(t)}))}static waitFor(t){return new it(((e,i)=>{let s=0,o=0,c=!1;t.forEach((f=>{++s,f.next((()=>{++o,c&&o===s&&e()}),(m=>i(m)))})),c=!0,o===s&&e()}))}static or(t){let e=it.resolve(!1);for(const i of t)e=e.next((s=>s?it.resolve(s):i()));return e}static forEach(t,e){const i=[];return t.forEach(((s,o)=>{i.push(e.call(this,s,o))})),this.waitFor(i)}static mapArray(t,e){return new it(((i,s)=>{const o=t.length,c=new Array(o);let f=0;for(let m=0;m<o;m++){const g=m;e(t[g]).next((E=>{c[g]=E,++f,f===o&&i(c)}),(E=>s(E)))}}))}static doWhile(t,e){return new it(((i,s)=>{const o=()=>{t()===!0?e().next((()=>{o()}),s):i()};o()}))}}const Er="SimpleDb";class Hv{static open(t,e,i,s){try{return new Hv(e,t.transaction(s,i))}catch(o){throw new U0(e,o)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new bs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new U0(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=RS(i.target.error);this.S.reject(new U0(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(wt(Er,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new jP(e)}}class Yl{static delete(t){return wt(Er,"Removing database:",t),Gf(dS().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!nd())return!1;if(Yl.F())return!0;const t=ni(),e=Yl.M(t),i=0<e&&e<10,s=nR(t),o=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Yl.M(ni())===12.2&&vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(wt(Er,"Opening database:",this.name),this.db=await new Promise(((e,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;e(c)},s.onblocked=()=>{i(new U0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?i(new Tt(ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new Tt(ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new U0(t,c))},s.onupgradeneeded=o=>{wt(Er,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{wt(Er,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,s){const o=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const f=Hv.open(this.db,t,o?"readonly":"readwrite",i),m=s(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),it.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(wt(Er,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nR(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class HP{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return Gf(this.U.delete())}}class U0 extends Tt{constructor(t,e){super(ht.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function qh(n){return n.name==="IndexedDbTransactionError"}class jP{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(wt(Er,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(wt(Er,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Gf(i)}add(t){return wt(Er,"ADD",this.store.name,t,t),Gf(this.store.add(t))}get(t){return Gf(this.store.get(t)).next((e=>(e===void 0&&(e=null),wt(Er,"GET",this.store.name,t,e),e)))}delete(t){return wt(Er,"DELETE",this.store.name,t),Gf(this.store.delete(t))}count(){return wt(Er,"COUNT",this.store.name),Gf(this.store.count())}H(t,e){const i=this.options(t,e),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new it(((c,f)=>{o.onerror=m=>{f(m.target.error)},o.onsuccess=m=>{c(m.target.result)}}))}{const o=this.cursor(i),c=[];return this.J(o,((f,m)=>{c.push(m)})).next((()=>c))}}Z(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new it(((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}}))}X(t,e){wt(Er,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const s=this.cursor(i);return this.J(s,((o,c,f)=>f.delete()))}ee(t,e){let i;e?i=t:(i={},e=t);const s=this.cursor(i);return this.J(s,e)}te(t){const e=this.cursor({});return new it(((i,s)=>{e.onerror=o=>{const c=RS(o.target.error);s(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}J(t,e){const i=[];return new it(((s,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const f=c.target.result;if(!f)return void s();const m=new HP(f),g=e(f.primaryKey,f.value,m);if(g instanceof it){const E=g.catch((b=>(m.done(),it.reject(b))));i.push(E)}m.isDone?s():m.G===null?f.continue():f.continue(m.G)}})).next((()=>it.waitFor(i)))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Gf(n){return new it(((t,e)=>{n.onsuccess=i=>{const s=i.target.result;t(s)},n.onerror=i=>{const s=RS(i.target.error);e(s)}}))}let m3=!1;function RS(n){const t=Yl.M(ni());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m3||(m3=!0,setTimeout((()=>{throw i}),0)),i}}return n}const z0="IndexBackfiller";class FP{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){wt(z0,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();wt(z0,`Documents written: ${e}`)}catch(e){qh(e)?wt(z0,"Ignoring IndexedDB error during index backfill: ",e):await Gh(e)}await this.re(6e4)}))}}class KP{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const i=new Set;let s=e,o=!0;return it.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!i.has(c))return wt(z0,`Processing collection: ${c}`),this.oe(t,c,s).next((f=>{s-=f,i.add(c)}));o=!1})))).next((()=>e-s))}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((s=>this.localStore.localDocuments.getNextDocuments(t,e,s,i).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(s,o))).next((f=>(wt(z0,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(t,e,f)))).next((()=>c.size))}))))}_e(t,e){let i=t;return e.changes.forEach(((s,o)=>{const c=$w(o);wS(c,i)>0&&(i=c)})),new Rr(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Xa{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Xa.ce=-1;const bh=-1;function w_(n){return n==null}function i_(n){return n===0&&1/n==-1/0}function iR(n){return typeof n=="number"&&Number.isInteger(n)&&!i_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const iv="";function Ks(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=p3(t)),t=YP(n.get(e),t);return p3(t)}function YP(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":e+="";break;case iv:e+="";break;default:e+=o}}return e}function p3(n){return n+iv+""}function jl(n){const t=n.length;if(Yt(t>=2,64408,{path:n}),t===2)return Yt(n.charAt(0)===iv&&n.charAt(1)==="",56145,{path:n}),Pe.emptyPath();const e=t-2,i=[];let s="";for(let o=0;o<t;){const c=n.indexOf(iv,o);switch((c<0||c>e)&&qt(50515,{path:n}),n.charAt(c+1)){case"":const f=n.substring(o,c);let m;s.length===0?m=f:(s+=f,m=s,s=""),i.push(m);break;case"":s+=n.substring(o,c),s+="\0";break;case"":s+=n.substring(o,c+1);break;default:qt(61167,{path:n})}o=c+2}return new Pe(i)}const Bf="remoteDocuments",R_="owner",Dm="owner",s_="mutationQueues",QP="userId",jo="mutations",g3="batchId",Yf="userMutationsIndex",_3=["userId","batchId"];function U1(n,t){return[n,Ks(t)]}function sR(n,t,e){return[n,Ks(t),e]}const XP={},op="documentMutations",sv="remoteDocumentsV14",JP=["prefixPath","collectionGroup","readTime","documentId"],z1="documentKeyIndex",WP=["prefixPath","collectionGroup","documentId"],aR="collectionGroupIndex",ZP=["collectionGroup","readTime","prefixPath","documentId"],a_="remoteDocumentGlobal",TT="remoteDocumentGlobalKey",lp="targets",rR="queryTargetsIndex",$P=["canonicalId","targetId"],up="targetDocuments",tV=["targetId","path"],CS="documentTargetsIndex",eV=["path","targetId"],av="targetGlobalKey",Zf="targetGlobal",r_="collectionParents",nV=["collectionId","parent"],cp="clientMetadata",iV="clientId",jv="bundles",sV="bundleId",Fv="namedQueries",aV="name",IS="indexConfiguration",rV="indexId",ST="collectionGroupIndex",oV="collectionGroup",B0="indexState",lV=["indexId","uid"],oR="sequenceNumberIndex",uV=["uid","sequenceNumber"],G0="indexEntries",cV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lR="documentKeyIndex",hV=["indexId","uid","orderedDocumentKey"],Kv="documentOverlays",fV=["userId","collectionPath","documentId"],bT="collectionPathOverlayIndex",dV=["userId","collectionPath","largestBatchId"],uR="collectionGroupOverlayIndex",mV=["userId","collectionGroup","largestBatchId"],NS="globals",pV="name",cR=[s_,jo,op,Bf,lp,R_,Zf,up,cp,a_,r_,jv,Fv],gV=[...cR,Kv],hR=[s_,jo,op,sv,lp,R_,Zf,up,cp,a_,r_,jv,Fv,Kv],fR=hR,DS=[...fR,IS,B0,G0],_V=DS,dR=[...DS,NS],yV=dR;class AT extends eR{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Ji(n,t){const e=zt(n);return Yl.O(e.le,t)}function y3(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Hh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function mR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Cn{constructor(t,e){this.comparator=t,this.root=e||Ts.EMPTY}insert(t,e){return new Cn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(t){return new Cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new A1(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new A1(this.root,t,this.comparator,!1)}getReverseIterator(){return new A1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new A1(this.root,t,this.comparator,!0)}}class A1{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ts{constructor(t,e,i,s,o){this.key=t,this.value=e,this.color=i??Ts.RED,this.left=s??Ts.EMPTY,this.right=o??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,o){return new Ts(t??this.key,e??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,i),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Ts.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw qt(27949);return t+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1;Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(t,e,i,s,o){return this}insert(t,e,i){return new Ts(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class on{constructor(t){this.comparator=t,this.data=new Cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new v3(this.data.getIterator())}getIteratorFrom(t){return new v3(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof on)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new on(this.comparator);return e.data=t,e}}class v3{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xm(n){return n.hasNext()?n.getNext():void 0}class Ja{constructor(t){this.fields=t,t.sort(Kn.comparator)}static empty(){return new Ja([])}unionWith(t){let e=new on(Kn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Ja(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ap(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class pR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function vV(){return typeof atob<"u"}class hi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pR("Invalid base64 string: "+o):o}})(t);return new hi(e)}static fromUint8Array(t){const e=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(t);return new hi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return oe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const EV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xu(n){if(Yt(!!n,39018),typeof n=="string"){let t=0;const e=EV.exec(n);if(Yt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fn(n.seconds),nanos:Fn(n.nanos)}}function Fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ju(n){return typeof n=="string"?hi.fromBase64String(n):hi.fromUint8Array(n)}const gR="server_timestamp",_R="__type__",yR="__previous_value__",vR="__local_write_time__";function Yv(n){return(n?.mapValue?.fields||{})[_R]?.stringValue===gR}function Qv(n){const t=n.mapValue.fields[yR];return Yv(t)?Qv(t):t}function o_(n){const t=Xu(n.mapValue.fields[vR].timestampValue);return new an(t.seconds,t.nanos)}class TV{constructor(t,e,i,s,o,c,f,m,g,E,b){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=E,this.apiKey=b}}const wT="(default)";class Dh{constructor(t,e){this.projectId=t,this.database=e||wT}static empty(){return new Dh("","")}get isDefaultDatabase(){return this.database===wT}isEqual(t){return t instanceof Dh&&t.projectId===this.projectId&&t.database===this.database}}function SV(n,t){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Tt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dh(n.options.projectId,t)}const xS="__type__",ER="__max__",vh={mapValue:{fields:{__type__:{stringValue:ER}}}},OS="__vector__",hp="value",B1={nullValue:"NULL_VALUE"};function xh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yv(n)?4:TR(n)?9007199254740991:Xv(n)?10:11:qt(28295,{value:n})}function Wl(n,t){if(n===t)return!0;const e=xh(n);if(e!==xh(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return o_(n).isEqual(o_(t));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Xu(s.timestampValue),f=Xu(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,o){return Ju(s.bytesValue).isEqual(Ju(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,o){return Fn(s.geoPointValue.latitude)===Fn(o.geoPointValue.latitude)&&Fn(s.geoPointValue.longitude)===Fn(o.geoPointValue.longitude)})(n,t);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Fn(s.integerValue)===Fn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Fn(s.doubleValue),f=Fn(o.doubleValue);return c===f?i_(c)===i_(f):isNaN(c)&&isNaN(f)}return!1})(n,t);case 9:return ap(n.arrayValue.values||[],t.arrayValue.values||[],Wl);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},f=o.mapValue.fields||{};if(y3(c)!==y3(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Wl(c[m],f[m])))return!1;return!0})(n,t);default:return qt(52216,{left:n})}}function l_(n,t){return(n.values||[]).find((e=>Wl(e,t)))!==void 0}function Oh(n,t){if(n===t)return 0;const e=xh(n),i=xh(t);if(e!==i)return oe(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const f=Fn(o.integerValue||o.doubleValue),m=Fn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,t);case 3:return E3(n.timestampValue,t.timestampValue);case 4:return E3(o_(n),o_(t));case 5:return vT(n.stringValue,t.stringValue);case 6:return(function(o,c){const f=Ju(o),m=Ju(c);return f.compareTo(m)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const f=o.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const E=oe(f[g],m[g]);if(E!==0)return E}return oe(f.length,m.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const f=oe(Fn(o.latitude),Fn(c.latitude));return f!==0?f:oe(Fn(o.longitude),Fn(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return T3(n.arrayValue,t.arrayValue);case 10:return(function(o,c){const f=o.fields||{},m=c.fields||{},g=f[hp]?.arrayValue,E=m[hp]?.arrayValue,b=oe(g?.values?.length||0,E?.values?.length||0);return b!==0?b:T3(g,E)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===vh.mapValue&&c===vh.mapValue)return 0;if(o===vh.mapValue)return 1;if(c===vh.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),g=c.fields||{},E=Object.keys(g);m.sort(),E.sort();for(let b=0;b<m.length&&b<E.length;++b){const A=vT(m[b],E[b]);if(A!==0)return A;const N=Oh(f[m[b]],g[E[b]]);if(N!==0)return N}return oe(m.length,E.length)})(n.mapValue,t.mapValue);default:throw qt(23264,{he:e})}}function E3(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return oe(n,t);const e=Xu(n),i=Xu(t),s=oe(e.seconds,i.seconds);return s!==0?s:oe(e.nanos,i.nanos)}function T3(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const o=Oh(e[s],i[s]);if(o)return o}return oe(e.length,i.length)}function fp(n){return RT(n)}function RT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=Xu(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Ju(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return kt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(const o of e.values||[])s?s=!1:i+=",",i+=RT(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${RT(e.fields[c])}`;return s+"}"})(n.mapValue):qt(61005,{value:n})}function G1(n){switch(xh(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qv(n);return t?16+G1(t):16;case 5:return 2*n.stringValue.length;case 6:return Ju(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+G1(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Hh(i.fields,((o,c)=>{s+=o.length+G1(c)})),s})(n.mapValue);default:throw qt(13486,{value:n})}}function id(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function CT(n){return!!n&&"integerValue"in n}function u_(n){return!!n&&"arrayValue"in n}function S3(n){return!!n&&"nullValue"in n}function b3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function q1(n){return!!n&&"mapValue"in n}function Xv(n){return(n?.mapValue?.fields||{})[xS]?.stringValue===OS}function q0(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Hh(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=q0(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=q0(n.arrayValue.values[e]);return t}return{...n}}function TR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ER}const SR={mapValue:{fields:{[xS]:{stringValue:OS},[hp]:{arrayValue:{}}}}};function bV(n){return"nullValue"in n?B1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?id(Dh.empty(),kt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Xv(n)?SR:{mapValue:{}}:qt(35942,{value:n})}function AV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?id(Dh.empty(),kt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?SR:"mapValue"in n?Xv(n)?{mapValue:{}}:vh:qt(61959,{value:n})}function A3(n,t){const e=Oh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function w3(n,t){const e=Oh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Ss{constructor(t){this.value=t}static empty(){return new Ss({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!q1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=q0(e)}setAll(t){let e=Kn.emptyPath(),i={},s=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=f.popLast()}c?i[f.lastSegment()]=q0(c):s.push(f.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,s)}delete(t){const e=this.field(t.popLast());q1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Wl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];q1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Hh(e,((s,o)=>t[s]=o));for(const s of i)delete t[s]}clone(){return new Ss(q0(this.value))}}function bR(n){const t=[];return Hh(n.fields,((e,i)=>{const s=new Kn([e]);if(q1(i)){const o=bR(i.mapValue).fields;if(o.length===0)t.push(s);else for(const c of o)t.push(s.child(c))}else t.push(s)})),new Ja(t)}class Ln{constructor(t,e,i,s,o,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(t){return new Ln(t,0,Wt.min(),Wt.min(),Wt.min(),Ss.empty(),0)}static newFoundDocument(t,e,i,s){return new Ln(t,1,e,Wt.min(),i,s,0)}static newNoDocument(t,e){return new Ln(t,2,e,Wt.min(),Wt.min(),Ss.empty(),0)}static newUnknownDocument(t,e){return new Ln(t,3,e,Wt.min(),Wt.min(),Ss.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mh{constructor(t,e){this.position=t,this.inclusive=e}}function R3(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const o=t[s],c=n.position[s];if(o.field.isKeyField()?i=kt.comparator(kt.fromName(c.referenceValue),e.key):i=Oh(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function C3(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Wl(n.position[e],t.position[e]))return!1;return!0}class c_{constructor(t,e="asc"){this.field=t,this.dir=e}}function wV(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class AR{}class Ue extends AR{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new RV(t,e,i):e==="array-contains"?new NV(t,i):e==="in"?new DR(t,i):e==="not-in"?new DV(t,i):e==="array-contains-any"?new xV(t,i):new Ue(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new CV(t,i):new IV(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Oh(e,this.value)):e!==null&&xh(this.value)===xh(e)&&this.matchesComparison(Oh(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends AR{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new rn(t,e)}matches(t){return dp(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dp(n){return n.op==="and"}function IT(n){return n.op==="or"}function MS(n){return wR(n)&&dp(n)}function wR(n){for(const t of n.filters)if(t instanceof rn)return!1;return!0}function NT(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+fp(n.value);if(MS(n))return n.filters.map((t=>NT(t))).join(",");{const t=n.filters.map((e=>NT(e))).join(",");return`${n.op}(${t})`}}function RR(n,t){return n instanceof Ue?(function(i,s){return s instanceof Ue&&i.op===s.op&&i.field.isEqual(s.field)&&Wl(i.value,s.value)})(n,t):n instanceof rn?(function(i,s){return s instanceof rn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,c,f)=>o&&RR(c,s.filters[f])),!0):!1})(n,t):void qt(19439)}function CR(n,t){const e=n.filters.concat(t);return rn.create(e,n.op)}function IR(n){return n instanceof Ue?(function(e){return`${e.field.canonicalString()} ${e.op} ${fp(e.value)}`})(n):n instanceof rn?(function(e){return e.op.toString()+" {"+e.getFilters().map(IR).join(" ,")+"}"})(n):"Filter"}class RV extends Ue{constructor(t,e,i){super(t,e,i),this.key=kt.fromName(i.referenceValue)}matches(t){const e=kt.comparator(t.key,this.key);return this.matchesComparison(e)}}class CV extends Ue{constructor(t,e){super(t,"in",e),this.keys=NR("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class IV extends Ue{constructor(t,e){super(t,"not-in",e),this.keys=NR("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function NR(n,t){return(t.arrayValue?.values||[]).map((e=>kt.fromName(e.referenceValue)))}class NV extends Ue{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return u_(e)&&l_(e.arrayValue,this.value)}}class DR extends Ue{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&l_(this.value.arrayValue,e)}}class DV extends Ue{constructor(t,e){super(t,"not-in",e)}matches(t){if(l_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!l_(this.value.arrayValue,e)}}class xV extends Ue{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!u_(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>l_(this.value.arrayValue,i)))}}class OV{constructor(t,e=null,i=[],s=[],o=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function DT(n,t=null,e=[],i=[],s=null,o=null,c=null){return new OV(n,t,e,i,s,o,c)}function sd(n){const t=zt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>NT(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),w_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>fp(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>fp(i))).join(",")),t.Te=e}return t.Te}function C_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!wV(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!RR(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!C3(n.startAt,t.startAt)&&C3(n.endAt,t.endAt)}function rv(n){return kt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ov(n,t){return n.filters.filter((e=>e instanceof Ue&&e.field.isEqual(t)))}function I3(n,t,e){let i=B1,s=!0;for(const o of ov(n,t)){let c=B1,f=!0;switch(o.op){case"<":case"<=":c=bV(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,f=!1;break;case"!=":case"not-in":c=B1}A3({value:i,inclusive:s},{value:c,inclusive:f})<0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];A3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})<0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}function N3(n,t,e){let i=vh,s=!0;for(const o of ov(n,t)){let c=vh,f=!0;switch(o.op){case">=":case">":c=AV(o.value),f=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,f=!1;break;case"!=":case"not-in":c=vh}w3({value:i,inclusive:s},{value:c,inclusive:f})>0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];w3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})>0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}class nc{constructor(t,e=null,i=[],s=[],o=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function xR(n,t,e,i,s,o,c,f){return new nc(n,t,e,i,s,o,c,f)}function xp(n){return new nc(n)}function D3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MV(n){return kt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function PS(n){return n.collectionGroup!==null}function Ym(n){const t=zt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new on(Kn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new c_(o,i))})),e.has(Kn.keyField().canonicalString())||t.Ie.push(new c_(Kn.keyField(),i))}return t.Ie}function pa(n){const t=zt(n);return t.Ee||(t.Ee=PV(t,Ym(n))),t.Ee}function PV(n,t){if(n.limitType==="F")return DT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new c_(s.field,o)}));const e=n.endAt?new Mh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Mh(n.startAt.position,n.startAt.inclusive):null;return DT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function xT(n,t){const e=n.filters.concat([t]);return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function VV(n,t){const e=n.explicitOrderBy.concat([t]);return new nc(n.path,n.collectionGroup,e,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function lv(n,t,e){return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function kV(n,t){return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,t,n.endAt)}function LV(n,t){return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,t)}function I_(n,t){return C_(pa(n),pa(t))&&n.limitType===t.limitType}function OR(n){return`${sd(pa(n))}|lt:${n.limitType}`}function zm(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>IR(s))).join(", ")}]`),w_(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>fp(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>fp(s))).join(",")),`Target(${i})`})(pa(n))}; limitType=${n.limitType})`}function N_(n,t){return t.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):kt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,s){for(const o of Ym(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(c,f,m){const g=R3(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,Ym(i),s)||i.endAt&&!(function(c,f,m){const g=R3(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,Ym(i),s))})(n,t)}function MR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PR(n){return(t,e)=>{let i=!1;for(const s of Ym(n)){const o=UV(s,t,e);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function UV(n,t,e){const i=n.field.isKeyField()?kt.comparator(t.key,e.key):(function(o,c,f){const m=c.data.field(o),g=f.data.field(o);return m!==null&&g!==null?Oh(m,g):qt(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qt(19790,{direction:n.dir})}}class ic{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Hh(this.inner,((e,i)=>{for(const[s,o]of i)t(s,o)}))}isEmpty(){return mR(this.inner)}size(){return this.innerSize}}const zV=new Cn(kt.comparator);function Wa(){return zV}const VR=new Cn(kt.comparator);function I0(...n){let t=VR;for(const e of n)t=t.insert(e.key,e);return t}function kR(n){let t=VR;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Fl(){return H0()}function LR(){return H0()}function H0(){return new ic((n=>n.toString()),((n,t)=>n.isEqual(t)))}const BV=new Cn(kt.comparator),GV=new on(kt.comparator);function ve(...n){let t=GV;for(const e of n)t=t.add(e);return t}const qV=new on(oe);function VS(){return qV}function kS(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:i_(t)?"-0":t}}function UR(n){return{integerValue:""+n}}function zR(n,t){return iR(t)?UR(t):kS(n,t)}class Jv{constructor(){this._=void 0}}function HV(n,t,e){return n instanceof mp?(function(s,o){const c={fields:{[_R]:{stringValue:gR},[vR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Yv(o)&&(o=Qv(o)),o&&(c.fields[yR]=o),{mapValue:c}})(e,t):n instanceof ad?GR(n,t):n instanceof rd?qR(n,t):(function(s,o){const c=BR(s,o),f=x3(c)+x3(s.Ae);return CT(c)&&CT(s.Ae)?UR(f):kS(s.serializer,f)})(n,t)}function jV(n,t,e){return n instanceof ad?GR(n,t):n instanceof rd?qR(n,t):e}function BR(n,t){return n instanceof pp?(function(i){return CT(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class mp extends Jv{}class ad extends Jv{constructor(t){super(),this.elements=t}}function GR(n,t){const e=HR(t);for(const i of n.elements)e.some((s=>Wl(s,i)))||e.push(i);return{arrayValue:{values:e}}}class rd extends Jv{constructor(t){super(),this.elements=t}}function qR(n,t){let e=HR(t);for(const i of n.elements)e=e.filter((s=>!Wl(s,i)));return{arrayValue:{values:e}}}class pp extends Jv{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function x3(n){return Fn(n.integerValue||n.doubleValue)}function HR(n){return u_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D_{constructor(t,e){this.field=t,this.transform=e}}function FV(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof ad&&s instanceof ad||i instanceof rd&&s instanceof rd?ap(i.elements,s.elements,Wl):i instanceof pp&&s instanceof pp?Wl(i.Ae,s.Ae):i instanceof mp&&s instanceof mp})(n.transform,t.transform)}class KV{constructor(t,e){this.version=t,this.transformResults=e}}class Yn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Yn}static exists(t){return new Yn(void 0,t)}static updateTime(t){return new Yn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function H1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Wv{}function jR(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Mp(n.key,Yn.none()):new Op(n.key,n.data,Yn.none());{const e=n.data,i=Ss.empty();let s=new on(Kn.comparator);for(let o of t.fields)if(!s.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new sc(n.key,i,new Ja(s.toArray()),Yn.none())}}function YV(n,t,e){n instanceof Op?(function(s,o,c){const f=s.value.clone(),m=M3(s.fieldTransforms,o,c.transformResults);f.setAll(m),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):n instanceof sc?(function(s,o,c){if(!H1(s.precondition,o))return void o.convertToUnknownDocument(c.version);const f=M3(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(FR(s)),m.setAll(f),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function j0(n,t,e,i){return n instanceof Op?(function(o,c,f,m){if(!H1(o.precondition,c))return f;const g=o.value.clone(),E=P3(o.fieldTransforms,m,c);return g.setAll(E),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof sc?(function(o,c,f,m){if(!H1(o.precondition,c))return f;const g=P3(o.fieldTransforms,m,c),E=c.data;return E.setAll(FR(o)),E.setAll(g),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,t,e,i):(function(o,c,f){return H1(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,t,e)}function QV(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),o=BR(i.transform,s||null);o!=null&&(e===null&&(e=Ss.empty()),e.set(i.field,o))}return e||null}function O3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ap(i,s,((o,c)=>FV(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Op extends Wv{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sc extends Wv{constructor(t,e,i,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function FR(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function M3(n,t,e){const i=new Map;Yt(n.length===e.length,32656,{Ve:e.length,de:n.length});for(let s=0;s<e.length;s++){const o=n[s],c=o.transform,f=t.data.field(o.field);i.set(o.field,jV(c,f,e[s]))}return i}function P3(n,t,e){const i=new Map;for(const s of n){const o=s.transform,c=e.data.field(s.field);i.set(s.field,HV(o,c,t))}return i}class Mp extends Wv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LS extends Wv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class US{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&YV(o,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=j0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=j0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=LR();return this.mutations.forEach((s=>{const o=t.get(s.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=e.has(s.key)?null:f;const m=jR(c,f);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Wt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ve())}isEqual(t){return this.batchId===t.batchId&&ap(this.mutations,t.mutations,((e,i)=>O3(e,i)))&&ap(this.baseMutations,t.baseMutations,((e,i)=>O3(e,i)))}}class zS{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Yt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=(function(){return BV})();const o=t.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new zS(t,e,i,s)}}class BS{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XV{constructor(t,e){this.count=t,this.unchangedNames=e}}var Mi,qe;function KR(n){switch(n){case ht.OK:return qt(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return qt(15467,{code:n})}}function YR(n){if(n===void 0)return vi("GRPC error has no .code"),ht.UNKNOWN;switch(n){case Mi.OK:return ht.OK;case Mi.CANCELLED:return ht.CANCELLED;case Mi.UNKNOWN:return ht.UNKNOWN;case Mi.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Mi.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Mi.INTERNAL:return ht.INTERNAL;case Mi.UNAVAILABLE:return ht.UNAVAILABLE;case Mi.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Mi.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Mi.NOT_FOUND:return ht.NOT_FOUND;case Mi.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Mi.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Mi.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Mi.ABORTED:return ht.ABORTED;case Mi.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Mi.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Mi.DATA_LOSS:return ht.DATA_LOSS;default:return qt(39323,{code:n})}}(qe=Mi||(Mi={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function QR(){return new TextEncoder}const JV=new Sh([4294967295,4294967295],0);function V3(n){const t=QR().encode(n),e=new Bw;return e.update(t),new Uint8Array(e.digest())}function k3(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Sh([e,i],0),new Sh([s,o],0)]}class GS{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new N0(`Invalid padding: ${e}`);if(i<0)throw new N0(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new N0(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new N0(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Sh.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(Sh.fromNumber(i)));return s.compare(JV)===1&&(s=new Sh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=V3(t),[i,s]=k3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new GS(o,s,e);return i.forEach((f=>c.insert(f))),c}insert(t){if(this.ge===0)return;const e=V3(t),[i,s]=k3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);this.be(c)}}be(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class N0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class x_{constructor(t,e,i,s,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,O_.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new x_(Wt.min(),s,new Cn(oe),Wa(),ve())}}class O_{constructor(t,e,i,s,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new O_(i,e,ve(),ve(),ve())}}class j1{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=s}}class XR{constructor(t,e){this.targetId=t,this.Ce=e}}class JR{constructor(t,e,i=hi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class L3{constructor(){this.ve=0,this.Fe=U3(),this.Me=hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ve(),e=ve(),i=ve();return this.Fe.forEach(((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:qt(38017,{changeType:o})}})),new O_(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=U3()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class WV{constructor(t){this.Ge=t,this.ze=new Map,this.je=Wa(),this.He=w1(),this.Je=w1(),this.Ze=new Cn(oe)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:qt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const o=s.target;if(rv(o))if(i===0){const c=new kt(o.path);this.et(e,c,Ln.newNoDocument(c,Wt.min()))}else Yt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const f=this.ut(t),m=f?this.ct(f,t,c):1;if(m!==0){this.it(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=e;let c,f;try{c=Ju(i).toUint8Array()}catch(m){if(m instanceof pR)return Xo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new GS(c,s,o)}catch(m){return Xo(m instanceof N0?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(f)||(this.et(e,o,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&rv(f.target)){const m=new kt(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Ln.newNoDocument(m,t))}o.Be&&(e.set(c,o.ke()),o.Ke())}}));let i=ve();this.Je.forEach(((o,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const s=new x_(t,e,this.Ze,this.je,i);return this.je=Wa(),this.He=w1(),this.Je=w1(),this.Ze=new Cn(oe),s}Ye(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.qe(e,1):s.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new L3,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new on(oe),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new on(oe),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||wt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new L3),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function w1(){return new Cn(kt.comparator)}function U3(){return new Cn(kt.comparator)}const ZV={asc:"ASCENDING",desc:"DESCENDING"},$V={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tk={and:"AND",or:"OR"};class ek{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function OT(n,t){return n.useProto3Json||w_(t)?t:{value:t}}function gp(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WR(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function nk(n,t){return gp(n,t.toTimestamp())}function Ei(n){return Yt(!!n,49232),Wt.fromTimestamp((function(e){const i=Xu(e);return new an(i.seconds,i.nanos)})(n))}function qS(n,t){return MT(n,t).canonicalString()}function MT(n,t){const e=(function(s){return new Pe(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function ZR(n){const t=Pe.fromString(n);return Yt(lC(t),10190,{key:t.toString()}),t}function h_(n,t){return qS(n.databaseId,t.path)}function Ql(n,t){const e=ZR(t);if(e.get(1)!==n.databaseId.projectId)throw new Tt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Tt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new kt(eC(e))}function $R(n,t){return qS(n.databaseId,t)}function tC(n){const t=ZR(n);return t.length===4?Pe.emptyPath():eC(t)}function PT(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eC(n){return Yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function z3(n,t,e){return{name:h_(n,t),fields:e.value.mapValue.fields}}function nC(n,t,e){const i=Ql(n,t.name),s=Ei(t.updateTime),o=t.createTime?Ei(t.createTime):Wt.min(),c=new Ss({mapValue:{fields:t.fields}}),f=Ln.newFoundDocument(i,s,o,c);return e&&f.setHasCommittedMutations(),e?f.setHasCommittedMutations():f}function ik(n,t){return"found"in t?(function(i,s){Yt(!!s.found,43571),s.found.name,s.found.updateTime;const o=Ql(i,s.found.name),c=Ei(s.found.updateTime),f=s.found.createTime?Ei(s.found.createTime):Wt.min(),m=new Ss({mapValue:{fields:s.found.fields}});return Ln.newFoundDocument(o,c,f,m)})(n,t):"missing"in t?(function(i,s){Yt(!!s.missing,3894),Yt(!!s.readTime,22933);const o=Ql(i,s.missing),c=Ei(s.readTime);return Ln.newNoDocument(o,c)})(n,t):qt(7234,{result:t})}function sk(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:qt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=(function(g,E){return g.useProto3Json?(Yt(E===void 0||typeof E=="string",58123),hi.fromBase64String(E||"")):(Yt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),hi.fromUint8Array(E||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const E=g.code===void 0?ht.UNKNOWN:YR(g.code);return new Tt(E,g.message||"")})(c);e=new JR(i,s,o,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ql(n,i.document.name),o=Ei(i.document.updateTime),c=i.document.createTime?Ei(i.document.createTime):Wt.min(),f=new Ss({mapValue:{fields:i.document.fields}}),m=Ln.newFoundDocument(s,o,c,f),g=i.targetIds||[],E=i.removedTargetIds||[];e=new j1(g,E,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Ql(n,i.document),o=i.readTime?Ei(i.readTime):Wt.min(),c=Ln.newNoDocument(s,o),f=i.removedTargetIds||[];e=new j1([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Ql(n,i.document),o=i.removedTargetIds||[];e=new j1([],o,s,null)}else{if(!("filter"in t))return qt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new XV(s,o),f=i.targetId;e=new XR(f,c)}}return e}function f_(n,t){let e;if(t instanceof Op)e={update:z3(n,t.key,t.value)};else if(t instanceof Mp)e={delete:h_(n,t.key)};else if(t instanceof sc)e={update:z3(n,t.key,t.data),updateMask:ck(t.fieldMask)};else{if(!(t instanceof LS))return qt(16599,{dt:t.type});e={verify:h_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const f=c.transform;if(f instanceof mp)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ad)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof rd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pp)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw qt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:nk(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:qt(27497)})(n,t.precondition)),e}function VT(n,t){const e=t.currentDocument?(function(o){return o.updateTime!==void 0?Yn.updateTime(Ei(o.updateTime)):o.exists!==void 0?Yn.exists(o.exists):Yn.none()})(t.currentDocument):Yn.none(),i=t.updateTransforms?t.updateTransforms.map((s=>(function(c,f){let m=null;if("setToServerValue"in f)Yt(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new mp;else if("appendMissingElements"in f){const E=f.appendMissingElements.values||[];m=new ad(E)}else if("removeAllFromArray"in f){const E=f.removeAllFromArray.values||[];m=new rd(E)}else"increment"in f?m=new pp(c,f.increment):qt(16584,{proto:f});const g=Kn.fromServerFormat(f.fieldPath);return new D_(g,m)})(n,s))):[];if(t.update){t.update.name;const s=Ql(n,t.update.name),o=new Ss({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Ja(g.map((E=>Kn.fromServerFormat(E))))})(t.updateMask);return new sc(s,o,c,e,i)}return new Op(s,o,e,i)}if(t.delete){const s=Ql(n,t.delete);return new Mp(s,e)}if(t.verify){const s=Ql(n,t.verify);return new LS(s,e)}return qt(1463,{proto:t})}function ak(n,t){return n&&n.length>0?(Yt(t!==void 0,14353),n.map((e=>(function(s,o){let c=s.updateTime?Ei(s.updateTime):Ei(o);return c.isEqual(Wt.min())&&(c=Ei(o)),new KV(c,s.transformResults||[])})(e,t)))):[]}function iC(n,t){return{documents:[$R(n,t.path)]}}function sC(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=$R(n,s);const o=(function(g){if(g.length!==0)return oC(rn.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(g){if(g.length!==0)return g.map((E=>(function(A){return{field:Bm(A.field),direction:ok(A.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=OT(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:s}}function aC(n){let t=tC(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Yt(i===1,65062);const E=e.from[0];E.allDescendants?s=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=(function(b){const A=rC(b);return A instanceof rn&&MS(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(b){return b.map((A=>(function(D){return new c_(Gm(D.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(A)))})(e.orderBy));let f=null;e.limit&&(f=(function(b){let A;return A=typeof b=="object"?b.value:b,w_(A)?null:A})(e.limit));let m=null;e.startAt&&(m=(function(b){const A=!!b.before,N=b.values||[];return new Mh(N,A)})(e.startAt));let g=null;return e.endAt&&(g=(function(b){const A=!b.before,N=b.values||[];return new Mh(N,A)})(e.endAt)),xR(t,s,c,o,f,"F",m,g)}function rk(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function rC(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Gm(e.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Gm(e.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gm(e.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gm(e.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ue.create(Gm(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return rn.create(e.compositeFilter.filters.map((i=>rC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qt(1026)}})(e.compositeFilter.op))})(n):qt(30097,{filter:n})}function ok(n){return ZV[n]}function lk(n){return $V[n]}function uk(n){return tk[n]}function Bm(n){return{fieldPath:n.canonicalString()}}function Gm(n){return Kn.fromServerFormat(n.fieldPath)}function oC(n){return n instanceof Ue?(function(e){if(e.op==="=="){if(b3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NAN"}};if(S3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(b3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NOT_NAN"}};if(S3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bm(e.field),op:lk(e.op),value:e.value}}})(n):n instanceof rn?(function(e){const i=e.getFilters().map((s=>oC(s)));return i.length===1?i[0]:{compositeFilter:{op:uk(e.op),filters:i}}})(n):qt(54877,{filter:n})}function ck(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function lC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function uC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class qu{constructor(t,e,i,s,o=Wt.min(),c=Wt.min(),f=hi.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new qu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class cC{constructor(t){this.yt=t}}function hk(n,t){let e;if(t.document)e=nC(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=kt.fromSegments(t.noDocument.path),s=ld(t.noDocument.readTime);e=Ln.newNoDocument(i,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return qt(56709);{const i=kt.fromSegments(t.unknownDocument.path),s=ld(t.unknownDocument.version);e=Ln.newUnknownDocument(i,s)}}return t.readTime&&e.setReadTime((function(s){const o=new an(s[0],s[1]);return Wt.fromTimestamp(o)})(t.readTime)),e}function B3(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:uv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=(function(o,c){return{name:h_(o,c.key),fields:c.data.value.mapValue.fields,updateTime:gp(o,c.version.toTimestamp()),createTime:gp(o,c.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:od(t.version)};else{if(!t.isUnknownDocument())return qt(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:od(t.version)}}return i}function uv(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function od(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ld(n){const t=new an(n.seconds,n.nanoseconds);return Wt.fromTimestamp(t)}function qf(n,t){const e=(t.baseMutations||[]).map((o=>VT(n.yt,o)));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){const f=t.mutations[o+1];c.updateTransforms=f.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const i=t.mutations.map((o=>VT(n.yt,o))),s=an.fromMillis(t.localWriteTimeMs);return new US(t.batchId,s,e,i)}function D0(n){const t=ld(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?ld(n.lastLimboFreeSnapshotVersion):Wt.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Yt(c===1,1966,{count:c}),pa(xp(tC(o.documents[0])))})(n.query):(function(o){return pa(aC(o))})(n.query),new qu(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,hi.fromBase64String(n.resumeToken))}function hC(n,t){const e=od(t.snapshotVersion),i=od(t.lastLimboFreeSnapshotVersion);let s;s=rv(t.target)?iC(n.yt,t.target):sC(n.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:sd(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function HS(n){const t=aC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lv(t,t.limit,"L"):t}function OE(n,t){return new BS(t.largestBatchId,VT(n.yt,t.overlayMutation))}function G3(n,t){const e=t.path.lastSegment();return[n,Ks(t.path.popLast()),e]}function q3(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:od(i.readTime),documentKey:Ks(i.documentKey.path),largestBatchId:i.largestBatchId}}class fk{getBundleMetadata(t,e){return H3(t).get(e).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:ld(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(t,e){return H3(t).put((function(s){return{bundleId:s.id,createTime:od(Ei(s.createTime)),version:s.version}})(e))}getNamedQuery(t,e){return j3(t).get(e).next((i=>{if(i)return(function(o){return{name:o.name,query:HS(o.bundledQuery),readTime:ld(o.readTime)}})(i)}))}saveNamedQuery(t,e){return j3(t).put((function(s){return{name:s.name,readTime:od(Ei(s.readTime)),bundledQuery:s.bundledQuery}})(e))}}function H3(n){return Ji(n,jv)}function j3(n){return Ji(n,Fv)}class Zv{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new Zv(t,i)}getOverlay(t,e){return c0(t).get(G3(this.userId,e)).next((i=>i?OE(this.serializer,i):null))}getOverlays(t,e){const i=Fl();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){const s=[];return i.forEach(((o,c)=>{const f=new BS(e,c);s.push(this.bt(t,f))})),it.waitFor(s)}removeOverlaysForBatchId(t,e,i){const s=new Set;e.forEach((c=>s.add(Ks(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(c0(t).X(bT,f))})),it.waitFor(o)}getOverlaysForCollection(t,e,i){const s=Fl(),o=Ks(e),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return c0(t).H(bT,c).next((f=>{for(const m of f){const g=OE(this.serializer,m);s.set(g.getKey(),g)}return s}))}getOverlaysForCollectionGroup(t,e,i,s){const o=Fl();let c;const f=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return c0(t).ee({index:uR,range:f},((m,g,E)=>{const b=OE(this.serializer,g);o.size()<s||b.largestBatchId===c?(o.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>o))}bt(t,e){return c0(t).put((function(s,o,c){const[f,m,g]=G3(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:f_(s.yt,c.mutation)}})(this.serializer,this.userId,e))}}function c0(n){return Ji(n,Kv)}class dk{St(t){return Ji(t,NS)}getSessionToken(t){return this.St(t).get("sessionToken").next((e=>{const i=e?.value;return i?hi.fromUint8Array(i):hi.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Hf{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Fn(t.integerValue));else if("doubleValue"in t){const i=Fn(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),i_(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=Xu(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ju(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?TR(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Xv(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):qt(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){const i=t.fields||{};this.Ft(e,55);for(const s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){const i=t.fields||{};this.Ft(e,53);const s=hp,o=i[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(Fn(o)),this.Ot(s,e),this.Ct(i[s],e)}qt(t,e){const i=t.values||[];this.Ft(e,50);for(const s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),kt.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Hf.Wt=new Hf;const Om=255;function mk(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function F3(n){const t=64-(function(i){let s=0;for(let o=0;o<8;++o){const c=mk(255&i[o]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(t/8)}class pk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ht(i.value),i=e.next();this.Jt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const s=e.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(t){const e=this.en(t),i=F3(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),i=F3(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(Om),this.sn(255)}_n(){this.an(Om),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let s=1;s<e.length;++s)e[s]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Om?(this.sn(Om),this.sn(0)):this.sn(e)}Ht(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Om?(this.an(Om),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class gk{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class _k{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class h0{constructor(){this.cn=new pk,this.ascending=new gk(this.cn),this.descending=new _k(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class jf{constructor(t,e,i,s){this.hn=t,this.Pn=e,this.Tn=i,this.In=s}En(){const t=this.In.length,e=t===0||this.In[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.In,0),e!==t?i.set([0],this.In.length):++i[i.length-1],new jf(this.hn,this.Pn,this.Tn,i)}Rn(t,e,i){return{indexId:this.hn,uid:t,arrayValue:F1(this.Tn),directionalValue:F1(this.In),orderedDocumentKey:F1(e),documentKey:i.path.toArray()}}An(t,e,i){const s=this.Rn(t,e,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ch(n,t){let e=n.hn-t.hn;return e!==0?e:(e=K3(n.Tn,t.Tn),e!==0?e:(e=K3(n.In,t.In),e!==0?e:kt.comparator(n.Pn,t.Pn)))}function K3(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}function F1(n){return Cw()?(function(e){let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return i})(n):n}function Y3(n){return typeof n!="string"?n:(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(n)}class Q3{constructor(t){this.Vn=new on(((e,i)=>Kn.comparator(e.field,i.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(t){if(Yt(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const e=ET(t);if(e!==void 0&&!this.pn(e))return!1;const i=zf(t);let s=new Set,o=0,c=0;for(;o<i.length&&this.pn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!s.has(f.field.canonicalString())){const m=i[o];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++o}for(;o<i.length;++o){const f=i[o];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let t=new on(Kn.comparator);const e=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new L1(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new L1(i.field,0))}for(const i of this.dn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new L1(i.field,i.dir==="asc"?0:1)));return new nv(nv.UNKNOWN_ID,this.collectionId,e,n_.empty())}pn(t){for(const e of this.mn)if(this.yn(e,t))return!0;return!1}yn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}wn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function fC(n){if(Yt(n instanceof Ue||n instanceof rn,20012),n instanceof Ue){if(n instanceof DR){const e=n.value.arrayValue?.values?.map((i=>Ue.create(n.field,"==",i)))||[];return rn.create(e,"or")}return n}const t=n.filters.map((e=>fC(e)));return rn.create(t,n.op)}function yk(n){if(n.getFilters().length===0)return[];const t=UT(fC(n));return Yt(dC(t),7391),kT(t)||LT(t)?[t]:t.getFilters()}function kT(n){return n instanceof Ue}function LT(n){return n instanceof rn&&MS(n)}function dC(n){return kT(n)||LT(n)||(function(e){if(e instanceof rn&&IT(e)){for(const i of e.getFilters())if(!kT(i)&&!LT(i))return!1;return!0}return!1})(n)}function UT(n){if(Yt(n instanceof Ue||n instanceof rn,34018),n instanceof Ue)return n;if(n.filters.length===1)return UT(n.filters[0]);const t=n.filters.map((i=>UT(i)));let e=rn.create(t,n.op);return e=cv(e),dC(e)?e:(Yt(e instanceof rn,64498),Yt(dp(e),40251),Yt(e.filters.length>1,57927),e.filters.reduce(((i,s)=>jS(i,s))))}function jS(n,t){let e;return Yt(n instanceof Ue||n instanceof rn,38388),Yt(t instanceof Ue||t instanceof rn,25473),e=n instanceof Ue?t instanceof Ue?(function(s,o){return rn.create([s,o],"and")})(n,t):X3(n,t):t instanceof Ue?X3(t,n):(function(s,o){if(Yt(s.filters.length>0&&o.filters.length>0,48005),dp(s)&&dp(o))return CR(s,o.getFilters());const c=IT(s)?s:o,f=IT(s)?o:s,m=c.filters.map((g=>jS(g,f)));return rn.create(m,"or")})(n,t),cv(e)}function X3(n,t){if(dp(t))return CR(t,n.getFilters());{const e=t.filters.map((i=>jS(n,i)));return rn.create(e,"or")}}function cv(n){if(Yt(n instanceof Ue||n instanceof rn,11850),n instanceof Ue)return n;const t=n.getFilters();if(t.length===1)return cv(t[0]);if(wR(n))return n;const e=t.map((s=>cv(s))),i=[];return e.forEach((s=>{s instanceof Ue?i.push(s):s instanceof rn&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:rn.create(i,n.op)}class vk{constructor(){this.Sn=new FS}addToCollectionParentIndex(t,e){return this.Sn.add(e),it.resolve()}getCollectionParents(t,e){return it.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return it.resolve()}deleteFieldIndex(t,e){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,e){return it.resolve()}getDocumentsMatchingTarget(t,e){return it.resolve(null)}getIndexType(t,e){return it.resolve(0)}getFieldIndexes(t,e){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,e){return it.resolve(Rr.min())}getMinOffsetFromCollectionGroup(t,e){return it.resolve(Rr.min())}updateCollectionGroup(t,e,i){return it.resolve()}updateIndexEntries(t,e){return it.resolve()}}class FS{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new on(Pe.comparator),o=!s.has(i);return this.index[e]=s.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new on(Pe.comparator)).toArray()}}const J3="IndexedDbIndexManager",R1=new Uint8Array(0);class Ek{constructor(t,e){this.databaseId=e,this.Dn=new FS,this.Cn=new ic((i=>sd(i)),((i,s)=>C_(i,s))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Dn.has(e)){const i=e.lastSegment(),s=e.popLast();t.addOnCommittedListener((()=>{this.Dn.add(e)}));const o={collectionId:i,parent:Ks(s)};return W3(t).put(o)}return it.resolve()}getCollectionParents(t,e){const i=[],s=IDBKeyRange.bound([e,""],[Qw(e),""],!1,!0);return W3(t).H(s).next((o=>{for(const c of o){if(c.collectionId!==e)break;i.push(jl(c.parent))}return i}))}addFieldIndex(t,e){const i=f0(t),s=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(e);delete s.indexId;const o=i.add(s);if(e.indexState){const c=Pm(t);return o.next((f=>{c.put(q3(f,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return o.next()}deleteFieldIndex(t,e){const i=f0(t),s=Pm(t),o=Mm(t);return i.delete(e.indexId).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=f0(t),i=Mm(t),s=Pm(t);return e.X().next((()=>i.X())).next((()=>s.X()))}createTargetIndexes(t,e){return it.forEach(this.vn(e),(i=>this.getIndexType(t,i).next((s=>{if(s===0||s===1){const o=new Q3(i).bn();if(o!=null)return this.addFieldIndex(t,o)}}))))}getDocumentsMatchingTarget(t,e){const i=Mm(t);let s=!0;const o=new Map;return it.forEach(this.vn(e),(c=>this.Fn(t,c).next((f=>{s&&(s=!!f),o.set(c,f)})))).next((()=>{if(s){let c=ve();const f=[];return it.forEach(o,((m,g)=>{wt(J3,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(m)} to execute ${sd(e)}`);const E=(function(X,Z){const pt=ET(Z);if(pt===void 0)return null;for(const lt of ov(X,pt.fieldPath))switch(lt.op){case"array-contains-any":return lt.value.arrayValue.values||[];case"array-contains":return[lt.value]}return null})(g,m),b=(function(X,Z){const pt=new Map;for(const lt of zf(Z))for(const k of ov(X,lt.fieldPath))switch(k.op){case"==":case"in":pt.set(lt.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return pt.set(lt.fieldPath.canonicalString(),k.value),Array.from(pt.values())}return null})(g,m),A=(function(X,Z){const pt=[];let lt=!0;for(const k of zf(Z)){const M=k.kind===0?I3(X,k.fieldPath,X.startAt):N3(X,k.fieldPath,X.startAt);pt.push(M.value),lt&&(lt=M.inclusive)}return new Mh(pt,lt)})(g,m),N=(function(X,Z){const pt=[];let lt=!0;for(const k of zf(Z)){const M=k.kind===0?N3(X,k.fieldPath,X.endAt):I3(X,k.fieldPath,X.endAt);pt.push(M.value),lt&&(lt=M.inclusive)}return new Mh(pt,lt)})(g,m),D=this.Mn(m,g,A),V=this.Mn(m,g,N),U=this.xn(m,g,b),H=this.On(m.indexId,E,D,A.inclusive,V,N.inclusive,U);return it.forEach(H,(Y=>i.Z(Y,e.limit).next((X=>{X.forEach((Z=>{const pt=kt.fromSegments(Z.documentKey);c.has(pt)||(c=c.add(pt),f.push(pt))}))}))))})).next((()=>f))}return it.resolve(null)}))}vn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=yk(rn.create(t.filters,"and")).map((i=>DT(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,e),e)}On(t,e,i,s,o,c,f){const m=(e!=null?e.length:1)*Math.max(i.length,o.length),g=m/(e!=null?e.length:1),E=[];for(let b=0;b<m;++b){const A=e?this.Nn(e[b/g]):R1,N=this.Bn(t,A,i[b%g],s),D=this.Ln(t,A,o[b%g],c),V=f.map((U=>this.Bn(t,A,U,!0)));E.push(...this.createRange(N,D,V))}return E}Bn(t,e,i,s){const o=new jf(t,kt.empty(),e,i);return s?o:o.En()}Ln(t,e,i,s){const o=new jf(t,kt.empty(),e,i);return s?o.En():o}Fn(t,e){const i=new Q3(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next((o=>{let c=null;for(const f of o)i.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(t,e){let i=2;const s=this.vn(e);return it.forEach(s,(o=>this.Fn(t,o).next((c=>{c?i!==0&&c.fields.length<(function(m){let g=new on(Kn.comparator),E=!1;for(const b of m.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:g=g.add(A.field));for(const b of m.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(E?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(e)&&s.length>1&&i===2?1:i))}kn(t,e){const i=new h0;for(const s of zf(t)){const o=e.data.field(s.fieldPath);if(o==null)return null;const c=i.ln(s.kind);Hf.Wt.Dt(o,c)}return i.un()}Nn(t){const e=new h0;return Hf.Wt.Dt(t,e.ln(0)),e.un()}Kn(t,e){const i=new h0;return Hf.Wt.Dt(id(this.databaseId,e),i.ln((function(o){const c=zf(o);return c.length===0?0:c[c.length-1].kind})(t))),i.un()}xn(t,e,i){if(i===null)return[];let s=[];s.push(new h0);let o=0;for(const c of zf(t)){const f=i[o++];for(const m of s)if(this.qn(e,c.fieldPath)&&u_(f))s=this.Un(s,c,f);else{const g=m.ln(c.kind);Hf.Wt.Dt(f,g)}}return this.$n(s)}Mn(t,e,i){return this.xn(t,e,i.position)}$n(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Un(t,e,i){const s=[...t],o=[];for(const c of i.arrayValue.values||[])for(const f of s){const m=new h0;m.seed(f.un()),Hf.Wt.Dt(c,m.ln(e.kind)),o.push(m)}return o}qn(t,e){return!!t.filters.find((i=>i instanceof Ue&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(t,e){const i=f0(t),s=Pm(t);return(e?i.H(ST,IDBKeyRange.bound(e,e)):i.H()).next((o=>{const c=[];return it.forEach(o,(f=>s.get([f.indexId,this.uid]).next((m=>{c.push((function(E,b){const A=b?new n_(b.sequenceNumber,new Rr(ld(b.readTime),new kt(jl(b.documentKey)),b.largestBatchId)):n_.empty(),N=E.fields.map((([D,V])=>new L1(Kn.fromServerFormat(D),V)));return new nv(E.indexId,E.collectionGroup,N,A)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:oe(i.collectionGroup,s.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,i){const s=f0(t),o=Pm(t);return this.Wn(t).next((c=>s.H(ST,IDBKeyRange.bound(e,e)).next((f=>it.forEach(f,(m=>o.put(q3(m.indexId,this.uid,c,i))))))))}updateIndexEntries(t,e){const i=new Map;return it.forEach(e,((s,o)=>{const c=i.get(s.collectionGroup);return(c?it.resolve(c):this.getFieldIndexes(t,s.collectionGroup)).next((f=>(i.set(s.collectionGroup,f),it.forEach(f,(m=>this.Qn(t,s,m).next((g=>{const E=this.Gn(o,m);return g.isEqual(E)?it.resolve():this.zn(t,o,m,g,E)})))))))}))}jn(t,e,i,s){return Mm(t).put(s.Rn(this.uid,this.Kn(i,e.key),e.key))}Hn(t,e,i,s){return Mm(t).delete(s.An(this.uid,this.Kn(i,e.key),e.key))}Qn(t,e,i){const s=Mm(t);let o=new on(ch);return s.ee({index:lR,range:IDBKeyRange.only([i.indexId,this.uid,F1(this.Kn(i,e))])},((c,f)=>{o=o.add(new jf(i.indexId,e,Y3(f.arrayValue),Y3(f.directionalValue)))})).next((()=>o))}Gn(t,e){let i=new on(ch);const s=this.kn(e,t);if(s==null)return i;const o=ET(e);if(o!=null){const c=t.data.field(o.fieldPath);if(u_(c))for(const f of c.arrayValue.values||[])i=i.add(new jf(e.indexId,t.key,this.Nn(f),s))}else i=i.add(new jf(e.indexId,t.key,R1,s));return i}zn(t,e,i,s,o){wt(J3,"Updating index entries for document '%s'",e.key);const c=[];return(function(m,g,E,b,A){const N=m.getIterator(),D=g.getIterator();let V=xm(N),U=xm(D);for(;V||U;){let H=!1,Y=!1;if(V&&U){const X=E(V,U);X<0?Y=!0:X>0&&(H=!0)}else V!=null?Y=!0:H=!0;H?(b(U),U=xm(D)):Y?(A(V),V=xm(N)):(V=xm(N),U=xm(D))}})(s,o,ch,(f=>{c.push(this.jn(t,e,i,f))}),(f=>{c.push(this.Hn(t,e,i,f))})),it.waitFor(c)}Wn(t){let e=1;return Pm(t).ee({index:oR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),e=s.sequenceNumber+1})).next((()=>e))}createRange(t,e,i){i=i.sort(((c,f)=>ch(c,f))).filter(((c,f,m)=>!f||ch(c,m[f-1])!==0));const s=[];s.push(t);for(const c of i){const f=ch(c,t),m=ch(c,e);if(f===0)s[0]=t.En();else if(f>0&&m<0)s.push(c),s.push(c.En());else if(m>0)break}s.push(e);const o=[];for(let c=0;c<s.length;c+=2){if(this.Jn(s[c],s[c+1]))return[];const f=s[c].An(this.uid,R1,kt.empty()),m=s[c+1].An(this.uid,R1,kt.empty());o.push(IDBKeyRange.bound(f,m))}return o}Jn(t,e){return ch(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Z3)}getMinOffset(t,e){return it.mapArray(this.vn(e),(i=>this.Fn(t,i).next((s=>s||qt(44426))))).next(Z3)}}function W3(n){return Ji(n,r_)}function Mm(n){return Ji(n,G0)}function f0(n){return Ji(n,IS)}function Pm(n){return Ji(n,B0)}function Z3(n){Yt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;wS(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Rr(t.readTime,t.documentKey,e)}const $3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mC=41943040;class Hs{static withCacheSize(t){return new Hs(t,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}function pC(n,t,e){const i=n.store(jo),s=n.store(op),o=[],c=IDBKeyRange.only(e.batchId);let f=0;const m=i.ee({range:c},((E,b,A)=>(f++,A.delete())));o.push(m.next((()=>{Yt(f===1,47070,{batchId:e.batchId})})));const g=[];for(const E of e.mutations){const b=sR(t,E.key.path,e.batchId);o.push(s.delete(b)),g.push(E.key)}return it.waitFor(o).next((()=>g))}function hv(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw qt(14731);t=n.noDocument}return JSON.stringify(t).length}Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(mC,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class $v{constructor(t,e,i,s){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=s,this.Zn={}}static wt(t,e,i,s){Yt(t.uid!=="",64387);const o=t.isAuthenticated()?t.uid:"";return new $v(o,e,i,s)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hh(t).ee({index:Yf,range:i},((s,o,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,i,s){const o=qm(t),c=hh(t);return c.add({}).next((f=>{Yt(typeof f=="number",49019);const m=new US(f,e,i,s),g=(function(N,D,V){const U=V.baseMutations.map((Y=>f_(N.yt,Y))),H=V.mutations.map((Y=>f_(N.yt,Y)));return{userId:D,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:U,mutations:H}})(this.serializer,this.userId,m),E=[];let b=new on(((A,N)=>oe(A.canonicalString(),N.canonicalString())));for(const A of s){const N=sR(this.userId,A.key.path,f);b=b.add(A.key.path.popLast()),E.push(c.put(g)),E.push(o.put(N,XP))}return b.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(t,A))})),t.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),it.waitFor(E).next((()=>m))}))}lookupMutationBatch(t,e){return hh(t).get(e).next((i=>i?(Yt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),qf(this.serializer,i)):null))}Xn(t,e){return this.Zn[e]?it.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next((i=>{if(i){const s=i.keys();return this.Zn[e]=s,s}return null}))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return hh(t).ee({index:Yf,range:s},((c,f,m)=>{f.userId===this.userId&&(Yt(f.batchId>=i,47524,{Yn:i}),o=qf(this.serializer,f)),m.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=bh;return hh(t).ee({index:Yf,range:e,reverse:!0},((s,o,c)=>{i=o.batchId,c.done()})).next((()=>i))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,bh],[this.userId,Number.POSITIVE_INFINITY]);return hh(t).H(Yf,e).next((i=>i.map((s=>qf(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=U1(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=[];return qm(t).ee({range:s},((c,f,m)=>{const[g,E,b]=c,A=jl(E);if(g===this.userId&&e.path.isEqual(A))return hh(t).get(b).next((N=>{if(!N)throw qt(61480,{er:c,batchId:b});Yt(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:b}),o.push(qf(this.serializer,N))}));m.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new on(oe);const s=[];return e.forEach((o=>{const c=U1(this.userId,o.path),f=IDBKeyRange.lowerBound(c),m=qm(t).ee({range:f},((g,E,b)=>{const[A,N,D]=g,V=jl(N);A===this.userId&&o.path.isEqual(V)?i=i.add(D):b.done()}));s.push(m)})),it.waitFor(s).next((()=>this.tr(t,i)))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1,o=U1(this.userId,i),c=IDBKeyRange.lowerBound(o);let f=new on(oe);return qm(t).ee({range:c},((m,g,E)=>{const[b,A,N]=m,D=jl(A);b===this.userId&&i.isPrefixOf(D)?D.length===s&&(f=f.add(N)):E.done()})).next((()=>this.tr(t,f)))}tr(t,e){const i=[],s=[];return e.forEach((o=>{s.push(hh(t).get(o).next((c=>{if(c===null)throw qt(35274,{batchId:o});Yt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),i.push(qf(this.serializer,c))})))})),it.waitFor(s).next((()=>i))}removeMutationBatch(t,e){return pC(t.le,this.userId,e).next((i=>(t.addOnCommittedListener((()=>{this.nr(e.batchId)})),it.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return it.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return qm(t).ee({range:i},((o,c,f)=>{if(o[0]===this.userId){const m=jl(o[1]);s.push(m)}else f.done()})).next((()=>{Yt(s.length===0,56720,{rr:s.map((o=>o.canonicalString()))})}))}))}containsKey(t,e){return gC(t,this.userId,e)}ir(t){return _C(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:bh,lastStreamToken:""}))}}function gC(n,t,e){const i=U1(t,e.path),s=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return qm(n).ee({range:o,Y:!0},((f,m,g)=>{const[E,b,A]=f;E===t&&b===s&&(c=!0),g.done()})).next((()=>c))}function hh(n){return Ji(n,jo)}function qm(n){return Ji(n,op)}function _C(n){return Ji(n,s_)}class ud{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new ud(0)}static ar(){return new ud(-1)}}class Tk{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.ur(t).next((e=>{const i=new ud(e.highestTargetId);return e.highestTargetId=i.next(),this.cr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((e=>Wt.fromTimestamp(new an(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,i){return this.ur(t).next((s=>(s.highestListenSequenceNumber=e,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.cr(t,s))))}addTargetData(t,e){return this.lr(t,e).next((()=>this.ur(t).next((i=>(i.targetCount+=1,this.hr(e,i),this.cr(t,i))))))}updateTargetData(t,e){return this.lr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Vm(t).delete(e.targetId))).next((()=>this.ur(t))).next((i=>(Yt(i.targetCount>0,8065),i.targetCount-=1,this.cr(t,i))))}removeTargets(t,e,i){let s=0;const o=[];return Vm(t).ee(((c,f)=>{const m=D0(f);m.sequenceNumber<=e&&i.get(m.targetId)===null&&(s++,o.push(this.removeTargetData(t,m)))})).next((()=>it.waitFor(o))).next((()=>s))}forEachTarget(t,e){return Vm(t).ee(((i,s)=>{const o=D0(s);e(o)}))}ur(t){return t5(t).get(av).next((e=>(Yt(e!==null,2888),e)))}cr(t,e){return t5(t).put(av,e)}lr(t,e){return Vm(t).put(hC(this.serializer,e))}hr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.ur(t).next((e=>e.targetCount))}getTargetData(t,e){const i=sd(e),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Vm(t).ee({range:s,index:rR},((c,f,m)=>{const g=D0(f);C_(e,g.target)&&(o=g,m.done())})).next((()=>o))}addMatchingKeys(t,e,i){const s=[],o=yh(t);return e.forEach((c=>{const f=Ks(c.path);s.push(o.put({targetId:i,path:f})),s.push(this.referenceDelegate.addReference(t,i,c))})),it.waitFor(s)}removeMatchingKeys(t,e,i){const s=yh(t);return it.forEach(e,(o=>{const c=Ks(o.path);return it.waitFor([s.delete([i,c]),this.referenceDelegate.removeReference(t,i,o)])}))}removeMatchingKeysForTargetId(t,e){const i=yh(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),s=yh(t);let o=ve();return s.ee({range:i,Y:!0},((c,f,m)=>{const g=jl(c[1]),E=new kt(g);o=o.add(E)})).next((()=>o))}containsKey(t,e){const i=Ks(e.path),s=IDBKeyRange.bound([i],[Qw(i)],!1,!0);let o=0;return yh(t).ee({index:CS,Y:!0,range:s},(([c,f],m,g)=>{c!==0&&(o++,g.done())})).next((()=>o>0))}At(t,e){return Vm(t).get(e).next((i=>i?D0(i):null))}}function Vm(n){return Ji(n,lp)}function t5(n){return Ji(n,Zf)}function yh(n){return Ji(n,up)}const e5="LruGarbageCollector",Sk=1048576;function n5([n,t],[e,i]){const s=oe(n,e);return s===0?oe(t,i):s}class bk{constructor(t){this.Pr=t,this.buffer=new on(n5),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();n5(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class yC{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){wt(e5,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){qh(e)?wt(e5,"Ignoring IndexedDB error during garbage collection: ",e):await Gh(e)}await this.Ar(3e5)}))}}class Ak{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return it.resolve(Xa.ce);const i=new bk(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve($3)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$3):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,s,o,c,f,m,g;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,c=Date.now(),this.nthSequenceNumber(t,s)))).next((b=>(i=b,f=Date.now(),this.removeTargets(t,i,e)))).next((b=>(o=b,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((b=>(g=Date.now(),Um()<=Me.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-E}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function vC(n,t){return new Ak(n,t)}class wk{constructor(t,e){this.db=t,this.garbageCollector=vC(this,e)}dr(t){const e=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}mr(t,e){return this.yr(t,((i,s)=>e(s)))}addReference(t,e,i){return C1(t,i)}removeReference(t,e,i){return C1(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return C1(t,e)}wr(t,e){return(function(s,o){let c=!1;return _C(s).te((f=>gC(s,f,o).next((m=>(m&&(c=!0),it.resolve(!m)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.yr(t,((c,f)=>{if(f<=e){const m=this.wr(t,c).next((g=>{if(!g)return o++,i.getEntry(t,c).next((()=>(i.removeEntry(c,Wt.min()),yh(t).delete((function(b){return[0,Ks(b.path)]})(c)))))}));s.push(m)}})).next((()=>it.waitFor(s))).next((()=>i.apply(t))).next((()=>o))}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return C1(t,e)}yr(t,e){const i=yh(t);let s,o=Xa.ce;return i.ee({index:CS},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(o!==Xa.ce&&e(new kt(jl(s)),o),o=g,s=m):o=Xa.ce})).next((()=>{o!==Xa.ce&&e(new kt(jl(s)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function C1(n,t){return yh(n).put((function(i,s){return{targetId:0,path:Ks(i.path),sequenceNumber:s}})(t,n.currentSequenceNumber))}class EC{constructor(){this.changes=new ic((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ln.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?it.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Rk{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Lf(t).put(i)}removeEntry(t,e,i){return Lf(t).delete((function(o,c){const f=o.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],uv(c),f[f.length-1]]})(e,i))}updateMetadata(t,e){return this.getMetadata(t).next((i=>(i.byteSize+=e,this.br(t,i))))}getEntry(t,e){let i=Ln.newInvalidDocument(e);return Lf(t).ee({index:z1,range:IDBKeyRange.only(d0(e))},((s,o)=>{i=this.Sr(e,o)})).next((()=>i))}Dr(t,e){let i={size:0,document:Ln.newInvalidDocument(e)};return Lf(t).ee({index:z1,range:IDBKeyRange.only(d0(e))},((s,o)=>{i={document:this.Sr(e,o),size:hv(o)}})).next((()=>i))}getEntries(t,e){let i=Wa();return this.Cr(t,e,((s,o)=>{const c=this.Sr(s,o);i=i.insert(s,c)})).next((()=>i))}vr(t,e){let i=Wa(),s=new Cn(kt.comparator);return this.Cr(t,e,((o,c)=>{const f=this.Sr(o,c);i=i.insert(o,f),s=s.insert(o,hv(c))})).next((()=>({documents:i,Fr:s})))}Cr(t,e,i){if(e.isEmpty())return it.resolve();let s=new on(a5);e.forEach((m=>s=s.add(m)));const o=IDBKeyRange.bound(d0(s.first()),d0(s.last())),c=s.getIterator();let f=c.getNext();return Lf(t).ee({index:z1,range:o},((m,g,E)=>{const b=kt.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&a5(f,b)<0;)i(f,null),f=c.getNext();f&&f.isEqual(b)&&(i(f,g),f=c.hasNext()?c.getNext():null),f?E.j(d0(f)):E.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,i,s,o){const c=e.path,f=[c.popLast().toArray(),c.lastSegment(),uv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lf(t).H(IDBKeyRange.bound(f,m,!0)).next((g=>{o?.incrementDocumentReadCount(g.length);let E=Wa();for(const b of g){const A=this.Sr(kt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(N_(e,A)||s.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(t,e,i,s){let o=Wa();const c=s5(e,i),f=s5(e,Rr.max());return Lf(t).ee({index:aR,range:IDBKeyRange.bound(c,f,!0)},((m,g,E)=>{const b=this.Sr(kt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(b.key,b),o.size===s&&E.done()})).next((()=>o))}newChangeBuffer(t){return new Ck(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return i5(t).get(TT).next((e=>(Yt(!!e,20021),e)))}br(t,e){return i5(t).put(TT,e)}Sr(t,e){if(e){const i=hk(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Wt.min())))return i}return Ln.newInvalidDocument(t)}}function TC(n){return new Rk(n)}class Ck extends EC{constructor(t,e){super(),this.Mr=t,this.trackRemovals=e,this.Or=new ic((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(t){const e=[];let i=0,s=new on(((o,c)=>oe(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const f=this.Or.get(o);if(e.push(this.Mr.removeEntry(t,o,f.readTime)),c.isValidDocument()){const m=B3(this.Mr.serializer,c);s=s.add(o.path.popLast());const g=hv(m);i+=g-f.size,e.push(this.Mr.addEntry(t,o,m))}else if(i-=f.size,this.trackRemovals){const m=B3(this.Mr.serializer,c.convertToNoDocument(Wt.min()));e.push(this.Mr.addEntry(t,o,m))}})),s.forEach((o=>{e.push(this.Mr.indexManager.addToCollectionParentIndex(t,o))})),e.push(this.Mr.updateMetadata(t,i)),it.waitFor(e)}getFromCache(t,e){return this.Mr.Dr(t,e).next((i=>(this.Or.set(e,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(t,e){return this.Mr.vr(t,e).next((({documents:i,Fr:s})=>(s.forEach(((o,c)=>{this.Or.set(o,{size:c,readTime:i.get(o).readTime})})),i)))}}function i5(n){return Ji(n,a_)}function Lf(n){return Ji(n,sv)}function d0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function s5(n,t){const e=t.documentKey.path.toArray();return[n,uv(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function a5(n,t){const e=n.path.toArray(),i=t.path.toArray();let s=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(s=oe(e[o],i[o]),s)return s;return s=oe(e.length,i.length),s||(s=oe(e[e.length-2],i[i.length-2]),s||oe(e[e.length-1],i[i.length-1]))}class Ik{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class SC{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&j0(i.mutation,s,Ja.empty(),an.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,ve()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=ve()){const s=Fl();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((o=>{let c=I0();return o.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Fl();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,ve())))}populateOverlays(t,e,i){const s=[];return i.forEach((o=>{e.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(t,s).next((o=>{o.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,i,s){let o=Wa();const c=H0(),f=(function(){return H0()})();return e.forEach(((m,g)=>{const E=i.get(g.key);s.has(g.key)&&(E===void 0||E.mutation instanceof sc)?o=o.insert(g.key,g):E!==void 0?(c.set(g.key,E.mutation.getFieldMask()),j0(E.mutation,g,E.mutation.getFieldMask(),an.now())):c.set(g.key,Ja.empty())})),this.recalculateAndSaveOverlays(t,o).next((m=>(m.forEach(((g,E)=>c.set(g,E))),e.forEach(((g,E)=>f.set(g,new Ik(E,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(t,e){const i=H0();let s=new Cn(((c,f)=>c-f)),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let E=i.get(m)||Ja.empty();E=f.applyToLocalView(g,E),i.set(m,E);const b=(s.get(f.batchId)||ve()).add(m);s=s.insert(f.batchId,b)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,E=m.value,b=LR();E.forEach((A=>{if(!o.has(A)){const N=jR(e.get(A),i.get(A));N!==null&&b.set(A,N),o=o.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,b))}return it.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return MV(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):PS(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-o.size):it.resolve(Fl());let f=rp,m=o;return c.next((g=>it.forEach(g,((E,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),o.get(E)?it.resolve():this.remoteDocumentCache.getEntry(t,E).next((A=>{m=m.insert(E,A)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,m,g,ve()))).next((E=>({batchId:f,changes:kR(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new kt(e)).next((i=>{let s=I0();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const o=e.collectionGroup;let c=I0();return this.indexManager.getCollectionParents(t,o).next((f=>it.forEach(f,(m=>{const g=(function(b,A){return new nc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(e,m.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next((E=>{E.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,s)))).next((c=>{o.forEach(((m,g)=>{const E=g.getKey();c.get(E)===null&&(c=c.insert(E,Ln.newInvalidDocument(E)))}));let f=I0();return c.forEach(((m,g)=>{const E=o.get(m);E!==void 0&&j0(E.mutation,g,Ja.empty(),an.now()),N_(e,g)&&(f=f.insert(m,g))})),f}))}}class Nk{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return it.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ei(s.createTime)}})(e)),it.resolve()}getNamedQuery(t,e){return it.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(s){return{name:s.name,query:HS(s.bundledQuery),readTime:Ei(s.readTime)}})(e)),it.resolve()}}class Dk{constructor(){this.overlays=new Cn(kt.comparator),this.Lr=new Map}getOverlay(t,e){return it.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Fl();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,o)=>{this.bt(t,e,o)})),it.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(i)),it.resolve()}getOverlaysForCollection(t,e,i){const s=Fl(),o=e.length+1,c=new kt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>i&&s.set(m.getKey(),m)}return it.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let o=new Cn(((g,E)=>g-E));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let E=o.get(g.largestBatchId);E===null&&(E=Fl(),o=o.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const f=Fl(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,E)=>f.set(g,E))),!(f.size()>=s)););return it.resolve(f)}bt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new BS(e,i));let o=this.Lr.get(e);o===void 0&&(o=ve(),this.Lr.set(e,o)),this.Lr.set(e,o.add(i.key))}}class xk{constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,it.resolve()}}class KS{constructor(){this.kr=new on(as.Kr),this.qr=new on(as.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const i=new as(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new as(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){const e=new kt(new Pe([])),i=new as(e,t),s=new as(e,t+1),o=[];return this.qr.forEachInRange([i,s],(c=>{this.Wr(c),o.push(c.key)})),o}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new kt(new Pe([])),i=new as(e,t),s=new as(e,t+1);let o=ve();return this.qr.forEachInRange([i,s],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new as(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class as{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return kt.comparator(t.key,e.key)||oe(t.Hr,e.Hr)}static Ur(t,e){return oe(t.Hr,e.Hr)||kt.comparator(t.key,e.key)}}class Ok{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new on(as.Kr)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new US(o,e,i,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new as(f.key,o)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,e){return it.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),o=s<0?0:s;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?bh:this.Yn-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new as(e,0),s=new as(e,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],(c=>{const f=this.Zr(c.Hr);o.push(f)})),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new on(oe);return e.forEach((s=>{const o=new as(s,0),c=new as(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],(f=>{i=i.add(f.Hr)}))})),it.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let o=i;kt.isDocumentKey(o)||(o=o.child(""));const c=new as(new kt(o),0);let f=new on(oe);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Hr)),!0)}),c),it.resolve(this.Yr(f))}Yr(t){const e=[];return t.forEach((i=>{const s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){Yt(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return it.forEach(e.mutations,(s=>{const o=new as(s.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){const i=new as(e,0),s=this.Jr.firstAfterOrEqual(i);return it.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Mk{constructor(t){this.ti=t,this.docs=(function(){return new Cn(kt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),o=s?s.size:0,c=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return it.resolve(i?i.document.mutableCopy():Ln.newInvalidDocument(e))}getEntries(t,e){let i=Wa();return e.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ln.newInvalidDocument(s))})),it.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let o=Wa();const c=e.path,f=new kt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:E}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||wS($w(E),i)<=0||(s.has(E.key)||N_(e,E))&&(o=o.insert(E.key,E.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,e,i,s){qt(9500)}ni(t,e){return it.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new Pk(this)}getSize(t){return it.resolve(this.size)}}class Pk extends EC{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Mr.addEntry(t,s)):this.Mr.removeEntry(i)})),it.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class Vk{constructor(t){this.persistence=t,this.ri=new ic((e=>sd(e)),C_),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.ii=0,this.si=new KS,this.targetCount=0,this.oi=ud._r()}forEachTarget(t,e){return this.ri.forEach(((i,s)=>e(s))),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),it.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new ud(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,it.resolve()}updateTargetData(t,e){return this.lr(e),it.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,e,i){let s=0;const o=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),it.waitFor(o).next((()=>s))}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,e){const i=this.ri.get(e)||null;return it.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),it.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);const s=this.persistence.referenceDelegate,o=[];return s&&e.forEach((c=>{o.push(s.markPotentiallyOrphaned(t,c))})),it.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),it.resolve()}getMatchingKeysForTargetId(t,e){const i=this.si.jr(e);return it.resolve(i)}containsKey(t,e){return it.resolve(this.si.containsKey(e))}}class YS{constructor(t,e){this._i={},this.overlays={},this.ai=new Xa(0),this.ui=!1,this.ui=!0,this.ci=new xk,this.referenceDelegate=t(this),this.li=new Vk(this),this.indexManager=new vk,this.remoteDocumentCache=(function(s){return new Mk(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new cC(e),this.Pi=new Nk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Dk,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new Ok(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){wt("MemoryPersistence","Starting transaction:",t);const s=new kk(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(t,e){return it.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}}class kk extends eR{constructor(t){super(),this.currentSequenceNumber=t}}class t2{constructor(t){this.persistence=t,this.Ri=new KS,this.Ai=null}static Vi(t){return new t2(t)}get di(){if(this.Ai)return this.Ai;throw qt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),it.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),it.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),it.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.di,(i=>{const s=kt.fromPath(i);return this.mi(t,s).next((o=>{o||e.removeEntry(s,Wt.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return it.or([()=>it.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class fv{constructor(t,e){this.persistence=t,this.fi=new ic((i=>Ks(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=vC(this,e)}static Vi(t,e){return new fv(t,e)}Ti(){}Ii(t){return it.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return it.forEach(this.fi,((i,s)=>this.wr(t,i,s).next((o=>o?it.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(t,(c=>this.wr(t,c,e).next((f=>{f||(i++,o.removeEntry(c,Wt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=G1(t.data.value)),e}wr(t,e,i){return it.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.fi.get(e);return it.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Lk{constructor(t){this.serializer=t}k(t,e,i,s){const o=new Hv("createOrUpgrade",e);i<1&&s>=1&&((function(m){m.createObjectStore(R_)})(t),(function(m){m.createObjectStore(s_,{keyPath:QP}),m.createObjectStore(jo,{keyPath:g3,autoIncrement:!0}).createIndex(Yf,_3,{unique:!0}),m.createObjectStore(op)})(t),r5(t),(function(m){m.createObjectStore(Bf)})(t));let c=it.resolve();return i<3&&s>=3&&(i!==0&&((function(m){m.deleteObjectStore(up),m.deleteObjectStore(lp),m.deleteObjectStore(Zf)})(t),r5(t)),c=c.next((()=>(function(m){const g=m.store(Zf),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return g.put(av,E)})(o)))),i<4&&s>=4&&(i!==0&&(c=c.next((()=>(function(m,g){return g.store(jo).H().next((b=>{m.deleteObjectStore(jo),m.createObjectStore(jo,{keyPath:g3,autoIncrement:!0}).createIndex(Yf,_3,{unique:!0});const A=g.store(jo),N=b.map((D=>A.put(D)));return it.waitFor(N)}))})(t,o)))),c=c.next((()=>{(function(m){m.createObjectStore(cp,{keyPath:iV})})(t)}))),i<5&&s>=5&&(c=c.next((()=>this.gi(o)))),i<6&&s>=6&&(c=c.next((()=>((function(m){m.createObjectStore(a_)})(t),this.pi(o))))),i<7&&s>=7&&(c=c.next((()=>this.yi(o)))),i<8&&s>=8&&(c=c.next((()=>this.wi(t,o)))),i<9&&s>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)}))),i<10&&s>=10&&(c=c.next((()=>this.bi(o)))),i<11&&s>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(jv,{keyPath:sV})})(t),(function(m){m.createObjectStore(Fv,{keyPath:aV})})(t)}))),i<12&&s>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Kv,{keyPath:fV});g.createIndex(bT,dV,{unique:!1}),g.createIndex(uR,mV,{unique:!1})})(t)}))),i<13&&s>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(sv,{keyPath:JP});g.createIndex(z1,WP),g.createIndex(aR,ZP)})(t))).next((()=>this.Si(t,o))).next((()=>t.deleteObjectStore(Bf)))),i<14&&s>=14&&(c=c.next((()=>this.Di(t,o)))),i<15&&s>=15&&(c=c.next((()=>(function(m){m.createObjectStore(IS,{keyPath:rV,autoIncrement:!0}).createIndex(ST,oV,{unique:!1}),m.createObjectStore(B0,{keyPath:lV}).createIndex(oR,uV,{unique:!1}),m.createObjectStore(G0,{keyPath:cV}).createIndex(lR,hV,{unique:!1})})(t)))),i<16&&s>=16&&(c=c.next((()=>{e.objectStore(B0).clear()})).next((()=>{e.objectStore(G0).clear()}))),i<17&&s>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(NS,{keyPath:pV})})(t)}))),i<18&&s>=18&&Cw()&&(c=c.next((()=>{e.objectStore(B0).clear()})).next((()=>{e.objectStore(G0).clear()}))),c}pi(t){let e=0;return t.store(Bf).ee(((i,s)=>{e+=hv(s)})).next((()=>{const i={byteSize:e};return t.store(a_).put(TT,i)}))}gi(t){const e=t.store(s_),i=t.store(jo);return e.H().next((s=>it.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,bh],[o.userId,o.lastAcknowledgedBatchId]);return i.H(Yf,c).next((f=>it.forEach(f,(m=>{Yt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=qf(this.serializer,m);return pC(t,o.userId,g).next((()=>{}))}))))}))))}yi(t){const e=t.store(up),i=t.store(Bf);return t.store(Zf).get(av).next((s=>{const o=[];return i.ee(((c,f)=>{const m=new Pe(c),g=(function(b){return[0,Ks(b)]})(m);o.push(e.get(g).next((E=>E?it.resolve():(b=>e.put({targetId:0,path:Ks(b),sequenceNumber:s.highestListenSequenceNumber}))(m))))})).next((()=>it.waitFor(o)))}))}wi(t,e){t.createObjectStore(r_,{keyPath:nV});const i=e.store(r_),s=new FS,o=c=>{if(s.add(c)){const f=c.lastSegment(),m=c.popLast();return i.put({collectionId:f,parent:Ks(m)})}};return e.store(Bf).ee({Y:!0},((c,f)=>{const m=new Pe(c);return o(m.popLast())})).next((()=>e.store(op).ee({Y:!0},(([c,f,m],g)=>{const E=jl(f);return o(E.popLast())}))))}bi(t){const e=t.store(lp);return e.ee(((i,s)=>{const o=D0(s),c=hC(this.serializer,o);return e.put(c)}))}Si(t,e){const i=e.store(Bf),s=[];return i.ee(((o,c)=>{const f=e.store(sv),m=(function(b){return b.document?new kt(Pe.fromString(b.document.name).popFirst(5)):b.noDocument?kt.fromSegments(b.noDocument.path):b.unknownDocument?kt.fromSegments(b.unknownDocument.path):qt(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(f.put(g))})).next((()=>it.waitFor(s)))}Di(t,e){const i=e.store(jo),s=TC(this.serializer),o=new YS(t2.Vi,this.serializer.yt);return i.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??ve();qf(this.serializer,m).keys().forEach((E=>g=g.add(E))),f.set(m.userId,g)})),it.forEach(f,((m,g)=>{const E=new rs(g),b=Zv.wt(this.serializer,E),A=o.getIndexManager(E),N=$v.wt(E,this.serializer,A,o.referenceDelegate);return new SC(s,N,b,A).recalculateAndSaveOverlaysForDocumentKeys(new AT(e,Xa.ce),m).next()}))}))}}function r5(n){n.createObjectStore(up,{keyPath:tV}).createIndex(CS,eV,{unique:!0}),n.createObjectStore(lp,{keyPath:"targetId"}).createIndex(rR,$P,{unique:!0}),n.createObjectStore(Zf)}const fh="IndexedDbPersistence",ME=18e5,PE=5e3,VE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bC="main";class QS{constructor(t,e,i,s,o,c,f,m,g,E,b=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Ci=o,this.window=c,this.document=f,this.Fi=g,this.Mi=E,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=A=>Promise.resolve(),!QS.v())throw new Tt(ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wk(this,s),this.Ki=e+bC,this.serializer=new cC(m),this.qi=new Yl(this.Ki,this.xi,new Lk(this.serializer)),this.ci=new dk,this.li=new Tk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TC(this.serializer),this.Pi=new fk,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,E===!1&&vi(fh,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(ht.FAILED_PRECONDITION,VE);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new Xa(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>I1(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((e=>this.isPrimary&&!e?this.Ji(t).next((()=>!1)):!!e&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(qh(t))return wt(fh,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return wt(fh,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return m0(t).get(Dm).next((e=>it.resolve(this.Xi(e))))}Yi(t){return I1(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,ME)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const i=Ji(e,cp);return i.H().next((s=>{const o=this.ns(s,ME),c=s.filter((f=>o.indexOf(f)===-1));return it.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const e of t)this.Ui.removeItem(this.rs(e.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?it.resolve(!0):m0(t).get(Dm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,PE)&&!this.ss(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new Tt(ht.FAILED_PRECONDITION,VE);return!1}}return!(!this.networkEnabled||!this.inForeground)||I1(t).H().next((i=>this.ns(i,PE).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,f=this.networkEnabled===s.networkEnabled;if(o||c&&f)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&wt(fh,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[R_,cp],(t=>{const e=new AT(t,Xa.ce);return this.Ji(e).next((()=>this.Yi(e)))})),this.qi.close(),this.ls()}ns(t,e){return t.filter((i=>this.ts(i.updateTimeMs,e)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>I1(t).H().next((e=>this.ns(e,ME).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,e){return $v.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ek(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Zv.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,e,i){wt(fh,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",o=(function(m){return m===18?yV:m===17?dR:m===16?_V:m===15?DS:m===14?fR:m===13?hR:m===12?gV:m===11?cR:void qt(60245)})(this.xi);let c;return this.qi.runTransaction(t,s,o,(f=>(c=new AT(f,this.ai?this.ai.next():Xa.ce),e==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw vi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Tt(ht.FAILED_PRECONDITION,tR);return i(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(t){return m0(t).get(Dm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,PE)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Tt(ht.FAILED_PRECONDITION,VE)}))}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return m0(t).put(Dm,e)}static v(){return Yl.v()}Ji(t){const e=m0(t);return e.get(Dm).next((i=>this.Xi(i)?(wt(fh,"Releasing primary lease."),e.delete(Dm)):it.resolve()))}ts(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(vi(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Rw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){try{const e=this.Ui?.getItem(this.rs(t))!==null;return wt(fh,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return vi(fh,"Failed to get zombied client id.",e),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){vi("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function m0(n){return Ji(n,R_)}function I1(n){return Ji(n,cp)}function XS(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class JS{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=s}static Es(t,e){let i=ve(),s=ve();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new JS(t,e.fromCache,i,s)}}class Uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class AC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Rw()?8:nR(ni())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const o={result:null};return this.gs(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ps(t,e,s,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new Uk;return this.ys(t,e,c).next((f=>{if(o.result=f,this.As)return this.ws(t,e,c,f.size)}))})).next((()=>o.result))}ws(t,e,i,s){return i.documentReadCount<this.Vs?(Um()<=Me.DEBUG&&wt("QueryEngine","SDK will not create cache indexes for query:",zm(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),it.resolve()):(Um()<=Me.DEBUG&&wt("QueryEngine","Query:",zm(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(Um()<=Me.DEBUG&&wt("QueryEngine","The SDK decides to create cache indexes for query:",zm(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pa(e))):it.resolve())}gs(t,e){if(D3(e))return it.resolve(null);let i=pa(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=lv(e,null,"F"),i=pa(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=ve(...o);return this.fs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,i).next((m=>{const g=this.bs(e,f);return this.Ss(e,g,c,m.readTime)?this.gs(t,lv(e,null,"F")):this.Ds(t,g,e,m)}))))})))))}ps(t,e,i,s){return D3(e)||s.isEqual(Wt.min())?it.resolve(null):this.fs.getDocuments(t,i).next((o=>{const c=this.bs(e,o);return this.Ss(e,c,i,s)?it.resolve(null):(Um()<=Me.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zm(e)),this.Ds(t,c,e,Zw(s,rp)).next((f=>f)))}))}bs(t,e){let i=new on(PR(t));return e.forEach(((s,o)=>{N_(t,o)&&(i=i.add(o))})),i}Ss(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(t,e,i){return Um()<=Me.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",zm(e)),this.fs.getDocumentsMatchingQuery(t,e,Rr.min(),i)}Ds(t,e,i,s){return this.fs.getDocumentsMatchingQuery(t,i,s).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const WS="LocalStore",zk=3e8;class Bk{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.vs=new Cn(oe),this.Fs=new ic((o=>sd(o)),C_),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new SC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function wC(n,t,e,i){return new Bk(n,t,e,i)}async function RC(n,t){const e=zt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],f=[];let m=ve();for(const g of s){c.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}for(const g of o){f.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}return e.localDocuments.getDocuments(i,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function Gk(n,t){const e=zt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=t.batch.keys(),o=e.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,E){const b=g.batch,A=b.keys();let N=it.resolve();return A.forEach((D=>{N=N.next((()=>E.getEntry(m,D))).next((V=>{const U=g.docVersions.get(D);Yt(U!==null,48541),V.version.compareTo(U)<0&&(b.applyToRemoteDocument(V,g),V.isValidDocument()&&(V.setReadTime(g.commitVersion),E.addEntry(V)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,b)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=ve();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,s)))}))}function CC(n){const t=zt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function qk(n,t){const e=zt(n),i=t.snapshotVersion;let s=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});s=e.vs;const f=[];t.targetChanges.forEach(((E,b)=>{const A=s.get(b);if(!A)return;f.push(e.li.removeMatchingKeys(o,E.removedDocuments,b).next((()=>e.li.addMatchingKeys(o,E.addedDocuments,b))));let N=A.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(b)!==null?N=N.withResumeToken(hi.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),s=s.insert(b,N),(function(V,U,H){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=zk?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(A,N,E)&&f.push(e.li.updateTargetData(o,N))}));let m=Wa(),g=ve();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(o,E))})),f.push(IC(o,c,t.documentUpdates).next((E=>{m=E.Bs,g=E.Ls}))),!i.isEqual(Wt.min())){const E=e.li.getLastRemoteSnapshotVersion(o).next((b=>e.li.setTargetsMetadata(o,o.currentSequenceNumber,i)));f.push(E)}return it.waitFor(f).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,m,g))).next((()=>m))})).then((o=>(e.vs=s,o)))}function IC(n,t,e){let i=ve(),s=ve();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=Wa();return e.forEach(((f,m)=>{const g=o.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(Wt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):wt(WS,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function Hk(n,t){const e=zt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=bh),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function _p(n,t){const e=zt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.li.getTargetData(i,t).next((o=>o?(s=o,it.resolve(s)):e.li.allocateTargetId(i).next((c=>(s=new qu(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=e.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function yp(n,t,e){const i=zt(n),s=i.vs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!qh(c))throw c;wt(WS,`Failed to update sequence numbers for target ${t}: ${c}`)}i.vs=i.vs.remove(t),i.Fs.delete(s.target)}function dv(n,t,e){const i=zt(n);let s=Wt.min(),o=ve();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,E){const b=zt(m),A=b.Fs.get(E);return A!==void 0?it.resolve(b.vs.get(A)):b.li.getTargetData(g,E)})(i,c,pa(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{o=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?s:Wt.min(),e?o:ve()))).next((f=>(xC(i,MR(t),f),{documents:f,ks:o})))))}function NC(n,t){const e=zt(n),i=zt(e.li),s=e.vs.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,t).next((c=>c?c.target:null))))}function DC(n,t){const e=zt(n),i=e.Ms.get(t)||Wt.min();return e.persistence.runTransaction("Get new document changes","readonly",(s=>e.xs.getAllFromCollectionGroup(s,t,Zw(i,rp),Number.MAX_SAFE_INTEGER))).then((s=>(xC(e,t,s),s)))}function xC(n,t,e){let i=n.Ms.get(t)||Wt.min();e.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Ms.set(t,i)}async function jk(n,t,e,i){const s=zt(n);let o=ve(),c=Wa();for(const g of e){const E=t.Ks(g.metadata.name);g.document&&(o=o.add(E));const b=t.qs(g);b.setReadTime(t.Us(g.metadata.readTime)),c=c.insert(E,b)}const f=s.xs.newChangeBuffer({trackRemovals:!0}),m=await _p(s,(function(E){return pa(xp(Pe.fromString(`__bundle__/docs/${E}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(g=>IC(g,f,c).next((E=>(f.apply(g),E))).next((E=>s.li.removeMatchingKeysForTargetId(g,m.targetId).next((()=>s.li.addMatchingKeys(g,o,m.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(g,E.Bs,E.Ls))).next((()=>E.Bs))))))}async function Fk(n,t,e=ve()){const i=await _p(n,pa(HS(t.bundledQuery))),s=zt(n);return s.persistence.runTransaction("Save named query","readwrite",(o=>{const c=Ei(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return s.Pi.saveNamedQuery(o,t);const f=i.withResumeToken(hi.EMPTY_BYTE_STRING,c);return s.vs=s.vs.insert(f.targetId,f),s.li.updateTargetData(o,f).next((()=>s.li.removeMatchingKeysForTargetId(o,i.targetId))).next((()=>s.li.addMatchingKeys(o,e,i.targetId))).next((()=>s.Pi.saveNamedQuery(o,t)))}))}const OC="firestore_clients";function o5(n,t){return`${OC}_${n}_${t}`}const MC="firestore_mutations";function l5(n,t,e){let i=`${MC}_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const PC="firestore_targets";function kE(n,t){return`${PC}_${n}_${t}`}const Ul="SharedClientState";class mv{constructor(t,e,i,s){this.user=t,this.batchId=e,this.state=i,this.error=s}static $s(t,e,i){const s=JSON.parse(i);let o,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(o=new Tt(s.error.code,s.error.message))),c?new mv(t,e,s.state,o):(vi(Ul,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class F0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Tt(i.error.code,i.error.message))),o?new F0(t,i.state,s):(vi(Ul,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class pv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=VS();for(let c=0;s&&c<i.activeTargetIds.length;++c)s=iR(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return s?new pv(t,o):(vi(Ul,`Failed to parse client data for instance '${t}': ${e}`),null)}}class ZS{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new ZS(e.clientId,e.onlineState):(vi(Ul,`Failed to parse online state: ${t}`),null)}}class zT{constructor(){this.activeTargetIds=VS()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class LE{constructor(t,e,i,s,o){this.window=t,this.Ci=e,this.persistenceKey=i,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Cn(oe),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=o5(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new zT),this.eo=new RegExp(`^${OC}_${c}_([^_]*)$`),this.no=new RegExp(`^${MC}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${PC}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const i of t){if(i===this.zs)continue;const s=this.getItem(o5(this.persistenceKey,i));if(s){const o=pv.$s(i,s);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();const e=this.storage.getItem(this.io);if(e){const i=this._o(e);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let e=!1;return this.Js.forEach(((i,s)=>{s.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,e,i){this.co(t,e,i),this.lo(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(kE(this.persistenceKey,t));if(s){const o=F0.$s(t,s);o&&(i=o.state)}}return e&&this.ho.Qs(t),this.oo(),i}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(kE(this.persistenceKey,t))}updateQueryState(t,e,i){this.Po(t,e,i)}handleUserChange(t,e,i){e.forEach((s=>{this.lo(s)})),this.currentUser=t,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return wt(Ul,"READ",t,e),e}setItem(t,e){wt(Ul,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){wt(Ul,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(wt(Ul,"EVENT",e.key,e.newValue),e.key===this.Xs)return void vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.eo.test(e.key)){if(e.newValue==null){const i=this.Eo(e.key);return this.Ro(i,null)}{const i=this.Ao(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(e.key)){if(e.newValue!==null){const i=this.Vo(e.key,e.newValue);if(i)return this.mo(i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(e.key===this.io){if(e.newValue!==null){const i=this._o(e.newValue);if(i)return this.ao(i)}}else if(e.key===this.Ys){const i=(function(o){let c=Xa.ce;if(o!=null)try{const f=JSON.parse(o);Yt(typeof f=="number",30636,{yo:o}),c=f}catch(f){vi(Ul,"Failed to read sequence number from WebStorage",f)}return c})(e.newValue);i!==Xa.ce&&this.sequenceNumberHandler(i)}else if(e.key===this.so){const i=this.wo(e.newValue);await Promise.all(i.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(e)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,e,i){const s=new mv(this.currentUser,t,e,i),o=l5(this.persistenceKey,this.currentUser,t);this.setItem(o,s.Ws())}lo(t){const e=l5(this.persistenceKey,this.currentUser,t);this.removeItem(e)}To(t){const e={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(e))}Po(t,e,i){const s=kE(this.persistenceKey,t),o=new F0(t,e,i);this.setItem(s,o.Ws())}Io(t){const e=JSON.stringify(Array.from(t));this.setItem(this.so,e)}Eo(t){const e=this.eo.exec(t);return e?e[1]:null}Ao(t,e){const i=this.Eo(t);return pv.$s(i,e)}Vo(t,e){const i=this.no.exec(t),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return mv.$s(new rs(o),s,e)}fo(t,e){const i=this.ro.exec(t),s=Number(i[1]);return F0.$s(s,e)}_o(t){return ZS.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);wt(Ul,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Js.insert(t,e):this.Js.remove(t),s=this.uo(this.Js),o=this.uo(i),c=[],f=[];return o.forEach((m=>{s.has(m)||c.push(m)})),s.forEach((m=>{o.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=i}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let e=VS();return t.forEach(((i,s)=>{e=e.unionWith(s.activeTargetIds)})),e}}class VC{constructor(){this.vo=new zT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new zT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Kk{Mo(t){}shutdown(){}}const u5="ConnectivityMonitor";class c5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){wt(u5,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){wt(u5,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let N1=null;function BT(){return N1===null?N1=(function(){return 268435456+Math.round(2147483648*Math.random())})():N1++,"0x"+N1.toString(16)}const UE="RestConnection",Yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Qk{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===wT?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,o){const c=BT(),f=this.Qo(t,e.toUriEncodedString());wt(UE,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,o);const{host:g}=new URL(f),E=tu(g);return this.zo(t,f,m,i,E).then((b=>(wt(UE,`Received RPC '${t}' ${c}: `,b),b)),(b=>{throw Xo(UE,`RPC '${t}' ${c} failed with error: `,b,"url: ",f,"request:",i),b}))}jo(t,e,i,s,o,c){return this.Wo(t,e,i,s,o)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dp})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,o)=>t[o]=s)),i&&i.headers.forEach(((s,o)=>t[o]=s))}Qo(t,e){const i=Yk[t];let s=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class Xk{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const qs="WebChannelConnection",p0=(n,t,e)=>{n.listen(t,(i=>{try{e(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Qm extends Qk{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Qm.c_){const t=jw();p0(t,Hw.STAT_EVENT,(e=>{e.stat===yT.PROXY?wt(qs,"STAT_EVENT: detected buffering proxy"):e.stat===yT.NOPROXY&&wt(qs,"STAT_EVENT: detected no buffering proxy")})),Qm.c_=!0}}zo(t,e,i,s,o){const c=BT();return new Promise(((f,m)=>{const g=new Gw;g.setWithCredentials(!0),g.listenOnce(qw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case k1.NO_ERROR:const b=g.getResponseJson();wt(qs,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),f(b);break;case k1.TIMEOUT:wt(qs,`RPC '${t}' ${c} timed out`),m(new Tt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case k1.HTTP_ERROR:const A=g.getStatus();if(wt(qs,`RPC '${t}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const D=N?.error;if(D&&D.status&&D.message){const V=(function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(Y)>=0?Y:ht.UNKNOWN})(D.status);m(new Tt(V,D.message))}else m(new Tt(ht.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Tt(ht.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{wt(qs,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(s);wt(qs,`RPC '${t}' ${c} sending request:`,s),g.send(e,"POST",E,i,15)}))}T_(t,e,i){const s=BT(),o=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const g=o.join("");wt(qs,`Creating RPC '${t}' stream ${s}: ${g}`,f);const E=c.createWebChannel(g,f);this.I_(E);let b=!1,A=!1;const N=new Xk({Ho:D=>{A?wt(qs,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(b||(wt(qs,`Opening RPC '${t}' stream ${s} transport.`),E.open(),b=!0),wt(qs,`RPC '${t}' stream ${s} sending:`,D),E.send(D))},Jo:()=>E.close()});return p0(E,C0.EventType.OPEN,(()=>{A||(wt(qs,`RPC '${t}' stream ${s} transport opened.`),N.i_())})),p0(E,C0.EventType.CLOSE,(()=>{A||(A=!0,wt(qs,`RPC '${t}' stream ${s} transport closed`),N.o_(),this.E_(E))})),p0(E,C0.EventType.ERROR,(D=>{A||(A=!0,Xo(qs,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),N.o_(new Tt(ht.UNAVAILABLE,"The operation could not be completed")))})),p0(E,C0.EventType.MESSAGE,(D=>{if(!A){const V=D.data[0];Yt(!!V,16349);const U=V,H=U?.error||U[0]?.error;if(H){wt(qs,`RPC '${t}' stream ${s} received error:`,H);const Y=H.status;let X=(function(lt){const k=Mi[lt];if(k!==void 0)return YR(k)})(Y),Z=H.message;Y==="NOT_FOUND"&&Z.includes("database")&&Z.includes("does not exist")&&Z.includes(this.databaseId.database)&&Xo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),X===void 0&&(X=ht.INTERNAL,Z="Unknown error status: "+Y+" with message "+H.message),A=!0,N.o_(new Tt(X,Z)),E.close()}else wt(qs,`RPC '${t}' stream ${s} received:`,V),N.__(V)}})),Qm.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Fw()}}function Jk(n){return new Qm(n)}function kC(){return typeof window<"u"?window:null}function K1(){return typeof document<"u"?document:null}function M_(n){return new ek(n,!0)}Qm.c_=!1;class $S{constructor(t,e,i=1e3,s=1.5,o=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&wt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const h5="PersistentStream";class LC{constructor(t,e,i,s,o,c,f,m){this.Ci=t,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ht.RESOURCE_EXHAUSTED?(vi(e.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===e&&this.G_(i,s)}),(i=>{t((()=>{const s=new Tt(ht.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(t,e){const i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return wt(h5,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(wt(h5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wk extends LC{constructor(t,e,i,s,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=sk(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Wt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Wt.min():c.readTime?Ei(c.readTime):Wt.min()})(t);return this.listener.J_(e,i)}Z_(t){const e={};e.database=PT(this.serializer),e.addTarget=(function(o,c){let f;const m=c.target;if(f=rv(m)?{documents:iC(o,m)}:{query:sC(o,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=WR(o,c.resumeToken);const g=OT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Wt.min())>0){f.readTime=gp(o,c.snapshotVersion.toTimestamp());const g=OT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const i=rk(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){const e={};e.database=PT(this.serializer),e.removeTarget=t,this.K_(e)}}class Zk extends LC{constructor(t,e,i,s,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=ak(t.writeResults,t.commitTime),i=Ei(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=PT(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>f_(this.serializer,i)))};this.K_(e)}}class $k{}class tL extends $k{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Tt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Wo(t,MT(e,i),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Tt(ht.UNKNOWN,o.toString())}))}jo(t,e,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(t,MT(e,i),s,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Tt(ht.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function eL(n,t,e,i){return new tL(n,t,e,i)}class nL{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vi(e),this.aa=!1):wt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const cd="RemoteStore";class iL{constructor(t,e,i,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{jh(this)&&(wt(cd,"Restarting streams for network reachability change."),await(async function(m){const g=zt(m);g.Ea.add(4),await Pp(g),g.Va.set("Unknown"),g.Ea.delete(4),await P_(g)})(this))}))})),this.Va=new nL(i,s)}}async function P_(n){if(jh(n))for(const t of n.Ra)await t(!0)}async function Pp(n){for(const t of n.Ra)await t(!1)}function e2(n,t){const e=zt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),nb(e)?eb(e):kp(e).O_()&&tb(e,t))}function vp(n,t){const e=zt(n),i=kp(e);e.Ia.delete(t),i.O_()&&UC(e,t),e.Ia.size===0&&(i.O_()?i.L_():jh(e)&&e.Va.set("Unknown"))}function tb(n,t){if(n.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}kp(n).Z_(t)}function UC(n,t){n.da.$e(t),kp(n).X_(t)}function eb(n){n.da=new WV({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),kp(n).start(),n.Va.ua()}function nb(n){return jh(n)&&!kp(n).x_()&&n.Ia.size>0}function jh(n){return zt(n).Ea.size===0}function zC(n){n.da=void 0}async function sL(n){n.Va.set("Online")}async function aL(n){n.Ia.forEach(((t,e)=>{tb(n,t)}))}async function rL(n,t){zC(n),nb(n)?(n.Va.ha(t),eb(n)):n.Va.set("Unknown")}async function oL(n,t,e){if(n.Va.set("Online"),t instanceof JR&&t.state===2&&t.cause)try{await(async function(s,o){const c=o.cause;for(const f of o.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,t)}catch(i){wt(cd,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await gv(n,i)}else if(t instanceof j1?n.da.Xe(t):t instanceof XR?n.da.st(t):n.da.tt(t),!e.isEqual(Wt.min()))try{const i=await CC(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const f=o.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.Ia.get(g);E&&o.Ia.set(g,E.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const E=o.Ia.get(m);if(!E)return;o.Ia.set(m,E.withResumeToken(hi.EMPTY_BYTE_STRING,E.snapshotVersion)),UC(o,m);const b=new qu(E.target,m,g,E.sequenceNumber);tb(o,b)})),o.remoteSyncer.applyRemoteEvent(f)})(n,e)}catch(i){wt(cd,"Failed to raise snapshot:",i),await gv(n,i)}}async function gv(n,t,e){if(!qh(t))throw t;n.Ea.add(1),await Pp(n),n.Va.set("Offline"),e||(e=()=>CC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{wt(cd,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await P_(n)}))}function BC(n,t){return t().catch((e=>gv(n,e,t)))}async function Vp(n){const t=zt(n),e=Ph(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:bh;for(;lL(t);)try{const s=await Hk(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,uL(t,s)}catch(s){await gv(t,s)}GC(t)&&qC(t)}function lL(n){return jh(n)&&n.Ta.length<10}function uL(n,t){n.Ta.push(t);const e=Ph(n);e.O_()&&e.Y_&&e.ea(t.mutations)}function GC(n){return jh(n)&&!Ph(n).x_()&&n.Ta.length>0}function qC(n){Ph(n).start()}async function cL(n){Ph(n).ra()}async function hL(n){const t=Ph(n);for(const e of n.Ta)t.ea(e.mutations)}async function fL(n,t,e){const i=n.Ta.shift(),s=zS.from(i,t,e);await BC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Vp(n)}async function dL(n,t){t&&Ph(n).Y_&&await(async function(i,s){if((function(c){return KR(c)&&c!==ht.ABORTED})(s.code)){const o=i.Ta.shift();Ph(i).B_(),await BC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Vp(i)}})(n,t),GC(n)&&qC(n)}async function f5(n,t){const e=zt(n);e.asyncQueue.verifyOperationInProgress(),wt(cd,"RemoteStore received new credentials");const i=jh(e);e.Ea.add(3),await Pp(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await P_(e)}async function GT(n,t){const e=zt(n);t?(e.Ea.delete(2),await P_(e)):t||(e.Ea.add(2),await Pp(e),e.Va.set("Unknown"))}function kp(n){return n.ma||(n.ma=(function(e,i,s){const o=zt(e);return o.sa(),new Wk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:sL.bind(null,n),Yo:aL.bind(null,n),t_:rL.bind(null,n),J_:oL.bind(null,n)}),n.Ra.push((async t=>{t?(n.ma.B_(),nb(n)?eb(n):n.Va.set("Unknown")):(await n.ma.stop(),zC(n))}))),n.ma}function Ph(n){return n.fa||(n.fa=(function(e,i,s){const o=zt(e);return o.sa(),new Zk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:cL.bind(null,n),t_:dL.bind(null,n),ta:hL.bind(null,n),na:fL.bind(null,n)}),n.Ra.push((async t=>{t?(n.fa.B_(),await Vp(n)):(await n.fa.stop(),n.Ta.length>0&&(wt(cd,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class ib{constructor(t,e,i,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,o){const c=Date.now()+i,f=new ib(t,e,c,s,o);return f.start(i),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lp(n,t){if(vi("AsyncQueue",`${t}: ${n}`),qh(n))return new Tt(ht.UNAVAILABLE,`${t}: ${n}`);throw n}class Xm{static emptySet(t){return new Xm(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||kt.comparator(e.key,i.key):(e,i)=>kt.comparator(e.key,i.key),this.keyedMap=I0(),this.sortedSet=new Cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Xm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Xm;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class d5{constructor(){this.ga=new Cn(kt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):qt(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Ep{constructor(t,e,i,s,o,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,o){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new Ep(t,e,Xm.emptySet(e),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&I_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}class mL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class pL{constructor(){this.queries=m5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=zt(e),o=s.queries;s.queries=m5(),o.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Tt(ht.ABORTED,"Firestore shutting down"))}}function m5(){return new ic((n=>OR(n)),I_)}async function sb(n,t){const e=zt(n);let i=3;const s=t.query;let o=e.queries.get(s);o?!o.Sa()&&t.Da()&&(i=2):(o=new mL,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(s,!0);break;case 1:o.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const f=Lp(c,`Initialization of query '${zm(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,o),o.ba.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&rb(e)}async function ab(n,t){const e=zt(n),i=t.query;let s=3;const o=e.queries.get(i);if(o){const c=o.ba.indexOf(t);c>=0&&(o.ba.splice(c,1),o.ba.length===0?s=t.Da()?0:1:!o.Sa()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function gL(n,t){const e=zt(n);let i=!1;for(const s of t){const o=s.query,c=e.queries.get(o);if(c){for(const f of c.ba)f.Fa(s)&&(i=!0);c.wa=s}}i&&rb(e)}function _L(n,t,e){const i=zt(n),s=i.queries.get(t);if(s)for(const o of s.ba)o.onError(e);i.queries.delete(t)}function rb(n){n.Ca.forEach((t=>{t.next()}))}var qT,p5;(p5=qT||(qT={})).Ma="default",p5.Cache="cache";class ob{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Ep(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Ep.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qT.Cache}}class yL{constructor(t,e){this.qa=t,this.byteLength=e}Ua(){return"metadata"in this.qa}}class g5{constructor(t){this.serializer=t}Ks(t){return Ql(this.serializer,t)}qs(t){return t.metadata.exists?nC(this.serializer,t.document,!1):Ln.newNoDocument(this.Ks(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return Ei(t)}}class vL{constructor(t,e){this.$a=t,this.serializer=e,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=HC(t)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Wa.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Qa.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++e;const i=Pe.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.qa.document&&(this.Qa[this.Qa.length-1].document=t.qa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,{...this.progress}):null}za(t){const e=new Map,i=new g5(this.serializer);for(const s of t)if(s.metadata.queries){const o=i.Ks(s.metadata.name);for(const c of s.metadata.queries){const f=(e.get(c)||ve()).add(o);e.set(c,f)}}return e}async ja(t){const e=await jk(t,new g5(this.serializer),this.Qa,this.$a.id),i=this.za(this.documents);for(const s of this.Wa)await Fk(t,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:e}}}function HC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jC{constructor(t){this.key=t}}class FC{constructor(t){this.key=t}}class KC{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.eu=PR(t),this.tu=new Xm(this.eu)}get nu(){return this.Za}ru(t,e){const i=e?e.iu:new d5,s=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((E,b)=>{const A=s.get(E),N=N_(this.query,b)?b:null,D=!!A&&this.mutatedKeys.has(A.key),V=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;A&&N?A.data.isEqual(N.data)?D!==V&&(i.track({type:3,doc:N}),U=!0):this.su(A,N)||(i.track({type:2,doc:N}),U=!0,(m&&this.eu(N,m)>0||g&&this.eu(N,g)<0)&&(f=!0)):!A&&N?(i.track({type:0,doc:N}),U=!0):A&&!N&&(i.track({type:1,doc:A}),U=!0,(m||g)&&(f=!0)),U&&(N?(c=c.add(N),o=V?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),i.track({type:1,doc:E})}return{tu:c,iu:i,Ss:f,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,b)=>(function(N,D){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Vt:U})}};return V(N)-V(D)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(i),s=s??!1;const f=e&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Ep(this.query,t.tu,o,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new d5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new FC(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new jC(i))})),e}cu(t){this.Za=t.ks,this.Ya=ve();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Ep.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fh="SyncEngine";class EL{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class TL{constructor(t){this.key=t,this.hu=!1}}class SL{constructor(t,e,i,s,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ic((f=>OR(f)),I_),this.Iu=new Map,this.Eu=new Set,this.Ru=new Cn(kt.comparator),this.Au=new Map,this.Vu=new KS,this.du={},this.mu=new Map,this.fu=ud.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bL(n,t,e=!0){const i=n2(n);let s;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await YC(i,t,e,!0),s}async function AL(n,t){const e=n2(n);await YC(e,t,!0,!1)}async function YC(n,t,e,i){const s=await _p(n.localStore,pa(t)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let f;return i&&(f=await lb(n,t,o,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&e2(n.remoteStore,s),f}async function lb(n,t,e,i,s){n.pu=(b,A,N)=>(async function(V,U,H,Y){let X=U.view.ru(H);X.Ss&&(X=await dv(V.localStore,U.query,!1).then((({documents:k})=>U.view.ru(k,X))));const Z=Y&&Y.targetChanges.get(U.targetId),pt=Y&&Y.targetMismatches.get(U.targetId)!=null,lt=U.view.applyChanges(X,V.isPrimaryClient,Z,pt);return HT(V,U.targetId,lt.au),lt.snapshot})(n,b,A,N);const o=await dv(n.localStore,t,!0),c=new KC(t,o.ks),f=c.ru(o.documents),m=O_.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);HT(n,e,g.au);const E=new EL(t,e,c);return n.Tu.set(t,E),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),g.snapshot}async function wL(n,t,e){const i=zt(n),s=i.Tu.get(t),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((c=>!I_(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await yp(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&vp(i.remoteStore,s.targetId),Tp(i,s.targetId)})).catch(Gh)):(Tp(i,s.targetId),await yp(i.localStore,s.targetId,!0))}async function RL(n,t){const e=zt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),vp(e.remoteStore,i.targetId))}async function CL(n,t,e){const i=fb(n);try{const s=await(function(c,f){const m=zt(c),g=an.now(),E=f.reduce(((N,D)=>N.add(D.key)),ve());let b,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let D=Wa(),V=ve();return m.xs.getEntries(N,E).next((U=>{D=U,D.forEach(((H,Y)=>{Y.isValidDocument()||(V=V.add(H))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,D))).next((U=>{b=U;const H=[];for(const Y of f){const X=QV(Y,b.get(Y.key).overlayedDocument);X!=null&&H.push(new sc(Y.key,X,bR(X.value.mapValue),Yn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,g,H,f)})).next((U=>{A=U;const H=U.applyToLocalDocumentSet(b,V);return m.documentOverlayCache.saveOverlays(N,U.batchId,H)}))})).then((()=>({batchId:A.batchId,changes:kR(b)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new Cn(oe)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(i,s.batchId,e),await ac(i,s.changes),await Vp(i.remoteStore)}catch(s){const o=Lp(s,"Failed to persist write");e.reject(o)}}async function QC(n,t){const e=zt(n);try{const i=await qk(e.localStore,t);t.targetChanges.forEach(((s,o)=>{const c=e.Au.get(o);c&&(Yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Yt(c.hu,14607):s.removedDocuments.size>0&&(Yt(c.hu,42227),c.hu=!1))})),await ac(e,i,t)}catch(i){await Gh(i)}}function _5(n,t,e){const i=zt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach(((o,c)=>{const f=c.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=zt(c);m.onlineState=f;let g=!1;m.queries.forEach(((E,b)=>{for(const A of b.ba)A.va(f)&&(g=!0)})),g&&rb(m)})(i.eventManager,t),s.length&&i.Pu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function IL(n,t,e){const i=zt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),o=s&&s.key;if(o){let c=new Cn(kt.comparator);c=c.insert(o,Ln.newNoDocument(o,Wt.min()));const f=ve().add(o),m=new x_(Wt.min(),new Map,new Cn(oe),c,f);await QC(i,m),i.Ru=i.Ru.remove(o),i.Au.delete(t),hb(i)}else await yp(i.localStore,t,!1).then((()=>Tp(i,t,e))).catch(Gh)}async function NL(n,t){const e=zt(n),i=t.batch.batchId;try{const s=await Gk(e.localStore,t);cb(e,i,null),ub(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await ac(e,s)}catch(s){await Gh(s)}}async function DL(n,t,e){const i=zt(n);try{const s=await(function(c,f){const m=zt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return m.mutationQueue.lookupMutationBatch(g,f).next((b=>(Yt(b!==null,37113),E=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,E,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>m.localDocuments.getDocuments(g,E)))}))})(i.localStore,t);cb(i,t,e),ub(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await ac(i,s)}catch(s){await Gh(s)}}async function xL(n,t){const e=zt(n);jh(e.remoteStore)||wt(Fh,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(c){const f=zt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(e.localStore);if(i===bh)return void t.resolve();const s=e.mu.get(i)||[];s.push(t),e.mu.set(i,s)}catch(i){const s=Lp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(s)}}function ub(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function cb(n,t,e){const i=zt(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(e?o.reject(e):o.resolve(),s=s.remove(t)),i.du[i.currentUser.toKey()]=s}}function Tp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Vu.Gr(t).forEach((i=>{n.Vu.containsKey(i)||XC(n,i)}))}function XC(n,t){n.Eu.delete(t.path.canonicalString());const e=n.Ru.get(t);e!==null&&(vp(n.remoteStore,e),n.Ru=n.Ru.remove(t),n.Au.delete(e),hb(n))}function HT(n,t,e){for(const i of e)i instanceof jC?(n.Vu.addReference(i.key,t),OL(n,i)):i instanceof FC?(wt(Fh,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,t),n.Vu.containsKey(i.key)||XC(n,i.key)):qt(19791,{wu:i})}function OL(n,t){const e=t.key,i=e.path.canonicalString();n.Ru.get(e)||n.Eu.has(i)||(wt(Fh,"New document in limbo: "+e),n.Eu.add(i),hb(n))}function hb(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new kt(Pe.fromString(t)),i=n.fu.next();n.Au.set(i,new TL(e)),n.Ru=n.Ru.insert(e,i),e2(n.remoteStore,new qu(pa(xp(e.path)),i,"TargetPurposeLimboResolution",Xa.ce))}}async function ac(n,t,e){const i=zt(n),s=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,t,e).then((g=>{if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:e?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=JS.Es(m.targetId,g);o.push(E)}})))})),await Promise.all(c),i.Pu.J_(s),await(async function(m,g){const E=zt(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>it.forEach(g,(A=>it.forEach(A.Ts,(N=>E.persistence.referenceDelegate.addReference(b,A.targetId,N))).next((()=>it.forEach(A.Is,(N=>E.persistence.referenceDelegate.removeReference(b,A.targetId,N)))))))))}catch(b){if(!qh(b))throw b;wt(WS,"Failed to update sequence numbers: "+b)}for(const b of g){const A=b.targetId;if(!b.fromCache){const N=E.vs.get(A),D=N.snapshotVersion,V=N.withLastLimboFreeSnapshotVersion(D);E.vs=E.vs.insert(A,V)}}})(i.localStore,o))}async function ML(n,t){const e=zt(n);if(!e.currentUser.isEqual(t)){wt(Fh,"User change. New user:",t.toKey());const i=await RC(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((f=>{f.forEach((m=>{m.reject(new Tt(ht.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ac(e,i.Ns)}}function PL(n,t){const e=zt(n),i=e.Au.get(t);if(i&&i.hu)return ve().add(i.key);{let s=ve();const o=e.Iu.get(t);if(!o)return s;for(const c of o){const f=e.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}async function VL(n,t){const e=zt(n),i=await dv(e.localStore,t.query,!0),s=t.view.cu(i);return e.isPrimaryClient&&HT(e,t.targetId,s.au),s}async function kL(n,t){const e=zt(n);return DC(e.localStore,t).then((i=>ac(e,i)))}async function LL(n,t,e,i){const s=zt(n),o=await(function(f,m){const g=zt(f),E=zt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.Xn(b,m).next((A=>A?g.localDocuments.getDocuments(b,A):it.resolve(null)))))})(s.localStore,t);o!==null?(e==="pending"?await Vp(s.remoteStore):e==="acknowledged"||e==="rejected"?(cb(s,t,i||null),ub(s,t),(function(f,m){zt(zt(f).mutationQueue).nr(m)})(s.localStore,t)):qt(6720,"Unknown batchState",{bu:e}),await ac(s,o)):wt(Fh,"Cannot apply mutation batch with id: "+t)}async function UL(n,t){const e=zt(n);if(n2(e),fb(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),s=await y5(e,i.toArray());e.gu=!0,await GT(e.remoteStore,!0);for(const o of s)e2(e.remoteStore,o)}else if(t===!1&&e.gu!==!1){const i=[];let s=Promise.resolve();e.Iu.forEach(((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):s=s.then((()=>(Tp(e,c),yp(e.localStore,c,!0)))),vp(e.remoteStore,c)})),await s,await y5(e,i),(function(c){const f=zt(c);f.Au.forEach(((m,g)=>{vp(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Cn(kt.comparator)})(e),e.gu=!1,await GT(e.remoteStore,!1)}}async function y5(n,t,e){const i=zt(n),s=[],o=[];for(const c of t){let f;const m=i.Iu.get(c);if(m&&m.length!==0){f=await _p(i.localStore,pa(m[0]));for(const g of m){const E=i.Tu.get(g),b=await VL(i,E);b.snapshot&&o.push(b.snapshot)}}else{const g=await NC(i.localStore,c);f=await _p(i.localStore,g),await lb(i,JC(g),c,!1,f.resumeToken)}s.push(f)}return i.Pu.J_(o),s}function JC(n){return xR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zL(n){return(function(e){return zt(zt(e).persistence).hs()})(zt(n).localStore)}async function BL(n,t,e,i){const s=zt(n);if(s.gu)return void wt(Fh,"Ignoring unexpected query state notification.");const o=s.Iu.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=await DC(s.localStore,MR(o[0])),f=x_.createSynthesizedRemoteEventForCurrentChange(t,e==="current",hi.EMPTY_BYTE_STRING);await ac(s,c,f);break}case"rejected":await yp(s.localStore,t,!0),Tp(s,t,i);break;default:qt(64155,e)}}async function GL(n,t,e){const i=n2(n);if(i.gu){for(const s of t){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){wt(Fh,"Adding an already active target "+s);continue}const o=await NC(i.localStore,s),c=await _p(i.localStore,o);await lb(i,JC(o),c.targetId,!1,c.resumeToken),e2(i.remoteStore,c)}for(const s of e)i.Iu.has(s)&&await yp(i.localStore,s,!1).then((()=>{vp(i.remoteStore,s),Tp(i,s)})).catch(Gh)}}function n2(n){const t=zt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=PL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=IL.bind(null,t),t.Pu.J_=gL.bind(null,t.eventManager),t.Pu.yu=_L.bind(null,t.eventManager),t}function fb(n){const t=zt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=NL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DL.bind(null,t),t}function qL(n,t,e){const i=zt(n);(async function(o,c,f){try{const m=await c.getMetadata();if(await(function(N,D){const V=zt(N),U=Ei(D.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",(H=>V.Pi.getBundleMetadata(H,D.id))).then((H=>!!H&&H.createTime.compareTo(U)>=0))})(o.localStore,m))return await c.close(),f._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(HC(m));const g=new vL(m,c.serializer);let E=await c.Su();for(;E;){const A=await g.Ga(E);A&&f._updateProgress(A),E=await c.Su()}const b=await g.ja(o.localStore);return await ac(o,b.Ja,void 0),await(function(N,D){const V=zt(N);return V.persistence.runTransaction("Save bundle","readwrite",(U=>V.Pi.saveBundleMetadata(U,D)))})(o.localStore,m),f._completeWith(b.progress),Promise.resolve(b.Ha)}catch(m){return Xo(Fh,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(i,t,e).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class d_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=M_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return wC(this.persistence,new AC,t.initialUser,this.serializer)}Cu(t){return new YS(t2.Vi,this.serializer)}Du(t){return new VC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}d_.provider={build:()=>new d_};class HL extends d_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Yt(this.persistence.referenceDelegate instanceof fv,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yC(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new YS((i=>fv.Vi(i,e)),this.serializer)}}class WC extends d_{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await fb(this.xu.syncEngine),await Vp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return wC(this.persistence,new AC,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new yC(i,t.asyncQueue,e)}Mu(t,e){const i=new KP(e,this.persistence);return new FP(t.asyncQueue,i)}Cu(t){const e=XS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new QS(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,kC(),K1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new VC}}class jL extends WC{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof LE&&(this.sharedClientState.syncEngine={So:LL.bind(null,e),Do:BL.bind(null,e),Co:GL.bind(null,e),hs:zL.bind(null,e),bo:kL.bind(null,e)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await UL(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(t){const e=kC();if(!LE.v(e))throw new Tt(ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=XS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new LE(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class m_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ML.bind(null,this.syncEngine),await GT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new pL})()}createDatastore(t){const e=M_(t.databaseInfo.databaseId),i=Jk(t.databaseInfo);return eL(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,o,c,f){return new iL(i,s,o,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>_5(this.syncEngine,e,0)),(function(){return c5.v()?new c5:new Kk})())}createSyncEngine(t,e){return(function(s,o,c,f,m,g,E){const b=new SL(s,o,c,f,m,g);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=zt(e);wt(cd,"RemoteStore shutting down."),i.Ea.add(5),await Pp(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m_.provider={build:()=>new m_};function v5(n,t=10240){let e=0;return{async read(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class i2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):vi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class FL{constructor(t,e){this.Bu=t,this.serializer=e,this.metadata=new bs,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.Ua()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.Ku();if(t===null)return null;const e=this.Lu.decode(t),i=Number(e);isNaN(i)&&this.qu(`length string (${e}) is not valid number`);const s=await this.Uu(i);return new yL(JSON.parse(s),t.length+i)}$u(){return this.buffer.findIndex((t=>t===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Uu(t){for(;this.buffer.length<t;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const e=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Wu(){const t=await this.Bu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}let KL=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Tt(ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await(async function(s,o){const c=zt(s),f={documents:o.map((b=>h_(c.serializer,b)))},m=await c.jo("BatchGetDocuments",c.serializer.databaseId,Pe.emptyPath(),f,o.length),g=new Map;m.forEach((b=>{const A=ik(c.serializer,b);g.set(A.key.toString(),A)}));const E=[];return o.forEach((b=>{const A=g.get(b.toString());Yt(!!A,55234,{key:b}),E.push(A)})),E})(this.datastore,t);return e.forEach((i=>this.recordVersion(i))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Mp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((e,i)=>{const s=kt.fromPath(i);this.mutations.push(new LS(s,this.precondition(s)))})),await(async function(i,s){const o=zt(i),c={writes:s.map((f=>f_(o.serializer,f)))};await o.Wo("Commit",o.serializer.databaseId,Pe.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw qt(50498,{Gu:t.constructor.name});e=Wt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Tt(ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Wt.min())?Yn.exists(!1):Yn.updateTime(e):Yn.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wt.min()))throw new Tt(ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(e)}return Yn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};class YL{constructor(t,e,i,s,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=s,this.deferred=o,this.zu=i.maxAttempts,this.M_=new $S(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const t=new KL(this.datastore),e=this.Ju(t);e&&e.then((i=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Zu(s)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(t){try{const e=this.updateFunction(t);return!w_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(t){this.zu>0&&this.Xu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(t)}Xu(t){if(t?.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!KR(e)}return!1}}const Vh="FirestoreClient";class QL{constructor(t,e,i,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=s,this.user=rs.UNAUTHENTICATED,this.clientId=bS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{wt(Vh,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(wt(Vh,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Lp(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function zE(n,t){n.asyncQueue.verifyOperationInProgress(),wt(Vh,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await RC(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function E5(n,t){n.asyncQueue.verifyOperationInProgress();const e=await db(n);wt(Vh,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>f5(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>f5(t.remoteStore,s))),n._onlineComponents=t}async function db(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){wt(Vh,"Using user provided OfflineComponentProvider");try{await zE(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===ht.FAILED_PRECONDITION||s.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Xo("Error using user provided cache. Falling back to memory cache: "+e),await zE(n,new d_)}}else wt(Vh,"Using default OfflineComponentProvider"),await zE(n,new HL(void 0));return n._offlineComponents}async function s2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(wt(Vh,"Using user provided OnlineComponentProvider"),await E5(n,n._uninitializedComponentsProvider._online)):(wt(Vh,"Using default OnlineComponentProvider"),await E5(n,new m_))),n._onlineComponents}function ZC(n){return db(n).then((t=>t.persistence))}function mb(n){return db(n).then((t=>t.localStore))}function $C(n){return s2(n).then((t=>t.remoteStore))}function pb(n){return s2(n).then((t=>t.syncEngine))}function XL(n){return s2(n).then((t=>t.datastore))}async function Sp(n){const t=await s2(n),e=t.eventManager;return e.onListen=bL.bind(null,t.syncEngine),e.onUnlisten=wL.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=AL.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=RL.bind(null,t.syncEngine),e}function JL(n){return n.asyncQueue.enqueue((async()=>{const t=await ZC(n),e=await $C(n);return t.setNetworkEnabled(!0),(function(s){const o=zt(s);return o.Ea.delete(0),P_(o)})(e)}))}function WL(n){return n.asyncQueue.enqueue((async()=>{const t=await ZC(n),e=await $C(n);return t.setNetworkEnabled(!1),(async function(s){const o=zt(s);o.Ea.add(0),await Pp(o),o.Va.set("Offline")})(e)}))}function ZL(n,t,e,i){const s=new i2(i),o=new ob(t,s,e);return n.asyncQueue.enqueueAndForget((async()=>sb(await Sp(n),o))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>ab(await Sp(n),o)))}}function $L(n,t){const e=new bs;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await(function(g,E){const b=zt(g);return b.persistence.runTransaction("read document","readonly",(A=>b.localDocuments.getDocument(A,E)))})(s,o);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Tt(ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Lp(f,`Failed to get document '${o} from cache`);c.reject(m)}})(await mb(n),t,e))),e.promise}function t8(n,t,e={}){const i=new bs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new i2({next:A=>{E.Nu(),c.enqueueAndForget((()=>ab(o,b)));const N=A.docs.has(f);!N&&A.fromCache?g.reject(new Tt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&m&&m.source==="server"?g.reject(new Tt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new ob(xp(f.path),E,{includeMetadataChanges:!0,Ka:!0});return sb(o,b)})(await Sp(n),n.asyncQueue,t,e,i))),i.promise}function tU(n,t){const e=new bs;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await dv(s,o,!0),m=new KC(o,f.ks),g=m.ru(f.documents),E=m.applyChanges(g,!1);c.resolve(E.snapshot)}catch(f){const m=Lp(f,`Failed to execute query '${o} against cache`);c.reject(m)}})(await mb(n),t,e))),e.promise}function e8(n,t,e={}){const i=new bs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new i2({next:A=>{E.Nu(),c.enqueueAndForget((()=>ab(o,b))),A.fromCache&&m.source==="server"?g.reject(new Tt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new ob(f,E,{includeMetadataChanges:!0,Ka:!0});return sb(o,b)})(await Sp(n),n.asyncQueue,t,e,i))),i.promise}function eU(n,t){const e=new bs;return n.asyncQueue.enqueueAndForget((async()=>CL(await pb(n),t,e))),e.promise}function nU(n,t){const e=new i2(t);return n.asyncQueue.enqueueAndForget((async()=>(function(s,o){zt(s).Ca.add(o),o.next()})(await Sp(n),e))),()=>{e.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,o){zt(s).Ca.delete(o)})(await Sp(n),e)))}}function iU(n,t,e){const i=new bs;return n.asyncQueue.enqueueAndForget((async()=>{const s=await XL(n);new YL(n.asyncQueue,s,e,t,i).ju()})),i.promise}function sU(n,t,e,i){const s=(function(c,f){let m;return m=typeof c=="string"?QR().encode(c):c,(function(E,b){return new FL(E,b)})((function(E,b){if(E instanceof Uint8Array)return v5(E,b);if(E instanceof ArrayBuffer)return v5(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(e,M_(t));n.asyncQueue.enqueueAndForget((async()=>{qL(await pb(n),s,i)}))}function aU(n,t){return n.asyncQueue.enqueue((async()=>(function(i,s){const o=zt(i);return o.persistence.runTransaction("Get named query","readonly",(c=>o.Pi.getNamedQuery(c,s)))})(await mb(n),t)))}function n8(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const rU="ComponentProvider",T5=new Map;function oU(n,t,e,i,s){return new TV(n,t,e,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,n8(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}const i8="firestore.googleapis.com",S5=!0;class b5{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Tt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i8,this.ssl=S5}else this.host=t.host,this.ssl=t.ssl??S5;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mC;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Sk)throw new Tt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Xw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n8(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Tt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Tt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Tt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class V_{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Tt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b5(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new MP;switch(i.type){case"firstParty":return new LP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Tt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=T5.get(e);i&&(wt(rU,"Removing Datastore"),T5.delete(e),i.terminate())})(this),Promise.resolve()}}function lU(n,t,e,i={}){n=Je(n,V_);const s=tu(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${t}:${e}`;s&&(Lv(`https://${f}`),Uv("Firestore",!0)),o.host!==i8&&o.host!==f&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:f,ssl:s,emulatorOptions:i};if(!Rh(m,c)&&(n._setSettings(m),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=rs.MOCK_USER;else{g=Sw(i.mockUserToken,n._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Tt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new rs(b)}n._authCredentials=new PP(new Yw(g,E))}}let ya=class s8{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new s8(this.firestore,t,this._query)}},wn=class x0{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ah(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new x0(this.firestore,t,this._key)}toJSON(){return{type:x0._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(A_(e,x0._jsonSchema))return new x0(t,i||null,new kt(Pe.fromString(e.referencePath)))}};wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:Vi("string",wn._jsonSchemaVersion),referencePath:Vi("string")};let Ah=class a8 extends ya{constructor(t,e,i){super(t,e,xp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new wn(this.firestore,null,new kt(t))}withConverter(t){return new a8(this.firestore,t,this._path)}};function gb(n,t,...e){if(n=jt(n),AS("collection","path",t),n instanceof V_){const i=Pe.fromString(t,...e);return h3(i),new Ah(n,null,i)}{if(!(n instanceof wn||n instanceof Ah))throw new Tt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Pe.fromString(t,...e));return h3(i),new Ah(n.firestore,null,i)}}function uU(n,t){if(n=Je(n,V_),AS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ya(n,null,(function(i){return new nc(Pe.emptyPath(),i)})(t))}function _v(n,t,...e){if(n=jt(n),arguments.length===1&&(t=bS.newId()),AS("doc","path",t),n instanceof V_){const i=Pe.fromString(t,...e);return c3(i),new wn(n,null,new kt(i))}{if(!(n instanceof wn||n instanceof Ah))throw new Tt(ht.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Pe.fromString(t,...e));return c3(i),new wn(n.firestore,n instanceof Ah?n.converter:null,new kt(i))}}function r8(n,t){return n=jt(n),t=jt(t),(n instanceof wn||n instanceof Ah)&&(t instanceof wn||t instanceof Ah)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function o8(n,t){return n=jt(n),t=jt(t),n instanceof ya&&t instanceof ya&&n.firestore===t.firestore&&I_(n._query,t._query)&&n.converter===t.converter}const A5="AsyncQueue";class w5{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const i=K1();i&&wt(A5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=K1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=K1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!qh(t))throw t;wt(A5,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,vi("INTERNAL UNHANDLED ERROR: ",R5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=ib.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&qt(47125,{Pc:R5(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function R5(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class cU{constructor(){this._progressObserver={},this._taskCompletionResolver=new bs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const hU=-1;let Ti=class extends V_{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new w5,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w5(t),this._firestoreClient=void 0,await t}}};function Ys(n){if(n._terminated)throw new Tt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||l8(n),n._firestoreClient}function l8(n){const t=n._freezeSettings(),e=oU(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new QL(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}function fU(n,t){Xo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();return u8(n,m_.provider,{build:i=>new WC(i,e.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}async function dU(n){Xo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();u8(n,m_.provider,{build:e=>new jL(e,t.cacheSizeBytes)})}function u8(n,t,e){if((n=Je(n,Ti))._firestoreClient||n._terminated)throw new Tt(ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Tt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:t,_offline:e},l8(n)}function mU(n){if(n._initialized&&!n._terminated)throw new Tt(ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new bs;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Yl.v())return Promise.resolve();const s=i+bC;await Yl.delete(s)})(XS(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function pU(n){return(function(e){const i=new bs;return e.asyncQueue.enqueueAndForget((async()=>xL(await pb(e),i))),i.promise})(Ys(n=Je(n,Ti)))}function gU(n){return JL(Ys(n=Je(n,Ti)))}function _U(n){return WL(Ys(n=Je(n,Ti)))}function yU(n,t){const e=Ys(n=Je(n,Ti)),i=new cU;return sU(e,n._databaseId,t,i),i}function vU(n,t){return aU(Ys(n=Je(n,Ti)),t).then((e=>e?new ya(n,null,e.query):null))}class js{constructor(t){this._byteString=t}static fromBase64String(t){try{return new js(hi.fromBase64String(t))}catch(e){throw new Tt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new js(hi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(A_(t,js._jsonSchema))return js.fromBase64String(t.bytes)}}js._jsonSchemaVersion="firestore/bytes/1.0",js._jsonSchema={type:Vi("string",js._jsonSchemaVersion),bytes:Vi("string")};let hd=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Tt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};let Cd=class{constructor(t){this._methodName=t}};class Ko{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Tt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Tt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return oe(this._lat,t._lat)||oe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(t){if(A_(t,Ko._jsonSchema))return new Ko(t.latitude,t.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:Vi("string",Ko._jsonSchemaVersion),latitude:Vi("number"),longitude:Vi("number")};class Yo{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Yo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(A_(t,Yo._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Yo(t.vectorValues);throw new Tt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yo._jsonSchemaVersion="firestore/vectorValue/1.0",Yo._jsonSchema={type:Vi("string",Yo._jsonSchemaVersion),vectorValues:Vi("object")};const EU=/^__.*__$/;class TU{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new sc(t,this.data,this.fieldMask,e,this.fieldTransforms):new Op(t,this.data,e,this.fieldTransforms)}}class c8{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new sc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function h8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt(40011,{dataSource:n})}}class a2{constructor(t,e,i,s,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new a2({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return yv(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(h8(this.dataSource)&&EU.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class SU{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||M_(t)}createContext(t,e,i,s=!1){return new a2({dataSource:t,methodName:e,targetDoc:i,path:Kn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(n){const t=n._freezeSettings(),e=M_(n._databaseId);return new SU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function r2(n,t,e,i,s,o={}){const c=n.createContext(o.merge||o.mergeFields?2:0,t,e,s);bb("Data must be an object, but it was:",c,i);const f=m8(i,c);let m,g;if(o.merge)m=new Ja(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const b of o.mergeFields){const A=fd(t,b,e);if(!c.contains(A))throw new Tt(ht.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);_8(E,A)||E.push(A)}m=new Ja(E),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new TU(new Ss(f),m,g)}class k_ extends Cd{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof k_}}function f8(n,t,e){return new a2({dataSource:3,targetDoc:t.settings.targetDoc,methodName:n._methodName,arrayElement:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _b extends Cd{_toFieldTransform(t){return new D_(t.path,new mp)}isEqual(t){return t instanceof _b}}class yb extends Cd{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=f8(this,t,!0),i=this.Ac.map((o=>Nd(o,e))),s=new ad(i);return new D_(t.path,s)}isEqual(t){return t instanceof yb&&Rh(this.Ac,t.Ac)}}class vb extends Cd{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=f8(this,t,!0),i=this.Ac.map((o=>Nd(o,e))),s=new rd(i);return new D_(t.path,s)}isEqual(t){return t instanceof vb&&Rh(this.Ac,t.Ac)}}class Eb extends Cd{constructor(t,e){super(t),this.Vc=e}_toFieldTransform(t){const e=new pp(t.serializer,zR(t.serializer,this.Vc));return new D_(t.path,e)}isEqual(t){return t instanceof Eb&&this.Vc===t.Vc}}function Tb(n,t,e,i){const s=n.createContext(1,t,e);bb("Data must be an object, but it was:",s,i);const o=[],c=Ss.empty();Hh(i,((m,g)=>{const E=g8(t,m,e);g=jt(g);const b=s.childContextForFieldPath(E);if(g instanceof k_)o.push(E);else{const A=Nd(g,b);A!=null&&(o.push(E),c.set(E,A))}}));const f=new Ja(o);return new c8(c,f,s.fieldTransforms)}function Sb(n,t,e,i,s,o){const c=n.createContext(1,t,e),f=[fd(t,i,e)],m=[s];if(o.length%2!=0)throw new Tt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)f.push(fd(t,o[A])),m.push(o[A+1]);const g=[],E=Ss.empty();for(let A=f.length-1;A>=0;--A)if(!_8(g,f[A])){const N=f[A];let D=m[A];D=jt(D);const V=c.childContextForFieldPath(N);if(D instanceof k_)g.push(N);else{const U=Nd(D,V);U!=null&&(g.push(N),E.set(N,U))}}const b=new Ja(g);return new c8(E,b,c.fieldTransforms)}function d8(n,t,e,i=!1){return Nd(e,n.createContext(i?4:3,t))}function Nd(n,t){if(p8(n=jt(n)))return bb("Unsupported field value:",t,n),m8(n,t);if(n instanceof Cd)return(function(i,s){if(!h8(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,s){const o=[];let c=0;for(const f of i){let m=Nd(f,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,s){if((i=jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=an.fromDate(i);return{timestampValue:gp(s.serializer,o)}}if(i instanceof an){const o=new an(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gp(s.serializer,o)}}if(i instanceof Ko)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof js)return{bytesValue:WR(s.serializer,i._byteString)};if(i instanceof wn){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Yo)return(function(c,f){const m=c instanceof Yo?c.toArray():c;return{mapValue:{fields:{[xS]:{stringValue:OS},[hp]:{arrayValue:{values:m.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return kS(f.serializer,E)}))}}}}}})(i,s);if(uC(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qv(i)}`)})(n,t)}function m8(n,t){const e={};return mR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hh(n,((i,s)=>{const o=Nd(s,t.childContextForField(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function p8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof an||n instanceof Ko||n instanceof js||n instanceof wn||n instanceof Cd||n instanceof Yo||uC(n))}function bb(n,t,e){if(!p8(e)||!Jw(e)){const i=qv(e);throw i==="an object"?t.createError(n+" a custom object"):t.createError(n+" "+i)}}function fd(n,t,e){if((t=jt(t))instanceof hd)return t._internalPath;if(typeof t=="string")return g8(n,t);throw yv("Field path arguments must be of type string or ",n,!1,void 0,e)}const bU=new RegExp("[~\\*/\\[\\]]");function g8(n,t,e){if(t.search(bU)>=0)throw yv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new hd(...t.split("."))._internalPath}catch{throw yv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function yv(n,t,e,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new Tt(ht.INVALID_ARGUMENT,f+n+m)}function _8(n,t){return n.some((e=>e.isEqual(t)))}class Ab{convertValue(t,e="none"){switch(xh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ju(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw qt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Hh(t,((s,o)=>{i[s]=this.convertValue(o,e)})),i}convertVectorValue(t){const e=t.fields?.[hp].arrayValue?.values?.map((i=>Fn(i.doubleValue)));return new Yo(e)}convertGeoPoint(t){return new Ko(Fn(t.latitude),Fn(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Qv(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(o_(t));default:return null}}convertTimestamp(t){const e=Xu(t);return new an(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Pe.fromString(t);Yt(lC(i),9688,{name:t});const s=new Dh(i.get(1),i.get(3)),o=new kt(i.popFirst(5));return s.isEqual(e)||vi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}class Dd extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new js(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new wn(this.firestore,null,e)}}function AU(){return new k_("deleteField")}function wU(){return new _b("serverTimestamp")}function RU(...n){return new yb("arrayUnion",n)}function CU(...n){return new vb("arrayRemove",n)}function IU(n){return new Eb("increment",n)}const C5="@firebase/firestore",I5="4.11.0";function jT(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class p_{constructor(t,e,i,s,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new NU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(fd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class NU extends p_{data(){return super.data()}}function y8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Tt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wb{}class L_ extends wb{}function dh(n,t,...e){let i=[];t instanceof wb&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((m=>m instanceof Rb)).length,f=o.filter((m=>m instanceof o2)).length;if(c>1||c>0&&f>0)throw new Tt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class o2 extends L_{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new o2(t,e,i)}_apply(t){const e=this._parse(t);return E8(t._query,e),new ya(t.firestore,t.converter,xT(t._query,e))}_parse(t){const e=Id(t.firestore);return(function(o,c,f,m,g,E,b){let A;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Tt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){D5(b,E);const D=[];for(const V of b)D.push(N5(m,o,V));A={arrayValue:{values:D}}}else A=N5(m,o,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||D5(b,E),A=d8(f,c,b,E==="in"||E==="not-in");return Ue.create(g,E,A)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function DU(n,t,e){const i=t,s=fd("where",n);return o2._create(s,i,e)}class Rb extends wb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Rb(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:rn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,o){let c=s;const f=o.getFlattenedFilters();for(const m of f)E8(c,m),c=xT(c,m)})(t._query,e),new ya(t.firestore,t.converter,xT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cb extends L_{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Cb(t,e)}_apply(t){const e=(function(s,o,c){if(s.startAt!==null)throw new Tt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Tt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new c_(o,c)})(t._query,this._field,this._direction);return new ya(t.firestore,t.converter,VV(t._query,e))}}function xU(n,t="asc"){const e=t,i=fd("orderBy",n);return Cb._create(i,e)}class l2 extends L_{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new l2(t,e,i)}_apply(t){return new ya(t.firestore,t.converter,lv(t._query,this._limit,this._limitType))}}function OU(n){return Ww("limit",n),l2._create("limit",n,"F")}function MU(n){return Ww("limitToLast",n),l2._create("limitToLast",n,"L")}class u2 extends L_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new u2(t,e,i)}_apply(t){const e=v8(t,this.type,this._docOrFields,this._inclusive);return new ya(t.firestore,t.converter,kV(t._query,e))}}function PU(...n){return u2._create("startAt",n,!0)}function VU(...n){return u2._create("startAfter",n,!1)}class c2 extends L_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new c2(t,e,i)}_apply(t){const e=v8(t,this.type,this._docOrFields,this._inclusive);return new ya(t.firestore,t.converter,LV(t._query,e))}}function kU(...n){return c2._create("endBefore",n,!1)}function LU(...n){return c2._create("endAt",n,!0)}function v8(n,t,e,i){if(e[0]=jt(e[0]),e[0]instanceof p_)return(function(o,c,f,m,g){if(!m)throw new Tt(ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const E=[];for(const b of Ym(o))if(b.field.isKeyField())E.push(id(c,m.key));else{const A=m.data.field(b.field);if(Yv(A))throw new Tt(ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const N=b.field.canonicalString();throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(A)}return new Mh(E,g)})(n._query,n.firestore._databaseId,t,e[0]._document,i);{const s=Id(n.firestore);return(function(c,f,m,g,E,b){const A=c.explicitOrderBy;if(E.length>A.length)throw new Tt(ht.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let D=0;D<E.length;D++){const V=E[D];if(A[D].field.isKeyField()){if(typeof V!="string")throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof V}`);if(!PS(c)&&V.indexOf("/")!==-1)throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${V}' contains a slash.`);const U=c.path.child(Pe.fromString(V));if(!kt.isDocumentKey(U))throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const H=new kt(U);N.push(id(f,H))}else{const U=d8(m,g,V);N.push(U)}}return new Mh(N,b)})(n._query,n.firestore._databaseId,s,t,e,i)}}function N5(n,t,e){if(typeof(e=jt(e))=="string"){if(e==="")throw new Tt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PS(t)&&e.indexOf("/")!==-1)throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Pe.fromString(e));if(!kt.isDocumentKey(i))throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return id(n,new kt(i))}if(e instanceof wn)return id(n,e._key);throw new Tt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qv(e)}.`)}function D5(n,t){if(!Array.isArray(n)||n.length===0)throw new Tt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function E8(n,t){const e=(function(s,o){for(const c of s)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Tt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Tt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function h2(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class UU extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new js(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new wn(this.firestore,null,e)}}class Qf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let mo=class T8 extends p_{constructor(t,e,i,s,o,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new K0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(fd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=T8._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:Vi("string",mo._jsonSchemaVersion),bundleSource:Vi("string","DocumentSnapshot"),bundleName:Vi("string"),bundle:Vi("string")};let K0=class extends mo{data(t={}){return super.data(t)}},Qo=class S8{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Qf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new K0(this._firestore,this._userDataWriter,i.key,i,new Qf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Tt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new K0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Qf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const m=new K0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Qf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,E=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),E=c.indexOf(f.doc.key)),{type:zU(f.type),doc:m,oldIndex:g,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=S8._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function zU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:n})}}function b8(n,t){return n instanceof mo&&t instanceof mo?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Qo&&t instanceof Qo&&n._firestore===t._firestore&&o8(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}Qo._jsonSchemaVersion="firestore/querySnapshot/1.0",Qo._jsonSchema={type:Vi("string",Qo._jsonSchemaVersion),bundleSource:Vi("string","QuerySnapshot"),bundleName:Vi("string"),bundle:Vi("string")};const BU={maxAttempts:5};let GU=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Id(t)}set(t,e,i){this._verifyNotCommitted();const s=Eh(t,this._firestore),o=h2(s.converter,e,i),c=r2(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Yn.none())),this}update(t,e,i,...s){this._verifyNotCommitted();const o=Eh(t,this._firestore);let c;return c=typeof(e=jt(e))=="string"||e instanceof hd?Sb(this._dataReader,"WriteBatch.update",o._key,e,i,s):Tb(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Yn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Eh(t,this._firestore);return this._mutations=this._mutations.concat(new Mp(e._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Eh(n,t){if((n=jt(n)).firestore!==t)throw new Tt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qU{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Id(t)}get(t){const e=Eh(t,this._firestore),i=new UU(this._firestore);return this._transaction.lookup([e._key]).then((s=>{if(!s||s.length!==1)return qt(24041);const o=s[0];if(o.isFoundDocument())return new p_(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new p_(this._firestore,i,e._key,null,e.converter);throw qt(18433,{doc:o})}))}set(t,e,i){const s=Eh(t,this._firestore),o=h2(s.converter,e,i),c=r2(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(t,e,i,...s){const o=Eh(t,this._firestore);let c;return c=typeof(e=jt(e))=="string"||e instanceof hd?Sb(this._dataReader,"Transaction.update",o._key,e,i,s):Tb(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=Eh(t,this._firestore);return this._transaction.delete(e._key),this}}let HU=class extends qU{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Eh(t,this._firestore),i=new Dd(this._firestore);return super.get(t).then((s=>new mo(this._firestore,i,e._key,s._document,new Qf(!1,!1),e.converter)))}};function jU(n,t,e){n=Je(n,Ti);const i={...BU,...e};(function(c){if(c.maxAttempts<1)throw new Tt(ht.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const s=Ys(n);return iU(s,(o=>t(new HU(n,o))),i)}function FU(n){n=Je(n,wn);const t=Je(n.firestore,Ti),e=Ys(t);return t8(e,n._key).then((i=>Ib(t,n,i)))}function KU(n){n=Je(n,wn);const t=Je(n.firestore,Ti),e=Ys(t),i=new Dd(t);return $L(e,n._key).then((s=>new mo(t,i,n._key,s,new Qf(s!==null&&s.hasLocalMutations,!0),n.converter)))}function YU(n){n=Je(n,wn);const t=Je(n.firestore,Ti),e=Ys(t);return t8(e,n._key,{source:"server"}).then((i=>Ib(t,n,i)))}function A8(n){n=Je(n,ya);const t=Je(n.firestore,Ti),e=Ys(t),i=new Dd(t);return y8(n._query),e8(e,n._query).then((s=>new Qo(t,i,n,s)))}function QU(n){n=Je(n,ya);const t=Je(n.firestore,Ti),e=Ys(t),i=new Dd(t);return tU(e,n._query).then((s=>new Qo(t,i,n,s)))}function XU(n){n=Je(n,ya);const t=Je(n.firestore,Ti),e=Ys(t),i=new Dd(t);return e8(e,n._query,{source:"server"}).then((s=>new Qo(t,i,n,s)))}function x5(n,t,e){n=Je(n,wn);const i=Je(n.firestore,Ti),s=h2(n.converter,t,e),o=Id(i);return U_(i,[r2(o,"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,Yn.none())])}function O5(n,t,e,...i){n=Je(n,wn);const s=Je(n.firestore,Ti),o=Id(s);let c;return c=typeof(t=jt(t))=="string"||t instanceof hd?Sb(o,"updateDoc",n._key,t,e,i):Tb(o,"updateDoc",n._key,t),U_(s,[c.toMutation(n._key,Yn.exists(!0))])}function JU(n){return U_(Je(n.firestore,Ti),[new Mp(n._key,Yn.none())])}function WU(n,t){const e=Je(n.firestore,Ti),i=_v(n),s=h2(n.converter,t),o=Id(n.firestore);return U_(e,[r2(o,"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Yn.exists(!1))]).then((()=>i))}function w8(n,...t){n=jt(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||jT(t[i])||(e=t[i++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(jT(t[i])){const g=t[i];t[i]=g.next?.bind(g),t[i+1]=g.error?.bind(g),t[i+2]=g.complete?.bind(g)}let o,c,f;if(n instanceof wn)c=Je(n.firestore,Ti),f=xp(n._key.path),o={next:g=>{t[i]&&t[i](Ib(c,n,g))},error:t[i+1],complete:t[i+2]};else{const g=Je(n,ya);c=Je(g.firestore,Ti),f=g._query;const E=new Dd(c);o={next:b=>{t[i]&&t[i](new Qo(c,E,g,b))},error:t[i+1],complete:t[i+2]},y8(n._query)}const m=Ys(c);return ZL(m,f,s,o)}function ZU(n,t){n=Je(n,Ti);const e=Ys(n),i=jT(t)?t:{next:t};return nU(e,i)}function U_(n,t){const e=Ys(n);return eU(e,t)}function Ib(n,t,e){const i=e.docs.get(t._key),s=new Dd(n);return new mo(n,s,t._key,i,new Qf(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){DP(ec),_a(new Li("firestore",((i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),f=new Ti(new VP(i.getProvider("auth-internal")),new UP(c,i.getProvider("app-check-internal")),SV(c,s),c);return o={useFetchStreams:e,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Yi(C5,I5,t),Yi(C5,I5,"esm2020")})();class $U{constructor(t,e){this._delegate=t,this.firebase=e,t_(t,new Li("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),TS(this._delegate)))}_getService(t,e=Ch){this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=Ch){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){t_(this._delegate,t)}_addOrOverwriteComponent(t){Mw(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const tz={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},M5=new eu("app-compat","Firebase",tz);function ez(n){const t={},e={__esModule:!0,initializeApp:o,app:s,registerVersion:Yi,setLogLevel:Lw,onLog:kw,apps:null,SDK_VERSION:ec,INTERNAL:{registerComponent:f,removeApp:i,useAsService:m,modularAPIs:NP}};e.default=e,Object.defineProperty(e,"apps",{get:c});function i(g){delete t[g]}function s(g){if(g=g||Ch,!ZA(t,g))throw M5.create("no-app",{appName:g});return t[g]}s.App=n;function o(g,E={}){const b=ES(g,E);if(ZA(t,b.name))return t[b.name];const A=new n(b,e);return t[b.name]=A,A}function c(){return Object.keys(t).map(g=>t[g])}function f(g){const E=g.name,b=E.replace("-compat","");if(_a(g)&&g.type==="PUBLIC"){const A=(N=s())=>{if(typeof N[b]!="function")throw M5.create("invalid-app-argument",{appName:E});return N[b]()};g.serviceProps!==void 0&&tv(A,g.serviceProps),e[b]=A,n.prototype[b]=function(...N){return this._getService.bind(this,E).apply(this,g.multipleInstances?N:[])}}return g.type==="PUBLIC"?e[b]:null}function m(g,E){return E==="serverAuth"?null:E}return e}function R8(){const n=ez($U);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:R8,extendNamespace:t,createSubscribe:Iw,ErrorFactory:eu,deepExtend:tv};function t(e){tv(n,e)}return n}const nz=R8();const P5=new Bv("@firebase/app-compat"),iz="@firebase/app-compat",sz="0.5.8";function az(n){Yi(iz,sz,n)}try{const n=dS();if(n.firebase!==void 0){P5.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=n.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&P5.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const _o=nz;az();var rz="firebase",oz="12.9.0";_o.registerVersion(rz,oz,"app-compat");const g0={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},km={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function lz(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function C8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uz=lz,cz=C8,I8=new eu("auth","Firebase",C8());const vv=new Bv("@firebase/auth");function hz(n,...t){vv.logLevel<=Me.WARN&&vv.warn(`Auth (${ec}): ${n}`,...t)}function Y1(n,...t){vv.logLevel<=Me.ERROR&&vv.error(`Auth (${ec}): ${n}`,...t)}function As(n,...t){throw Db(n,...t)}function Qi(n,...t){return Db(n,...t)}function Nb(n,t,e){const i={...cz(),[t]:e};return new eu("auth","Firebase",i).create(t,{appName:n.name})}function os(n){return Nb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Up(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&As(n,"argument-error"),Nb(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Db(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return I8.create(n,...t)}function It(n,t,...e){if(!n)throw Db(t,...e)}function Kl(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Y1(t),new Error(t)}function Jo(n,t){n||Kl(t)}function g_(){return typeof self<"u"&&self.location?.href||""}function xb(){return V5()==="http:"||V5()==="https:"}function V5(){return typeof self<"u"&&self.location?.protocol||null}function fz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xb()||Aw()||"connection"in navigator)?navigator.onLine:!0}function dz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class z_{constructor(t,e){this.shortDelay=t,this.longDelay=e,Jo(e>t,"Short delay should be less than long delay!"),this.isMobile=oM()||gS()}get(){return fz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ob(n,t){Jo(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class N8{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const pz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gz=new z_(3e4,6e4);function fi(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function di(n,t,e,i,s={}){return D8(n,s,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const f=Ip({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:t,headers:m,...o};return uM()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&tu(n.emulatorConfig.host)&&(g.credentials="include"),N8.fetch()(await x8(n,n.config.apiHost,e,f),g)})}async function D8(n,t,e){n._canInitEmulator=!1;const i={...mz,...t};try{const s=new yz(n),o=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw O0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw O0(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw O0(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw O0(n,"user-disabled",c);const E=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Nb(n,E,g);As(n,E)}}catch(s){if(s instanceof ki)throw s;As(n,"network-request-failed",{message:String(s)})}}async function rc(n,t,e,i,s={}){const o=await di(n,t,e,i,s);return"mfaPendingCredential"in o&&As(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function x8(n,t,e,i){const s=`${t}${e}?${i}`,o=n,c=o.config.emulator?Ob(n.config,s):`${n.config.apiScheme}://${s}`;return pz.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function _z(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Qi(this.auth,"network-request-failed")),gz.get())})}}function O0(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Qi(n,t,i);return s.customData._tokenResponse=e,s}function k5(n){return n!==void 0&&n.getResponse!==void 0}function L5(n){return n!==void 0&&n.enterprise!==void 0}class O8{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return _z(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vz(n){return(await di(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function M8(n,t){return di(n,"GET","/v2/recaptchaConfig",fi(n,t))}async function Ez(n,t){return di(n,"POST","/v1/accounts:delete",t)}async function Tz(n,t){return di(n,"POST","/v1/accounts:update",t)}async function Ev(n,t){return di(n,"POST","/v1/accounts:lookup",t)}function Y0(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Sz(n,t=!1){const e=jt(n),i=await e.getIdToken(t),s=f2(i);It(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:Y0(BE(s.auth_time)),issuedAtTime:Y0(BE(s.iat)),expirationTime:Y0(BE(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function BE(n){return Number(n)*1e3}function f2(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Y1("JWT malformed, contained fewer than 3 sections"),null;try{const s=fS(e);return s?JSON.parse(s):(Y1("Failed to decode base64 JWT payload"),null)}catch(s){return Y1("Caught error parsing JWT payload as JSON",s?.toString()),null}}function U5(n){const t=f2(n);return It(t,"internal-error"),It(typeof t.exp<"u","internal-error"),It(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Wu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof ki&&bz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function bz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Az{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class FT{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Y0(this.lastLoginAt),this.creationTime=Y0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function __(n){const t=n.auth,e=await n.getIdToken(),i=await Wu(n,Ev(t,{idToken:e}));It(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?P8(s.providerUserInfo):[],c=Rz(n.providerData,o),f=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!c?.length,g=f?m:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new FT(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,E)}async function wz(n){const t=jt(n);await __(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Rz(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function P8(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function Cz(n,t){const e=await D8(n,{},async()=>{const i=Ip({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=await x8(n,s,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&tu(n.emulatorConfig.host)&&(m.credentials="include"),N8.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function Iz(n,t){return di(n,"POST","/v2/accounts:revokeToken",fi(n,t))}class Jm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){It(t.idToken,"internal-error"),It(typeof t.idToken<"u","internal-error"),It(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):U5(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){It(t.length!==0,"internal-error");const e=U5(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:o}=await Cz(t,e);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:o}=e,c=new Jm;return i&&(It(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(It(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),o&&(It(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jm,this.toJSON())}_performRefresh(){return Kl("not implemented")}}function mh(n,t){It(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Fo{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new Az(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await Wu(this,this.stsTokenManager.getToken(this.auth,t));return It(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return Sz(this,t)}reload(){return wz(this)}_assign(t){this!==t&&(It(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Fo({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await __(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(os(this.auth));const t=await this.getIdToken();return await Wu(this,Ez(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,f=e.tenantId??void 0,m=e._redirectEventId??void 0,g=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:N,providerData:D,stsTokenManager:V}=e;It(b&&V,t,"internal-error");const U=Jm.fromJSON(this.name,V);It(typeof b=="string",t,"internal-error"),mh(i,t.name),mh(s,t.name),It(typeof A=="boolean",t,"internal-error"),It(typeof N=="boolean",t,"internal-error"),mh(o,t.name),mh(c,t.name),mh(f,t.name),mh(m,t.name),mh(g,t.name),mh(E,t.name);const H=new Fo({uid:b,auth:t,email:s,emailVerified:A,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:U,createdAt:g,lastLoginAt:E});return D&&Array.isArray(D)&&(H.providerData=D.map(Y=>({...Y}))),m&&(H._redirectEventId=m),H}static async _fromIdTokenResponse(t,e,i=!1){const s=new Jm;s.updateFromServerResponse(e);const o=new Fo({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await __(o),o}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];It(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?P8(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,f=new Jm;f.updateFromIdToken(i);const m=new Fo({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new FT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(m,g),m}}const z5=new Map;function br(n){Jo(n instanceof Function,"Expected a class definition");let t=z5.get(n);return t?(Jo(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,z5.set(n,t),t)}class V8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}V8.type="NONE";const bp=V8;function $f(n,t,e){return`firebase:${n}:${t}:${e}`}class Wm{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=$f(this.userKey,s.apiKey,o),this.fullPersistenceKey=$f("persistence",s.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Ev(this.auth,{idToken:t}).catch(()=>{});return e?Fo._fromGetAccountInfoResponse(this.auth,e,t):null}return Fo._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Wm(br(bp),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=s[0]||br(bp);const c=$f(i,t.config.apiKey,t.name);let f=null;for(const g of e)try{const E=await g._get(c);if(E){let b;if(typeof E=="string"){const A=await Ev(t,{idToken:E}).catch(()=>{});if(!A)break;b=await Fo._fromGetAccountInfoResponse(t,A,E)}else b=Fo._fromJSON(t,E);g!==o&&(f=b),o=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Wm(o,t,i):(o=m[0],f&&await o._set(c,f.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new Wm(o,t,i))}}function B5(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(z8(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(k8(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(B8(t))return"Blackberry";if(G8(t))return"Webos";if(L8(t))return"Safari";if((t.includes("chrome/")||U8(t))&&!t.includes("edge/"))return"Chrome";if(B_(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function k8(n=ni()){return/firefox\//i.test(n)}function L8(n=ni()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function U8(n=ni()){return/crios\//i.test(n)}function z8(n=ni()){return/iemobile/i.test(n)}function B_(n=ni()){return/android/i.test(n)}function B8(n=ni()){return/blackberry/i.test(n)}function G8(n=ni()){return/webos/i.test(n)}function G_(n=ni()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Nz(n=ni()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Dz(n=ni()){return G_(n)&&!!window.navigator?.standalone}function xz(){return ww()&&document.documentMode===10}function q8(n=ni()){return G_(n)||B_(n)||G8(n)||B8(n)||/windows phone/i.test(n)||z8(n)}function H8(n,t=[]){let e;switch(n){case"Browser":e=B5(ni());break;case"Worker":e=`${B5(ni())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ec}/${i}`}class Oz{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,f)=>{try{const m=t(o);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Mz(n,t={}){return di(n,"GET","/v2/passwordPolicy",fi(n,t))}const Pz=6;class Vz{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??Pz,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}class kz{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G5(this),this.idTokenSubscription=new G5(this),this.beforeStateQueue=new Oz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=br(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wm.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Ev(this,{idToken:t}),i=await Fo._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(An(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(t);(!o||o===c)&&f?.user&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await __(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=dz()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(An(this.app))return Promise.reject(os(this));const e=t?jt(t):null;return e&&It(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&It(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return An(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Mz(this),e=new Vz(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new eu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await Iz(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&br(t)||this._popupRedirectResolver;It(e,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[br(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=H8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&hz(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ii(n){return jt(n)}class G5{constructor(t){this.auth=t,this.observer=null,this.addObserver=Iw(e=>this.observer=e)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let q_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lz(n){q_=n}function Mb(n){return q_.loadJS(n)}function Uz(){return q_.recaptchaV2Script}function zz(){return q_.recaptchaEnterpriseScript}function Bz(){return q_.gapiScript}function j8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Gz=500,qz=6e4,D1=1e12;class Hz{constructor(t){this.auth=t,this.counter=D1,this._widgets=new Map}render(t,e){const i=this.counter;return this._widgets.set(i,new Kz(t,this.auth.name,e||{})),this.counter++,i}reset(t){const e=t||D1;this._widgets.get(e)?.delete(),this._widgets.delete(e)}getResponse(t){const e=t||D1;return this._widgets.get(e)?.getResponse()||""}async execute(t){const e=t||D1;return this._widgets.get(e)?.execute(),""}}class jz{constructor(){this.enterprise=new Fz}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Fz{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Kz{constructor(t,e,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof t=="string"?document.getElementById(t):t;It(s,"argument-error",{appName:e}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Yz(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch{}this.isVisible&&this.execute()},qz)},Gz))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Yz(n){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)t.push(e.charAt(Math.floor(Math.random()*e.length)));return t.join("")}const Qz="recaptcha-enterprise",Q0="NO_RECAPTCHA";class F8{constructor(t){this.type=Qz,this.auth=ii(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{M8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new O8(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(o,c,f){const m=window.grecaptcha;L5(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:t}).then(g=>{c(g)}).catch(()=>{c(Q0)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jz().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(f=>{if(!e&&L5(window.grecaptcha))s(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=zz();m.length!==0&&(m+=f),Mb(m).then(()=>{s(f,o,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function _0(n,t,e,i=!1,s=!1){const o=new F8(n);let c;if(s)c=Q0;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const f={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function wh(n,t,e,i,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _0(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await _0(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const o=await _0(n,t,e);return i(n,o).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);const f=await _0(n,t,e,!1,!0);return i(n,f)}return Promise.reject(c)})}else{const o=await _0(n,t,e,!1,!0);return i(n,o)}else return Promise.reject(s+" provider is not supported.")}async function Xz(n){const t=ii(n),e=await M8(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new O8(e);t.tenantId==null?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new F8(t).verify()}function Jz(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(br);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function Wz(n,t,e){const i=ii(n);It(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!e?.disableWarnings,o=K8(t),{host:c,port:f}=Zz(t),m=f===null?"":`:${f}`,g={url:`${o}//${c}${m}/`},E=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){It(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),It(Rh(g,i.config.emulator)&&Rh(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,tu(c)?(Lv(`${o}//${c}${m}`),Uv("Auth",!0)):s||$z()}function K8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function Zz(n){const t=K8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:q5(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:q5(c)}}}function q5(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function $z(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class zp{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Kl("not implemented")}_getIdTokenResponse(t){return Kl("not implemented")}_linkToIdToken(t,e){return Kl("not implemented")}_getReauthenticationResolver(t){return Kl("not implemented")}}async function Y8(n,t){return di(n,"POST","/v1/accounts:resetPassword",fi(n,t))}async function tB(n,t){return di(n,"POST","/v1/accounts:update",t)}async function eB(n,t){return di(n,"POST","/v1/accounts:signUp",t)}async function nB(n,t){return di(n,"POST","/v1/accounts:update",fi(n,t))}async function iB(n,t){return rc(n,"POST","/v1/accounts:signInWithPassword",fi(n,t))}async function d2(n,t){return di(n,"POST","/v1/accounts:sendOobCode",fi(n,t))}async function sB(n,t){return d2(n,t)}async function aB(n,t){return d2(n,t)}async function rB(n,t){return d2(n,t)}async function oB(n,t){return d2(n,t)}async function lB(n,t){return rc(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,t))}async function uB(n,t){return rc(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,t))}class y_ extends zp{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new y_(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new y_(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wh(t,e,"signInWithPassword",iB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lB(t,{email:this._email,oobCode:this._password});default:As(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wh(t,i,"signUpPassword",eB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uB(t,{idToken:e,email:this._email,oobCode:this._password});default:As(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ku(n,t){return rc(n,"POST","/v1/accounts:signInWithIdp",fi(n,t))}const cB="http://localhost";class Zl extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Zl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):As("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...o}=e;if(!i||!s)return null;const c=new Zl(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Ku(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ku(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ku(t,e)}buildRequest(){const t={requestUri:cB,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ip(e)}return t}}async function H5(n,t){return di(n,"POST","/v1/accounts:sendVerificationCode",fi(n,t))}async function hB(n,t){return rc(n,"POST","/v1/accounts:signInWithPhoneNumber",fi(n,t))}async function fB(n,t){const e=await rc(n,"POST","/v1/accounts:signInWithPhoneNumber",fi(n,t));if(e.temporaryProof)throw O0(n,"account-exists-with-different-credential",e);return e}const dB={USER_NOT_FOUND:"user-not-found"};async function mB(n,t){const e={...t,operation:"REAUTH"};return rc(n,"POST","/v1/accounts:signInWithPhoneNumber",fi(n,e),dB)}class td extends zp{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new td({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new td({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return hB(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return fB(t,{idToken:e,...this._makeVerificationRequest()})}_getReauthenticationResolver(t){return mB(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o}=t;return!i&&!e&&!s&&!o?null:new td({verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o})}}function pB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gB(n){const t=Fm(R0(n)).link,e=t?Fm(R0(t)).deep_link_id:null,i=Fm(R0(n)).deep_link_id;return(i?Fm(R0(i)).link:null)||i||e||t||n}class m2{constructor(t){const e=Fm(R0(t)),i=e.apiKey??null,s=e.oobCode??null,o=pB(e.mode??null);It(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=gB(t);try{return new m2(e)}catch{return null}}}class Kh{constructor(){this.providerId=Kh.PROVIDER_ID}static credential(t,e){return y_._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=m2.parseLink(e);return It(i,"argument-error"),y_._fromEmailAndCode(t,i.code,i.tenantId)}}Kh.PROVIDER_ID="password";Kh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class oc{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Bp extends oc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Zm extends Bp{static credentialFromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;return It("providerId"in e&&"signInMethod"in e,"argument-error"),Zl._fromParams(e)}credential(t){return this._credential({...t,nonce:t.rawNonce})}_credential(t){return It(t.idToken||t.accessToken,"argument-error"),Zl._fromParams({...t,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(t){return Zm.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Zm.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:c,providerId:f}=t;if(!i&&!s&&!e&&!o||!f)return null;try{return new Zm(f)._credential({idToken:e,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}class zl extends Bp{constructor(){super("facebook.com")}static credential(t){return Zl._fromParams({providerId:zl.PROVIDER_ID,signInMethod:zl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zl.credentialFromTaggedObject(t)}static credentialFromError(t){return zl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zl.credential(t.oauthAccessToken)}catch{return null}}}zl.FACEBOOK_SIGN_IN_METHOD="facebook.com";zl.PROVIDER_ID="facebook.com";class Bl extends Bp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Zl._fromParams({providerId:Bl.PROVIDER_ID,signInMethod:Bl.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Bl.credentialFromTaggedObject(t)}static credentialFromError(t){return Bl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Bl.credential(e,i)}catch{return null}}}Bl.GOOGLE_SIGN_IN_METHOD="google.com";Bl.PROVIDER_ID="google.com";class Gl extends Bp{constructor(){super("github.com")}static credential(t){return Zl._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gl.credentialFromTaggedObject(t)}static credentialFromError(t){return Gl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gl.credential(t.oauthAccessToken)}catch{return null}}}Gl.GITHUB_SIGN_IN_METHOD="github.com";Gl.PROVIDER_ID="github.com";const _B="http://localhost";class Ap extends zp{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return Ku(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ku(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ku(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,pendingToken:o}=e;return!i||!s||!o||i!==s?null:new Ap(i,o)}static _create(t,e){return new Ap(t,e)}buildRequest(){return{requestUri:_B,returnSecureToken:!0,pendingToken:this.pendingToken}}}const yB="saml.";class Tv extends oc{constructor(t){It(t.startsWith(yB),"argument-error"),super(t)}static credentialFromResult(t){return Tv.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Tv.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=Ap.fromJSON(t);return It(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:i}=t;if(!e||!i)return null;try{return Ap._create(i,e)}catch{return null}}}class ql extends Bp{constructor(){super("twitter.com")}static credential(t,e){return Zl._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ql.credentialFromTaggedObject(t)}static credentialFromError(t){return ql.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return ql.credential(e,i)}catch{return null}}}ql.TWITTER_SIGN_IN_METHOD="twitter.com";ql.PROVIDER_ID="twitter.com";async function Q8(n,t){return rc(n,"POST","/v1/accounts:signUp",fi(n,t))}class po{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const o=await Fo._fromIdTokenResponse(t,i,s),c=j5(i);return new po({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=j5(i);return new po({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function j5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function vB(n){if(An(n.app))return Promise.reject(os(n));const t=ii(n);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new po({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await Q8(t,{returnSecureToken:!0}),i=await po._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class Sv extends ki{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Sv.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Sv(t,e,i,s)}}function X8(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sv._fromErrorAndOperation(n,o,t,i):o})}function J8(n){return new Set(n.map(({providerId:t})=>t).filter(t=>!!t))}async function EB(n,t){const e=jt(n);await p2(!0,e,t);const{providerUserInfo:i}=await Tz(e.auth,{idToken:await e.getIdToken(),deleteProvider:[t]}),s=J8(i||[]);return e.providerData=e.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(e.phoneNumber=null),await e.auth._persistUserIfCurrent(e),e}async function Pb(n,t,e=!1){const i=await Wu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return po._forOperation(n,"link",i)}async function p2(n,t,e){await __(t);const i=J8(t.providerData),s=n===!1?"provider-already-linked":"no-such-provider";It(i.has(e)===n,t.auth,s)}async function W8(n,t,e=!1){const{auth:i}=n;if(An(i.app))return Promise.reject(os(i));const s="reauthenticate";try{const o=await Wu(n,X8(i,s,t,n),e);It(o.idToken,i,"internal-error");const c=f2(o.idToken);It(c,i,"internal-error");const{sub:f}=c;return It(n.uid===f,i,"user-mismatch"),po._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&As(i,"user-mismatch"),o}}async function Z8(n,t,e=!1){if(An(n.app))return Promise.reject(os(n));const i="signIn",s=await X8(n,i,t),o=await po._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(o.user),o}async function g2(n,t){return Z8(ii(n),t)}async function $8(n,t){const e=jt(n);return await p2(!1,e,t.providerId),Pb(e,t)}async function t9(n,t){return W8(jt(n),t)}async function TB(n,t){return rc(n,"POST","/v1/accounts:signInWithCustomToken",fi(n,t))}async function SB(n,t){if(An(n.app))return Promise.reject(os(n));const e=ii(n),i=await TB(e,{token:t,returnSecureToken:!0}),s=await po._fromIdTokenResponse(e,"signIn",i);return await e._updateCurrentUser(s.user),s}class H_{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?Vb._fromServerResponse(t,e):"totpInfo"in e?kb._fromServerResponse(t,e):As(t,"internal-error")}}class Vb extends H_{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new Vb(e)}}class kb extends H_{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new kb(e)}}function _2(n,t,e){It(e.url?.length>0,n,"invalid-continue-uri"),It(typeof e.dynamicLinkDomain>"u"||e.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),It(typeof e.linkDomain>"u"||e.linkDomain.length>0,n,"invalid-hosting-link-domain"),t.continueUrl=e.url,t.dynamicLinkDomain=e.dynamicLinkDomain,t.linkDomain=e.linkDomain,t.canHandleCodeInApp=e.handleCodeInApp,e.iOS&&(It(e.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=e.iOS.bundleId),e.android&&(It(e.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=e.android.installApp,t.androidMinimumVersionCode=e.android.minimumVersion,t.androidPackageName=e.android.packageName)}async function Lb(n){const t=ii(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function bB(n,t,e){const i=ii(n),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};e&&_2(i,s,e),await wh(i,s,"getOobCode",aB,"EMAIL_PASSWORD_PROVIDER")}async function AB(n,t,e){await Y8(jt(n),{oobCode:t,newPassword:e}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Lb(n),i})}async function wB(n,t){await nB(jt(n),{oobCode:t})}async function e9(n,t){const e=jt(n),i=await Y8(e,{oobCode:t}),s=i.requestType;switch(It(s,e,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":It(i.newEmail,e,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":It(i.mfaInfo,e,"internal-error");default:It(i.email,e,"internal-error")}let o=null;return i.mfaInfo&&(o=H_._fromServerResponse(ii(e),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function RB(n,t){const{data:e}=await e9(jt(n),t);return e.email}async function CB(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=ii(n),c=await wh(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q8,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Lb(n),m}),f=await po._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function IB(n,t,e){return An(n.app)?Promise.reject(os(n)):g2(jt(n),Kh.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Lb(n),i})}async function NB(n,t,e){const i=ii(n),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(c,f){It(f.handleCodeInApp,i,"argument-error"),f&&_2(i,c,f)}o(s,e),await wh(i,s,"getOobCode",rB,"EMAIL_PASSWORD_PROVIDER")}function DB(n,t){return m2.parseLink(t)?.operation==="EMAIL_SIGNIN"}async function xB(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=jt(n),s=Kh.credentialWithLink(t,e||g_());return It(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),g2(i,s)}async function OB(n,t){return di(n,"POST","/v1/accounts:createAuthUri",fi(n,t))}async function MB(n,t){const e=xb()?g_():"http://localhost",i={identifier:t,continueUri:e},{signinMethods:s}=await OB(jt(n),i);return s||[]}async function PB(n,t){const e=jt(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};t&&_2(e.auth,s,t);const{email:o}=await sB(e.auth,s);o!==n.email&&await n.reload()}async function VB(n,t,e){const i=jt(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:t};e&&_2(i.auth,o,e);const{email:c}=await oB(i.auth,o);c!==n.email&&await n.reload()}async function kB(n,t){return di(n,"POST","/v1/accounts:update",t)}async function LB(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const i=jt(n),o={idToken:await i.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},c=await Wu(i,kB(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function UB(n,t){const e=jt(n);return An(e.auth.app)?Promise.reject(os(e.auth)):n9(e,t,null)}function zB(n,t){return n9(jt(n),null,t)}async function n9(n,t,e){const{auth:i}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(o.email=t),e&&(o.password=e);const c=await Wu(n,tB(i,o));await n._updateTokensIfNecessary(c,!0)}function BB(n){if(!n)return null;const{providerId:t}=n,e=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!t&&n?.idToken){const s=f2(n.idToken)?.firebase?.sign_in_provider;if(s){const o=s!=="anonymous"&&s!=="custom"?s:null;return new $m(i,o)}}if(!t)return null;switch(t){case"facebook.com":return new GB(i,e);case"github.com":return new qB(i,e);case"google.com":return new HB(i,e);case"twitter.com":return new jB(i,e,n.screenName||null);case"custom":case"anonymous":return new $m(i,null);default:return new $m(i,t,e)}}class $m{constructor(t,e,i={}){this.isNewUser=t,this.providerId=e,this.profile=i}}class i9 extends $m{constructor(t,e,i,s){super(t,e,i),this.username=s}}class GB extends $m{constructor(t,e){super(t,"facebook.com",e)}}class qB extends i9{constructor(t,e){super(t,"github.com",e,typeof e?.login=="string"?e?.login:null)}}class HB extends $m{constructor(t,e){super(t,"google.com",e)}}class jB extends i9{constructor(t,e,i){super(t,"twitter.com",e,i)}}function FB(n){const{user:t,_tokenResponse:e}=n;return t.isAnonymous&&!e?{providerId:null,isNewUser:!1,profile:null}:BB(e)}class Xf{constructor(t,e,i){this.type=t,this.credential=e,this.user=i}static _fromIdtoken(t,e){return new Xf("enroll",t,e)}static _fromMfaPendingCredential(t){return new Xf("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){if(t?.multiFactorSession){if(t.multiFactorSession?.pendingCredential)return Xf._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(t.multiFactorSession?.idToken)return Xf._fromIdtoken(t.multiFactorSession.idToken)}return null}}class Ub{constructor(t,e,i){this.session=t,this.hints=e,this.signInResolver=i}static _fromError(t,e){const i=ii(t),s=e.customData._serverResponse,o=(s.mfaInfo||[]).map(f=>H_._fromServerResponse(i,f));It(s.mfaPendingCredential,i,"internal-error");const c=Xf._fromMfaPendingCredential(s.mfaPendingCredential);return new Ub(c,o,async f=>{const m=await f._process(i,c);delete s.mfaInfo,delete s.mfaPendingCredential;const g={...s,idToken:m.idToken,refreshToken:m.refreshToken};switch(e.operationType){case"signIn":const E=await po._fromIdTokenResponse(i,e.operationType,g);return await i._updateCurrentUser(E.user),E;case"reauthenticate":return It(e.user,i,"internal-error"),po._forOperation(e.user,e.operationType,g);default:As(i,"internal-error")}})}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function KB(n,t){const e=jt(n),i=t;return It(t.customData.operationType,e,"argument-error"),It(i.customData._serverResponse?.mfaPendingCredential,e,"argument-error"),Ub._fromError(e,i)}function F5(n,t){return di(n,"POST","/v2/accounts/mfaEnrollment:start",fi(n,t))}function YB(n,t){return di(n,"POST","/v2/accounts/mfaEnrollment:finalize",fi(n,t))}function QB(n,t){return di(n,"POST","/v2/accounts/mfaEnrollment:withdraw",fi(n,t))}class zb{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(i=>H_._fromServerResponse(t.auth,i)))})}static _fromUser(t){return new zb(t)}async getSession(){return Xf._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,e){const i=t,s=await this.getSession(),o=await Wu(this.user,i._process(this.user.auth,s,e));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(t){const e=typeof t=="string"?t:t.uid,i=await this.user.getIdToken();try{const s=await Wu(this.user,QB(this.user.auth,{idToken:i,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==e),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const GE=new WeakMap;function XB(n){const t=jt(n);return GE.has(t)||GE.set(t,zb._fromUser(t)),GE.get(t)}const bv="__sak";class s9{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(bv,"1"),this.storage.removeItem(bv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const JB=1e3,WB=10;class a9 extends s9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);xz()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,WB):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},JB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}a9.type="LOCAL";const Bb=a9;class r9 extends s9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}r9.type="SESSION";const dd=r9;function ZB(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class y2{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new y2(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:o}=e.data,c=this.handlersMap[s];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async g=>g(e.origin,o)),m=await ZB(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}y2.receivers=[];function j_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class $B{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,m)=>{const g=j_("",20);s.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(b){const A=b;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(E),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(A.data.response);break;default:clearTimeout(E),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Pi(){return window}function tG(n){Pi().location.href=n}function Gb(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function eG(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nG(){return navigator?.serviceWorker?.controller||null}function iG(){return Gb()?self:null}const o9="firebaseLocalStorageDb",sG=1,Av="firebaseLocalStorage",l9="fbase_key";class F_{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function v2(n,t){return n.transaction([Av],t?"readwrite":"readonly").objectStore(Av)}function aG(){const n=indexedDB.deleteDatabase(o9);return new F_(n).toPromise()}function KT(){const n=indexedDB.open(o9,sG);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Av,{keyPath:l9})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Av)?t(i):(i.close(),await aG(),t(await KT()))})})}async function K5(n,t,e){const i=v2(n,!0).put({[l9]:t,value:e});return new F_(i).toPromise()}async function rG(n,t){const e=v2(n,!1).get(t),i=await new F_(e).toPromise();return i===void 0?null:i.value}function Y5(n,t){const e=v2(n,!0).delete(t);return new F_(e).toPromise()}const oG=800,lG=3;class u9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KT(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>lG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=y2._getInstance(iG()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await eG(),!this.activeServiceWorker)return;this.sender=new $B(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await KT();return await K5(t,bv,"1"),await Y5(t,bv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>K5(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>rG(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Y5(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=v2(s,!1).getAll();return new F_(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u9.type="LOCAL";const v_=u9;function Q5(n,t){return di(n,"POST","/v2/accounts/mfaSignIn:start",fi(n,t))}function uG(n,t){return di(n,"POST","/v2/accounts/mfaSignIn:finalize",fi(n,t))}const qE=j8("rcb"),cG=new z_(3e4,6e4);class hG{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Pi().grecaptcha?.render}load(t,e=""){return It(fG(e),t,"argument-error"),this.shouldResolveImmediately(e)&&k5(Pi().grecaptcha)?Promise.resolve(Pi().grecaptcha):new Promise((i,s)=>{const o=Pi().setTimeout(()=>{s(Qi(t,"network-request-failed"))},cG.get());Pi()[qE]=()=>{Pi().clearTimeout(o),delete Pi()[qE];const f=Pi().grecaptcha;if(!f||!k5(f)){s(Qi(t,"internal-error"));return}const m=f.render;f.render=(g,E)=>{const b=m(g,E);return this.counter++,b},this.hostLanguage=e,i(f)};const c=`${Uz()}?${Ip({onload:qE,render:"explicit",hl:e})}`;Mb(c).catch(()=>{clearTimeout(o),s(Qi(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!Pi().grecaptcha?.render&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function fG(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class dG{async load(t){return new Hz(t)}clearedOneInstance(){}}const X0="recaptcha",mG={theme:"light",type:"image"};let pG=class{constructor(t,e,i={...mG}){this.parameters=i,this.type=X0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ii(t),this.isInvisible=this.parameters.size==="invisible",It(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;It(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dG:new hG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),i=e.getResponse(t);return i||new Promise(s=>{const o=c=>{c&&(this.tokenChangeListeners.delete(o),s(c))};this.tokenChangeListeners.add(o),this.isInvisible&&e.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){It(!this.parameters.sitekey,this.auth,"argument-error"),It(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),It(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(i=>i(e)),typeof t=="function")t(e);else if(typeof t=="string"){const i=Pi()[t];typeof i=="function"&&i(e)}}}assertNotDestroyed(){It(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){It(xb()&&!Gb(),this.auth,"internal-error"),await gG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await vz(this.auth);It(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return It(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function gG(){let n=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}n=()=>t(),window.addEventListener("load",n)}).catch(t=>{throw n&&window.removeEventListener("load",n),t})}class qb{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=td._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function _G(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=ii(n),s=await E2(i,t,jt(e));return new qb(s,o=>g2(i,o))}async function yG(n,t,e){const i=jt(n);await p2(!1,i,"phone");const s=await E2(i.auth,t,jt(e));return new qb(s,o=>$8(i,o))}async function vG(n,t,e){const i=jt(n);if(An(i.auth.app))return Promise.reject(os(i.auth));const s=await E2(i.auth,t,jt(e));return new qb(s,o=>t9(i,o))}async function E2(n,t,e){if(!n._getRecaptchaConfig())try{await Xz(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof t=="string"?i={phoneNumber:t}:i=t,"session"in i){const s=i.session;if("phoneNumber"in i){It(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await wh(n,o,"mfaSmsEnrollment",async(g,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===Q0){It(e?.type===X0,g,"argument-error");const b=await HE(g,E,e);return F5(g,b)}return F5(g,E)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{It(s.type==="signin",n,"internal-error");const o=i.multiFactorHint?.uid||i.multiFactorUid;It(o,n,"missing-multi-factor-info");const c={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await wh(n,c,"mfaSmsSignIn",async(E,b)=>{if(b.phoneSignInInfo.captchaResponse===Q0){It(e?.type===X0,E,"argument-error");const A=await HE(E,b,e);return Q5(E,A)}return Q5(E,b)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await wh(n,s,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===Q0){It(e?.type===X0,m,"argument-error");const E=await HE(m,g,e);return H5(m,E)}return H5(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{e?._reset()}}async function EG(n,t){const e=jt(n);if(An(e.auth.app))return Promise.reject(os(e.auth));await Pb(e,t)}async function HE(n,t,e){It(e.type===X0,n,"argument-error");const i=await e.verify();It(typeof i=="string",n,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,c=s.phoneEnrollmentInfo.captchaResponse,f=s.phoneEnrollmentInfo.clientType,m=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i,captchaResponse:c,clientType:f,recaptchaVersion:m}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,c=s.phoneSignInInfo.clientType,f=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:o,clientType:c,recaptchaVersion:f}}),s}else return Object.assign(s,{recaptchaToken:i}),s}let md=class Q1{constructor(t){this.providerId=Q1.PROVIDER_ID,this.auth=ii(t)}verifyPhoneNumber(t,e){return E2(this.auth,t,jt(e))}static credential(t,e){return td._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Q1.credentialFromTaggedObject(e)}static credentialFromError(t){return Q1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:i}=t;return e&&i?td._fromTokenResponse(e,i):null}};md.PROVIDER_ID="phone";md.PHONE_SIGN_IN_METHOD="phone";function xd(n,t){return t?br(t):(It(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Hb extends zp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ku(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ku(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ku(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function TG(n){return Z8(n.auth,new Hb(n),n.bypassAuthState)}function SG(n){const{auth:t,user:e}=n;return It(e,t,"internal-error"),W8(e,new Hb(n),n.bypassAuthState)}async function bG(n){const{auth:t,user:e}=n;return It(e,t,"internal-error"),Pb(e,new Hb(n),n.bypassAuthState)}class c9{constructor(t,e,i,s,o=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:o,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return TG;case"linkViaPopup":case"linkViaRedirect":return bG;case"reauthViaPopup":case"reauthViaRedirect":return SG;default:As(this.auth,"internal-error")}}resolve(t){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AG=new z_(2e3,1e4);async function wG(n,t,e){if(An(n.app))return Promise.reject(Qi(n,"operation-not-supported-in-this-environment"));const i=ii(n);Up(n,t,oc);const s=xd(i,e);return new Hu(i,"signInViaPopup",t,s).executeNotNull()}async function RG(n,t,e){const i=jt(n);if(An(i.auth.app))return Promise.reject(Qi(i.auth,"operation-not-supported-in-this-environment"));Up(i.auth,t,oc);const s=xd(i.auth,e);return new Hu(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function CG(n,t,e){const i=jt(n);Up(i.auth,t,oc);const s=xd(i.auth,e);return new Hu(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class Hu extends c9{constructor(t,e,i,s,o){super(t,e,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Hu.currentPopupAction&&Hu.currentPopupAction.cancel(),Hu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return It(t,this.auth,"internal-error"),t}async onExecution(){Jo(this.filter.length===1,"Popup operations only handle one event");const t=j_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hu.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,AG.get())};t()}}Hu.currentPopupAction=null;const IG="pendingRedirect",J0=new Map;class NG extends c9{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=J0.get(this.auth._key());if(!t){try{const i=await DG(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}J0.set(this.auth._key(),t)}return this.bypassAuthState||J0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DG(n,t){const e=f9(t),i=h9(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}async function jb(n,t){return h9(n)._set(f9(t),"true")}function xG(){J0.clear()}function Fb(n,t){J0.set(n._key(),t)}function h9(n){return br(n._redirectPersistence)}function f9(n){return $f(IG,n.config.apiKey,n.name)}function OG(n,t,e){return MG(n,t,e)}async function MG(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=ii(n);Up(n,t,oc),await i._initializationPromise;const s=xd(i,e);return await jb(s,i),s._openRedirect(i,t,"signInViaRedirect")}function PG(n,t,e){return VG(n,t,e)}async function VG(n,t,e){const i=jt(n);if(Up(i.auth,t,oc),An(i.auth.app))return Promise.reject(os(i.auth));await i.auth._initializationPromise;const s=xd(i.auth,e);await jb(s,i.auth);const o=await d9(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}function kG(n,t,e){return LG(n,t,e)}async function LG(n,t,e){const i=jt(n);Up(i.auth,t,oc),await i.auth._initializationPromise;const s=xd(i.auth,e);await p2(!1,i,t.providerId),await jb(s,i.auth);const o=await d9(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}async function UG(n,t){return await ii(n)._initializationPromise,T2(n,t,!1)}async function T2(n,t,e=!1){if(An(n.app))return Promise.reject(os(n));const i=ii(n),s=xd(i,t),c=await new NG(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}async function d9(n){const t=j_(`${n.uid}:::`);return n._redirectEventId=t,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),t}const zG=600*1e3;class m9{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!BG(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!p9(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Qi(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zG&&this.cachedEventUids.clear(),this.cachedEventUids.has(X5(t))}saveEventToCache(t){this.cachedEventUids.add(X5(t)),this.lastProcessedEventTime=Date.now()}}function X5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function p9({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function BG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p9(n);default:return!1}}async function g9(n,t={}){return di(n,"GET","/v1/projects",t)}const GG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qG=/^https?/;async function HG(n){if(n.config.emulator)return;const{authorizedDomains:t}=await g9(n);for(const e of t)try{if(jG(e))return}catch{}As(n,"unauthorized-domain")}function jG(n){const t=g_(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!qG.test(e))return!1;if(GG.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const FG=new z_(3e4,6e4);function J5(){const n=Pi().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function KG(n){return new Promise((t,e)=>{function i(){J5(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{J5(),e(Qi(n,"network-request-failed"))},timeout:FG.get()})}if(Pi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Pi().gapi?.load)i();else{const s=j8("iframefcb");return Pi()[s]=()=>{gapi.load?i():e(Qi(n,"network-request-failed"))},Mb(`${Bz()}?onload=${s}`).catch(o=>e(o))}}).catch(t=>{throw X1=null,t})}let X1=null;function YG(n){return X1=X1||KG(n),X1}const QG=new z_(5e3,15e3),XG="__/auth/iframe",JG="emulator/auth/iframe",WG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $G(n){const t=n.config;It(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ob(t,JG):`https://${n.config.authDomain}/${XG}`,i={apiKey:t.apiKey,appName:n.name,v:ec},s=ZG.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Ip(i).slice(1)}`}async function tq(n){const t=await YG(n),e=Pi().gapi;return It(e,n,"internal-error"),t.open({where:document.body,url:$G(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WG,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=Qi(n,"network-request-failed"),f=Pi().setTimeout(()=>{o(c)},QG.get());function m(){Pi().clearTimeout(f),s(i)}i.ping(m).then(m,()=>{o(c)})}))}const eq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nq=500,iq=600,sq="_blank",aq="http://localhost";class W5{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rq(n,t,e,i=nq,s=iq){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...eq,width:i.toString(),height:s.toString(),top:o,left:c},g=ni().toLowerCase();e&&(f=U8(g)?sq:e),k8(g)&&(t=t||aq,m.scrollbars="yes");const E=Object.entries(m).reduce((A,[N,D])=>`${A}${N}=${D},`,"");if(Dz(g)&&f!=="_self")return oq(t||"",f),new W5(null);const b=window.open(t||"",f,E);It(b,n,"popup-blocked");try{b.focus()}catch{}return new W5(b)}function oq(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const lq="__/auth/handler",uq="emulator/auth/handler",cq=encodeURIComponent("fac");async function YT(n,t,e,i,s,o){It(n.config.authDomain,n,"auth-domain-config-required"),It(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:ec,eventId:s};if(t instanceof oc){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",pM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,b]of Object.entries(o||{}))c[E]=b}if(t instanceof Bp){const E=t.getScopes().filter(b=>b!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const m=await n._getAppCheckToken(),g=m?`#${cq}=${encodeURIComponent(m)}`:"";return`${hq(n)}?${Ip(f).slice(1)}${g}`}function hq({config:n}){return n.emulator?Ob(n,uq):`https://${n.authDomain}/${lq}`}const jE="webStorageSupport";class fq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dd,this._completeRedirectFn=T2,this._overrideRedirectResult=Fb}async _openPopup(t,e,i,s){Jo(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await YT(t,e,i,g_(),s);return rq(t,o,j_())}async _openRedirect(t,e,i,s){await this._originValidation(t);const o=await YT(t,e,i,g_(),s);return tG(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:o}=this.eventManagers[e];return s?Promise.resolve(s):(Jo(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await tq(t),i=new m9(t);return e.register("authEvent",s=>(It(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(jE,{type:jE},s=>{const o=s?.[0]?.[jE];o!==void 0&&e(!!o),As(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=HG(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return q8()||L8()||G_()}}const dq=fq;class mq{constructor(t){this.factorId=t}_process(t,e,i){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,i);case"signin":return this._finalizeSignIn(t,e.credential);default:return Kl("unexpected MultiFactorSessionType")}}}class Kb extends mq{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Kb(t)}_finalizeEnroll(t,e,i){return YB(t,{idToken:e,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return uG(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class _9{constructor(){}static assertion(t){return Kb._fromCredential(t)}}_9.FACTOR_ID="phone";var Z5="@firebase/auth",$5="1.12.0";class pq{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _q(n){_a(new Li("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;It(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H8(n)},g=new kz(i,s,o,m);return Jz(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),_a(new Li("auth-internal",t=>{const e=ii(t.getProvider("auth").getImmediate());return(i=>new pq(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yi(Z5,$5,gq(n)),Yi(Z5,$5,"esm2020")}const yq=300;iM("authIdTokenMaxAge");function vq(){return document.getElementsByTagName("head")?.[0]??document}Lz({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const o=Qi("internal-error");o.customData=s,e(o)},i.type="text/javascript",i.charset="UTF-8",vq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_q("Browser");function pd(){return window}const Eq=2e3;async function Tq(n,t,e){const{BuildInfo:i}=pd();Jo(t.sessionId,"AuthEvent did not contain a session ID");const s=await Rq(t.sessionId),o={};return G_()?o.ibi=i.packageName:B_()?o.apn=i.packageName:As(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,YT(n,e,t.type,void 0,t.eventId??void 0,o)}async function Sq(n){const{BuildInfo:t}=pd(),e={};G_()?e.iosBundleId=t.packageName:B_()?e.androidPackageName=t.packageName:As(n,"operation-not-supported-in-this-environment"),await g9(n,e)}function bq(n){const{cordova:t}=pd();return new Promise(e=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(n):s=t.InAppBrowser.open(n,Nz()?"_blank":"_system","location=yes"),e(s)})})}async function Aq(n,t,e){const{cordova:i}=pd();let s=()=>{};try{await new Promise((o,c)=>{let f=null;function m(){o();const b=i.plugins.browsertab?.close;typeof b=="function"&&b(),typeof e?.close=="function"&&e.close()}function g(){f||(f=window.setTimeout(()=>{c(Qi(n,"redirect-cancelled-by-user"))},Eq))}function E(){document?.visibilityState==="visible"&&g()}t.addPassiveListener(m),document.addEventListener("resume",g,!1),B_()&&document.addEventListener("visibilitychange",E,!1),s=()=>{t.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",E,!1),f&&window.clearTimeout(f)}})}finally{s()}}function wq(n){const t=pd();It(typeof t?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),It(typeof t?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),It(typeof t?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),It(typeof t?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),It(typeof t?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Rq(n){const t=Cq(n),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Cq(n){if(Jo(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const t=new ArrayBuffer(n.length),e=new Uint8Array(t);for(let i=0;i<n.length;i++)e[i]=n.charCodeAt(i);return e}const Iq=20;class Nq extends m9{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInitialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInitialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}async initialized(){await this.initPromise}}function Dq(n,t,e=null){return{type:t,eventId:e,urlResponse:null,sessionId:Mq(),postBody:null,tenantId:n.tenantId,error:Qi(n,"no-auth-event")}}function xq(n,t){return QT()._set(XT(n),t)}async function t6(n){const t=await QT()._get(XT(n));return t&&await QT()._remove(XT(n)),t}function Oq(n,t){const e=Vq(t);if(e.includes("/__/auth/callback")){const i=J1(e),o=(i.firebaseError?Pq(decodeURIComponent(i.firebaseError)):null)?.code?.split("auth/")?.[1],c=o?Qi(o):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:e,postBody:null}}return null}function Mq(){const n=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<Iq;e++){const i=Math.floor(Math.random()*t.length);n.push(t.charAt(i))}return n.join("")}function QT(){return br(Bb)}function XT(n){return $f("authEvent",n.config.apiKey,n.name)}function Pq(n){try{return JSON.parse(n)}catch{return null}}function Vq(n){const t=J1(n),e=t.link?decodeURIComponent(t.link):void 0,i=J1(e).link,s=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return J1(s).link||s||i||e||n}function J1(n){if(!n?.includes("?"))return{};const[t,...e]=n.split("?");return Fm(e.join("?"))}const kq=500;class Lq{constructor(){this._redirectPersistence=dd,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=T2,this._overrideRedirectResult=Fb}async _initialize(t){const e=t._key();let i=this.eventManagers.get(e);return i||(i=new Nq(t),this.eventManagers.set(e,i),this.attachCallbackListeners(t,i)),i}_openPopup(t){As(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,i,s){wq(t);const o=await this._initialize(t);await o.initialized(),o.resetRedirect(),xG(),await this._originValidation(t);const c=Dq(t,i,s);await xq(t,c);const f=await Tq(t,c,e),m=await bq(f);return Aq(t,o,m)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Sq(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:i,handleOpenURL:s,BuildInfo:o}=pd(),c=setTimeout(async()=>{await t6(t),e.onEvent(e6())},kq),f=async E=>{clearTimeout(c);const b=await t6(t);let A=null;b&&E?.url&&(A=Oq(b,E.url)),e.onEvent(A||e6())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,f);const m=s,g=`${o.packageName.toLowerCase()}://`;pd().handleOpenURL=async E=>{if(E.toLowerCase().startsWith(g)&&f({url:E}),typeof m=="function")try{m(E)}catch(b){console.error(b)}}}}const Uq=Lq;function e6(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qi("no-auth-event")}}function zq(n,t){ii(n)._logFramework(t)}var Bq="@firebase/auth-compat",Gq="0.6.2";const qq=1e3;function W0(){return self?.location?.protocol||null}function Hq(){return W0()==="http:"||W0()==="https:"}function y9(n=ni()){return!!((W0()==="file:"||W0()==="ionic:"||W0()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function jq(){return gS()||zv()}function Fq(){return ww()&&document?.documentMode===11}function Kq(n=ni()){return/Edge\/\d+/.test(n)}function Yq(n=ni()){return Fq()||Kq(n)}function v9(){try{const n=self.localStorage,t=j_();if(n)return n.setItem(t,"1"),n.removeItem(t),Yq()?nd():!0}catch{return Yb()&&nd()}return!1}function Yb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function FE(){return(Hq()||Aw()||y9())&&!jq()&&v9()&&!Yb()}function E9(){return y9()&&typeof document<"u"}async function Qq(){return E9()?new Promise(n=>{const t=setTimeout(()=>{n(!1)},qq);document.addEventListener("deviceready",()=>{clearTimeout(t),n(!0)})}):!1}function Xq(){return typeof window<"u"?window:null}const Tr={LOCAL:"local",NONE:"none",SESSION:"session"},y0=It,T9="persistence";function Jq(n,t){if(y0(Object.values(Tr).includes(t),n,"invalid-persistence-type"),gS()){y0(t!==Tr.SESSION,n,"unsupported-persistence-type");return}if(zv()){y0(t===Tr.NONE,n,"unsupported-persistence-type");return}if(Yb()){y0(t===Tr.NONE||t===Tr.LOCAL&&nd(),n,"unsupported-persistence-type");return}y0(t===Tr.NONE||v9(),n,"unsupported-persistence-type")}async function JT(n){await n._initializationPromise;const t=S9(),e=$f(T9,n.config.apiKey,n.name);t&&t.setItem(e,n._getPersistenceType())}function Wq(n,t){const e=S9();if(!e)return[];const i=$f(T9,n,t);switch(e.getItem(i)){case Tr.NONE:return[bp];case Tr.LOCAL:return[v_,dd];case Tr.SESSION:return[dd];default:return[]}}function S9(){try{return Xq()?.sessionStorage||null}catch{return null}}const Zq=It;class Th{constructor(){this.browserResolver=br(dq),this.cordovaResolver=br(Uq),this.underlyingResolver=null,this._redirectPersistence=dd,this._completeRedirectFn=T2,this._overrideRedirectResult=Fb}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,i,s)}async _openRedirect(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,i,s)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return E9()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zq(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await Qq();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}function b9(n){return n.unwrap()}function $q(n){return n.wrapped()}function tH(n){return A9(n)}function eH(n,t){const e=t.customData?._tokenResponse;if(t?.code==="auth/multi-factor-auth-required"){const i=t;i.resolver=new nH(n,KB(n,t))}else if(e){const i=A9(t),s=t;i&&(s.credential=i,s.tenantId=e.tenantId||void 0,s.email=e.email||void 0,s.phoneNumber=e.phoneNumber||void 0)}}function A9(n){const{_tokenResponse:t}=n instanceof ki?n.customData:n;if(!t)return null;if(!(n instanceof ki)&&"temporaryProof"in t&&"phoneNumber"in t)return md.credentialFromResult(n);const e=t.providerId;if(!e||e===g0.PASSWORD)return null;let i;switch(e){case g0.GOOGLE:i=Bl;break;case g0.FACEBOOK:i=zl;break;case g0.GITHUB:i=Gl;break;case g0.TWITTER:i=ql;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:c,pendingToken:f,nonce:m}=t;return!o&&!c&&!s&&!f?null:f?e.startsWith("saml.")?Ap._create(e,f):Zl._fromParams({providerId:e,signInMethod:e,pendingToken:f,idToken:s,accessToken:o}):new Zm(e).credential({idToken:s,accessToken:o,rawNonce:m})}return n instanceof ki?i.credentialFromError(n):i.credentialFromResult(n)}function Qa(n,t){return t.catch(e=>{throw e instanceof ki&&eH(n,e),e}).then(e=>{const i=e.operationType,s=e.user;return{operationType:i,credential:tH(e),additionalUserInfo:FB(e),user:ju.getOrCreate(s)}})}async function WT(n,t){const e=await t;return{verificationId:e.verificationId,confirm:i=>Qa(n,e.confirm(i))}}class nH{constructor(t,e){this.resolver=e,this.auth=$q(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return Qa(b9(this.auth),this.resolver.resolveSignIn(t))}}class ju{constructor(t){this._delegate=t,this.multiFactor=XB(t)}static getOrCreate(t){return ju.USER_MAP.has(t)||ju.USER_MAP.set(t,new ju(t)),ju.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return Qa(this.auth,$8(this._delegate,t))}async linkWithPhoneNumber(t,e){return WT(this.auth,yG(this._delegate,t,e))}async linkWithPopup(t){return Qa(this.auth,CG(this._delegate,t,Th))}async linkWithRedirect(t){return await JT(ii(this.auth)),kG(this._delegate,t,Th)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return Qa(this.auth,t9(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return WT(this.auth,vG(this._delegate,t,e))}reauthenticateWithPopup(t){return Qa(this.auth,RG(this._delegate,t,Th))}async reauthenticateWithRedirect(t){return await JT(ii(this.auth)),PG(this._delegate,t,Th)}sendEmailVerification(t){return PB(this._delegate,t)}async unlink(t){return await EB(this._delegate,t),this}updateEmail(t){return UB(this._delegate,t)}updatePassword(t){return zB(this._delegate,t)}updatePhoneNumber(t){return EG(this._delegate,t)}updateProfile(t){return LB(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return VB(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ju.USER_MAP=new WeakMap;const v0=It;class ZT{constructor(t,e){if(this.app=t,e.isInitialized()){this._delegate=e.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=t.options;v0(i,"invalid-api-key",{appName:t.name}),v0(i,"invalid-api-key",{appName:t.name});const s=typeof window<"u"?Th:void 0;this._delegate=e.initialize({options:{persistence:iH(i,t.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(uz),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ju.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){Wz(this._delegate,t,e)}applyActionCode(t){return wB(this._delegate,t)}checkActionCode(t){return e9(this._delegate,t)}confirmPasswordReset(t,e){return AB(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return Qa(this._delegate,CB(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return MB(this._delegate,t)}isSignInWithEmailLink(t){return DB(this._delegate,t)}async getRedirectResult(){v0(FE(),this._delegate,"operation-not-supported-in-this-environment");const t=await UG(this._delegate,Th);return t?Qa(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){zq(this._delegate,t)}onAuthStateChanged(t,e,i){const{next:s,error:o,complete:c}=n6(t,e,i);return this._delegate.onAuthStateChanged(s,o,c)}onIdTokenChanged(t,e,i){const{next:s,error:o,complete:c}=n6(t,e,i);return this._delegate.onIdTokenChanged(s,o,c)}sendSignInLinkToEmail(t,e){return NB(this._delegate,t,e)}sendPasswordResetEmail(t,e){return bB(this._delegate,t,e||void 0)}async setPersistence(t){Jq(this._delegate,t);let e;switch(t){case Tr.SESSION:e=dd;break;case Tr.LOCAL:e=await br(v_)._isAvailable()?v_:Bb;break;case Tr.NONE:e=bp;break;default:return As("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return Qa(this._delegate,vB(this._delegate))}signInWithCredential(t){return Qa(this._delegate,g2(this._delegate,t))}signInWithCustomToken(t){return Qa(this._delegate,SB(this._delegate,t))}signInWithEmailAndPassword(t,e){return Qa(this._delegate,IB(this._delegate,t,e))}signInWithEmailLink(t,e){return Qa(this._delegate,xB(this._delegate,t,e))}signInWithPhoneNumber(t,e){return WT(this._delegate,_G(this._delegate,t,e))}async signInWithPopup(t){return v0(FE(),this._delegate,"operation-not-supported-in-this-environment"),Qa(this._delegate,wG(this._delegate,t,Th))}async signInWithRedirect(t){return v0(FE(),this._delegate,"operation-not-supported-in-this-environment"),await JT(this._delegate),OG(this._delegate,t,Th)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return RB(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}ZT.Persistence=Tr;function n6(n,t,e){let i=n;typeof n!="function"&&({next:i,error:t,complete:e}=n);const s=i;return{next:c=>s(c&&ju.getOrCreate(c)),error:t,complete:e}}function iH(n,t){const e=Wq(n,t);if(typeof self<"u"&&!e.includes(v_)&&e.push(v_),typeof window<"u")for(const i of[Bb,dd])e.includes(i)||e.push(i);return e.includes(bp)||e.push(bp),e}class Qb{static credential(t,e){return md.credential(t,e)}constructor(){this.providerId="phone",this._delegate=new md(b9(_o.auth()))}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Qb.PHONE_SIGN_IN_METHOD=md.PHONE_SIGN_IN_METHOD;Qb.PROVIDER_ID=md.PROVIDER_ID;const sH=It;class aH{constructor(t,e,i=_o.app()){sH(i.options?.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new pG(i.auth(),t,e),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const rH="auth-compat";function oH(n){n.INTERNAL.registerComponent(new Li(rH,t=>{const e=t.getProvider("app-compat").getImmediate(),i=t.getProvider("auth");return new ZT(e,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:km.EMAIL_SIGNIN,PASSWORD_RESET:km.PASSWORD_RESET,RECOVER_EMAIL:km.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:km.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:km.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:km.VERIFY_EMAIL}},EmailAuthProvider:Kh,FacebookAuthProvider:zl,GithubAuthProvider:Gl,GoogleAuthProvider:Bl,OAuthProvider:Zm,SAMLAuthProvider:Tv,PhoneAuthProvider:Qb,PhoneMultiFactorGenerator:_9,RecaptchaVerifier:aH,TwitterAuthProvider:ql,Auth:ZT,AuthCredential:zp,Error:ki}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(Bq,Gq)}oH(_o);const lH="@firebase/firestore-compat",uH="0.4.5";function Xb(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Tt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function i6(){if(typeof Uint8Array>"u")throw new Tt("unimplemented","Uint8Arrays are not available in this environment.")}function s6(){if(!vV())throw new Tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}let w9=class $T{constructor(t){this._delegate=t}static fromBase64String(t){return s6(),new $T(js.fromBase64String(t))}static fromUint8Array(t){return i6(),new $T(js.fromUint8Array(t))}toBase64(){return s6(),this._delegate.toBase64()}toUint8Array(){return i6(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function tS(n){return cH(n,["next","error","complete"])}function cH(n,t){if(typeof n!="object"||n===null)return!1;const e=n;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}class hH{enableIndexedDbPersistence(t,e){return fU(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return dU(t._delegate)}clearIndexedDbPersistence(t){return mU(t._delegate)}}class R9{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Dh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t={...e,...t},delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){lU(this._delegate,t,e,i)}enableNetwork(){return gU(this._delegate)}disableNetwork(){return _U(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Xw("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return pU(this._delegate)}onSnapshotsInSync(t){return ZU(this._delegate,t)}get app(){if(!this._appCompat)throw new Tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new wp(this,gb(this._delegate,t))}catch(e){throw da(e,"collection()","Firestore.collection()")}}doc(t){try{return new ho(this,_v(this._delegate,t))}catch(e){throw da(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new fa(this,uU(this._delegate,t))}catch(e){throw da(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return jU(this._delegate,e=>t(new C9(this,e)))}batch(){return Ys(this._delegate),new I9(new GU(this._delegate,t=>U_(this._delegate,t)))}loadBundle(t){return yU(this._delegate,t)}namedQuery(t){return vU(this._delegate,t).then(e=>e?new fa(this,e):null)}}class S2 extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new w9(new js(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ho.forKey(e,this.firestore,null)}}function fH(n){xP(n)}class C9{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new S2(t)}get(t){const e=Jf(t);return this._delegate.get(e).then(i=>new E_(this._firestore,new mo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const s=Jf(t);return i?(Xb("Transaction.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Jf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Jf(t);return this._delegate.delete(e),this}}class I9{constructor(t){this._delegate=t}set(t,e,i){const s=Jf(t);return i?(Xb("WriteBatch.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Jf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Jf(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class gd{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new K0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new T_(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=gd.INSTANCES;let s=i.get(t);s||(s=new WeakMap,i.set(t,s));let o=s.get(e);return o||(o=new gd(t,new S2(t),e),s.set(e,o)),o}}gd.INSTANCES=new WeakMap;class ho{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new S2(t)}static forPath(t,e,i){if(t.length%2!==0)throw new Tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ho(e,new wn(e._delegate,i,new kt(t)))}static forKey(t,e,i){return new ho(e,new wn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new wp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new wp(this.firestore,gb(this._delegate,t))}catch(e){throw da(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=jt(t),t instanceof wn?r8(this._delegate,t):!1}set(t,e){e=Xb("DocumentReference.set",e);try{return e?x5(this._delegate,t,e):x5(this._delegate,t)}catch(i){throw da(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?O5(this._delegate,t):O5(this._delegate,t,e,...i)}catch(s){throw da(s,"updateDoc()","DocumentReference.update()")}}delete(){return JU(this._delegate)}onSnapshot(...t){const e=N9(t),i=D9(t,s=>new E_(this.firestore,new mo(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return w8(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=KU(this._delegate):t?.source==="server"?e=YU(this._delegate):e=FU(this._delegate),e.then(i=>new E_(this.firestore,new mo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new ho(this.firestore,t?this._delegate.withConverter(gd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function da(n,t,e){return n.message=n.message.replace(t,e),n}function N9(n){for(const t of n)if(typeof t=="object"&&!tS(t))return t;return{}}function D9(n,t){let e;return tS(n[0])?e=n[0]:tS(n[1])?e=n[1]:typeof n[0]=="function"?e={next:n[0],error:n[1],complete:n[2]}:e={next:n[1],error:n[2],complete:n[3]},{next:i=>{e.next&&e.next(t(i))},error:e.error?.bind(e),complete:e.complete?.bind(e)}}class E_{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ho(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return b8(this._delegate,t._delegate)}}class T_ extends E_{data(t){const e=this._delegate.data(t);return this._delegate._converter||OP(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}}class fa{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new S2(t)}where(t,e,i){try{return new fa(this.firestore,dh(this._delegate,DU(t,e,i)))}catch(s){throw da(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new fa(this.firestore,dh(this._delegate,xU(t,e)))}catch(i){throw da(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new fa(this.firestore,dh(this._delegate,OU(t)))}catch(e){throw da(e,"limit()","Query.limit()")}}limitToLast(t){try{return new fa(this.firestore,dh(this._delegate,MU(t)))}catch(e){throw da(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new fa(this.firestore,dh(this._delegate,PU(...t)))}catch(e){throw da(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new fa(this.firestore,dh(this._delegate,VU(...t)))}catch(e){throw da(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new fa(this.firestore,dh(this._delegate,kU(...t)))}catch(e){throw da(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new fa(this.firestore,dh(this._delegate,LU(...t)))}catch(e){throw da(e,"endAt()","Query.endAt()")}}isEqual(t){return o8(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=QU(this._delegate):t?.source==="server"?e=XU(this._delegate):e=A8(this._delegate),e.then(i=>new eS(this.firestore,new Qo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=N9(t),i=D9(t,s=>new eS(this.firestore,new Qo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return w8(this._delegate,e,i)}withConverter(t){return new fa(this.firestore,t?this._delegate.withConverter(gd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class dH{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new T_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eS{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new fa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new T_(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new dH(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new T_(this._firestore,i))})}isEqual(t){return b8(this._delegate,t._delegate)}}class wp extends fa{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ho(this.firestore,t):null}doc(t){try{return t===void 0?new ho(this.firestore,_v(this._delegate)):new ho(this.firestore,_v(this._delegate,t))}catch(e){throw da(e,"doc()","CollectionReference.doc()")}}add(t){return WU(this._delegate,t).then(e=>new ho(this.firestore,e))}isEqual(t){return r8(this._delegate,t._delegate)}withConverter(t){return new wp(this.firestore,t?this._delegate.withConverter(gd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Jf(n){return Je(n,wn)}class Jb{constructor(...t){this._delegate=new hd(...t)}static documentId(){return new Jb(Kn.keyField().canonicalString())}isEqual(t){return t=jt(t),t instanceof hd?this._delegate._internalPath.isEqual(t._internalPath):!1}}class Ff{static serverTimestamp(){const t=wU();return t._methodName="FieldValue.serverTimestamp",new Ff(t)}static delete(){const t=AU();return t._methodName="FieldValue.delete",new Ff(t)}static arrayUnion(...t){const e=RU(...t);return e._methodName="FieldValue.arrayUnion",new Ff(e)}static arrayRemove(...t){const e=CU(...t);return e._methodName="FieldValue.arrayRemove",new Ff(e)}static increment(t){const e=IU(t);return e._methodName="FieldValue.increment",new Ff(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}const mH={Firestore:R9,GeoPoint:Ko,Timestamp:an,Blob:w9,Transaction:C9,WriteBatch:I9,DocumentReference:ho,DocumentSnapshot:E_,Query:fa,QueryDocumentSnapshot:T_,QuerySnapshot:eS,CollectionReference:wp,FieldPath:Jb,FieldValue:Ff,setLogLevel:fH,CACHE_SIZE_UNLIMITED:hU};function pH(n,t){n.INTERNAL.registerComponent(new Li("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("firestore").getImmediate();return t(i,s)},"PUBLIC").setServiceProps({...mH}))}function gH(n){pH(n,(t,e)=>new R9(t,e,new hH)),n.registerVersion(lH,uH)}gH(_o);const x9="firebasestorage.googleapis.com",O9="storageBucket",_H=120*1e3,yH=600*1e3,vH=1e3;class ai extends ki{constructor(t,e,i=0){super(KE(t),`Firebase Storage: ${e} (${KE(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ai.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return KE(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Un;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Un||(Un={}));function KE(n){return"storage/"+n}function Wb(){const n="An unknown error occurred, please check the error payload for server response.";return new ai(Un.UNKNOWN,n)}function EH(n){return new ai(Un.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function TH(n){return new ai(Un.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SH(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ai(Un.UNAUTHENTICATED,n)}function bH(){return new ai(Un.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AH(n){return new ai(Un.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function M9(){return new ai(Un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function P9(){return new ai(Un.CANCELED,"User canceled the upload/download.")}function wH(n){return new ai(Un.INVALID_URL,"Invalid URL '"+n+"'.")}function RH(n){return new ai(Un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function CH(){return new ai(Un.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+O9+"' property when initializing the app?")}function V9(){return new ai(Un.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IH(){return new ai(Un.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function NH(){return new ai(Un.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DH(n){return new ai(Un.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(n){return new ai(Un.INVALID_ARGUMENT,n)}function k9(){return new ai(Un.APP_DELETED,"The Firebase app was deleted.")}function L9(n){return new ai(Un.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Z0(n,t){return new ai(Un.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function E0(n){throw new ai(Un.INTERNAL_ERROR,"Internal error: "+n)}class Fs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Fs.makeFromUrl(t,e)}catch{return new Fs(t,"")}if(i.path==="")return i;throw RH(t)}static makeFromUrl(t,e){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),m={bucket:1,path:3};function g(Z){Z.path_=decodeURIComponent(Z.path)}const E="v[A-Za-z0-9_]+",b=e.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${E}/b/${s}/o${A}`,"i"),D={bucket:1,path:3},V=e===x9?"(?:storage.googleapis.com|storage.cloud.google.com)":e,U="([^?#]*)",H=new RegExp(`^https?://${V}/${s}/${U}`,"i"),X=[{regex:f,indices:m,postModify:o},{regex:N,indices:D,postModify:g},{regex:H,indices:{bucket:1,path:2},postModify:g}];for(let Z=0;Z<X.length;Z++){const pt=X[Z],lt=pt.regex.exec(t);if(lt){const k=lt[pt.indices.bucket];let M=lt[pt.indices.path];M||(M=""),i=new Fs(k,M),pt.postModify(i);break}}if(i==null)throw wH(t);return i}}class xH{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function OH(n,t,e){let i=1,s=null,o=null,c=!1,f=0;function m(){return f===2}let g=!1;function E(...U){g||(g=!0,t.apply(null,U))}function b(U){s=setTimeout(()=>{s=null,n(N,m())},U)}function A(){o&&clearTimeout(o)}function N(U,...H){if(g){A();return}if(U){A(),E.call(null,U,...H);return}if(m()||c){A(),E.call(null,U,...H);return}i<64&&(i*=2);let X;f===1?(f=2,X=0):X=(i+Math.random())*1e3,b(X)}let D=!1;function V(U){D||(D=!0,A(),!g&&(s!==null?(U||(f=2),clearTimeout(s),b(0)):U||(f=1)))}return b(0),o=setTimeout(()=>{c=!0,V(!0)},e),V}function MH(n){n(!1)}function PH(n){return n!==void 0}function VH(n){return typeof n=="function"}function kH(n){return typeof n=="object"&&!Array.isArray(n)}function b2(n){return typeof n=="string"||n instanceof String}function a6(n){return Zb()&&n instanceof Blob}function Zb(){return typeof Blob<"u"}function nS(n,t,e,i){if(i<t)throw tp(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw tp(`Invalid value for '${n}'. Expected ${e} or less.`)}function Yh(n,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function U9(n){const t=encodeURIComponent;let e="?";for(const i in n)if(n.hasOwnProperty(i)){const s=t(i)+"="+t(n[i]);e=e+s+"&"}return e=e.slice(0,-1),e}var ed;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ed||(ed={}));function z9(n,t){const e=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||s||o}class LH{constructor(t,e,i,s,o,c,f,m,g,E,b,A=!0,N=!1){this.url_=t,this.method_=e,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=E,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,V)=>{this.resolve_=D,this.reject_=V,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new x1(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===ed.NO_ERROR,m=o.getStatus();if(!f||z9(m,this.additionalRetryCodes_)&&this.retry){const E=o.getErrorCode()===ed.ABORT;i(!1,new x1(!1,null,E));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new x1(g,o))})},e=(i,s)=>{const o=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());PH(m)?o(m):o()}catch(m){c(m)}else if(f!==null){const m=Wb();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(s.canceled){const m=this.appDelete_?k9():P9();c(m)}else{const m=M9();c(m)}};this.canceled_?e(!1,new x1(!1,null,!0)):this.backoffId_=OH(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&MH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class x1{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function UH(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function zH(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function BH(n,t){t&&(n["X-Firebase-GMPID"]=t)}function GH(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function qH(n,t,e,i,s,o,c=!0,f=!1){const m=U9(n.urlParams),g=n.url+m,E=Object.assign({},n.headers);return BH(E,t),UH(E,e),zH(E,o),GH(E,i),new LH(g,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,f)}function HH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jH(...n){const t=HH();if(t!==void 0){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}else{if(Zb())return new Blob(n);throw new ai(Un.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FH(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function KH(n){if(typeof atob>"u")throw DH("base-64");return atob(n)}const fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YE{constructor(t,e){this.data=t,this.contentType=e||null}}function B9(n,t){switch(n){case fo.RAW:return new YE(G9(t));case fo.BASE64:case fo.BASE64URL:return new YE(q9(n,t));case fo.DATA_URL:return new YE(QH(t),XH(t))}throw Wb()}function G9(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{const o=i,c=n.charCodeAt(++e);i=65536|(o&1023)<<10|c&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function YH(n){let t;try{t=decodeURIComponent(n)}catch{throw Z0(fo.DATA_URL,"Malformed data URL.")}return G9(t)}function q9(n,t){switch(n){case fo.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw Z0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fo.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw Z0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=KH(t)}catch(s){throw s.message.includes("polyfill")?s:Z0(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}class H9{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(e===null)throw Z0(fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;i!=null&&(this.base64=JH(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function QH(n){const t=new H9(n);return t.base64?q9(fo.BASE64,t.rest):YH(t.rest)}function XH(n){return new H9(n).contentType}function JH(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}class Gu{constructor(t,e){let i=0,s="";a6(t)?(this.data_=t,i=t.size,s=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,e){if(a6(this.data_)){const i=this.data_,s=FH(i,t,e);return s===null?null:new Gu(s)}else{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Gu(i,!0)}}static getBlob(...t){if(Zb()){const e=t.map(i=>i instanceof Gu?i.data_:i);return new Gu(jH.apply(null,e))}else{const e=t.map(c=>b2(c)?B9(fo.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let o=0;return e.forEach(c=>{for(let f=0;f<c.length;f++)s[o++]=c[f]}),new Gu(s,!0)}}uploadData(){return this.data_}}function $b(n){let t;try{t=JSON.parse(n)}catch{return null}return kH(t)?t:null}function WH(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function ZH(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return n.length===0?e:n+"/"+e}function j9(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function $H(n,t){return t}class ha{constructor(t,e,i,s){this.server=t,this.local=e||t,this.writable=!!i,this.xform=s||$H}}let O1=null;function tj(n){return!b2(n)||n.length<2?n:j9(n)}function A2(){if(O1)return O1;const n=[];n.push(new ha("bucket")),n.push(new ha("generation")),n.push(new ha("metageneration")),n.push(new ha("name","fullPath",!0));function t(o,c){return tj(c)}const e=new ha("name");e.xform=t,n.push(e);function i(o,c){return c!==void 0?Number(c):c}const s=new ha("size");return s.xform=i,n.push(s),n.push(new ha("timeCreated")),n.push(new ha("updated")),n.push(new ha("md5Hash",null,!0)),n.push(new ha("cacheControl",null,!0)),n.push(new ha("contentDisposition",null,!0)),n.push(new ha("contentEncoding",null,!0)),n.push(new ha("contentLanguage",null,!0)),n.push(new ha("contentType",null,!0)),n.push(new ha("metadata","customMetadata",!0)),O1=n,O1}function ej(n,t){function e(){const i=n.bucket,s=n.fullPath,o=new Fs(i,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:e})}function nj(n,t,e){const i={};i.type="file";const s=e.length;for(let o=0;o<s;o++){const c=e[o];i[c.local]=c.xform(i,t[c.server])}return ej(i,n),i}function F9(n,t,e){const i=$b(t);return i===null?null:nj(n,i,e)}function ij(n,t,e,i){const s=$b(t);if(s===null||!b2(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const E=n.bucket,b=n.fullPath,A="/b/"+c(E)+"/o/"+c(b),N=Yh(A,e,i),D=U9({alt:"media",token:g});return N+D})[0]}function t4(n,t){const e={},i=t.length;for(let s=0;s<i;s++){const o=t[s];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const r6="prefixes",o6="items";function sj(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[r6])for(const s of e[r6]){const o=s.replace(/\/$/,""),c=n._makeStorageReference(new Fs(t,o));i.prefixes.push(c)}if(e[o6])for(const s of e[o6]){const o=n._makeStorageReference(new Fs(t,s.name));i.items.push(o)}return i}function aj(n,t,e){const i=$b(e);return i===null?null:sj(n,t,i)}class lc{constructor(t,e,i,s){this.url=t,this.method=e,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xl(n){if(!n)throw Wb()}function w2(n,t){function e(i,s){const o=F9(n,s,t);return Xl(o!==null),o}return e}function rj(n,t){function e(i,s){const o=aj(n,t,s);return Xl(o!==null),o}return e}function oj(n,t){function e(i,s){const o=F9(n,s,t);return Xl(o!==null),ij(o,s,n.host,n._protocol)}return e}function Gp(n){function t(e,i){let s;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?s=bH():s=SH():e.getStatus()===402?s=TH(n.bucket):e.getStatus()===403?s=AH(n.path):s=i,s.status=e.getStatus(),s.serverResponse=i.serverResponse,s}return t}function R2(n){const t=Gp(n);function e(i,s){let o=t(i,s);return i.getStatus()===404&&(o=EH(n.path)),o.serverResponse=s.serverResponse,o}return e}function K9(n,t,e){const i=t.fullServerUrl(),s=Yh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new lc(s,o,w2(n,e),c);return f.errorHandler=R2(t),f}function lj(n,t,e,i,s){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",e.length>0&&(o.delimiter=e),i&&(o.pageToken=i),s&&(o.maxResults=s);const c=t.bucketOnlyServerUrl(),f=Yh(c,n.host,n._protocol),m="GET",g=n.maxOperationRetryTime,E=new lc(f,m,rj(n,t.bucket),g);return E.urlParams=o,E.errorHandler=Gp(t),E}function uj(n,t,e){const i=t.fullServerUrl(),s=Yh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new lc(s,o,oj(n,e),c);return f.errorHandler=R2(t),f}function cj(n,t,e,i){const s=t.fullServerUrl(),o=Yh(s,n.host,n._protocol),c="PATCH",f=t4(e,i),m={"Content-Type":"application/json; charset=utf-8"},g=n.maxOperationRetryTime,E=new lc(o,c,w2(n,i),g);return E.headers=m,E.body=f,E.errorHandler=R2(t),E}function hj(n,t){const e=t.fullServerUrl(),i=Yh(e,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function c(m,g){}const f=new lc(i,s,c,o);return f.successCodes=[200,204],f.errorHandler=R2(t),f}function fj(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function Y9(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=fj(null,t)),i}function dj(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let X="";for(let Z=0;Z<2;Z++)X=X+Math.random().toString().slice(2);return X}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const g=Y9(t,i,s),E=t4(g,e),b="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+m+"--",N=Gu.getBlob(b,i,A);if(N===null)throw V9();const D={name:g.fullPath},V=Yh(o,n.host,n._protocol),U="POST",H=n.maxUploadRetryTime,Y=new lc(V,U,w2(n,e),H);return Y.urlParams=D,Y.headers=c,Y.body=N.uploadData(),Y.errorHandler=Gp(t),Y}class wv{constructor(t,e,i,s){this.current=t,this.total=e,this.finalized=!!i,this.metadata=s||null}}function e4(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xl(!1)}return Xl(!!e&&(t||["active"]).indexOf(e)!==-1),e}function mj(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c=Y9(t,i,s),f={name:c.fullPath},m=Yh(o,n.host,n._protocol),g="POST",E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},b=t4(c,e),A=n.maxUploadRetryTime;function N(V){e4(V);let U;try{U=V.getResponseHeader("X-Goog-Upload-URL")}catch{Xl(!1)}return Xl(b2(U)),U}const D=new lc(m,g,N,A);return D.urlParams=f,D.headers=E,D.body=b,D.errorHandler=Gp(t),D}function pj(n,t,e,i){const s={"X-Goog-Upload-Command":"query"};function o(g){const E=e4(g,["active","final"]);let b=null;try{b=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xl(!1)}b||Xl(!1);const A=Number(b);return Xl(!isNaN(A)),new wv(A,i.size(),E==="final")}const c="POST",f=n.maxUploadRetryTime,m=new lc(e,c,o,f);return m.headers=s,m.errorHandler=Gp(t),m}const l6=256*1024;function gj(n,t,e,i,s,o,c,f){const m=new wv(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw IH();const g=m.total-m.current;let E=g;s>0&&(E=Math.min(E,s));const b=m.current,A=b+E;let N="";E===0?N="finalize":g===E?N="upload, finalize":N="upload";const D={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${m.current}`},V=i.slice(b,A);if(V===null)throw V9();function U(Z,pt){const lt=e4(Z,["active","final"]),k=m.current+E,M=i.size();let L;return lt==="final"?L=w2(t,o)(Z,pt):L=null,new wv(k,M,lt==="final",L)}const H="POST",Y=t.maxUploadRetryTime,X=new lc(e,H,U,Y);return X.headers=D,X.body=V.uploadData(),X.progressCallback=f||null,X.errorHandler=Gp(n),X}const _j={STATE_CHANGED:"state_changed"},ma={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QE(n){switch(n){case"running":case"pausing":case"canceling":return ma.RUNNING;case"paused":return ma.PAUSED;case"success":return ma.SUCCESS;case"canceled":return ma.CANCELED;case"error":return ma.ERROR;default:return ma.ERROR}}class yj{constructor(t,e,i){if(VH(t)||e!=null||i!=null)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Lm(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class vj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ed.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ed.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ed.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,s,o){if(this.sent_)throw E0("cannot .send() more than once");if(tu(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw E0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw E0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw E0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw E0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Ej extends vj{initXhr(){this.xhr_.responseType="text"}}function Hl(){return new Ej}class Q9{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=A2(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Un.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(z9(s.status,[]))if(o)s=M9();else{this.sleepTime=Math.max(this.sleepTime*2,vH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Un.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,e)=>{const i=mj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Hl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const s=pj(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(s,Hl,e,i);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=l6*this._chunkMultiplier,e=new wv(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,o)=>{let c;try{c=gj(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(c,Hl,s,o,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){l6*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=K9(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,Hl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=dj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Hl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e=this._state==="paused";this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=P9(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=QE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,s){const o=new yj(e||void 0,i||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);e!==-1&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(QE(this._state)){case ma.SUCCESS:Lm(this._resolve.bind(null,this.snapshot))();break;case ma.CANCELED:case ma.ERROR:const e=this._reject;Lm(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(QE(this._state)){case ma.RUNNING:case ma.PAUSED:t.next&&Lm(t.next.bind(t,this.snapshot))();break;case ma.SUCCESS:t.complete&&Lm(t.complete.bind(t))();break;case ma.CANCELED:case ma.ERROR:t.error&&Lm(t.error.bind(t,this._error))();break;default:t.error&&Lm(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}class _d{constructor(t,e){this._service=t,e instanceof Fs?this._location=e:this._location=Fs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new _d(t,e)}get root(){const t=new Fs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j9(this._location.path)}get storage(){return this._service}get parent(){const t=WH(this._location.path);if(t===null)return null;const e=new Fs(this._location.bucket,t);return new _d(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw L9(t)}}function Tj(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new Q9(n,new Gu(t),e)}function Sj(n){const t={prefixes:[],items:[]};return X9(n,t).then(()=>t)}async function X9(n,t,e){const s=await J9(n,{pageToken:e});t.prefixes.push(...s.prefixes),t.items.push(...s.items),s.nextPageToken!=null&&await X9(n,t,s.nextPageToken)}function J9(n,t){t!=null&&typeof t.maxResults=="number"&&nS("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=lj(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Hl)}function bj(n){n._throwIfRoot("getMetadata");const t=K9(n.storage,n._location,A2());return n.storage.makeRequestWithTokens(t,Hl)}function Aj(n,t){n._throwIfRoot("updateMetadata");const e=cj(n.storage,n._location,t,A2());return n.storage.makeRequestWithTokens(e,Hl)}function wj(n){n._throwIfRoot("getDownloadURL");const t=uj(n.storage,n._location,A2());return n.storage.makeRequestWithTokens(t,Hl).then(e=>{if(e===null)throw NH();return e})}function Rj(n){n._throwIfRoot("deleteObject");const t=hj(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Hl)}function W9(n,t){const e=ZH(n._location.path,t),i=new Fs(n._location.bucket,e);return new _d(n.storage,i)}function Cj(n){return/^[A-Za-z]+:\/\//.test(n)}function Ij(n,t){return new _d(n,t)}function Z9(n,t){if(n instanceof n4){const e=n;if(e._bucket==null)throw CH();const i=new _d(e,e._bucket);return t!=null?Z9(i,t):i}else return t!==void 0?W9(n,t):n}function Nj(n,t){if(t&&Cj(t)){if(n instanceof n4)return Ij(n,t);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return Z9(n,t)}function u6(n,t){const e=t?.[O9];return e==null?null:Fs.makeFromBucketSpec(e,n)}function Dj(n,t,e,i={}){n.host=`${t}:${e}`;const s=tu(t);s&&(Lv(`https://${n.host}/b`),Uv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Sw(o,n.app.options.projectId))}class n4{constructor(t,e,i,s,o,c=!1){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=x9,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_H,this._maxUploadRetryTime=yH,this._requests=new Set,s!=null?this._bucket=Fs.makeFromBucketSpec(s,this._host):this._bucket=u6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Fs.makeFromBucketSpec(this._url,t):this._bucket=u6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){nS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){nS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _d(this,t)}_makeRequest(t,e,i,s,o=!0){if(this._deleted)return new xH(k9());{const c=qH(t,this._appId,i,s,e,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,e){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,s).getPromise()}}const c6="@firebase/storage",h6="0.14.0";const xj="storage";function Oj(n,t,e){return n=jt(n),Tj(n,t,e)}function Mj(n){return n=jt(n),bj(n)}function Pj(n,t){return n=jt(n),Aj(n,t)}function Vj(n,t){return n=jt(n),J9(n,t)}function kj(n){return n=jt(n),Sj(n)}function Lj(n){return n=jt(n),wj(n)}function Uj(n){return n=jt(n),Rj(n)}function f6(n,t){return n=jt(n),Nj(n,t)}function zj(n,t){return W9(n,t)}function Bj(n,t,e,i={}){Dj(n,t,e,i)}function Gj(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new n4(e,i,s,t,ec)}function qj(){_a(new Li(xj,Gj,"PUBLIC").setMultipleInstances(!0)),Yi(c6,h6,""),Yi(c6,h6,"esm2020")}qj();class M1{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class d6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new M1(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new M1(i,this,this._ref))},e)}on(t,e,i,s){let o;return e&&(typeof e=="function"?o=c=>e(new M1(c,this,this._ref)):o={next:e.next?c=>e.next(new M1(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,i||void 0,s||void 0)}}class m6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Yu(t,this._service))}get items(){return this._delegate.items.map(t=>new Yu(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yu{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=zj(this._delegate,t);return new Yu(e,this.storage)}get root(){return new Yu(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return t==null?null:new Yu(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new d6(Oj(this._delegate,t,e),this)}putString(t,e=fo.RAW,i){this._throwIfRoot("putString");const s=B9(e,t),o={...i};return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),new d6(new Q9(this._delegate,new Gu(s.data,!0),o),this)}listAll(){return kj(this._delegate).then(t=>new m6(t,this.storage))}list(t){return Vj(this._delegate,t||void 0).then(e=>new m6(e,this.storage))}getMetadata(){return Mj(this._delegate)}updateMetadata(t){return Pj(this._delegate,t)}getDownloadURL(){return Lj(this._delegate)}delete(){return this._throwIfRoot("delete"),Uj(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw L9(t)}}class $9{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(p6(t))throw tp("ref() expected a child path but got a URL, use refFromURL instead.");return new Yu(f6(this._delegate,t),this)}refFromURL(t){if(!p6(t))throw tp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Fs.makeFromUrl(t,this._delegate.host)}catch{throw tp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yu(f6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){Bj(this._delegate,t,e,i)}}function p6(n){return/^[A-Za-z]+:\/\//.test(n)}const Hj="@firebase/storage-compat",jj="0.4.0";const Fj="storage-compat";function Kj(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new $9(e,i)}function Yj(n){const t={TaskState:ma,TaskEvent:_j,StringFormat:fo,Storage:$9,Reference:Yu};n.INTERNAL.registerComponent(new Li(Fj,Kj,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion(Hj,jj)}Yj(_o);const tI="@firebase/installations",i4="0.6.19";const eI=1e4,nI=`w:${i4}`,iI="FIS_v2",Qj="https://firebaseinstallations.googleapis.com/v1",Xj=3600*1e3,Jj="installations",Wj="Installations";const Zj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yd=new eu(Jj,Wj,Zj);function sI(n){return n instanceof ki&&n.code.includes("request-failed")}function aI({projectId:n}){return`${Qj}/projects/${n}/installations`}function rI(n){return{token:n.token,requestStatus:2,expiresIn:tF(n.expiresIn),creationTime:Date.now()}}async function oI(n,t){const i=(await t.json()).error;return yd.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function lI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $j(n,{refreshToken:t}){const e=lI(n);return e.append("Authorization",eF(t)),e}async function uI(n){const t=await n();return t.status>=500&&t.status<600?n():t}function tF(n){return Number(n.replace("s","000"))}function eF(n){return`${iI} ${n}`}async function nF({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=aI(n),s=lI(n),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={fid:e,authVersion:iI,appId:n.appId,sdkVersion:nI},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await uI(()=>fetch(i,f));if(m.ok){const g=await m.json();return{fid:g.fid||e,registrationStatus:2,refreshToken:g.refreshToken,authToken:rI(g.authToken)}}else throw await oI("Create Installation",m)}function cI(n){return new Promise(t=>{setTimeout(t,n)})}function iF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const sF=/^[cdef][\w-]{21}$/,iS="";function aF(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=rF(n);return sF.test(e)?e:iS}catch{return iS}}function rF(n){return iF(n).substr(0,22)}function C2(n){return`${n.appName}!${n.appId}`}const hI=new Map;function fI(n,t){const e=C2(n);dI(e,t),oF(e,t)}function dI(n,t){const e=hI.get(n);if(e)for(const i of e)i(t)}function oF(n,t){const e=lF();e&&e.postMessage({key:n,fid:t}),uF()}let Wf=null;function lF(){return!Wf&&"BroadcastChannel"in self&&(Wf=new BroadcastChannel("[Firebase] FID Change"),Wf.onmessage=n=>{dI(n.data.key,n.data.fid)}),Wf}function uF(){hI.size===0&&Wf&&(Wf.close(),Wf=null)}const cF="firebase-installations-database",hF=1,vd="firebase-installations-store";let XE=null;function s4(){return XE||(XE=Np(cF,hF,{upgrade:(n,t)=>{t===0&&n.createObjectStore(vd)}})),XE}async function Rv(n,t){const e=C2(n),s=(await s4()).transaction(vd,"readwrite"),o=s.objectStore(vd),c=await o.get(e);return await o.put(t,e),await s.done,(!c||c.fid!==t.fid)&&fI(n,t.fid),t}async function mI(n){const t=C2(n),i=(await s4()).transaction(vd,"readwrite");await i.objectStore(vd).delete(t),await i.done}async function I2(n,t){const e=C2(n),s=(await s4()).transaction(vd,"readwrite"),o=s.objectStore(vd),c=await o.get(e),f=t(c);return f===void 0?await o.delete(e):await o.put(f,e),await s.done,f&&(!c||c.fid!==f.fid)&&fI(n,f.fid),f}async function a4(n){let t;const e=await I2(n.appConfig,i=>{const s=fF(i),o=dF(n,s);return t=o.registrationPromise,o.installationEntry});return e.fid===iS?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function fF(n){const t=n||{fid:aF(),registrationStatus:0};return pI(t)}function dF(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(yd.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=mF(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:pF(n)}:{installationEntry:t}}async function mF(n,t){try{const e=await nF(n,t);return Rv(n.appConfig,e)}catch(e){throw sI(e)&&e.customData.serverCode===409?await mI(n.appConfig):await Rv(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function pF(n){let t=await g6(n.appConfig);for(;t.registrationStatus===1;)await cI(100),t=await g6(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await a4(n);return i||e}return t}function g6(n){return I2(n,t=>{if(!t)throw yd.create("installation-not-found");return pI(t)})}function pI(n){return gF(n)?{fid:n.fid,registrationStatus:0}:n}function gF(n){return n.registrationStatus===1&&n.registrationTime+eI<Date.now()}async function _F({appConfig:n,heartbeatServiceProvider:t},e){const i=yF(n,e),s=$j(n,e),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={installation:{sdkVersion:nI,appId:n.appId}},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await uI(()=>fetch(i,f));if(m.ok){const g=await m.json();return rI(g)}else throw await oI("Generate Auth Token",m)}function yF(n,{fid:t}){return`${aI(n)}/${t}/authTokens:generate`}async function r4(n,t=!1){let e;const i=await I2(n.appConfig,o=>{if(!gI(o))throw yd.create("not-registered");const c=o.authToken;if(!t&&TF(c))return o;if(c.requestStatus===1)return e=vF(n,t),o;{if(!navigator.onLine)throw yd.create("app-offline");const f=bF(o);return e=EF(n,f),f}});return e?await e:i.authToken}async function vF(n,t){let e=await _6(n.appConfig);for(;e.authToken.requestStatus===1;)await cI(100),e=await _6(n.appConfig);const i=e.authToken;return i.requestStatus===0?r4(n,t):i}function _6(n){return I2(n,t=>{if(!gI(t))throw yd.create("not-registered");const e=t.authToken;return AF(e)?{...t,authToken:{requestStatus:0}}:t})}async function EF(n,t){try{const e=await _F(n,t),i={...t,authToken:e};return await Rv(n.appConfig,i),e}catch(e){if(sI(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await mI(n.appConfig);else{const i={...t,authToken:{requestStatus:0}};await Rv(n.appConfig,i)}throw e}}function gI(n){return n!==void 0&&n.registrationStatus===2}function TF(n){return n.requestStatus===2&&!SF(n)}function SF(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+Xj}function bF(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function AF(n){return n.requestStatus===1&&n.requestTime+eI<Date.now()}async function wF(n){const t=n,{installationEntry:e,registrationPromise:i}=await a4(t);return i?i.catch(console.error):r4(t).catch(console.error),e.fid}async function RF(n,t=!1){const e=n;return await CF(e),(await r4(e,t)).token}async function CF(n){const{registrationPromise:t}=await a4(n);t&&await t}function IF(n){if(!n||!n.options)throw JE("App Configuration");if(!n.name)throw JE("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw JE(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function JE(n){return yd.create("missing-app-config-values",{valueName:n})}const _I="installations",NF="installations-internal",DF=n=>{const t=n.getProvider("app").getImmediate(),e=IF(t),i=Gv(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},xF=n=>{const t=n.getProvider("app").getImmediate(),e=Gv(t,_I).getImmediate();return{getId:()=>wF(e),getToken:s=>RF(e,s)}};function OF(){_a(new Li(_I,DF,"PUBLIC")),_a(new Li(NF,xF,"PRIVATE"))}OF();Yi(tI,i4);Yi(tI,i4,"esm2020");const MF="/firebase-messaging-sw.js",PF="/firebase-cloud-messaging-push-scope",yI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",VF="https://fcmregistrations.googleapis.com/v1",vI="google.c.a.c_id",kF="google.c.a.c_l",LF="google.c.a.ts",UF="google.c.a.e",y6=1e4;var v6;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(v6||(v6={}));var S_;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(S_||(S_={}));function zu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zF(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const WE="fcm_token_details_db",BF=5,E6="fcm_token_object_Store";async function GF(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(WE))return null;let t=null;return(await Np(WE,BF,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(E6))return;const f=c.objectStore(E6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:zu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:zu(g.auth),p256dh:zu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:zu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:zu(g.auth),p256dh:zu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:zu(g.vapidKey)}}}}}})).close(),await Km(WE),await Km("fcm_vapid_details_db"),await Km("undefined"),qF(t)?t:null}function qF(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const HF="firebase-messaging-database",jF=1,Ed="firebase-messaging-store";let ZE=null;function o4(){return ZE||(ZE=Np(HF,jF,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Ed)}})),ZE}async function EI(n){const t=u4(n),i=await(await o4()).transaction(Ed).objectStore(Ed).get(t);if(i)return i;{const s=await GF(n.appConfig.senderId);if(s)return await l4(n,s),s}}async function l4(n,t){const e=u4(n),s=(await o4()).transaction(Ed,"readwrite");return await s.objectStore(Ed).put(t,e),await s.done,t}async function FF(n){const t=u4(n),i=(await o4()).transaction(Ed,"readwrite");await i.objectStore(Ed).delete(t),await i.done}function u4({appConfig:n}){return n.appId}const KF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ga=new eu("messaging","Messaging",KF);async function YF(n,t){const e=await h4(n),i=SI(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(c4(n.appConfig),s)).json()}catch(c){throw ga.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw ga.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw ga.create("token-subscribe-no-token");return o.token}async function QF(n,t){const e=await h4(n),i=SI(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${c4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw ga.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw ga.create("token-update-failed",{errorInfo:c})}if(!o.token)throw ga.create("token-update-no-token");return o.token}async function TI(n,t){const i={method:"DELETE",headers:await h4(n)};try{const o=await(await fetch(`${c4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw ga.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw ga.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function c4({projectId:n}){return`${VF}/projects/${n}/registrations`}async function h4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function SI({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==yI&&(s.web.applicationPubKey=i),s}const XF=10080*60*1e3;async function JF(n){const t=await $F(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:zu(t.getKey("auth")),p256dh:zu(t.getKey("p256dh"))},i=await EI(n.firebaseDependencies);if(i){if(tK(i.subscriptionOptions,e))return Date.now()>=i.createTime+XF?ZF(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await TI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return T6(n.firebaseDependencies,e)}else return T6(n.firebaseDependencies,e)}async function WF(n){const t=await EI(n.firebaseDependencies);t&&(await TI(n.firebaseDependencies,t.token),await FF(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function ZF(n,t){try{const e=await QF(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await l4(n.firebaseDependencies,i),e}catch(e){throw e}}async function T6(n,t){const i={token:await YF(n,t),createTime:Date.now(),subscriptionOptions:t};return await l4(n,i),i.token}async function $F(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zF(t)})}function tK(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function S6(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return eK(t,n),nK(t,n),iK(t,n),t}function eK(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function nK(n,t){t.data&&(n.data=t.data)}function iK(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function sK(n){return typeof n=="object"&&!!n&&vI in n}function aK(n){if(!n||!n.options)throw $E("App Configuration Object");if(!n.name)throw $E("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw $E(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function $E(n){return ga.create("missing-app-config-values",{valueName:n})}let rK=class{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=aK(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}};async function bI(n){try{n.swRegistration=await navigator.serviceWorker.register(MF,{scope:PF}),n.swRegistration.update().catch(()=>{}),await oK(n.swRegistration)}catch(t){throw ga.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function oK(n){return new Promise((t,e)=>{const i=setTimeout(()=>e(new Error(`Service worker not registered after ${y6} ms`)),y6),s=n.installing||n.waiting;n.active?(clearTimeout(i),t()):s?s.onstatechange=o=>{o.target?.state==="activated"&&(s.onstatechange=null,clearTimeout(i),t())}:(clearTimeout(i),e(new Error("No incoming service worker found.")))})}async function lK(n,t){if(!t&&!n.swRegistration&&await bI(n),!(!t&&n.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw ga.create("invalid-sw-registration");n.swRegistration=t}}async function uK(n,t){t?n.vapidKey=t:n.vapidKey||(n.vapidKey=yI)}async function AI(n,t){if(!navigator)throw ga.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ga.create("permission-blocked");return await uK(n,t?.vapidKey),await lK(n,t?.serviceWorkerRegistration),JF(n)}async function cK(n,t,e){const i=hK(t);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:e[vI],message_name:e[kF],message_time:e[LF],message_device_time:Math.floor(Date.now()/1e3)})}function hK(n){switch(n){case S_.NOTIFICATION_CLICKED:return"notification_open";case S_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function fK(n,t){const e=t.data;if(!e.isFirebaseMessaging)return;n.onMessageHandler&&e.messageType===S_.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(S6(e)):n.onMessageHandler.next(S6(e)));const i=e.data;sK(i)&&i[UF]==="1"&&await cK(n,e.messageType,i)}const b6="@firebase/messaging",A6="0.12.23";const dK=n=>{const t=new rK(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>fK(t,e)),t},mK=n=>{const t=n.getProvider("messaging").getImmediate();return{getToken:i=>AI(t,i)}};function pK(){_a(new Li("messaging",dK,"PUBLIC")),_a(new Li("messaging-internal",mK,"PRIVATE")),Yi(b6,A6),Yi(b6,A6,"esm2020")}async function gK(n){if(!navigator)throw ga.create("only-available-in-window");return n.swRegistration||await bI(n),WF(n)}function _K(n,t){if(!navigator)throw ga.create("only-available-in-window");return n.onMessageHandler=t,()=>{n.onMessageHandler=null}}async function yK(n,t){return n=jt(n),AI(n,t)}function vK(n){return n=jt(n),gK(n)}function EK(n,t){return n=jt(n),_K(n,t)}pK();const wI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",TK="https://fcmregistrations.googleapis.com/v1",RI="FCM_MSG",SK="google.c.a.c_id",bK=3,AK=1;var Cv;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Cv||(Cv={}));var Iv;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Iv||(Iv={}));function Bu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wK(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const tT="fcm_token_details_db",RK=5,w6="fcm_token_object_Store";async function CK(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(tT))return null;let t=null;return(await Np(tT,RK,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(w6))return;const f=c.objectStore(w6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Bu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Bu(g.auth),p256dh:Bu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Bu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Bu(g.auth),p256dh:Bu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Bu(g.vapidKey)}}}}}})).close(),await Km(tT),await Km("fcm_vapid_details_db"),await Km("undefined"),IK(t)?t:null}function IK(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const NK="firebase-messaging-database",DK=1,Td="firebase-messaging-store";let eT=null;function f4(){return eT||(eT=Np(NK,DK,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Td)}})),eT}async function d4(n){const t=p4(n),i=await(await f4()).transaction(Td).objectStore(Td).get(t);if(i)return i;{const s=await CK(n.appConfig.senderId);if(s)return await m4(n,s),s}}async function m4(n,t){const e=p4(n),s=(await f4()).transaction(Td,"readwrite");return await s.objectStore(Td).put(t,e),await s.done,t}async function xK(n){const t=p4(n),i=(await f4()).transaction(Td,"readwrite");await i.objectStore(Td).delete(t),await i.done}function p4({appConfig:n}){return n.appId}const OK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Jl=new eu("messaging","Messaging",OK);async function MK(n,t){const e=await _4(n),i=II(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(g4(n.appConfig),s)).json()}catch(c){throw Jl.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Jl.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Jl.create("token-subscribe-no-token");return o.token}async function PK(n,t){const e=await _4(n),i=II(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${g4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw Jl.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Jl.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Jl.create("token-update-no-token");return o.token}async function CI(n,t){const i={method:"DELETE",headers:await _4(n)};try{const o=await(await fetch(`${g4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw Jl.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw Jl.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function g4({projectId:n}){return`${TK}/projects/${n}/registrations`}async function _4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function II({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==wI&&(s.web.applicationPubKey=i),s}const VK=10080*60*1e3;async function kK(n){const t=await UK(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:Bu(t.getKey("auth")),p256dh:Bu(t.getKey("p256dh"))},i=await d4(n.firebaseDependencies);if(i){if(zK(i.subscriptionOptions,e))return Date.now()>=i.createTime+VK?LK(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await CI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return C6(n.firebaseDependencies,e)}else return C6(n.firebaseDependencies,e)}async function R6(n){const t=await d4(n.firebaseDependencies);t&&(await CI(n.firebaseDependencies,t.token),await xK(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function LK(n,t){try{const e=await PK(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await m4(n.firebaseDependencies,i),e}catch(e){throw e}}async function C6(n,t){const i={token:await MK(n,t),createTime:Date.now(),subscriptionOptions:t};return await m4(n,i),i.token}async function UK(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wK(t)})}function zK(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function BK(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return GK(t,n),qK(t,n),HK(t,n),t}function GK(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function qK(n,t){t.data&&(n.data=t.data)}function HK(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function jK(n){return typeof n=="object"&&!!n&&SK in n}function FK(n){return new Promise(t=>{setTimeout(t,n)})}async function KK(n,t){const e=YK(t,await n.firebaseDependencies.installations.getId());QK(n,e,t.productId)}function YK(n,t){const e={};return n.from&&(e.project_number=n.from),n.fcmMessageId&&(e.message_id=n.fcmMessageId),e.instance_id=t,n.notification?e.message_type=Cv.DISPLAY_NOTIFICATION.toString():e.message_type=Cv.DATA_MESSAGE.toString(),e.sdk_platform=bK.toString(),e.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(e.collapse_key=n.collapse_key),e.event=AK.toString(),n.fcmOptions?.analytics_label&&(e.analytics_label=n.fcmOptions?.analytics_label),e}function QK(n,t,e){const i={};i.event_time_ms=Math.floor(Date.now()).toString(),i.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),e&&(i.compliance_data=XK(e)),n.logEvents.push(i)}function XK(n){return{privacy_context:{prequest:{origin_associated_product_id:n}}}}async function JK(n,t){const{newSubscription:e}=n;if(!e){await R6(t);return}const i=await d4(t.firebaseDependencies);await R6(t),t.vapidKey=i?.subscriptionOptions?.vapidKey??wI,await kK(t)}async function WK(n,t){const e=tY(n);if(!e)return;t.deliveryMetricsExportedToBigQueryEnabled&&await KK(t,e);const i=await NI();if(nY(i))return iY(i,e);if(e.notification&&await sY($K(e)),!!t&&t.onBackgroundMessageHandler){const s=BK(e);typeof t.onBackgroundMessageHandler=="function"?await t.onBackgroundMessageHandler(s):t.onBackgroundMessageHandler.next(s)}}async function ZK(n){const t=n.notification?.data?.[RI];if(t){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const e=aY(t);if(!e)return;const i=new URL(e,self.location.href),s=new URL(self.location.origin);if(i.host!==s.host)return;let o=await eY(i);if(o?o=await o.focus():(o=await self.clients.openWindow(e),await FK(3e3)),!!o)return t.messageType=Iv.NOTIFICATION_CLICKED,t.isFirebaseMessaging=!0,o.postMessage(t)}function $K(n){const t={...n.notification};return t.data={[RI]:n},t}function tY({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function eY(n){const t=await NI();for(const e of t){const i=new URL(e.url,self.location.href);if(n.host===i.host)return e}return null}function nY(n){return n.some(t=>t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://"))}function iY(n,t){t.isFirebaseMessaging=!0,t.messageType=Iv.PUSH_RECEIVED;for(const e of n)e.postMessage(t)}function NI(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function sY(n){const{actions:t}=n,{maxActions:e}=Notification;return t&&e&&t.length>e&&console.warn(`This browser only supports ${e} actions. The remaining actions will not be displayed.`),self.registration.showNotification(n.title??"",n)}function aY(n){const t=n.fcmOptions?.link??n.notification?.click_action;return t||(jK(n.data)?self.location.origin:null)}function rY(n){if(!n||!n.options)throw nT("App Configuration Object");if(!n.name)throw nT("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw nT(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function nT(n){return Jl.create("missing-app-config-values",{valueName:n})}class oY{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=rY(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}}const lY=n=>{const t=new oY(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",e=>{e.waitUntil(WK(e,t))}),self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(JK(e,t))}),self.addEventListener("notificationclick",e=>{e.waitUntil(ZK(e))}),t};function uY(){_a(new Li("messaging-sw",lY,"PUBLIC"))}function cY(n,t){if(self.document!==void 0)throw Jl.create("only-available-in-sw");return n.onBackgroundMessageHandler=t,()=>{n.onBackgroundMessageHandler=null}}function hY(n,t){return n=jt(n),cY(n,t)}uY();const fY="@firebase/messaging-compat",dY="0.2.23";function mY(){return self&&"ServiceWorkerGlobalScope"in self?gY():pY()}function pY(){return typeof window<"u"&&nd()&&hM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function gY(){return nd()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class I6{constructor(t,e){this.app=t,this._delegate=e,this.app=t,this._delegate=e}async getToken(t){return yK(this._delegate,t)}async deleteToken(){return vK(this._delegate)}onMessage(t){return EK(this._delegate,t)}onBackgroundMessage(t){return hY(this._delegate,t)}}const _Y=n=>self&&"ServiceWorkerGlobalScope"in self?new I6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new I6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),yY={isSupported:mY};function vY(){_o.INTERNAL.registerComponent(new Li("messaging-compat",_Y,"PUBLIC").setServiceProps(yY))}vY();_o.registerVersion(fY,dY);const EY="type.googleapis.com/google.protobuf.Int64Value",TY="type.googleapis.com/google.protobuf.UInt64Value";function DI(n,t){const e={};for(const i in n)n.hasOwnProperty(i)&&(e[i]=t(n[i]));return e}function Nv(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(t=>Nv(t));if(typeof n=="function"||typeof n=="object")return DI(n,t=>Nv(t));throw new Error("Data cannot be encoded in JSON: "+n)}function Rp(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case EY:case TY:{const t=Number(n.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+n);return t}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(t=>Rp(t)):typeof n=="function"||typeof n=="object"?DI(n,t=>Rp(t)):n}const xI="functions";const N6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Za extends ki{constructor(t,e,i){super(`${xI}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,Za.prototype)}}function SY(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Dv(n,t){let e=SY(n),i=e,s;try{const o=t&&t.error;if(o){const c=o.status;if(typeof c=="string"){if(!N6[c])return new Za("internal","internal");e=N6[c],i=c}const f=o.message;typeof f=="string"&&(i=f),s=o.details,s!==void 0&&(s=Rp(s))}}catch{}return e==="ok"?null:new Za(e,i,s)}class bY{constructor(t,e,i,s){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,An(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:s}}}const D6="us-central1",AY=/^data: (.*?)(?:\n|$)/;function wY(n){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new Za("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{t&&clearTimeout(t)}}}let RY=class{constructor(t,e,i,s,o=D6,c=(...f)=>fetch(...f)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new bY(t,e,i,s),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(o);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=D6}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}};function CY(n,t,e){const i=tu(t);n.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(Lv(n.emulatorOrigin+"/backends"),Uv("Functions",!0))}function IY(n,t,e){const i=s=>xY(n,t,s,e||{});return i.stream=(s,o)=>OY(n,t,s,o),i}function NY(n,t,e){const i=s=>PI(n,t,s,e||{});return i.stream=(s,o)=>VI(n,t,s,o||{}),i}function OI(n){return n.emulatorOrigin&&tu(n.emulatorOrigin)?"include":void 0}async function DY(n,t,e,i,s){e["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(t),headers:e,credentials:OI(s)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function MI(n,t){const e={},i=await n.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function xY(n,t,e,i){const s=n._url(t);return PI(n,s,e,i)}async function PI(n,t,e,i){e=Nv(e);const s={data:e},o=await MI(n,i),c=i.timeout||7e4,f=wY(c),m=await Promise.race([DY(t,s,o,n.fetchImpl,n),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new Za("cancelled","Firebase Functions instance was deleted.");const g=Dv(m.status,m.json);if(g)throw g;if(!m.json)throw new Za("internal","Response is not valid JSON object.");let E=m.json.data;if(typeof E>"u"&&(E=m.json.result),typeof E>"u")throw new Za("internal","Response is missing data field.");return{data:Rp(E)}}function OY(n,t,e,i){const s=n._url(t);return VI(n,s,e,i||{})}async function VI(n,t,e,i){e=Nv(e);const s={data:e},o=await MI(n,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await n.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:i?.signal,credentials:OI(n)})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const D=new Za("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const N=Dv(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let f,m;const g=new Promise((A,N)=>{f=A,m=N});i?.signal?.addEventListener("abort",()=>{const A=new Za("cancelled","Request was cancelled.");m(A)});const E=c.body.getReader(),b=MY(E,f,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const A=b.getReader();return{async next(){const{value:N,done:D}=await A.read();return{value:N,done:D}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:g}}function MY(n,t,e,i){const s=(c,f)=>{const m=c.match(AY);if(!m)return;const g=m[1];try{const E=JSON.parse(g);if("result"in E){t(Rp(E.result));return}if("message"in E){f.enqueue(Rp(E.message));return}if("error"in E){const b=Dv(0,E);f.error(b),e(b);return}}catch(E){if(E instanceof Za){f.error(E),e(E);return}}},o=new TextDecoder;return new ReadableStream({start(c){let f="";return m();async function m(){if(i?.aborted){const g=new Za("cancelled","Request was cancelled");return c.error(g),e(g),Promise.resolve()}try{const{value:g,done:E}=await n.read();if(E){f.trim()&&s(f.trim(),c),c.close();return}if(i?.aborted){const A=new Za("cancelled","Request was cancelled");c.error(A),e(A),await n.cancel();return}f+=o.decode(g,{stream:!0});const b=f.split(`
`);f=b.pop()||"";for(const A of b)A.trim()&&s(A.trim(),c);return m()}catch(g){const E=g instanceof Za?g:Dv(0,null);c.error(E),e(E)}}},cancel(){return n.cancel()}})}const x6="@firebase/functions",O6="0.13.1";const PY="auth-internal",VY="app-check-internal",kY="messaging-internal";function LY(n){const t=(e,{instanceIdentifier:i})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider(PY),c=e.getProvider(kY),f=e.getProvider(VY);return new RY(s,o,c,f,i)};_a(new Li(xI,t,"PUBLIC").setMultipleInstances(!0)),Yi(x6,O6,n),Yi(x6,O6,"esm2020")}function M6(n,t,e){CY(jt(n),t,e)}function UY(n,t,e){return IY(jt(n),t,e)}function zY(n,t,e){return NY(jt(n),t,e)}LY();const BY="@firebase/functions-compat",GY="0.4.1";class kI{constructor(t,e){this.app=t,this._delegate=e,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(t,e){return UY(this._delegate,t,e)}httpsCallableFromURL(t,e){return zY(this._delegate,t,e)}useFunctionsEmulator(t){const e=t.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(e==null)throw new ki("functions","No origin provided to useFunctionsEmulator()");if(e[2]==null)throw new ki("functions","Port missing in origin provided to useFunctionsEmulator()");return M6(this._delegate,e[1],Number(e[2]))}useEmulator(t,e){return M6(this._delegate,t,e)}}const qY="us-central1",HY=(n,{instanceIdentifier:t})=>{const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("functions").getImmediate({identifier:t??qY});return new kI(e,i)};function jY(){const n={Functions:kI};_o.INTERNAL.registerComponent(new Li("functions-compat",HY,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}jY();_o.registerVersion(BY,GY);const FY={apiKey:"AIzaSyCZ2yeJJ34VwYAmQnFCEv72Q1uDFFGKKjQ",authDomain:"ancb-painel-db.firebaseapp.com",projectId:"ancb-painel-db",storageBucket:"ancb-painel-db.appspot.com",messagingSenderId:"792900234002",appId:"1:792900234002:web:2a37004deb046cb8f261cb",measurementId:"G-VCMEKP1XP4"},K_=_o.initializeApp(FY),KY=K_.firestore();K_.auth();K_.storage();K_.functions();let YY=null;try{typeof window<"u"&&"serviceWorker"in navigator&&_o.messaging.isSupported()&&(YY=K_.messaging())}catch(n){console.warn("Firebase Messaging not supported in this environment",n)}const Hm={courtHalf:"https://i.imgur.com/SIdCxjw.png",courtFull:"https://i.imgur.com/cw3dO3o.png",logo:"https://i.imgur.com/sfO9ILj.png",defaultAvatar:"https://ui-avatars.com/api/?background=0D8ABC&color=fff&rounded=true&bold=true&name="},QY=["#ffffff","#F27405","#ef4444","#facc15","#000000"],XY=({token:n,onDragEnd:t,onSelect:e,isSelected:i,isLocked:s})=>{const[o,c]=ce.useState(null),[f,m]=ce.useState("loading");ce.useEffect(()=>{if(n.type==="rival"){m("error");return}const V=new window.Image,U=n.foto||`${Hm.defaultAvatar}${n.nome}`;if(U.startsWith("data:"))V.src=U;else{V.crossOrigin="Anonymous";const Y=U.includes("?")?"&":"?";V.src=`${U}${Y}t=${new Date().getTime()}`}V.onload=()=>{V.width>0&&V.height>0?(c(V),m("loaded")):m("error")},V.onerror=()=>m("error")},[n.foto,n.nome]);const g=22,E=g*2,b=n.type==="rival",A=b?"#ef4444":"#062553",N=b?"#991b1b":"#041b3d",D=b||f!=="loaded";return At.jsxs(TO,{draggable:!s,x:n.x,y:n.y,onDragEnd:V=>t(n.id,V.target.x(),V.target.y()),onClick:V=>{V.cancelBubble=!0,e(n.id)},onTap:V=>{V.cancelBubble=!0,e(n.id)},children:[At.jsx(AE,{radius:g,fill:"black",opacity:.3,offsetX:-2,offsetY:-2}),D&&At.jsx(AE,{radius:g,fill:A}),!D&&o&&At.jsx(mT,{image:o,width:E,height:E,x:-g,y:-g,cornerRadius:g}),At.jsx(AE,{radius:g,stroke:i?"#F27405":N,strokeWidth:i?4:2,fillEnabled:!1}),D&&At.jsx(jA,{text:b?n.numero?.toString():n.nome?.charAt(0).toUpperCase(),fontSize:20,fontStyle:"bold",fill:"white",align:"center",verticalAlign:"middle",offsetX:6,offsetY:8,listening:!1}),!b&&n.nome&&At.jsx(jA,{text:n.nome.split(" ")[0],y:g+6,fontSize:11,fill:"white",align:"center",width:100,offsetX:50,shadowColor:"black",shadowBlur:3,listening:!1})]})},JY=()=>{const n=ce.useRef(null),[t,e]=ce.useState({width:0,height:0}),[i,s]=ce.useState("half"),[o,c]=ce.useState({lines:null,logo:null}),[f,m]=ce.useState([]),[g,E]=ce.useState(!1),[b,A]=ce.useState(null),[N,D]=ce.useState([{tokens:[],lines:[]}]),[V,U]=ce.useState(0),[H,Y]=ce.useState([]),[X,Z]=ce.useState([]),[pt,lt]=ce.useState("cursor"),[k,M]=ce.useState("#ffffff"),[L,j]=ce.useState(!1),[G,F]=ce.useState(!1),[z,Ht]=ce.useState(!1),[Lt,W]=ce.useState(!1),[Et,vt]=ce.useState(""),[Ut,Kt]=ce.useState([]);ce.useEffect(()=>{(async()=>{try{const pe=(await A8(gb(KY,"jogadores"))).docs.map(Ve=>({id:Ve.id,...Ve.data()}));m(pe.sort((Ve,Ui)=>Ve.nome.localeCompare(Ui.nome)))}catch(Qt){console.error("Erro ao buscar jogadores:",Qt)}})(),Rs()},[]),ce.useEffect(()=>{(()=>{const Qt=new window.Image;Qt.crossOrigin="Anonymous",Qt.src=i==="half"?Hm.courtHalf:Hm.courtFull;const pe=new window.Image;pe.crossOrigin="Anonymous",pe.src=Hm.logo,Promise.all([new Promise(Ve=>Qt.onload=Ve),new Promise(Ve=>pe.onload=Ve)]).then(()=>{c({lines:Qt,logo:pe})})})()},[i]),ce.useEffect(()=>{const St=()=>{if(n.current&&(e({width:n.current.offsetWidth,height:n.current.offsetHeight}),H.length===0&&N[0].tokens.length===0)){const Qt=[1,2,3,4,5].map(pe=>({id:`rival-${pe}`,type:"rival",numero:pe,x:40,y:100+pe*60}));q(Qt,[])}};return St(),window.addEventListener("resize",St),()=>window.removeEventListener("resize",St)},[]),ce.useEffect(()=>{let St;return G&&(St=setInterval(()=>{U(Qt=>{const pe=Qt+1;return pe>=N.length?(F(!1),Qt):(Y(N[pe].tokens),Z(N[pe].lines),pe)})},800)),()=>clearInterval(St)},[G,N]);const q=(St,Qt)=>{Y(St),Z(Qt),D(pe=>{const Ve=[...pe];return Ve[V]={tokens:St,lines:Qt},Ve})},dt=St=>{St>=0&&St<N.length&&(U(St),Y(N[St].tokens),Z(N[St].lines),A(null),F(!1))},Nt=()=>{const Qt={tokens:JSON.parse(JSON.stringify(H)),lines:[]},pe=[...N,Qt];D(pe),U(pe.length-1),Y(Qt.tokens),Z(Qt.lines),A(null)},Gt=()=>{if(N.length>1){if(!confirm("Deseja apagar este frame?"))return;const St=N.filter((pe,Ve)=>Ve!==V);D(St);const Qt=V>=St.length?St.length-1:V;U(Qt),Y(St[Qt].tokens),Z(St[Qt].lines)}else q([],[]),alert("A jogada precisa ter pelo menos 1 frame.")},ee=St=>{const Qt={id:`${St.id}-${Date.now()}`,type:"ancb",nome:St.nome,foto:St.foto,x:t.width/2+(Math.random()*40-20),y:t.height/2+(Math.random()*40-20)};q([...H,Qt],X)},ie=(St,Qt,pe)=>{const Ve=H.map(Ui=>Ui.id===St?{...Ui,x:Qt,y:pe}:Ui);q(Ve,X)},Te=()=>{if(b){if(b.startsWith("rival-")){const St=parseInt(b.split("-")[1]);ie(b,40,100+St*60)}else{const St=H.filter(Qt=>Qt.id!==b);q(St,X)}A(null)}},mn=St=>{const Qt=St.evt.pointerType==="pen";if(pt==="pen"||Qt){j(!0),Qt&&pt!=="pen"&&lt("pen");const pe=St.target.getStage().getPointerPosition(),Ve={tool:"pen",color:k,points:[pe.x,pe.y]};Z([...X,Ve])}},Ne=St=>{if(!L)return;const pe=St.target.getStage().getPointerPosition(),Ve=X[X.length-1];Ve&&(Ve.points=Ve.points.concat([pe.x,pe.y]),X.splice(X.length-1,1,Ve),Z(X.concat()))},$a=()=>{L&&(j(!1),q(H,X))},yo=()=>{const St=X.slice(0,-1);q(H,St)},Qs=()=>{q(H,[])},ws=()=>{if(!Et.trim())return alert("Digite um nome!");const Qt=[{id:Date.now().toString(),name:Et,courtType:i,frames:N,createdAt:Date.now()},...Ut];Kt(Qt),localStorage.setItem("ancb_plays",JSON.stringify(Qt)),Ht(!1),vt(""),alert("Salvo!")},Rs=()=>{const St=localStorage.getItem("ancb_plays");if(St)try{Kt(JSON.parse(St))}catch{}},tr=St=>{s(St.courtType),D(St.frames),dt(0),W(!1)},Wi=(St,Qt)=>{if(Qt.stopPropagation(),confirm("Apagar jogada?")){const pe=Ut.filter(Ve=>Ve.id!==St);Kt(pe),localStorage.setItem("ancb_plays",JSON.stringify(pe))}},Zi=t.width;let er=1,Ke=0,He=0,$i=0,Cs=0,je={w:0,h:0,x:0,y:0};if(o.lines&&t.width>0&&(er=Math.min(Zi*.95/o.lines.width,t.height*.85/o.lines.height),Ke=o.lines.width*er,He=o.lines.height*er,$i=(Zi-Ke)/2,Cs=(t.height-He)/2-30,o.logo)){const St=Ke*.2/o.logo.width;je.w=o.logo.width*St,je.h=o.logo.height*St,je.x=$i+(Ke-je.w)/2,je.y=Cs+(He-je.h)/2}return At.jsxs("div",{className:"flex flex-col h-screen bg-slate-900 text-white font-sans overflow-hidden",children:[At.jsxs("header",{className:"px-4 py-2 flex justify-between items-center bg-[#062553] border-b-4 border-[#041b3d] shadow-lg h-16 shrink-0 z-20",children:[At.jsxs("div",{className:"flex items-center gap-2",children:[At.jsx("img",{src:Hm.logo,alt:"Logo",className:"w-10 h-10 object-contain drop-shadow-md"}),At.jsxs("div",{className:"hidden sm:block",children:[At.jsx("h1",{className:"font-bold text-lg leading-tight",children:"Prancheta Ttica"}),At.jsx("p",{className:"text-[10px] text-gray-300",children:"Modo Offline"})]})]}),At.jsxs("div",{className:"flex items-center gap-2",children:[At.jsxs("button",{onClick:()=>W(!0),className:"bg-slate-700 hover:bg-slate-600 px-3 py-2 rounded-lg text-white font-bold text-sm flex items-center gap-2 transition-colors",children:[At.jsx(KA,{size:18})," ",At.jsx("span",{className:"hidden sm:inline",children:"Jogadas"})]}),At.jsxs("button",{onClick:()=>Ht(!0),className:"bg-green-600 hover:bg-green-700 px-3 py-2 rounded-lg text-white font-bold text-sm flex items-center gap-2 shadow-lg transition-colors",children:[At.jsx(YA,{size:18})," ",At.jsx("span",{className:"hidden sm:inline",children:"Salvar"})]}),At.jsx("div",{className:"w-px h-8 bg-slate-700 mx-1"}),b&&At.jsx("button",{onClick:Te,className:"bg-red-600 p-2 rounded-lg text-white shadow animate-pulse",children:At.jsx(wE,{size:20})}),At.jsx("button",{onClick:()=>E(!0),className:"bg-[#F27405] hover:bg-orange-600 text-white px-3 py-2 rounded-lg font-bold flex items-center gap-2 ml-1",children:At.jsx(QA,{size:20})})]})]}),At.jsxs("main",{className:"flex-1 w-full relative bg-slate-800 flex overflow-hidden",ref:n,children:[At.jsx("div",{className:"flex-1 relative",children:t.width>0&&At.jsx(AO,{width:t.width,height:t.height,onMouseDown:mn,onMousemove:Ne,onMouseup:$a,onTouchStart:mn,onTouchMove:Ne,onTouchEnd:$a,className:pt==="pen"?"cursor-crosshair":"cursor-default",onClick:St=>{pt==="cursor"&&St.target===St.target.getStage()&&A(null)},children:At.jsxs(EO,{children:[At.jsx(SO,{x:$i,y:Cs,width:Ke,height:He,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Ke,y:He},fillLinearGradientColorStops:[0,"#2574d1",1,"#1c64b6"],cornerRadius:5}),o.logo&&At.jsx(mT,{image:o.logo,width:je.w,height:je.h,x:je.x,y:je.y,opacity:.3,listening:!1}),o.lines&&At.jsx(mT,{image:o.lines,width:Ke,height:He,x:$i,y:Cs,listening:!1}),X.map((St,Qt)=>At.jsx(bO,{points:St.points,stroke:St.color,strokeWidth:4,tension:.5,lineCap:"round",lineJoin:"round",opacity:.8},Qt)),H.map(St=>At.jsx(XY,{token:St,onDragEnd:ie,onSelect:A,isSelected:b===St.id,isLocked:pt==="pen"||G},St.id))]})})}),At.jsxs("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-2 flex flex-col items-center gap-2 border border-gray-200 dark:border-gray-700 z-30",children:[At.jsx("button",{onClick:()=>lt("cursor"),className:`p-3 rounded-xl ${pt==="cursor"?"bg-[#F27405] text-white":"text-gray-500"}`,children:At.jsx(PO,{size:24})}),At.jsx("div",{className:"h-px w-8 bg-gray-300 dark:bg-gray-700 my-1"}),At.jsxs("div",{className:"relative group",children:[At.jsx("button",{onClick:()=>lt("pen"),className:`p-3 rounded-xl ${pt==="pen"?"bg-blue-600 text-white":"text-gray-500"}`,children:At.jsx(UO,{size:24})}),pt==="pen"&&At.jsx("div",{className:"absolute right-full top-0 mr-3 bg-white dark:bg-gray-800 p-2 rounded-xl shadow-xl flex flex-col gap-2",children:QY.map(St=>At.jsx("button",{onClick:Qt=>{Qt.stopPropagation(),M(St)},className:`w-6 h-6 rounded-full border border-white/20 ${k===St?"ring-2 ring-blue-500 scale-110":""}`,style:{backgroundColor:St}},St))})]}),At.jsx("div",{className:"h-px w-8 bg-gray-300 dark:bg-gray-700 my-1"}),At.jsx("button",{onClick:yo,className:"p-3 rounded-xl text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800",children:At.jsx(KO,{size:24})}),At.jsx("button",{onClick:Qs,className:"p-3 rounded-xl text-gray-500 hover:text-red-600",children:At.jsx(xO,{size:24})})]}),At.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-[#041b3d]/90 backdrop-blur-md text-white rounded-2xl shadow-2xl p-3 flex items-center gap-3 border border-white/10 z-30 overflow-x-auto max-w-[90vw]",children:[At.jsx("button",{onClick:()=>F(!G),className:`p-3 rounded-xl transition-all ${G?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,title:G?"Pausar":"Reproduzir Jogada",children:G?At.jsx(kO,{size:20,fill:"white"}):At.jsx(BO,{size:20,fill:"white"})}),At.jsx("div",{className:"w-px h-8 bg-white/20 mx-1"}),At.jsx("div",{className:"flex gap-2 items-center overflow-x-auto custom-scrollbar pb-1 px-1",style:{maxWidth:"400px"},children:N.map((St,Qt)=>At.jsxs("button",{onClick:()=>dt(Qt),className:`
                            relative w-10 h-10 rounded-lg font-bold text-sm flex items-center justify-center transition-all border-2
                            ${Qt===V?"bg-[#F27405] border-[#F27405] text-white shadow-lg scale-110 z-10":"bg-white/10 border-transparent text-gray-300 hover:bg-white/20 hover:border-white/30"}
                        `,children:[Qt+1,St.lines.length>0&&At.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-white rounded-full opacity-50"})]},Qt))}),At.jsx("div",{className:"w-px h-8 bg-white/20 mx-1"}),At.jsxs("div",{className:"flex gap-2",children:[At.jsx("button",{onClick:Nt,className:"bg-blue-600 hover:bg-blue-500 p-2.5 rounded-xl text-white shadow-md transition-transform active:scale-95",title:"Duplicar frame atual",children:At.jsx(qO,{size:20})}),N.length>1&&At.jsx("button",{onClick:Gt,className:"text-red-400 hover:text-red-300 hover:bg-white/10 p-2.5 rounded-xl transition-colors",title:"Apagar este frame",children:At.jsx(wE,{size:20})})]})]})]}),z&&At.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:At.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-sm shadow-2xl border border-gray-700",children:[At.jsxs("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[At.jsx(YA,{size:20,className:"text-green-500"})," Salvar Jogada"]}),At.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nome da jogada (ex: Sada Lateral)",className:"w-full p-3 rounded-lg bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white mb-4 outline-none focus:ring-2 focus:ring-[#F27405]",value:Et,onChange:St=>vt(St.target.value)}),At.jsxs("div",{className:"flex gap-2 justify-end",children:[At.jsx("button",{onClick:()=>Ht(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Cancelar"}),At.jsx("button",{onClick:ws,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold",children:"Salvar"})]})]})}),Lt&&At.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:At.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md shadow-2xl border border-gray-700 flex flex-col max-h-[80vh]",children:[At.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[At.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[At.jsx(KA,{size:20,className:"text-[#F27405]"})," Minhas Jogadas"]}),At.jsx("button",{onClick:()=>W(!1),children:At.jsx(XA,{size:24,className:"text-gray-500"})})]}),At.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:Ut.length===0?At.jsx("div",{className:"text-center py-8 text-gray-500",children:At.jsx("p",{children:"Nenhuma jogada salva ainda."})}):At.jsx("div",{className:"space-y-2",children:Ut.map(St=>At.jsxs("div",{onClick:()=>tr(St),className:"bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 p-3 rounded-lg cursor-pointer border border-transparent hover:border-[#F27405] transition-all group flex justify-between items-center",children:[At.jsxs("div",{children:[At.jsx("p",{className:"font-bold text-gray-800 dark:text-white",children:St.name}),At.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(St.createdAt).toLocaleDateString(),"  ",St.frames.length," frames"]})]}),At.jsx("button",{onClick:Qt=>Wi(St.id,Qt),className:"p-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:At.jsx(wE,{size:18})})]},St.id))})})]})}),g&&At.jsxs(At.Fragment,{children:[At.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>E(!1)}),At.jsxs("div",{className:"fixed top-0 right-0 h-full w-80 bg-white dark:bg-gray-900 shadow-2xl z-50 flex flex-col border-l border-gray-700",children:[At.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-[#062553]",children:[At.jsxs("h2",{className:"font-bold text-white text-lg flex items-center gap-2",children:[At.jsx(QA,{size:20,className:"text-[#F27405]"})," Elenco"]}),At.jsx("button",{onClick:()=>E(!1),className:"text-gray-300 hover:text-white",children:At.jsx(XA,{size:24})})]}),At.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:At.jsx("div",{className:"grid gap-2",children:f.map(St=>At.jsxs("button",{onClick:()=>ee(St),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-800 transition-colors group text-left w-full",children:[At.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#062553] bg-gray-200",children:At.jsx("img",{src:St.foto||`${Hm.defaultAvatar}${St.nome}`,alt:St.nome,className:"w-full h-full object-cover"})}),At.jsx("div",{children:At.jsx("p",{className:"font-bold text-gray-200 text-sm",children:St.nome})})]},St.id))})})]})]})]})};w7.createRoot(document.getElementById("root")).render(At.jsx(ce.StrictMode,{children:At.jsx(JY,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function P6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rE={exports:{}},e0={};var eA;function _7(){if(eA)return e0;eA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:o}}return e0.Fragment=t,e0.jsx=e,e0.jsxs=e,e0}var nA;function y7(){return nA||(nA=1,rE.exports=_7()),rE.exports}var Rt=y7(),oE={exports:{}},de={};var iA;function v7(){if(iA)return de;iA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function N(H){return H===null||typeof H!="object"?null:(H=A&&H[A]||H["@@iterator"],typeof H=="function"?H:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function j(H,ct,Ct){this.props=H,this.context=ct,this.refs=U,this.updater=Ct||D}j.prototype.isReactComponent={},j.prototype.setState=function(H,ct){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ct,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function K(){}K.prototype=j.prototype;function X(H,ct,Ct){this.props=H,this.context=ct,this.refs=U,this.updater=Ct||D}var Z=X.prototype=new K;Z.constructor=X,k(Z,j.prototype),Z.isPureReactComponent=!0;var pt=Array.isArray;function ot(){}var V={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function L(H,ct,Ct){var zt=Ct.ref;return{$$typeof:n,type:H,key:ct,ref:zt!==void 0?zt:null,props:Ct}}function q(H,ct){return L(H.type,ct,H.props)}function G(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function F(H){var ct={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ct){return ct[Ct]})}var z=/\/+/g;function Ft(H,ct){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):ct.toString(36)}function Lt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ot,ot):(H.status="pending",H.then(function(ct){H.status==="pending"&&(H.status="fulfilled",H.value=ct)},function(ct){H.status==="pending"&&(H.status="rejected",H.reason=ct)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function W(H,ct,Ct,zt,te){var se=typeof H;(se==="undefined"||se==="boolean")&&(H=null);var Ee=!1;if(H===null)Ee=!0;else switch(se){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(H.$$typeof){case n:case t:Ee=!0;break;case E:return Ee=H._init,W(Ee(H._payload),ct,Ct,zt,te)}}if(Ee)return te=te(H),Ee=zt===""?"."+Ft(H,0):zt,pt(te)?(Ct="",Ee!=null&&(Ct=Ee.replace(z,"$&/")+"/"),W(te,ct,Ct,"",function(Cr){return Cr})):te!=null&&(G(te)&&(te=q(te,Ct+(te.key==null||H&&H.key===te.key?"":(""+te.key).replace(z,"$&/")+"/")+Ee)),ct.push(te)),1;Ee=0;var gn=zt===""?".":zt+":";if(pt(H))for(var De=0;De<H.length;De++)zt=H[De],se=gn+Ft(zt,De),Ee+=W(zt,ct,Ct,se,te);else if(De=N(H),typeof De=="function")for(H=De.call(H),De=0;!(zt=H.next()).done;)zt=zt.value,se=gn+Ft(zt,De++),Ee+=W(zt,ct,Ct,se,te);else if(se==="object"){if(typeof H.then=="function")return W(Lt(H),ct,Ct,zt,te);throw ct=String(H),Error("Objects are not valid as a React child (found: "+(ct==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ct)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function Et(H,ct,Ct){if(H==null)return H;var zt=[],te=0;return W(H,zt,"","",function(se){return ct.call(Ct,se,te++)}),zt}function vt(H){if(H._status===-1){var ct=H._result;ct=ct(),ct.then(function(Ct){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ct)},function(Ct){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ct)}),H._status===-1&&(H._status=0,H._result=ct)}if(H._status===1)return H._result.default;throw H._result}var Ut=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ct=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ct))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Kt={map:Et,forEach:function(H,ct,Ct){Et(H,function(){ct.apply(this,arguments)},Ct)},count:function(H){var ct=0;return Et(H,function(){ct++}),ct},toArray:function(H){return Et(H,function(ct){return ct})||[]},only:function(H){if(!G(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return de.Activity=b,de.Children=Kt,de.Component=j,de.Fragment=e,de.Profiler=s,de.PureComponent=X,de.StrictMode=i,de.Suspense=m,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,de.__COMPILER_RUNTIME={__proto__:null,c:function(H){return V.H.useMemoCache(H)}},de.cache=function(H){return function(){return H.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(H,ct,Ct){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var zt=k({},H.props),te=H.key;if(ct!=null)for(se in ct.key!==void 0&&(te=""+ct.key),ct)!M.call(ct,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&ct.ref===void 0||(zt[se]=ct[se]);var se=arguments.length-2;if(se===1)zt.children=Ct;else if(1<se){for(var Ee=Array(se),gn=0;gn<se;gn++)Ee[gn]=arguments[gn+2];zt.children=Ee}return L(H.type,te,zt)},de.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},de.createElement=function(H,ct,Ct){var zt,te={},se=null;if(ct!=null)for(zt in ct.key!==void 0&&(se=""+ct.key),ct)M.call(ct,zt)&&zt!=="key"&&zt!=="__self"&&zt!=="__source"&&(te[zt]=ct[zt]);var Ee=arguments.length-2;if(Ee===1)te.children=Ct;else if(1<Ee){for(var gn=Array(Ee),De=0;De<Ee;De++)gn[De]=arguments[De+2];te.children=gn}if(H&&H.defaultProps)for(zt in Ee=H.defaultProps,Ee)te[zt]===void 0&&(te[zt]=Ee[zt]);return L(H,se,te)},de.createRef=function(){return{current:null}},de.forwardRef=function(H){return{$$typeof:f,render:H}},de.isValidElement=G,de.lazy=function(H){return{$$typeof:E,_payload:{_status:-1,_result:H},_init:vt}},de.memo=function(H,ct){return{$$typeof:g,type:H,compare:ct===void 0?null:ct}},de.startTransition=function(H){var ct=V.T,Ct={};V.T=Ct;try{var zt=H(),te=V.S;te!==null&&te(Ct,zt),typeof zt=="object"&&zt!==null&&typeof zt.then=="function"&&zt.then(ot,Ut)}catch(se){Ut(se)}finally{ct!==null&&Ct.types!==null&&(ct.types=Ct.types),V.T=ct}},de.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},de.use=function(H){return V.H.use(H)},de.useActionState=function(H,ct,Ct){return V.H.useActionState(H,ct,Ct)},de.useCallback=function(H,ct){return V.H.useCallback(H,ct)},de.useContext=function(H){return V.H.useContext(H)},de.useDebugValue=function(){},de.useDeferredValue=function(H,ct){return V.H.useDeferredValue(H,ct)},de.useEffect=function(H,ct){return V.H.useEffect(H,ct)},de.useEffectEvent=function(H){return V.H.useEffectEvent(H)},de.useId=function(){return V.H.useId()},de.useImperativeHandle=function(H,ct,Ct){return V.H.useImperativeHandle(H,ct,Ct)},de.useInsertionEffect=function(H,ct){return V.H.useInsertionEffect(H,ct)},de.useLayoutEffect=function(H,ct){return V.H.useLayoutEffect(H,ct)},de.useMemo=function(H,ct){return V.H.useMemo(H,ct)},de.useOptimistic=function(H,ct){return V.H.useOptimistic(H,ct)},de.useReducer=function(H,ct,Ct){return V.H.useReducer(H,ct,Ct)},de.useRef=function(H){return V.H.useRef(H)},de.useState=function(H){return V.H.useState(H)},de.useSyncExternalStore=function(H,ct,Ct){return V.H.useSyncExternalStore(H,ct,Ct)},de.useTransition=function(){return V.H.useTransition()},de.version="19.2.4",de}var sA;function xv(){return sA||(sA=1,oE.exports=v7()),oE.exports}var oe=xv();const Qi=P6(oe);var lE={exports:{}},n0={},uE={exports:{}},cE={};var aA;function E7(){return aA||(aA=1,(function(n){function t(W,Et){var vt=W.length;W.push(Et);t:for(;0<vt;){var Ut=vt-1>>>1,Kt=W[Ut];if(0<s(Kt,Et))W[Ut]=Et,W[vt]=Kt,vt=Ut;else break t}}function e(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Et=W[0],vt=W.pop();if(vt!==Et){W[0]=vt;t:for(var Ut=0,Kt=W.length,H=Kt>>>1;Ut<H;){var ct=2*(Ut+1)-1,Ct=W[ct],zt=ct+1,te=W[zt];if(0>s(Ct,vt))zt<Kt&&0>s(te,Ct)?(W[Ut]=te,W[zt]=vt,Ut=zt):(W[Ut]=Ct,W[ct]=vt,Ut=ct);else if(zt<Kt&&0>s(te,vt))W[Ut]=te,W[zt]=vt,Ut=zt;else break t}}return Et}function s(W,Et){var vt=W.sortIndex-Et.sortIndex;return vt!==0?vt:W.id-Et.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],E=1,b=null,A=3,N=!1,D=!1,k=!1,U=!1,j=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function Z(W){for(var Et=e(g);Et!==null;){if(Et.callback===null)i(g);else if(Et.startTime<=W)i(g),Et.sortIndex=Et.expirationTime,t(m,Et);else break;Et=e(g)}}function pt(W){if(k=!1,Z(W),!D)if(e(m)!==null)D=!0,ot||(ot=!0,F());else{var Et=e(g);Et!==null&&Lt(pt,Et.startTime-W)}}var ot=!1,V=-1,M=5,L=-1;function q(){return U?!0:!(n.unstable_now()-L<M)}function G(){if(U=!1,ot){var W=n.unstable_now();L=W;var Et=!0;try{t:{D=!1,k&&(k=!1,K(V),V=-1),N=!0;var vt=A;try{e:{for(Z(W),b=e(m);b!==null&&!(b.expirationTime>W&&q());){var Ut=b.callback;if(typeof Ut=="function"){b.callback=null,A=b.priorityLevel;var Kt=Ut(b.expirationTime<=W);if(W=n.unstable_now(),typeof Kt=="function"){b.callback=Kt,Z(W),Et=!0;break e}b===e(m)&&i(m),Z(W)}else i(m);b=e(m)}if(b!==null)Et=!0;else{var H=e(g);H!==null&&Lt(pt,H.startTime-W),Et=!1}}break t}finally{b=null,A=vt,N=!1}Et=void 0}}finally{Et?F():ot=!1}}}var F;if(typeof X=="function")F=function(){X(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Ft=z.port2;z.port1.onmessage=G,F=function(){Ft.postMessage(null)}}else F=function(){j(G,0)};function Lt(W,Et){V=j(function(){W(n.unstable_now())},Et)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(W){switch(A){case 1:case 2:case 3:var Et=3;break;default:Et=A}var vt=A;A=Et;try{return W()}finally{A=vt}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(W,Et){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var vt=A;A=W;try{return Et()}finally{A=vt}},n.unstable_scheduleCallback=function(W,Et,vt){var Ut=n.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Ut+vt:Ut):vt=Ut,W){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=vt+Kt,W={id:E++,callback:Et,priorityLevel:W,startTime:vt,expirationTime:Kt,sortIndex:-1},vt>Ut?(W.sortIndex=vt,t(g,W),e(m)===null&&W===e(g)&&(k?(K(V),V=-1):k=!0,Lt(pt,vt-Ut))):(W.sortIndex=Kt,t(m,W),D||N||(D=!0,ot||(ot=!0,F()))),W},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(W){var Et=A;return function(){var vt=A;A=Et;try{return W.apply(this,arguments)}finally{A=vt}}}})(cE)),cE}var rA;function sS(){return rA||(rA=1,uE.exports=E7()),uE.exports}var hE={exports:{}},Hs={};var oA;function T7(){if(oA)return Hs;oA=1;var n=xv();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:m,containerInfo:g,implementation:E}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hs.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(m,g,null,E)},Hs.flushSync=function(m){var g=c.T,E=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=E,i.d.f()}},Hs.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Hs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Hs.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:N}):E==="script"&&i.d.X(m,{crossOrigin:b,integrity:A,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hs.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Hs.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin);i.d.L(m,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hs.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Hs.requestFormReset=function(m){i.d.r(m)},Hs.unstable_batchedUpdates=function(m,g){return m(g)},Hs.useFormState=function(m,g,E){return c.H.useFormState(m,g,E)},Hs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Hs.version="19.2.4",Hs}var lA;function S7(){if(lA)return hE.exports;lA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),hE.exports=T7(),hE.exports}var uA;function b7(){if(uA)return n0;uA=1;var n=sS(),t=xv(),e=S7();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var r=a,h=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(h=r.return),a=r.return;while(a)}return r.tag===3?h:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function f(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function m(a){if(o(a)!==a)throw Error(i(188))}function g(a){var r=a.alternate;if(!r){if(r=o(a),r===null)throw Error(i(188));return r!==a?null:a}for(var h=a,d=r;;){var v=h.return;if(v===null)break;var T=v.alternate;if(T===null){if(d=v.return,d!==null){h=d;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===h)return m(v),a;if(T===d)return m(v),r;T=T.sibling}throw Error(i(188))}if(h.return!==d.return)h=v,d=T;else{for(var C=!1,O=v.child;O;){if(O===h){C=!0,h=v,d=T;break}if(O===d){C=!0,d=v,h=T;break}O=O.sibling}if(!C){for(O=T.child;O;){if(O===h){C=!0,h=T,d=v;break}if(O===d){C=!0,d=T,h=v;break}O=O.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==d)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:r}function E(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=E(a),r!==null)return r;a=a.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),X=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function F(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var z=Symbol.for("react.client.reference");function Ft(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case k:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case pt:return"Suspense";case ot:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case D:return"Portal";case X:return a.displayName||"Context";case K:return(a._context.displayName||"Context")+".Consumer";case Z:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return r=a.displayName||null,r!==null?r:Ft(a.type)||"Memo";case M:r=a._payload,a=a._init;try{return Ft(a(r))}catch{}}return null}var Lt=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},Ut=[],Kt=-1;function H(a){return{current:a}}function ct(a){0>Kt||(a.current=Ut[Kt],Ut[Kt]=null,Kt--)}function Ct(a,r){Kt++,Ut[Kt]=a.current,a.current=r}var zt=H(null),te=H(null),se=H(null),Ee=H(null);function gn(a,r){switch(Ct(se,r),Ct(te,a),Ct(zt,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?A4(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=A4(r),a=w4(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ct(zt),Ct(zt,a)}function De(){ct(zt),ct(te),ct(se)}function Cr(a){a.memoizedState!==null&&Ct(Ee,a);var r=zt.current,h=w4(r,a.type);r!==h&&(Ct(te,a),Ct(zt,h))}function Ir(a){te.current===a&&(ct(zt),ct(te)),Ee.current===a&&(ct(Ee),Wg._currentValue=vt)}var Is,ls;function Ns(a){if(Is===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);Is=r&&r[1]||"",ls=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Is+a+ls}var tr=!1;function $i(a,r){if(!a||tr)return"";tr=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(mt){var lt=mt}Reflect.construct(a,[],yt)}else{try{yt.call()}catch(mt){lt=mt}a.call(yt.prototype)}}else{try{throw Error()}catch(mt){lt=mt}(yt=a())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(mt){if(mt&&lt&&typeof mt.stack=="string")return[mt.stack,lt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),C=T[0],O=T[1];if(C&&O){var Y=C.split(`
`),at=O.split(`
`);for(v=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;v<at.length&&!at[v].includes("DetermineComponentFrameRoot");)v++;if(d===Y.length||v===at.length)for(d=Y.length-1,v=at.length-1;1<=d&&0<=v&&Y[d]!==at[v];)v--;for(;1<=d&&0<=v;d--,v--)if(Y[d]!==at[v]){if(d!==1||v!==1)do if(d--,v--,0>v||Y[d]!==at[v]){var gt=`
`+Y[d].replace(" at new "," at ");return a.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",a.displayName)),gt}while(1<=d&&0<=v);break}}}finally{tr=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?Ns(h):""}function us(a,r){switch(a.tag){case 26:case 27:case 5:return Ns(a.type);case 16:return Ns("Lazy");case 13:return a.child!==r&&r!==null?Ns("Suspense Fallback"):Ns("Suspense");case 19:return Ns("SuspenseList");case 0:case 15:return $i(a.type,!1);case 11:return $i(a.type.render,!1);case 1:return $i(a.type,!0);case 31:return Ns("Activity");default:return""}}function vo(a){try{var r="",h=null;do r+=us(a,h),h=a,a=a.return;while(a);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _n=Object.prototype.hasOwnProperty,rn=n.unstable_scheduleCallback,cs=n.unstable_cancelCallback,Bi=n.unstable_shouldYield,nn=n.unstable_requestPaint,In=n.unstable_now,Js=n.unstable_getCurrentPriorityLevel,bi=n.unstable_ImmediatePriority,At=n.unstable_UserBlockingPriority,Yt=n.unstable_NormalPriority,Te=n.unstable_LowPriority,Se=n.unstable_IdlePriority,er=n.log,Xh=n.unstable_setDisableYieldValue,Ta=null,Ai=null;function Ws(a){if(typeof er=="function"&&Xh(a),Ai&&typeof Ai.setStrictMode=="function")try{Ai.setStrictMode(Ta,a)}catch{}}var Xn=Math.clz32?Math.clz32:Jh,cc=Math.log,hc=Math.LN2;function Jh(a){return a>>>=0,a===0?32:31-(cc(a)/hc|0)|0}var Nr=256,Eo=262144,Nn=4194304;function nr(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Zs(a,r,h){var d=a.pendingLanes;if(d===0)return 0;var v=0,T=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var O=d&134217727;return O!==0?(d=O&~T,d!==0?v=nr(d):(C&=O,C!==0?v=nr(C):h||(h=O&~a,h!==0&&(v=nr(h))))):(O=d&~T,O!==0?v=nr(O):C!==0?v=nr(C):h||(h=d&~a,h!==0&&(v=nr(h)))),v===0?0:r!==0&&r!==v&&(r&T)===0&&(T=v&-v,h=r&-r,T>=h||T===32&&(h&4194048)!==0)?r:v}function Sa(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Od(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(){var a=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),a}function ir(a){for(var r=[],h=0;31>h;h++)r.push(a);return r}function $o(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function fc(a,r,h,d,v,T){var C=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var O=a.entanglements,Y=a.expirationTimes,at=a.hiddenUpdates;for(h=C&~h;0<h;){var gt=31-Xn(h),yt=1<<gt;O[gt]=0,Y[gt]=-1;var lt=at[gt];if(lt!==null)for(at[gt]=null,gt=0;gt<lt.length;gt++){var mt=lt[gt];mt!==null&&(mt.lane&=-536870913)}h&=~yt}d!==0&&sr(a,d,0),T!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=T&~(C&~r))}function sr(a,r,h){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-Xn(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function tl(a,r){var h=a.entangledLanes|=r;for(a=a.entanglements;h;){var d=31-Xn(h),v=1<<d;v&r|a[d]&r&&(a[d]|=r),h&=~v}}function dc(a,r){var h=r&-r;return h=(h&42)!==0?1:xr(h),(h&(a.suspendedLanes|r))!==0?0:h}function xr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ba(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function mc(){var a=Et.p;return a!==0?a:(a=window.event,a===void 0?32:Q4(a.type))}function Gi(a,r){var h=Et.p;try{return Et.p=a,r()}finally{Et.p=h}}var Aa=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Aa,oi="__reactProps$"+Aa,wa="__reactContainer$"+Aa,$s="__reactEvents$"+Aa,Or="__reactListeners$"+Aa,el="__reactHandles$"+Aa,pc="__reactResources$"+Aa,Ds="__reactMarker$"+Aa;function Mr(a){delete a[Dn],delete a[oi],delete a[$s],delete a[Or],delete a[el]}function ar(a){var r=a[Dn];if(r)return r;for(var h=a.parentNode;h;){if(r=h[wa]||h[Dn]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(a=O4(a);a!==null;){if(h=a[Dn])return h;a=O4(a)}return r}a=h,h=a.parentNode}return null}function ta(a){if(a=a[Dn]||a[wa]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function xs(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function Ra(a){var r=a[pc];return r||(r=a[pc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Bn(a){a[Ds]=!0}var Ca=new Set,iu={};function rr(a,r){qi(a,r),qi(a+"Capture",r)}function qi(a,r){for(iu[a]=r,a=0;a<r.length;a++)Ca.add(r[a])}var Hi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},on={};function gc(a){return _n.call(on,a)?!0:_n.call(nl,a)?!1:Hi.test(a)?on[a]=!0:(nl[a]=!0,!1)}function il(a,r,h){if(gc(r))if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+h)}}function Os(a,r,h){if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+h)}}function Jn(a,r,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(r,h,""+d)}}function wi(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Pr(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function su(a,r,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,T=d.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return v.call(this)},set:function(C){h=""+C,T.call(this,C)}}),Object.defineProperty(a,r,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function He(a){if(!a._valueTracker){var r=Pr(a)?"checked":"value";a._valueTracker=su(a,r,""+a[r])}}function Wn(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var h=r.getValue(),d="";return a&&(d=Pr(a)?a.checked?"true":"false":a.value),a=d,a!==h?(r.setValue(a),!0):!1}function Fe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Vr=/[\n"\\]/g;function Ri(a){return a.replace(Vr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function To(a,r,h,d,v,T,C,O){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),r!=null?C==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+wi(r)):a.value!==""+wi(r)&&(a.value=""+wi(r)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),r!=null?ea(a,C,wi(r)):h!=null?ea(a,C,wi(h)):d!=null&&a.removeAttribute("value"),v==null&&T!=null&&(a.defaultChecked=!!T),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+wi(O):a.removeAttribute("name")}function _c(a,r,h,d,v,T,C,O){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),r!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){He(a);return}h=h!=null?""+wi(h):"",r=r!=null?""+wi(r):h,O||r===a.value||(a.value=r),a.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=O?a.checked:!!d,a.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C),He(a)}function ea(a,r,h){r==="number"&&Fe(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function or(a,r,h,d){if(a=a.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=r.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&d&&(a[h].defaultSelected=!0)}else{for(h=""+wi(h),r=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}r!==null||a[v].disabled||(r=a[v])}r!==null&&(r.selected=!0)}}function yc(a,r,h){if(r!=null&&(r=""+wi(r),r!==a.value&&(a.value=r),h==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=h!=null?""+wi(h):""}function kr(a,r,h,d){if(r==null){if(d!=null){if(h!=null)throw Error(i(92));if(Lt(d)){if(1<d.length)throw Error(i(93));d=d[0]}h=d}h==null&&(h=""),r=h}h=wi(r),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),He(a)}function hs(a,r){if(r){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=r;return}}a.textContent=r}var Wh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vc(a,r,h){var d=r.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,h):typeof h!="number"||h===0||Wh.has(r)?r==="float"?a.cssFloat=h:a[r]=(""+h).trim():a[r]=h+"px"}function Ec(a,r,h){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&h[v]!==d&&vc(a,v,d)}else for(var T in r)r.hasOwnProperty(T)&&vc(a,T,r[T])}function au(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(a){return Lr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function lr(){}var Tc=null;function na(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var So=null,Ia=null;function sl(a){var r=ta(a);if(r&&(a=r.stateNode)){var h=a[oi]||null;t:switch(a=r.stateNode,r.type){case"input":if(To(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),r=h.name,h.type==="radio"&&r!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ri(""+r)+'"][type="radio"]'),r=0;r<h.length;r++){var d=h[r];if(d!==a&&d.form===a.form){var v=d[oi]||null;if(!v)throw Error(i(90));To(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<h.length;r++)d=h[r],d.form===a.form&&Wn(d)}break t;case"textarea":yc(a,h.value,h.defaultValue);break t;case"select":r=h.value,r!=null&&or(a,!!h.multiple,r,!1)}}}var ou=!1;function bo(a,r,h){if(ou)return a(r,h);ou=!0;try{var d=a(r);return d}finally{if(ou=!1,(So!==null||Ia!==null)&&(vr(),So&&(r=So,a=Ia,Ia=So=null,sl(r),a)))for(r=0;r<a.length;r++)sl(a[r])}}function Na(a,r){var h=a.stateNode;if(h===null)return null;var d=h[oi]||null;if(d===null)return null;h=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,r,typeof h));return h}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lu=!1;if(ia)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){lu=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{lu=!1}var fs=null,Sc=null,Ur=null;function al(){if(Ur)return Ur;var a,r=Sc,h=r.length,d,v="value"in fs?fs.value:fs.textContent,T=v.length;for(a=0;a<h&&r[a]===v[a];a++);var C=h-a;for(d=1;d<=C&&r[h-d]===v[T-d];d++);return Ur=v.slice(a,1<d?1-d:void 0)}function rl(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function ur(){return!0}function cr(){return!1}function Ci(a){function r(h,d,v,T,C){this._reactName=h,this._targetInst=v,this.type=d,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(h=a[O],this[O]=h?h(T):T[O]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ur:cr,this.isPropagationStopped=cr,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),r}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=Ci(zr),Ao=b({},zr,{view:0,detail:0}),bc=Ci(Ao),Br,uu,fr,ol=b({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fr&&(fr&&a.type==="mousemove"?(Br=a.screenX-fr.screenX,uu=a.screenY-fr.screenY):uu=Br=0,fr=a),Br)},movementY:function(a){return"movementY"in a?a.movementY:uu}}),Ac=Ci(ol),ll=b({},ol,{dataTransfer:0}),$h=Ci(ll),wc=b({},Ao,{relatedTarget:0}),ul=Ci(wc),Rc=b({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Md=Ci(Rc),Cc=b({},zr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),tf=Ci(Cc),cl=b({},zr,{data:0}),Da=Ci(cl),cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ef={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ic(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=nf[a])?!!r[a]:!1}function wo(){return Ic}var ts=b({},Ao,{key:function(a){if(a.key){var r=cu[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=rl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ef[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wo,charCode:function(a){return a.type==="keypress"?rl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?rl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Gr=Ci(ts),hu=b({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=Ci(hu),_=b({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wo}),R=Ci(_),I=b({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=Ci(I),$=b({},ol,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ut=Ci($),Pt=b({},zr,{newState:0,oldState:0}),ue=Ci(Pt),Gn=[9,13,27,32],xe=ia&&"CompositionEvent"in window,dn=null;ia&&"documentMode"in document&&(dn=document.documentMode);var ds=ia&&"TextEvent"in window&&!dn,dr=ia&&(!xe||dn&&8<dn&&11>=dn),mr=" ",Ms=!1;function Ro(a,r){switch(a){case"keyup":return Gn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var du=!1;function Y_(a,r){switch(a){case"compositionend":return fu(r);case"keypress":return r.which!==32?null:(Ms=!0,mr);case"textInput":return a=r.data,a===mr&&Ms?null:a;default:return null}}function qp(a,r){if(du)return a==="compositionend"||!xe&&Ro(a,r)?(a=al(),Ur=Sc=fs=null,du=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return dr&&r.locale!=="ko"?null:r.data;default:return null}}var Hp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!Hp[a.type]:r==="textarea"}function Pd(a,r,h,d){So?Ia?Ia.push(d):Ia=[d]:So=d,r=Zy(r,"onChange"),0<r.length&&(h=new hr("onChange","change",null,h,d),a.push({event:h,listeners:r}))}var hl=null,mu=null;function Q_(a){y4(a,0)}function Nc(a){var r=xs(a);if(Wn(r))return a}function jp(a,r){if(a==="change")return r}var Hr=!1;if(ia){var sf;if(ia){var Kp="oninput"in document;if(!Kp){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Kp=typeof Yp.oninput=="function"}sf=Kp}else sf=!1;Hr=sf&&(!document.documentMode||9<document.documentMode)}function xa(){hl&&(hl.detachEvent("onpropertychange",af),mu=hl=null)}function af(a){if(a.propertyName==="value"&&Nc(mu)){var r=[];Pd(r,mu,a,na(a)),bo(Q_,r)}}function X_(a,r,h){a==="focusin"?(xa(),hl=r,mu=h,hl.attachEvent("onpropertychange",af)):a==="focusout"&&xa()}function Qp(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Nc(mu)}function J_(a,r){if(a==="click")return Nc(r)}function W_(a,r){if(a==="input"||a==="change")return Nc(r)}function Xp(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var ms=typeof Object.is=="function"?Object.is:Xp;function Dc(a,r){if(ms(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var h=Object.keys(a),d=Object.keys(r);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var v=h[d];if(!_n.call(r,v)||!ms(a[v],r[v]))return!1}return!0}function rf(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function xc(a,r){var h=rf(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=r&&d>=r)return{node:h,offset:r-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=rf(h)}}function ln(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?ln(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function Z_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=Fe(a.document);r instanceof a.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)a=r.contentWindow;else break;r=Fe(a.document)}return r}function Jp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var $_=ia&&"documentMode"in document&&11>=document.documentMode,Fr=null,jr=null,Oc=null,Vd=!1;function Mc(a,r,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vd||Fr==null||Fr!==Fe(d)||(d=Fr,"selectionStart"in d&&Jp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Oc&&Dc(Oc,d)||(Oc=d,d=Zy(jr,"onSelect"),0<d.length&&(r=new hr("onSelect","select",null,r,h),a.push({event:r,listeners:d}),r.target=Fr)))}function es(a,r){var h={};return h[a.toLowerCase()]=r.toLowerCase(),h["Webkit"+a]="webkit"+r,h["Moz"+a]="moz"+r,h}var pu={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},of={},Wp={};ia&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function Co(a){if(of[a])return of[a];if(!pu[a])return a;var r=pu[a],h;for(h in r)if(r.hasOwnProperty(h)&&h in Wp)return of[a]=r[h];return a}var kd=Co("animationend"),lf=Co("animationiteration"),Zp=Co("animationstart"),ty=Co("transitionrun"),N2=Co("transitionstart"),ey=Co("transitioncancel"),$p=Co("transitionend"),Oa=new Map,uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uf.push("scrollEnd");function Ma(a,r){Oa.set(a,r),rr(r,[a])}var cf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Pa=[],Io=0,Ii=0;function hf(){for(var a=Io,r=Ii=Io=0;r<a;){var h=Pa[r];Pa[r++]=null;var d=Pa[r];Pa[r++]=null;var v=Pa[r];Pa[r++]=null;var T=Pa[r];if(Pa[r++]=null,d!==null&&v!==null){var C=d.pending;C===null?v.next=v:(v.next=C.next,C.next=v),d.pending=v}T!==0&&fl(h,v,T)}}function Ni(a,r,h,d){Pa[Io++]=a,Pa[Io++]=r,Pa[Io++]=h,Pa[Io++]=d,Ii|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Ld(a,r,h,d){return Ni(a,r,h,d),Va(a)}function ps(a,r){return Ni(a,null,null,r),Va(a)}function fl(a,r,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var v=!1,T=a.return;T!==null;)T.childLanes|=h,d=T.alternate,d!==null&&(d.childLanes|=h),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(v=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,v&&r!==null&&(v=31-Xn(h),a=T.hiddenUpdates,d=a[v],d===null?a[v]=[r]:d.push(r),r.lane=h|536870912),T):null}function Va(a){if(50<xl)throw xl=0,Pu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var dl={};function tg(a,r,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(a,r,h,d){return new tg(a,r,h,d)}function Ud(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ps(a,r){var h=a.alternate;return h===null?(h=xn(a.tag,r,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=r,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,r=a.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Pc(a,r){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,r=h.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Kr(a,r,h,d,v,T){var C=0;if(d=a,typeof a=="function")Ud(a)&&(C=1);else if(typeof a=="string")C=a7(a,h,zt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case L:return a=xn(31,h,r,v),a.elementType=L,a.lanes=T,a;case k:return ml(h.children,v,T,r);case U:C=8,v|=24;break;case j:return a=xn(12,h,r,v|2),a.elementType=j,a.lanes=T,a;case pt:return a=xn(13,h,r,v),a.elementType=pt,a.lanes=T,a;case ot:return a=xn(19,h,r,v),a.elementType=ot,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case X:C=10;break t;case K:C=9;break t;case Z:C=11;break t;case V:C=14;break t;case M:C=16,d=null;break t}C=29,h=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=xn(C,h,r,v),r.elementType=a,r.type=d,r.lanes=T,r}function ml(a,r,h,d){return a=xn(7,a,d,r),a.lanes=h,a}function zd(a,r,h){return a=xn(6,a,null,r),a.lanes=h,a}function Vc(a){var r=xn(18,null,null,0);return r.stateNode=a,r}function Bd(a,r,h){return r=xn(4,a.children!==null?a.children:[],a.key,r),r.lanes=h,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var ff=new WeakMap;function sa(a,r){if(typeof a=="object"&&a!==null){var h=ff.get(a);return h!==void 0?h:(r={value:a,source:r,stack:vo(r)},ff.set(a,r),r)}return{value:a,source:r,stack:vo(r)}}var pl=[],gl=0,kc=null,Lc=0,Vs=[],yn=0,No=null,On=1,pr="";function Yr(a,r){pl[gl++]=Lc,pl[gl++]=kc,kc=a,Lc=r}function ny(a,r,h){Vs[yn++]=On,Vs[yn++]=pr,Vs[yn++]=No,No=a;var d=On;a=pr;var v=32-Xn(d)-1;d&=~(1<<v),h+=1;var T=32-Xn(r)+v;if(30<T){var C=v-v%5;T=(d&(1<<C)-1).toString(32),d>>=C,v-=C,On=1<<32-Xn(r)+v|h<<v|d,pr=T+a}else On=1<<T|h<<v|d,pr=a}function Qr(a){a.return!==null&&(Yr(a,1),ny(a,1,0))}function Gd(a){for(;a===kc;)kc=pl[--gl],pl[gl]=null,Lc=pl[--gl],pl[gl]=null;for(;a===No;)No=Vs[--yn],Vs[yn]=null,pr=Vs[--yn],Vs[yn]=null,On=Vs[--yn],Vs[yn]=null}function qd(a,r){Vs[yn++]=On,Vs[yn++]=pr,Vs[yn++]=No,On=r.id,pr=r.overflow,No=a}var qn=null,un=null,Ie=!1,Do=null,aa=!1,Uc=Error(i(519));function Xr(a){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jr(sa(r,a)),Uc}function iy(a){var r=a.stateNode,h=a.type,d=a.memoizedProps;switch(r[Dn]=a,r[oi]=d,h){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(h=0;h<Qa.length;h++)Me(Qa[h],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),_c(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),kr(r,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||r.textContent===""+h||d.suppressHydrationWarning===!0||S4(r.textContent,h)?(d.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),d.onScroll!=null&&Me("scroll",r),d.onScrollEnd!=null&&Me("scrollend",r),d.onClick!=null&&(r.onclick=lr),r=!0):r=!1,r||Xr(a,!0)}function sy(a){for(qn=a.return;qn;)switch(qn.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:qn=qn.return}}function zc(a){if(a!==qn)return!1;if(!Ie)return sy(a),Ie=!0,!1;var r=a.tag,h;if((h=r!==3&&r!==27)&&((h=r===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||j2(a.type,a.memoizedProps)),h=!h),h&&un&&Xr(a),sy(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));un=x4(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));un=x4(a)}else r===27?(r=un,ah(a.type)?(a=J2,J2=null,un=a):un=r):un=qn?co(a.stateNode.nextSibling):null;return!0}function _l(){un=qn=null,Ie=!1}function Hd(){var a=Do;return a!==null&&(Fn===null?Fn=a:Fn.push.apply(Fn,a),Do=null),a}function Jr(a){Do===null?Do=[a]:Do.push(a)}var Bc=H(null),yl=null,Wr=null;function xo(a,r,h){Ct(Bc,r._currentValue),r._currentValue=h}function Zr(a){a._currentValue=Bc.current,ct(Bc)}function Fd(a,r,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===h)break;a=a.return}}function jd(a,r,h,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var T=v.dependencies;if(T!==null){var C=v.child;T=T.firstContext;t:for(;T!==null;){var O=T;T=v;for(var Y=0;Y<r.length;Y++)if(O.context===r[Y]){T.lanes|=h,O=T.alternate,O!==null&&(O.lanes|=h),Fd(T.return,h,a),d||(C=null);break t}T=O.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=h,T=C.alternate,T!==null&&(T.lanes|=h),Fd(C,h,a),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===a){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function $r(a,r,h,d){a=null;for(var v=r,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=v.type;ms(v.pendingProps.value,C.value)||(a!==null?a.push(O):a=[O])}}else if(v===Ee.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Wg):a=[Wg])}v=v.return}a!==null&&jd(r,a,h,d),r.flags|=262144}function df(a){for(a=a.firstContext;a!==null;){if(!ms(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function vl(a){yl=a,Wr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ae(a){return ay(yl,a)}function Gc(a,r){return yl===null&&vl(a),ay(a,r)}function ay(a,r){var h=r._currentValue;if(r={context:r,memoizedValue:h,next:null},Wr===null){if(a===null)throw Error(i(308));Wr=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else Wr=Wr.next=r;return h}var ry=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(h){return h()})}},D2=n.unstable_scheduleCallback,x2=n.unstable_NormalPriority,li={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eg(){return{controller:new ry,data:new Map,refCount:0}}function gu(a){a.refCount--,a.refCount===0&&D2(x2,function(){a.controller.abort()})}var ra=null,Kd=0,Oo=0,ka=null;function ng(a,r){if(ra===null){var h=ra=[];Kd=0,Oo=ht(),ka={status:"pending",value:void 0,then:function(d){h.push(d)}}}return Kd++,r.then(ig,ig),r}function ig(){if(--Kd===0&&ra!==null){ka!==null&&(ka.status="fulfilled");var a=ra;ra=null,Oo=0,ka=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function sg(a,r){var h=[],d={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<h.length;v++)(0,h[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),d}var oy=W.S;W.S=function(a,r){jg=In(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ng(a,r),oy!==null&&oy(a,r)};var El=H(null);function Yd(){var a=El.current;return a!==null?a:re.pooledCache}function mf(a,r){r===null?Ct(El,El.current):Ct(El,r.pool)}function ag(){var a=Yd();return a===null?null:{parent:li._currentValue,pool:a}}var _u=Error(i(460)),pf=Error(i(474)),pe=Error(i(542)),Qd={then:function(){}};function ks(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xd(a,r,h){switch(h=a[h],h===void 0?a.push(r):h!==r&&(r.then(lr,lr),r=h),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,Eu(a),a;default:if(typeof r.status=="string")r.then(lr,lr);else{if(a=re,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,Eu(a),a}throw to=r,_u}}function yu(a){try{var r=a._init;return r(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(to=h,_u):h}}var to=null;function vu(){if(to===null)throw Error(i(459));var a=to;return to=null,a}function Eu(a){if(a===_u||a===pe)throw Error(i(483))}var Tu=null,Su=0;function gf(a){var r=Su;return Su+=1,Tu===null&&(Tu=[]),Xd(Tu,a,r)}function La(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function qc(a,r){throw r.$$typeof===A?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function Jd(a){function r(tt,J){if(a){var st=tt.deletions;st===null?(tt.deletions=[J],tt.flags|=16):st.push(J)}}function h(tt,J){if(!a)return null;for(;J!==null;)r(tt,J),J=J.sibling;return null}function d(tt){for(var J=new Map;tt!==null;)tt.key!==null?J.set(tt.key,tt):J.set(tt.index,tt),tt=tt.sibling;return J}function v(tt,J){return tt=Ps(tt,J),tt.index=0,tt.sibling=null,tt}function T(tt,J,st){return tt.index=st,a?(st=tt.alternate,st!==null?(st=st.index,st<J?(tt.flags|=67108866,J):st):(tt.flags|=67108866,J)):(tt.flags|=1048576,J)}function C(tt){return a&&tt.alternate===null&&(tt.flags|=67108866),tt}function O(tt,J,st,_t){return J===null||J.tag!==6?(J=zd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function Y(tt,J,st,_t){var $t=st.type;return $t===k?gt(tt,J,st.props.children,_t,st.key):J!==null&&(J.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&yu($t)===J.type)?(J=v(J,st.props),La(J,st),J.return=tt,J):(J=Kr(st.type,st.key,st.props,null,tt.mode,_t),La(J,st),J.return=tt,J)}function at(tt,J,st,_t){return J===null||J.tag!==4||J.stateNode.containerInfo!==st.containerInfo||J.stateNode.implementation!==st.implementation?(J=Bd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st.children||[]),J.return=tt,J)}function gt(tt,J,st,_t,$t){return J===null||J.tag!==7?(J=ml(st,tt.mode,_t,$t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function yt(tt,J,st){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=zd(""+J,tt.mode,st),J.return=tt,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return st=Kr(J.type,J.key,J.props,null,tt.mode,st),La(st,J),st.return=tt,st;case D:return J=Bd(J,tt.mode,st),J.return=tt,J;case M:return J=yu(J),yt(tt,J,st)}if(Lt(J)||F(J))return J=ml(J,tt.mode,st,null),J.return=tt,J;if(typeof J.then=="function")return yt(tt,gf(J),st);if(J.$$typeof===X)return yt(tt,Gc(tt,J),st);qc(tt,J)}return null}function lt(tt,J,st,_t){var $t=J!==null?J.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return $t!==null?null:O(tt,J,""+st,_t);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case N:return st.key===$t?Y(tt,J,st,_t):null;case D:return st.key===$t?at(tt,J,st,_t):null;case M:return st=yu(st),lt(tt,J,st,_t)}if(Lt(st)||F(st))return $t!==null?null:gt(tt,J,st,_t,null);if(typeof st.then=="function")return lt(tt,J,gf(st),_t);if(st.$$typeof===X)return lt(tt,J,Gc(tt,st),_t);qc(tt,st)}return null}function mt(tt,J,st,_t,$t){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return tt=tt.get(st)||null,O(J,tt,""+_t,$t);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case N:return tt=tt.get(_t.key===null?st:_t.key)||null,Y(J,tt,_t,$t);case D:return tt=tt.get(_t.key===null?st:_t.key)||null,at(J,tt,_t,$t);case M:return _t=yu(_t),mt(tt,J,st,_t,$t)}if(Lt(_t)||F(_t))return tt=tt.get(st)||null,gt(J,tt,_t,$t,null);if(typeof _t.then=="function")return mt(tt,J,st,gf(_t),$t);if(_t.$$typeof===X)return mt(tt,J,st,Gc(J,_t),$t);qc(J,_t)}return null}function jt(tt,J,st,_t){for(var $t=null,je=null,Xt=J,ve=J=0,Le=null;Xt!==null&&ve<st.length;ve++){Xt.index>ve?(Le=Xt,Xt=null):Le=Xt.sibling;var Ke=lt(tt,Xt,st[ve],_t);if(Ke===null){Xt===null&&(Xt=Le);break}a&&Xt&&Ke.alternate===null&&r(tt,Xt),J=T(Ke,J,ve),je===null?$t=Ke:je.sibling=Ke,je=Ke,Xt=Le}if(ve===st.length)return h(tt,Xt),Ie&&Yr(tt,ve),$t;if(Xt===null){for(;ve<st.length;ve++)Xt=yt(tt,st[ve],_t),Xt!==null&&(J=T(Xt,J,ve),je===null?$t=Xt:je.sibling=Xt,je=Xt);return Ie&&Yr(tt,ve),$t}for(Xt=d(Xt);ve<st.length;ve++)Le=mt(Xt,tt,ve,st[ve],_t),Le!==null&&(a&&Le.alternate!==null&&Xt.delete(Le.key===null?ve:Le.key),J=T(Le,J,ve),je===null?$t=Le:je.sibling=Le,je=Le);return a&&Xt.forEach(function(ch){return r(tt,ch)}),Ie&&Yr(tt,ve),$t}function ie(tt,J,st,_t){if(st==null)throw Error(i(151));for(var $t=null,je=null,Xt=J,ve=J=0,Le=null,Ke=st.next();Xt!==null&&!Ke.done;ve++,Ke=st.next()){Xt.index>ve?(Le=Xt,Xt=null):Le=Xt.sibling;var ch=lt(tt,Xt,Ke.value,_t);if(ch===null){Xt===null&&(Xt=Le);break}a&&Xt&&ch.alternate===null&&r(tt,Xt),J=T(ch,J,ve),je===null?$t=ch:je.sibling=ch,je=ch,Xt=Le}if(Ke.done)return h(tt,Xt),Ie&&Yr(tt,ve),$t;if(Xt===null){for(;!Ke.done;ve++,Ke=st.next())Ke=yt(tt,Ke.value,_t),Ke!==null&&(J=T(Ke,J,ve),je===null?$t=Ke:je.sibling=Ke,je=Ke);return Ie&&Yr(tt,ve),$t}for(Xt=d(Xt);!Ke.done;ve++,Ke=st.next())Ke=mt(Xt,tt,ve,Ke.value,_t),Ke!==null&&(a&&Ke.alternate!==null&&Xt.delete(Ke.key===null?ve:Ke.key),J=T(Ke,J,ve),je===null?$t=Ke:je.sibling=Ke,je=Ke);return a&&Xt.forEach(function(g7){return r(tt,g7)}),Ie&&Yr(tt,ve),$t}function fn(tt,J,st,_t){if(typeof st=="object"&&st!==null&&st.type===k&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case N:t:{for(var $t=st.key;J!==null;){if(J.key===$t){if($t=st.type,$t===k){if(J.tag===7){h(tt,J.sibling),_t=v(J,st.props.children),_t.return=tt,tt=_t;break t}}else if(J.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===M&&yu($t)===J.type){h(tt,J.sibling),_t=v(J,st.props),La(_t,st),_t.return=tt,tt=_t;break t}h(tt,J);break}else r(tt,J);J=J.sibling}st.type===k?(_t=ml(st.props.children,tt.mode,_t,st.key),_t.return=tt,tt=_t):(_t=Kr(st.type,st.key,st.props,null,tt.mode,_t),La(_t,st),_t.return=tt,tt=_t)}return C(tt);case D:t:{for($t=st.key;J!==null;){if(J.key===$t)if(J.tag===4&&J.stateNode.containerInfo===st.containerInfo&&J.stateNode.implementation===st.implementation){h(tt,J.sibling),_t=v(J,st.children||[]),_t.return=tt,tt=_t;break t}else{h(tt,J);break}else r(tt,J);J=J.sibling}_t=Bd(st,tt.mode,_t),_t.return=tt,tt=_t}return C(tt);case M:return st=yu(st),fn(tt,J,st,_t)}if(Lt(st))return jt(tt,J,st,_t);if(F(st)){if($t=F(st),typeof $t!="function")throw Error(i(150));return st=$t.call(st),ie(tt,J,st,_t)}if(typeof st.then=="function")return fn(tt,J,gf(st),_t);if(st.$$typeof===X)return fn(tt,J,Gc(tt,st),_t);qc(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,J!==null&&J.tag===6?(h(tt,J.sibling),_t=v(J,st),_t.return=tt,tt=_t):(h(tt,J),_t=zd(st,tt.mode,_t),_t.return=tt,tt=_t),C(tt)):h(tt,J)}return function(tt,J,st,_t){try{Su=0;var $t=fn(tt,J,st,_t);return Tu=null,$t}catch(Xt){if(Xt===_u||Xt===pe)throw Xt;var je=xn(29,Xt,null,tt.mode);return je.lanes=_t,je.return=tt,je}}}var Mo=Jd(!0),Wd=Jd(!1),gs=!1;function _f(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rg(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Po(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Tl(a,r,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Jt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=Va(a),fl(a,null,h),r}return Ni(a,d,r,h),Va(a)}function Sl(a,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,tl(a,h)}}function Zt(a,r){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var v=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?v=T=C:T=T.next=C,h=h.next}while(h!==null);T===null?v=T=r:T=T.next=r}else v=T=r;h={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=r:a.next=r,h.lastBaseUpdate=r}var og=!1;function yf(){if(og){var a=ka;if(a!==null)throw a}}function Hc(a,r,h,d){og=!1;var v=a.updateQueue;gs=!1;var T=v.firstBaseUpdate,C=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var Y=O,at=Y.next;Y.next=null,C===null?T=at:C.next=at,C=Y;var gt=a.alternate;gt!==null&&(gt=gt.updateQueue,O=gt.lastBaseUpdate,O!==C&&(O===null?gt.firstBaseUpdate=at:O.next=at,gt.lastBaseUpdate=Y))}if(T!==null){var yt=v.baseState;C=0,gt=at=Y=null,O=T;do{var lt=O.lane&-536870913,mt=lt!==O.lane;if(mt?(me&lt)===lt:(d&lt)===lt){lt!==0&&lt===Oo&&(og=!0),gt!==null&&(gt=gt.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var jt=a,ie=O;lt=r;var fn=h;switch(ie.tag){case 1:if(jt=ie.payload,typeof jt=="function"){yt=jt.call(fn,yt,lt);break t}yt=jt;break t;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=ie.payload,lt=typeof jt=="function"?jt.call(fn,yt,lt):jt,lt==null)break t;yt=b({},yt,lt);break t;case 2:gs=!0}}lt=O.callback,lt!==null&&(a.flags|=64,mt&&(a.flags|=8192),mt=v.callbacks,mt===null?v.callbacks=[lt]:mt.push(lt))}else mt={lane:lt,tag:O.tag,payload:O.payload,callback:O.callback,next:null},gt===null?(at=gt=mt,Y=yt):gt=gt.next=mt,C|=lt;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;mt=O,O=mt.next,mt.next=null,v.lastBaseUpdate=mt,v.shared.pending=null}}while(!0);gt===null&&(Y=yt),v.baseState=Y,v.firstBaseUpdate=at,v.lastBaseUpdate=gt,T===null&&(v.shared.lanes=0),oo|=C,a.lanes=C,a.memoizedState=yt}}function Fc(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function ly(a,r){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)Fc(h[a],r)}var jc=H(null),Zd=H(0);function uy(a,r){a=ca,Ct(Zd,a),Ct(jc,r),ca=a|r.baseLanes}function lg(){Ct(Zd,ca),Ct(jc,jc.current)}function vf(){ca=Zd.current,ct(jc),ct(Zd)}var Ls=H(null),_s=null;function Vo(a){var r=a.alternate;Ct(Ne,Ne.current&1),Ct(Ls,a),_s===null&&(r===null||jc.current!==null||r.memoizedState!==null)&&(_s=a)}function ug(a){Ct(Ne,Ne.current),Ct(Ls,a),_s===null&&(_s=a)}function cy(a){a.tag===22?(Ct(Ne,Ne.current),Ct(Ls,a),_s===null&&(_s=a)):Us()}function Us(){Ct(Ne,Ne.current),Ct(Ls,Ls.current)}function Zn(a){ct(Ls),_s===a&&(_s=null),ct(Ne)}var Ne=H(0);function oa(a){for(var r=a;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Q2(h)||X2(h)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vn=0,he=null,$e=null,we=null,Ua=!1,Kc=!1,bu=!1,$d=0,Ef=0,Yc=null,cg=0;function Mn(){throw Error(i(321))}function hg(a,r){if(r===null)return!1;for(var h=0;h<r.length&&h<a.length;h++)if(!ms(a[h],r[h]))return!1;return!0}function tm(a,r,h,d,v,T){return vn=T,he=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=a===null||a.memoizedState===null?qy:xg,bu=!1,T=h(d,v),bu=!1,Kc&&(T=Au(r,h,d,v)),hy(a),T}function hy(a){W.H=Qc;var r=$e!==null&&$e.next!==null;if(vn=0,we=$e=he=null,Ua=!1,Ef=0,Yc=null,r)throw Error(i(300));a===null||ui||(a=a.dependencies,a!==null&&df(a)&&(ui=!0))}function Au(a,r,h,d){he=a;var v=0;do{if(Kc&&(Yc=null),Ef=0,Kc=!1,25<=v)throw Error(i(301));if(v+=1,we=$e=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}W.H=za,T=r(h,d)}while(Kc);return T}function wu(){var a=W.H,r=a.useState()[0];return r=typeof r.then=="function"?Tf(r):r,a=a.useState()[0],($e!==null?$e.memoizedState:null)!==a&&(he.flags|=1024),r}function fg(){var a=$d!==0;return $d=0,a}function dg(a,r,h){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~h}function mg(a){if(Ua){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Ua=!1}vn=0,we=$e=he=null,Kc=!1,Ef=$d=0,Yc=null}function pi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?he.memoizedState=we=a:we=we.next=a,we}function $n(){if($e===null){var a=he.alternate;a=a!==null?a.memoizedState:null}else a=$e.next;var r=we===null?he.memoizedState:we.next;if(r!==null)we=r,$e=a;else{if(a===null)throw he.alternate===null?Error(i(467)):Error(i(310));$e=a,a={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},we===null?he.memoizedState=we=a:we=we.next=a}return we}function em(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tf(a){var r=Ef;return Ef+=1,Yc===null&&(Yc=[]),a=Xd(Yc,a,r),r=he,(we===null?r.memoizedState:we.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?qy:xg),a}function bl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Tf(a);if(a.$$typeof===X)return ae(a)}throw Error(i(438,String(a)))}function pg(a){var r=null,h=he.updateQueue;if(h!==null&&(r=h.memoCache),r==null){var d=he.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),h===null&&(h=em(),he.updateQueue=h),h.memoCache=r,h=r.data[r.index],h===void 0)for(h=r.data[r.index]=Array(a),d=0;d<a;d++)h[d]=q;return r.index++,h}function ko(a,r){return typeof r=="function"?r(a):r}function nm(a){var r=$n();return gg(r,$e,a)}function gg(a,r,h){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=h;var v=a.baseQueue,T=d.pending;if(T!==null){if(v!==null){var C=v.next;v.next=T.next,T.next=C}r.baseQueue=v=T,d.pending=null}if(T=a.baseState,v===null)a.memoizedState=T;else{r=v.next;var O=C=null,Y=null,at=r,gt=!1;do{var yt=at.lane&-536870913;if(yt!==at.lane?(me&yt)===yt:(vn&yt)===yt){var lt=at.revertLane;if(lt===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),yt===Oo&&(gt=!0);else if((vn&lt)===lt){at=at.next,lt===Oo&&(gt=!0);continue}else yt={lane:0,revertLane:at.revertLane,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Y===null?(O=Y=yt,C=T):Y=Y.next=yt,he.lanes|=lt,oo|=lt;yt=at.action,bu&&h(T,yt),T=at.hasEagerState?at.eagerState:h(T,yt)}else lt={lane:yt,revertLane:at.revertLane,gesture:at.gesture,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Y===null?(O=Y=lt,C=T):Y=Y.next=lt,he.lanes|=yt,oo|=yt;at=at.next}while(at!==null&&at!==r);if(Y===null?C=T:Y.next=O,!ms(T,a.memoizedState)&&(ui=!0,gt&&(h=ka,h!==null)))throw h;a.memoizedState=T,a.baseState=C,a.baseQueue=Y,d.lastRenderedState=T}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function _g(a){var r=$n(),h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var d=h.dispatch,v=h.pending,T=r.memoizedState;if(v!==null){h.pending=null;var C=v=v.next;do T=a(T,C.action),C=C.next;while(C!==v);ms(T,r.memoizedState)||(ui=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),h.lastRenderedState=T}return[T,d]}function fy(a,r,h){var d=he,v=$n(),T=Ie;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=r();var C=!ms(($e||v).memoizedState,h);if(C&&(v.memoizedState=h,ui=!0),v=v.queue,wg(py.bind(null,d,v,a),[a]),v.getSnapshot!==r||C||we!==null&&we.memoizedState.tag&1){if(d.flags|=2048,Al(9,{destroy:void 0},my.bind(null,d,v,h,r),null),re===null)throw Error(i(349));T||(vn&127)!==0||dy(d,r,h)}return h}function dy(a,r,h){a.flags|=16384,a={getSnapshot:r,value:h},r=he.updateQueue,r===null?(r=em(),he.updateQueue=r,r.stores=[a]):(h=r.stores,h===null?r.stores=[a]:h.push(a))}function my(a,r,h,d){r.value=h,r.getSnapshot=d,gy(r)&&_y(a)}function py(a,r,h){return h(function(){gy(r)&&_y(a)})}function gy(a){var r=a.getSnapshot;a=a.value;try{var h=r();return!ms(a,h)}catch{return!0}}function _y(a){var r=ps(a,2);r!==null&&_e(r,a,2)}function yg(a){var r=pi();if(typeof a=="function"){var h=a;if(a=h(),bu){Ws(!0);try{h()}finally{Ws(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:a},r}function vg(a,r,h,d){return a.baseState=h,gg(a,$e,typeof d=="function"?d:ko)}function O2(a,r,h,d,v){if(rm(a))throw Error(i(485));if(a=r.action,a!==null){var T={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};W.T!==null?h(!0):T.isTransition=!1,d(T),h=r.pending,h===null?(T.next=r.pending=T,yy(r,T)):(T.next=h.next,r.pending=h.next=T)}}function yy(a,r){var h=r.action,d=r.payload,v=a.state;if(r.isTransition){var T=W.T,C={};W.T=C;try{var O=h(v,d),Y=W.S;Y!==null&&Y(C,O),vy(a,r,O)}catch(at){Eg(a,r,at)}finally{T!==null&&C.types!==null&&(T.types=C.types),W.T=T}}else try{T=h(v,d),vy(a,r,T)}catch(at){Eg(a,r,at)}}function vy(a,r,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){Ey(a,r,d)},function(d){return Eg(a,r,d)}):Ey(a,r,h)}function Ey(a,r,h){r.status="fulfilled",r.value=h,Ty(r),a.state=h,r=a.pending,r!==null&&(h=r.next,h===r?a.pending=null:(h=h.next,r.next=h,yy(a,h)))}function Eg(a,r,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=h,Ty(r),r=r.next;while(r!==d)}a.action=null}function Ty(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Tg(a,r){return r}function Sg(a,r){if(Ie){var h=re.formState;if(h!==null){t:{var d=he;if(Ie){if(un){e:{for(var v=un,T=aa;v.nodeType!==8;){if(!T){v=null;break e}if(v=co(v.nextSibling),v===null){v=null;break e}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){un=co(v.nextSibling),d=v.data==="F!";break t}}Xr(d)}d=!1}d&&(r=h[0])}}return h=pi(),h.memoizedState=h.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:r},h.queue=d,h=zy.bind(null,he,d),d.dispatch=h,d=yg(!1),T=Dg.bind(null,he,!1,d.queue),d=pi(),v={state:r,dispatch:null,action:a,pending:null},d.queue=v,h=O2.bind(null,he,v,T,h),v.dispatch=h,d.memoizedState=a,[r,h,!1]}function Sy(a){var r=$n();return bg(r,$e,a)}function bg(a,r,h){if(r=gg(a,r,Tg)[0],a=nm(ko)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Tf(r)}catch(C){throw C===_u?pe:C}else d=r;r=$n();var v=r.queue,T=v.dispatch;return h!==r.memoizedState&&(he.flags|=2048,Al(9,{destroy:void 0},by.bind(null,v,h),null)),[d,T,a]}function by(a,r){a.action=r}function Ag(a){var r=$n(),h=$e;if(h!==null)return bg(r,h,a);$n(),r=r.memoizedState,h=$n();var d=h.queue.dispatch;return h.memoizedState=a,[r,d,!1]}function Al(a,r,h,d){return a={tag:a,create:h,deps:d,inst:r,next:null},r=he.updateQueue,r===null&&(r=em(),he.updateQueue=r),h=r.lastEffect,h===null?r.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,r.lastEffect=a),a}function im(){return $n().memoizedState}function sm(a,r,h,d){var v=pi();he.flags|=a,v.memoizedState=Al(1|r,{destroy:void 0},h,d===void 0?null:d)}function am(a,r,h,d){var v=$n();d=d===void 0?null:d;var T=v.memoizedState.inst;$e!==null&&d!==null&&hg(d,$e.memoizedState.deps)?v.memoizedState=Al(r,T,h,d):(he.flags|=a,v.memoizedState=Al(1|r,T,h,d))}function Ay(a,r){sm(8390656,8,a,r)}function wg(a,r){am(2048,8,a,r)}function wy(a){he.flags|=4;var r=he.updateQueue;if(r===null)r=em(),he.updateQueue=r,r.events=[a];else{var h=r.events;h===null?r.events=[a]:h.push(a)}}function Ry(a){var r=$n().memoizedState;return wy({ref:r,nextImpl:a}),function(){if((Jt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Cy(a,r){return am(4,2,a,r)}function Iy(a,r){return am(4,4,a,r)}function Ny(a,r){if(typeof r=="function"){a=a();var h=r(a);return function(){typeof h=="function"?h():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function Dy(a,r,h){h=h!=null?h.concat([a]):null,am(4,4,Ny.bind(null,r,a),h)}function Rg(){}function xy(a,r){var h=$n();r=r===void 0?null:r;var d=h.memoizedState;return r!==null&&hg(r,d[1])?d[0]:(h.memoizedState=[a,r],a)}function Oy(a,r){var h=$n();r=r===void 0?null:r;var d=h.memoizedState;if(r!==null&&hg(r,d[1]))return d[0];if(d=a(),bu){Ws(!0);try{a()}finally{Ws(!1)}}return h.memoizedState=[d,r],d}function Cg(a,r,h){return h===void 0||(vn&1073741824)!==0&&(me&261930)===0?a.memoizedState=r:(a.memoizedState=h,a=be(),he.lanes|=a,oo|=a,h)}function My(a,r,h,d){return ms(h,r)?h:jc.current!==null?(a=Cg(a,h,d),ms(a,r)||(ui=!0),a):(vn&42)===0||(vn&1073741824)!==0&&(me&261930)===0?(ui=!0,a.memoizedState=h):(a=be(),he.lanes|=a,oo|=a,r)}function Py(a,r,h,d,v){var T=Et.p;Et.p=T!==0&&8>T?T:8;var C=W.T,O={};W.T=O,Dg(a,!1,r,h);try{var Y=v(),at=W.S;if(at!==null&&at(O,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var gt=sg(Y,d);Sf(a,r,gt,fa(a))}else Sf(a,r,d,fa(a))}catch(yt){Sf(a,r,{then:function(){},status:"rejected",reason:yt},fa())}finally{Et.p=T,C!==null&&O.types!==null&&(C.types=O.types),W.T=C}}function M2(){}function Ig(a,r,h,d){if(a.tag!==5)throw Error(i(476));var v=Vy(a).queue;Py(a,v,r,vt,h===null?M2:function(){return ky(a),h(d)})}function Vy(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:vt},next:null};var h={};return r.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:h},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function ky(a){var r=Vy(a);r.next===null&&(r=a.alternate.memoizedState),Sf(a,r.next.queue,{},fa())}function Ng(){return ae(Wg)}function Ly(){return $n().memoizedState}function Uy(){return $n().memoizedState}function P2(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var h=fa();a=Po(h);var d=Tl(r,a,h);d!==null&&(_e(d,r,h),Sl(d,r,h)),r={cache:eg()},a.payload=r;return}r=r.return}}function V2(a,r,h){var d=fa();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},rm(a)?By(r,h):(h=Ld(a,r,h,d),h!==null&&(_e(h,a,d),Gy(h,r,d)))}function zy(a,r,h){var d=fa();Sf(a,r,h,d)}function Sf(a,r,h,d){var v={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(rm(a))By(r,v);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,O=T(C,h);if(v.hasEagerState=!0,v.eagerState=O,ms(O,C))return Ni(a,r,v,0),re===null&&hf(),!1}catch{}if(h=Ld(a,r,v,d),h!==null)return _e(h,a,d),Gy(h,r,d),!0}return!1}function Dg(a,r,h,d){if(d={lane:2,revertLane:ht(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},rm(a)){if(r)throw Error(i(479))}else r=Ld(a,h,d,2),r!==null&&_e(r,a,2)}function rm(a){var r=a.alternate;return a===he||r!==null&&r===he}function By(a,r){Kc=Ua=!0;var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}function Gy(a,r,h){if((h&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,tl(a,h)}}var Qc={readContext:ae,use:bl,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn};Qc.useEffectEvent=Mn;var qy={readContext:ae,use:bl,useCallback:function(a,r){return pi().memoizedState=[a,r===void 0?null:r],a},useContext:ae,useEffect:Ay,useImperativeHandle:function(a,r,h){h=h!=null?h.concat([a]):null,sm(4194308,4,Ny.bind(null,r,a),h)},useLayoutEffect:function(a,r){return sm(4194308,4,a,r)},useInsertionEffect:function(a,r){sm(4,2,a,r)},useMemo:function(a,r){var h=pi();r=r===void 0?null:r;var d=a();if(bu){Ws(!0);try{a()}finally{Ws(!1)}}return h.memoizedState=[d,r],d},useReducer:function(a,r,h){var d=pi();if(h!==void 0){var v=h(r);if(bu){Ws(!0);try{h(r)}finally{Ws(!1)}}}else v=r;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=V2.bind(null,he,a),[d.memoizedState,a]},useRef:function(a){var r=pi();return a={current:a},r.memoizedState=a},useState:function(a){a=yg(a);var r=a.queue,h=zy.bind(null,he,r);return r.dispatch=h,[a.memoizedState,h]},useDebugValue:Rg,useDeferredValue:function(a,r){var h=pi();return Cg(h,a,r)},useTransition:function(){var a=yg(!1);return a=Py.bind(null,he,a.queue,!0,!1),pi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,h){var d=he,v=pi();if(Ie){if(h===void 0)throw Error(i(407));h=h()}else{if(h=r(),re===null)throw Error(i(349));(me&127)!==0||dy(d,r,h)}v.memoizedState=h;var T={value:h,getSnapshot:r};return v.queue=T,Ay(py.bind(null,d,T,a),[a]),d.flags|=2048,Al(9,{destroy:void 0},my.bind(null,d,T,h,r),null),h},useId:function(){var a=pi(),r=re.identifierPrefix;if(Ie){var h=pr,d=On;h=(d&~(1<<32-Xn(d)-1)).toString(32)+h,r="_"+r+"R_"+h,h=$d++,0<h&&(r+="H"+h.toString(32)),r+="_"}else h=cg++,r="_"+r+"r_"+h.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Ng,useFormState:Sg,useActionState:Sg,useOptimistic:function(a){var r=pi();r.memoizedState=r.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=h,r=Dg.bind(null,he,!0,h),h.dispatch=r,[a,r]},useMemoCache:pg,useCacheRefresh:function(){return pi().memoizedState=P2.bind(null,he)},useEffectEvent:function(a){var r=pi(),h={impl:a};return r.memoizedState=h,function(){if((Jt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},xg={readContext:ae,use:bl,useCallback:xy,useContext:ae,useEffect:wg,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:nm,useRef:im,useState:function(){return nm(ko)},useDebugValue:Rg,useDeferredValue:function(a,r){var h=$n();return My(h,$e.memoizedState,a,r)},useTransition:function(){var a=nm(ko)[0],r=$n().memoizedState;return[typeof a=="boolean"?a:Tf(a),r]},useSyncExternalStore:fy,useId:Ly,useHostTransitionStatus:Ng,useFormState:Sy,useActionState:Sy,useOptimistic:function(a,r){var h=$n();return vg(h,$e,a,r)},useMemoCache:pg,useCacheRefresh:Uy};xg.useEffectEvent=Ry;var za={readContext:ae,use:bl,useCallback:xy,useContext:ae,useEffect:wg,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:_g,useRef:im,useState:function(){return _g(ko)},useDebugValue:Rg,useDeferredValue:function(a,r){var h=$n();return $e===null?Cg(h,a,r):My(h,$e.memoizedState,a,r)},useTransition:function(){var a=_g(ko)[0],r=$n().memoizedState;return[typeof a=="boolean"?a:Tf(a),r]},useSyncExternalStore:fy,useId:Ly,useHostTransitionStatus:Ng,useFormState:Ag,useActionState:Ag,useOptimistic:function(a,r){var h=$n();return $e!==null?vg(h,$e,a,r):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:pg,useCacheRefresh:Uy};za.useEffectEvent=Ry;function om(a,r,h,d){r=a.memoizedState,h=h(d,r),h=h==null?r:b({},r,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var bf={enqueueSetState:function(a,r,h){a=a._reactInternals;var d=fa(),v=Po(d);v.payload=r,h!=null&&(v.callback=h),r=Tl(a,v,d),r!==null&&(_e(r,a,d),Sl(r,a,d))},enqueueReplaceState:function(a,r,h){a=a._reactInternals;var d=fa(),v=Po(d);v.tag=1,v.payload=r,h!=null&&(v.callback=h),r=Tl(a,v,d),r!==null&&(_e(r,a,d),Sl(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var h=fa(),d=Po(h);d.tag=2,r!=null&&(d.callback=r),r=Tl(a,d,h),r!==null&&(_e(r,a,h),Sl(r,a,h))}};function Og(a,r,h,d,v,T,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,T,C):r.prototype&&r.prototype.isPureReactComponent?!Dc(h,d)||!Dc(v,T):!0}function Mg(a,r,h,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,d),r.state!==a&&bf.enqueueReplaceState(r,r.state,null)}function wl(a,r){var h=r;if("ref"in r){h={};for(var d in r)d!=="ref"&&(h[d]=r[d])}if(a=a.defaultProps){h===r&&(h=b({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}function Hy(a){cf(a)}function Pg(a){console.error(a)}function Vg(a){cf(a)}function lm(a,r){try{var h=a.onUncaughtError;h(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Fy(a,r,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function kg(a,r,h){return h=Po(h),h.tag=3,h.payload={element:null},h.callback=function(){lm(a,r)},h}function Lg(a){return a=Po(a),a.tag=3,a}function jy(a,r,h,d){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var T=d.value;a.payload=function(){return v(T)},a.callback=function(){Fy(r,h,d)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){Fy(r,h,d),typeof v!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function gi(a,r,h,d,v){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=h.alternate,r!==null&&$r(r,h,v,!0),h=Ls.current,h!==null){switch(h.tag){case 31:case 13:return _s===null?eh():h.alternate===null&&Pn===0&&(Pn=3),h.flags&=-257,h.flags|=65536,h.lanes=v,d===Qd?h.flags|=16384:(r=h.updateQueue,r===null?h.updateQueue=new Set([d]):r.add(d),Vf(a,d,v)),!1;case 22:return h.flags|=65536,d===Qd?h.flags|=16384:(r=h.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=r):(h=r.retryQueue,h===null?r.retryQueue=new Set([d]):h.add(d)),Vf(a,d,v)),!1}throw Error(i(435,h.tag))}return Vf(a,d,v),eh(),!1}if(Ie)return r=Ls.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==Uc&&(a=Error(i(422),{cause:d}),Jr(sa(a,h)))):(d!==Uc&&(r=Error(i(423),{cause:d}),Jr(sa(r,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=sa(d,h),v=kg(a.stateNode,d,v),Zt(a,v),Pn!==4&&(Pn=2)),!1;var T=Error(i(520),{cause:d});if(T=sa(T,h),Mu===null?Mu=[T]:Mu.push(T),Pn!==4&&(Pn=2),r===null)return!0;d=sa(d,h),h=r;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=kg(h.stateNode,d,a),Zt(h,a),!1;case 1:if(r=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ni===null||!ni.has(T))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Lg(v),jy(v,a,h,d),Zt(h,v),!1}h=h.return}while(h!==null);return!1}var um=Error(i(461)),ui=!1;function Di(a,r,h,d){r.child=a===null?Wd(r,null,h,d):Mo(r,a.child,h,d)}function Ug(a,r,h,d,v){h=h.render;var T=r.ref;if("ref"in d){var C={};for(var O in d)O!=="ref"&&(C[O]=d[O])}else C=d;return vl(r),d=tm(a,r,h,C,T,v),O=fg(),a!==null&&!ui?(dg(a,r,v),ti(a,r,v)):(Ie&&O&&Qr(r),r.flags|=1,Di(a,r,d,v),r.child)}function Ru(a,r,h,d,v){if(a===null){var T=h.type;return typeof T=="function"&&!Ud(T)&&T.defaultProps===void 0&&h.compare===null?(r.tag=15,r.type=T,cm(a,r,T,d,v)):(a=Kr(h.type,null,d,r,r.mode,v),a.ref=r.ref,a.return=r,r.child=a)}if(T=a.child,!gm(a,v)){var C=T.memoizedProps;if(h=h.compare,h=h!==null?h:Dc,h(C,d)&&a.ref===r.ref)return ti(a,r,v)}return r.flags|=1,a=Ps(T,d),a.ref=r.ref,a.return=r,r.child=a}function cm(a,r,h,d,v){if(a!==null){var T=a.memoizedProps;if(Dc(T,d)&&a.ref===r.ref)if(ui=!1,r.pendingProps=d=T,gm(a,v))(a.flags&131072)!==0&&(ui=!0);else return r.lanes=a.lanes,ti(a,r,v)}return Xc(a,r,h,d,v)}function Cu(a,r,h,d){var v=d.children,T=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,a!==null){for(d=r.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~T}else d=0,r.child=null;return zs(a,r,T,h,d)}if((h&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&mf(r,T!==null?T.cachePool:null),T!==null?uy(r,T):lg(),cy(r);else return d=r.lanes=536870912,zs(a,r,T!==null?T.baseLanes|h:h,h,d)}else T!==null?(mf(r,T.cachePool),uy(r,T),Us(),r.memoizedState=null):(a!==null&&mf(r,null),lg(),Us());return Di(a,r,v,h),r.child}function eo(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function zs(a,r,h,d,v){var T=Yd();return T=T===null?null:{parent:li._currentValue,pool:T},r.memoizedState={baseLanes:h,cachePool:T},a!==null&&mf(r,null),lg(),cy(r),a!==null&&$r(a,r,d,!0),r.childLanes=v,null}function hm(a,r){return r=pm({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function Ky(a,r,h){return Mo(r,a.child,null,h),a=hm(r,r.pendingProps),a.flags|=2,Zn(r),r.memoizedState=null,a}function fm(a,r,h){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(Ie){if(d.mode==="hidden")return a=hm(r,d),r.lanes=536870912,eo(null,a);if(ug(r),(a=un)?(a=D4(a,aa),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:No!==null?{id:On,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},h=Vc(a),h.return=r,r.child=h,qn=r,un=null)):a=null,a===null)throw Xr(r);return r.lanes=536870912,null}return hm(r,d)}var T=a.memoizedState;if(T!==null){var C=T.dehydrated;if(ug(r),v)if(r.flags&256)r.flags&=-257,r=Ky(a,r,h);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(i(558));else if(ui||$r(a,r,h,!1),v=(h&a.childLanes)!==0,ui||v){if(d=re,d!==null&&(C=dc(d,h),C!==0&&C!==T.retryLane))throw T.retryLane=C,ps(a,C),_e(d,a,C),um;eh(),r=Ky(a,r,h)}else a=T.treeContext,un=co(C.nextSibling),qn=r,Ie=!0,Do=null,aa=!1,a!==null&&qd(r,a),r=hm(r,d),r.flags|=4096;return r}return a=Ps(a.child,{mode:d.mode,children:d.children}),a.ref=r.ref,r.child=a,a.return=r,a}function Iu(a,r){var h=r.ref;if(h===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(r.flags|=4194816)}}function Xc(a,r,h,d,v){return vl(r),h=tm(a,r,h,d,void 0,v),d=fg(),a!==null&&!ui?(dg(a,r,v),ti(a,r,v)):(Ie&&d&&Qr(r),r.flags|=1,Di(a,r,h,v),r.child)}function Af(a,r,h,d,v,T){return vl(r),r.updateQueue=null,h=Au(r,d,h,v),hy(a),d=fg(),a!==null&&!ui?(dg(a,r,T),ti(a,r,T)):(Ie&&d&&Qr(r),r.flags|=1,Di(a,r,h,T),r.child)}function dm(a,r,h,d,v){if(vl(r),r.stateNode===null){var T=dl,C=h.contextType;typeof C=="object"&&C!==null&&(T=ae(C)),T=new h(d,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=bf,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=d,T.state=r.memoizedState,T.refs={},_f(r),C=h.contextType,T.context=typeof C=="object"&&C!==null?ae(C):dl,T.state=r.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(om(r,h,C,d),T.state=r.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&bf.enqueueReplaceState(T,T.state,null),Hc(r,d,T,v),yf(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){T=r.stateNode;var O=r.memoizedProps,Y=wl(h,O);T.props=Y;var at=T.context,gt=h.contextType;C=dl,typeof gt=="object"&&gt!==null&&(C=ae(gt));var yt=h.getDerivedStateFromProps;gt=typeof yt=="function"||typeof T.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,gt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O||at!==C)&&Mg(r,T,d,C),gs=!1;var lt=r.memoizedState;T.state=lt,Hc(r,d,T,v),yf(),at=r.memoizedState,O||lt!==at||gs?(typeof yt=="function"&&(om(r,h,yt,d),at=r.memoizedState),(Y=gs||Og(r,h,Y,d,lt,at,C))?(gt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=at),T.props=d,T.state=at,T.context=C,d=Y):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{T=r.stateNode,rg(a,r),C=r.memoizedProps,gt=wl(h,C),T.props=gt,yt=r.pendingProps,lt=T.context,at=h.contextType,Y=dl,typeof at=="object"&&at!==null&&(Y=ae(at)),O=h.getDerivedStateFromProps,(at=typeof O=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==yt||lt!==Y)&&Mg(r,T,d,Y),gs=!1,lt=r.memoizedState,T.state=lt,Hc(r,d,T,v),yf();var mt=r.memoizedState;C!==yt||lt!==mt||gs||a!==null&&a.dependencies!==null&&df(a.dependencies)?(typeof O=="function"&&(om(r,h,O,d),mt=r.memoizedState),(gt=gs||Og(r,h,gt,d,lt,mt,Y)||a!==null&&a.dependencies!==null&&df(a.dependencies))?(at||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,mt,Y),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,mt,Y)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=mt),T.props=d,T.state=mt,T.context=Y,d=gt):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=1024),d=!1)}return T=d,Iu(a,r),d=(r.flags&128)!==0,T||d?(T=r.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,a!==null&&d?(r.child=Mo(r,a.child,null,v),r.child=Mo(r,null,h,v)):Di(a,r,h,v),r.memoizedState=T.state,a=r.child):a=ti(a,r,v),a}function Yy(a,r,h,d){return _l(),r.flags|=256,Di(a,r,h,d),r.child}var zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ns(a){return{baseLanes:a,cachePool:ag()}}function mm(a,r,h){return a=a!==null?a.childLanes&~h:0,r&&(a|=Ts),a}function Qy(a,r,h){var d=r.pendingProps,v=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=a!==null&&a.memoizedState===null?!1:(Ne.current&2)!==0),C&&(v=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,a===null){if(Ie){if(v?Vo(r):Us(),(a=un)?(a=D4(a,aa),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:No!==null?{id:On,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},h=Vc(a),h.return=r,r.child=h,qn=r,un=null)):a=null,a===null)throw Xr(r);return X2(a)?r.lanes=32:r.lanes=536870912,null}var O=d.children;return d=d.fallback,v?(Us(),v=r.mode,O=pm({mode:"hidden",children:O},v),d=ml(d,v,h,null),O.return=r,d.return=r,O.sibling=d,r.child=O,d=r.child,d.memoizedState=ns(h),d.childLanes=mm(a,C,h),r.memoizedState=zg,eo(null,d)):(Vo(r),wf(r,O))}var Y=a.memoizedState;if(Y!==null&&(O=Y.dehydrated,O!==null)){if(T)r.flags&256?(Vo(r),r.flags&=-257,r=Bg(a,r,h)):r.memoizedState!==null?(Us(),r.child=a.child,r.flags|=128,r=null):(Us(),O=d.fallback,v=r.mode,d=pm({mode:"visible",children:d.children},v),O=ml(O,v,h,null),O.flags|=2,d.return=r,O.return=r,d.sibling=O,r.child=d,Mo(r,a.child,null,h),d=r.child,d.memoizedState=ns(h),d.childLanes=mm(a,C,h),r.memoizedState=zg,r=eo(null,d));else if(Vo(r),X2(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var at=C.dgst;C=at,d=Error(i(419)),d.stack="",d.digest=C,Jr({value:d,source:null,stack:null}),r=Bg(a,r,h)}else if(ui||$r(a,r,h,!1),C=(h&a.childLanes)!==0,ui||C){if(C=re,C!==null&&(d=dc(C,h),d!==0&&d!==Y.retryLane))throw Y.retryLane=d,ps(a,d),_e(C,a,d),um;Q2(O)||eh(),r=Bg(a,r,h)}else Q2(O)?(r.flags|=192,r.child=a.child,r=null):(a=Y.treeContext,un=co(O.nextSibling),qn=r,Ie=!0,Do=null,aa=!1,a!==null&&qd(r,a),r=wf(r,d.children),r.flags|=4096);return r}return v?(Us(),O=d.fallback,v=r.mode,Y=a.child,at=Y.sibling,d=Ps(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,at!==null?O=Ps(at,O):(O=ml(O,v,h,null),O.flags|=2),O.return=r,d.return=r,d.sibling=O,r.child=d,eo(null,d),d=r.child,O=a.child.memoizedState,O===null?O=ns(h):(v=O.cachePool,v!==null?(Y=li._currentValue,v=v.parent!==Y?{parent:Y,pool:Y}:v):v=ag(),O={baseLanes:O.baseLanes|h,cachePool:v}),d.memoizedState=O,d.childLanes=mm(a,C,h),r.memoizedState=zg,eo(a.child,d)):(Vo(r),h=a.child,a=h.sibling,h=Ps(h,{mode:"visible",children:d.children}),h.return=r,h.sibling=null,a!==null&&(C=r.deletions,C===null?(r.deletions=[a],r.flags|=16):C.push(a)),r.child=h,r.memoizedState=null,h)}function wf(a,r){return r=pm({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function pm(a,r){return a=xn(22,a,null,r),a.lanes=0,a}function Bg(a,r,h){return Mo(r,a.child,null,h),a=wf(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function Xy(a,r,h){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),Fd(a.return,r,h)}function Nu(a,r,h,d,v,T){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:v,treeForkCount:T}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=h,C.tailMode=v,C.treeForkCount=T)}function Bs(a,r,h){var d=r.pendingProps,v=d.revealOrder,T=d.tail;d=d.children;var C=Ne.current,O=(C&2)!==0;if(O?(C=C&1|2,r.flags|=128):C&=1,Ct(Ne,C),Di(a,r,d,h),d=Ie?Lc:0,!O&&a!==null&&(a.flags&128)!==0)t:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Xy(a,h,r);else if(a.tag===19)Xy(a,h,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(h=r.child,v=null;h!==null;)a=h.alternate,a!==null&&oa(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),Nu(r,!1,v,h,T,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(a=v.alternate,a!==null&&oa(a)===null){r.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}Nu(r,!0,h,null,T,d);break;case"together":Nu(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function ti(a,r,h){if(a!==null&&(r.dependencies=a.dependencies),oo|=r.lanes,(h&r.childLanes)===0)if(a!==null){if($r(a,r,h,!1),(h&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,h=Ps(a,a.pendingProps),r.child=h,h.return=r;a.sibling!==null;)a=a.sibling,h=h.sibling=Ps(a,a.pendingProps),h.return=r;h.sibling=null}return r.child}function gm(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&df(a)))}function k2(a,r,h){switch(r.tag){case 3:gn(r,r.stateNode.containerInfo),xo(r,li,a.memoizedState.cache),_l();break;case 27:case 5:Cr(r);break;case 4:gn(r,r.stateNode.containerInfo);break;case 10:xo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ug(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Vo(r),r.flags|=128,null):(h&r.child.childLanes)!==0?Qy(a,r,h):(Vo(r),a=ti(a,r,h),a!==null?a.sibling:null);Vo(r);break;case 19:var v=(a.flags&128)!==0;if(d=(h&r.childLanes)!==0,d||($r(a,r,h,!1),d=(h&r.childLanes)!==0),v){if(d)return Bs(a,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ct(Ne,Ne.current),d)break;return null;case 22:return r.lanes=0,Cu(a,r,h,r.pendingProps);case 24:xo(r,li,a.memoizedState.cache)}return ti(a,r,h)}function _m(a,r,h){if(a!==null)if(a.memoizedProps!==r.pendingProps)ui=!0;else{if(!gm(a,h)&&(r.flags&128)===0)return ui=!1,k2(a,r,h);ui=(a.flags&131072)!==0}else ui=!1,Ie&&(r.flags&1048576)!==0&&ny(r,Lc,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(a=yu(r.elementType),r.type=a,typeof a=="function")Ud(a)?(d=wl(a,d),r.tag=1,r=dm(null,r,a,d,h)):(r.tag=0,r=Xc(null,r,a,d,h));else{if(a!=null){var v=a.$$typeof;if(v===Z){r.tag=11,r=Ug(null,r,a,d,h);break t}else if(v===V){r.tag=14,r=Ru(null,r,a,d,h);break t}}throw r=Ft(a)||a,Error(i(306,r,""))}}return r;case 0:return Xc(a,r,r.type,r.pendingProps,h);case 1:return d=r.type,v=wl(d,r.pendingProps),dm(a,r,d,v,h);case 3:t:{if(gn(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var T=r.memoizedState;v=T.element,rg(a,r),Hc(r,d,null,h);var C=r.memoizedState;if(d=C.cache,xo(r,li,d),d!==T.cache&&jd(r,[li],h,!0),yf(),d=C.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=Yy(a,r,d,h);break t}else if(d!==v){v=sa(Error(i(424)),r),Jr(v),r=Yy(a,r,d,h);break t}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,un=co(a.firstChild),qn=r,Ie=!0,Do=null,aa=!0,h=Wd(r,null,d,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(_l(),d===v){r=ti(a,r,h);break t}Di(a,r,d,h)}r=r.child}return r;case 26:return Iu(a,r),a===null?(h=k4(r.type,null,r.pendingProps,null))?r.memoizedState=h:Ie||(h=r.type,a=r.pendingProps,d=$y(se.current).createElement(h),d[Dn]=r,d[oi]=a,bs(d,h,a),Bn(d),r.stateNode=d):r.memoizedState=k4(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return Cr(r),a===null&&Ie&&(d=r.stateNode=M4(r.type,r.pendingProps,se.current),qn=r,aa=!0,v=un,ah(r.type)?(J2=v,un=co(d.firstChild)):un=v),Di(a,r,r.pendingProps.children,h),Iu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&Ie&&((v=d=un)&&(d=KI(d,r.type,r.pendingProps,aa),d!==null?(r.stateNode=d,qn=r,un=co(d.firstChild),aa=!1,v=!0):v=!1),v||Xr(r)),Cr(r),v=r.type,T=r.pendingProps,C=a!==null?a.memoizedProps:null,d=T.children,j2(v,T)?d=null:C!==null&&j2(v,C)&&(r.flags|=32),r.memoizedState!==null&&(v=tm(a,r,wu,null,null,h),Wg._currentValue=v),Iu(a,r),Di(a,r,d,h),r.child;case 6:return a===null&&Ie&&((a=h=un)&&(h=YI(h,r.pendingProps,aa),h!==null?(r.stateNode=h,qn=r,un=null,a=!0):a=!1),a||Xr(r)),null;case 13:return Qy(a,r,h);case 4:return gn(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=Mo(r,null,d,h):Di(a,r,d,h),r.child;case 11:return Ug(a,r,r.type,r.pendingProps,h);case 7:return Di(a,r,r.pendingProps,h),r.child;case 8:return Di(a,r,r.pendingProps.children,h),r.child;case 12:return Di(a,r,r.pendingProps.children,h),r.child;case 10:return d=r.pendingProps,xo(r,r.type,d.value),Di(a,r,d.children,h),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,vl(r),v=ae(v),d=d(v),r.flags|=1,Di(a,r,d,h),r.child;case 14:return Ru(a,r,r.type,r.pendingProps,h);case 15:return cm(a,r,r.type,r.pendingProps,h);case 19:return Bs(a,r,h);case 31:return fm(a,r,h);case 22:return Cu(a,r,h,r.pendingProps);case 24:return vl(r),d=ae(li),a===null?(v=Yd(),v===null&&(v=re,T=eg(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=h),v=T),r.memoizedState={parent:d,cache:v},_f(r),xo(r,li,v)):((a.lanes&h)!==0&&(rg(a,r),Hc(r,null,null,h),yf()),v=a.memoizedState,T=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),xo(r,li,d)):(d=T.cache,xo(r,li,d),d!==v.cache&&jd(r,[li],h,!0))),Di(a,r,r.pendingProps.children,h),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function no(a){a.flags|=4}function Rf(a,r,h,d,v){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(kn())a.flags|=8192;else throw to=Qd,pf}else a.flags&=-16777217}function Gg(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!G4(r))if(kn())a.flags|=8192;else throw to=Qd,pf}function Lo(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Dr():536870912,a.lanes|=r,mn|=r)}function io(a,r){if(!Ie)switch(a.tailMode){case"hidden":r=a.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function tn(a){var r=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(r)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=h,r}function Cf(a,r,h){var d=r.pendingProps;switch(Gd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(r),null;case 1:return tn(r),null;case 3:return h=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Zr(li),De(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(zc(r)?no(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hd())),tn(r),null;case 26:var v=r.type,T=r.memoizedState;return a===null?(no(r),T!==null?(tn(r),Gg(r,T)):(tn(r),Rf(r,v,null,d,h))):T?T!==a.memoizedState?(no(r),tn(r),Gg(r,T)):(tn(r),r.flags&=-16777217):(a=a.memoizedProps,a!==d&&no(r),tn(r),Rf(r,v,a,d,h)),null;case 27:if(Ir(r),h=se.current,v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&no(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return tn(r),null}a=zt.current,zc(r)?iy(r):(a=M4(v,d,h),r.stateNode=a,no(r))}return tn(r),null;case 5:if(Ir(r),v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&no(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return tn(r),null}if(T=zt.current,zc(r))iy(r);else{var C=$y(se.current);switch(T){case 1:T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=C.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?C.createElement(v,{is:d.is}):C.createElement(v)}}T[Dn]=r,T[oi]=d;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)T.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=T;t:switch(bs(T,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&no(r)}}return tn(r),Rf(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,h),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&no(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=se.current,zc(r)){if(a=r.stateNode,h=r.memoizedProps,d=null,v=qn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[Dn]=r,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||S4(a.nodeValue,h)),a||Xr(r,!0)}else a=$y(a).createTextNode(d),a[Dn]=r,r.stateNode=a}return tn(r),null;case 31:if(h=r.memoizedState,a===null||a.memoizedState!==null){if(d=zc(r),h!==null){if(a===null){if(!d)throw Error(i(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[Dn]=r}else _l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),a=!1}else h=Hd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return r.flags&256?(Zn(r),r):(Zn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return tn(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=zc(r),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Dn]=r}else _l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),v=!1}else v=Hd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Zn(r),r):(Zn(r),null)}return Zn(r),(r.flags&128)!==0?(r.lanes=h,r):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==v&&(d.flags|=2048)),h!==a&&h&&(r.child.flags|=8192),Lo(r,r.updateQueue),tn(r),null);case 4:return De(),a===null&&B2(r.stateNode.containerInfo),tn(r),null;case 10:return Zr(r.type),tn(r),null;case 19:if(ct(Ne),d=r.memoizedState,d===null)return tn(r),null;if(v=(r.flags&128)!==0,T=d.rendering,T===null)if(v)io(d,!1);else{if(Pn!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(T=oa(a),T!==null){for(r.flags|=128,io(d,!1),a=T.updateQueue,r.updateQueue=a,Lo(r,a),r.subtreeFlags=0,a=h,h=r.child;h!==null;)Pc(h,a),h=h.sibling;return Ct(Ne,Ne.current&1|2),Ie&&Yr(r,d.treeForkCount),r.child}a=a.sibling}d.tail!==null&&In()>ei&&(r.flags|=128,v=!0,io(d,!1),r.lanes=4194304)}else{if(!v)if(a=oa(T),a!==null){if(r.flags|=128,v=!0,a=a.updateQueue,r.updateQueue=a,Lo(r,a),io(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!Ie)return tn(r),null}else 2*In()-d.renderingStartTime>ei&&h!==536870912&&(r.flags|=128,v=!0,io(d,!1),r.lanes=4194304);d.isBackwards?(T.sibling=r.child,r.child=T):(a=d.last,a!==null?a.sibling=T:r.child=T,d.last=T)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=In(),a.sibling=null,h=Ne.current,Ct(Ne,v?h&1|2:h&1),Ie&&Yr(r,d.treeForkCount),a):(tn(r),null);case 22:case 23:return Zn(r),vf(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(h&536870912)!==0&&(r.flags&128)===0&&(tn(r),r.subtreeFlags&6&&(r.flags|=8192)):tn(r),h=r.updateQueue,h!==null&&Lo(r,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048),a!==null&&ct(El),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Zr(li),tn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Ba(a,r){switch(Gd(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return Zr(li),De(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return Ir(r),null;case 31:if(r.memoizedState!==null){if(Zn(r),r.alternate===null)throw Error(i(340));_l()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(Zn(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));_l()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return ct(Ne),null;case 4:return De(),null;case 10:return Zr(r.type),null;case 22:case 23:return Zn(r),vf(),a!==null&&ct(El),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return Zr(li),null;case 25:return null;default:return null}}function la(a,r){switch(Gd(r),r.tag){case 3:Zr(li),De();break;case 26:case 27:case 5:Ir(r);break;case 4:De();break;case 31:r.memoizedState!==null&&Zn(r);break;case 13:Zn(r);break;case 19:ct(Ne);break;case 10:Zr(r.type);break;case 22:case 23:Zn(r),vf(),a!==null&&ct(El);break;case 24:Zr(li)}}function Ga(a,r){try{var h=r.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var v=d.next;h=v;do{if((h.tag&a)===a){d=void 0;var T=h.create,C=h.inst;d=T(),C.destroy=d}h=h.next}while(h!==v)}}catch(O){Be(r,r.return,O)}}function Fi(a,r,h){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var T=v.next;d=T;do{if((d.tag&a)===a){var C=d.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,v=r;var Y=h,at=O;try{at()}catch(gt){Be(v,Y,gt)}}}d=d.next}while(d!==T)}}catch(gt){Be(r,r.return,gt)}}function gr(a){var r=a.updateQueue;if(r!==null){var h=a.stateNode;try{ly(r,h)}catch(d){Be(a,a.return,d)}}}function xi(a,r,h){h.props=wl(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){Be(a,r,d)}}function Uo(a,r){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(v){Be(a,r,v)}}function ji(a,r){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(v){Be(a,r,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){Be(a,r,v)}else h.current=null}function If(a){var r=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(v){Be(a,a.return,v)}}function _i(a,r,h){try{var d=a.stateNode;BI(d,a.type,h,r),d[oi]=r}catch(v){Be(a,a.return,v)}}function En(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ah(a.type)||a.tag===4}function Re(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||En(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ah(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function so(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,r):(r=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,r.appendChild(a),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=lr));else if(d!==4&&(d===27&&ah(a.type)&&(h=a.stateNode,r=null),a=a.child,a!==null))for(so(a,r,h),a=a.sibling;a!==null;)so(a,r,h),a=a.sibling}function ys(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?h.insertBefore(a,r):h.appendChild(a);else if(d!==4&&(d===27&&ah(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(ys(a,r,h),a=a.sibling;a!==null;)ys(a,r,h),a=a.sibling}function ym(a){var r=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);bs(r,d,h),r[Dn]=a,r[oi]=h}catch(T){Be(a,a.return,T)}}var qa=!1,cn=!1,_r=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,Oi=null;function L2(a,r){if(a=a.containerInfo,H2=r1,a=Z_(a),Jp(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var v=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break t}var C=0,O=-1,Y=-1,at=0,gt=0,yt=a,lt=null;e:for(;;){for(var mt;yt!==h||v!==0&&yt.nodeType!==3||(O=C+v),yt!==T||d!==0&&yt.nodeType!==3||(Y=C+d),yt.nodeType===3&&(C+=yt.nodeValue.length),(mt=yt.firstChild)!==null;)lt=yt,yt=mt;for(;;){if(yt===a)break e;if(lt===h&&++at===v&&(O=C),lt===T&&++gt===d&&(Y=C),(mt=yt.nextSibling)!==null)break;yt=lt,lt=yt.parentNode}yt=mt}h=O===-1||Y===-1?null:{start:O,end:Y}}else h=null}h=h||{start:0,end:0}}else h=null;for(F2={focusedElem:a,selectionRange:h},r1=!1,Oi=r;Oi!==null;)if(r=Oi,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Oi=a;else for(;Oi!==null;){switch(r=Oi,T=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)v=a[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,h=r,v=T.memoizedProps,T=T.memoizedState,d=h.stateNode;try{var jt=wl(h.type,v);a=d.getSnapshotBeforeUpdate(jt,T),d.__reactInternalSnapshotBeforeUpdate=a}catch(ie){Be(h,h.return,ie)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,h=a.nodeType,h===9)Y2(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Y2(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Oi=a;break}Oi=r.return}}function Tn(a,r,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:ja(a,h),d&4&&Ga(5,h);break;case 1:if(ja(a,h),d&4)if(a=h.stateNode,r===null)try{a.componentDidMount()}catch(C){Be(h,h.return,C)}else{var v=wl(h.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(v,r,a.__reactInternalSnapshotBeforeUpdate)}catch(C){Be(h,h.return,C)}}d&64&&gr(h),d&512&&Uo(h,h.return);break;case 3:if(ja(a,h),d&64&&(a=h.updateQueue,a!==null)){if(r=null,h.child!==null)switch(h.child.tag){case 27:case 5:r=h.child.stateNode;break;case 1:r=h.child.stateNode}try{ly(a,r)}catch(C){Be(h,h.return,C)}}break;case 27:r===null&&d&4&&ym(h);case 26:case 5:ja(a,h),r===null&&d&4&&If(h),d&512&&Uo(h,h.return);break;case 12:ja(a,h);break;case 31:ja(a,h),d&4&&Rl(a,h);break;case 13:ja(a,h),d&4&&Jc(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=p.bind(null,h),QI(a,h))));break;case 22:if(d=h.memoizedState!==null||qa,!d){r=r!==null&&r.memoizedState!==null||cn,v=qa;var T=cn;qa=d,(cn=r)&&!T?vs(a,h,(h.subtreeFlags&8772)!==0):ja(a,h),qa=v,cn=T}break;case 30:break;default:ja(a,h)}}function Nf(a){var r=a.alternate;r!==null&&(a.alternate=null,Nf(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&Mr(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Xe=null,is=!1;function Ha(a,r,h){for(h=h.child;h!==null;)vm(a,r,h),h=h.sibling}function vm(a,r,h){if(Ai&&typeof Ai.onCommitFiberUnmount=="function")try{Ai.onCommitFiberUnmount(Ta,h)}catch{}switch(h.tag){case 26:cn||ji(h,r),Ha(a,r,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:cn||ji(h,r);var d=Xe,v=is;ah(h.type)&&(Xe=h.stateNode,is=!1),Ha(a,r,h),Qg(h.stateNode),Xe=d,is=v;break;case 5:cn||ji(h,r);case 6:if(d=Xe,v=is,Xe=null,Ha(a,r,h),Xe=d,is=v,Xe!==null)if(is)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(h.stateNode)}catch(T){Be(h,r,T)}else try{Xe.removeChild(h.stateNode)}catch(T){Be(h,r,T)}break;case 18:Xe!==null&&(is?(a=Xe,I4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Cm(a)):I4(Xe,h.stateNode));break;case 4:d=Xe,v=is,Xe=h.stateNode.containerInfo,is=!0,Ha(a,r,h),Xe=d,is=v;break;case 0:case 11:case 14:case 15:Fi(2,h,r),cn||Fi(4,h,r),Ha(a,r,h);break;case 1:cn||(ji(h,r),d=h.stateNode,typeof d.componentWillUnmount=="function"&&xi(h,r,d)),Ha(a,r,h);break;case 21:Ha(a,r,h);break;case 22:cn=(d=cn)||h.memoizedState!==null,Ha(a,r,h),cn=d;break;default:Ha(a,r,h)}}function Rl(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Cm(a)}catch(h){Be(r,r.return,h)}}}function Jc(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Cm(a)}catch(h){Be(r,r.return,h)}}function qg(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new Jy),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new Jy),r;default:throw Error(i(435,a.tag))}}function zo(a,r){var h=qg(a);r.forEach(function(d){if(!h.has(d)){h.add(d);var v=y.bind(null,a,d);d.then(v,v)}})}function yi(a,r){var h=r.deletions;if(h!==null)for(var d=0;d<h.length;d++){var v=h[d],T=a,C=r,O=C;t:for(;O!==null;){switch(O.tag){case 27:if(ah(O.type)){Xe=O.stateNode,is=!1;break t}break;case 5:Xe=O.stateNode,is=!1;break t;case 3:case 4:Xe=O.stateNode.containerInfo,is=!0;break t}O=O.return}if(Xe===null)throw Error(i(160));vm(T,C,v),Xe=null,is=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Cl(r,a),r=r.sibling}var Fa=null;function Cl(a,r){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:yi(r,a),vi(a),d&4&&(Fi(3,a,a.return),Ga(3,a),Fi(5,a,a.return));break;case 1:yi(r,a),vi(a),d&512&&(cn||h===null||ji(h,h.return)),d&64&&qa&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var v=Fa;if(yi(r,a),vi(a),d&512&&(cn||h===null||ji(h,h.return)),d&4){var T=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":T=v.getElementsByTagName("title")[0],(!T||T[Ds]||T[Dn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(d),v.head.insertBefore(T,v.querySelector("head > title"))),bs(T,d,h),T[Dn]=a,Bn(T),d=T;break t;case"link":var C=z4("link","href",v).get(d+(h.href||""));if(C){for(var O=0;O<C.length;O++)if(T=C[O],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(O,1);break e}}T=v.createElement(d),bs(T,d,h),v.head.appendChild(T);break;case"meta":if(C=z4("meta","content",v).get(d+(h.content||""))){for(O=0;O<C.length;O++)if(T=C[O],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(O,1);break e}}T=v.createElement(d),bs(T,d,h),v.head.appendChild(T);break;default:throw Error(i(468,d))}T[Dn]=a,Bn(T),d=T}a.stateNode=d}else B4(v,a.type,a.stateNode);else a.stateNode=U4(v,d,a.memoizedProps);else T!==d?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,d===null?B4(v,a.type,a.stateNode):U4(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&_i(a,a.memoizedProps,h.memoizedProps)}break;case 27:yi(r,a),vi(a),d&512&&(cn||h===null||ji(h,h.return)),h!==null&&d&4&&_i(a,a.memoizedProps,h.memoizedProps);break;case 5:if(yi(r,a),vi(a),d&512&&(cn||h===null||ji(h,h.return)),a.flags&32){v=a.stateNode;try{hs(v,"")}catch(jt){Be(a,a.return,jt)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,_i(a,v,h!==null?h.memoizedProps:v)),d&1024&&(_r=!0);break;case 6:if(yi(r,a),vi(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(jt){Be(a,a.return,jt)}}break;case 3:if(n1=null,v=Fa,Fa=t1(r.containerInfo),yi(r,a),Fa=v,vi(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Cm(r.containerInfo)}catch(jt){Be(a,a.return,jt)}_r&&(_r=!1,Em(a));break;case 4:d=Fa,Fa=t1(a.stateNode.containerInfo),yi(r,a),vi(a),Fa=d;break;case 12:yi(r,a),vi(a);break;case 31:yi(r,a),vi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,zo(a,d)));break;case 13:yi(r,a),vi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Wc=In()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,zo(a,d)));break;case 22:v=a.memoizedState!==null;var Y=h!==null&&h.memoizedState!==null,at=qa,gt=cn;if(qa=at||v,cn=gt||Y,yi(r,a),cn=gt,qa=at,vi(a),d&8192)t:for(r=a.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(h===null||Y||qa||cn||ao(a)),h=null,r=a;;){if(r.tag===5||r.tag===26){if(h===null){Y=h=r;try{if(T=Y.stateNode,v)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=Y.stateNode;var yt=Y.memoizedProps.style,lt=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;O.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(jt){Be(Y,Y.return,jt)}}}else if(r.tag===6){if(h===null){Y=r;try{Y.stateNode.nodeValue=v?"":Y.memoizedProps}catch(jt){Be(Y,Y.return,jt)}}}else if(r.tag===18){if(h===null){Y=r;try{var mt=Y.stateNode;v?N4(mt,!0):N4(Y.stateNode,!1)}catch(jt){Be(Y,Y.return,jt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;h===r&&(h=null),r=r.return}h===r&&(h=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,zo(a,h))));break;case 19:yi(r,a),vi(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,zo(a,d)));break;case 30:break;case 21:break;default:yi(r,a),vi(a)}}function vi(a){var r=a.flags;if(r&2){try{for(var h,d=a.return;d!==null;){if(En(d)){h=d;break}d=d.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,T=Re(a);ys(a,T,v);break;case 5:var C=h.stateNode;h.flags&32&&(hs(C,""),h.flags&=-33);var O=Re(a);ys(a,O,C);break;case 3:case 4:var Y=h.stateNode.containerInfo,at=Re(a);so(a,at,Y);break;default:throw Error(i(161))}}catch(gt){Be(a,a.return,gt)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Em(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Em(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function ja(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Tn(a,r.alternate,r),r=r.sibling}function ao(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Fi(4,r,r.return),ao(r);break;case 1:ji(r,r.return);var h=r.stateNode;typeof h.componentWillUnmount=="function"&&xi(r,r.return,h),ao(r);break;case 27:Qg(r.stateNode);case 26:case 5:ji(r,r.return),ao(r);break;case 22:r.memoizedState===null&&ao(r);break;case 30:ao(r);break;default:ao(r)}a=a.sibling}}function vs(a,r,h){for(h=h&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=a,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:vs(v,T,h),Ga(4,T);break;case 1:if(vs(v,T,h),d=T,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(at){Be(d,d.return,at)}if(d=T,v=d.updateQueue,v!==null){var O=d.stateNode;try{var Y=v.shared.hiddenCallbacks;if(Y!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Y.length;v++)Fc(Y[v],O)}catch(at){Be(d,d.return,at)}}h&&C&64&&gr(T),Uo(T,T.return);break;case 27:ym(T);case 26:case 5:vs(v,T,h),h&&d===null&&C&4&&If(T),Uo(T,T.return);break;case 12:vs(v,T,h);break;case 31:vs(v,T,h),h&&C&4&&Rl(v,T);break;case 13:vs(v,T,h),h&&C&4&&Jc(v,T);break;case 22:T.memoizedState===null&&vs(v,T,h),Uo(T,T.return);break;case 30:break;default:vs(v,T,h)}r=r.sibling}}function Il(a,r){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&gu(h))}function Du(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&gu(a))}function Ki(a,r,h,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Hg(a,r,h,d),r=r.sibling}function Hg(a,r,h,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Ki(a,r,h,d),v&2048&&Ga(9,r);break;case 1:Ki(a,r,h,d);break;case 3:Ki(a,r,h,d),v&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&gu(a)));break;case 12:if(v&2048){Ki(a,r,h,d),a=r.stateNode;try{var T=r.memoizedProps,C=T.id,O=T.onPostCommit;typeof O=="function"&&O(C,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Y){Be(r,r.return,Y)}}else Ki(a,r,h,d);break;case 31:Ki(a,r,h,d);break;case 13:Ki(a,r,h,d);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?Ki(a,r,h,d):ro(a,r):T._visibility&2?Ki(a,r,h,d):(T._visibility|=2,Yi(a,r,h,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Il(C,r);break;case 24:Ki(a,r,h,d),v&2048&&Du(r.alternate,r);break;default:Ki(a,r,h,d)}}function Yi(a,r,h,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=a,C=r,O=h,Y=d,at=C.flags;switch(C.tag){case 0:case 11:case 15:Yi(T,C,O,Y,v),Ga(8,C);break;case 23:break;case 22:var gt=C.stateNode;C.memoizedState!==null?gt._visibility&2?Yi(T,C,O,Y,v):ro(T,C):(gt._visibility|=2,Yi(T,C,O,Y,v)),v&&at&2048&&Il(C.alternate,C);break;case 24:Yi(T,C,O,Y,v),v&&at&2048&&Du(C.alternate,C);break;default:Yi(T,C,O,Y,v)}r=r.sibling}}function ro(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var h=a,d=r,v=d.flags;switch(d.tag){case 22:ro(h,d),v&2048&&Il(d.alternate,d);break;case 24:ro(h,d),v&2048&&Du(d.alternate,d);break;default:ro(h,d)}r=r.sibling}}var xu=8192;function ua(a,r,h){if(a.subtreeFlags&xu)for(a=a.child;a!==null;)Tm(a,r,h),a=a.sibling}function Tm(a,r,h){switch(a.tag){case 26:ua(a,r,h),a.flags&xu&&a.memoizedState!==null&&r7(h,Fa,a.memoizedState,a.memoizedProps);break;case 5:ua(a,r,h);break;case 3:case 4:var d=Fa;Fa=t1(a.stateNode.containerInfo),ua(a,r,h),Fa=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=xu,xu=16777216,ua(a,r,h),xu=d):ua(a,r,h));break;default:ua(a,r,h)}}function Ou(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function Nl(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Oi=d,Hn(d,a)}Ou(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Gs(a),a=a.sibling}function Gs(a){switch(a.tag){case 0:case 11:case 15:Nl(a),a.flags&2048&&Fi(9,a,a.return);break;case 3:Nl(a);break;case 12:Nl(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Es(a)):Nl(a);break;default:Nl(a)}}function Es(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Oi=d,Hn(d,a)}Ou(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Fi(8,r,r.return),Es(r);break;case 22:h=r.stateNode,h._visibility&2&&(h._visibility&=-3,Es(r));break;default:Es(r)}a=a.sibling}}function Hn(a,r){for(;Oi!==null;){var h=Oi;switch(h.tag){case 0:case 11:case 15:Fi(8,h,r);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:gu(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Oi=d;else t:for(h=a;Oi!==null;){d=Oi;var v=d.sibling,T=d.return;if(Nf(d),d===h){Oi=null;break t}if(v!==null){v.return=T,Oi=v;break t}Oi=T}}}var Bo={getCacheForType:function(a){var r=ae(li),h=r.data.get(a);return h===void 0&&(h=a(),r.data.set(a,h)),h},cacheSignal:function(){return ae(li).controller.signal}},fe=typeof WeakMap=="function"?WeakMap:Map,Jt=0,re=null,ge=null,me=0,Oe=0,ss=null,Ka=!1,yr=!1,Fg=!1,ca=0,Pn=0,oo=0,Dl=0,Df=0,Ts=0,mn=0,Mu=null,Fn=null,jn=!1,Wc=0,jg=0,ei=1/0,Vn=null,ni=null,Je=0,ha=null,Zc=null,Ya=0,$c=0,th=null,xf=null,xl=0,Pu=null;function fa(){return(Jt&2)!==0&&me!==0?me&-me:W.T!==null?ht():mc()}function be(){if(Ts===0)if((me&536870912)===0||Ie){var a=Eo;Eo<<=1,(Eo&3932160)===0&&(Eo=262144),Ts=a}else Ts=536870912;return a=Ls.current,a!==null&&(a.flags|=32),Ts}function _e(a,r,h){(a===re&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)&&(Ml(a,0),ci(a,me,Ts,!1)),$o(a,h),((Jt&2)===0||a!==re)&&(a===re&&((Jt&2)===0&&(Dl|=h),Pn===4&&ci(a,me,Ts,!1)),wt(a))}function Ae(a,r,h){if((Jt&6)!==0)throw Error(i(327));var d=!h&&(r&127)===0&&(r&a.expiredLanes)===0||Sa(a,r),v=d?Of(a,r):Ss(a,r,!0),T=d;do{if(v===0){yr&&!d&&ci(a,r,0,!1);break}else{if(h=a.current.alternate,T&&!We(h)){v=Ss(a,r,!1),T=!1;continue}if(v===2){if(T=r,a.errorRecoveryDisabledLanes&T)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var O=a;v=Mu;var Y=O.current.memoizedState.isDehydrated;if(Y&&(Ml(O,C).flags|=256),C=Ss(O,C,!1),C!==2){if(Fg&&!Y){O.errorRecoveryDisabledLanes|=T,Dl|=T,v=4;break t}T=Fn,Fn=v,T!==null&&(Fn===null?Fn=T:Fn.push.apply(Fn,T))}v=C}if(T=!1,v!==2)continue}}if(v===1){Ml(a,0),ci(a,r,0,!0);break}t:{switch(d=a,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ci(d,r,Ts,!Ka);break t;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Wc+300-In(),10<v)){if(ci(d,r,Ts,!Ka),Zs(d,0,!0)!==0)break t;Ya=r,d.timeoutHandle=R4(Ce.bind(null,d,h,Fn,Vn,jn,r,Ts,Dl,mn,Ka,T,"Throttled",-0,0),v);break t}Ce(d,h,Fn,Vn,jn,r,Ts,Dl,mn,Ka,T,null,-0,0)}}break}while(!0);wt(a)}function Ce(a,r,h,d,v,T,C,O,Y,at,gt,yt,lt,mt){if(a.timeoutHandle=-1,yt=r.subtreeFlags,yt&8192||(yt&16785408)===16785408){yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},Tm(r,T,yt);var jt=(T&62914560)===T?Wc-In():(T&4194048)===T?jg-In():0;if(jt=o7(yt,jt),jt!==null){Ya=T,a.cancelPendingCommit=jt(qo.bind(null,a,r,T,h,d,v,C,O,Y,gt,yt,null,lt,mt)),ci(a,T,C,!at);return}}qo(a,r,T,h,d,v,C,O,Y)}function We(a){for(var r=a;;){var h=r.tag;if((h===0||h===11||h===15)&&r.flags&16384&&(h=r.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var v=h[d],T=v.getSnapshot;v=v.value;try{if(!ms(T(),v))return!1}catch{return!1}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ci(a,r,h,d){r&=~Df,r&=~Dl,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var v=r;0<v;){var T=31-Xn(v),C=1<<T;d[T]=-1,v&=~C}h!==0&&sr(a,h,r)}function vr(){return(Jt&6)===0?(Gt(0),!1):!0}function Ol(){if(ge!==null){if(Oe===0)var a=ge.return;else a=ge,Wr=yl=null,mg(a),Tu=null,Su=0,a=ge;for(;a!==null;)la(a.alternate,a),a=a.return;ge=null}}function Ml(a,r){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,HI(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Ya=0,Ol(),re=a,ge=h=Ps(a.current,null),me=r,Oe=0,ss=null,Ka=!1,yr=Sa(a,r),Fg=!1,mn=Ts=Df=Dl=oo=Pn=0,Fn=Mu=null,jn=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var v=31-Xn(d),T=1<<v;r|=a[v],d&=~T}return ca=r,hf(),h}function lo(a,r){he=null,W.H=Qc,r===_u||r===pe?(r=vu(),Oe=3):r===pf?(r=vu(),Oe=4):Oe=r===um?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ss=r,ge===null&&(Pn=1,lm(a,sa(r,a.current)))}function kn(){var a=Ls.current;return a===null?!0:(me&4194048)===me?_s===null:(me&62914560)===me||(me&536870912)!==0?a===_s:!1}function Go(){var a=W.H;return W.H=Qc,a===null?Qc:a}function Pl(){var a=W.A;return W.A=Bo,a}function eh(){Pn=4,Ka||(me&4194048)!==me&&Ls.current!==null||(yr=!0),(oo&134217727)===0&&(Dl&134217727)===0||re===null||ci(re,me,Ts,!1)}function Ss(a,r,h){var d=Jt;Jt|=2;var v=Go(),T=Pl();(re!==a||me!==r)&&(Vn=null,Ml(a,r)),r=!1;var C=Pn;t:do try{if(Oe!==0&&ge!==null){var O=ge,Y=ss;switch(Oe){case 8:Ol(),C=6;break t;case 3:case 2:case 9:case 6:Ls.current===null&&(r=!0);var at=Oe;if(Oe=0,ss=null,Vu(a,O,Y,at),h&&yr){C=0;break t}break;default:at=Oe,Oe=0,ss=null,Vu(a,O,Y,at)}}nh(),C=Pn;break}catch(gt){lo(a,gt)}while(!0);return r&&a.shellSuspendCounter++,Wr=yl=null,Jt=d,W.H=v,W.A=T,ge===null&&(re=null,me=0,hf()),C}function nh(){for(;ge!==null;)Sm(ge)}function Of(a,r){var h=Jt;Jt|=2;var d=Go(),v=Pl();re!==a||me!==r?(Vn=null,ei=In()+500,Ml(a,r)):yr=Sa(a,r);t:do try{if(Oe!==0&&ge!==null){r=ge;var T=ss;e:switch(Oe){case 1:Oe=0,ss=null,Vu(a,r,T,1);break;case 2:case 9:if(ks(T)){Oe=0,ss=null,Mf(r);break}r=function(){Oe!==2&&Oe!==9||re!==a||(Oe=7),wt(a)},T.then(r,r);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:ks(T)?(Oe=0,ss=null,Mf(r)):(Oe=0,ss=null,Vu(a,r,T,7));break;case 5:var C=null;switch(ge.tag){case 26:C=ge.memoizedState;case 5:case 27:var O=ge;if(C?G4(C):O.stateNode.complete){Oe=0,ss=null;var Y=O.sibling;if(Y!==null)ge=Y;else{var at=O.return;at!==null?(ge=at,Vl(at)):ge=null}break e}}Oe=0,ss=null,Vu(a,r,T,5);break;case 6:Oe=0,ss=null,Vu(a,r,T,6);break;case 8:Ol(),Pn=6;break t;default:throw Error(i(462))}}qs();break}catch(gt){lo(a,gt)}while(!0);return Wr=yl=null,W.H=d,W.A=v,Jt=h,ge!==null?0:(re=null,me=0,hf(),Pn)}function qs(){for(;ge!==null&&!Bi();)Sm(ge)}function Sm(a){var r=_m(a.alternate,a,ca);a.memoizedProps=a.pendingProps,r===null?Vl(a):ge=r}function Mf(a){var r=a,h=r.alternate;switch(r.tag){case 15:case 0:r=Af(h,r,r.pendingProps,r.type,void 0,me);break;case 11:r=Af(h,r,r.pendingProps,r.type.render,r.ref,me);break;case 5:mg(r);default:la(h,r),r=ge=Pc(r,ca),r=_m(h,r,ca)}a.memoizedProps=a.pendingProps,r===null?Vl(a):ge=r}function Vu(a,r,h,d){Wr=yl=null,mg(r),Tu=null,Su=0;var v=r.return;try{if(gi(a,v,r,h,me)){Pn=1,lm(a,sa(h,a.current)),ge=null;return}}catch(T){if(v!==null)throw ge=v,T;Pn=1,lm(a,sa(h,a.current)),ge=null;return}r.flags&32768?(Ie||d===1?a=!0:yr||(me&536870912)!==0?a=!1:(Ka=a=!0,(d===2||d===9||d===3||d===6)&&(d=Ls.current,d!==null&&d.tag===13&&(d.flags|=16384))),Pf(r,a)):Vl(r)}function Vl(a){var r=a;do{if((r.flags&32768)!==0){Pf(r,Ka);return}a=r.return;var h=Cf(r.alternate,r,ca);if(h!==null){ge=h;return}if(r=r.sibling,r!==null){ge=r;return}ge=r=a}while(r!==null);Pn===0&&(Pn=5)}function Pf(a,r){do{var h=Ba(a.alternate,a);if(h!==null){h.flags&=32767,ge=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!r&&(a=a.sibling,a!==null)){ge=a;return}ge=a=h}while(a!==null);Pn=6,ge=null}function qo(a,r,h,d,v,T,C,O,Y){a.cancelPendingCommit=null;do ih();while(Je!==0);if((Jt&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=Ii,fc(a,h,T,C,O,Y),a===re&&(ge=re=null,me=0),Zc=r,ha=a,Ya=h,$c=T,th=v,xf=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,S(Yt,function(){return bm(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=W.T,W.T=null,v=Et.p,Et.p=2,C=Jt,Jt|=4;try{L2(a,r,h)}finally{Jt=C,Et.p=v,W.T=d}}Je=1,hi(),Ho(),ku()}}function hi(){if(Je===1){Je=0;var a=ha,r=Zc,h=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var d=Et.p;Et.p=2;var v=Jt;Jt|=4;try{Cl(r,a);var T=F2,C=Z_(a.containerInfo),O=T.focusedElem,Y=T.selectionRange;if(C!==O&&O&&O.ownerDocument&&ln(O.ownerDocument.documentElement,O)){if(Y!==null&&Jp(O)){var at=Y.start,gt=Y.end;if(gt===void 0&&(gt=at),"selectionStart"in O)O.selectionStart=at,O.selectionEnd=Math.min(gt,O.value.length);else{var yt=O.ownerDocument||document,lt=yt&&yt.defaultView||window;if(lt.getSelection){var mt=lt.getSelection(),jt=O.textContent.length,ie=Math.min(Y.start,jt),fn=Y.end===void 0?ie:Math.min(Y.end,jt);!mt.extend&&ie>fn&&(C=fn,fn=ie,ie=C);var tt=xc(O,ie),J=xc(O,fn);if(tt&&J&&(mt.rangeCount!==1||mt.anchorNode!==tt.node||mt.anchorOffset!==tt.offset||mt.focusNode!==J.node||mt.focusOffset!==J.offset)){var st=yt.createRange();st.setStart(tt.node,tt.offset),mt.removeAllRanges(),ie>fn?(mt.addRange(st),mt.extend(J.node,J.offset)):(st.setEnd(J.node,J.offset),mt.addRange(st))}}}}for(yt=[],mt=O;mt=mt.parentNode;)mt.nodeType===1&&yt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<yt.length;O++){var _t=yt[O];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}r1=!!H2,F2=H2=null}finally{Jt=v,Et.p=d,W.T=h}}a.current=r,Je=2}}function Ho(){if(Je===2){Je=0;var a=ha,r=Zc,h=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var d=Et.p;Et.p=2;var v=Jt;Jt|=4;try{Tn(a,r.alternate,r)}finally{Jt=v,Et.p=d,W.T=h}}Je=3}}function ku(){if(Je===4||Je===3){Je=0,nn();var a=ha,r=Zc,h=Ya,d=xf;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Je=5:(Je=0,Zc=ha=null,uo(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(ni=null),ba(h),r=r.stateNode,Ai&&typeof Ai.onCommitFiberRoot=="function")try{Ai.onCommitFiberRoot(Ta,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=W.T,v=Et.p,Et.p=2,W.T=null;try{for(var T=a.onRecoverableError,C=0;C<d.length;C++){var O=d[C];T(O.value,{componentStack:O.stack})}}finally{W.T=r,Et.p=v}}(Ya&3)!==0&&ih(),wt(a),v=a.pendingLanes,(h&261930)!==0&&(v&42)!==0?a===Pu?xl++:(xl=0,Pu=a):xl=0,Gt(0)}}function uo(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,gu(r)))}function ih(){return hi(),Ho(),ku(),bm()}function bm(){if(Je!==5)return!1;var a=ha,r=$c;$c=0;var h=ba(Ya),d=W.T,v=Et.p;try{Et.p=32>h?32:h,W.T=null,h=th,th=null;var T=ha,C=Ya;if(Je=0,Zc=ha=null,Ya=0,(Jt&6)!==0)throw Error(i(331));var O=Jt;if(Jt|=4,Gs(T.current),Hg(T,T.current,C,h),Jt=O,Gt(0,!1),Ai&&typeof Ai.onPostCommitFiberRoot=="function")try{Ai.onPostCommitFiberRoot(Ta,T)}catch{}return!0}finally{Et.p=v,W.T=d,uo(a,r)}}function Kg(a,r,h){r=sa(h,r),r=kg(a.stateNode,r,2),a=Tl(a,r,2),a!==null&&($o(a,2),wt(a))}function Be(a,r,h){if(a.tag===3)Kg(a,a,h);else for(;r!==null;){if(r.tag===3){Kg(r,a,h);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ni===null||!ni.has(d))){a=sa(h,a),h=Lg(2),d=Tl(r,h,2),d!==null&&(jy(h,d,r,a),$o(d,2),wt(d));break}}r=r.return}}function Vf(a,r,h){var d=a.pingCache;if(d===null){d=a.pingCache=new fe;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(h)||(Fg=!0,v.add(h),a=l.bind(null,a,r,h),r.then(a,a))}function l(a,r,h){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,re===a&&(me&h)===h&&(Pn===4||Pn===3&&(me&62914560)===me&&300>In()-Wc?(Jt&2)===0&&Ml(a,0):Df|=h,mn===me&&(mn=0)),wt(a)}function u(a,r){r===0&&(r=Dr()),a=ps(a,r),a!==null&&($o(a,r),wt(a))}function p(a){var r=a.memoizedState,h=0;r!==null&&(h=r.retryLane),u(a,h)}function y(a,r){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),u(a,h)}function S(a,r){return rn(a,r)}var w=null,x=null,Q=!1,dt=!1,St=!1,Mt=0;function wt(a){a!==x&&a.next===null&&(x===null?w=x=a:x=x.next=a),dt=!0,Q||(Q=!0,nt())}function Gt(a,r){if(!St&&dt){St=!0;do for(var h=!1,d=w;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var T=0;else{var C=d.suspendedLanes,O=d.pingedLanes;T=(1<<31-Xn(42|a)+1)-1,T&=v&~(C&~O),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,rt(d,T))}else T=me,T=Zs(d,d===re?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||Sa(d,T)||(h=!0,rt(d,T));d=d.next}while(h);St=!1}}function ce(){Mi()}function Mi(){dt=Q=!1;var a=0;Mt!==0&&qI()&&(a=Mt);for(var r=In(),h=null,d=w;d!==null;){var v=d.next,T=sh(d,r);T===0?(d.next=null,h===null?w=v:h.next=v,v===null&&(x=h)):(h=d,(a!==0||(T&3)!==0)&&(dt=!0)),d=v}Je!==0&&Je!==5||Gt(a),Mt!==0&&(Mt=0)}function sh(a,r){for(var h=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var C=31-Xn(T),O=1<<C,Y=v[C];Y===-1?((O&h)===0||(O&d)!==0)&&(v[C]=Od(O,r)):Y<=r&&(a.expiredLanes|=O),T&=~O}if(r=re,h=me,h=Zs(a,a===r?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===r&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&cs(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Sa(a,h)){if(r=h&-h,r===a.callbackPriority)return r;switch(d!==null&&cs(d),ba(h)){case 2:case 8:h=At;break;case 32:h=Yt;break;case 268435456:h=Se;break;default:h=Yt}return d=kl.bind(null,a),h=rn(h,d),a.callbackPriority=r,a.callbackNode=h,r}return d!==null&&d!==null&&cs(d),a.callbackPriority=2,a.callbackNode=null,2}function kl(a,r){if(Je!==0&&Je!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(ih()&&a.callbackNode!==h)return null;var d=me;return d=Zs(a,a===re?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(Ae(a,d,r),sh(a,In()),a.callbackNode!=null&&a.callbackNode===h?kl.bind(null,a):null)}function rt(a,r){if(ih())return null;Ae(a,r,!0)}function nt(){FI(function(){(Jt&6)!==0?rn(bi,ce):Mi()})}function ht(){if(Mt===0){var a=Oo;a===0&&(a=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),Mt=a}return Mt}function Dt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ru(""+a)}function ee(a,r){var h=r.ownerDocument.createElement("input");return h.name=r.name,h.value=r.value,a.id&&h.setAttribute("form",a.id),r.parentNode.insertBefore(h,r),a=new FormData(a),h.parentNode.removeChild(h),a}function Ln(a,r,h,d,v){if(r==="submit"&&h&&h.stateNode===v){var T=Dt((v[oi]||null).action),C=d.submitter;C&&(r=(r=C[oi]||null)?Dt(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var O=new hr("action","action",null,d,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Mt!==0){var Y=C?ee(v,C):new FormData(v);Ig(h,{pending:!0,data:Y,method:v.method,action:T},null,Y)}}else typeof T=="function"&&(O.preventDefault(),Y=C?ee(v,C):new FormData(v),Ig(h,{pending:!0,data:Y,method:v.method,action:T},T,Y))},currentTarget:v}]})}}for(var ne=0;ne<uf.length;ne++){var ke=uf[ne],Pi=ke.toLowerCase(),Ge=ke[0].toUpperCase()+ke.slice(1);Ma(Pi,"on"+Ge)}Ma(kd,"onAnimationEnd"),Ma(lf,"onAnimationIteration"),Ma(Zp,"onAnimationStart"),Ma("dblclick","onDoubleClick"),Ma("focusin","onFocus"),Ma("focusout","onBlur"),Ma(ty,"onTransitionRun"),Ma(N2,"onTransitionStart"),Ma(ey,"onTransitionCancel"),Ma($p,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qa));function y4(a,r){r=(r&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],v=d.event;d=d.listeners;t:{var T=void 0;if(r)for(var C=d.length-1;0<=C;C--){var O=d[C],Y=O.instance,at=O.currentTarget;if(O=O.listener,Y!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(gt){cf(gt)}v.currentTarget=null,T=Y}else for(C=0;C<d.length;C++){if(O=d[C],Y=O.instance,at=O.currentTarget,O=O.listener,Y!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(gt){cf(gt)}v.currentTarget=null,T=Y}}}}function Me(a,r){var h=r[$s];h===void 0&&(h=r[$s]=new Set);var d=a+"__bubble";h.has(d)||(v4(r,a,2,!1),h.add(d))}function z2(a,r,h){var d=0;r&&(d|=4),v4(h,a,d,r)}var Wy="_reactListening"+Math.random().toString(36).slice(2);function B2(a){if(!a[Wy]){a[Wy]=!0,Ca.forEach(function(h){h!=="selectionchange"&&(U2.has(h)||z2(h,!1,a),z2(h,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[Wy]||(r[Wy]=!0,z2("selectionchange",!1,r))}}function v4(a,r,h,d){switch(Q4(r)){case 2:var v=c7;break;case 8:v=h7;break;default:v=eE}h=v.bind(null,r,h,a),v=void 0,!lu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(r,h,{capture:!0,passive:v}):a.addEventListener(r,h,!0):v!==void 0?a.addEventListener(r,h,{passive:v}):a.addEventListener(r,h,!1)}function G2(a,r,h,d,v){var T=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var O=d.stateNode.containerInfo;if(O===v)break;if(C===4)for(C=d.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;O!==null;){if(C=ar(O),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){d=T=C;continue t}O=O.parentNode}}d=d.return}bo(function(){var at=T,gt=na(h),yt=[];t:{var lt=Oa.get(a);if(lt!==void 0){var mt=hr,jt=a;switch(a){case"keypress":if(rl(h)===0)break t;case"keydown":case"keyup":mt=Gr;break;case"focusin":jt="focus",mt=ul;break;case"focusout":jt="blur",mt=ul;break;case"beforeblur":case"afterblur":mt=ul;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=$h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=R;break;case kd:case lf:case Zp:mt=Md;break;case $p:mt=P;break;case"scroll":case"scrollend":mt=bc;break;case"wheel":mt=ut;break;case"copy":case"cut":case"paste":mt=tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=qr;break;case"toggle":case"beforetoggle":mt=ue}var ie=(r&4)!==0,fn=!ie&&(a==="scroll"||a==="scrollend"),tt=ie?lt!==null?lt+"Capture":null:lt;ie=[];for(var J=at,st;J!==null;){var _t=J;if(st=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||st===null||tt===null||(_t=Na(J,tt),_t!=null&&ie.push(Yg(J,_t,st))),fn)break;J=J.return}0<ie.length&&(lt=new mt(lt,jt,null,h,gt),yt.push({event:lt,listeners:ie}))}}if((r&7)===0){t:{if(lt=a==="mouseover"||a==="pointerover",mt=a==="mouseout"||a==="pointerout",lt&&h!==Tc&&(jt=h.relatedTarget||h.fromElement)&&(ar(jt)||jt[wa]))break t;if((mt||lt)&&(lt=gt.window===gt?gt:(lt=gt.ownerDocument)?lt.defaultView||lt.parentWindow:window,mt?(jt=h.relatedTarget||h.toElement,mt=at,jt=jt?ar(jt):null,jt!==null&&(fn=o(jt),ie=jt.tag,jt!==fn||ie!==5&&ie!==27&&ie!==6)&&(jt=null)):(mt=null,jt=at),mt!==jt)){if(ie=Ac,_t="onMouseLeave",tt="onMouseEnter",J="mouse",(a==="pointerout"||a==="pointerover")&&(ie=qr,_t="onPointerLeave",tt="onPointerEnter",J="pointer"),fn=mt==null?lt:xs(mt),st=jt==null?lt:xs(jt),lt=new ie(_t,J+"leave",mt,h,gt),lt.target=fn,lt.relatedTarget=st,_t=null,ar(gt)===at&&(ie=new ie(tt,J+"enter",jt,h,gt),ie.target=st,ie.relatedTarget=fn,_t=ie),fn=_t,mt&&jt)e:{for(ie=LI,tt=mt,J=jt,st=0,_t=tt;_t;_t=ie(_t))st++;_t=0;for(var $t=J;$t;$t=ie($t))_t++;for(;0<st-_t;)tt=ie(tt),st--;for(;0<_t-st;)J=ie(J),_t--;for(;st--;){if(tt===J||J!==null&&tt===J.alternate){ie=tt;break e}tt=ie(tt),J=ie(J)}ie=null}else ie=null;mt!==null&&E4(yt,lt,mt,ie,!1),jt!==null&&fn!==null&&E4(yt,fn,jt,ie,!0)}}t:{if(lt=at?xs(at):window,mt=lt.nodeName&&lt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&lt.type==="file")var je=jp;else if(Fp(lt))if(Hr)je=W_;else{je=Qp;var Xt=X_}else mt=lt.nodeName,!mt||mt.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?at&&au(at.elementType)&&(je=jp):je=J_;if(je&&(je=je(a,at))){Pd(yt,je,h,gt);break t}Xt&&Xt(a,lt,at),a==="focusout"&&at&&lt.type==="number"&&at.memoizedProps.value!=null&&ea(lt,"number",lt.value)}switch(Xt=at?xs(at):window,a){case"focusin":(Fp(Xt)||Xt.contentEditable==="true")&&(Fr=Xt,jr=at,Oc=null);break;case"focusout":Oc=jr=Fr=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Mc(yt,h,gt);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Mc(yt,h,gt)}var ve;if(xe)t:{switch(a){case"compositionstart":var Le="onCompositionStart";break t;case"compositionend":Le="onCompositionEnd";break t;case"compositionupdate":Le="onCompositionUpdate";break t}Le=void 0}else du?Ro(a,h)&&(Le="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Le="onCompositionStart");Le&&(dr&&h.locale!=="ko"&&(du||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&du&&(ve=al()):(fs=gt,Sc="value"in fs?fs.value:fs.textContent,du=!0)),Xt=Zy(at,Le),0<Xt.length&&(Le=new Da(Le,a,null,h,gt),yt.push({event:Le,listeners:Xt}),ve?Le.data=ve:(ve=fu(h),ve!==null&&(Le.data=ve)))),(ve=ds?Y_(a,h):qp(a,h))&&(Le=Zy(at,"onBeforeInput"),0<Le.length&&(Xt=new Da("onBeforeInput","beforeinput",null,h,gt),yt.push({event:Xt,listeners:Le}),Xt.data=ve)),Ln(yt,a,at,h,gt)}y4(yt,r)})}function Yg(a,r,h){return{instance:a,listener:r,currentTarget:h}}function Zy(a,r){for(var h=r+"Capture",d=[];a!==null;){var v=a,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Na(a,h),v!=null&&d.unshift(Yg(a,v,T)),v=Na(a,r),v!=null&&d.push(Yg(a,v,T))),a.tag===3)return d;a=a.return}return[]}function LI(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function E4(a,r,h,d,v){for(var T=r._reactName,C=[];h!==null&&h!==d;){var O=h,Y=O.alternate,at=O.stateNode;if(O=O.tag,Y!==null&&Y===d)break;O!==5&&O!==26&&O!==27||at===null||(Y=at,v?(at=Na(h,T),at!=null&&C.unshift(Yg(h,at,Y))):v||(at=Na(h,T),at!=null&&C.push(Yg(h,at,Y)))),h=h.return}C.length!==0&&a.push({event:r,listeners:C})}var UI=/\r\n?/g,zI=/\u0000|\uFFFD/g;function T4(a){return(typeof a=="string"?a:""+a).replace(UI,`
`).replace(zI,"")}function S4(a,r){return r=T4(r),T4(a)===r}function hn(a,r,h,d,v,T){switch(h){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||hs(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&hs(a,""+d);break;case"className":Os(a,"class",d);break;case"tabIndex":Os(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Os(a,h,d);break;case"style":Ec(a,d,T);break;case"data":if(r!=="object"){Os(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=ru(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(r!=="input"&&hn(a,r,"name",v.name,v,null),hn(a,r,"formEncType",v.formEncType,v,null),hn(a,r,"formMethod",v.formMethod,v,null),hn(a,r,"formTarget",v.formTarget,v,null)):(hn(a,r,"encType",v.encType,v,null),hn(a,r,"method",v.method,v,null),hn(a,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=ru(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=lr);break;case"onScroll":d!=null&&Me("scroll",a);break;case"onScrollEnd":d!=null&&Me("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=ru(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":Me("beforetoggle",a),Me("toggle",a),il(a,"popover",d);break;case"xlinkActuate":Jn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":il(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Zh.get(h)||h,il(a,h,d))}}function q2(a,r,h,d,v,T){switch(h){case"style":Ec(a,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof d=="string"?hs(a,d):(typeof d=="number"||typeof d=="bigint")&&hs(a,""+d);break;case"onScroll":d!=null&&Me("scroll",a);break;case"onScrollEnd":d!=null&&Me("scrollend",a);break;case"onClick":d!=null&&(a.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iu.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),r=h.slice(2,v?h.length-7:void 0),T=a[oi]||null,T=T!=null?T[h]:null,typeof T=="function"&&a.removeEventListener(r,T,v),typeof d=="function")){typeof T!="function"&&T!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(r,d,v);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):il(a,h,d)}}}function bs(a,r,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",a),Me("load",a);var d=!1,v=!1,T;for(T in h)if(h.hasOwnProperty(T)){var C=h[T];if(C!=null)switch(T){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:hn(a,r,T,C,h,null)}}v&&hn(a,r,"srcSet",h.srcSet,h,null),d&&hn(a,r,"src",h.src,h,null);return;case"input":Me("invalid",a);var O=T=C=v=null,Y=null,at=null;for(d in h)if(h.hasOwnProperty(d)){var gt=h[d];if(gt!=null)switch(d){case"name":v=gt;break;case"type":C=gt;break;case"checked":Y=gt;break;case"defaultChecked":at=gt;break;case"value":T=gt;break;case"defaultValue":O=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,r));break;default:hn(a,r,d,gt,h,null)}}_c(a,T,O,Y,at,C,v,!1);return;case"select":Me("invalid",a),d=C=T=null;for(v in h)if(h.hasOwnProperty(v)&&(O=h[v],O!=null))switch(v){case"value":T=O;break;case"defaultValue":C=O;break;case"multiple":d=O;default:hn(a,r,v,O,h,null)}r=T,h=C,a.multiple=!!d,r!=null?or(a,!!d,r,!1):h!=null&&or(a,!!d,h,!0);return;case"textarea":Me("invalid",a),T=v=d=null;for(C in h)if(h.hasOwnProperty(C)&&(O=h[C],O!=null))switch(C){case"value":d=O;break;case"defaultValue":v=O;break;case"children":T=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:hn(a,r,C,O,h,null)}kr(a,d,v,T);return;case"option":for(Y in h)h.hasOwnProperty(Y)&&(d=h[Y],d!=null)&&(Y==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":hn(a,r,Y,d,h,null));return;case"dialog":Me("beforetoggle",a),Me("toggle",a),Me("cancel",a),Me("close",a);break;case"iframe":case"object":Me("load",a);break;case"video":case"audio":for(d=0;d<Qa.length;d++)Me(Qa[d],a);break;case"image":Me("error",a),Me("load",a);break;case"details":Me("toggle",a);break;case"embed":case"source":case"link":Me("error",a),Me("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in h)if(h.hasOwnProperty(at)&&(d=h[at],d!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:hn(a,r,at,d,h,null)}return;default:if(au(r)){for(gt in h)h.hasOwnProperty(gt)&&(d=h[gt],d!==void 0&&q2(a,r,gt,d,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(d=h[O],d!=null&&hn(a,r,O,d,h,null))}function BI(a,r,h,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,C=null,O=null,Y=null,at=null,gt=null;for(mt in h){var yt=h[mt];if(h.hasOwnProperty(mt)&&yt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Y=yt;default:d.hasOwnProperty(mt)||hn(a,r,mt,null,d,yt)}}for(var lt in d){var mt=d[lt];if(yt=h[lt],d.hasOwnProperty(lt)&&(mt!=null||yt!=null))switch(lt){case"type":T=mt;break;case"name":v=mt;break;case"checked":at=mt;break;case"defaultChecked":gt=mt;break;case"value":C=mt;break;case"defaultValue":O=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,r));break;default:mt!==yt&&hn(a,r,lt,mt,d,yt)}}To(a,C,O,Y,at,gt,T,v);return;case"select":mt=C=O=lt=null;for(T in h)if(Y=h[T],h.hasOwnProperty(T)&&Y!=null)switch(T){case"value":break;case"multiple":mt=Y;default:d.hasOwnProperty(T)||hn(a,r,T,null,d,Y)}for(v in d)if(T=d[v],Y=h[v],d.hasOwnProperty(v)&&(T!=null||Y!=null))switch(v){case"value":lt=T;break;case"defaultValue":O=T;break;case"multiple":C=T;default:T!==Y&&hn(a,r,v,T,d,Y)}r=O,h=C,d=mt,lt!=null?or(a,!!h,lt,!1):!!d!=!!h&&(r!=null?or(a,!!h,r,!0):or(a,!!h,h?[]:"",!1));return;case"textarea":mt=lt=null;for(O in h)if(v=h[O],h.hasOwnProperty(O)&&v!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:hn(a,r,O,null,d,v)}for(C in d)if(v=d[C],T=h[C],d.hasOwnProperty(C)&&(v!=null||T!=null))switch(C){case"value":lt=v;break;case"defaultValue":mt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&hn(a,r,C,v,d,T)}yc(a,lt,mt);return;case"option":for(var jt in h)lt=h[jt],h.hasOwnProperty(jt)&&lt!=null&&!d.hasOwnProperty(jt)&&(jt==="selected"?a.selected=!1:hn(a,r,jt,null,d,lt));for(Y in d)lt=d[Y],mt=h[Y],d.hasOwnProperty(Y)&&lt!==mt&&(lt!=null||mt!=null)&&(Y==="selected"?a.selected=lt&&typeof lt!="function"&&typeof lt!="symbol":hn(a,r,Y,lt,d,mt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in h)lt=h[ie],h.hasOwnProperty(ie)&&lt!=null&&!d.hasOwnProperty(ie)&&hn(a,r,ie,null,d,lt);for(at in d)if(lt=d[at],mt=h[at],d.hasOwnProperty(at)&&lt!==mt&&(lt!=null||mt!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,r));break;default:hn(a,r,at,lt,d,mt)}return;default:if(au(r)){for(var fn in h)lt=h[fn],h.hasOwnProperty(fn)&&lt!==void 0&&!d.hasOwnProperty(fn)&&q2(a,r,fn,void 0,d,lt);for(gt in d)lt=d[gt],mt=h[gt],!d.hasOwnProperty(gt)||lt===mt||lt===void 0&&mt===void 0||q2(a,r,gt,lt,d,mt);return}}for(var tt in h)lt=h[tt],h.hasOwnProperty(tt)&&lt!=null&&!d.hasOwnProperty(tt)&&hn(a,r,tt,null,d,lt);for(yt in d)lt=d[yt],mt=h[yt],!d.hasOwnProperty(yt)||lt===mt||lt==null&&mt==null||hn(a,r,yt,lt,d,mt)}function b4(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GI(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var v=h[d],T=v.transferSize,C=v.initiatorType,O=v.duration;if(T&&O&&b4(C)){for(C=0,O=v.responseEnd,d+=1;d<h.length;d++){var Y=h[d],at=Y.startTime;if(at>O)break;var gt=Y.transferSize,yt=Y.initiatorType;gt&&b4(yt)&&(Y=Y.responseEnd,C+=gt*(Y<O?1:(O-at)/(Y-at)))}if(--d,r+=8*(T+C)/(v.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var H2=null,F2=null;function $y(a){return a.nodeType===9?a:a.ownerDocument}function A4(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w4(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function j2(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var K2=null;function qI(){var a=window.event;return a&&a.type==="popstate"?a===K2?!1:(K2=a,!0):(K2=null,!1)}var R4=typeof setTimeout=="function"?setTimeout:void 0,HI=typeof clearTimeout=="function"?clearTimeout:void 0,C4=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof C4<"u"?function(a){return C4.resolve(null).then(a).catch(jI)}:R4;function jI(a){setTimeout(function(){throw a})}function ah(a){return a==="head"}function I4(a,r){var h=r,d=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(v),Cm(r);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")Qg(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,Qg(h);for(var T=h.firstChild;T;){var C=T.nextSibling,O=T.nodeName;T[Ds]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=C}}else h==="body"&&Qg(a.ownerDocument.body);h=v}while(h);Cm(r)}function N4(a,r){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?r?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(r?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function Y2(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var h=r;switch(r=r.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Y2(h),Mr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function KI(a,r,h,d){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Ds])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=co(a.nextSibling),a===null)break}return null}function YI(a,r,h){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=co(a.nextSibling),a===null))return null;return a}function D4(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=co(a.nextSibling),a===null))return null;return a}function Q2(a){return a.data==="$?"||a.data==="$~"}function X2(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function QI(a,r){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||h.readyState!=="loading")r();else{var d=function(){r(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function co(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var J2=null;function x4(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(r===0)return co(a.nextSibling);r--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||r++}a=a.nextSibling}return null}function O4(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(r===0)return a;r--}else h!=="/$"&&h!=="/&"||r++}a=a.previousSibling}return null}function M4(a,r,h){switch(r=$y(h),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Qg(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Mr(a)}var ho=new Map,P4=new Set;function t1(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Lu=Et.d;Et.d={f:XI,r:JI,D:WI,C:ZI,L:$I,m:t7,X:n7,S:e7,M:i7};function XI(){var a=Lu.f(),r=vr();return a||r}function JI(a){var r=ta(a);r!==null&&r.tag===5&&r.type==="form"?ky(r):Lu.r(a)}var Am=typeof document>"u"?null:document;function V4(a,r,h){var d=Am;if(d&&typeof r=="string"&&r){var v=Ri(r);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),P4.has(v)||(P4.add(v),a={rel:a,crossOrigin:h,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),bs(r,"link",a),Bn(r),d.head.appendChild(r)))}}function WI(a){Lu.D(a),V4("dns-prefetch",a,null)}function ZI(a,r){Lu.C(a,r),V4("preconnect",a,r)}function $I(a,r,h){Lu.L(a,r,h);var d=Am;if(d&&a&&r){var v='link[rel="preload"][as="'+Ri(r)+'"]';r==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+Ri(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+Ri(h.imageSizes)+'"]')):v+='[href="'+Ri(a)+'"]';var T=v;switch(r){case"style":T=wm(a);break;case"script":T=Rm(a)}ho.has(T)||(a=b({rel:"preload",href:r==="image"&&h&&h.imageSrcSet?void 0:a,as:r},h),ho.set(T,a),d.querySelector(v)!==null||r==="style"&&d.querySelector(Xg(T))||r==="script"&&d.querySelector(Jg(T))||(r=d.createElement("link"),bs(r,"link",a),Bn(r),d.head.appendChild(r)))}}function t7(a,r){Lu.m(a,r);var h=Am;if(h&&a){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Ri(d)+'"][href="'+Ri(a)+'"]',T=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Rm(a)}if(!ho.has(T)&&(a=b({rel:"modulepreload",href:a},r),ho.set(T,a),h.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Jg(T)))return}d=h.createElement("link"),bs(d,"link",a),Bn(d),h.head.appendChild(d)}}}function e7(a,r,h){Lu.S(a,r,h);var d=Am;if(d&&a){var v=Ra(d).hoistableStyles,T=wm(a);r=r||"default";var C=v.get(T);if(!C){var O={loading:0,preload:null};if(C=d.querySelector(Xg(T)))O.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":r},h),(h=ho.get(T))&&W2(a,h);var Y=C=d.createElement("link");Bn(Y),bs(Y,"link",a),Y._p=new Promise(function(at,gt){Y.onload=at,Y.onerror=gt}),Y.addEventListener("load",function(){O.loading|=1}),Y.addEventListener("error",function(){O.loading|=2}),O.loading|=4,e1(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:O},v.set(T,C)}}}function n7(a,r){Lu.X(a,r);var h=Am;if(h&&a){var d=Ra(h).hoistableScripts,v=Rm(a),T=d.get(v);T||(T=h.querySelector(Jg(v)),T||(a=b({src:a,async:!0},r),(r=ho.get(v))&&Z2(a,r),T=h.createElement("script"),Bn(T),bs(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function i7(a,r){Lu.M(a,r);var h=Am;if(h&&a){var d=Ra(h).hoistableScripts,v=Rm(a),T=d.get(v);T||(T=h.querySelector(Jg(v)),T||(a=b({src:a,async:!0,type:"module"},r),(r=ho.get(v))&&Z2(a,r),T=h.createElement("script"),Bn(T),bs(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function k4(a,r,h,d){var v=(v=se.current)?t1(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(r=wm(h.href),h=Ra(v).hoistableStyles,d=h.get(r),d||(d={type:"style",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=wm(h.href);var T=Ra(v).hoistableStyles,C=T.get(a);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,C),(T=v.querySelector(Xg(a)))&&!T._p&&(C.instance=T,C.state.loading=5),ho.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ho.set(a,h),T||s7(v,a,h,C.state))),r&&d===null)throw Error(i(528,""));return C}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=h.async,h=h.src,typeof h=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Rm(h),h=Ra(v).hoistableScripts,d=h.get(r),d||(d={type:"script",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function wm(a){return'href="'+Ri(a)+'"'}function Xg(a){return'link[rel="stylesheet"]['+a+"]"}function L4(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function s7(a,r,h,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),bs(r,"link",h),Bn(r),a.head.appendChild(r))}function Rm(a){return'[src="'+Ri(a)+'"]'}function Jg(a){return"script[async]"+a}function U4(a,r,h){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+Ri(h.href)+'"]');if(d)return r.instance=d,Bn(d),d;var v=b({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Bn(d),bs(d,"style",v),e1(d,h.precedence,a),r.instance=d;case"stylesheet":v=wm(h.href);var T=a.querySelector(Xg(v));if(T)return r.state.loading|=4,r.instance=T,Bn(T),T;d=L4(h),(v=ho.get(v))&&W2(d,v),T=(a.ownerDocument||a).createElement("link"),Bn(T);var C=T;return C._p=new Promise(function(O,Y){C.onload=O,C.onerror=Y}),bs(T,"link",d),r.state.loading|=4,e1(T,h.precedence,a),r.instance=T;case"script":return T=Rm(h.src),(v=a.querySelector(Jg(T)))?(r.instance=v,Bn(v),v):(d=h,(v=ho.get(T))&&(d=b({},h),Z2(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),Bn(v),bs(v,"link",d),a.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,e1(d,h.precedence,a));return r.instance}function e1(a,r,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,T=v,C=0;C<d.length;C++){var O=d[C];if(O.dataset.precedence===r)T=O;else if(T!==v)break}T?T.parentNode.insertBefore(a,T.nextSibling):(r=h.nodeType===9?h.head:h,r.insertBefore(a,r.firstChild))}function W2(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function Z2(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var n1=null;function z4(a,r,h){if(n1===null){var d=new Map,v=n1=new Map;v.set(h,d)}else v=n1,d=v.get(h),d||(d=new Map,v.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var T=h[v];if(!(T[Ds]||T[Dn]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=a+C;var O=d.get(C);O?O.push(T):d.set(C,[T])}}return d}function B4(a,r,h){a=a.ownerDocument||a,a.head.insertBefore(h,r==="title"?a.querySelector("head > title"):null)}function a7(a,r,h){if(h===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function r7(a,r,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=wm(d.href),T=r.querySelector(Xg(v));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=i1.bind(a),r.then(a,a)),h.state.loading|=4,h.instance=T,Bn(T);return}T=r.ownerDocument||r,d=L4(d),(v=ho.get(v))&&W2(d,v),T=T.createElement("link"),Bn(T);var C=T;C._p=new Promise(function(O,Y){C.onload=O,C.onerror=Y}),bs(T,"link",d),h.instance=T}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,r),(r=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=i1.bind(a),r.addEventListener("load",h),r.addEventListener("error",h))}}var $2=0;function o7(a,r){return a.stylesheets&&a.count===0&&a1(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&a1(a,a.stylesheets),a.unsuspend){var T=a.unsuspend;a.unsuspend=null,T()}},6e4+r);0<a.imgBytes&&$2===0&&($2=62500*GI());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&a1(a,a.stylesheets),a.unsuspend)){var T=a.unsuspend;a.unsuspend=null,T()}},(a.imgBytes>$2?50:800)+r);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function i1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)a1(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var s1=null;function a1(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,s1=new Map,r.forEach(l7,a),s1=null,i1.call(a))}function l7(a,r){if(!(r.state.loading&4)){var h=s1.get(a);if(h)var d=h.get(null);else{h=new Map,s1.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var C=v[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),d=C)}d&&h.set(null,d)}v=r.instance,C=v.getAttribute("data-precedence"),T=h.get(C)||d,T===d&&h.set(null,v),h.set(C,v),this.count++,d=i1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),T?T.parentNode.insertBefore(v,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),r.state.loading|=4}}var Wg={$$typeof:X,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function u7(a,r,h,d,v,T,C,O,Y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function q4(a,r,h,d,v,T,C,O,Y,at,gt,yt){return a=new u7(a,r,h,C,Y,at,gt,yt,O),r=1,T===!0&&(r|=24),T=xn(3,null,null,r),a.current=T,T.stateNode=a,r=eg(),r.refCount++,a.pooledCache=r,r.refCount++,T.memoizedState={element:d,isDehydrated:h,cache:r},_f(T),a}function H4(a){return a?(a=dl,a):dl}function F4(a,r,h,d,v,T){v=H4(v),d.context===null?d.context=v:d.pendingContext=v,d=Po(r),d.payload={element:h},T=T===void 0?null:T,T!==null&&(d.callback=T),h=Tl(a,d,r),h!==null&&(_e(h,a,r),Sl(h,a,r))}function j4(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<r?h:r}}function tE(a,r){j4(a,r),(a=a.alternate)&&j4(a,r)}function K4(a){if(a.tag===13||a.tag===31){var r=ps(a,67108864);r!==null&&_e(r,a,67108864),tE(a,67108864)}}function Y4(a){if(a.tag===13||a.tag===31){var r=fa();r=xr(r);var h=ps(a,r);h!==null&&_e(h,a,r),tE(a,r)}}var r1=!0;function c7(a,r,h,d){var v=W.T;W.T=null;var T=Et.p;try{Et.p=2,eE(a,r,h,d)}finally{Et.p=T,W.T=v}}function h7(a,r,h,d){var v=W.T;W.T=null;var T=Et.p;try{Et.p=8,eE(a,r,h,d)}finally{Et.p=T,W.T=v}}function eE(a,r,h,d){if(r1){var v=nE(d);if(v===null)G2(a,r,d,o1,h),X4(a,d);else if(d7(v,a,r,h,d))d.stopPropagation();else if(X4(a,d),r&4&&-1<f7.indexOf(a)){for(;v!==null;){var T=ta(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=nr(T.pendingLanes);if(C!==0){var O=T;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var Y=1<<31-Xn(C);O.entanglements[1]|=Y,C&=~Y}wt(T),(Jt&6)===0&&(ei=In()+500,Gt(0))}}break;case 31:case 13:O=ps(T,2),O!==null&&_e(O,T,2),vr(),tE(T,2)}if(T=nE(d),T===null&&G2(a,r,d,o1,h),T===v)break;v=T}v!==null&&d.stopPropagation()}else G2(a,r,d,null,h)}}function nE(a){return a=na(a),iE(a)}var o1=null;function iE(a){if(o1=null,a=ar(a),a!==null){var r=o(a);if(r===null)a=null;else{var h=r.tag;if(h===13){if(a=c(r),a!==null)return a;a=null}else if(h===31){if(a=f(r),a!==null)return a;a=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return o1=a,null}function Q4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Js()){case bi:return 2;case At:return 8;case Yt:case Te:return 32;case Se:return 268435456;default:return 32}default:return 32}}var sE=!1,rh=null,oh=null,lh=null,Zg=new Map,$g=new Map,uh=[],f7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X4(a,r){switch(a){case"focusin":case"focusout":rh=null;break;case"dragenter":case"dragleave":oh=null;break;case"mouseover":case"mouseout":lh=null;break;case"pointerover":case"pointerout":Zg.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$g.delete(r.pointerId)}}function t0(a,r,h,d,v,T){return a===null||a.nativeEvent!==T?(a={blockedOn:r,domEventName:h,eventSystemFlags:d,nativeEvent:T,targetContainers:[v]},r!==null&&(r=ta(r),r!==null&&K4(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),a)}function d7(a,r,h,d,v){switch(r){case"focusin":return rh=t0(rh,a,r,h,d,v),!0;case"dragenter":return oh=t0(oh,a,r,h,d,v),!0;case"mouseover":return lh=t0(lh,a,r,h,d,v),!0;case"pointerover":var T=v.pointerId;return Zg.set(T,t0(Zg.get(T)||null,a,r,h,d,v)),!0;case"gotpointercapture":return T=v.pointerId,$g.set(T,t0($g.get(T)||null,a,r,h,d,v)),!0}return!1}function J4(a){var r=ar(a.target);if(r!==null){var h=o(r);if(h!==null){if(r=h.tag,r===13){if(r=c(h),r!==null){a.blockedOn=r,Gi(a.priority,function(){Y4(h)});return}}else if(r===31){if(r=f(h),r!==null){a.blockedOn=r,Gi(a.priority,function(){Y4(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function l1(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var h=nE(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);Tc=d,h.target.dispatchEvent(d),Tc=null}else return r=ta(h),r!==null&&K4(r),a.blockedOn=h,!1;r.shift()}return!0}function W4(a,r,h){l1(a)&&h.delete(r)}function m7(){sE=!1,rh!==null&&l1(rh)&&(rh=null),oh!==null&&l1(oh)&&(oh=null),lh!==null&&l1(lh)&&(lh=null),Zg.forEach(W4),$g.forEach(W4)}function u1(a,r){a.blockedOn===r&&(a.blockedOn=null,sE||(sE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,m7)))}var c1=null;function Z4(a){c1!==a&&(c1=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){c1===a&&(c1=null);for(var r=0;r<a.length;r+=3){var h=a[r],d=a[r+1],v=a[r+2];if(typeof d!="function"){if(iE(d||h)===null)continue;break}var T=ta(h);T!==null&&(a.splice(r,3),r-=3,Ig(T,{pending:!0,data:v,method:h.method,action:d},d,v))}}))}function Cm(a){function r(Y){return u1(Y,a)}rh!==null&&u1(rh,a),oh!==null&&u1(oh,a),lh!==null&&u1(lh,a),Zg.forEach(r),$g.forEach(r);for(var h=0;h<uh.length;h++){var d=uh[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<uh.length&&(h=uh[0],h.blockedOn===null);)J4(h),h.blockedOn===null&&uh.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var v=h[d],T=h[d+1],C=v[oi]||null;if(typeof T=="function")C||Z4(h);else if(C){var O=null;if(T&&T.hasAttribute("formAction")){if(v=T,C=T[oi]||null)O=C.formAction;else if(iE(v)!==null)continue}else O=C.action;typeof O=="function"?h[d+1]=O:(h.splice(d,3),d-=3),Z4(h)}}}function $4(){function a(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function aE(a){this._internalRoot=a}h1.prototype.render=aE.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var h=r.current,d=fa();F4(h,d,a,r,null,null)},h1.prototype.unmount=aE.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;F4(a.current,2,null,a,null,null),vr(),r[wa]=null}};function h1(a){this._internalRoot=a}h1.prototype.unstable_scheduleHydration=function(a){if(a){var r=mc();a={blockedOn:null,target:a,priority:r};for(var h=0;h<uh.length&&r!==0&&r<uh[h].priority;h++);uh.splice(h,0,a),h===0&&J4(a)}};var tA=t.version;if(tA!=="19.2.4")throw Error(i(527,tA,"19.2.4"));Et.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=g(r),a=a!==null?E(a):null,a=a===null?null:a.stateNode,a};var p7={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f1.isDisabled&&f1.supportsFiber)try{Ta=f1.inject(p7),Ai=f1}catch{}}return n0.createRoot=function(a,r){if(!s(a))throw Error(i(299));var h=!1,d="",v=Hy,T=Pg,C=Vg;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=q4(a,1,!1,null,null,h,d,null,v,T,C,$4),a[wa]=r.current,B2(a),new aE(r)},n0.hydrateRoot=function(a,r,h){if(!s(a))throw Error(i(299));var d=!1,v="",T=Hy,C=Pg,O=Vg,Y=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(Y=h.formState)),r=q4(a,1,!0,r,h??null,d,v,Y,T,C,O,$4),r.context=H4(null),h=r.current,d=fa(),d=xr(d),v=Po(d),v.callback=null,Tl(h,v,d),h=d,r.current.lanes=h,$o(r,h),wt(r),a[wa]=r.current,B2(a),new h1(r)},n0.version="19.2.4",n0}var cA;function A7(){if(cA)return lE.exports;cA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),lE.exports=b7(),lE.exports}var w7=A7();const R7=Math.PI/180;function C7(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Kf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Vt={_global:Kf,version:"10.2.0",isBrowser:C7(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return Vt.angleDeg?n*R7:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Vt.DD.isDragging},isTransforming(){var n,t;return(t=(n=Vt.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Vt.DD.node},releaseCanvasOnDestroy:!0,document:Kf.document,_injectGlobal(n){typeof Kf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Kf.Konva=n}},ai=n=>{Vt[n.prototype.getClassName()]=n};Vt._injectGlobal(Vt);const I7=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,hA=()=>{if(typeof document>"u")throw new Error(I7)};class Sr{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Sr(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,o=this.m[1]*e+this.m[3]*i,c=this.m[0]*-i+this.m[2]*e,f=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=o,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,c=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=c,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],c=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,o=this.m[0]*t,c=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],i=this.m[2],s=this.m[3],o=this.m[4],c=this.m[5],f=t*s-e*i,m={x:o,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);m.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),m.scaleX=g,m.scaleY=f/g,m.skewX=(t*i+e*s)/f,m.skewY=0}else if(i!=0||s!=0){const g=Math.sqrt(i*i+s*s);m.rotation=Math.PI/2-(s>0?Math.acos(-i/g):-Math.acos(i/g)),m.scaleX=f/g,m.scaleY=g,m.skewX=0,m.skewY=(t*i+e*s)/f}return m.rotation=et._getRotation(m.rotation),m}}const N7="[object Array]",D7="[object Number]",x7="[object String]",O7="[object Boolean]",M7=Math.PI/180,P7=180/Math.PI,i0="#",V7="",k7="0",L7="Konva warning: ",fA="Konva error: ",U7="rgb(",fE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},z7=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let d1=[],s0=null;const B7=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},et={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===N7},_isNumber(n){return Object.prototype.toString.call(n)===D7&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===x7},_isBoolean(n){return Object.prototype.toString.call(n)===O7},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const t=n[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){d1.push(n),d1.length===1&&B7(function(){const t=d1;d1=[],t.forEach(function(e){e()})})},createCanvasElement(){hA();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return hA(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,t){const e=et.createImageElement();e.onload=function(){t(e)},e.src=n},_rgbToHex(n,t,e){return((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(n){n=n.replace(i0,V7);const t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=k7+n;return i0+n},isCanvasFarblingActive(){if(s0!==null)return s0;if(typeof document>"u")return s0=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const t=n.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(e[s*4]!==40||e[s*4+1]!==40||e[s*4+2]!==40||e[s*4+3]!==255){i=!0;break}return s0=i,this.releaseCanvas(n),s0},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,t,e){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,t=Math.round(t/5)*5,e=Math.round(e/5)*5),i0+this._rgbToHex(n,t,e)},getSnappedHexColor(n){const t=this._hexToRgb(n);return i0+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(n){let t;return n in fE?(t=fE[n],{r:t[0],g:t[1],b:t[2]}):n[0]===i0?this._hexToRgb(n.substring(1)):n.substr(0,4)===U7?(t=z7.exec(n.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",et._namedColorToRBA(n)||et._hex3ColorToRGBA(n)||et._hex4ColorToRGBA(n)||et._hex6ColorToRGBA(n)||et._hex8ColorToRGBA(n)||et._rgbColorToRGBA(n)||et._rgbaColorToRGBA(n)||et._hslColorToRGBA(n)},_namedColorToRBA(n){const t=fE[n.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const t=n.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const t=n.split(/ *, */).map((e,i)=>e.slice(-1)==="%"?i===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(e[0])/360,s=Number(e[1])/100,o=Number(e[2])/100;let c,f,m;if(s===0)return m=o*255,{r:Math.round(m),g:Math.round(m),b:Math.round(m),a:1};o<.5?c=o*(1+s):c=o+s-o*s;const g=2*o-c,E=[0,0,0];for(let b=0;b<3;b++)f=i+1/3*-(b-1),f<0&&f++,f>1&&f--,6*f<1?m=g+(c-g)*6*f:2*f<1?m=c:3*f<2?m=g+(c-g)*(2/3-f)*6:m=g,E[b]=m*255;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection(n,t){return!(t.x>n.x+n.width||t.x+t.width<n.x||t.y>n.y+n.height||t.y+t.height<n.y)},cloneObject(n){const t={};for(const e in n)this._isPlainObject(n[e])?t[e]=this.cloneObject(n[e]):this._isArray(n[e])?t[e]=this.cloneArray(n[e]):t[e]=n[e];return t},cloneArray(n){return n.slice(0)},degToRad(n){return n*M7},radToDeg(n){return n*P7},_degToRad(n){return et.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),et.degToRad(n)},_radToDeg(n){return et.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),et.radToDeg(n)},_getRotation(n){return Vt.angleDeg?et.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(fA+n)},error(n){console.error(fA+n)},warn(n){Vt.showWarnings&&console.warn(L7+n)},each(n,t){for(const e in n)t(e,n[e])},_inRange(n,t,e){return t<=n&&n<e},_getProjectionToSegment(n,t,e,i,s,o){let c,f,m;const g=(n-e)*(n-e)+(t-i)*(t-i);if(g==0)c=n,f=t,m=(s-e)*(s-e)+(o-i)*(o-i);else{const E=((s-n)*(e-n)+(o-t)*(i-t))/g;E<0?(c=n,f=t,m=(n-s)*(n-s)+(t-o)*(t-o)):E>1?(c=e,f=i,m=(e-s)*(e-s)+(i-o)*(i-o)):(c=n+E*(e-n),f=t+E*(i-t),m=(c-s)*(c-s)+(f-o)*(f-o))}return[c,f,m]},_getProjectionToLine(n,t,e){const i=et.cloneObject(n);let s=Number.MAX_VALUE;return t.forEach(function(o,c){if(!e&&c===t.length-1)return;const f=t[(c+1)%t.length],m=et._getProjectionToSegment(o.x,o.y,f.x,f.y,n.x,n.y),g=m[0],E=m[1],b=m[2];b<s&&(i.x=g,i.y=E,s=b)}),i},_prepareArrayForTween(n,t,e){const i=[],s=[];if(n.length>t.length){const c=t;t=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<t.length;c+=2)s.push({x:t[c],y:t[c+1]});const o=[];return s.forEach(function(c){const f=et._getProjectionToLine(c,i,e);o.push(f.x),o.push(f.y)}),o},_prepareToStringify(n){let t;n.visitedByCircularReferenceRemoval=!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]&&typeof n[e]=="object"){if(t=Object.getOwnPropertyDescriptor(n,e),n[e].visitedByCircularReferenceRemoval||et._isElement(n[e]))if(t.configurable)delete n[e];else return null;else if(et._prepareToStringify(n[e])===null)if(t.configurable)delete n[e];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,t){for(const e in t)n[e]=t[e];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){Vt.releaseCanvasOnDestroy&&n.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(n,t,e,i){let s=t<0?t:0,o=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let c=0,f=0,m=0,g=0;typeof i=="number"?c=f=m=g=Math.min(i,t/2,e/2):(c=Math.min(i[0]||0,t/2,e/2),f=Math.min(i[1]||0,t/2,e/2),g=Math.min(i[2]||0,t/2,e/2),m=Math.min(i[3]||0,t/2,e/2)),n.moveTo(s+c,o),n.lineTo(s+t-f,o),n.arc(s+t-f,o+f,f,Math.PI*3/2,0,!1),n.lineTo(s+t,o+e-g),n.arc(s+t-g,o+e-g,g,0,Math.PI/2,!1),n.lineTo(s+m,o+e),n.arc(s+m,o+e-m,m,Math.PI/2,Math.PI,!1),n.lineTo(s,o+c),n.arc(s+c,o+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,t,e,i,s){i=Math.abs(i);for(let o=0;o<e;o++){const c=t[(o-1+e)%e],f=t[o],m=t[(o+1)%e],g={x:f.x-c.x,y:f.y-c.y},E={x:m.x-f.x,y:m.y-f.y},b=Math.hypot(g.x,g.y),A=Math.hypot(E.x,E.y);let N;typeof s=="number"?N=s:N=o<s.length?s[o]:0,N=i*Math.cos(Math.PI/e)*Math.min(1,N/i*2);const k={x:g.x/b,y:g.y/b},U={x:E.x/A,y:E.y/A},j={x:f.x-k.x*N,y:f.y-k.y*N},K={x:f.x+U.x*N,y:f.y+U.y*N};o===0?n.moveTo(j.x,j.y):n.lineTo(j.x,j.y),n.arcTo(f.x,f.y,K.x,K.y,N)}}};function G7(n){const t=[],e=n.length,i=et;for(let s=0;s<e;s++){let o=n[s];i._isNumber(o)?o=Math.round(o*1e3)/1e3:i._isString(o)||(o=o+""),t.push(o)}return t}const dA=",",q7="(",H7=")",F7="([",j7="])",K7=";",Y7="()",Q7="=",mA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],X7=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],J7=100;let m1=null;function pA(){if(m1!==null)return m1;try{const t=et.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(m1=!1,!1)}catch{return m1=!1,!1}}class Ov{constructor(t){this.canvas=t,Vt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,s=i.length,o="",c,f,m,g;for(c=0;c<s;c++)f=i[c],m=f.method,m?(g=f.args,o+=m,t?o+=Y7:et._isArray(g[0])?o+=F7+g.join(dA)+j7:(e&&(g=g.map(E=>typeof E=="number"?Math.floor(E):E)),o+=q7+g.join(dA)+H7)):(o+=f.property,t||(o+=Q7+f.val)),o+=K7;return o}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,i;e.push(t),i=e.length,i>=J7&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,o,c){this._context.arc(t,e,i,s,o,c)}arcTo(t,e,i,s,o){this._context.arcTo(t,e,i,s,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,o,c){this._context.bezierCurveTo(t,e,i,s,o,c)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;if(i.length===2)return this._context.createImageData(t,e);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,o,c){return this._context.createRadialGradient(t,e,i,s,o,c)}drawImage(t,e,i,s,o,c,f,m,g){const E=arguments,b=this._context;E.length===3?b.drawImage(t,e,i):E.length===5?b.drawImage(t,e,i,s,o):E.length===9&&b.drawImage(t,e,i,s,o,c,f,m,g)}ellipse(t,e,i,s,o,c,f,m){this._context.ellipse(t,e,i,s,o,c,f,m)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,o){this._context.roundRect(t,e,i,s,o)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,o,c){this._context.setTransform(t,e,i,s,o,c)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,o,c){this._context.transform(t,e,i,s,o,c)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=mA.length,i=this.setAttr,s,o;const c=function(f){let m=t[f],g;t[f]=function(){return o=G7(Array.prototype.slice.call(arguments,0)),g=m.apply(t,arguments),t._trace({method:f,args:o}),g}};for(s=0;s<e;s++)c(mA[s]);t.setAttr=function(){i.apply(t,arguments);const f=arguments[0];let m=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(m=m/this.canvas.getPixelRatio()),t._trace({property:f,val:m})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}X7.forEach(function(n){Object.defineProperty(Ov.prototype,n,{get(){return this._context[n]},set(t){this._context[n]=t}})});class W7 extends Ov{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&i==="linear-gradient"){this._fillLinearGradient(t);return}const c=t.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):s?this._fillPattern(t):o?this._fillLinearGradient(t):c&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)o.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const o=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",c=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},m=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),E=m.x*g,b=m.y*g;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",c*Math.min(Math.abs(E),Math.abs(b))),this.setAttr("shadowOffsetX",f.x*E),this.setAttr("shadowOffsetY",f.y*b)}}class Z7 extends Ov{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let p1;function $7(){if(p1)return p1;const n=et.createCanvasElement(),t=n.getContext("2d");return p1=(function(){const e=Vt._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/i})(),et.releaseCanvas(n),p1}class aS{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||Vt.pixelRatio||$7();this.pixelRatio=i,this._canvas=et.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(s){return et.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class yh extends aS{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new W7(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class rS extends aS{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Z7(this),this.setSize(t.width,t.height)}}const Ze={get isDragging(){let n=!1;return Ze._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return Ze._dragElements.forEach(t=>{n=t.node}),n},_dragElements:new Map,_drag(n){const t=[];Ze._dragElements.forEach((e,i)=>{const{node:s}=e,o=s.getStage();o.setPointersPositions(n),e.pointerId===void 0&&(e.pointerId=et._getFirstPointerId(n));const c=o._changedPointerPositions.find(f=>f.id===e.pointerId);if(c){if(e.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-e.startPointerPos.x),Math.abs(c.y-e.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,e),t.push(s)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:n},!0)})},_endDragBefore(n){const t=[];Ze._dragElements.forEach(e=>{const{node:i}=e,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(Ze.justDragged=!0,Vt._mouseListenClick=!1,Vt._touchListenClick=!1,Vt._pointerListenClick=!1,e.dragStatus="stopped");const c=e.node.getLayer()||e.node instanceof Vt.Stage&&e.node;c&&t.indexOf(c)===-1&&t.push(c)}),t.forEach(e=>{e.draw()})},_endDragAfter(n){Ze._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:n},!0),t.dragStatus!=="dragging"&&Ze._dragElements.delete(e)})}};Vt.isBrowser&&(window.addEventListener("mouseup",Ze._endDragBefore,!0),window.addEventListener("touchend",Ze._endDragBefore,!0),window.addEventListener("touchcancel",Ze._endDragBefore,!0),window.addEventListener("mousemove",Ze._drag),window.addEventListener("touchmove",Ze._drag),window.addEventListener("mouseup",Ze._endDragAfter,!1),window.addEventListener("touchend",Ze._endDragAfter,!1),window.addEventListener("touchcancel",Ze._endDragAfter,!1));function Lh(n){return et._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||et._isBoolean(n)?n:Object.prototype.toString.call(n)}function V6(n){return n>255?255:n<0?0:Math.round(n)}function Ot(){if(Vt.isUnminified)return function(n,t){return et._isNumber(n)||et.warn(Lh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),n}}function Mv(n){if(Vt.isUnminified)return function(t,e){let i=et._isNumber(t),s=et._isArray(t)&&t.length==n;return!i&&!s&&et.warn(Lh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+n+")"),t}}function oS(){if(Vt.isUnminified)return function(n,t){return et._isNumber(n)||n==="auto"||et.warn(Lh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),n}}function Sd(){if(Vt.isUnminified)return function(n,t){return et._isString(n)||et.warn(Lh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),n}}function k6(){if(Vt.isUnminified)return function(n,t){const e=et._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return e||i||et.warn(Lh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),n}}function tN(){if(Vt.isUnminified)return function(n,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&n instanceof e||(et._isArray(n)?n.forEach(function(i){et._isNumber(i)||et.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):et.warn(Lh(n)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),n}}function Wo(){if(Vt.isUnminified)return function(n,t){return n===!0||n===!1||et.warn(Lh(n)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),n}}function eN(n){if(Vt.isUnminified)return function(t,e){return t==null||et.isObject(t)||et.warn(Lh(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+n),t}}const a0="get",r0="set",B={addGetterSetter(n,t,e,i,s){B.addGetter(n,t,e),B.addSetter(n,t,i,s),B.addOverloadedGetterSetter(n,t)},addGetter(n,t,e){const i=a0+et._capitalize(t);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[t];return s===void 0?e:s}},addSetter(n,t,e,i){const s=r0+et._capitalize(t);n.prototype[s]||B.overWriteSetter(n,t,e,i)},overWriteSetter(n,t,e,i){const s=r0+et._capitalize(t);n.prototype[s]=function(o){return e&&o!==void 0&&o!==null&&(o=e.call(this,o,t)),this._setAttr(t,o),i&&i.call(this),this}},addComponentsGetterSetter(n,t,e,i,s){const o=e.length,c=et._capitalize,f=a0+c(t),m=r0+c(t);n.prototype[f]=function(){const E={};for(let b=0;b<o;b++){const A=e[b];E[A]=this.getAttr(t+c(A))}return E};const g=eN(e);n.prototype[m]=function(E){const b=this.attrs[t];i&&(E=i.call(this,E,t)),g&&g.call(this,E,t);for(const A in E)E.hasOwnProperty(A)&&this._setAttr(t+c(A),E[A]);return E||e.forEach(A=>{this._setAttr(t+c(A),void 0)}),this._fireChangeEvent(t,b,E),s&&s.call(this),this},B.addOverloadedGetterSetter(n,t)},addOverloadedGetterSetter(n,t){const e=et._capitalize(t),i=r0+e,s=a0+e;n.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,t,e,i){et.error("Adding deprecated "+t);const s=a0+et._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){et.error(o);const c=this.attrs[t];return c===void 0?e:c},B.addSetter(n,t,i,function(){et.error(o)}),B.addOverloadedGetterSetter(n,t)},backCompat(n,t){et.each(t,function(e,i){const s=n.prototype[i],o=a0+et._capitalize(e),c=r0+et._capitalize(e);function f(){s.apply(this,arguments),et.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[e]=f,n.prototype[o]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function nN(n){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(n))!==null;){const[,i,s]=e;switch(i){case"blur":{const o=parseFloat(s.replace("px",""));return function(c){this.blurRadius(o*.5);const f=Vt.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const o=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(o);const f=Vt.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const o=parseFloat(s);return function(c){const f=100*(Math.sqrt(o)-1);this.contrast(f);const m=Vt.Filters;m&&m.Contrast&&m.Contrast.call(this,c)}}case"grayscale":return function(o){const c=Vt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,o)};case"sepia":return function(o){const c=Vt.Filters;c&&c.Sepia&&c.Sepia.call(this,o)};case"invert":return function(o){const c=Vt.Filters;c&&c.Invert&&c.Invert.call(this,o)};default:et.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const P1="absoluteOpacity",gA="allEventListeners",zu="absoluteTransform",_A="absoluteScale",kf="canvas",iN="Change",sN="children",aN="konva",iT="listening",rN="mouseenter",oN="mouseleave",lN="pointerenter",uN="pointerleave",cN="touchenter",hN="touchleave",yA="set",vA="Shape",V1=" ",EA="stage",gh="transform",fN="Stage",sT="visible",dN=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(V1);let mN=1;class xt{constructor(t){this._id=mN++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===gh||t===zu)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t);return(i===void 0||(t===gh||t===zu)&&i.dirty===!0)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const s=e.map(o=>o+"Change.konva").join(V1);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(kf)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===zu&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(kf)){const{scene:t,filter:e,hit:i}=this._cache.get(kf);et.releaseCanvas(t._canvas,e._canvas,i._canvas),this._cache.delete(kf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(e.width||i.width),o=Math.ceil(e.height||i.height),c=e.pixelRatio,f=e.x===void 0?Math.floor(i.x):e.x,m=e.y===void 0?Math.floor(i.y):e.y,g=e.offset||0,E=e.drawBorder||!1,b=e.hitCanvasPixelRatio||1;if(!s||!o){et.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const A=Math.abs(Math.round(i.x)-f)>.5?1:0,N=Math.abs(Math.round(i.y)-m)>.5?1:0;s+=g*2+A,o+=g*2+N,f-=g,m-=g;const D=new yh({pixelRatio:c,width:s,height:o}),k=new yh({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),U=new rS({pixelRatio:b,width:s,height:o}),j=D.getContext(),K=U.getContext(),X=new yh({width:D.width/D.pixelRatio+Math.abs(f),height:D.height/D.pixelRatio+Math.abs(m),pixelRatio:D.pixelRatio}),Z=X.getContext();return U.isCache=!0,D.isCache=!0,this._cache.delete(kf),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(D.getContext()._context.imageSmoothingEnabled=!1,k.getContext()._context.imageSmoothingEnabled=!1),j.save(),K.save(),Z.save(),j.translate(-f,-m),K.translate(-f,-m),Z.translate(-f,-m),X.x=f,X.y=m,this._isUnderCache=!0,this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(_A),this.drawScene(D,this,X),this.drawHit(U,this),this._isUnderCache=!1,j.restore(),K.restore(),E&&(j.save(),j.beginPath(),j.rect(0,0,s,o),j.closePath(),j.setAttr("strokeStyle","red"),j.setAttr("lineWidth",5),j.stroke(),j.restore()),et.releaseCanvas(X._canvas),this._cache.set(kf,{scene:D,filter:k,hit:U,x:f,y:m}),this._requestDraw(),this}isCached(){return this._cache.has(kf)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,o=1/0,c=-1/0,f=-1/0;const m=this.getAbsoluteTransform(e);return i.forEach(function(g){const E=m.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),{x:s,y:o,width:c-s,height:f-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,s=e.filter,o=s.getContext(),c,f,m,g;if(!t||t.length===0)return i;if(this._filterUpToDate)return s;let E=!0;for(let A=0;A<t.length;A++)if(typeof t[A]=="string"&&pA(),typeof t[A]!="string"||!pA()){E=!1;break}const b=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),E){const A=t.join(" ");return o.save(),o.setAttr("filter",A),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),o.restore(),this._filterUpToDate=!0,s}try{for(c=t.length,o.clear(),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),f=o.getImageData(0,0,s.getWidth(),s.getHeight()),m=0;m<c;m++)g=t[m],typeof g=="string"&&(g=nN(g)),g.call(this,f),o.putImageData(f,0,0)}catch(A){et.error("Unable to apply filter. "+A.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,e){if(this._cache&&this._cache.delete(gA),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(V1);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],m=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:m,handler:e})}return this}off(t,e){let i=(t||"").split(V1),s=i.length,o,c,f,m,g,E;if(this._cache&&this._cache.delete(gA),!t)for(c in this.eventListeners)this._off(c);for(o=0;o<s;o++)if(f=i[o],m=f.split("."),g=m[0],E=m[1],g)this.eventListeners[g]&&this._off(g,E,e);else for(c in this.eventListeners)this._off(c,E,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(i){e.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const s=this;this.on(t,function(o){const c=o.target.findAncestors(e,!0,s);for(let f=0;f<c.length;f++)o=et.cloneObject(o),o.currentTarget=c[f],i.call(c[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),Ze._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(zu),this._clearSelfAndDescendantCache(P1),this._clearSelfAndDescendantCache(_A),this._clearSelfAndDescendantCache(EA),this._clearSelfAndDescendantCache(sT),this._clearSelfAndDescendantCache(iT)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+et._capitalize(t);return et._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)e!==sN&&(i=yA+et._capitalize(e),et._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(iT,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(sT,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;Ze._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const o=!e&&!Vt.hitOnDragEnabled&&(s||Vt.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,s,o,c,f;function m(E){for(s=[],o=E.length,c=0;c<o;c++)f=E[c],i++,f.nodeType!==vA&&(s=s.concat(f.getChildren().slice())),f._id===e._id&&(c=o);s.length>0&&s[0].getDepth()<=t&&m(s)}const g=this.getStage();return e.nodeType!==fN&&g&&m(g.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(gh),this._clearSelfAndDescendantCache(zu)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),o=new Sr,c=this.offset();return o.m=s.slice(),o.translate(c.x,c.y),o.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(gh);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(gh),this._clearSelfAndDescendantCache(zu),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),o=this.y();return e!==void 0&&(s+=e),i!==void 0&&(o+=i),this.setPosition({x:s,y:o}),this}_eachAncestorReverse(t,e){let i=[],s=this.getParent(),o,c;if(!(e&&e._id===this._id)){for(i.unshift(this);s&&(!e||s._id!==e._id);)i.unshift(s),s=s.parent;for(o=i.length,c=0;c<o;c++)t(i[c])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return et.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return et.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return et.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return et.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return et.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&et.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(P1,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,s,o,c;const f={attrs:{},className:this.getClassName()};for(e in t)i=t[e],c=et.isObject(i)&&!et._isPlainObject(i)&&!et._isArray(i),!c&&(s=typeof this[e]=="function"&&this[e],delete t[e],o=s?s.call(this):null,t[e]=i,o!==i&&(f.attrs[e]=i));return et._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let o=this.parent;for(;o;){if(o===i)return s;o._isMatch(t)&&s.push(o),o=o.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,s,o;for(s=0;s<i;s++)if(o=e[s],et.isValidSelector(o)||(et.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),et.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),et.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(EA,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(zu,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new Sr,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?e.multiply(i.getTransform()):s==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;{e=this._cache.get(zu)||new Sr,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const i=this.transformsEnabled();if(i==="all")e.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,o=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;e.translate(s-c,o-f)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(gh,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(gh)||new Sr;i.reset();const s=this.x(),o=this.y(),c=Vt.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,m=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,E=this.attrs.skewY||0,b=this.attrs.offsetX||0,A=this.attrs.offsetY||0;return(s!==0||o!==0)&&i.translate(s,o),c!==0&&i.rotate(c),(g!==0||E!==0)&&i.skew(g,E),(f!==1||m!==1)&&i.scale(f,m),(b!==0||A!==0)&&i.translate(-1*b,-1*A),i.dirty=!1,i}clone(t){let e=et.cloneObject(this.attrs),i,s,o,c,f;for(i in t)e[i]=t[i];const m=new this.constructor(e);for(i in this.eventListeners)for(s=this.eventListeners[i],o=s.length,c=0;c<o;c++)f=s[c],f.name.indexOf(aN)<0&&(m.eventListeners[i]||(m.eventListeners[i]=[]),m.eventListeners[i].push(f));return m}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(e.x),o=t.y!==void 0?t.y:Math.floor(e.y),c=t.pixelRatio||1,f=new yh({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:c}),m=f.getContext(),g=new yh({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(m._context.imageSmoothingEnabled=!1),m.save(),(s||o)&&m.translate(-1*s,-1*o),this.drawScene(f,void 0,g),m.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,et._urlToImage(this.toDataURL(t),function(o){e(o),s?.(o)})}catch(s){i(s)}})}toBlob(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(o=>{e(o),s?.(o)},t?.mimeType,t?.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Vt.dragDistance}_off(t,e,i){let s=this.eventListeners[t],o,c,f;for(o=0;o<s.length;o++)if(c=s[o].name,f=s[o].handler,(c!=="konva"||e==="konva")&&(!e||c===e)&&(!i||i===f)){if(s.splice(o,1),s.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,e,i){this._fire(t+iN,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return i!==-1&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[yA+et._capitalize(t)];return et._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Vt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];i===e&&!et.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===vA&&(e.target=this);const s=[rN,oN,lN,uN,cN,hN];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,e);const c=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i;const{nodeType:s}=this,o=xt.protoListenerMap.get(s)||{};let c=o?.[t];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const m=(i=(e=f.eventListeners)===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:[];c.push(...m),f=Object.getPrototypeOf(f)}o[t]=c,xt.protoListenerMap.set(s,o)}return c}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(let o=0;o<i.length;o++)i[o].handler.call(this,e);const s=this.eventListeners[t];if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const o=i._getPointerById(e)||i._changedPointerPositions[0]||s;Ze._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-s.x,y:o.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){Ze._dragElements.has(this._id)||this._createDragElement(t);const i=Ze._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let s={x:i.x-e.offset.x,y:i.y-e.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const c=o.call(this,s,t);c?s=c:et.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const e=Ze._dragElements.get(this._id);e&&(e.dragStatus="stopped"),Ze._endDragBefore(t),Ze._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=Ze._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Vt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;Ze._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=Ze._dragElements.get(this._id),i=e&&e.dragStatus==="dragging",s=e&&e.dragStatus==="ready";i?this.stopDrag():s&&Ze._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return et.haveIntersection(i,this.getClientRect())}static create(t,e){return et._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=xt.prototype.getClassName.call(t),s=t.children,o,c,f;e&&(t.attrs.container=e),Vt[i]||(et.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const m=Vt[i];if(o=new m(t.attrs),s)for(c=s.length,f=0;f<c;f++)o.add(xt._createNode(s[f]));return o}}xt.protoListenerMap=new Map;xt.prototype.nodeType="Node";xt.prototype._attrsAffectingSize=[];xt.prototype.eventListeners={};xt.prototype.on.call(xt.prototype,dN,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(gh),this._clearSelfAndDescendantCache(zu)});xt.prototype.on.call(xt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(sT)});xt.prototype.on.call(xt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(iT)});xt.prototype.on.call(xt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(P1)});const pn=B.addGetterSetter;pn(xt,"zIndex");pn(xt,"absolutePosition");pn(xt,"position");pn(xt,"x",0,Ot());pn(xt,"y",0,Ot());pn(xt,"globalCompositeOperation","source-over",Sd());pn(xt,"opacity",1,Ot());pn(xt,"name","",Sd());pn(xt,"id","",Sd());pn(xt,"rotation",0,Ot());B.addComponentsGetterSetter(xt,"scale",["x","y"]);pn(xt,"scaleX",1,Ot());pn(xt,"scaleY",1,Ot());B.addComponentsGetterSetter(xt,"skew",["x","y"]);pn(xt,"skewX",0,Ot());pn(xt,"skewY",0,Ot());B.addComponentsGetterSetter(xt,"offset",["x","y"]);pn(xt,"offsetX",0,Ot());pn(xt,"offsetY",0,Ot());pn(xt,"dragDistance",void 0,Ot());pn(xt,"width",0,Ot());pn(xt,"height",0,Ot());pn(xt,"listening",!0,Wo());pn(xt,"preventDefault",!0,Wo());pn(xt,"filters",void 0,function(n){return this._filterUpToDate=!1,n});pn(xt,"visible",!0,Wo());pn(xt,"transformsEnabled","all",Sd());pn(xt,"size");pn(xt,"dragBoundFunc");pn(xt,"draggable",!1,Wo());B.backCompat(xt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ar extends xt{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants(s=>{const o=s._isMatch(t);return o&&i.push(s),!!(o&&e)}),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=xt.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=xt.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){e.add(i.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,i){e.index=i}),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas(),c=o&&o.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=o&&o.isCache;if(!this.isVisible()&&!g)return this;if(m){c.save();const E=this.getAbsoluteTransform(e).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",o,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,o=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){o.save();const m=this.getAbsoluteTransform(e).getMatrix();o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var o;const c=e&&e.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),E=typeof f=="number"&&typeof m=="number"||g,b=i===this;if(E){c.save();const N=this.getAbsoluteTransform(i);let D=N.getMatrix();c.transform(D[0],D[1],D[2],D[3],D[4],D[5]),c.beginPath();let k;if(g)k=g.call(this,c,this);else{const U=this.clipX(),j=this.clipY();c.rect(U||0,j||0,f,m)}c.clip.apply(c,k),D=N.copy().invert().getMatrix(),c.transform(D[0],D[1],D[2],D[3],D[4],D[5])}const A=!b&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";A&&(c.save(),c._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(N){N[t](e,i,s)}),A&&c.restore(),E&&c.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let o,c,f,m,g={x:1/0,y:1/0,width:0,height:0};const E=this;(e=this.children)===null||e===void 0||e.forEach(function(N){if(!N.visible())return;const D=N.getClientRect({relativeTo:E,skipShadow:t.skipShadow,skipStroke:t.skipStroke});D.width===0&&D.height===0||(o===void 0?(o=D.x,c=D.y,f=D.x+D.width,m=D.y+D.height):(o=Math.min(o,D.x),c=Math.min(c,D.y),f=Math.max(f,D.x+D.width),m=Math.max(m,D.y+D.height)))});const b=this.find("Shape");let A=!1;for(let N=0;N<b.length;N++)if(b[N]._isVisible(this)){A=!0;break}return A&&o!==void 0?g={x:o,y:c,width:f-o,height:m-c}:g={x:0,y:0,width:0,height:0},i?g:this._transformedRect(g,s)}}B.addComponentsGetterSetter(Ar,"clip",["x","y","width","height"]);B.addGetterSetter(Ar,"clipX",void 0,Ot());B.addGetterSetter(Ar,"clipY",void 0,Ot());B.addGetterSetter(Ar,"clipWidth",void 0,Ot());B.addGetterSetter(Ar,"clipHeight",void 0,Ot());B.addGetterSetter(Ar,"clipFunc");const $0=new Map,L6=Vt._global.PointerEvent!==void 0;function dE(n){return $0.get(n)}function lS(n){return{evt:n,pointerId:n.pointerId}}function U6(n,t){return $0.get(n)===t}function z6(n,t){M0(n),t.getStage()&&($0.set(n,t),L6&&t._fire("gotpointercapture",lS(new PointerEvent("gotpointercapture"))))}function M0(n,t){const e=$0.get(n);if(!e)return;const i=e.getStage();i&&i.content,$0.delete(n),L6&&e._fire("lostpointercapture",lS(new PointerEvent("lostpointercapture")))}const pN="Stage",gN="string",TA="px",_N="mouseout",B6="mouseleave",G6="mouseover",q6="mouseenter",H6="mousemove",F6="mousedown",j6="mouseup",T0="pointermove",S0="pointerdown",Fm="pointerup",b0="pointercancel",yN="lostpointercapture",g1="pointerout",A0="pointerleave",_1="pointerover",y1="pointerenter",aT="contextmenu",K6="touchstart",Y6="touchend",Q6="touchmove",X6="touchcancel",rT="wheel",vN=5,EN=[[q6,"_pointerenter"],[F6,"_pointerdown"],[H6,"_pointermove"],[j6,"_pointerup"],[B6,"_pointerleave"],[K6,"_pointerdown"],[Q6,"_pointermove"],[Y6,"_pointerup"],[X6,"_pointercancel"],[G6,"_pointerover"],[rT,"_wheel"],[aT,"_contextmenu"],[S0,"_pointerdown"],[T0,"_pointermove"],[Fm,"_pointerup"],[b0,"_pointercancel"],[A0,"_pointerleave"],[yN,"_lostpointercapture"]],mE={mouse:{[g1]:_N,[A0]:B6,[_1]:G6,[y1]:q6,[T0]:H6,[S0]:F6,[Fm]:j6,[b0]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[g1]:"touchout",[A0]:"touchleave",[_1]:"touchover",[y1]:"touchenter",[T0]:Q6,[S0]:K6,[Fm]:Y6,[b0]:X6,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[g1]:g1,[A0]:A0,[_1]:_1,[y1]:y1,[T0]:T0,[S0]:S0,[Fm]:Fm,[b0]:b0,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},w0=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Im=n=>{const t=w0(n);if(t==="pointer")return Vt.pointerEventsEnabled&&mE.pointer;if(t==="touch")return mE.touch;if(t==="mouse")return mE.mouse};function SA(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&et.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const TN="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",P0=[];let Pv=class extends Ar{constructor(t){super(SA(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),P0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{SA(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",i=t.getType()==="FastLayer";e||i||et.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===gN){let e;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Ar.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&et._isInDocument(t)&&this.container().removeChild(t);const e=P0.indexOf(this);return e>-1&&P0.splice(e,1),et.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(et.warn(TN),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new yh({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach(function(o){if(!o.isVisible())return;const c=o._toKonvaCanvas(t);i.drawImage(c._canvas,t.x,t.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let o=s;o>=0;o--){const c=e[o].getIntersection(t);if(c)return c}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+TA,this.content.style.height=e+TA),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t,...e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const i=this.children.length;return i>vN&&et.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Vt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return U6(t,this)}setPointerCapture(t){z6(t,this)}releaseCapture(t){M0(t)}getLayers(){return this.children}_bindContentEvents(){Vt.isBrowser&&EN.forEach(([t,e])=>{this.content.addEventListener(t,i=>{this[e](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Im(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Im(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Im(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),o=!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled;s&&o?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):o&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Im(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(o=>{const c=this.getIntersection(o);if(Ze.justDragged=!1,Vt["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}Vt.capturePointerEventsEnabled&&c.setPointerCapture(o.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(e.pointerdown,{evt:t,pointerId:o.id}),s=!0;const f=t.type.indexOf("touch")>=0;c.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Im(t.type),i=w0(t.type);if(!e)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Vt.isDragging()&&Ze.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(Vt.isDragging()||Vt.isTransforming())||Vt.hitOnDragEnabled))return;const c={};let f=!1;const m=this._getTargetShape(i);this._changedPointerPositions.forEach(g=>{const E=dE(g.id)||this.getIntersection(g),b=g.id,A={evt:t,pointerId:b},N=m!==E;if(N&&m&&(m._fireAndBubble(e.pointerout,{...A},E),m._fireAndBubble(e.pointerleave,{...A},E)),E){if(c[E._id])return;c[E._id]=!0}E&&E.isListening()?(f=!0,N&&(E._fireAndBubble(e.pointerover,{...A},m),E._fireAndBubble(e.pointerenter,{...A},m),this[i+"targetShape"]=E),E._fireAndBubble(e.pointermove,{...A})):m&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:b}),this[i+"targetShape"]=null)}),f||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Im(t.type),i=w0(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],o=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(m=>{const g=dE(m.id)||this.getIntersection(m);if(g){if(g.releaseCapture(m.id),c[g._id])return;c[g._id]=!0}const E=m.id,b={evt:t,pointerId:E};let A=!1;Vt["_"+i+"InDblClickWindow"]?(A=!0,clearTimeout(this[i+"DblTimeout"])):Ze.justDragged||(Vt["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Vt["_"+i+"InDblClickWindow"]=!1},Vt.dblClickWindow),g&&g.isListening()?(f=!0,this[i+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...b}),Vt["_"+i+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(e.pointerclick,{...b}),A&&o&&o===g&&g._fireAndBubble(e.pointerdblclick,{...b}))):(this[i+"ClickEndShape"]=null,f||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),Vt["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:E}),A&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:E}))}),f||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Vt["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(aT,{evt:t}):this._fire(aT,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(rT,{evt:t}):this._fire(rT,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=dE(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(Fm,lS(t)),M0(t.pointerId)}_lostpointercapture(t){M0(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,s=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}])}_setPointerPosition(t){et.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new yh({width:this.width(),height:this.height()}),this.bufferHitCanvas=new rS({pixelRatio:1,width:this.width(),height:this.height()}),!Vt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return et.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Pv.prototype.nodeType=pN;ai(Pv);B.addGetterSetter(Pv,"container");Vt.isBrowser&&document.addEventListener("visibilitychange",()=>{P0.forEach(n=>{n.batchDraw()})});const J6="hasShadow",W6="shadowRGBA",Z6="patternImage",$6="linearGradient",tw="radialGradient";let v1;function pE(){return v1||(v1=et.createCanvasElement().getContext("2d"),v1)}const V0={};function SN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function bN(n){n.stroke()}function AN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function wN(n){n.stroke()}function RN(){this._clearCache(J6)}function CN(){this._clearCache(W6)}function IN(){this._clearCache(Z6)}function NN(){this._clearCache($6)}function DN(){this._clearCache(tw)}class It extends xt{constructor(t){super(t);let e,i=0;for(;e=et.getHitColor(),!(e&&!(e in V0));)if(i++,i>=1e4){et.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),e=et.getRandomColor();break}this.colorKey=e,V0[e]=this}getContext(){return et.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return et.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(J6,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Z6,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=pE().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const i=new Sr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(Vt.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),o=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(o)}return e}}_getLinearGradient(){return this._getCache($6,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=pE(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),o=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}_getRadialGradient(){return this._getCache(tw,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=pE(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),o=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}getShadowRGBA(){return this._getCache(W6,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=et.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return xt.prototype.destroy.call(this),delete V0[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const s=t||this.hasFill(),o=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&o&&c)return!0;const f=this.hasShadow(),m=this.shadowForStrokeEnabled();return!!(s&&o&&f&&m)}setStrokeHitEnabled(t){et.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,o=t.relativeTo||e&&this.getStage()||void 0,c=this.getSelfRect(),m=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=c.width+m,E=c.height+m,b=!t.skipShadow&&this.hasShadow(),A=b?this.shadowOffsetX():0,N=b?this.shadowOffsetY():0,D=g+Math.abs(A),k=E+Math.abs(N),U=b&&this.shadowBlur()||0,j=D+U*2,K=k+U*2,X={width:j,height:K,x:-(m/2+U)+Math.min(A,0)+c.x,y:-(m/2+U)+Math.min(N,0)+c.y};return s?X:this._transformedRect(X,o)}drawScene(t,e,i){const s=this.getLayer(),o=t||s.getCanvas(),c=o.getContext(),f=this._getCanvasCache(),m=this.getSceneFunc(),g=this.hasShadow();let E;const b=e===this;if(!this.isVisible()&&!b)return this;if(f){c.save();const A=this.getAbsoluteTransform(e).getMatrix();return c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!m)return this;if(c.save(),this._useBufferCanvas()){E=this.getStage();const A=i||E.bufferCanvas,N=A.getContext();i?(N.save(),N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,A.width,A.height),N.restore()):N.clear(),N.save(),N._applyLineJoin(this),N._applyMiterLimit(this);const D=this.getAbsoluteTransform(e).getMatrix();N.transform(D[0],D[1],D[2],D[3],D[4],D[5]),m.call(this,N,this),N.restore();const k=A.pixelRatio;g&&c._applyShadow(this),b||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(A._canvas,A.x||0,A.y||0,A.width/k,A.height/k)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!b){const A=this.getAbsoluteTransform(e).getMatrix();c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}g&&c._applyShadow(this),m.call(this,c,this)}return c.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),o=t||s.hitCanvas,c=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),m=this._getCanvasCache(),g=m&&m.hit;if(this.colorKey||et.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){c.save();const b=this.getAbsoluteTransform(e).getMatrix();return c.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===e)){const b=this.getAbsoluteTransform(e).getMatrix();c.transform(b[0],b[1],b[2],b[3],b[4],b[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,o=s.getContext(),c=s.getWidth(),f=s.getHeight();o.clear(),o.drawImage(i._canvas,0,0,c,f);try{const m=o.getImageData(0,0,c,f),g=m.data,E=g.length,b=et._hexToRgb(this.colorKey);for(let A=0;A<E;A+=4)g[A+3]>t?(g[A]=b.r,g[A+1]=b.g,g[A+2]=b.b,g[A+3]=255):g[A+3]=0;o.putImageData(m,0,0)}catch(m){et.error("Unable to draw hit graph from cached scene canvas. "+m.message)}return this}hasPointerCapture(t){return U6(t,this)}setPointerCapture(t){z6(t,this)}releaseCapture(t){M0(t)}}It.prototype._fillFunc=SN;It.prototype._strokeFunc=bN;It.prototype._fillFuncHit=AN;It.prototype._strokeFuncHit=wN;It.prototype._centroid=!1;It.prototype.nodeType="Shape";ai(It);It.prototype.eventListeners={};It.prototype.on.call(It.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",RN);It.prototype.on.call(It.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",CN);It.prototype.on.call(It.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",IN);It.prototype.on.call(It.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",NN);It.prototype.on.call(It.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",DN);B.addGetterSetter(It,"stroke",void 0,k6());B.addGetterSetter(It,"strokeWidth",2,Ot());B.addGetterSetter(It,"fillAfterStrokeEnabled",!1);B.addGetterSetter(It,"hitStrokeWidth","auto",oS());B.addGetterSetter(It,"strokeHitEnabled",!0,Wo());B.addGetterSetter(It,"perfectDrawEnabled",!0,Wo());B.addGetterSetter(It,"shadowForStrokeEnabled",!0,Wo());B.addGetterSetter(It,"lineJoin");B.addGetterSetter(It,"lineCap");B.addGetterSetter(It,"miterLimit");B.addGetterSetter(It,"sceneFunc");B.addGetterSetter(It,"hitFunc");B.addGetterSetter(It,"dash");B.addGetterSetter(It,"dashOffset",0,Ot());B.addGetterSetter(It,"shadowColor",void 0,Sd());B.addGetterSetter(It,"shadowBlur",0,Ot());B.addGetterSetter(It,"shadowOpacity",1,Ot());B.addComponentsGetterSetter(It,"shadowOffset",["x","y"]);B.addGetterSetter(It,"shadowOffsetX",0,Ot());B.addGetterSetter(It,"shadowOffsetY",0,Ot());B.addGetterSetter(It,"fillPatternImage");B.addGetterSetter(It,"fill",void 0,k6());B.addGetterSetter(It,"fillPatternX",0,Ot());B.addGetterSetter(It,"fillPatternY",0,Ot());B.addGetterSetter(It,"fillLinearGradientColorStops");B.addGetterSetter(It,"strokeLinearGradientColorStops");B.addGetterSetter(It,"fillRadialGradientStartRadius",0);B.addGetterSetter(It,"fillRadialGradientEndRadius",0);B.addGetterSetter(It,"fillRadialGradientColorStops");B.addGetterSetter(It,"fillPatternRepeat","repeat");B.addGetterSetter(It,"fillEnabled",!0);B.addGetterSetter(It,"strokeEnabled",!0);B.addGetterSetter(It,"shadowEnabled",!0);B.addGetterSetter(It,"dashEnabled",!0);B.addGetterSetter(It,"strokeScaleEnabled",!0);B.addGetterSetter(It,"fillPriority","color");B.addComponentsGetterSetter(It,"fillPatternOffset",["x","y"]);B.addGetterSetter(It,"fillPatternOffsetX",0,Ot());B.addGetterSetter(It,"fillPatternOffsetY",0,Ot());B.addComponentsGetterSetter(It,"fillPatternScale",["x","y"]);B.addGetterSetter(It,"fillPatternScaleX",1,Ot());B.addGetterSetter(It,"fillPatternScaleY",1,Ot());B.addComponentsGetterSetter(It,"fillLinearGradientStartPoint",["x","y"]);B.addComponentsGetterSetter(It,"strokeLinearGradientStartPoint",["x","y"]);B.addGetterSetter(It,"fillLinearGradientStartPointX",0);B.addGetterSetter(It,"strokeLinearGradientStartPointX",0);B.addGetterSetter(It,"fillLinearGradientStartPointY",0);B.addGetterSetter(It,"strokeLinearGradientStartPointY",0);B.addComponentsGetterSetter(It,"fillLinearGradientEndPoint",["x","y"]);B.addComponentsGetterSetter(It,"strokeLinearGradientEndPoint",["x","y"]);B.addGetterSetter(It,"fillLinearGradientEndPointX",0);B.addGetterSetter(It,"strokeLinearGradientEndPointX",0);B.addGetterSetter(It,"fillLinearGradientEndPointY",0);B.addGetterSetter(It,"strokeLinearGradientEndPointY",0);B.addComponentsGetterSetter(It,"fillRadialGradientStartPoint",["x","y"]);B.addGetterSetter(It,"fillRadialGradientStartPointX",0);B.addGetterSetter(It,"fillRadialGradientStartPointY",0);B.addComponentsGetterSetter(It,"fillRadialGradientEndPoint",["x","y"]);B.addGetterSetter(It,"fillRadialGradientEndPointX",0);B.addGetterSetter(It,"fillRadialGradientEndPointY",0);B.addGetterSetter(It,"fillPatternRotation",0);B.addGetterSetter(It,"fillRule",void 0,Sd());B.backCompat(It,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const xN="beforeDraw",ON="draw",ew=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],MN=ew.length;let bd=class extends Ar{constructor(t){super(t),this.canvas=new yh,this.hitCanvas=new rS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){xt.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!xt.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(xt.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(xt.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return xt.prototype.remove.call(this),t&&t.parentNode&&et._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),xt.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){et.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){et.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,et.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let s=0;s<MN;s++){const o=ew[s],c=this._getIntersection({x:t.x+o.x*e,y:t.y+o.y*e}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=i[3];if(s===255){const o=et.getHitColorKey(i[0],i[1],i[2]),c=V0[o];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas();return this._fire(xN,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),Ar.prototype.drawScene.call(this,o,e,i),this._fire(ON,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Ar.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return et.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};bd.prototype.nodeType="Layer";ai(bd);B.addGetterSetter(bd,"imageSmoothingEnabled",!0);B.addGetterSetter(bd,"clearBeforeDraw",!0);B.addGetterSetter(bd,"hitGraphEnabled",!0,Wo());class uS extends bd{constructor(t){super(t),this.listening(!1),et.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}uS.prototype.nodeType="FastLayer";ai(uS);let ep=class extends Ar{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to groups.")}};ep.prototype.nodeType="Group";ai(ep);const gE=(function(){return Kf.performance&&Kf.performance.now?function(){return Kf.performance.now()}:function(){return new Date().getTime()}})();class fo{constructor(t,e){this.id=fo.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gE(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=fo.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gE(),fo._addAnimation(this),this}stop(){return fo._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let o=0;o<s;o++)if(i[o].id===e){this.animations.splice(o,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],o=s.layers,c=s.func;s._updateFrameObject(gE());const f=o.length;let m;if(c?m=c.call(s,s.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const E=o[g];E._id!==void 0&&(t[E._id]=E)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=fo;t.animations.length?(t._runFrames(),et.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,et.requestAnimFrame(this._animationLoop))}}fo.animations=[];fo.animIdCounter=0;fo.animRunning=!1;const PN={node:1,duration:1,easing:1,onFinish:1,yoyo:1},VN=1,bA=2,AA=3,wA=["fill","stroke","shadowColor"];let kN=0;class LN{constructor(t,e,i,s,o,c,f){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=o-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=bA,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=AA,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===bA?this.setTime(t):this.state===AA&&this.setTime(this.duration-t)}pause(){this.state=VN,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Sn{constructor(t){const e=this,i=t.node,s=i._id,o=t.easing||k0.Linear,c=!!t.yoyo;let f,m;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=i,this._id=kN++;const g=i.getLayer()||(i instanceof Vt.Stage?i.getLayers():null);g||et.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new fo(function(){e.tween.onEnterFrame()},g),this.tween=new LN(m,function(E){e._tweenFunc(E)},o,0,1,f*1e3,c),this._addListeners(),Sn.attrs[s]||(Sn.attrs[s]={}),Sn.attrs[s][this._id]||(Sn.attrs[s][this._id]={}),Sn.tweens[s]||(Sn.tweens[s]={});for(m in t)PN[m]===void 0&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,s=i._id;let o,c,f,m,g;const E=Sn.tweens[s][t];E&&delete Sn.attrs[s][E][t];let b=i.getAttr(t);if(et._isArray(e))if(o=[],c=Math.max(e.length,b.length),t==="points"&&e.length!==b.length&&(e.length>b.length?(m=b,b=et._prepareArrayForTween(b,e,i.closed())):(f=e,e=et._prepareArrayForTween(e,b,i.closed()))),t.indexOf("fill")===0)for(let A=0;A<c;A++)if(A%2===0)o.push(e[A]-b[A]);else{const N=et.colorToRGBA(b[A]);g=et.colorToRGBA(e[A]),b[A]=N,o.push({r:g.r-N.r,g:g.g-N.g,b:g.b-N.b,a:g.a-N.a})}else for(let A=0;A<c;A++)o.push(e[A]-b[A]);else wA.indexOf(t)!==-1?(b=et.colorToRGBA(b),g=et.colorToRGBA(e),o={r:g.r-b.r,g:g.g-b.g,b:g.b-b.b,a:g.a-b.a}):o=e-b;Sn.attrs[s][this._id][t]={start:b,diff:o,end:e,trueEnd:f,trueStart:m},Sn.tweens[s][t]=this._id}_tweenFunc(t){const e=this.node,i=Sn.attrs[e._id][this._id];let s,o,c,f,m,g,E,b;for(s in i){if(o=i[s],c=o.start,f=o.diff,b=o.end,et._isArray(c))if(m=[],E=Math.max(c.length,b.length),s.indexOf("fill")===0)for(g=0;g<E;g++)g%2===0?m.push((c[g]||0)+f[g]*t):m.push("rgba("+Math.round(c[g].r+f[g].r*t)+","+Math.round(c[g].g+f[g].g*t)+","+Math.round(c[g].b+f[g].b*t)+","+(c[g].a+f[g].a*t)+")");else for(g=0;g<E;g++)m.push((c[g]||0)+f[g]*t);else wA.indexOf(s)!==-1?m="rgba("+Math.round(c.r+f.r*t)+","+Math.round(c.g+f.g*t)+","+Math.round(c.b+f.b*t)+","+(c.a+f.a*t)+")":m=c+f*t;e.setAttr(s,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=Sn.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=Sn.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=Sn.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete Sn.tweens[t][s];delete Sn.attrs[t][e],Sn.tweens[t]&&(Object.keys(Sn.tweens[t]).length===0&&delete Sn.tweens[t],Object.keys(Sn.attrs[t]).length===0&&delete Sn.attrs[t])}}Sn.attrs={};Sn.tweens={};xt.prototype.to=function(n){const t=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),t&&t()},new Sn(n).play()};const k0={BackEaseIn(n,t,e,i){return e*(n/=i)*n*((1.70158+1)*n-1.70158)+t},BackEaseOut(n,t,e,i){return e*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+t},BackEaseInOut(n,t,e,i){let s=1.70158;return(n/=i/2)<1?e/2*(n*n*(((s*=1.525)+1)*n-s))+t:e/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},ElasticEaseIn(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t)},ElasticEaseOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/o)+e+t)},ElasticEaseInOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i/2)===2?t+e:(o||(o=i*(.3*1.5)),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o)*.5+e+t)},BounceEaseOut(n,t,e,i){return(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},BounceEaseIn(n,t,e,i){return e-k0.BounceEaseOut(i-n,0,e,i)+t},BounceEaseInOut(n,t,e,i){return n<i/2?k0.BounceEaseIn(n*2,0,e,i)*.5+t:k0.BounceEaseOut(n*2-i,0,e,i)*.5+e*.5+t},EaseIn(n,t,e,i){return e*(n/=i)*n+t},EaseOut(n,t,e,i){return-e*(n/=i)*(n-2)+t},EaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*(--n*(n-2)-1)+t},StrongEaseIn(n,t,e,i){return e*(n/=i)*n*n*n*n+t},StrongEaseOut(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},StrongEaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},Linear(n,t,e,i){return e*n/i+t}},np=et._assign(Vt,{Util:et,Transform:Sr,Node:xt,Container:Ar,Stage:Pv,stages:P0,Layer:bd,FastLayer:uS,Group:ep,DD:Ze,Shape:It,shapes:V0,Animation:fo,Tween:Sn,Easings:k0,Context:Ov,Canvas:aS});class $u extends It{_sceneFunc(t){const e=Vt.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=Vt.getAngle(i?360-this.angle():this.angle()),o=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),m=Math.sin(Math.min(s,Math.PI/2)),g=o*(o>0?t:e),E=c*e,b=f*(f>0?t:e),A=m*(m>0?e:t);return{x:g,y:i?-1*A:b,width:E-g,height:A-b}}}$u.prototype._centroid=!0;$u.prototype.className="Arc";$u.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];ai($u);B.addGetterSetter($u,"innerRadius",0,Ot());B.addGetterSetter($u,"outerRadius",0,Ot());B.addGetterSetter($u,"angle",0,Ot());B.addGetterSetter($u,"clockwise",!1,Wo());function oT(n,t,e,i,s,o,c){const f=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),m=Math.sqrt(Math.pow(s-e,2)+Math.pow(o-i,2)),g=c*f/(f+m),E=c*m/(f+m),b=e-g*(s-n),A=i-g*(o-t),N=e+E*(s-n),D=i+E*(o-t);return[b,A,N,D]}function RA(n,t){const e=n.length,i=[];for(let s=2;s<e-2;s+=2){const o=oT(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],t);isNaN(o[0])||(i.push(o[0]),i.push(o[1]),i.push(n[s]),i.push(n[s+1]),i.push(o[2]),i.push(o[3]))}return i}function UN(n){const t=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],e=[];for(const i of t){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const o=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=o*o-4*s*c;if(f>=0){const m=Math.sqrt(f);e.push((-o+m)/(2*s)),e.push((-o-m)/(2*s))}}}return e.filter(i=>i>0&&i<1).flatMap(i=>t.map(s=>{const o=1-i;return o*o*o*s[0]+3*o*o*i*s[1]+3*o*i*i*s[2]+i*i*i*s[3]}))}let tc=class extends It{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),i=e.length,s=this.tension(),o=this.closed(),c=this.bezier();if(!i)return;let f=0;if(t.beginPath(),t.moveTo(e[0],e[1]),s!==0&&i>4){const m=this.getTensionPoints(),g=m.length;for(f=o?0:4,o||t.quadraticCurveTo(m[0],m[1],m[2],m[3]);f<g-2;)t.bezierCurveTo(m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]);o||t.quadraticCurveTo(m[g-2],m[g-1],e[i-2],e[i-1])}else if(c)for(f=2;f<i;)t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);else for(f=2;f<i;f+=2)t.lineTo(e[f],e[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():RA(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=oT(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=oT(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),c=RA(t,i);return[s[2],s[3]].concat(c).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...UN(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);return{x:e,y:s,width:i-e,height:o-s}}};tc.prototype.className="Line";tc.prototype._attrsAffectingSize=["points","bezier","tension"];ai(tc);B.addGetterSetter(tc,"closed",!1);B.addGetterSetter(tc,"bezier",!1);B.addGetterSetter(tc,"tension",0,Ot());B.addGetterSetter(tc,"points",[],tN());const zN=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],BN=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],GN=[[1],[1,1],[1,2,1],[1,3,3,1]],CA=(n,t,e)=>{let i,s;const c=e/2;i=0;for(let f=0;f<20;f++)s=c*zN[20][f]+c,i+=BN[20][f]*qN(n,t,s);return c*i},IA=(n,t,e)=>{e===void 0&&(e=1);const i=n[0]-2*n[1]+n[2],s=t[0]-2*t[1]+t[2],o=2*n[1]-2*n[0],c=2*t[1]-2*t[0],f=4*(i*i+s*s),m=4*(i*o+s*c),g=o*o+c*c;if(f===0)return e*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(t[2]-t[0],2));const E=m/(2*f),b=g/f,A=e+E,N=b-E*E,D=A*A+N>0?Math.sqrt(A*A+N):0,k=E*E+N>0?Math.sqrt(E*E+N):0,U=E+Math.sqrt(E*E+N)!==0?N*Math.log(Math.abs((A+D)/(E+k))):0;return Math.sqrt(f)/2*(A*D-E*k+U)};function qN(n,t,e){const i=lT(1,e,n),s=lT(1,e,t),o=i*i+s*s;return Math.sqrt(o)}const lT=(n,t,e)=>{const i=e.length-1;let s,o;if(i===0)return 0;if(n===0){o=0;for(let c=0;c<=i;c++)o+=GN[i][c]*Math.pow(1-t,i-c)*Math.pow(t,c)*e[c];return o}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(e[c+1]-e[c]);return lT(n-1,t,s)}},NA=(n,t,e)=>{let i=1,s=n/t,o=(n-e(s))/t,c=0;for(;i>.001;){const f=e(s+o),m=Math.abs(n-f)/t;if(m<i)i=m,s+=o;else{const g=e(s-o),E=Math.abs(n-g)/t;E<i?(i=E,s-=o):o/=2}if(c++,c>500)break}return s};class bn extends It{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=bn.parsePathData(this.data()),this.pathLength=bn.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<e.length;s++){const o=e[s].command,c=e[s].points;switch(o){case"L":t.lineTo(c[0],c[1]);break;case"M":t.moveTo(c[0],c[1]);break;case"C":t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],m=c[1],g=c[2],E=c[3],b=c[4],A=c[5],N=c[6],D=c[7],k=g>E?g:E,U=g>E?1:g/E,j=g>E?E/g:1;t.translate(f,m),t.rotate(N),t.scale(U,j),t.arc(0,0,k,b,b+A,1-D),t.scale(1/U,1/j),t.rotate(-N),t.translate(-f,-m);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(m){if(m.command==="A"){const g=m.points[4],E=m.points[5],b=m.points[4]+E;let A=Math.PI/180;if(Math.abs(g-b)<A&&(A=Math.abs(g-b)),E<0)for(let N=g-A;N>b;N-=A){const D=bn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}else for(let N=g+A;N<b;N+=A){const D=bn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}}else if(m.command==="C")for(let g=0;g<=1;g+=.01){const E=bn.getPointOnCubicBezier(g,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);t.push(E.x,E.y)}else t=t.concat(m.points)});let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],isNaN(c)||(e=Math.min(e,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),o=Math.max(o,f));return{x:e,y:s,width:i-e,height:o-s}}getLength(){return this.pathLength}getPointAtLength(t){return bn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,o=e.length;if(!o)return null;for(;s<o&&t>e[s].pathLength;)t-=e[s].pathLength,++s;if(s===o)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return e[s].command==="M"?(i=e[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:e[s].start.x,y:e[s].start.y};const c=e[s],f=c.points;switch(c.command){case"L":return bn.getPointOnLine(t,c.start.x,c.start.y,f[0],f[1]);case"C":return bn.getPointOnCubicBezier(NA(t,bn.getPathLength(e),k=>CA([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],k)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return bn.getPointOnQuadraticBezier(NA(t,bn.getPathLength(e),k=>IA([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],k)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const m=f[0],g=f[1],E=f[2],b=f[3],A=f[5],N=f[6];let D=f[4];return D+=A*t/c.pathLength,bn.getPointOnEllipticalArc(m,g,E,b,D,N)}return null}static getPointOnLine(t,e,i,s,o,c,f){c=c??e,f=f??i;const m=this.getLineLength(e,i,s,o);if(m<1e-10)return{x:e,y:i};if(s===e)return{x:c,y:f+(o>i?t:-t)};const g=(o-i)/(s-e),E=Math.sqrt(t*t/(1+g*g))*(s<e?-1:1),b=g*E;if(Math.abs(f-i-g*(c-e))<1e-10)return{x:c+E,y:f+b};const A=((c-e)*(s-e)+(f-i)*(o-i))/(m*m),N=e+A*(s-e),D=i+A*(o-i),k=this.getLineLength(c,f,N,D),U=Math.sqrt(t*t-k*k),j=Math.sqrt(U*U/(1+g*g))*(s<e?-1:1),K=g*j;return{x:N+j,y:D+K}}static getPointOnCubicBezier(t,e,i,s,o,c,f,m,g){function E(U){return U*U*U}function b(U){return 3*U*U*(1-U)}function A(U){return 3*U*(1-U)*(1-U)}function N(U){return(1-U)*(1-U)*(1-U)}const D=m*E(t)+c*b(t)+s*A(t)+e*N(t),k=g*E(t)+f*b(t)+o*A(t)+i*N(t);return{x:D,y:k}}static getPointOnQuadraticBezier(t,e,i,s,o,c,f){function m(N){return N*N}function g(N){return 2*N*(1-N)}function E(N){return(1-N)*(1-N)}const b=c*m(t)+s*g(t)+e*E(t),A=f*m(t)+o*g(t)+i*E(t);return{x:b,y:A}}static getPointOnEllipticalArc(t,e,i,s,o,c){const f=Math.cos(c),m=Math.sin(c),g={x:i*Math.cos(o),y:s*Math.sin(o)};return{x:t+(g.x*f-g.y*m),y:e+(g.x*m+g.y*f)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let b=0;b<i.length;b++)e=e.replace(new RegExp(i[b],"g"),"|"+i[b]);const s=e.split("|"),o=[],c=[];let f=0,m=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let E;for(let b=1;b<s.length;b++){let A=s[b],N=A.charAt(0);for(A=A.slice(1),c.length=0;E=g.exec(A);)c.push(E[0]);let D=[],k=N==="A"||N==="a"?0:-1;for(let U=0,j=c.length;U<j;U++){const K=c[U];if(K==="00"){D.push(0,0),k>=0&&(k+=2,k>=7&&(k-=7));continue}if(k>=0){if(k===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(K)){D.push(parseInt(K[0],10)),D.push(parseInt(K[1],10)),D.push(parseFloat(K.slice(2))),k+=3,k>=7&&(k-=7);continue}if(K==="11"||K==="10"||K==="01"){D.push(parseInt(K[0],10)),D.push(parseInt(K[1],10)),k+=2,k>=7&&(k-=7);continue}if(K==="0"||K==="1"){D.push(parseInt(K,10)),k+=1,k>=7&&(k-=7);continue}}else if(k===4){if(/^[01]\d+(?:\.\d+)?$/.test(K)){D.push(parseInt(K[0],10)),D.push(parseFloat(K.slice(1))),k+=2,k>=7&&(k-=7);continue}if(K==="0"||K==="1"){D.push(parseInt(K,10)),k+=1,k>=7&&(k-=7);continue}}const X=parseFloat(K);isNaN(X)?D.push(0):D.push(X),k+=1,k>=7&&(k-=7)}else{const X=parseFloat(K);isNaN(X)?D.push(0):D.push(X)}}for(;D.length>0&&!isNaN(D[0]);){let U="",j=[];const K=f,X=m;let Z,pt,ot,V,M,L,q,G,F,z;switch(N){case"l":f+=D.shift(),m+=D.shift(),U="L",j.push(f,m);break;case"L":f=D.shift(),m=D.shift(),j.push(f,m);break;case"m":const Ft=D.shift(),Lt=D.shift();if(f+=Ft,m+=Lt,U="M",o.length>2&&o[o.length-1].command==="z"){for(let W=o.length-2;W>=0;W--)if(o[W].command==="M"){f=o[W].points[0]+Ft,m=o[W].points[1]+Lt;break}}j.push(f,m),N="l";break;case"M":f=D.shift(),m=D.shift(),U="M",j.push(f,m),N="L";break;case"h":f+=D.shift(),U="L",j.push(f,m);break;case"H":f=D.shift(),U="L",j.push(f,m);break;case"v":m+=D.shift(),U="L",j.push(f,m);break;case"V":m=D.shift(),U="L",j.push(f,m);break;case"C":j.push(D.shift(),D.shift(),D.shift(),D.shift()),f=D.shift(),m=D.shift(),j.push(f,m);break;case"c":j.push(f+D.shift(),m+D.shift(),f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",j.push(f,m);break;case"S":pt=f,ot=m,Z=o[o.length-1],Z.command==="C"&&(pt=f+(f-Z.points[2]),ot=m+(m-Z.points[3])),j.push(pt,ot,D.shift(),D.shift()),f=D.shift(),m=D.shift(),U="C",j.push(f,m);break;case"s":pt=f,ot=m,Z=o[o.length-1],Z.command==="C"&&(pt=f+(f-Z.points[2]),ot=m+(m-Z.points[3])),j.push(pt,ot,f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",j.push(f,m);break;case"Q":j.push(D.shift(),D.shift()),f=D.shift(),m=D.shift(),j.push(f,m);break;case"q":j.push(f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="Q",j.push(f,m);break;case"T":pt=f,ot=m,Z=o[o.length-1],Z.command==="Q"&&(pt=f+(f-Z.points[0]),ot=m+(m-Z.points[1])),f=D.shift(),m=D.shift(),U="Q",j.push(pt,ot,f,m);break;case"t":pt=f,ot=m,Z=o[o.length-1],Z.command==="Q"&&(pt=f+(f-Z.points[0]),ot=m+(m-Z.points[1])),f+=D.shift(),m+=D.shift(),U="Q",j.push(pt,ot,f,m);break;case"A":V=D.shift(),M=D.shift(),L=D.shift(),q=D.shift(),G=D.shift(),F=f,z=m,f=D.shift(),m=D.shift(),U="A",j=this.convertEndpointToCenterParameterization(F,z,f,m,q,G,V,M,L);break;case"a":V=D.shift(),M=D.shift(),L=D.shift(),q=D.shift(),G=D.shift(),F=f,z=m,f+=D.shift(),m+=D.shift(),U="A",j=this.convertEndpointToCenterParameterization(F,z,f,m,q,G,V,M,L);break}o.push({command:U||N,points:j,start:{x:K,y:X},pathLength:this.calcLength(K,X,U||N,j)})}(N==="z"||N==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,i,s){let o,c,f,m;const g=bn;switch(i){case"L":return g.getLineLength(t,e,s[0],s[1]);case"C":return CA([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return IA([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":o=0;const E=s[4],b=s[5],A=s[4]+b;let N=Math.PI/180;if(Math.abs(E-A)<N&&(N=Math.abs(E-A)),c=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],E,0),b<0)for(m=E-N;m>A;m-=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(m=E+N;m<A;m+=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],A,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(t,e,i,s,o,c,f,m,g){const E=g*(Math.PI/180),b=Math.cos(E)*(t-i)/2+Math.sin(E)*(e-s)/2,A=-1*Math.sin(E)*(t-i)/2+Math.cos(E)*(e-s)/2,N=b*b/(f*f)+A*A/(m*m);N>1&&(f*=Math.sqrt(N),m*=Math.sqrt(N));let D=Math.sqrt((f*f*(m*m)-f*f*(A*A)-m*m*(b*b))/(f*f*(A*A)+m*m*(b*b)));o===c&&(D*=-1),isNaN(D)&&(D=0);const k=D*f*A/m,U=D*-m*b/f,j=(t+i)/2+Math.cos(E)*k-Math.sin(E)*U,K=(e+s)/2+Math.sin(E)*k+Math.cos(E)*U,X=function(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])},Z=function(q,G){return(q[0]*G[0]+q[1]*G[1])/(X(q)*X(G))},pt=function(q,G){return(q[0]*G[1]<q[1]*G[0]?-1:1)*Math.acos(Z(q,G))},ot=pt([1,0],[(b-k)/f,(A-U)/m]),V=[(b-k)/f,(A-U)/m],M=[(-1*b-k)/f,(-1*A-U)/m];let L=pt(V,M);return Z(V,M)<=-1&&(L=Math.PI),Z(V,M)>=1&&(L=0),c===0&&L>0&&(L=L-2*Math.PI),c===1&&L<0&&(L=L+2*Math.PI),[j,K,f,m,ot,L,E,c]}}bn.prototype.className="Path";bn.prototype._attrsAffectingSize=["data"];ai(bn);B.addGetterSetter(bn,"data");class Ad extends tc{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,i=this.points();let s=i;const o=this.tension()!==0&&i.length>4;o&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let m,g;if(o){const A=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],N=bn.calcLength(s[s.length-4],s[s.length-3],"C",A),D=bn.getPointOnQuadraticBezier(Math.min(1,1-c/N),A[0],A[1],A[2],A[3],A[4],A[5]);m=i[f-2]-D.x,g=i[f-1]-D.y}else m=i[f-2]-i[f-4],g=i[f-1]-i[f-3];const E=(Math.atan2(g,m)+e)%e,b=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[f-2],i[f-1]),t.rotate(E),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),o?(m=(s[0]+s[2])/2-i[0],g=(s[1]+s[3])/2-i[1]):(m=i[2]-i[0],g=i[3]-i[1]),t.rotate((Math.atan2(-g,-m)+e)%e),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}Ad.prototype.className="Arrow";ai(Ad);B.addGetterSetter(Ad,"pointerLength",10,Ot());B.addGetterSetter(Ad,"pointerWidth",10,Ot());B.addGetterSetter(Ad,"pointerAtBeginning",!1);B.addGetterSetter(Ad,"pointerAtEnding",!0);let Cp=class extends It{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Cp.prototype._centroid=!0;Cp.prototype.className="Circle";Cp.prototype._attrsAffectingSize=["radius"];ai(Cp);B.addGetterSetter(Cp,"radius",0,Ot());class Uh extends It{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Uh.prototype.className="Ellipse";Uh.prototype._centroid=!0;Uh.prototype._attrsAffectingSize=["radiusX","radiusY"];ai(Uh);B.addComponentsGetterSetter(Uh,"radius",["x","y"]);B.addGetterSetter(Uh,"radiusX",0,Ot());B.addGetterSetter(Uh,"radiusY",0,Ot());let Zo=class nw extends It{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),o=this.attrs.image;let c;if(o){const f=this.attrs.cropWidth,m=this.attrs.cropHeight;f&&m?c=[o,this.cropX(),this.cropY(),f,m,0,0,e,i]:c=[o,0,0,e,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),o&&(s&&t.clip(),t.drawImage.apply(t,c))}_hitFunc(t){const e=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return(i=(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:0}getHeight(){var t,e,i;return(i=(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}static fromURL(t,e,i=null){const s=et.createImageElement();s.onload=function(){const o=new nw({image:s});e(o)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}};Zo.prototype.className="Image";Zo.prototype._attrsAffectingSize=["image"];ai(Zo);B.addGetterSetter(Zo,"cornerRadius",0,Mv(4));B.addGetterSetter(Zo,"image");B.addComponentsGetterSetter(Zo,"crop",["x","y","width","height"]);B.addGetterSetter(Zo,"cropX",0,Ot());B.addGetterSetter(Zo,"cropY",0,Ot());B.addGetterSetter(Zo,"cropWidth",0,Ot());B.addGetterSetter(Zo,"cropHeight",0,Ot());const iw=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],HN="Change.konva",FN="none",uT="up",cT="right",hT="down",fT="left",jN=iw.length;class cS extends ep{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i;const s=function(){e._sync()};for(i=0;i<jN;i++)t.on(iw[i]+HN,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,s,o,c,f,m,g;if(t&&e){switch(i=t.width(),s=t.height(),o=e.pointerDirection(),c=e.pointerWidth(),g=e.pointerHeight(),f=0,m=0,o){case uT:f=i/2,m=-1*g;break;case cT:f=i+c,m=s/2;break;case hT:f=i/2,m=s+g;break;case fT:f=-1*c,m=s/2;break}e.setAttrs({x:-1*f,y:-1*m,width:i,height:s}),t.setAttrs({x:-1*f,y:-1*m})}}}cS.prototype.className="Label";ai(cS);class wd extends It{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),o=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let m=0,g=0,E=0,b=0;typeof f=="number"?m=g=E=b=Math.min(f,e/2,i/2):(m=Math.min(f[0]||0,e/2,i/2),g=Math.min(f[1]||0,e/2,i/2),b=Math.min(f[2]||0,e/2,i/2),E=Math.min(f[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(m,0),s===uT&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+o)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),s===cT&&(t.lineTo(e,(i-c)/2),t.lineTo(e+o,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i-b),t.arc(e-b,i-b,b,0,Math.PI/2,!1),s===hT&&(t.lineTo((e+o)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-o)/2,i)),t.lineTo(E,i),t.arc(E,i-E,E,Math.PI/2,Math.PI,!1),s===fT&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-c)/2)),t.lineTo(0,m),t.arc(m,m,m,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),o=this.pointerDirection(),c=this.width(),f=this.height();return o===uT?(e-=s,f+=s):o===hT?f+=s:o===fT?(t-=i*1.5,c+=i):o===cT&&(c+=i*1.5),{x:t,y:e,width:c,height:f}}}wd.prototype.className="Tag";ai(wd);B.addGetterSetter(wd,"pointerDirection",FN);B.addGetterSetter(wd,"pointerWidth",0,Ot());B.addGetterSetter(wd,"pointerHeight",0,Ot());B.addGetterSetter(wd,"cornerRadius",0,Mv(4));let b_=class extends It{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?et.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}};b_.prototype.className="Rect";ai(b_);B.addGetterSetter(b_,"cornerRadius",0,Mv(4));class zh extends It{_sceneFunc(t){const e=this._getPoints(),i=this.radius(),s=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)et.drawRoundedPolygonPath(t,e,s,i,o);else{t.moveTo(e[0].x,e[0].y);for(let c=1;c<e.length;c++)t.lineTo(e[c].x,e[c].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(s*2*Math.PI/t),y:-1*e*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].x,s=t[0].y,o=t[0].y;return t.forEach(c=>{e=Math.min(e,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),o=Math.max(o,c.y)}),{x:e,y:s,width:i-e,height:o-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}zh.prototype.className="RegularPolygon";zh.prototype._centroid=!0;zh.prototype._attrsAffectingSize=["radius"];ai(zh);B.addGetterSetter(zh,"radius",0,Ot());B.addGetterSetter(zh,"sides",0,Ot());B.addGetterSetter(zh,"cornerRadius",0,Mv(4));const DA=Math.PI*2;class Rd extends It{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,DA,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),DA,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Rd.prototype.className="Ring";Rd.prototype._centroid=!0;Rd.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ai(Rd);B.addGetterSetter(Rd,"innerRadius",0,Ot());B.addGetterSetter(Rd,"outerRadius",0,Ot());class $l extends It{constructor(t){super(t),this._updated=!0,this.anim=new fo(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+0],m=o[s+1],g=o[s+2],E=o[s+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,E),t.closePath(),t.fillStrokeShape(this)),b)if(c){const A=c[e],N=i*2;t.drawImage(b,f,m,g,E,A[N+0],A[N+1],g,E)}else t.drawImage(b,f,m,g,E,0,0,g,E)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+2],m=o[s+3];if(t.beginPath(),c){const g=c[e],E=i*2;t.rect(g[E+0],g[E+1],f,m)}else t.rect(0,0,f,m);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],o=s.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}$l.prototype.className="Sprite";ai($l);B.addGetterSetter($l,"animation");B.addGetterSetter($l,"animations");B.addGetterSetter($l,"frameOffsets");B.addGetterSetter($l,"image");B.addGetterSetter($l,"frameIndex",0,Ot());B.addGetterSetter($l,"frameRate",17,Ot());B.backCompat($l,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Bh extends It{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let o=1;o<s*2;o++){const c=o%2===0?i:e,f=c*Math.sin(o*Math.PI/s),m=-1*c*Math.cos(o*Math.PI/s);t.lineTo(f,m)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Bh.prototype.className="Star";Bh.prototype._centroid=!0;Bh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ai(Bh);B.addGetterSetter(Bh,"numPoints",5,Ot());B.addGetterSetter(Bh,"innerRadius",0,Ot());B.addGetterSetter(Bh,"outerRadius",0,Ot());function _h(n){return[...n].reduce((t,e,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const o=s[i+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(e+o),s[i+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const Nm="auto",KN="center",sw="inherit",o0="justify",YN="Change.konva",QN="2d",xA="-",aw="left",XN="text",JN="Text",WN="top",ZN="bottom",OA="middle",rw="normal",$N="px ",E1=" ",tD="right",MA="rtl",eD="word",nD="char",PA="none",_E="",ow=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],iD=ow.length;function sD(n){return n.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}let T1;function yE(){return T1||(T1=et.createCanvasElement().getContext(QN),T1)}function aD(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function rD(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function oD(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let Rn=class extends It{constructor(t){super(oD(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<iD;e++)this.on(ow[e]+YN,this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;const s=this.textArr,o=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),m=this.lineHeight()*f,g=this.verticalAlign(),E=this.direction(),b=0,A=this.align(),N=this.getWidth(),D=this.letterSpacing(),k=this.charRenderFunc(),U=this.fill(),j=this.textDecoration(),K=this.underlineOffset(),X=j.indexOf("underline")!==-1,Z=j.indexOf("line-through")!==-1,pt;E=E===sw?t.direction:E;let ot=m/2,V=OA;if(!Vt.legacyTextRendering){const M=this.measureSize("M");V="alphabetic";const L=(e=M.fontBoundingBoxAscent)!==null&&e!==void 0?e:M.actualBoundingBoxAscent,q=(i=M.fontBoundingBoxDescent)!==null&&i!==void 0?i:M.actualBoundingBoxDescent;ot=(L-q)/2+m/2}for(E===MA&&t.setAttr("direction",E),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",V),t.setAttr("textAlign",aw),g===OA?b=(this.getHeight()-o*m-c*2)/2:g===ZN&&(b=this.getHeight()-o*m-c*2),t.translate(c,b+c),pt=0;pt<o;pt++){let M=0,L=0;const q=s[pt],G=q.text,F=q.width,z=q.lastInParagraph;if(t.save(),A===tD?M+=N-F-c*2:A===KN&&(M+=(N-F-c*2)/2),X){t.save(),t.beginPath();const Lt=K??(Vt.legacyTextRendering?Math.round(f/2):Math.round(f/4)),W=M,Et=ot+L+Lt;t.moveTo(W,Et);const vt=A===o0&&!z?N-c*2:F;t.lineTo(W+Math.round(vt),Et),t.lineWidth=f/15;const Ut=this._getLinearGradient();t.strokeStyle=Ut||U,t.stroke(),t.restore()}const Ft=M;if(E!==MA&&(D!==0||A===o0||k)){const Lt=G.split(" ").length-1,W=_h(G);for(let Et=0;Et<W.length;Et++){const vt=W[Et];if(vt===" "&&!z&&A===o0&&(M+=(N-c*2-F)/Lt),this._partialTextX=M,this._partialTextY=ot+L,this._partialText=vt,k){t.save();const Kt=s.slice(0,pt).reduce((ct,Ct)=>ct+_h(Ct.text).length,0),H=Et+Kt;k({char:vt,index:H,x:M,y:ot+L,lineIndex:pt,column:Et,isLastInLine:z,width:this.measureSize(vt).width,context:t})}t.fillStrokeShape(this),k&&t.restore(),M+=this.measureSize(vt).width+D}}else D!==0&&t.setAttr("letterSpacing",`${D}px`),this._partialTextX=M,this._partialTextY=ot+L,this._partialText=G,t.fillStrokeShape(this);if(Z){t.save(),t.beginPath();const Lt=Vt.legacyTextRendering?0:-Math.round(f/4),W=Ft;t.moveTo(W,ot+L+Lt);const Et=A===o0&&!z?N-c*2:F;t.lineTo(W+Math.round(Et),ot+L+Lt),t.lineWidth=f/15;const vt=this._getLinearGradient();t.strokeStyle=vt||U,t.stroke(),t.restore()}t.restore(),o>1&&(ot+=m)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=et._isString(t)?t:t==null?"":t+"";return this._setAttr(XN,e),this}getWidth(){return this.attrs.width===Nm||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Nm||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,o,c,f,m,g,E,b,A;let N=yE(),D=this.fontSize(),k;N.save(),N.font=this._getContextFont(),k=N.measureText(t),N.restore();const U=D/100;return{actualBoundingBoxAscent:(e=k.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*U,actualBoundingBoxDescent:(i=k.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=k.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*U,actualBoundingBoxRight:(o=k.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*U,alphabeticBaseline:(c=k.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=k.emHeightAscent)!==null&&f!==void 0?f:100*U,emHeightDescent:(m=k.emHeightDescent)!==null&&m!==void 0?m:-20*U,fontBoundingBoxAscent:(g=k.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*U,fontBoundingBoxDescent:(E=k.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*U,hangingBaseline:(b=k.hangingBaseline)!==null&&b!==void 0?b:72.80000305175781*U,ideographicBaseline:(A=k.ideographicBaseline)!==null&&A!==void 0?A:-21*U,width:k.width,height:D}}_getContextFont(){return this.fontStyle()+E1+this.fontVariant()+E1+(this.fontSize()+$N)+sD(this.fontFamily())}_addTextLine(t){this.align()===o0&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return yE().measureText(t).width+e*i}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),i=0,s=this.lineHeight()*e,o=this.attrs.width,c=this.attrs.height,f=o!==Nm&&o!==void 0,m=c!==Nm&&c!==void 0,g=this.padding(),E=o-g*2,b=c-g*2,A=0,N=this.wrap(),D=N!==PA,k=N!==nD&&D,U=this.ellipsis();this.textArr=[],yE().font=this._getContextFont();const j=U?this._getTextWidth(_E):0;for(let K=0,X=t.length;K<X;++K){let Z=t[K],pt=this._getTextWidth(Z);if(f&&pt>E)for(;Z.length>0;){let ot=0,V=_h(Z).length,M="",L=0;for(;ot<V;){const q=ot+V>>>1,G=_h(Z),F=G.slice(0,q+1).join(""),z=this._getTextWidth(F);(U&&m&&A+s>b?z+j:z)<=E?(ot=q+1,M=F,L=z):V=q}if(M){if(k){const F=_h(Z),z=_h(M),Ft=F[z.length],Lt=Ft===E1||Ft===xA;let W;if(Lt&&L<=E)W=z.length;else{const Et=z.lastIndexOf(E1),vt=z.lastIndexOf(xA);W=Math.max(Et,vt)+1}W>0&&(ot=W,M=F.slice(0,ot).join(""),L=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,L),A+=s,this._shouldHandleEllipsis(A)){this._tryToAddEllipsisToLastLine();break}if(Z=_h(Z).slice(ot).join("").trimLeft(),Z.length>0&&(pt=this._getTextWidth(Z),pt<=E)){this._addTextLine(Z),A+=s,i=Math.max(i,pt);break}}else break}else this._addTextLine(Z),A+=s,i=Math.max(i,pt),this._shouldHandleEllipsis(A)&&K<X-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),m&&A+s>b)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,o=s!==Nm&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==PA)||o&&t+i>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==Nm&&t!==void 0,i=this.padding(),s=t-i*2,o=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!o||(e&&(this._getTextWidth(c.text+_E)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+_E))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};Rn.prototype._fillFunc=aD;Rn.prototype._strokeFunc=rD;Rn.prototype.className=JN;Rn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];ai(Rn);B.overWriteSetter(Rn,"width",oS());B.overWriteSetter(Rn,"height",oS());B.addGetterSetter(Rn,"direction",sw);B.addGetterSetter(Rn,"fontFamily","Arial");B.addGetterSetter(Rn,"fontSize",12,Ot());B.addGetterSetter(Rn,"fontStyle",rw);B.addGetterSetter(Rn,"fontVariant",rw);B.addGetterSetter(Rn,"padding",0,Ot());B.addGetterSetter(Rn,"align",aw);B.addGetterSetter(Rn,"verticalAlign",WN);B.addGetterSetter(Rn,"lineHeight",1,Ot());B.addGetterSetter(Rn,"wrap",eD);B.addGetterSetter(Rn,"ellipsis",!1,Wo());B.addGetterSetter(Rn,"letterSpacing",0,Ot());B.addGetterSetter(Rn,"text","",Sd());B.addGetterSetter(Rn,"textDecoration","");B.addGetterSetter(Rn,"underlineOffset",void 0,Ot());B.addGetterSetter(Rn,"charRenderFunc",void 0);const lD="",lw="normal";function uw(n){n.fillText(this.partialText,0,0)}function cw(n){n.strokeText(this.partialText,0,0)}class Wi extends It{constructor(t){super(t),this.dummyCanvas=et.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return bn.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t>e?null:bn.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=bn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),o=this.glyphInfo,c=e.indexOf("underline")!==-1,f=e.indexOf("line-through")!==-1;c&&t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),this.partialText=o[m].text,t.fillStrokeShape(this),c&&(m===0&&t.moveTo(0,s/2+1),t.lineTo(o[m].width,s/2+1)),t.restore()}if(c&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),f){t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),m===0&&t.moveTo(0,0),t.lineTo(o[m].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Rn.prototype.setText.call(this,t)}_getContextFont(){return Rn.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=_h(this.text()),e=[];let i=0;for(let b=0;b<t.length;b++)e.push({char:t[b],width:this._getTextSize(t[b]).width}),i+=e[b].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-m/2)),c==="right"&&(g=Math.max(0,this.pathLength-m));let E=g;for(let b=0;b<e.length;b++){const A=this._getPointAtLength(E);if(!A)return;const N=e[b].char;let D=e[b].width+o;if(N===" "&&c==="justify"){const Z=this.text().split(" ").length-1;D+=(this.pathLength-m)/Z}const k=this._getPointAtLength(E+D);if(!k)return;const U=bn.getLineLength(A.x,A.y,k.x,k.y);let j=0;if(f)try{j=f(e[b-1].char,N)*this.fontSize()}catch{j=0}A.x+=j,k.x+=j,this.textWidth+=j;const K=bn.getPointOnLine(j+U/2,A.x,A.y,k.x,k.y),X=Math.atan2(k.y-A.y,k.x-A.x);this.glyphInfo.push({transposeX:K.x,transposeY:K.y,text:t[b],rotation:X,p0:A,p1:k,width:U}),E+=D}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,i=t[0]||0,s=t[1]||0,o=t[1]||0,c,f;for(let g=0;g<t.length/2;g++)c=t[g*2],f=t[g*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);const m=this.fontSize();return{x:e-m/2,y:s-m/2,width:i-e+m,height:o-s+m}}destroy(){return et.releaseCanvas(this.dummyCanvas),super.destroy()}}Wi.prototype._fillFunc=uw;Wi.prototype._strokeFunc=cw;Wi.prototype._fillFuncHit=uw;Wi.prototype._strokeFuncHit=cw;Wi.prototype.className="TextPath";Wi.prototype._attrsAffectingSize=["text","fontSize","data"];ai(Wi);B.addGetterSetter(Wi,"data");B.addGetterSetter(Wi,"fontFamily","Arial");B.addGetterSetter(Wi,"fontSize",12,Ot());B.addGetterSetter(Wi,"fontStyle",lw);B.addGetterSetter(Wi,"align","left");B.addGetterSetter(Wi,"letterSpacing",0,Ot());B.addGetterSetter(Wi,"textBaseline","middle");B.addGetterSetter(Wi,"fontVariant",lw);B.addGetterSetter(Wi,"text",lD);B.addGetterSetter(Wi,"textDecoration","");B.addGetterSetter(Wi,"kerningFunc",void 0);const hw="tr-konva",uD=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${hw}`).join(" "),VA="nodesRect",cD=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],hD={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},fD="ontouchstart"in Vt._global;function dD(n,t,e){if(n==="rotater")return e;t+=et.degToRad(hD[n]||0);const i=(et.radToDeg(t)%360+360)%360;return et._inRange(i,315+22.5,360)||et._inRange(i,0,22.5)?"ns-resize":et._inRange(i,45-22.5,45+22.5)?"nesw-resize":et._inRange(i,90-22.5,90+22.5)?"ew-resize":et._inRange(i,135-22.5,135+22.5)?"nwse-resize":et._inRange(i,180-22.5,180+22.5)?"ns-resize":et._inRange(i,225-22.5,225+22.5)?"nesw-resize":et._inRange(i,270-22.5,270+22.5)?"ew-resize":et._inRange(i,315-22.5,315+22.5)?"nwse-resize":(et.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const W1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function mD(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function fw(n,t,e){const i=e.x+(n.x-e.x)*Math.cos(t)-(n.y-e.y)*Math.sin(t),s=e.y+(n.x-e.x)*Math.sin(t)+(n.y-e.y)*Math.cos(t);return{...n,rotation:n.rotation+t,x:i,y:s}}function pD(n,t){const e=mD(n);return fw(n,t,e)}function gD(n,t,e){let i=t;for(let s=0;s<n.length;s++){const o=Vt.getAngle(n[s]),c=Math.abs(o-t)%(Math.PI*2);Math.min(c,Math.PI*2-c)<e&&(i=o)}return i}let dT=0;class ze extends ep{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(uD,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return et.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return hw+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(s=>s.isAncestorOf(this)?(et.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,o)}s.on(cD.map(c=>c+`.${this._getEventNamespace()}`).join(" "),o),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;const s=t.getAbsolutePosition(),o=s.x-e.x,c=s.y-e.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const m=f.getAbsolutePosition();f.setAbsolutePosition({x:m.x+o,y:m.y+c}),f.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(VA),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(VA,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(i),c=t.getAbsolutePosition(i),f=s.x*o.x-t.offsetX()*o.x,m=s.y*o.y-t.offsetY()*o.y,g=(Vt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),E={x:c.x+f*Math.cos(g)+m*Math.sin(-g),y:c.y+m*Math.cos(g)+f*Math.sin(g),width:s.width*o.x,height:s.height*o.y,rotation:g};return fw(E,-Vt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const E=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=[{x:E.x,y:E.y},{x:E.x+E.width,y:E.y},{x:E.x+E.width,y:E.y+E.height},{x:E.x,y:E.y+E.height}],A=g.getAbsoluteTransform();b.forEach(function(N){const D=A.point(N);e.push(D)})});const i=new Sr;i.rotate(-Vt.getAngle(this.rotation()));let s=1/0,o=1/0,c=-1/0,f=-1/0;e.forEach(function(g){const E=i.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),i.invert();const m=i.point({x:s,y:o});return{x:m.x,y:m.y,width:c-s,height:f-o,rotation:Vt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),W1.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new b_({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:fD?10:"auto"}),i=this;e.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),e.on("dragstart",s=>{e.stopDrag(),s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),e.on("mouseenter",()=>{const s=Vt.getAngle(this.rotation()),o=this.rotateAnchorCursor(),c=dD(t,s,o);e.getStage().content&&(e.getStage().content.style.cursor=c),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new It({name:"back",width:0,height:0,sceneFunc(e,i){const s=i.getParent(),o=s.padding(),c=i.width(),f=i.height();if(e.beginPath(),e.rect(-o,-o,c+o*2,f+o*2),s.rotateEnabled()&&s.rotateLineVisible()){const m=s.rotateAnchorAngle(),g=s.rotateAnchorOffset(),E=et.degToRad(m),b=Math.sin(E),A=-Math.cos(E),N=c/2,D=f/2;let k=1/0;A<0?k=Math.min(k,-D/A):A>0&&(k=Math.min(k,(f-D)/A)),b<0?k=Math.min(k,-N/b):b>0&&(k=Math.min(k,(c-N)/b));const U=N+b*k,j=D+A*k,K=et._sign(f),X=U+b*g*K,Z=j+A*g*K;e.moveTo(U,j),e.lineTo(X,Z)}e.fillStrokeShape(i)},hitFunc:(e,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();e.beginPath(),e.rect(-s,-s,i.width()+s*2,i.height()+s*2),e.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/o),this.cos=Math.abs(i/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},dT++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(m=>{m._fire("transformstart",{evt:t.evt,target:m})})}_handleMouseMove(t){let e,i,s;const o=this.findOne("."+this._movingAnchorName),c=o.getStage();c.setPointersPositions(t);const f=c.getPointerPosition();let m={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(m=this.anchorDragBoundFunc()(g,m,t)),o.setAbsolutePosition(m);const E=o.getAbsolutePosition();if(g.x===E.x&&g.y===E.y)return;if(this._movingAnchorName==="rotater"){const K=this._getNodeRect();e=o.x()-K.width/2,i=-o.y()+K.height/2;const X=Vt.getAngle(this.rotateAnchorAngle());let Z=Math.atan2(-i,e)+Math.PI/2-X;K.height<0&&(Z-=Math.PI);const ot=Vt.getAngle(this.rotation())+Z,V=Vt.getAngle(this.rotationSnapTolerance()),L=gD(this.rotationSnaps(),ot,V)-K.rotation,q=pD(K,L);this._fitNodesInto(q,t);return}const b=this.shiftBehavior();let A;b==="inverted"?A=this.keepRatio()&&!t.shiftKey:b==="none"?A=this.keepRatio():A=this.keepRatio()||t.shiftKey;let N=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(A){const K=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(K.x-o.x(),2)+Math.pow(K.y-o.y(),2));const X=this.findOne(".top-left").x()>K.x?-1:1,Z=this.findOne(".top-left").y()>K.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".top-left").x(K.x-e),this.findOne(".top-left").y(K.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(A){const K=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(o.x()-K.x,2)+Math.pow(K.y-o.y(),2));const X=this.findOne(".top-right").x()<K.x?-1:1,Z=this.findOne(".top-right").y()>K.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".top-right").x(K.x+e),this.findOne(".top-right").y(K.y-i)}var D=o.position();this.findOne(".top-left").y(D.y),this.findOne(".bottom-right").x(D.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(A){const K=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(K.x-o.x(),2)+Math.pow(o.y()-K.y,2));const X=K.x<o.x()?-1:1,Z=o.y()<K.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,o.x(K.x-e),o.y(K.y+i)}D=o.position(),this.findOne(".top-left").x(D.x),this.findOne(".bottom-right").y(D.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(A){const K=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(o.x()-K.x,2)+Math.pow(o.y()-K.y,2));const X=this.findOne(".bottom-right").x()<K.x?-1:1,Z=this.findOne(".bottom-right").y()<K.y?-1:1;e=s*this.cos*X,i=s*this.sin*Z,this.findOne(".bottom-right").x(K.x+e),this.findOne(".bottom-right").y(K.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(N=this.centeredScaling()||t.altKey,N){const K=this.findOne(".top-left"),X=this.findOne(".bottom-right"),Z=K.x(),pt=K.y(),ot=this.getWidth()-X.x(),V=this.getHeight()-X.y();X.move({x:-Z,y:-pt}),K.move({x:ot,y:V})}const k=this.findOne(".top-left").getAbsolutePosition();e=k.x,i=k.y;const U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),j=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:U,height:j,rotation:Vt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();dT--,this._fire("transformend",{evt:t,target:i}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),i&&this._nodes.forEach(s=>{var o;s._fire("transformend",{evt:t,target:s}),(o=s.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),s=1;if(et._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(et._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const o=new Sr;if(o.rotate(Vt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const A=o.point({x:-this.padding()*2,y:0});t.x+=A.x,t.y+=A.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const A=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const A=o.point({x:0,y:-this.padding()*2});t.x+=A.x,t.y+=A.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const A=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const A=this.boundBoxFunc()(i,t);A?t=A:et.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new Sr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const m=new Sr,g=t.width/c,E=t.height/c;this.flipEnabled()===!1?(m.translate(t.x,t.y),m.rotate(t.rotation),m.translate(t.width<0?t.width:0,t.height<0?t.height:0),m.scale(Math.abs(g),Math.abs(E))):(m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(g,E));const b=m.multiply(f.invert());this._nodes.forEach(A=>{var N;if(!A.getStage())return;const D=A.getParent().getAbsoluteTransform(),k=A.getTransform().copy();k.translate(A.offsetX(),A.offsetY());const U=new Sr;U.multiply(D.copy().invert()).multiply(b).multiply(D).multiply(k);const j=U.decompose();A.setAttrs(j),(N=A.getLayer())===null||N===void 0||N.batchDraw()}),this.rotation(et._getRotation(t.rotation)),this._nodes.forEach(A=>{this._fire("transform",{evt:e,target:A}),A._fire("transform",{evt:e,target:A})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(et._getRotation(e.rotation));const i=e.width,s=e.height,o=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),m=this.anchorSize(),g=this.find("._anchor");g.forEach(ot=>{ot.setAttrs({width:m,height:m,offsetX:m/2,offsetY:m/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:m/2+f,offsetY:m/2+f,visible:c&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:m/2+f,visible:c&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:m/2-f,offsetY:m/2+f,visible:c&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:m/2+f,visible:c&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:m/2-f,visible:c&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:m/2+f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:m/2-f,visible:c&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:m/2-f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-right")>=0});const E=this.rotateAnchorAngle(),b=this.rotateAnchorOffset(),A=et.degToRad(E),N=Math.sin(A),D=-Math.cos(A),k=i/2,U=s/2;let j=1/0;D<0?j=Math.min(j,-U/D):D>0&&(j=Math.min(j,(s-U)/D)),N<0?j=Math.min(j,-k/N):N>0&&(j=Math.min(j,(i-k)/N));const K=k+N*j,X=U+D*j,Z=et._sign(s);this._batchChangeChild(".rotater",{x:K+N*b*Z,y:X+D*b*Z-f*D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(ot=>ot.draggable()),x:0,y:0});const pt=this.anchorStyleFunc();pt&&g.forEach(ot=>{pt(ot)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ep.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return xt.prototype.toObject.call(this)}clone(t){return xt.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ze.isTransforming=()=>dT>0;function _D(n){return n instanceof Array||et.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(t){W1.indexOf(t)===-1&&et.warn("Unknown anchor name: "+t+". Available names are: "+W1.join(", "))}),n||[]}ze.prototype.className="Transformer";ai(ze);B.addGetterSetter(ze,"enabledAnchors",W1,_D);B.addGetterSetter(ze,"flipEnabled",!0,Wo());B.addGetterSetter(ze,"resizeEnabled",!0);B.addGetterSetter(ze,"anchorSize",10,Ot());B.addGetterSetter(ze,"rotateEnabled",!0);B.addGetterSetter(ze,"rotateLineVisible",!0);B.addGetterSetter(ze,"rotationSnaps",[]);B.addGetterSetter(ze,"rotateAnchorOffset",50,Ot());B.addGetterSetter(ze,"rotateAnchorAngle",0,Ot());B.addGetterSetter(ze,"rotateAnchorCursor","crosshair");B.addGetterSetter(ze,"rotationSnapTolerance",5,Ot());B.addGetterSetter(ze,"borderEnabled",!0);B.addGetterSetter(ze,"anchorStroke","rgb(0, 161, 255)");B.addGetterSetter(ze,"anchorStrokeWidth",1,Ot());B.addGetterSetter(ze,"anchorFill","white");B.addGetterSetter(ze,"anchorCornerRadius",0,Ot());B.addGetterSetter(ze,"borderStroke","rgb(0, 161, 255)");B.addGetterSetter(ze,"borderStrokeWidth",1,Ot());B.addGetterSetter(ze,"borderDash");B.addGetterSetter(ze,"keepRatio",!0);B.addGetterSetter(ze,"shiftBehavior","default");B.addGetterSetter(ze,"centeredScaling",!1);B.addGetterSetter(ze,"ignoreStroke",!1);B.addGetterSetter(ze,"padding",0,Ot());B.addGetterSetter(ze,"nodes");B.addGetterSetter(ze,"node");B.addGetterSetter(ze,"boundBoxFunc");B.addGetterSetter(ze,"anchorDragBoundFunc");B.addGetterSetter(ze,"anchorStyleFunc");B.addGetterSetter(ze,"shouldOverdrawWholeArea",!1);B.addGetterSetter(ze,"useSingleNodeRotation",!0);B.backCompat(ze,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class ec extends It{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Vt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}ec.prototype.className="Wedge";ec.prototype._centroid=!0;ec.prototype._attrsAffectingSize=["radius"];ai(ec);B.addGetterSetter(ec,"radius",0,Ot());B.addGetterSetter(ec,"angle",0,Ot());B.addGetterSetter(ec,"clockwise",!1);B.backCompat(ec,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function kA(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const yD=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],vD=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function ED(n,t){const e=n.data,i=n.width,s=n.height;let o,c,f,m,g,E,b,A,N,D,k,U,j,K,X,Z,pt,ot,V,M;const L=t+t+1,q=i-1,G=s-1,F=t+1,z=F*(F+1)/2,Ft=new kA,Lt=yD[t],W=vD[t];let Et=null,vt=Ft,Ut=null,Kt=null;for(let H=1;H<L;H++)vt=vt.next=new kA,H===F&&(Et=vt);vt.next=Ft,f=c=0;for(let H=0;H<s;H++){U=j=K=X=m=g=E=b=0,A=F*(Z=e[c]),N=F*(pt=e[c+1]),D=F*(ot=e[c+2]),k=F*(V=e[c+3]),m+=z*Z,g+=z*pt,E+=z*ot,b+=z*V,vt=Ft;for(let ct=0;ct<F;ct++)vt.r=Z,vt.g=pt,vt.b=ot,vt.a=V,vt=vt.next;for(let ct=1;ct<F;ct++)o=c+((q<ct?q:ct)<<2),m+=(vt.r=Z=e[o])*(M=F-ct),g+=(vt.g=pt=e[o+1])*M,E+=(vt.b=ot=e[o+2])*M,b+=(vt.a=V=e[o+3])*M,U+=Z,j+=pt,K+=ot,X+=V,vt=vt.next;Ut=Ft,Kt=Et;for(let ct=0;ct<i;ct++)e[c+3]=V=b*Lt>>W,V!==0?(V=255/V,e[c]=(m*Lt>>W)*V,e[c+1]=(g*Lt>>W)*V,e[c+2]=(E*Lt>>W)*V):e[c]=e[c+1]=e[c+2]=0,m-=A,g-=N,E-=D,b-=k,A-=Ut.r,N-=Ut.g,D-=Ut.b,k-=Ut.a,o=f+((o=ct+t+1)<q?o:q)<<2,U+=Ut.r=e[o],j+=Ut.g=e[o+1],K+=Ut.b=e[o+2],X+=Ut.a=e[o+3],m+=U,g+=j,E+=K,b+=X,Ut=Ut.next,A+=Z=Kt.r,N+=pt=Kt.g,D+=ot=Kt.b,k+=V=Kt.a,U-=Z,j-=pt,K-=ot,X-=V,Kt=Kt.next,c+=4;f+=i}for(let H=0;H<i;H++){j=K=X=U=g=E=b=m=0,c=H<<2,A=F*(Z=e[c]),N=F*(pt=e[c+1]),D=F*(ot=e[c+2]),k=F*(V=e[c+3]),m+=z*Z,g+=z*pt,E+=z*ot,b+=z*V,vt=Ft;for(let Ct=0;Ct<F;Ct++)vt.r=Z,vt.g=pt,vt.b=ot,vt.a=V,vt=vt.next;let ct=i;for(let Ct=1;Ct<=t;Ct++)c=ct+H<<2,m+=(vt.r=Z=e[c])*(M=F-Ct),g+=(vt.g=pt=e[c+1])*M,E+=(vt.b=ot=e[c+2])*M,b+=(vt.a=V=e[c+3])*M,U+=Z,j+=pt,K+=ot,X+=V,vt=vt.next,Ct<G&&(ct+=i);c=H,Ut=Ft,Kt=Et;for(let Ct=0;Ct<s;Ct++)o=c<<2,e[o+3]=V=b*Lt>>W,V>0?(V=255/V,e[o]=(m*Lt>>W)*V,e[o+1]=(g*Lt>>W)*V,e[o+2]=(E*Lt>>W)*V):e[o]=e[o+1]=e[o+2]=0,m-=A,g-=N,E-=D,b-=k,A-=Ut.r,N-=Ut.g,D-=Ut.b,k-=Ut.a,o=H+((o=Ct+F)<G?o:G)*i<<2,m+=U+=Ut.r=e[o],g+=j+=Ut.g=e[o+1],E+=K+=Ut.b=e[o+2],b+=X+=Ut.a=e[o+3],Ut=Ut.next,A+=Z=Kt.r,N+=pt=Kt.g,D+=ot=Kt.b,k+=V=Kt.a,U-=Z,j-=pt,K-=ot,X-=V,Kt=Kt.next,c+=i}}const TD=function(t){const e=Math.round(this.blurRadius());e>0&&ED(t,e)};B.addGetterSetter(xt,"blurRadius",0,Ot(),B.afterSetFilter);const SD=function(n){const t=this.brightness()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]+=t,e[s+1]+=t,e[s+2]+=t};B.addGetterSetter(xt,"brightness",0,Ot(),B.afterSetFilter);const bD=function(n){const t=this.brightness(),e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=Math.min(255,e[s]*t),e[s+1]=Math.min(255,e[s+1]*t),e[s+2]=Math.min(255,e[s+2]*t)},AD=function(n){const t=Math.pow((this.contrast()+100)/100,2),e=n.data,i=e.length;let s=150,o=150,c=150;for(let f=0;f<i;f+=4)s=e[f],o=e[f+1],c=e[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,c/=255,c-=.5,c*=t,c+=.5,c*=255,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,c=c<0?0:c>255?255:c,e[f]=s,e[f+1]=o,e[f+2]=c};B.addGetterSetter(xt,"contrast",0,Ot(),B.afterSetFilter);const wD=function(n){var t,e,i,s,o,c,f,m,g;const E=n.data,b=n.width,A=n.height,N=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),D=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),U=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,j=!!((g=(m=this.embossBlend)===null||m===void 0?void 0:m.call(this))!==null&&g!==void 0&&g),K=N*10,X=D*255,Z=U*Math.PI/180,pt=Math.cos(Z),ot=Math.sin(Z),V=128/1020*K,M=new Uint8ClampedArray(E),L=new Float32Array(b*A);for(let Ft=0,Lt=0;Lt<E.length;Lt+=4,Ft++)L[Ft]=.2126*M[Lt]+.7152*M[Lt+1]+.0722*M[Lt+2];const q=[-1,0,1,-2,0,2,-1,0,1],G=[-1,-2,-1,0,0,0,1,2,1],F=[-b-1,-b,-b+1,-1,0,1,b-1,b,b+1],z=Ft=>Ft<0?0:Ft>255?255:Ft;for(let Ft=1;Ft<A-1;Ft++)for(let Lt=1;Lt<b-1;Lt++){const W=Ft*b+Lt;let Et=0,vt=0;Et+=L[W+F[0]]*q[0],vt+=L[W+F[0]]*G[0],Et+=L[W+F[1]]*q[1],vt+=L[W+F[1]]*G[1],Et+=L[W+F[2]]*q[2],vt+=L[W+F[2]]*G[2],Et+=L[W+F[3]]*q[3],vt+=L[W+F[3]]*G[3],Et+=L[W+F[5]]*q[5],vt+=L[W+F[5]]*G[5],Et+=L[W+F[6]]*q[6],vt+=L[W+F[6]]*G[6],Et+=L[W+F[7]]*q[7],vt+=L[W+F[7]]*G[7],Et+=L[W+F[8]]*q[8],vt+=L[W+F[8]]*G[8];const Ut=pt*Et+ot*vt,Kt=z(X+Ut*V),H=W*4;if(j){const ct=Kt-X;E[H]=z(M[H]+ct),E[H+1]=z(M[H+1]+ct),E[H+2]=z(M[H+2]+ct),E[H+3]=M[H+3]}else E[H]=E[H+1]=E[H+2]=Kt,E[H+3]=M[H+3]}for(let Ft=0;Ft<b;Ft++){let Lt=Ft*4,W=((A-1)*b+Ft)*4;E[Lt]=M[Lt],E[Lt+1]=M[Lt+1],E[Lt+2]=M[Lt+2],E[Lt+3]=M[Lt+3],E[W]=M[W],E[W+1]=M[W+1],E[W+2]=M[W+2],E[W+3]=M[W+3]}for(let Ft=1;Ft<A-1;Ft++){let Lt=Ft*b*4,W=(Ft*b+(b-1))*4;E[Lt]=M[Lt],E[Lt+1]=M[Lt+1],E[Lt+2]=M[Lt+2],E[Lt+3]=M[Lt+3],E[W]=M[W],E[W+1]=M[W+1],E[W+2]=M[W+2],E[W+3]=M[W+3]}return n};B.addGetterSetter(xt,"embossStrength",.5,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"embossWhiteLevel",.5,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"embossDirection","top-left",void 0,B.afterSetFilter);B.addGetterSetter(xt,"embossBlend",!1,void 0,B.afterSetFilter);function vE(n,t,e,i,s){const o=e-t,c=s-i;if(o===0)return i+c/2;if(c===0)return i;let f=(n-t)/o;return f=c*f+i,f}const RD=function(n){const t=n.data,e=t.length;let i=t[0],s=i,o,c=t[1],f=c,m,g=t[2],E=g,b;const A=this.enhance();if(A===0)return;for(let X=0;X<e;X+=4)o=t[X+0],o<i?i=o:o>s&&(s=o),m=t[X+1],m<c?c=m:m>f&&(f=m),b=t[X+2],b<g?g=b:b>E&&(E=b);s===i&&(s=255,i=0),f===c&&(f=255,c=0),E===g&&(E=255,g=0);let N,D,k,U,j,K;if(A>0)N=s+A*(255-s),D=i-A*(i-0),k=f+A*(255-f),U=c-A*(c-0),j=E+A*(255-E),K=g-A*(g-0);else{const X=(s+i)*.5;N=s+A*(s-X),D=i+A*(i-X);const Z=(f+c)*.5;k=f+A*(f-Z),U=c+A*(c-Z);const pt=(E+g)*.5;j=E+A*(E-pt),K=g+A*(g-pt)}for(let X=0;X<e;X+=4)t[X+0]=vE(t[X+0],i,s,D,N),t[X+1]=vE(t[X+1],c,f,U,k),t[X+2]=vE(t[X+2],g,E,K,j)};B.addGetterSetter(xt,"enhance",0,Ot(),B.afterSetFilter);const CD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};B.addGetterSetter(xt,"hue",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"saturation",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"luminance",0,Ot(),B.afterSetFilter);const ID=function(n){const t=n.data,e=t.length,i=1,s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(o*Math.PI/180),m=i*s*Math.sin(o*Math.PI/180),g=.299*i+.701*f+.167*m,E=.587*i-.587*f+.33*m,b=.114*i-.114*f-.497*m,A=.299*i-.299*f-.328*m,N=.587*i+.413*f+.035*m,D=.114*i-.114*f+.293*m,k=.299*i-.3*f+1.25*m,U=.587*i-.586*f-1.05*m,j=.114*i+.886*f-.2*m;let K,X,Z,pt;for(let ot=0;ot<e;ot+=4)K=t[ot+0],X=t[ot+1],Z=t[ot+2],pt=t[ot+3],t[ot+0]=g*K+E*X+b*Z+c,t[ot+1]=A*K+N*X+D*Z+c,t[ot+2]=k*K+U*X+j*Z+c,t[ot+3]=pt},ND=function(n){const t=n.data,e=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(o*Math.PI/180),f=i*s*Math.sin(o*Math.PI/180),m=.299*i+.701*c+.167*f,g=.587*i-.587*c+.33*f,E=.114*i-.114*c-.497*f,b=.299*i-.299*c-.328*f,A=.587*i+.413*c+.035*f,N=.114*i-.114*c+.293*f,D=.299*i-.3*c+1.25*f,k=.587*i-.586*c-1.05*f,U=.114*i+.886*c-.2*f;for(let j=0;j<e;j+=4){const K=t[j+0],X=t[j+1],Z=t[j+2],pt=t[j+3];t[j+0]=m*K+g*X+E*Z,t[j+1]=b*K+A*X+N*Z,t[j+2]=D*K+k*X+U*Z,t[j+3]=pt}};B.addGetterSetter(xt,"hue",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"saturation",0,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"value",0,Ot(),B.afterSetFilter);const DD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},xD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,k=360/D*Math.PI/180;for(let U=0;U<D;U+=1){const j=Math.sin(U*k),K=Math.cos(U*k);for(let X=0;X<N;X+=1){E=Math.floor(f+g*X/N*K),b=Math.floor(m+g*X/N*j);let Z=(b*o+E)*4;const pt=i[Z+0],ot=i[Z+1],V=i[Z+2],M=i[Z+3];Z=(U+X*o)*4,s[Z+0]=pt,s[Z+1]=ot,s[Z+2]=V,s[Z+3]=M}}},OD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,k=0;let U,j;for(E=0;E<o;E+=1)for(b=0;b<c;b+=1){const K=E-f,X=b-m,Z=Math.sqrt(K*K+X*X)*N/g;let pt=(Math.atan2(X,K)*180/Math.PI+360+k)%360;pt=pt*D/360,U=Math.floor(pt),j=Math.floor(Z);let ot=(j*o+U)*4;const V=i[ot+0],M=i[ot+1],L=i[ot+2],q=i[ot+3];ot=(b*o+E)*4,s[ot+0]=V,s[ot+1]=M,s[ot+2]=L,s[ot+3]=q}},MD=function(n){const t=n.width,e=n.height;let i,s,o,c,f,m,g,E,b,A,N=Math.round(this.kaleidoscopePower());const D=Math.round(this.kaleidoscopeAngle()),k=Math.floor(t*(D%360)/360);if(N<1)return;const U=et.createCanvasElement();U.width=t,U.height=e;const j=U.getContext("2d").getImageData(0,0,t,e);et.releaseCanvas(U),xD(n,j,{polarCenterX:t/2,polarCenterY:e/2});let K=t/Math.pow(2,N);for(;K<=8;)K=K*2,N-=1;K=Math.ceil(K);let X=K,Z=0,pt=X,ot=1;for(k+K>t&&(Z=X,pt=0,ot=-1),s=0;s<e;s+=1)for(i=Z;i!==pt;i+=ot)o=Math.round(i+k)%t,b=(t*s+o)*4,f=j.data[b+0],m=j.data[b+1],g=j.data[b+2],E=j.data[b+3],A=(t*s+i)*4,j.data[A+0]=f,j.data[A+1]=m,j.data[A+2]=g,j.data[A+3]=E;for(s=0;s<e;s+=1)for(X=Math.floor(K),c=0;c<N;c+=1){for(i=0;i<X+1;i+=1)b=(t*s+i)*4,f=j.data[b+0],m=j.data[b+1],g=j.data[b+2],E=j.data[b+3],A=(t*s+X*2-i-1)*4,j.data[A+0]=f,j.data[A+1]=m,j.data[A+2]=g,j.data[A+3]=E;X*=2}OD(j,n,{})};B.addGetterSetter(xt,"kaleidoscopePower",2,Ot(),B.afterSetFilter);B.addGetterSetter(xt,"kaleidoscopeAngle",0,Ot(),B.afterSetFilter);function S1(n,t,e){let i=(e*n.width+t)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function l0(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2))}function PD(n){const t=[0,0,0];for(let e=0;e<n.length;e++)t[0]+=n[e][0],t[1]+=n[e][1],t[2]+=n[e][2];return t[0]/=n.length,t[1]/=n.length,t[2]/=n.length,t}function VD(n,t){const e=S1(n,0,0),i=S1(n,n.width-1,0),s=S1(n,0,n.height-1),o=S1(n,n.width-1,n.height-1),c=t||10;if(l0(e,i)<c&&l0(i,o)<c&&l0(o,s)<c&&l0(s,e)<c){const f=PD([i,e,o,s]),m=[];for(let g=0;g<n.width*n.height;g++){const E=l0(f,[n.data[g*4],n.data[g*4+1],n.data[g*4+2]]);m[g]=E<c?0:255}return m}}function kD(n,t){for(let e=0;e<n.width*n.height;e++)n.data[4*e+3]=t[e]}function LD(n,t,e){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const k=N*t+D,U=i[b*s+A];E+=n[k]*U}}c[g]=E===2040?255:0}return c}function UD(n,t,e){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const k=N*t+D,U=i[b*s+A];E+=n[k]*U}}c[g]=E>=1020?255:0}return c}function zD(n,t,e){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const k=N*t+D,U=i[b*s+A];E+=n[k]*U}}c[g]=E}return c}const BD=function(n){const t=this.threshold();let e=VD(n,t);return e&&(e=LD(e,n.width,n.height),e=UD(e,n.width,n.height),e=zD(e,n.width,n.height),kD(n,e)),n};B.addGetterSetter(xt,"threshold",0,Ot(),B.afterSetFilter);const GD=function(n){const t=this.noise()*255,e=n.data,i=e.length,s=t/2;for(let o=0;o<i;o+=4)e[o+0]+=s-2*s*Math.random(),e[o+1]+=s-2*s*Math.random(),e[o+2]+=s-2*s*Math.random()};B.addGetterSetter(xt,"noise",.2,Ot(),B.afterSetFilter);const qD=function(n){let t=Math.ceil(this.pixelSize()),e=n.width,i=n.height,s=Math.ceil(e/t),o=Math.ceil(i/t),c=n.data;if(t<=0){et.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let m=0;m<o;m+=1){let g=0,E=0,b=0,A=0;const N=f*t,D=N+t,k=m*t,U=k+t;let j=0;for(let K=N;K<D;K+=1)if(!(K>=e))for(let X=k;X<U;X+=1){if(X>=i)continue;const Z=(e*X+K)*4;g+=c[Z+0],E+=c[Z+1],b+=c[Z+2],A+=c[Z+3],j+=1}g=g/j,E=E/j,b=b/j,A=A/j;for(let K=N;K<D;K+=1)if(!(K>=e))for(let X=k;X<U;X+=1){if(X>=i)continue;const Z=(e*X+K)*4;c[Z+0]=g,c[Z+1]=E,c[Z+2]=b,c[Z+3]=A}}};B.addGetterSetter(xt,"pixelSize",8,Ot(),B.afterSetFilter);const HD=function(n){const t=Math.round(this.levels()*254)+1,e=n.data,i=e.length,s=255/t;for(let o=0;o<i;o+=1)e[o]=Math.floor(e[o]/s)*s};B.addGetterSetter(xt,"levels",.5,Ot(),B.afterSetFilter);const FD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue();for(let c=0;c<e;c+=4){const f=(.34*t[c]+.5*t[c+1]+.16*t[c+2])/255;t[c]=f*i,t[c+1]=f*s,t[c+2]=f*o,t[c+3]=t[c+3]}};B.addGetterSetter(xt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"blue",0,V6,B.afterSetFilter);const jD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue(),c=this.alpha();for(let f=0;f<e;f+=4){const m=1-c;t[f]=i*c+t[f]*m,t[f+1]=s*c+t[f+1]*m,t[f+2]=o*c+t[f+2]*m}};B.addGetterSetter(xt,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(xt,"blue",0,V6,B.afterSetFilter);B.addGetterSetter(xt,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const KD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=t[i+0],o=t[i+1],c=t[i+2];t[i+0]=Math.min(255,s*.393+o*.769+c*.189),t[i+1]=Math.min(255,s*.349+o*.686+c*.168),t[i+2]=Math.min(255,s*.272+o*.534+c*.131)}},YD=function(n){const e=n.data;for(let i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],c=e[i+2];.2126*s+.7152*o+.0722*c>=128&&(e[i]=255-s,e[i+1]=255-o,e[i+2]=255-c)}return n},QD=function(n){const t=this.threshold()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=1)e[s]=e[s]<t?0:255};B.addGetterSetter(xt,"threshold",.5,Ot(),B.afterSetFilter);np.Util._assign(np,{Arc:$u,Arrow:Ad,Circle:Cp,Ellipse:Uh,Image:Zo,Label:cS,Tag:wd,Line:tc,Path:bn,Rect:b_,RegularPolygon:zh,Ring:Rd,Sprite:$l,Star:Bh,Text:Rn,TextPath:Wi,Transformer:ze,Wedge:ec,Filters:{Blur:TD,Brightness:bD,Brighten:SD,Contrast:AD,Emboss:wD,Enhance:RD,Grayscale:CD,HSL:ID,HSV:ND,Invert:DD,Kaleidoscope:MD,Mask:BD,Noise:GD,Pixelate:qD,Posterize:HD,RGB:FD,RGBA:jD,Sepia:KD,Solarize:YD,Threshold:QD}});var EE={exports:{}},TE={exports:{}};var LA;function XD(){return LA||(LA=1,(function(n){n.exports=function(t){function e(l,u,p,y){return new eg(l,u,p,y)}function i(){}function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function c(l){if(o(l)!==l)throw Error(s(188))}function f(l){var u=l.alternate;if(!u){if(u=o(l),u===null)throw Error(s(188));return u!==l?null:l}for(var p=l,y=u;;){var S=p.return;if(S===null)break;var w=S.alternate;if(w===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===w.child){for(w=S.child;w;){if(w===p)return c(S),l;if(w===y)return c(S),u;w=w.sibling}throw Error(s(188))}if(p.return!==y.return)p=S,y=w;else{for(var x=!1,Q=S.child;Q;){if(Q===p){x=!0,p=S,y=w;break}if(Q===y){x=!0,y=S,p=w;break}Q=Q.sibling}if(!x){for(Q=w.child;Q;){if(Q===p){x=!0,p=w,y=S;break}if(Q===y){x=!0,y=w,p=S;break}Q=Q.sibling}if(!x)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}function g(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=g(l),u!==null))return u;l=l.sibling}return null}function E(l){return l===null||typeof l!="object"?null:(l=Po&&l[Po]||l["@@iterator"],typeof l=="function"?l:null)}function b(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Tl?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Eu:return"Fragment";case Su:return"Profiler";case Tu:return"StrictMode";case Jd:return"Suspense";case Mo:return"SuspenseList";case _f:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case vu:return"Portal";case La:return l.displayName||"Context";case gf:return(l._context.displayName||"Context")+".Consumer";case qc:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Wd:return u=l.displayName||null,u!==null?u:b(l.type)||"Memo";case gs:u=l._payload,l=l._init;try{return b(l(u))}catch{}}return null}function A(l){return{current:l}}function N(l){0>Cu||(l.current=cm[Cu],cm[Cu]=null,Cu--)}function D(l,u){Cu++,cm[Cu]=l.current,l.current=u}function k(l){return l>>>=0,l===0?32:31-(hm(l)/Ky|0)|0}function U(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function j(l,u,p){var y=l.pendingLanes;if(y===0)return 0;var S=0,w=l.suspendedLanes,x=l.pingedLanes;l=l.warmLanes;var Q=y&134217727;return Q!==0?(y=Q&~w,y!==0?S=U(y):(x&=Q,x!==0?S=U(x):p||(p=Q&~l,p!==0&&(S=U(p))))):(Q=y&~w,Q!==0?S=U(Q):x!==0?S=U(x):p||(p=y&~l,p!==0&&(S=U(p)))),S===0?0:u!==0&&u!==S&&(u&w)===0&&(w=S&-S,p=u&-u,w>=p||w===32&&(p&4194048)!==0)?u:S}function K(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function X(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var l=Xc;return Xc<<=1,(Xc&62914560)===0&&(Xc=4194304),l}function pt(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function ot(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function V(l,u,p,y,S,w){var x=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Q=l.entanglements,dt=l.expirationTimes,St=l.hiddenUpdates;for(p=x&~p;0<p;){var Mt=31-zs(p),wt=1<<Mt;Q[Mt]=0,dt[Mt]=-1;var Gt=St[Mt];if(Gt!==null)for(St[Mt]=null,Mt=0;Mt<Gt.length;Mt++){var ce=Gt[Mt];ce!==null&&(ce.lane&=-536870913)}p&=~wt}y!==0&&M(l,y,0),w!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=w&~(x&~u))}function M(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-zs(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function L(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-zs(p),S=1<<y;S&u|l[y]&u&&(l[y]|=u),p&=~S}}function q(l,u){var p=u&-u;return p=(p&42)!==0?1:G(p),(p&(l.suspendedLanes|u))!==0?0:p}function G(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function F(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function z(l){if(typeof Bg=="function"&&Xy(l),Bs&&typeof Bs.setStrictMode=="function")try{Bs.setStrictMode(Nu,l)}catch{}}function Ft(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function Lt(l){if(_m===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);_m=u&&u[1]||"",no=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_m+l+no}function W(l,u){if(!l||Rf)return"";Rf=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(ce){var Gt=ce}Reflect.construct(l,[],wt)}else{try{wt.call()}catch(ce){Gt=ce}l.call(wt.prototype)}}else{try{throw Error()}catch(ce){Gt=ce}(wt=l())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(ce){if(ce&&Gt&&typeof ce.stack=="string")return[ce.stack,Gt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),x=w[0],Q=w[1];if(x&&Q){var dt=x.split(`
`),St=Q.split(`
`);for(S=y=0;y<dt.length&&!dt[y].includes("DetermineComponentFrameRoot");)y++;for(;S<St.length&&!St[S].includes("DetermineComponentFrameRoot");)S++;if(y===dt.length||S===St.length)for(y=dt.length-1,S=St.length-1;1<=y&&0<=S&&dt[y]!==St[S];)S--;for(;1<=y&&0<=S;y--,S--)if(dt[y]!==St[S]){if(y!==1||S!==1)do if(y--,S--,0>S||dt[y]!==St[S]){var Mt=`
`+dt[y].replace(" at new "," at ");return l.displayName&&Mt.includes("<anonymous>")&&(Mt=Mt.replace("<anonymous>",l.displayName)),Mt}while(1<=y&&0<=S);break}}}finally{Rf=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Lt(p):""}function Et(l,u){switch(l.tag){case 26:case 27:case 5:return Lt(l.type);case 16:return Lt("Lazy");case 13:return l.child!==u&&u!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return W(l.type,!1);case 11:return W(l.type.render,!1);case 1:return W(l.type,!0);case 31:return Lt("Activity");default:return""}}function vt(l){try{var u="",p=null;do u+=Et(l,p),p=l,l=l.return;while(l);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Ut(l,u){if(typeof l=="object"&&l!==null){var p=Gg.get(l);return p!==void 0?p:(u={value:l,source:u,stack:vt(u)},Gg.set(l,u),u)}return{value:l,source:u,stack:vt(u)}}function Kt(l,u){Lo[io++]=Cf,Lo[io++]=tn,tn=l,Cf=u}function H(l,u,p){Ba[la++]=Fi,Ba[la++]=gr,Ba[la++]=Ga,Ga=l;var y=Fi;l=gr;var S=32-zs(y)-1;y&=~(1<<S),p+=1;var w=32-zs(u)+S;if(30<w){var x=S-S%5;w=(y&(1<<x)-1).toString(32),y>>=x,S-=x,Fi=1<<32-zs(u)+S|p<<S|y,gr=w+l}else Fi=1<<w|p<<S|y,gr=l}function ct(l){l.return!==null&&(Kt(l,1),H(l,1,0))}function Ct(l){for(;l===tn;)tn=Lo[--io],Lo[io]=null,Cf=Lo[--io],Lo[io]=null;for(;l===Ga;)Ga=Ba[--la],Ba[la]=null,gr=Ba[--la],Ba[la]=null,Fi=Ba[--la],Ba[la]=null}function zt(l,u){Ba[la++]=Fi,Ba[la++]=gr,Ba[la++]=Ga,Fi=u.id,gr=u.overflow,Ga=l}function te(l,u){D(ji,u),D(Uo,l),D(xi,null),l=ly(u),N(xi),D(xi,l)}function se(){N(xi),N(Uo),N(ji)}function Ee(l){l.memoizedState!==null&&D(If,l);var u=xi.current,p=jc(u,l.type);u!==p&&(D(Uo,l),D(xi,p))}function gn(l){Uo.current===l&&(N(xi),N(Uo)),If.current===l&&(N(If),Zn?wu._currentValue=Au:wu._currentValue2=Au)}function De(l){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tr(Ut(u,l)),ym}function Cr(l,u){if(!vn)throw Error(s(175));Py(l.stateNode,l.type,l.memoizedProps,u,l)||De(l,!0)}function Ir(l){for(_i=l.return;_i;)switch(_i.tag){case 5:case 31:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:_i=_i.return}}function Is(l){if(!vn||l!==_i)return!1;if(!Re)return Ir(l),Re=!0,!1;var u=l.tag;if(gi?u!==3&&u!==27&&(u!==5||Qc(l.type)&&!_s(l.type,l.memoizedProps))&&En&&De(l):u!==3&&(u!==5||Qc(l.type)&&!_s(l.type,l.memoizedProps))&&En&&De(l),Ir(l),u===13){if(!vn)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));En=Ng(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));En=ky(l)}else En=gi&&u===27?Ry(l.type,En):_i?wy(l.stateNode):null;return!0}function ls(){vn&&(En=_i=null,Re=!1)}function Ns(){var l=so;return l!==null&&(qs===null?qs=l:qs.push.apply(qs,l),so=null),l}function tr(l){so===null?so=[l]:so.push(l)}function $i(l,u,p){Zn?(D(qa,u._currentValue),u._currentValue=p):(D(qa,u._currentValue2),u._currentValue2=p)}function us(l){var u=qa.current;Zn?l._currentValue=u:l._currentValue2=u,N(qa)}function vo(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function _n(l,u,p,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var w=S.dependencies;if(w!==null){var x=S.child;w=w.firstContext;t:for(;w!==null;){var Q=w;w=S;for(var dt=0;dt<u.length;dt++)if(Q.context===u[dt]){w.lanes|=p,Q=w.alternate,Q!==null&&(Q.lanes|=p),vo(w.return,p,l),y||(x=null);break t}w=Q.next}}else if(S.tag===18){if(x=S.return,x===null)throw Error(s(341));x.lanes|=p,w=x.alternate,w!==null&&(w.lanes|=p),vo(x,p,l),x=null}else x=S.child;if(x!==null)x.return=S;else for(x=S;x!==null;){if(x===l){x=null;break}if(S=x.sibling,S!==null){S.return=x.return,x=S;break}x=x.return}S=x}}function rn(l,u,p,y){l=null;for(var S=u,w=!1;S!==null;){if(!w){if((S.flags&524288)!==0)w=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var x=S.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var Q=S.type;ti(S.pendingProps.value,x.value)||(l!==null?l.push(Q):l=[Q])}}else if(S===If.current){if(x=S.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(wu):l=[wu])}S=S.return}l!==null&&_n(u,l,p,y),u.flags|=262144}function cs(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!ti(Zn?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function Bi(l){cn=l,_r=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function nn(l){return Js(cn,l)}function In(l,u){return cn===null&&Bi(l),Js(l,u)}function Js(l,u){var p=Zn?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},_r===null){if(l===null)throw Error(s(308));_r=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else _r=_r.next=u;return p}function bi(){return{controller:new Jy,data:new Map,refCount:0}}function At(l){l.refCount--,l.refCount===0&&Oi(L2,function(){l.controller.abort()})}function Yt(){}function Te(l){l!==Xe&&l.next===null&&(Xe===null?Nf=Xe=l:Xe=Xe.next=l),Ha=!0,is||(is=!0,Xn())}function Se(l,u){if(!vm&&Ha){vm=!0;do for(var p=!1,y=Nf;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var w=0;else{var x=y.suspendedLanes,Q=y.pingedLanes;w=(1<<31-zs(42|l)+1)-1,w&=S&~(x&~Q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,Ws(y,w))}else w=Ce,w=j(y,y===_e?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==Us),(w&3)===0||K(y,w)||(p=!0,Ws(y,w));y=y.next}while(p);vm=!1}}function er(){Xh()}function Xh(){Ha=is=!1;var l=0;Rl!==0&&bu()&&(l=Rl);for(var u=ns(),p=null,y=Nf;y!==null;){var S=y.next,w=Ta(y,u);w===0?(y.next=null,p===null?Nf=S:p.next=S,S===null&&(Xe=p)):(p=y,(l!==0||(w&3)!==0)&&(Ha=!0)),y=S}hi!==0&&hi!==5||Se(l),Rl!==0&&(Rl=0)}function Ta(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var x=31-zs(w),Q=1<<x,dt=S[x];dt===-1?((Q&p)===0||(Q&y)!==0)&&(S[x]=X(Q,u)):dt<=u&&(l.expiredLanes|=Q),w&=~Q}if(u=_e,p=Ce,p=j(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Us),y=l.callbackNode,p===0||l===u&&(We===2||We===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&dm(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||K(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&dm(y),F(p)){case 2:case 8:p=Qy;break;case 32:p=wf;break;case 268435456:p=pm;break;default:p=wf}return y=Ai.bind(null,l),p=Af(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&dm(y),l.callbackPriority=2,l.callbackNode=null,2}function Ai(l,u){if(hi!==0&&hi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if($r()&&l.callbackNode!==p)return null;var y=Ce;return y=j(l,l===_e?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Us),y===0?null:(pr(l,y,u),Ta(l,ns()),l.callbackNode!=null&&l.callbackNode===p?Ai.bind(null,l):null)}function Ws(l,u){if($r())return null;pr(l,u,!0)}function Xn(){dg?mg(function(){(be&6)!==0?Af(mm,er):Xh()}):Af(mm,er)}function cc(){if(Rl===0){var l=zo;l===0&&(l=fm,fm<<=1,(fm&261888)===0&&(fm=256)),Rl=l}return Rl}function hc(l,u){if(Jc===null){var p=Jc=[];qg=0,zo=cc(),yi={status:"pending",value:void 0,then:function(y){p.push(y)}}}return qg++,u.then(Jh,Jh),u}function Jh(){if(--qg===0&&Jc!==null){yi!==null&&(yi.status="fulfilled");var l=Jc;Jc=null,zo=0,yi=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Nr(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}function Eo(){var l=Cl.current;return l!==null?l:_e.pooledCache}function Nn(l,u){u===null?D(Cl,Cl.current):D(Cl,u.pool)}function nr(){var l=Eo();return l===null?null:{parent:Zn?Tn._currentValue:Tn._currentValue2,pool:l}}function Zs(l,u){if(ti(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!k2.call(u,S)||!ti(l[S],u[S]))return!1}return!0}function Sa(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Od(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(Yt,Yt),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$o(l),l;default:if(typeof u.status=="string")u.then(Yt,Yt);else{if(l=_e,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$o(l),l}throw vs=u,vi}}function Dr(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(vs=p,vi):p}}function ir(){if(vs===null)throw Error(s(459));var l=vs;return vs=null,l}function $o(l){if(l===vi||l===ja)throw Error(s(483))}function fc(l){var u=Du;return Du+=1,Il===null&&(Il=[]),Od(Il,l,u)}function sr(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function tl(l,u){throw u.$$typeof===yu?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function dc(l){function u(rt,nt){if(l){var ht=rt.deletions;ht===null?(rt.deletions=[nt],rt.flags|=16):ht.push(nt)}}function p(rt,nt){if(!l)return null;for(;nt!==null;)u(rt,nt),nt=nt.sibling;return null}function y(rt){for(var nt=new Map;rt!==null;)rt.key!==null?nt.set(rt.key,rt):nt.set(rt.index,rt),rt=rt.sibling;return nt}function S(rt,nt){return rt=ra(rt,nt),rt.index=0,rt.sibling=null,rt}function w(rt,nt,ht){return rt.index=ht,l?(ht=rt.alternate,ht!==null?(ht=ht.index,ht<nt?(rt.flags|=67108866,nt):ht):(rt.flags|=67108866,nt)):(rt.flags|=1048576,nt)}function x(rt){return l&&rt.alternate===null&&(rt.flags|=67108866),rt}function Q(rt,nt,ht,Dt){return nt===null||nt.tag!==6?(nt=ng(ht,rt.mode,Dt),nt.return=rt,nt):(nt=S(nt,ht),nt.return=rt,nt)}function dt(rt,nt,ht,Dt){var ee=ht.type;return ee===Eu?Mt(rt,nt,ht.props.children,Dt,ht.key):nt!==null&&(nt.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===gs&&Dr(ee)===nt.type)?(nt=S(nt,ht.props),sr(nt,ht),nt.return=rt,nt):(nt=Oo(ht.type,ht.key,ht.props,null,rt.mode,Dt),sr(nt,ht),nt.return=rt,nt)}function St(rt,nt,ht,Dt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==ht.containerInfo||nt.stateNode.implementation!==ht.implementation?(nt=sg(ht,rt.mode,Dt),nt.return=rt,nt):(nt=S(nt,ht.children||[]),nt.return=rt,nt)}function Mt(rt,nt,ht,Dt,ee){return nt===null||nt.tag!==7?(nt=ka(ht,rt.mode,Dt,ee),nt.return=rt,nt):(nt=S(nt,ht),nt.return=rt,nt)}function wt(rt,nt,ht){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=ng(""+nt,rt.mode,ht),nt.return=rt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case to:return ht=Oo(nt.type,nt.key,nt.props,null,rt.mode,ht),sr(ht,nt),ht.return=rt,ht;case vu:return nt=sg(nt,rt.mode,ht),nt.return=rt,nt;case gs:return nt=Dr(nt),wt(rt,nt,ht)}if(Sl(nt)||E(nt))return nt=ka(nt,rt.mode,ht,null),nt.return=rt,nt;if(typeof nt.then=="function")return wt(rt,fc(nt),ht);if(nt.$$typeof===La)return wt(rt,In(rt,nt),ht);tl(rt,nt)}return null}function Gt(rt,nt,ht,Dt){var ee=nt!==null?nt.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ee!==null?null:Q(rt,nt,""+ht,Dt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case to:return ht.key===ee?dt(rt,nt,ht,Dt):null;case vu:return ht.key===ee?St(rt,nt,ht,Dt):null;case gs:return ht=Dr(ht),Gt(rt,nt,ht,Dt)}if(Sl(ht)||E(ht))return ee!==null?null:Mt(rt,nt,ht,Dt,null);if(typeof ht.then=="function")return Gt(rt,nt,fc(ht),Dt);if(ht.$$typeof===La)return Gt(rt,nt,In(rt,ht),Dt);tl(rt,ht)}return null}function ce(rt,nt,ht,Dt,ee){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return rt=rt.get(ht)||null,Q(nt,rt,""+Dt,ee);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case to:return rt=rt.get(Dt.key===null?ht:Dt.key)||null,dt(nt,rt,Dt,ee);case vu:return rt=rt.get(Dt.key===null?ht:Dt.key)||null,St(nt,rt,Dt,ee);case gs:return Dt=Dr(Dt),ce(rt,nt,ht,Dt,ee)}if(Sl(Dt)||E(Dt))return rt=rt.get(ht)||null,Mt(nt,rt,Dt,ee,null);if(typeof Dt.then=="function")return ce(rt,nt,ht,fc(Dt),ee);if(Dt.$$typeof===La)return ce(rt,nt,ht,In(nt,Dt),ee);tl(nt,Dt)}return null}function Mi(rt,nt,ht,Dt){for(var ee=null,Ln=null,ne=nt,ke=nt=0,Pi=null;ne!==null&&ke<ht.length;ke++){ne.index>ke?(Pi=ne,ne=null):Pi=ne.sibling;var Ge=Gt(rt,ne,ht[ke],Dt);if(Ge===null){ne===null&&(ne=Pi);break}l&&ne&&Ge.alternate===null&&u(rt,ne),nt=w(Ge,nt,ke),Ln===null?ee=Ge:Ln.sibling=Ge,Ln=Ge,ne=Pi}if(ke===ht.length)return p(rt,ne),Re&&Kt(rt,ke),ee;if(ne===null){for(;ke<ht.length;ke++)ne=wt(rt,ht[ke],Dt),ne!==null&&(nt=w(ne,nt,ke),Ln===null?ee=ne:Ln.sibling=ne,Ln=ne);return Re&&Kt(rt,ke),ee}for(ne=y(ne);ke<ht.length;ke++)Pi=ce(ne,rt,ke,ht[ke],Dt),Pi!==null&&(l&&Pi.alternate!==null&&ne.delete(Pi.key===null?ke:Pi.key),nt=w(Pi,nt,ke),Ln===null?ee=Pi:Ln.sibling=Pi,Ln=Pi);return l&&ne.forEach(function(Qa){return u(rt,Qa)}),Re&&Kt(rt,ke),ee}function sh(rt,nt,ht,Dt){if(ht==null)throw Error(s(151));for(var ee=null,Ln=null,ne=nt,ke=nt=0,Pi=null,Ge=ht.next();ne!==null&&!Ge.done;ke++,Ge=ht.next()){ne.index>ke?(Pi=ne,ne=null):Pi=ne.sibling;var Qa=Gt(rt,ne,Ge.value,Dt);if(Qa===null){ne===null&&(ne=Pi);break}l&&ne&&Qa.alternate===null&&u(rt,ne),nt=w(Qa,nt,ke),Ln===null?ee=Qa:Ln.sibling=Qa,Ln=Qa,ne=Pi}if(Ge.done)return p(rt,ne),Re&&Kt(rt,ke),ee;if(ne===null){for(;!Ge.done;ke++,Ge=ht.next())Ge=wt(rt,Ge.value,Dt),Ge!==null&&(nt=w(Ge,nt,ke),Ln===null?ee=Ge:Ln.sibling=Ge,Ln=Ge);return Re&&Kt(rt,ke),ee}for(ne=y(ne);!Ge.done;ke++,Ge=ht.next())Ge=ce(ne,rt,ke,Ge.value,Dt),Ge!==null&&(l&&Ge.alternate!==null&&ne.delete(Ge.key===null?ke:Ge.key),nt=w(Ge,nt,ke),Ln===null?ee=Ge:Ln.sibling=Ge,Ln=Ge);return l&&ne.forEach(function(U2){return u(rt,U2)}),Re&&Kt(rt,ke),ee}function kl(rt,nt,ht,Dt){if(typeof ht=="object"&&ht!==null&&ht.type===Eu&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case to:t:{for(var ee=ht.key;nt!==null;){if(nt.key===ee){if(ee=ht.type,ee===Eu){if(nt.tag===7){p(rt,nt.sibling),Dt=S(nt,ht.props.children),Dt.return=rt,rt=Dt;break t}}else if(nt.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===gs&&Dr(ee)===nt.type){p(rt,nt.sibling),Dt=S(nt,ht.props),sr(Dt,ht),Dt.return=rt,rt=Dt;break t}p(rt,nt);break}else u(rt,nt);nt=nt.sibling}ht.type===Eu?(Dt=ka(ht.props.children,rt.mode,Dt,ht.key),Dt.return=rt,rt=Dt):(Dt=Oo(ht.type,ht.key,ht.props,null,rt.mode,Dt),sr(Dt,ht),Dt.return=rt,rt=Dt)}return x(rt);case vu:t:{for(ee=ht.key;nt!==null;){if(nt.key===ee)if(nt.tag===4&&nt.stateNode.containerInfo===ht.containerInfo&&nt.stateNode.implementation===ht.implementation){p(rt,nt.sibling),Dt=S(nt,ht.children||[]),Dt.return=rt,rt=Dt;break t}else{p(rt,nt);break}else u(rt,nt);nt=nt.sibling}Dt=sg(ht,rt.mode,Dt),Dt.return=rt,rt=Dt}return x(rt);case gs:return ht=Dr(ht),kl(rt,nt,ht,Dt)}if(Sl(ht))return Mi(rt,nt,ht,Dt);if(E(ht)){if(ee=E(ht),typeof ee!="function")throw Error(s(150));return ht=ee.call(ht),sh(rt,nt,ht,Dt)}if(typeof ht.then=="function")return kl(rt,nt,fc(ht),Dt);if(ht.$$typeof===La)return kl(rt,nt,In(rt,ht),Dt);tl(rt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,nt!==null&&nt.tag===6?(p(rt,nt.sibling),Dt=S(nt,ht),Dt.return=rt,rt=Dt):(p(rt,nt),Dt=ng(ht,rt.mode,Dt),Dt.return=rt,rt=Dt),x(rt)):p(rt,nt)}return function(rt,nt,ht,Dt){try{Du=0;var ee=kl(rt,nt,ht,Dt);return Il=null,ee}catch(ne){if(ne===vi||ne===ja)throw ne;var Ln=e(29,ne,null,rt.mode);return Ln.lanes=Dt,Ln.return=rt,Ln}}}function xr(){for(var l=ro,u=xu=ro=0;u<l;){var p=Yi[u];Yi[u++]=null;var y=Yi[u];Yi[u++]=null;var S=Yi[u];Yi[u++]=null;var w=Yi[u];if(Yi[u++]=null,y!==null&&S!==null){var x=y.pending;x===null?S.next=S:(S.next=x.next,x.next=S),y.pending=S}w!==0&&Aa(p,S,w)}}function ba(l,u,p,y){Yi[ro++]=l,Yi[ro++]=u,Yi[ro++]=p,Yi[ro++]=y,xu|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function mc(l,u,p,y){return ba(l,u,p,y),Dn(l)}function Gi(l,u){return ba(l,null,null,u),Dn(l)}function Aa(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var S=!1,w=l.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(S=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,S&&u!==null&&(S=31-zs(p),l=w.hiddenUpdates,y=l[S],y===null?l[S]=[u]:y.push(u),u.lane=p|536870912),w):null}function Dn(l){if(50<Be)throw Be=0,Vf=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function oi(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wa(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function $s(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Or(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(be&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=Dn(l),Aa(l,null,p),u}return ba(l,y,u,p),Dn(l)}function el(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,L(l,p)}}function pc(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var x={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?S=w=x:w=w.next=x,p=p.next}while(p!==null);w===null?S=w=u:w=w.next=u}else S=w=u;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Ds(){if(Tm){var l=yi;if(l!==null)throw l}}function Mr(l,u,p,y){Tm=!1;var S=l.updateQueue;ua=!1;var w=S.firstBaseUpdate,x=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var dt=Q,St=dt.next;dt.next=null,x===null?w=St:x.next=St,x=dt;var Mt=l.alternate;Mt!==null&&(Mt=Mt.updateQueue,Q=Mt.lastBaseUpdate,Q!==x&&(Q===null?Mt.firstBaseUpdate=St:Q.next=St,Mt.lastBaseUpdate=dt))}if(w!==null){var wt=S.baseState;x=0,Mt=St=dt=null,Q=w;do{var Gt=Q.lane&-536870913,ce=Gt!==Q.lane;if(ce?(Ce&Gt)===Gt:(y&Gt)===Gt){Gt!==0&&Gt===zo&&(Tm=!0),Mt!==null&&(Mt=Mt.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});t:{var Mi=l,sh=Q;Gt=u;var kl=p;switch(sh.tag){case 1:if(Mi=sh.payload,typeof Mi=="function"){wt=Mi.call(kl,wt,Gt);break t}wt=Mi;break t;case 3:Mi.flags=Mi.flags&-65537|128;case 0:if(Mi=sh.payload,Gt=typeof Mi=="function"?Mi.call(kl,wt,Gt):Mi,Gt==null)break t;wt=Xd({},wt,Gt);break t;case 2:ua=!0}}Gt=Q.callback,Gt!==null&&(l.flags|=64,ce&&(l.flags|=8192),ce=S.callbacks,ce===null?S.callbacks=[Gt]:ce.push(Gt))}else ce={lane:Gt,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Mt===null?(St=Mt=ce,dt=wt):Mt=Mt.next=ce,x|=Gt;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;ce=Q,Q=ce.next,ce.next=null,S.lastBaseUpdate=ce,S.shared.pending=null}}while(!0);Mt===null&&(dt=wt),S.baseState=dt,S.firstBaseUpdate=St,S.lastBaseUpdate=Mt,w===null&&(S.shared.lanes=0),Go|=x,l.lanes=x,l.memoizedState=wt}}function ar(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function ta(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)ar(p[l],u)}function xs(l,u){l=lo,D(Nl,l),D(Ou,u),lo=l|u.baseLanes}function Ra(){D(Nl,lo),D(Ou,Ou.current)}function Bn(){lo=Nl.current,N(Ou),N(Nl)}function Ca(l){var u=l.alternate;D(Hn,Hn.current&1),D(Gs,l),Es===null&&(u===null||Ou.current!==null||u.memoizedState!==null)&&(Es=l)}function iu(l){D(Hn,Hn.current),D(Gs,l),Es===null&&(Es=l)}function rr(l){l.tag===22?(D(Hn,Hn.current),D(Gs,l),Es===null&&(Es=l)):qi()}function qi(){D(Hn,Hn.current),D(Gs,Gs.current)}function Hi(l){N(Gs),Es===l&&(Es=null),N(Hn)}function nl(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Al(p)||im(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function on(){throw Error(s(321))}function gc(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!ti(l[p],u[p]))return!1;return!0}function il(l,u,p,y,S,w){return Bo=w,fe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Zt.H=l===null||l.memoizedState===null?Pn:oo,Oe=!1,w=p(y,S),Oe=!1,me&&(w=Jn(u,p,y,S)),Os(l),w}function Os(l){Zt.H=ca;var u=Jt!==null&&Jt.next!==null;if(Bo=0,re=Jt=fe=null,ge=!1,Ka=0,yr=null,u)throw Error(s(300));l===null||mn||(l=l.dependencies,l!==null&&cs(l)&&(mn=!0))}function Jn(l,u,p,y){fe=l;var S=0;do{if(me&&(yr=null),Ka=0,me=!1,25<=S)throw Error(s(301));if(S+=1,re=Jt=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Zt.H=Dl,w=u(p,y)}while(me);return w}function wi(){var l=Zt.H,u=l.useState()[0];return u=typeof u.then=="function"?Ri(u):u,l=l.useState()[0],(Jt!==null?Jt.memoizedState:null)!==l&&(fe.flags|=1024),u}function Pr(){var l=ss!==0;return ss=0,l}function su(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function He(l){if(ge){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ge=!1}Bo=0,re=Jt=fe=null,me=!1,Ka=ss=0,yr=null}function Wn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?fe.memoizedState=re=l:re=re.next=l,re}function Fe(){if(Jt===null){var l=fe.alternate;l=l!==null?l.memoizedState:null}else l=Jt.next;var u=re===null?fe.memoizedState:re.next;if(u!==null)re=u,Jt=l;else{if(l===null)throw fe.alternate===null?Error(s(467)):Error(s(310));Jt=l,l={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},re===null?fe.memoizedState=re=l:re=re.next=l}return re}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ri(l){var u=Ka;return Ka+=1,yr===null&&(yr=[]),l=Od(yr,l,u),u=fe,(re===null?u.memoizedState:re.next)===null&&(u=u.alternate,Zt.H=u===null||u.memoizedState===null?Pn:oo),l}function To(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ri(l);if(l.$$typeof===La)return nn(l)}throw Error(s(438,String(l)))}function _c(l){var u=null,p=fe.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=fe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Vr(),fe.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=rg;return u.index++,p}function ea(l,u){return typeof u=="function"?u(l):u}function or(l){var u=Fe();return yc(u,Jt,l)}function yc(l,u,p){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var S=l.baseQueue,w=y.pending;if(w!==null){if(S!==null){var x=S.next;S.next=w.next,w.next=x}u.baseQueue=S=w,y.pending=null}if(w=l.baseState,S===null)l.memoizedState=w;else{u=S.next;var Q=x=null,dt=null,St=u,Mt=!1;do{var wt=St.lane&-536870913;if(wt!==St.lane?(Ce&wt)===wt:(Bo&wt)===wt){var Gt=St.revertLane;if(Gt===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,gesture:null,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),wt===zo&&(Mt=!0);else if((Bo&Gt)===Gt){St=St.next,Gt===zo&&(Mt=!0);continue}else wt={lane:0,revertLane:St.revertLane,gesture:null,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},dt===null?(Q=dt=wt,x=w):dt=dt.next=wt,fe.lanes|=Gt,Go|=Gt;wt=St.action,Oe&&p(w,wt),w=St.hasEagerState?St.eagerState:p(w,wt)}else Gt={lane:wt,revertLane:St.revertLane,gesture:St.gesture,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},dt===null?(Q=dt=Gt,x=w):dt=dt.next=Gt,fe.lanes|=wt,Go|=wt;St=St.next}while(St!==null&&St!==u);if(dt===null?x=w:dt.next=Q,!ti(w,l.memoizedState)&&(mn=!0,Mt&&(p=yi,p!==null)))throw p;l.memoizedState=w,l.baseState=x,l.baseQueue=dt,y.lastRenderedState=w}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function kr(l){var u=Fe(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,w=u.memoizedState;if(S!==null){p.pending=null;var x=S=S.next;do w=l(w,x.action),x=x.next;while(x!==S);ti(w,u.memoizedState)||(mn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),p.lastRenderedState=w}return[w,y]}function hs(l,u,p){var y=fe,S=Fe(),w=Re;if(w){if(p===void 0)throw Error(s(407));p=p()}else p=u();var x=!ti((Jt||S).memoizedState,p);if(x&&(S.memoizedState=p,mn=!0),S=S.queue,ur(Ec.bind(null,y,S,l),[l]),S.getSnapshot!==u||x||re!==null&&re.memoizedState.tag&1){if(y.flags|=2048,fs(9,{destroy:void 0},vc.bind(null,y,S,p,u),null),_e===null)throw Error(s(349));w||(Bo&127)!==0||Wh(y,u,p)}return p}function Wh(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=fe.updateQueue,u===null?(u=Vr(),fe.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function vc(l,u,p,y){u.value=p,u.getSnapshot=y,au(u)&&Zh(l)}function Ec(l,u,p){return p(function(){au(u)&&Zh(l)})}function au(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!ti(l,p)}catch{return!0}}function Zh(l){var u=Gi(l,2);u!==null&&On(u,l,2)}function Lr(l){var u=Wn();if(typeof l=="function"){var p=l;if(l=p(),Oe){z(!0);try{p()}finally{z(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:l},u}function ru(l,u,p,y){return l.baseState=p,yc(l,Jt,typeof y=="function"?y:ea)}function lr(l,u,p,y,S){if(cu(l))throw Error(s(485));if(l=u.action,l!==null){var w={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){w.listeners.push(x)}};Zt.T!==null?p(!0):w.isTransition=!1,y(w),p=u.pending,p===null?(w.next=u.pending=w,Tc(u,w)):(w.next=p.next,u.pending=p.next=w)}}function Tc(l,u){var p=u.action,y=u.payload,S=l.state;if(u.isTransition){var w=Zt.T,x={};Zt.T=x;try{var Q=p(S,y),dt=Zt.S;dt!==null&&dt(x,Q),na(l,u,Q)}catch(St){Ia(l,u,St)}finally{w!==null&&x.types!==null&&(w.types=x.types),Zt.T=w}}else try{w=p(S,y),na(l,u,w)}catch(St){Ia(l,u,St)}}function na(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){So(l,u,y)},function(y){return Ia(l,u,y)}):So(l,u,p)}function So(l,u,p){u.status="fulfilled",u.value=p,sl(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,Tc(l,p)))}function Ia(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,sl(u),u=u.next;while(u!==y)}l.action=null}function sl(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function ou(l,u){return u}function bo(l,u){if(Re){var p=_e.formState;if(p!==null){t:{var y=fe;if(Re){if(En){var S=Ay(En,ys);if(S){En=wy(S),y=wg(S);break t}}De(y)}y=!1}y&&(u=p[0])}}p=Wn(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:u},p.queue=y,p=tf.bind(null,fe,y),y.dispatch=p,y=Lr(!1);var w=Da.bind(null,fe,!1,y.queue);return y=Wn(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,p=lr.bind(null,fe,S,w,p),S.dispatch=p,y.memoizedState=l,[u,p,!1]}function Na(l){var u=Fe();return ia(u,Jt,l)}function ia(l,u,p){if(u=yc(l,u,ou)[0],l=or(ea)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Ri(u)}catch(x){throw x===vi?ja:x}else y=u;u=Fe();var S=u.queue,w=S.dispatch;return p!==u.memoizedState&&(fe.flags|=2048,fs(9,{destroy:void 0},lu.bind(null,S,p),null)),[y,w,l]}function lu(l,u){l.action=u}function Qe(l){var u=Fe(),p=Jt;if(p!==null)return ia(u,p,l);Fe(),u=u.memoizedState,p=Fe();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function fs(l,u,p,y){return l={tag:l,create:p,deps:y,inst:u,next:null},u=fe.updateQueue,u===null&&(u=Vr(),fe.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function Sc(){return Fe().memoizedState}function Ur(l,u,p,y){var S=Wn();fe.flags|=l,S.memoizedState=fs(1|u,{destroy:void 0},p,y===void 0?null:y)}function al(l,u,p,y){var S=Fe();y=y===void 0?null:y;var w=S.memoizedState.inst;Jt!==null&&y!==null&&gc(y,Jt.memoizedState.deps)?S.memoizedState=fs(u,w,p,y):(fe.flags|=l,S.memoizedState=fs(1|u,w,p,y))}function rl(l,u){Ur(8390656,8,l,u)}function ur(l,u){al(2048,8,l,u)}function cr(l){fe.flags|=4;var u=fe.updateQueue;if(u===null)u=Vr(),fe.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function Ci(l){var u=Fe().memoizedState;return cr({ref:u,nextImpl:l}),function(){if((be&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function zr(l,u){return al(4,2,l,u)}function hr(l,u){return al(4,4,l,u)}function Ao(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function bc(l,u,p){p=p!=null?p.concat([l]):null,al(4,4,Ao.bind(null,u,l),p)}function Br(){}function uu(l,u){var p=Fe();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&gc(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function fr(l,u){var p=Fe();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&gc(u,y[1]))return y[0];if(y=l(),Oe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y}function ol(l,u,p){return p===void 0||(Bo&1073741824)!==0&&(Ce&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=No(),fe.lanes|=l,Go|=l,p)}function Ac(l,u,p,y){return ti(p,u)?p:Ou.current!==null?(l=ol(l,p,y),ti(l,u)||(mn=!0),l):(Bo&42)===0||(Bo&1073741824)!==0&&(Ce&261930)===0?(mn=!0,l.memoizedState=p):(l=No(),fe.lanes|=l,Go|=l,u)}function ll(l,u,p,y,S){var w=Ua();we(w!==0&&8>w?w:8);var x=Zt.T,Q={};Zt.T=Q,Da(l,!1,u,p);try{var dt=S(),St=Zt.S;if(St!==null&&St(Q,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var Mt=Nr(dt,y);cl(l,u,Mt,yn(l))}else cl(l,u,y,yn(l))}catch(wt){cl(l,u,{then:function(){},status:"rejected",reason:wt},yn())}finally{we(w),x!==null&&Q.types!==null&&(x.types=Q.types),Zt.T=x}}function $h(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Au,baseState:Au,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:Au},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function wc(){return nn(wu)}function ul(){return Fe().memoizedState}function Rc(){return Fe().memoizedState}function Md(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=yn();l=$s(p);var y=Or(u,l,p);y!==null&&(On(y,u,p),el(y,u,p)),u={cache:bi()},l.payload=u;return}u=u.return}}function Cc(l,u,p){var y=yn();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},cu(l)?ef(u,p):(p=mc(l,u,p,y),p!==null&&(On(p,l,y),nf(p,u,y)))}function tf(l,u,p){var y=yn();cl(l,u,p,y)}function cl(l,u,p,y){var S={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(cu(l))ef(u,S);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var x=u.lastRenderedState,Q=w(x,p);if(S.hasEagerState=!0,S.eagerState=Q,ti(Q,x))return ba(l,u,S,0),_e===null&&xr(),!1}catch{}if(p=mc(l,u,S,y),p!==null)return On(p,l,y),nf(p,u,y),!0}return!1}function Da(l,u,p,y){if(y={lane:2,revertLane:cc(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},cu(l)){if(u)throw Error(s(479))}else u=mc(l,p,y,2),u!==null&&On(u,l,2)}function cu(l){var u=l.alternate;return l===fe||u!==null&&u===fe}function ef(l,u){me=ge=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function nf(l,u,p){if((p&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,L(l,p)}}function Ic(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:Xd({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}function wo(l,u,p,y,S,w,x){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,w,x):u.prototype&&u.prototype.isPureReactComponent?!Zs(p,y)||!Zs(S,w):!0}function ts(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&Df.enqueueReplaceState(u,u.state,null)}function Gr(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=Xd({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function hu(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function qr(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function _(l,u,p){return p=$s(p),p.tag=3,p.payload={element:null},p.callback=function(){hu(l,u)},p}function R(l){return l=$s(l),l.tag=3,l}function I(l,u,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var w=y.value;l.payload=function(){return S(w)},l.callback=function(){qr(u,p,y)}}var x=p.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){qr(u,p,y),typeof S!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var Q=y.stack;this.componentDidCatch(y.value,{componentStack:Q!==null?Q:""})})}function P(l,u,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&rn(u,p,S,!0),p=Gs.current,p!==null){switch(p.tag){case 31:case 13:return Es===null?Uc():p.alternate===null&&kn===0&&(kn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===ao?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),Gc(l,y,S)),!1;case 22:return p.flags|=65536,y===ao?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),Gc(l,y,S)),!1}throw Error(s(435,p.tag))}return Gc(l,y,S),Uc(),!1}if(Re)return u=Gs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==ym&&(l=Error(s(422),{cause:y}),tr(Ut(l,p)))):(y!==ym&&(u=Error(s(423),{cause:y}),tr(Ut(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=Ut(y,p),S=_(l.stateNode,y,S),pc(l,S),kn!==4&&(kn=2)),!1;var w=Error(s(520),{cause:y});if(w=Ut(w,p),Of===null?Of=[w]:Of.push(w),kn!==4&&(kn=2),u===null)return!0;y=Ut(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=_(p.stateNode,y,l),pc(p,l),!1;case 1:if(u=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qo===null||!qo.has(w))))return p.flags|=65536,S&=-S,p.lanes|=S,S=R(S),I(S,l,p,y),pc(p,S),!1}p=p.return}while(p!==null);return!1}function $(l,u,p,y){u.child=l===null?Hg(u,null,p,y):Ki(u,l.child,p,y)}function ut(l,u,p,y,S){p=p.render;var w=u.ref;if("ref"in y){var x={};for(var Q in y)Q!=="ref"&&(x[Q]=y[Q])}else x=y;return Bi(u),y=il(l,u,p,x,w,S),Q=Pr(),l!==null&&!mn?(su(l,u,S),Hr(l,u,S)):(Re&&Q&&ct(u),u.flags|=1,$(l,u,y,S),u.child)}function Pt(l,u,p,y,S){if(l===null){var w=p.type;return typeof w=="function"&&!gu(w)&&w.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=w,ue(l,u,w,y,S)):(l=Oo(p.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(w=l.child,!sf(l,S)){var x=w.memoizedProps;if(p=p.compare,p=p!==null?p:Zs,p(x,y)&&l.ref===u.ref)return Hr(l,u,S)}return u.flags|=1,l=ra(w,y),l.ref=u.ref,l.return=u,u.child=l}function ue(l,u,p,y,S){if(l!==null){var w=l.memoizedProps;if(Zs(w,y)&&l.ref===u.ref)if(mn=!1,u.pendingProps=y=w,sf(l,S))(l.flags&131072)!==0&&(mn=!0);else return u.lanes=l.lanes,Hr(l,u,S)}return Ro(l,u,p,y,S)}function Gn(l,u,p,y){var S=y.children,w=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,l!==null){for(y=u.child=l.child,S=0;y!==null;)S=S|y.lanes|y.childLanes,y=y.sibling;y=S&~w}else y=0,u.child=null;return dn(l,u,w,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Nn(u,w!==null?w.cachePool:null),w!==null?xs(u,w):Ra(),rr(u);else return y=u.lanes=536870912,dn(l,u,w!==null?w.baseLanes|p:p,p,y)}else w!==null?(Nn(u,w.cachePool),xs(u,w),qi(),u.memoizedState=null):(l!==null&&Nn(u,null),Ra(),qi());return $(l,u,S,p),u.child}function xe(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function dn(l,u,p,y,S){var w=Eo();return w=w===null?null:{parent:Zn?Tn._currentValue:Tn._currentValue2,pool:w},u.memoizedState={baseLanes:p,cachePool:w},l!==null&&Nn(u,null),Ra(),rr(u),l!==null&&rn(l,u,y,!0),u.childLanes=S,null}function ds(l,u){return u=hl({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function dr(l,u,p){return Ki(u,l.child,null,p),l=ds(u,u.pendingProps),l.flags|=2,Hi(u),u.memoizedState=null,l}function mr(l,u,p){var y=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Re){if(y.mode==="hidden")return l=ds(u,y),u.lanes=536870912,xe(null,l);if(iu(u),(l=En)?(l=Cg(l,ys),l!==null&&(u.memoizedState={dehydrated:l,treeContext:Ga!==null?{id:Fi,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},p=ig(l),p.return=u,u.child=p,_i=u,En=null)):l=null,l===null)throw De(u);return u.lanes=536870912,null}return ds(u,y)}var w=l.memoizedState;if(w!==null){var x=w.dehydrated;if(iu(u),S)if(u.flags&256)u.flags&=-257,u=dr(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(s(558));else if(mn||rn(l,u,p,!1),S=(p&l.childLanes)!==0,mn||S){if(y=_e,y!==null&&(x=q(y,p),x!==0&&x!==w.retryLane))throw w.retryLane=x,Gi(l,x),On(y,l,x),Ts;Uc(),u=dr(l,u,p)}else l=w.treeContext,vn&&(En=Ny(x),_i=u,Re=!0,so=null,ys=!1,l!==null&&zt(u,l)),u=ds(u,y),u.flags|=4096;return u}return l=ra(l.child,{mode:y.mode,children:y.children}),l.ref=u.ref,u.child=l,l.return=u,l}function Ms(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function Ro(l,u,p,y,S){return Bi(u),p=il(l,u,p,y,void 0,S),y=Pr(),l!==null&&!mn?(su(l,u,S),Hr(l,u,S)):(Re&&y&&ct(u),u.flags|=1,$(l,u,p,S),u.child)}function fu(l,u,p,y,S,w){return Bi(u),u.updateQueue=null,p=Jn(u,y,p,S),Os(l),y=Pr(),l!==null&&!mn?(su(l,u,w),Hr(l,u,w)):(Re&&y&&ct(u),u.flags|=1,$(l,u,p,w),u.child)}function du(l,u,p,y,S){if(Bi(u),u.stateNode===null){var w=eo,x=p.contextType;typeof x=="object"&&x!==null&&(w=nn(x)),w=new p(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Df,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},oi(u),x=p.contextType,w.context=typeof x=="object"&&x!==null?nn(x):eo,w.state=u.memoizedState,x=p.getDerivedStateFromProps,typeof x=="function"&&(Ic(u,p,x,y),w.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(x=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),x!==w.state&&Df.enqueueReplaceState(w,w.state,null),Mr(u,y,w,S),Ds(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){w=u.stateNode;var Q=u.memoizedProps,dt=Gr(p,Q);w.props=dt;var St=w.context,Mt=p.contextType;x=eo,typeof Mt=="object"&&Mt!==null&&(x=nn(Mt));var wt=p.getDerivedStateFromProps;Mt=typeof wt=="function"||typeof w.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,Mt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Q||St!==x)&&ts(u,w,y,x),ua=!1;var Gt=u.memoizedState;w.state=Gt,Mr(u,y,w,S),Ds(),St=u.memoizedState,Q||Gt!==St||ua?(typeof wt=="function"&&(Ic(u,p,wt,y),St=u.memoizedState),(dt=ua||wo(u,p,dt,y,Gt,St,x))?(Mt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=St),w.props=y,w.state=St,w.context=x,y=dt):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,wa(l,u),x=u.memoizedProps,Mt=Gr(p,x),w.props=Mt,wt=u.pendingProps,Gt=w.context,St=p.contextType,dt=eo,typeof St=="object"&&St!==null&&(dt=nn(St)),Q=p.getDerivedStateFromProps,(St=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==wt||Gt!==dt)&&ts(u,w,y,dt),ua=!1,Gt=u.memoizedState,w.state=Gt,Mr(u,y,w,S),Ds();var ce=u.memoizedState;x!==wt||Gt!==ce||ua||l!==null&&l.dependencies!==null&&cs(l.dependencies)?(typeof Q=="function"&&(Ic(u,p,Q,y),ce=u.memoizedState),(Mt=ua||wo(u,p,Mt,y,Gt,ce,dt)||l!==null&&l.dependencies!==null&&cs(l.dependencies))?(St||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,ce,dt),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,ce,dt)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ce),w.props=y,w.state=ce,w.context=dt,y=Mt):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Gt===l.memoizedState||(u.flags|=1024),y=!1)}return w=y,Ms(l,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,l!==null&&y?(u.child=Ki(u,l.child,null,S),u.child=Ki(u,null,p,S)):$(l,u,p,S),u.memoizedState=w.state,l=u.child):l=Hr(l,u,S),l}function Y_(l,u,p,y){return ls(),u.flags|=256,$(l,u,p,y),u.child}function qp(l){return{baseLanes:l,cachePool:nr()}}function Hp(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Ss),l}function Fp(l,u,p){var y=u.pendingProps,S=!1,w=(u.flags&128)!==0,x;if((x=w)||(x=l!==null&&l.memoizedState===null?!1:(Hn.current&2)!==0),x&&(S=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,l===null){if(Re){if(S?Ca(u):qi(),(l=En)?(l=My(l,ys),l!==null&&(u.memoizedState={dehydrated:l,treeContext:Ga!==null?{id:Fi,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},p=ig(l),p.return=u,u.child=p,_i=u,En=null)):l=null,l===null)throw De(u);return im(l)?u.lanes=32:u.lanes=536870912,null}var Q=y.children;return y=y.fallback,S?(qi(),S=u.mode,Q=hl({mode:"hidden",children:Q},S),y=ka(y,S,p,null),Q.return=u,y.return=u,Q.sibling=y,u.child=Q,y=u.child,y.memoizedState=qp(p),y.childLanes=Hp(l,x,p),u.memoizedState=Mu,xe(null,y)):(Ca(u),Pd(u,Q))}var dt=l.memoizedState;if(dt!==null&&(Q=dt.dehydrated,Q!==null)){if(w)u.flags&256?(Ca(u),u.flags&=-257,u=mu(l,u,p)):u.memoizedState!==null?(qi(),u.child=l.child,u.flags|=128,u=null):(qi(),Q=y.fallback,S=u.mode,y=hl({mode:"visible",children:y.children},S),Q=ka(Q,S,p,null),Q.flags|=2,y.return=u,Q.return=u,y.sibling=Q,u.child=y,Ki(u,l.child,null,p),y=u.child,y.memoizedState=qp(p),y.childLanes=Hp(l,x,p),u.memoizedState=Mu,u=xe(null,y));else if(Ca(u),im(Q))x=sm(Q).digest,y=Error(s(419)),y.stack="",y.digest=x,tr({value:y,source:null,stack:null}),u=mu(l,u,p);else if(mn||rn(l,u,p,!1),x=(p&l.childLanes)!==0,mn||x){if(x=_e,x!==null&&(y=q(x,p),y!==0&&y!==dt.retryLane))throw dt.retryLane=y,Gi(l,y),On(x,l,y),Ts;Al(Q)||Uc(),u=mu(l,u,p)}else Al(Q)?(u.flags|=192,u.child=l.child,u=null):(l=dt.treeContext,vn&&(En=Dy(Q),_i=u,Re=!0,so=null,ys=!1,l!==null&&zt(u,l)),u=Pd(u,y.children),u.flags|=4096);return u}return S?(qi(),Q=y.fallback,S=u.mode,dt=l.child,w=dt.sibling,y=ra(dt,{mode:"hidden",children:y.children}),y.subtreeFlags=dt.subtreeFlags&65011712,w!==null?Q=ra(w,Q):(Q=ka(Q,S,p,null),Q.flags|=2),Q.return=u,y.return=u,y.sibling=Q,u.child=y,xe(null,y),y=u.child,Q=l.child.memoizedState,Q===null?Q=qp(p):(S=Q.cachePool,S!==null?(dt=Zn?Tn._currentValue:Tn._currentValue2,S=S.parent!==dt?{parent:dt,pool:dt}:S):S=nr(),Q={baseLanes:Q.baseLanes|p,cachePool:S}),y.memoizedState=Q,y.childLanes=Hp(l,x,p),u.memoizedState=Mu,xe(l.child,y)):(Ca(u),p=l.child,l=p.sibling,p=ra(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(x=u.deletions,x===null?(u.deletions=[l],u.flags|=16):x.push(l)),u.child=p,u.memoizedState=null,p)}function Pd(l,u){return u=hl({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function hl(l,u){return l=e(22,l,null,u),l.lanes=0,l}function mu(l,u,p){return Ki(u,l.child,null,p),l=Pd(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Q_(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),vo(l.return,u,p)}function Nc(l,u,p,y,S,w){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S,treeForkCount:w}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=p,x.tailMode=S,x.treeForkCount=w)}function jp(l,u,p){var y=u.pendingProps,S=y.revealOrder,w=y.tail;y=y.children;var x=Hn.current,Q=(x&2)!==0;if(Q?(x=x&1|2,u.flags|=128):x&=1,D(Hn,x),$(l,u,y,p),y=Re?Cf:0,!Q&&l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Q_(l,p,u);else if(l.tag===19)Q_(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&nl(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),Nc(u,!1,S,p,w,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&nl(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}Nc(u,!0,p,null,w,y);break;case"together":Nc(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function Hr(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Go|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(rn(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,p=ra(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=ra(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function sf(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&cs(l)))}function Kp(l,u,p){switch(u.tag){case 3:te(u,u.stateNode.containerInfo),$i(u,Tn,l.memoizedState.cache),ls();break;case 27:case 5:Ee(u);break;case 4:te(u,u.stateNode.containerInfo);break;case 10:$i(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,iu(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Ca(u),u.flags|=128,null):(p&u.child.childLanes)!==0?Fp(l,u,p):(Ca(u),l=Hr(l,u,p),l!==null?l.sibling:null);Ca(u);break;case 19:var S=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(rn(l,u,p,!1),y=(p&u.childLanes)!==0),S){if(y)return jp(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),D(Hn,Hn.current),y)break;return null;case 22:return u.lanes=0,Gn(l,u,p,u.pendingProps);case 24:$i(u,Tn,l.memoizedState.cache)}return Hr(l,u,p)}function Yp(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)mn=!0;else{if(!sf(l,p)&&(u.flags&128)===0)return mn=!1,Kp(l,u,p);mn=(l.flags&131072)!==0}else mn=!1,Re&&(u.flags&1048576)!==0&&H(u,Cf,u.index);switch(u.lanes=0,u.tag){case 16:t:{var y=u.pendingProps;if(l=Dr(u.elementType),u.type=l,typeof l=="function")gu(l)?(y=Gr(l,y),u.tag=1,u=du(null,u,l,y,p)):(u.tag=0,u=Ro(null,u,l,y,p));else{if(l!=null){var S=l.$$typeof;if(S===qc){u.tag=11,u=ut(null,u,l,y,p);break t}else if(S===Wd){u.tag=14,u=Pt(null,u,l,y,p);break t}}throw u=b(l)||l,Error(s(306,u,""))}}return u;case 0:return Ro(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,S=Gr(y,u.pendingProps),du(l,u,y,S,p);case 3:t:{if(te(u,u.stateNode.containerInfo),l===null)throw Error(s(387));var w=u.pendingProps;S=u.memoizedState,y=S.element,wa(l,u),Mr(u,w,null,p);var x=u.memoizedState;if(w=x.cache,$i(u,Tn,w),w!==S.cache&&_n(u,[Tn],p,!0),Ds(),w=x.element,vn&&S.isDehydrated)if(S={element:w,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Y_(l,u,w,p);break t}else if(w!==y){y=Ut(Error(s(424)),u),tr(y),u=Y_(l,u,w,p);break t}else for(vn&&(En=Iy(u.stateNode.containerInfo),_i=u,Re=!0,so=null,ys=!0),p=Hg(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ls(),w===y){u=Hr(l,u,p);break t}$(l,u,w,p)}u=u.child}return u;case 26:if(za)return Ms(l,u),l===null?(p=Og(u.type,null,u.pendingProps,null))?u.memoizedState=p:Re||(u.stateNode=lm(u.type,u.pendingProps,ji.current,u)):u.memoizedState=Og(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(gi)return Ee(u),l===null&&gi&&Re&&(y=u.stateNode=um(u.type,u.pendingProps,ji.current,xi.current,!1),_i=u,ys=!0,En=Rg(u.type,y,En)),$(l,u,u.pendingProps.children,p),Ms(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Re&&(qy(u.type,u.pendingProps,xi.current),(S=y=En)&&(y=xy(y,u.type,u.pendingProps,ys),y!==null?(u.stateNode=y,_i=u,En=Cy(y),ys=!1,S=!0):S=!1),S||De(u)),Ee(u),S=u.type,w=u.pendingProps,x=l!==null?l.memoizedProps:null,y=w.children,_s(S,w)?y=null:x!==null&&_s(S,x)&&(u.flags|=32),u.memoizedState!==null&&(S=il(l,u,wi,null,null,p),Zn?wu._currentValue=S:wu._currentValue2=S),Ms(l,u),$(l,u,y,p),u.child;case 6:return l===null&&Re&&(xg(u.pendingProps,xi.current),(l=p=En)&&(p=Oy(p,u.pendingProps,ys),p!==null?(u.stateNode=p,_i=u,En=null,l=!0):l=!1),l||De(u)),null;case 13:return Fp(l,u,p);case 4:return te(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Ki(u,null,y,p):$(l,u,y,p),u.child;case 11:return ut(l,u,u.type,u.pendingProps,p);case 7:return $(l,u,u.pendingProps,p),u.child;case 8:return $(l,u,u.pendingProps.children,p),u.child;case 12:return $(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,$i(u,u.type,y.value),$(l,u,y.children,p),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,Bi(u),S=nn(S),y=y(S),u.flags|=1,$(l,u,y,p),u.child;case 14:return Pt(l,u,u.type,u.pendingProps,p);case 15:return ue(l,u,u.type,u.pendingProps,p);case 19:return jp(l,u,p);case 31:return mr(l,u,p);case 22:return Gn(l,u,p,u.pendingProps);case 24:return Bi(u),y=nn(Tn),l===null?(S=Eo(),S===null&&(S=_e,w=bi(),S.pooledCache=w,w.refCount++,w!==null&&(S.pooledCacheLanes|=p),S=w),u.memoizedState={parent:y,cache:S},oi(u),$i(u,Tn,S)):((l.lanes&p)!==0&&(wa(l,u),Mr(u,null,null,p),Ds()),S=l.memoizedState,w=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),$i(u,Tn,y)):(y=w.cache,$i(u,Tn,y),y!==S.cache&&_n(u,[Tn],p,!0))),$(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function xa(l){l.flags|=4}function af(l){oa&&(l.flags|=8)}function X_(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&8218)!==0||(l.subtreeFlags&8218)!==0)return!0;l=l.sibling}return!1}function Qp(l,u,p,y){if(Ne)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)vf(l,p.stateNode);else if(!(p.tag===4||gi&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(oa)for(var S=u.child;S!==null;){if(S.tag===5){var w=S.stateNode;p&&y&&(w=by(w,S.type,S.memoizedProps)),vf(l,w)}else if(S.tag===6)w=S.stateNode,p&&y&&(w=Ag(w,S.memoizedProps)),vf(l,w);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)w=S.child,w!==null&&(w.return=S),Qp(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function J_(l,u,p,y){var S=!1;if(oa)for(var w=u.child;w!==null;){if(w.tag===5){var x=w.stateNode;p&&y&&(x=by(x,w.type,w.memoizedProps)),Sg(l,x)}else if(w.tag===6)x=w.stateNode,p&&y&&(x=Ag(x,w.memoizedProps)),Sg(l,x);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)S=w.child,S!==null&&(S.return=w),J_(l,w,!0,!0),S=!0;else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return S;w=w.return}w.sibling.return=w.return,w=w.sibling}return S}function W_(l,u){if(oa&&X_(l,u)){l=u.stateNode;var p=l.containerInfo,y=Tg();J_(y,u,!1,!1),l.pendingChildren=y,xa(u),Sy(p,y)}}function Xp(l,u,p,y){if(Ne)l.memoizedProps!==y&&xa(u);else if(oa){var S=l.stateNode,w=l.memoizedProps;if((l=X_(l,u))||w!==y){var x=xi.current;w=Ty(S,p,w,y,!l,null),w===S?u.stateNode=S:(af(u),Ls(w,p,y,x)&&xa(u),u.stateNode=w,l&&Qp(w,u,!1,!1))}else u.stateNode=S}}function ms(l,u,p,y,S){if((l.mode&32)!==0&&(p===null?Ef(u,y):Yc(u,p,y))){if(l.flags|=16777216,(S&335544128)===S||cg(u,y))if(Mn(l.stateNode,u,y))l.flags|=8192;else if(Ie())l.flags|=8192;else throw vs=ao,Em}else l.flags&=-16777217}function Dc(l,u){if(kg(u)){if(l.flags|=16777216,!Lg(u))if(Ie())l.flags|=8192;else throw vs=ao,Em}else l.flags&=-16777217}function rf(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Z():536870912,l.lanes|=u,nh|=u)}function xc(l,u){if(!Re)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function ln(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function Z_(l,u,p){var y=u.pendingProps;switch(Ct(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(u),null;case 1:return ln(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),us(Tn),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Is(u)?xa(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ns())),W_(l,u),ln(u),null;case 26:if(za){var S=u.type,w=u.memoizedState;return l===null?(xa(u),w!==null?(ln(u),Dc(u,w)):(ln(u),ms(u,S,null,y,p))):w?w!==l.memoizedState?(xa(u),ln(u),Dc(u,w)):(ln(u),u.flags&=-16777217):(w=l.memoizedProps,Ne?w!==y&&xa(u):Xp(l,u,S,y),ln(u),ms(u,S,w,y,p)),null}case 27:if(gi){if(gn(u),p=ji.current,S=u.type,l!==null&&u.stateNode!=null)Ne?l.memoizedProps!==y&&xa(u):Xp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return ln(u),null}l=xi.current,Is(u)?Cr(u,l):(l=um(S,y,p,l,!0),u.stateNode=l,xa(u))}return ln(u),null}case 5:if(gn(u),S=u.type,l!==null&&u.stateNode!=null)Xp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return ln(u),null}if(w=xi.current,Is(u))Cr(u,w),zy(u.stateNode,S,y,w)&&(u.flags|=64);else{var x=lg(S,y,ji.current,w,u);af(u),Qp(x,u,!1,!1),u.stateNode=x,Ls(x,S,y,w)&&xa(u)}}return ln(u),ms(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)p=l.memoizedProps,Ne?p!==y&&xa(u):oa&&(p!==y?(l=ji.current,p=xi.current,af(u),u.stateNode=Vo(y,l,p,u)):u.stateNode=l.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(l=ji.current,p=xi.current,Is(u)){if(!vn)throw Error(s(176));if(l=u.stateNode,p=u.memoizedProps,y=null,S=_i,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}M2(l,p,u,y)||De(u,!0)}else af(u),u.stateNode=Vo(y,l,p,u)}return ln(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(y=Is(u),p!==null){if(l===null){if(!y)throw Error(s(318));if(!vn)throw Error(s(556));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));Ig(l,u)}else ls(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ln(u),l=!1}else p=Ns(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(Hi(u),u):(Hi(u),null);if((u.flags&128)!==0)throw Error(s(558))}return ln(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=Is(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!vn)throw Error(s(344));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));Vy(S,u)}else ls(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ln(u),S=!1}else S=Ns(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(Hi(u),u):(Hi(u),null)}return Hi(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool),w=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==S&&(y.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),rf(u,u.updateQueue),ln(u),null);case 4:return se(),W_(l,u),l===null&&$e(u.stateNode.containerInfo),ln(u),null;case 10:return us(u.type),ln(u),null;case 19:if(N(Hn),y=u.memoizedState,y===null)return ln(u),null;if(S=(u.flags&128)!==0,w=y.rendering,w===null)if(S)xc(y,!1);else{if(kn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(w=nl(l),w!==null){for(u.flags|=128,xc(y,!1),l=w.updateQueue,u.updateQueue=l,rf(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)Kd(p,l),p=p.sibling;return D(Hn,Hn.current&1|2),Re&&Kt(u,y.treeForkCount),u.child}l=l.sibling}y.tail!==null&&ns()>Vl&&(u.flags|=128,S=!0,xc(y,!1),u.lanes=4194304)}else{if(!S)if(l=nl(w),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,rf(u,l),xc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Re)return ln(u),null}else 2*ns()-y.renderingStartTime>Vl&&p!==536870912&&(u.flags|=128,S=!0,xc(y,!1),u.lanes=4194304);y.isBackwards?(w.sibling=u.child,u.child=w):(l=y.last,l!==null?l.sibling=w:u.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=ns(),l.sibling=null,p=Hn.current,D(Hn,S?p&1|2:p&1),Re&&Kt(u,y.treeForkCount),l):(ln(u),null);case 22:case 23:return Hi(u),Bn(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(ln(u),u.subtreeFlags&6&&(u.flags|=8192)):ln(u),p=u.updateQueue,p!==null&&rf(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&N(Cl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),us(Tn),ln(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function Jp(l,u){switch(Ct(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return us(Tn),se(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return gn(u),null;case 31:if(u.memoizedState!==null){if(Hi(u),u.alternate===null)throw Error(s(340));ls()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Hi(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));ls()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return N(Hn),null;case 4:return se(),null;case 10:return us(u.type),null;case 22:case 23:return Hi(u),Bn(),l!==null&&N(Cl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return us(Tn),null;case 25:return null;default:return null}}function $_(l,u){switch(Ct(u),u.tag){case 3:us(Tn),se();break;case 26:case 27:case 5:gn(u);break;case 4:se();break;case 31:u.memoizedState!==null&&Hi(u);break;case 13:Hi(u);break;case 19:N(Hn);break;case 10:us(u.type);break;case 22:case 23:Hi(u),Bn(),l!==null&&N(Cl);break;case 24:us(Tn)}}function Fr(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&l)===l){y=void 0;var w=p.create,x=p.inst;y=w(),x.destroy=y}p=p.next}while(p!==S)}}catch(Q){ae(u,u.return,Q)}}function jr(l,u,p){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var w=S.next;y=w;do{if((y.tag&l)===l){var x=y.inst,Q=x.destroy;if(Q!==void 0){x.destroy=void 0,S=u;var dt=p,St=Q;try{St()}catch(Mt){ae(S,dt,Mt)}}}y=y.next}while(y!==w)}}catch(Mt){ae(u,u.return,Mt)}}function Oc(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{ta(u,p)}catch(y){ae(l,l.return,y)}}}function Vd(l,u,p){p.props=Gr(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){ae(l,u,y)}}function Mc(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=Fc(l.stateNode);break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(S){ae(l,u,S)}}function es(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){ae(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){ae(l,u,S)}else p.current=null}function pu(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{dy(y,u,p,l)}catch(S){ae(l,l.return,S)}}function of(l,u,p){try{my(l.stateNode,l.type,p,u,l)}catch(y){ae(l,l.return,y)}}function Wp(l){return l.tag===5||l.tag===3||(za?l.tag===26:!1)||(gi?l.tag===27&&Ru(l.type):!1)||l.tag===4}function Co(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Wp(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(gi&&l.tag===27&&Ru(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function kd(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?gy(p,l,u):_g(p,l);else if(y!==4&&(gi&&y===27&&Ru(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(kd(l,u,p),l=l.sibling;l!==null;)kd(l,u,p),l=l.sibling}function lf(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?py(p,l,u):gg(p,l);else if(y!==4&&(gi&&y===27&&Ru(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(lf(l,u,p),l=l.sibling;l!==null;)lf(l,u,p),l=l.sibling}function Zp(l,u,p){l=l.containerInfo;try{bg(l,p)}catch(y){ae(u,u.return,y)}}function ty(l){var u=l.stateNode,p=l.memoizedProps;try{ui(l.type,p,u,l)}catch(y){ae(l,l.return,y)}}function N2(l,u){for(Zd(l.containerInfo),ei=u;ei!==null;)if(l=ei,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,ei=u;else for(;ei!==null;){l=ei;var p=l.alternate;switch(u=l.flags,l.tag){case 0:if((u&4)!==0&&(u=l.updateQueue,u=u!==null?u.events:null,u!==null))for(var y=0;y<u.length;y++){var S=u[y];S.ref.impl=S.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0,y=l,S=p.memoizedProps,p=p.memoizedState;var w=y.stateNode;try{var x=Gr(y.type,S);u=w.getSnapshotBeforeUpdate(x,p),w.__reactInternalSnapshotBeforeUpdate=u}catch(Q){ae(y,y.return,Q)}}break;case 3:(u&1024)!==0&&Ne&&Eg(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=l.sibling,u!==null){u.return=l.return,ei=u;break}ei=l.return}}function ey(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:ps(l,p),y&4&&Fr(5,p);break;case 1:if(ps(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(x){ae(p,p.return,x)}else{var S=Gr(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(x){ae(p,p.return,x)}}y&64&&Oc(p),y&512&&Mc(p,p.return);break;case 3:if(ps(l,p),y&64&&(y=p.updateQueue,y!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=Fc(p.child.stateNode);break;case 1:l=p.child.stateNode}try{ta(y,l)}catch(x){ae(p,p.return,x)}}break;case 27:gi&&u===null&&y&4&&ty(p);case 26:case 5:if(ps(l,p),u===null){if(y&4)pu(p);else if(y&64){l=p.type,u=p.memoizedProps,S=p.stateNode;try{Ly(S,l,u,p)}catch(x){ae(p,p.return,x)}}}y&512&&Mc(p,p.return);break;case 12:ps(l,p);break;case 31:ps(l,p),y&4&&Ma(l,p);break;case 13:ps(l,p),y&4&&cf(l,p),y&64&&(y=p.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(p=D2.bind(null,p),am(y,p))));break;case 22:if(y=p.memoizedState!==null||Fn,!y){u=u!==null&&u.memoizedState!==null||jn,S=Fn;var w=jn;Fn=y,(jn=u)&&!w?Va(l,p,(p.subtreeFlags&8772)!==0):ps(l,p),Fn=S,jn=w}break;case 30:break;default:ps(l,p)}}function $p(l){var u=l.alternate;u!==null&&(l.alternate=null,$p(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&$d(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Oa(l,u,p){for(p=p.child;p!==null;)uf(l,u,p),p=p.sibling}function uf(l,u,p){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(Nu,p)}catch{}switch(p.tag){case 26:if(za){jn||es(p,u),Oa(l,u,p),p.memoizedState?wl(p.memoizedState):p.stateNode&&Vg(p.stateNode);break}case 27:if(gi){jn||es(p,u);var y=Vn,S=ni;Ru(p.type)&&(Vn=p.stateNode,ni=!1),Oa(l,u,p),Di(p.stateNode),Vn=y,ni=S;break}case 5:jn||es(p,u);case 6:if(Ne){if(y=Vn,S=ni,Vn=null,Oa(l,u,p),Vn=y,ni=S,Vn!==null)if(ni)try{yg(Vn,p.stateNode)}catch(w){ae(p,u,w)}else try{_y(Vn,p.stateNode)}catch(w){ae(p,u,w)}}else Oa(l,u,p);break;case 18:Ne&&Vn!==null&&(ni?rm(Vn,p.stateNode):Dg(Vn,p.stateNode));break;case 4:Ne?(y=Vn,S=ni,Vn=p.stateNode.containerInfo,ni=!0,Oa(l,u,p),Vn=y,ni=S):(oa&&Zp(p.stateNode,p,Tg()),Oa(l,u,p));break;case 0:case 11:case 14:case 15:jr(2,p,u),jn||jr(4,p,u),Oa(l,u,p);break;case 1:jn||(es(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Vd(p,u,y)),Oa(l,u,p);break;case 21:Oa(l,u,p);break;case 22:jn=(y=jn)||p.memoizedState!==null,Oa(l,u,p),jn=y;break;default:Oa(l,u,p)}}function Ma(l,u){if(vn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{P2(l)}catch(p){ae(u,u.return,p)}}}function cf(l,u){if(vn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{V2(l)}catch(p){ae(u,u.return,p)}}function Pa(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new jg),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new jg),u;default:throw Error(s(435,l.tag))}}function Io(l,u){var p=Pa(l);u.forEach(function(y){if(!p.has(y)){p.add(y);var S=x2.bind(null,l,y);y.then(S,S)}})}function Ii(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],w=l,x=u;if(Ne){var Q=x;t:for(;Q!==null;){switch(Q.tag){case 27:if(gi){if(Ru(Q.type)){Vn=Q.stateNode,ni=!1;break t}break}case 5:Vn=Q.stateNode,ni=!1;break t;case 3:case 4:Vn=Q.stateNode.containerInfo,ni=!0;break t}Q=Q.return}if(Vn===null)throw Error(s(160));uf(w,x,S),Vn=null,ni=!1}else uf(w,x,S);w=S.alternate,w!==null&&(w.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)hf(u,l),u=u.sibling}function hf(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ii(u,l),Ni(l),y&4&&(jr(3,l,l.return),Fr(3,l),jr(5,l,l.return));break;case 1:Ii(u,l),Ni(l),y&512&&(jn||p===null||es(p,p.return)),y&64&&Fn&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(za){var S=Je;if(Ii(u,l),Ni(l),y&512&&(jn||p===null||es(p,p.return)),y&4){y=p!==null?p.memoizedState:null;var w=l.memoizedState;p===null?w===null?l.stateNode===null?l.stateNode=Hy(S,l.type,l.memoizedProps,l):Pg(S,l.type,l.stateNode):l.stateNode=Mg(S,w,l.memoizedProps):y!==w?(y===null?p.stateNode!==null&&Vg(p.stateNode):wl(y),w===null?Pg(S,l.type,l.stateNode):Mg(S,w,l.memoizedProps)):w===null&&l.stateNode!==null&&of(l,l.memoizedProps,p.memoizedProps)}break}case 27:if(gi){Ii(u,l),Ni(l),y&512&&(jn||p===null||es(p,p.return)),p!==null&&y&4&&of(l,l.memoizedProps,p.memoizedProps);break}case 5:if(Ii(u,l),Ni(l),y&512&&(jn||p===null||es(p,p.return)),Ne){if(l.flags&32){S=l.stateNode;try{vg(S)}catch(wt){ae(l,l.return,wt)}}y&4&&l.stateNode!=null&&(S=l.memoizedProps,of(l,S,p!==null?p.memoizedProps:S)),y&1024&&(Wc=!0)}else oa&&l.alternate!==null&&(l.alternate.stateNode=l.stateNode);break;case 6:if(Ii(u,l),Ni(l),y&4&&Ne){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,p=p!==null?p.memoizedProps:y,S=l.stateNode;try{fy(S,p,y)}catch(wt){ae(l,l.return,wt)}}break;case 3:if(za?(Fy(),S=Je,Je=bf(u.containerInfo),Ii(u,l),Je=S):Ii(u,l),Ni(l),y&4){if(Ne&&vn&&p!==null&&p.memoizedState.isDehydrated)try{Uy(u.containerInfo)}catch(wt){ae(l,l.return,wt)}if(oa){y=u.containerInfo,p=u.pendingChildren;try{bg(y,p)}catch(wt){ae(l,l.return,wt)}}}Wc&&(Wc=!1,Ld(l));break;case 4:za?(p=Je,Je=bf(l.stateNode.containerInfo),Ii(u,l),Ni(l),Je=p):(Ii(u,l),Ni(l)),y&4&&oa&&Zp(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Ii(u,l),Ni(l);break;case 31:Ii(u,l),Ni(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Io(l,y)));break;case 13:Ii(u,l),Ni(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Mf=ns()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Io(l,y)));break;case 22:S=l.memoizedState!==null;var x=p!==null&&p.memoizedState!==null,Q=Fn,dt=jn;if(Fn=Q||S,jn=dt||x,Ii(u,l),jn=dt,Fn=Q,Ni(l),y&8192&&(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(p===null||x||Fn||jn||fl(l)),Ne)){t:if(p=null,Ne)for(u=l;;){if(u.tag===5||za&&u.tag===26){if(p===null){x=p=u;try{w=x.stateNode,S?O2(w):vy(x.stateNode,x.memoizedProps)}catch(wt){ae(x,x.return,wt)}}}else if(u.tag===6){if(p===null){x=u;try{var St=x.stateNode;S?yy(St):Ey(St,x.memoizedProps)}catch(wt){ae(x,x.return,wt)}}}else if(u.tag===18){if(p===null){x=u;try{var Mt=x.stateNode;S?By(Mt):Gy(x.stateNode)}catch(wt){ae(x,x.return,wt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Io(l,p))));break;case 19:Ii(u,l),Ni(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Io(l,y)));break;case 30:break;case 21:break;default:Ii(u,l),Ni(l)}}function Ni(l){var u=l.flags;if(u&2){try{for(var p,y=l.return;y!==null;){if(Wp(y)){p=y;break}y=y.return}if(Ne){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(gi){var S=p.stateNode,w=Co(l);lf(l,w,S);break}case 5:var x=p.stateNode;p.flags&32&&(vg(x),p.flags&=-33);var Q=Co(l);lf(l,Q,x);break;case 3:case 4:var dt=p.stateNode.containerInfo,St=Co(l);kd(l,St,dt);break;default:throw Error(s(161))}}}catch(Mt){ae(l,l.return,Mt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Ld(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Ld(u),u.tag===5&&u.flags&1024&&fg(u.stateNode),l=l.sibling}}function ps(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ey(l,u.alternate,u),u=u.sibling}function fl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:jr(4,u,u.return),fl(u);break;case 1:es(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Vd(u,u.return,p),fl(u);break;case 27:gi&&Di(u.stateNode);case 26:case 5:es(u,u.return),fl(u);break;case 22:u.memoizedState===null&&fl(u);break;case 30:fl(u);break;default:fl(u)}l=l.sibling}}function Va(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,w=u,x=w.flags;switch(w.tag){case 0:case 11:case 15:Va(S,w,p),Fr(4,w);break;case 1:if(Va(S,w,p),y=w,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(St){ae(y,y.return,St)}if(y=w,S=y.updateQueue,S!==null){var Q=y.stateNode;try{var dt=S.shared.hiddenCallbacks;if(dt!==null)for(S.shared.hiddenCallbacks=null,S=0;S<dt.length;S++)ar(dt[S],Q)}catch(St){ae(y,y.return,St)}}p&&x&64&&Oc(w),Mc(w,w.return);break;case 27:gi&&ty(w);case 26:case 5:Va(S,w,p),p&&y===null&&x&4&&pu(w),Mc(w,w.return);break;case 12:Va(S,w,p);break;case 31:Va(S,w,p),p&&x&4&&Ma(S,w);break;case 13:Va(S,w,p),p&&x&4&&cf(S,w);break;case 22:w.memoizedState===null&&Va(S,w,p),Mc(w,w.return);break;case 30:break;default:Va(S,w,p)}u=u.sibling}}function dl(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&At(p))}function tg(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&At(l))}function xn(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Ud(l,u,p,y),u=u.sibling}function Ud(l,u,p,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:xn(l,u,p,y),S&2048&&Fr(9,u);break;case 1:xn(l,u,p,y);break;case 3:xn(l,u,p,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&At(l)));break;case 12:if(S&2048){xn(l,u,p,y),l=u.stateNode;try{var w=u.memoizedProps,x=w.id,Q=w.onPostCommit;typeof Q=="function"&&Q(x,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(dt){ae(u,u.return,dt)}}else xn(l,u,p,y);break;case 31:xn(l,u,p,y);break;case 13:xn(l,u,p,y);break;case 23:break;case 22:w=u.stateNode,x=u.alternate,u.memoizedState!==null?w._visibility&2?xn(l,u,p,y):Pc(l,u):w._visibility&2?xn(l,u,p,y):(w._visibility|=2,Ps(l,u,p,y,(u.subtreeFlags&10256)!==0||!1)),S&2048&&dl(x,u);break;case 24:xn(l,u,p,y),S&2048&&tg(u.alternate,u);break;default:xn(l,u,p,y)}}function Ps(l,u,p,y,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=l,x=u,Q=p,dt=y,St=x.flags;switch(x.tag){case 0:case 11:case 15:Ps(w,x,Q,dt,S),Fr(8,x);break;case 23:break;case 22:var Mt=x.stateNode;x.memoizedState!==null?Mt._visibility&2?Ps(w,x,Q,dt,S):Pc(w,x):(Mt._visibility|=2,Ps(w,x,Q,dt,S)),S&&St&2048&&dl(x.alternate,x);break;case 24:Ps(w,x,Q,dt,S),S&&St&2048&&tg(x.alternate,x);break;default:Ps(w,x,Q,dt,S)}u=u.sibling}}function Pc(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,S=y.flags;switch(y.tag){case 22:Pc(p,y),S&2048&&dl(y.alternate,y);break;case 24:Pc(p,y),S&2048&&tg(y.alternate,y);break;default:Pc(p,y)}u=u.sibling}}function Kr(l,u,p){if(l.subtreeFlags&ha)for(l=l.child;l!==null;)ml(l,u,p),l=l.sibling}function ml(l,u,p){switch(l.tag){case 26:if(Kr(l,u,p),l.flags&ha)if(l.memoizedState!==null)jy(p,Je,l.memoizedState,l.memoizedProps);else{var y=l.stateNode,S=l.type;l=l.memoizedProps,((u&335544128)===u||cg(S,l))&&tm(p,y,S,l)}break;case 5:Kr(l,u,p),l.flags&ha&&(y=l.stateNode,S=l.type,l=l.memoizedProps,((u&335544128)===u||cg(S,l))&&tm(p,y,S,l));break;case 3:case 4:za?(y=Je,Je=bf(l.stateNode.containerInfo),Kr(l,u,p),Je=y):Kr(l,u,p);break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=ha,ha=16777216,Kr(l,u,p),ha=y):Kr(l,u,p));break;default:Kr(l,u,p)}}function zd(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Vc(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];ei=y,sa(y,l)}zd(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Bd(l),l=l.sibling}function Bd(l){switch(l.tag){case 0:case 11:case 15:Vc(l),l.flags&2048&&jr(9,l,l.return);break;case 3:Vc(l);break;case 12:Vc(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,ff(l)):Vc(l);break;default:Vc(l)}}function ff(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];ei=y,sa(y,l)}zd(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:jr(8,u,u.return),ff(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,ff(u));break;default:ff(u)}l=l.sibling}}function sa(l,u){for(;ei!==null;){var p=ei;switch(p.tag){case 0:case 11:case 15:jr(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:At(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,ei=y;else t:for(p=l;ei!==null;){y=ei;var S=y.sibling,w=y.return;if($p(y),y===p){ei=null;break t}if(S!==null){S.return=w,ei=S;break t}ei=w}}}function pl(l){var u=he(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(l=$n(l),l===null)throw Error(s(362));return l.stateNode.current}function gl(l,u){var p=l.tag;switch(u.$$typeof){case Ya:if(l.type===u.value)return!0;break;case $c:t:{for(u=u.value,l=[l,0],p=0;p<l.length;){var y=l[p++],S=y.tag,w=l[p++],x=u[w];if(S!==5&&S!==26&&S!==27||!bl(y)){for(;x!=null&&gl(y,x);)w++,x=u[w];if(w===u.length){u=!0;break t}else for(y=y.child;y!==null;)l.push(y,w),y=y.sibling}}u=!1}return u;case th:if((p===5||p===26||p===27)&&pg(l.stateNode,u.value))return!0;break;case xl:if((p===5||p===6||p===26||p===27)&&(l=Tf(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case xf:if((p===5||p===26||p===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function kc(l){switch(l.$$typeof){case Ya:return"<"+(b(l.value)||"Unknown")+">";case $c:return":has("+(kc(l)||"")+")";case th:return'[role="'+l.value+'"]';case xl:return'"'+l.value+'"';case xf:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function Lc(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var S=l[y++],w=S.tag,x=l[y++],Q=u[x];if(w!==5&&w!==26&&w!==27||!bl(S)){for(;Q!=null&&gl(S,Q);)x++,Q=u[x];if(x===u.length)p.push(S);else for(S=S.child;S!==null;)l.push(S,x),S=S.sibling}}return p}function Vs(l,u){if(!pi)throw Error(s(363));l=pl(l),l=Lc(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++],S=y.tag;if(S===5||S===26||S===27)bl(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}function yn(){return(be&2)!==0&&Ce!==0?Ce&-Ce:Zt.T!==null?cc():Kc()}function No(){if(Ss===0)if((Ce&536870912)===0||Re){var l=Iu;Iu<<=1,(Iu&3932160)===0&&(Iu=262144),Ss=l}else Ss=536870912;return l=Gs.current,l!==null&&(l.flags|=32),Ss}function On(l,u,p){(l===_e&&(We===2||We===9)||l.cancelPendingCommit!==null)&&(qn(l,0),Qr(l,Ce,Ss,!1)),ot(l,p),((be&2)===0||l!==_e)&&(l===_e&&((be&2)===0&&(Pl|=p),kn===4&&Qr(l,Ce,Ss,!1)),Te(l))}function pr(l,u,p){if((be&6)!==0)throw Error(s(327));var y=!p&&(u&127)===0&&(u&l.expiredLanes)===0||K(l,u),S=y?sy(l,u):Xr(l,u,!0),w=y;do{if(S===0){Ol&&!y&&Qr(l,u,0,!1);break}else{if(p=l.current.alternate,w&&!ny(p)){S=Xr(l,u,!1),w=!1;continue}if(S===2){if(w=u,l.errorRecoveryDisabledLanes&w)var x=0;else x=l.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;t:{var Q=l;S=Of;var dt=vn&&Q.current.memoizedState.isDehydrated;if(dt&&(qn(Q,x).flags|=256),x=Xr(Q,x,!1),x!==2){if(Ml&&!dt){Q.errorRecoveryDisabledLanes|=w,Pl|=w,S=4;break t}w=qs,qs=S,w!==null&&(qs===null?qs=w:qs.push.apply(qs,w))}S=x}if(w=!1,S!==2)continue}}if(S===1){qn(l,0),Qr(l,u,0,!0);break}t:{switch(y=l,w=S,w){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Qr(y,u,Ss,!vr);break t;case 2:qs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(S=Mf+300-ns(),10<S)){if(Qr(y,u,Ss,!vr),j(y,0,!0)!==0)break t;uo=u,y.timeoutHandle=ug(Yr.bind(null,y,p,qs,Pf,Sm,u,Ss,Pl,nh,vr,w,"Throttled",-0,0),S);break t}Yr(y,p,qs,Pf,Sm,u,Ss,Pl,nh,vr,w,null,-0,0)}}break}while(!0);Te(l)}function Yr(l,u,p,y,S,w,x,Q,dt,St,Mt,wt,Gt,ce){if(l.timeoutHandle=Us,wt=u.subtreeFlags,wt&8192||(wt&16785408)===16785408){wt=hg(),ml(u,w,wt);var Mi=(w&62914560)===w?Mf-ns():(w&4194048)===w?Vu-ns():0;if(Mi=hy(wt,Mi),Mi!==null){uo=w,l.cancelPendingCommit=Mi(Wr.bind(null,l,u,w,p,y,S,x,Q,dt,Mt,wt,null,Gt,ce)),Qr(l,w,x,!St);return}}Wr(l,u,w,p,y,S,x,Q,dt)}function ny(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],w=S.getSnapshot;S=S.value;try{if(!ti(w(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Qr(l,u,p,y){u&=~eh,u&=~Pl,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var w=31-zs(S),x=1<<w;y[w]=-1,S&=~x}p!==0&&M(l,p,u)}function Gd(){return(be&6)===0?(Se(0),!1):!0}function qd(){if(Ae!==null){if(We===0)var l=Ae.return;else l=Ae,_r=cn=null,He(l),Il=null,Du=0,l=Ae;for(;l!==null;)$_(l.alternate,l),l=l.return;Ae=null}}function qn(l,u){var p=l.timeoutHandle;p!==Us&&(l.timeoutHandle=Us,cy(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),uo=0,qd(),_e=l,Ae=p=ra(l.current,null),Ce=u,We=0,ci=null,vr=!1,Ol=K(l,u),Ml=!1,nh=Ss=eh=Pl=Go=kn=0,qs=Of=null,Sm=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-zs(y),w=1<<S;u|=l[S],y&=~w}return lo=u,xr(),p}function un(l,u){fe=null,Zt.H=ca,u===vi||u===ja?(u=ir(),We=3):u===Em?(u=ir(),We=4):We=u===Ts?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ci=u,Ae===null&&(kn=1,hu(l,Ut(u,l.current)))}function Ie(){var l=Gs.current;return l===null?!0:(Ce&4194048)===Ce?Es===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?l===Es:!1}function Do(){var l=Zt.H;return Zt.H=ca,l===null?ca:l}function aa(){var l=Zt.A;return Zt.A=Zc,l}function Uc(){kn=4,vr||(Ce&4194048)!==Ce&&Gs.current!==null||(Ol=!0),(Go&134217727)===0&&(Pl&134217727)===0||_e===null||Qr(_e,Ce,Ss,!1)}function Xr(l,u,p){var y=be;be|=2;var S=Do(),w=aa();(_e!==l||Ce!==u)&&(Pf=null,qn(l,u)),u=!1;var x=kn;t:do try{if(We!==0&&Ae!==null){var Q=Ae,dt=ci;switch(We){case 8:qd(),x=6;break t;case 3:case 2:case 9:case 6:Gs.current===null&&(u=!0);var St=We;if(We=0,ci=null,Jr(l,Q,dt,St),p&&Ol){x=0;break t}break;default:St=We,We=0,ci=null,Jr(l,Q,dt,St)}}iy(),x=kn;break}catch(Mt){un(l,Mt)}while(!0);return u&&l.shellSuspendCounter++,_r=cn=null,be=y,Zt.H=S,Zt.A=w,Ae===null&&(_e=null,Ce=0,xr()),x}function iy(){for(;Ae!==null;)_l(Ae)}function sy(l,u){var p=be;be|=2;var y=Do(),S=aa();_e!==l||Ce!==u?(Pf=null,Vl=ns()+500,qn(l,u)):Ol=K(l,u);t:do try{if(We!==0&&Ae!==null){u=Ae;var w=ci;e:switch(We){case 1:We=0,ci=null,Jr(l,u,w,1);break;case 2:case 9:if(Sa(w)){We=0,ci=null,Hd(u);break}u=function(){We!==2&&We!==9||_e!==l||(We=7),Te(l)},w.then(u,u);break t;case 3:We=7;break t;case 4:We=5;break t;case 7:Sa(w)?(We=0,ci=null,Hd(u)):(We=0,ci=null,Jr(l,u,w,7));break;case 5:var x=null;switch(Ae.tag){case 26:x=Ae.memoizedState;case 5:case 27:var Q=Ae,dt=Q.type,St=Q.pendingProps;if(x?Lg(x):Mn(Q.stateNode,dt,St)){We=0,ci=null;var Mt=Q.sibling;if(Mt!==null)Ae=Mt;else{var wt=Q.return;wt!==null?(Ae=wt,Bc(wt)):Ae=null}break e}}We=0,ci=null,Jr(l,u,w,5);break;case 6:We=0,ci=null,Jr(l,u,w,6);break;case 8:qd(),kn=6;break t;default:throw Error(s(462))}}zc();break}catch(Gt){un(l,Gt)}while(!0);return _r=cn=null,Zt.H=y,Zt.A=S,be=p,Ae!==null?0:(_e=null,Ce=0,xr(),kn)}function zc(){for(;Ae!==null&&!Yy();)_l(Ae)}function _l(l){var u=Yp(l.alternate,l,lo);l.memoizedProps=l.pendingProps,u===null?Bc(l):Ae=u}function Hd(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=fu(p,u,u.pendingProps,u.type,void 0,Ce);break;case 11:u=fu(p,u,u.pendingProps,u.type.render,u.ref,Ce);break;case 5:He(u);default:$_(p,u),u=Ae=Kd(u,lo),u=Yp(p,u,lo)}l.memoizedProps=l.pendingProps,u===null?Bc(l):Ae=u}function Jr(l,u,p,y){_r=cn=null,He(u),Il=null,Du=0;var S=u.return;try{if(P(l,S,u,p,Ce)){kn=1,hu(l,Ut(p,l.current)),Ae=null;return}}catch(w){if(S!==null)throw Ae=S,w;kn=1,hu(l,Ut(p,l.current)),Ae=null;return}u.flags&32768?(Re||y===1?l=!0:Ol||(Ce&536870912)!==0?l=!1:(vr=l=!0,(y===2||y===9||y===3||y===6)&&(y=Gs.current,y!==null&&y.tag===13&&(y.flags|=16384))),yl(u,l)):Bc(u)}function Bc(l){var u=l;do{if((u.flags&32768)!==0){yl(u,vr);return}l=u.return;var p=Z_(u.alternate,u,lo);if(p!==null){Ae=p;return}if(u=u.sibling,u!==null){Ae=u;return}Ae=u=l}while(u!==null);kn===0&&(kn=5)}function yl(l,u){do{var p=Jp(l.alternate,l);if(p!==null){p.flags&=32767,Ae=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){Ae=l;return}Ae=l=p}while(l!==null);kn=6,Ae=null}function Wr(l,u,p,y,S,w,x,Q,dt){l.cancelPendingCommit=null;do $r();while(hi!==0);if((be&6)!==0)throw Error(s(327));if(u!==null){if(u===l.current)throw Error(s(177));if(w=u.lanes|u.childLanes,w|=xu,V(l,p,w,x,Q,dt),l===_e&&(Ae=_e=null,Ce=0),ku=u,Ho=l,uo=p,ih=w,bm=S,Kg=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,li(wf,function(){return df(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=Zt.T,Zt.T=null,S=Ua(),we(2),x=be,be|=4;try{N2(l,u,p)}finally{be=x,we(S),Zt.T=y}}hi=1,xo(),Zr(),Fd()}}function xo(){if(hi===1){hi=0;var l=Ho,u=ku,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=Zt.T,Zt.T=null;var y=Ua();we(2);var S=be;be|=4;try{hf(u,l),uy(l.containerInfo)}finally{be=S,we(y),Zt.T=p}}l.current=u,hi=2}}function Zr(){if(hi===2){hi=0;var l=Ho,u=ku,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=Zt.T,Zt.T=null;var y=Ua();we(2);var S=be;be|=4;try{ey(l,u.alternate,u)}finally{be=S,we(y),Zt.T=p}}hi=3}}function Fd(){if(hi===4||hi===3){hi=0,zg();var l=Ho,u=ku,p=uo,y=Kg;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?hi=5:(hi=0,ku=Ho=null,jd(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(qo=null),F(p),u=u.stateNode,Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(Nu,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=Zt.T,S=Ua(),we(2),Zt.T=null;try{for(var w=l.onRecoverableError,x=0;x<y.length;x++){var Q=y[x];w(Q.value,{componentStack:Q.stack})}}finally{Zt.T=u,we(S)}}(uo&3)!==0&&$r(),Te(l),S=l.pendingLanes,(p&261930)!==0&&(S&42)!==0?l===Vf?Be++:(Be=0,Vf=l):Be=0,vn&&Sf(),Se(0)}}function jd(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,At(u)))}function $r(){return xo(),Zr(),Fd(),df()}function df(){if(hi!==5)return!1;var l=Ho,u=ih;ih=0;var p=F(uo),y=32>p?32:p;p=Zt.T;var S=Ua();try{we(y),Zt.T=null,y=bm,bm=null;var w=Ho,x=uo;if(hi=0,ku=Ho=null,uo=0,(be&6)!==0)throw Error(s(331));var Q=be;if(be|=4,Bd(w.current),Ud(w,w.current,x,y),be=Q,Se(0,!1),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(Nu,w)}catch{}return!0}finally{we(S),Zt.T=p,jd(l,u)}}function vl(l,u,p){u=Ut(p,u),u=_(l.stateNode,u,2),l=Or(l,u,2),l!==null&&(ot(l,2),Te(l))}function ae(l,u,p){if(l.tag===3)vl(l,l,p);else for(;u!==null;){if(u.tag===3){vl(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(qo===null||!qo.has(y))){l=Ut(p,l),p=R(2),y=Or(u,p,2),y!==null&&(I(p,y,u,l),ot(y,2),Te(y));break}}u=u.return}}function Gc(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new fa;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(p)||(Ml=!0,S.add(p),l=ay.bind(null,l,u,p),u.then(l,l))}function ay(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,_e===l&&(Ce&p)===p&&(kn===4||kn===3&&(Ce&62914560)===Ce&&300>ns()-Mf?(be&2)===0&&qn(l,0):eh|=p,nh===Ce&&(nh=0)),Te(l)}function ry(l,u){u===0&&(u=Z()),l=Gi(l,u),l!==null&&(ot(l,u),Te(l))}function D2(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),ry(l,p)}function x2(l,u){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),ry(l,p)}function li(l,u){return Af(l,u)}function eg(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ra(l,u){var p=l.alternate;return p===null?(p=e(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Kd(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Oo(l,u,p,y,S,w){var x=0;if(y=l,typeof l=="function")gu(l)&&(x=1);else if(typeof l=="string")x=za&&gi?om(l,p,xi.current)?26:Ug(l)?27:5:za?om(l,p,xi.current)?26:5:gi&&Ug(l)?27:5;else t:switch(l){case _f:return l=e(31,p,u,S),l.elementType=_f,l.lanes=w,l;case Eu:return ka(p.children,S,w,u);case Tu:x=8,S|=24;break;case Su:return l=e(12,p,u,S|2),l.elementType=Su,l.lanes=w,l;case Jd:return l=e(13,p,u,S),l.elementType=Jd,l.lanes=w,l;case Mo:return l=e(19,p,u,S),l.elementType=Mo,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case La:x=10;break t;case gf:x=9;break t;case qc:x=11;break t;case Wd:x=14;break t;case gs:x=16,y=null;break t}x=29,p=Error(s(130,l===null?"null":typeof l,"")),y=null}return u=e(x,p,u,S),u.elementType=l,u.type=y,u.lanes=w,u}function ka(l,u,p,y){return l=e(7,l,y,u),l.lanes=p,l}function ng(l,u,p){return l=e(6,l,null,u),l.lanes=p,l}function ig(l){var u=e(18,null,null,0);return u.stateNode=l,u}function sg(l,u,p){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function oy(l,u,p,y,S,w,x,Q,dt){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Us,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.hiddenUpdates=pt(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=w,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=dt,this.incompleteTransitions=new Map}function El(l,u,p,y,S,w,x,Q,dt,St,Mt,wt){return l=new oy(l,u,p,x,dt,St,Mt,wt,Q),u=1,w===!0&&(u|=24),w=e(3,null,null,u),l.current=w,w.stateNode=l,u=bi(),u.refCount++,l.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:u},oi(w),l}function Yd(l){return l?(l=eo,l):eo}function mf(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=f(u),l=l!==null?m(l):null,l===null?null:Fc(l.stateNode)}function ag(l,u,p,y,S,w){S=Yd(S),y.context===null?y.context=S:y.pendingContext=S,y=$s(u),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Or(l,y,u),p!==null&&(On(p,l,u),el(p,l,u))}function _u(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function pf(l,u){_u(l,u),(l=l.alternate)&&_u(l,u)}var pe={},Qd=xv(),ks=sS(),Xd=Object.assign,yu=Symbol.for("react.element"),to=Symbol.for("react.transitional.element"),vu=Symbol.for("react.portal"),Eu=Symbol.for("react.fragment"),Tu=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),gf=Symbol.for("react.consumer"),La=Symbol.for("react.context"),qc=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Mo=Symbol.for("react.suspense_list"),Wd=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),_f=Symbol.for("react.activity"),rg=Symbol.for("react.memo_cache_sentinel"),Po=Symbol.iterator,Tl=Symbol.for("react.client.reference"),Sl=Array.isArray,Zt=Qd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,og=t.rendererVersion,yf=t.rendererPackageName,Hc=t.extraDevToolsConfig,Fc=t.getPublicInstance,ly=t.getRootHostContext,jc=t.getChildHostContext,Zd=t.prepareForCommit,uy=t.resetAfterCommit,lg=t.createInstance;t.cloneMutableInstance;var vf=t.appendInitialChild,Ls=t.finalizeInitialChildren,_s=t.shouldSetTextContent,Vo=t.createTextInstance;t.cloneMutableTextInstance;var ug=t.scheduleTimeout,cy=t.cancelTimeout,Us=t.noTimeout,Zn=t.isPrimaryRenderer;t.warnsIfNotActing;var Ne=t.supportsMutation,oa=t.supportsPersistence,vn=t.supportsHydration,he=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var $e=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var we=t.setCurrentUpdatePriority,Ua=t.getCurrentUpdatePriority,Kc=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var bu=t.shouldAttemptEagerTransition,$d=t.detachDeletedInstance;t.requestPostPaintCallback;var Ef=t.maySuspendCommit,Yc=t.maySuspendCommitOnUpdate,cg=t.maySuspendCommitInSyncRender,Mn=t.preloadInstance,hg=t.startSuspendingCommit,tm=t.suspendInstance;t.suspendOnActiveViewTransition;var hy=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var Au=t.NotPendingTransition,wu=t.HostTransitionContext,fg=t.resetFormInstance;t.bindToConsole;var dg=t.supportsMicrotasks,mg=t.scheduleMicrotask,pi=t.supportsTestSelectors,$n=t.findFiberRoot,em=t.getBoundingRect,Tf=t.getTextContent,bl=t.isHiddenSubtree,pg=t.matchAccessibilityRole,ko=t.setFocusIfFocusable,nm=t.setupIntersectionObserver,gg=t.appendChild,_g=t.appendChildToContainer,fy=t.commitTextUpdate,dy=t.commitMount,my=t.commitUpdate,py=t.insertBefore,gy=t.insertInContainerBefore,_y=t.removeChild,yg=t.removeChildFromContainer,vg=t.resetTextContent,O2=t.hideInstance,yy=t.hideTextInstance,vy=t.unhideInstance,Ey=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Eg=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var Ty=t.cloneInstance,Tg=t.createContainerChildSet,Sg=t.appendChildToContainerChildSet,Sy=t.finalizeContainerChildren,bg=t.replaceContainerChildren,by=t.cloneHiddenInstance,Ag=t.cloneHiddenTextInstance,Al=t.isSuspenseInstancePending,im=t.isSuspenseInstanceFallback,sm=t.getSuspenseInstanceFallbackErrorDetails,am=t.registerSuspenseInstanceRetry,Ay=t.canHydrateFormStateMarker,wg=t.isFormStateMarkerMatching,wy=t.getNextHydratableSibling,Ry=t.getNextHydratableSiblingAfterSingleton,Cy=t.getFirstHydratableChild,Iy=t.getFirstHydratableChildWithinContainer,Ny=t.getFirstHydratableChildWithinActivityInstance,Dy=t.getFirstHydratableChildWithinSuspenseInstance,Rg=t.getFirstHydratableChildWithinSingleton,xy=t.canHydrateInstance,Oy=t.canHydrateTextInstance,Cg=t.canHydrateActivityInstance,My=t.canHydrateSuspenseInstance,Py=t.hydrateInstance,M2=t.hydrateTextInstance,Ig=t.hydrateActivityInstance,Vy=t.hydrateSuspenseInstance,ky=t.getNextHydratableInstanceAfterActivityInstance,Ng=t.getNextHydratableInstanceAfterSuspenseInstance,Ly=t.commitHydratedInstance,Uy=t.commitHydratedContainer,P2=t.commitHydratedActivityInstance,V2=t.commitHydratedSuspenseInstance,zy=t.finalizeHydratedChildren,Sf=t.flushHydrationEvents;t.clearActivityBoundary;var Dg=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var rm=t.clearSuspenseBoundaryFromContainer,By=t.hideDehydratedBoundary,Gy=t.unhideDehydratedBoundary,Qc=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var qy=t.validateHydratableInstance,xg=t.validateHydratableTextInstance,za=t.supportsResources,om=t.isHostHoistableType,bf=t.getHoistableRoot,Og=t.getResource,Mg=t.acquireResource,wl=t.releaseResource,Hy=t.hydrateHoistable,Pg=t.mountHoistable,Vg=t.unmountHoistable,lm=t.createHoistableInstance,Fy=t.prepareToCommitHoistables,kg=t.mayResourceSuspendCommit,Lg=t.preloadResource,jy=t.suspendResource,gi=t.supportsSingletons,um=t.resolveSingletonInstance,ui=t.acquireSingletonInstance,Di=t.releaseSingletonInstance,Ug=t.isHostSingletonType,Ru=t.isSingletonScope,cm=[],Cu=-1,eo={},zs=Math.clz32?Math.clz32:k,hm=Math.log,Ky=Math.LN2,fm=256,Iu=262144,Xc=4194304,Af=ks.unstable_scheduleCallback,dm=ks.unstable_cancelCallback,Yy=ks.unstable_shouldYield,zg=ks.unstable_requestPaint,ns=ks.unstable_now,mm=ks.unstable_ImmediatePriority,Qy=ks.unstable_UserBlockingPriority,wf=ks.unstable_NormalPriority,pm=ks.unstable_IdlePriority,Bg=ks.log,Xy=ks.unstable_setDisableYieldValue,Nu=null,Bs=null,ti=typeof Object.is=="function"?Object.is:Ft,gm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},k2=Object.prototype.hasOwnProperty,_m,no,Rf=!1,Gg=new WeakMap,Lo=[],io=0,tn=null,Cf=0,Ba=[],la=0,Ga=null,Fi=1,gr="",xi=A(null),Uo=A(null),ji=A(null),If=A(null),_i=null,En=null,Re=!1,so=null,ys=!1,ym=Error(s(519)),qa=A(null),cn=null,_r=null,Jy=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},Oi=ks.unstable_scheduleCallback,L2=ks.unstable_NormalPriority,Tn={$$typeof:La,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Nf=null,Xe=null,is=!1,Ha=!1,vm=!1,Rl=0,Jc=null,qg=0,zo=0,yi=null,Fa=Zt.S;Zt.S=function(l,u){Vu=ns(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&hc(l,u),Fa!==null&&Fa(l,u)};var Cl=A(null),vi=Error(s(460)),Em=Error(s(474)),ja=Error(s(542)),ao={then:function(){}},vs=null,Il=null,Du=0,Ki=dc(!0),Hg=dc(!1),Yi=[],ro=0,xu=0,ua=!1,Tm=!1,Ou=A(null),Nl=A(0),Gs=A(null),Es=null,Hn=A(0),Bo=0,fe=null,Jt=null,re=null,ge=!1,me=!1,Oe=!1,ss=0,Ka=0,yr=null,Fg=0,ca={readContext:nn,use:To,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};ca.useEffectEvent=on;var Pn={readContext:nn,use:To,useCallback:function(l,u){return Wn().memoizedState=[l,u===void 0?null:u],l},useContext:nn,useEffect:rl,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,Ur(4194308,4,Ao.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Ur(4194308,4,l,u)},useInsertionEffect:function(l,u){Ur(4,2,l,u)},useMemo:function(l,u){var p=Wn();u=u===void 0?null:u;var y=l();if(Oe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=Wn();if(p!==void 0){var S=p(u);if(Oe){z(!0);try{p(u)}finally{z(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=Cc.bind(null,fe,l),[y.memoizedState,l]},useRef:function(l){var u=Wn();return l={current:l},u.memoizedState=l},useState:function(l){l=Lr(l);var u=l.queue,p=tf.bind(null,fe,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:Br,useDeferredValue:function(l,u){var p=Wn();return ol(p,l,u)},useTransition:function(){var l=Lr(!1);return l=ll.bind(null,fe,l.queue,!0,!1),Wn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=fe,S=Wn();if(Re){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),_e===null)throw Error(s(349));(Ce&127)!==0||Wh(y,u,p)}S.memoizedState=p;var w={value:p,getSnapshot:u};return S.queue=w,rl(Ec.bind(null,y,w,l),[l]),y.flags|=2048,fs(9,{destroy:void 0},vc.bind(null,y,w,p,u),null),p},useId:function(){var l=Wn(),u=_e.identifierPrefix;if(Re){var p=gr,y=Fi;p=(y&~(1<<32-zs(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=ss++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Fg++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:wc,useFormState:bo,useActionState:bo,useOptimistic:function(l){var u=Wn();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Da.bind(null,fe,!0,p),p.dispatch=u,[l,u]},useMemoCache:_c,useCacheRefresh:function(){return Wn().memoizedState=Md.bind(null,fe)},useEffectEvent:function(l){var u=Wn(),p={impl:l};return u.memoizedState=p,function(){if((be&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},oo={readContext:nn,use:To,useCallback:uu,useContext:nn,useEffect:ur,useImperativeHandle:bc,useInsertionEffect:zr,useLayoutEffect:hr,useMemo:fr,useReducer:or,useRef:Sc,useState:function(){return or(ea)},useDebugValue:Br,useDeferredValue:function(l,u){var p=Fe();return Ac(p,Jt.memoizedState,l,u)},useTransition:function(){var l=or(ea)[0],u=Fe().memoizedState;return[typeof l=="boolean"?l:Ri(l),u]},useSyncExternalStore:hs,useId:ul,useHostTransitionStatus:wc,useFormState:Na,useActionState:Na,useOptimistic:function(l,u){var p=Fe();return ru(p,Jt,l,u)},useMemoCache:_c,useCacheRefresh:Rc};oo.useEffectEvent=Ci;var Dl={readContext:nn,use:To,useCallback:uu,useContext:nn,useEffect:ur,useImperativeHandle:bc,useInsertionEffect:zr,useLayoutEffect:hr,useMemo:fr,useReducer:kr,useRef:Sc,useState:function(){return kr(ea)},useDebugValue:Br,useDeferredValue:function(l,u){var p=Fe();return Jt===null?ol(p,l,u):Ac(p,Jt.memoizedState,l,u)},useTransition:function(){var l=kr(ea)[0],u=Fe().memoizedState;return[typeof l=="boolean"?l:Ri(l),u]},useSyncExternalStore:hs,useId:ul,useHostTransitionStatus:wc,useFormState:Qe,useActionState:Qe,useOptimistic:function(l,u){var p=Fe();return Jt!==null?ru(p,Jt,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:_c,useCacheRefresh:Rc};Dl.useEffectEvent=Ci;var Df={enqueueSetState:function(l,u,p){l=l._reactInternals;var y=yn(),S=$s(y);S.payload=u,p!=null&&(S.callback=p),u=Or(l,S,y),u!==null&&(On(u,l,y),el(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=yn(),S=$s(y);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=Or(l,S,y),u!==null&&(On(u,l,y),el(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=yn(),y=$s(p);y.tag=2,u!=null&&(y.callback=u),u=Or(l,y,p),u!==null&&(On(u,l,p),el(u,l,p))}},Ts=Error(s(461)),mn=!1,Mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Fn=!1,jn=!1,Wc=!1,jg=typeof WeakSet=="function"?WeakSet:Set,ei=null,Vn=null,ni=!1,Je=null,ha=8192,Zc={getCacheForType:function(l){var u=nn(Tn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return nn(Tn).controller.signal}},Ya=0,$c=1,th=2,xf=3,xl=4;if(typeof Symbol=="function"&&Symbol.for){var Pu=Symbol.for;Ya=Pu("selector.component"),$c=Pu("selector.has_pseudo_class"),th=Pu("selector.role"),xf=Pu("selector.test_id"),xl=Pu("selector.text")}var fa=typeof WeakMap=="function"?WeakMap:Map,be=0,_e=null,Ae=null,Ce=0,We=0,ci=null,vr=!1,Ol=!1,Ml=!1,lo=0,kn=0,Go=0,Pl=0,eh=0,Ss=0,nh=0,Of=null,qs=null,Sm=!1,Mf=0,Vu=0,Vl=1/0,Pf=null,qo=null,hi=0,Ho=null,ku=null,uo=0,ih=0,bm=null,Kg=null,Be=0,Vf=null;return pe.attemptContinuousHydration=function(l){if(l.tag===13||l.tag===31){var u=Gi(l,67108864);u!==null&&On(u,l,67108864),pf(l,67108864)}},pe.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13||l.tag===31){var u=yn();u=G(u);var p=Gi(l,u);p!==null&&On(p,l,u),pf(l,u)}},pe.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=U(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var p=1<<31-zs(u);l.entanglements[1]|=p,u&=~p}Te(l),(be&6)===0&&(Vl=ns()+500,Se(0))}}break;case 31:case 13:u=Gi(l,2),u!==null&&On(u,l,2),Gd(),pf(l,2)}},pe.batchedUpdates=function(l,u){return l(u)},pe.createComponentSelector=function(l){return{$$typeof:Ya,value:l}},pe.createContainer=function(l,u,p,y,S,w,x,Q,dt,St){return El(l,u,!1,null,p,y,w,null,x,Q,dt,St)},pe.createHasPseudoClassSelector=function(l){return{$$typeof:$c,value:l}},pe.createHydrationContainer=function(l,u,p,y,S,w,x,Q,dt,St,Mt,wt,Gt,ce){return l=El(p,y,!0,l,S,w,Q,ce,dt,St,Mt,wt),l.context=Yd(null),p=l.current,y=yn(),y=G(y),S=$s(y),S.callback=u??null,Or(p,S,y),u=y,l.current.lanes=u,ot(l,u),Te(l),l},pe.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vu,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},pe.createRoleSelector=function(l){return{$$typeof:th,value:l}},pe.createTestNameSelector=function(l){return{$$typeof:xf,value:l}},pe.createTextSelector=function(l){return{$$typeof:xl,value:l}},pe.defaultOnCaughtError=function(l){console.error(l)},pe.defaultOnRecoverableError=function(l){gm(l)},pe.defaultOnUncaughtError=function(l){gm(l)},pe.deferredUpdates=function(l){var u=Zt.T,p=Ua();try{return we(32),Zt.T=null,l()}finally{we(p),Zt.T=u}},pe.discreteUpdates=function(l,u,p,y,S){var w=Zt.T,x=Ua();try{return we(2),Zt.T=null,l(u,p,y,S)}finally{we(x),Zt.T=w,be===0&&(Vl=ns()+500)}},pe.findAllNodes=Vs,pe.findBoundingRects=function(l,u){if(!pi)throw Error(s(363));u=Vs(l,u),l=[];for(var p=0;p<u.length;p++)l.push(em(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,S=y+p.width,w=p.y,x=w+p.height,Q=u-1;0<=Q;Q--)if(u!==Q){var dt=l[Q],St=dt.x,Mt=St+dt.width,wt=dt.y,Gt=wt+dt.height;if(y>=St&&w>=wt&&S<=Mt&&x<=Gt){l.splice(u,1);break}else if(y!==St||p.width!==dt.width||Gt<w||wt>x){if(!(w!==wt||p.height!==dt.height||Mt<y||St>S)){St>y&&(dt.width+=St-y,dt.x=y),Mt<S&&(dt.width=S-St),l.splice(u,1);break}}else{wt>w&&(dt.height+=wt-w,dt.y=w),Gt<x&&(dt.height=x-wt),l.splice(u,1);break}}}return l},pe.findHostInstance=mf,pe.findHostInstanceWithNoPortals=function(l){return l=f(l),l=l!==null?g(l):null,l===null?null:Fc(l.stateNode)},pe.findHostInstanceWithWarning=function(l){return mf(l)},pe.flushPassiveEffects=$r,pe.flushSyncFromReconciler=function(l){var u=be;be|=1;var p=Zt.T,y=Ua();try{if(we(2),Zt.T=null,l)return l()}finally{we(y),Zt.T=p,be=u,(be&6)===0&&Se(0)}},pe.flushSyncWork=Gd,pe.focusWithin=function(l,u){if(!pi)throw Error(s(363));for(l=pl(l),u=Lc(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++],y=p.tag;if(!bl(p)){if((y===5||y===26||y===27)&&ko(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},pe.getFindAllNodesFailureDescription=function(l,u){if(!pi)throw Error(s(363));var p=0,y=[];l=[pl(l),0];for(var S=0;S<l.length;){var w=l[S++],x=w.tag,Q=l[S++],dt=u[Q];if((x!==5&&x!==26&&x!==27||!bl(w))&&(gl(w,dt)&&(y.push(kc(dt)),Q++,Q>p&&(p=Q)),Q<u.length))for(w=w.child;w!==null;)l.push(w,Q),w=w.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(kc(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},pe.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return Fc(l.child.stateNode);default:return l.child.stateNode}},pe.injectIntoDevTools=function(){var l={bundleType:0,version:og,rendererPackageName:yf,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(Hc!==null&&(l.rendererConfig=Hc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Nu=u.inject(l),Bs=u}catch{}l=!!u.checkDCE}}return l},pe.isAlreadyRendering=function(){return(be&6)!==0},pe.observeVisibleRects=function(l,u,p,y){if(!pi)throw Error(s(363));l=Vs(l,u);var S=nm(l,p,y).disconnect;return{disconnect:function(){S()}}},pe.shouldError=function(){return null},pe.shouldSuspend=function(){return!1},pe.startHostTransition=function(l,u,p,y){if(l.tag!==5)throw Error(s(476));var S=$h(l).queue;ll(l,S,u,Au,p===null?i:function(){var w=$h(l);return w.next===null&&(w=l.alternate.memoizedState),cl(l,w.next.queue,{},yn()),p(y)})},pe.updateContainer=function(l,u,p,y){var S=u.current,w=yn();return ag(S,w,l,u,p,y),w},pe.updateContainerSync=function(l,u,p,y){return ag(u.current,2,l,u,p,y),2},pe},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(TE)),TE.exports}var UA;function JD(){return UA||(UA=1,EE.exports=XD()),EE.exports}var WD=JD();const ZD=P6(WD);var SE={exports:{}},Uu={};var zA;function $D(){return zA||(zA=1,Uu.ConcurrentRoot=1,Uu.ContinuousEventPriority=8,Uu.DefaultEventPriority=32,Uu.DiscreteEventPriority=2,Uu.IdleEventPriority=268435456,Uu.LegacyRoot=0,Uu.NoEventPriority=0),Uu}var BA;function tx(){return BA||(BA=1,SE.exports=$D()),SE.exports}var Vv=tx();const GA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let qA=!1,HA=!1;const Z1=".react-konva-event",ex=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,nx=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,ix={};function kv(n,t,e=ix){if(!qA&&"zIndex"in t&&(console.warn(nx),qA=!0),!HA&&t.draggable){var i=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;i&&!s&&(console.warn(ex),HA=!0)}for(var o in e)if(!GA[o]){var c=o.slice(0,2)==="on",f=e[o]!==t[o];if(c&&f){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),n.off(m,e[o])}var g=!t.hasOwnProperty(o);g&&n.setAttr(o,void 0)}var E=t._useStrictMode,b={},A=!1;const N={};for(var o in t)if(!GA[o]){var c=o.slice(0,2)==="on",D=e[o]!==t[o];if(c&&D){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[o]&&(N[m]=t[o])}!c&&(t[o]!==e[o]||E&&t[o]!==n.getAttr(o))&&(A=!0,b[o]=t[o])}A&&(n.setAttrs(b),Gh(n));for(var m in N)n.off(m+Z1),n.on(m+Z1,N[m])}function Gh(n){if(!Vt.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var bE=sS();const dw={},sx={};np.Node.prototype._applyProps=kv;let mw=Vv.DefaultEventPriority;function ax(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),Gh(n)}function rx(n,t,e){let i=np[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=np.Group);const s={},o={};for(var c in t)if(c!=="ref"){var f=c.slice(0,2)==="on";f?o[c]=t[c]:s[c]=t[c]}const m=new i(s);return kv(m,o),m}function ox(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function lx(n,t,e){return!1}function ux(n){return n}function cx(){return null}function hx(){return null}function fx(n,t,e,i){return sx}function dx(){}function mx(n){}function px(n,t){return!1}function gx(){return dw}function _x(){return dw}const yx=setTimeout,vx=clearTimeout,Ex=!0,Tx=n=>{n()},Sx=-1;function bx(n,t){return!1}const Ax=!1,wx=!1,Rx=!0,Cx=!1,Ix=!1;function Nx(n,t){t.parent===n?t.moveToTop():n.add(t),Gh(n)}function Dx(n,t){t.parent===n?t.moveToTop():n.add(t),Gh(n)}function pw(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),Gh(n)}function xx(n,t,e){pw(n,t,e)}function Ox(n,t){t.destroy(),t.off(Z1),Gh(n)}function Mx(n,t){t.destroy(),t.off(Z1),Gh(n)}function Px(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function Vx(n,t,e){}function kx(n,t,e,i){kv(n,i,e)}function Lx(n){n.hide(),Gh(n)}function Ux(n){}function zx(n,t){(t.visible==null||t.visible)&&n.show()}function Bx(n,t){}function Gx(n){}function qx(){}function Hx(){return null}function Fx(){}function jx(){}function Kx(){return Vv.DefaultEventPriority}function Yx(){}function Qx(){return null}function Xx(n){mw=n}function Jx(){return mw}function Wx(){return Vv.DiscreteEventPriority}function Zx(){return!1}function $x(){}function tO(){return null}function eO(){return-1.1}function nO(){}function iO(){return!1}function sO(){return!0}function aO(){}function rO(){}function oO(){return null}const lO=null,uO=Qi.createContext(null);function cO(){}const hO=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:uO,NotPendingTransition:lO,afterActiveInstanceBlur:jx,appendChild:Nx,appendChildToContainer:Dx,appendInitialChild:ax,beforeActiveInstanceBlur:Fx,cancelTimeout:vx,clearContainer:Gx,commitMount:Vx,commitTextUpdate:Px,commitUpdate:kx,createInstance:rx,createTextInstance:ox,detachDeletedInstance:qx,finalizeInitialChildren:lx,getChildHostContext:_x,getCurrentEventPriority:Kx,getCurrentUpdatePriority:Jx,getInstanceFromNode:Hx,getInstanceFromScope:Qx,getPublicInstance:ux,getRootHostContext:gx,hideInstance:Lx,hideTextInstance:Ux,idlePriority:bE.unstable_IdlePriority,insertBefore:pw,insertInContainerBefore:xx,isPrimaryRenderer:Ax,maySuspendCommit:iO,noTimeout:Sx,now:bE.unstable_now,preloadInstance:sO,prepareForCommit:cx,preparePortalMount:hx,prepareScopeUpdate:Yx,prepareUpdate:fx,removeChild:Ox,removeChildFromContainer:Mx,requestPostPaintCallback:nO,resetAfterCommit:dx,resetFormInstance:cO,resetTextContent:mx,resolveEventTimeStamp:eO,resolveEventType:tO,resolveUpdatePriority:Wx,run:bE.unstable_runWithPriority,scheduleMicrotask:Tx,scheduleTimeout:yx,setCurrentUpdatePriority:Xx,shouldAttemptEagerTransition:Zx,shouldDeprioritizeSubtree:px,shouldSetTextContent:bx,startSuspendingCommit:aO,supportsHydration:Ix,supportsMicrotasks:Ex,supportsMutation:Rx,supportsPersistence:Cx,suspendInstance:rO,trackSchedulerEvent:$x,unhideInstance:zx,unhideTextInstance:Bx,waitForCommitToBeReady:oO,warnsIfNotActing:wx},Symbol.toStringTag,{value:"Module"}));function gw(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=gw(i,t,e);if(s)return s;i=i.sibling}}function _w(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const hS=_w(oe.createContext(null));class yw extends oe.Component{render(){return oe.createElement(hS.Provider,{value:this._reactInternals},this.props.children)}}function fO(){const n=oe.useContext(hS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=oe.useId();return oe.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=gw(e,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[n,t])}const dO=Symbol.for("react.context"),mO=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===dO;function pO(){const n=fO(),[t]=oe.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;mO(i)&&i!==hS&&!t.has(i)&&t.set(i,oe.use(_w(i))),e=e.return}return t}function gO(){const n=pO();return oe.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>oe.createElement(t,null,oe.createElement(e.Provider,{...i,value:n.get(e)})),t=>oe.createElement(yw,{...t})),[n])}if(Qi.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function _O(n){const t=Qi.useRef({});return Qi.useLayoutEffect(()=>{t.current=n}),Qi.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const yO=()=>{const n=Qi.useRef(0);return Qi.useMemo(()=>{n.current++},[]),n.current>1},vO=n=>{const t=Qi.useRef(null),e=Qi.useRef(null),i=Qi.useRef(null),s=_O(n),o=gO(),c=Qi.useRef(null),f=E=>{const{forwardedRef:b}=n;b&&(typeof b=="function"?b(E):b.current=E)},m=yO(),g=()=>{f(null),u0.updateContainer(null,i.current,null),e.current?.destroy(),e.current=null};return Qi.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),e.current?f(e.current):(e.current=new np.Stage({width:n.width,height:n.height,container:t.current}),f(e.current),i.current=u0.createContainer(e.current,Vv.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),u0.updateContainer(Qi.createElement(o,{},n.children),i.current,null,()=>{})),()=>{m?c.current=setTimeout(g,0):g()}),[]),Qi.useLayoutEffect(()=>{f(e.current),kv(e.current,n,s),u0.flushSyncFromReconciler(()=>{u0.updateContainer(Qi.createElement(o,{},n.children),i.current,null)})}),Qi.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},EO="Layer",TO="Group",SO="Rect",AE="Circle",bO="Line",mT="Image",FA="Text",u0=ZD(hO),AO=Qi.forwardRef((n,t)=>Qi.createElement(yw,{},Qi.createElement(vO,{...n,forwardedRef:t})));const vw=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const wO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const RO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const jA=n=>{const t=RO(n);return t.charAt(0).toUpperCase()+t.slice(1)};var CO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IO=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const NO=oe.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...f},m)=>oe.createElement("svg",{ref:m,...CO,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:vw("lucide",s),...!o&&!IO(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,E])=>oe.createElement(g,E)),...Array.isArray(o)?o:[o]]));const tu=(n,t)=>{const e=oe.forwardRef(({className:i,...s},o)=>oe.createElement(NO,{ref:o,iconNode:t,className:vw(`lucide-${wO(jA(n))}`,`lucide-${n}`,i),...s}));return e.displayName=jA(n),e};const DO=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],xO=tu("eraser",DO);const OO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],KA=tu("folder-open",OO);const MO=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],PO=tu("mouse-pointer-2",MO);const VO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kO=tu("pencil",VO);const LO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],UO=tu("plus",LO);const zO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YA=tu("save",zO);const BO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wE=tu("trash-2",BO);const GO=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],qO=tu("undo",GO);const HO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],QA=tu("user-plus",HO);const FO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],XA=tu("x",FO),jO=()=>{};var JA={};const Ew=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},KO=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[e++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[e++],c=n[e++],f=n[e++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return t.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,E=o>>2,b=(o&3)<<4|f>>4;let A=(f&15)<<2|g>>6,N=g&63;m||(N=64,c||(A=64)),i.push(e[E],e[b],e[A],e[N])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Ew(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):KO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=e[n.charAt(s++)],f=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const b=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||f==null||g==null||b==null)throw new YO;const A=o<<2|f>>4;if(i.push(A),g!==64){const N=f<<4&240|g>>2;if(i.push(N),b!==64){const D=g<<6&192|b;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QO=function(n){const t=Ew(n);return Tw.encodeByteArray(t,!0)},$1=function(n){return QO(n).replace(/\./g,"")},fS=function(n){try{return Tw.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tv(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!XO(e)||(n[e]=tv(n[e],t[e]));return n}function XO(n){return n!=="__proto__"}function dS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const JO=()=>dS().__FIREBASE_DEFAULTS__,WO=()=>{if(typeof process>"u"||typeof JA>"u")return;const n=JA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&fS(n[1]);return t&&JSON.parse(t)},mS=()=>{try{return jO()||JO()||WO()||ZO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pS=()=>mS()?.config,$O=n=>mS()?.[`_${n}`];class tM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function eu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lv(n){return(await fetch(n,{credentials:"include"})).ok}function Sw(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$1(JSON.stringify(e)),$1(JSON.stringify(c)),""].join(".")}const L0={};function eM(){const n={prod:[],emulator:[]};for(const t of Object.keys(L0))L0[t]?n.emulator.push(t):n.prod.push(t);return n}function nM(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let WA=!1;function Uv(n,t){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||L0[n]===t||L0[n]||WA)return;L0[n]=t;function e(A){return`__firebase__banner__${A}`}const i="__firebase__banner",o=eM().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,N){A.setAttribute("width","24"),A.setAttribute("id",N),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{WA=!0,c()},A}function E(A,N){A.setAttribute("id",N),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=nM(i),N=e("text"),D=document.getElementById(N)||document.createElement("span"),k=e("learnmore"),U=document.getElementById(k)||document.createElement("a"),j=e("preprendIcon"),K=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;f(X),E(U,k);const Z=g();m(K,j),X.append(K,D,U,Z),document.body.appendChild(X)}o?(D.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function ii(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ii())}function zv(){const n=mS()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sM(){return typeof window<"u"||bw()}function bw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function aM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Aw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ww(){const n=ii();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Rw(){return!zv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cw(){return!zv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function nd(){try{return typeof indexedDB=="object"}catch{return!1}}function rM(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}function oM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const lM="FirebaseError";class Ui extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=lM,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],c=o?uM(o,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Ui(s,f,i)}}function uM(n,t){return n.replace(cM,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const cM=/\{\$([^}]+)}/g;function ZA(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function hM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ch(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const o=n[s],c=t[s];if($A(o)&&$A(c)){if(!Ch(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function $A(n){return n!==null&&typeof n=="object"}function Ip(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function jm(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function R0(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function Iw(n,t){const e=new fM(n,t);return e.subscribe.bind(e)}class fM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");dM(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=RE),s.error===void 0&&(s.error=RE),s.complete===void 0&&(s.complete=RE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dM(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function RE(){}function Ht(n){return n&&n._delegate?n._delegate:n}class zi{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Uf="[DEFAULT]";class mM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new tM;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gM(t))try{this.getOrInitializeService({instanceIdentifier:Uf})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=Uf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Uf){return this.instances.has(t)}getOptions(t=Uf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);i===f&&c.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Uf){return this.component?this.component.multipleInstances?t:Uf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pM(n){return n===Uf?void 0:n}function gM(n){return n.instantiationMode==="EAGER"}class Nw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new mM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const _S=[];var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const Dw={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},_M=Pe.INFO,yM={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},vM=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=yM[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bv{constructor(t){this.name=t,this._logLevel=_M,this._logHandler=vM,this._userLogHandler=null,_S.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Dw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}function EM(n){_S.forEach(t=>{t.setLogLevel(n)})}function TM(n,t){for(const e of _S){let i=null;t&&t.level&&(i=Dw[t.level]),n===null?e.userLogHandler=null:e.userLogHandler=(s,o,...c)=>{const f=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");o>=(i??s.logLevel)&&n({level:Pe[o].toLowerCase(),message:f,args:c,type:s.name})}}}const SM=(n,t)=>t.some(e=>n instanceof e);let t3,e3;function bM(){return t3||(t3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AM(){return e3||(e3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xw=new WeakMap,pT=new WeakMap,Ow=new WeakMap,CE=new WeakMap,yS=new WeakMap;function wM(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Ku(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&xw.set(e,n)}).catch(()=>{}),yS.set(t,n),t}function RM(n){if(pT.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});pT.set(n,t)}let gT={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return pT.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ow.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ku(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function CM(n){gT=n(gT)}function IM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(IE(this),t,...e);return Ow.set(i,t.sort?t.sort():[t]),Ku(i)}:AM().includes(n)?function(...t){return n.apply(IE(this),t),Ku(xw.get(this))}:function(...t){return Ku(n.apply(IE(this),t))}}function NM(n){return typeof n=="function"?IM(n):(n instanceof IDBTransaction&&RM(n),SM(n,bM())?new Proxy(n,gT):n)}function Ku(n){if(n instanceof IDBRequest)return wM(n);if(CE.has(n))return CE.get(n);const t=NM(n);return t!==n&&(CE.set(n,t),yS.set(t,n)),t}const IE=n=>yS.get(n);function Np(n,t,{blocked:e,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(n,t),f=Ku(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Ku(c.result),m.oldVersion,m.newVersion,Ku(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}function Km(n,{blocked:t}={}){const e=indexedDB.deleteDatabase(n);return t&&e.addEventListener("blocked",i=>t(i.oldVersion,i)),Ku(e).then(()=>{})}const DM=["get","getKey","getAll","getAllKeys","count"],xM=["put","add","delete","clear"],NE=new Map;function n3(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(NE.get(t))return NE.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=xM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||DM.includes(e)))return;const o=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),s&&m.done]))[0]};return NE.set(t,o),o}CM(n=>({...n,get:(t,e,i)=>n3(t,e)||n.get(t,e,i),has:(t,e)=>!!n3(t,e)||n.has(t,e)}));class OM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(MM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function MM(n){return n.getComponent()?.type==="VERSION"}const ev="@firebase/app",_T="0.14.8";const Xu=new Bv("@firebase/app"),PM="@firebase/app-compat",VM="@firebase/analytics-compat",kM="@firebase/analytics",LM="@firebase/app-check-compat",UM="@firebase/app-check",zM="@firebase/auth",BM="@firebase/auth-compat",GM="@firebase/database",qM="@firebase/data-connect",HM="@firebase/database-compat",FM="@firebase/functions",jM="@firebase/functions-compat",KM="@firebase/installations",YM="@firebase/installations-compat",QM="@firebase/messaging",XM="@firebase/messaging-compat",JM="@firebase/performance",WM="@firebase/performance-compat",ZM="@firebase/remote-config",$M="@firebase/remote-config-compat",tP="@firebase/storage",eP="@firebase/storage-compat",nP="@firebase/firestore",iP="@firebase/ai",sP="@firebase/firestore-compat",aP="firebase",rP="12.9.0";const Ih="[DEFAULT]",oP={[ev]:"fire-core",[PM]:"fire-core-compat",[kM]:"fire-analytics",[VM]:"fire-analytics-compat",[UM]:"fire-app-check",[LM]:"fire-app-check-compat",[zM]:"fire-auth",[BM]:"fire-auth-compat",[GM]:"fire-rtdb",[qM]:"fire-data-connect",[HM]:"fire-rtdb-compat",[FM]:"fire-fn",[jM]:"fire-fn-compat",[KM]:"fire-iid",[YM]:"fire-iid-compat",[QM]:"fire-fcm",[XM]:"fire-fcm-compat",[JM]:"fire-perf",[WM]:"fire-perf-compat",[ZM]:"fire-rc",[$M]:"fire-rc-compat",[tP]:"fire-gcs",[eP]:"fire-gcs-compat",[nP]:"fire-fst",[sP]:"fire-fst-compat",[iP]:"fire-vertex","fire-js":"fire-js",[aP]:"fire-js-all"};const Nh=new Map,ip=new Map,sp=new Map;function t_(n,t){try{n.container.addComponent(t)}catch(e){Xu.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Mw(n,t){n.container.addOrOverwriteComponent(t)}function va(n){const t=n.name;if(sp.has(t))return Xu.debug(`There were multiple attempts to register component ${t}.`),!1;sp.set(t,n);for(const e of Nh.values())t_(e,n);for(const e of ip.values())t_(e,n);return!0}function Gv(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function lP(n,t,e=Ih){Gv(n,t).clearInstance(e)}function vS(n){return n.options!==void 0}function Pw(n){return vS(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function An(n){return n==null?!1:n.settings!==void 0}function uP(){sp.clear()}const cP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new nu("app","Firebase",cP);let Vw=class{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}};function i3(n,t){const e=fS(n.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(e).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class hP extends Vw{constructor(t,e,i,s){const o=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,c={name:i,automaticDataCollectionEnabled:o};if(t.apiKey!==void 0)super(t,c,s);else{const f=t;super(f.options,c,s)}this._serverConfig={automaticDataCollectionEnabled:o,...e},this._serverConfig.authIdToken&&i3(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&i3(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Xi(ev,_T,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){TS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw wr.create("server-app-deleted")}}const nc=rP;function ES(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Ih,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw wr.create("bad-app-name",{appName:String(s)});if(e||(e=pS()),!e)throw wr.create("no-options");const o=Nh.get(s);if(o){if(Ch(e,o.options)&&Ch(i,o.config))return o;throw wr.create("duplicate-app",{appName:s})}const c=new Nw(s);for(const m of sp.values())c.addComponent(m);const f=new Vw(e,i,c);return Nh.set(s,f),f}function fP(n,t={}){if(sM()&&!bw())throw wr.create("invalid-server-app-environment");let e,i=t||{};if(n&&(vS(n)?e=n.options:Pw(n)?i=n:e=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),e||(e=pS()),!e)throw wr.create("no-options");const s={...i,...e};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const o=E=>[...E].reduce((b,A)=>Math.imul(31,b)+A.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw wr.create("finalization-registry-not-supported",{});const c=""+o(JSON.stringify(s)),f=ip.get(c);if(f)return f.incRefCount(i.releaseOnDeref),f;const m=new Nw(c);for(const E of sp.values())m.addComponent(E);const g=new hP(e,i,c,m);return ip.set(c,g),g}function dP(n=Ih){const t=Nh.get(n);if(!t&&n===Ih&&pS())return ES();if(!t)throw wr.create("no-app",{appName:n});return t}function mP(){return Array.from(Nh.values())}async function TS(n){let t=!1;const e=n.name;Nh.has(e)?(t=!0,Nh.delete(e)):ip.has(e)&&n.decRefCount()<=0&&(ip.delete(e),t=!0),t&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Xi(n,t,e){let i=oP[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${t}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xu.warn(c.join(" "));return}va(new zi(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function kw(n,t){if(n!==null&&typeof n!="function")throw wr.create("invalid-log-argument");TM(n,t)}function Lw(n){EM(n)}const pP="firebase-heartbeat-database",gP=1,e_="firebase-heartbeat-store";let DE=null;function Uw(){return DE||(DE=Np(pP,gP,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(e_)}catch(e){console.warn(e)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),DE}async function _P(n){try{const e=(await Uw()).transaction(e_),i=await e.objectStore(e_).get(zw(n));return await e.done,i}catch(t){if(t instanceof Ui)Xu.warn(t.message);else{const e=wr.create("idb-get",{originalErrorMessage:t?.message});Xu.warn(e.message)}}}async function s3(n,t){try{const i=(await Uw()).transaction(e_,"readwrite");await i.objectStore(e_).put(t,zw(n)),await i.done}catch(e){if(e instanceof Ui)Xu.warn(e.message);else{const i=wr.create("idb-set",{originalErrorMessage:e?.message});Xu.warn(i.message)}}}function zw(n){return`${n.name}!${n.options.appId}`}const yP=1024,vP=30;class EP{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new SP(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=a3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>vP){const s=bP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xu.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=a3(),{heartbeatsToSend:e,unsentEntries:i}=TP(this._heartbeatsCache.heartbeats),s=$1(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xu.warn(t),""}}}function a3(){return new Date().toISOString().substring(0,10)}function TP(n,t=yP){const e=[];let i=n.slice();for(const s of n){const o=e.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),r3(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),r3(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class SP{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nd()?rM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await _P(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return s3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function r3(n){return $1(JSON.stringify({version:2,heartbeats:n})).length}function bP(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function AP(n){va(new zi("platform-logger",t=>new OM(t),"PRIVATE")),va(new zi("heartbeat",t=>new EP(t),"PRIVATE")),Xi(ev,_T,n),Xi(ev,_T,"esm2020"),Xi("fire-js","")}AP("");const wP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ui,SDK_VERSION:nc,_DEFAULT_ENTRY_NAME:Ih,_addComponent:t_,_addOrOverwriteComponent:Mw,_apps:Nh,_clearComponents:uP,_components:sp,_getProvider:Gv,_isFirebaseApp:vS,_isFirebaseServerApp:An,_isFirebaseServerAppSettings:Pw,_registerComponent:va,_removeServiceInstance:lP,_serverApps:ip,deleteApp:TS,getApp:dP,getApps:mP,initializeApp:ES,initializeServerApp:fP,onLog:kw,registerVersion:Xi,setLogLevel:Lw},Symbol.toStringTag,{value:"Module"}));var o3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bh,Bw;(function(){var n;function t(V,M){function L(){}L.prototype=M.prototype,V.F=M.prototype,V.prototype=new L,V.prototype.constructor=V,V.D=function(q,G,F){for(var z=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)z[Ft-2]=arguments[Ft];return M.prototype[G].apply(q,z)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(V,M,L){L||(L=0);const q=Array(16);if(typeof M=="string")for(var G=0;G<16;++G)q[G]=M.charCodeAt(L++)|M.charCodeAt(L++)<<8|M.charCodeAt(L++)<<16|M.charCodeAt(L++)<<24;else for(G=0;G<16;++G)q[G]=M[L++]|M[L++]<<8|M[L++]<<16|M[L++]<<24;M=V.g[0],L=V.g[1],G=V.g[2];let F=V.g[3],z;z=M+(F^L&(G^F))+q[0]+3614090360&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+q[1]+3905402710&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+q[2]+606105819&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+q[3]+3250441966&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(F^L&(G^F))+q[4]+4118548399&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+q[5]+1200080426&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+q[6]+2821735955&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+q[7]+4249261313&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(F^L&(G^F))+q[8]+1770035416&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+q[9]+2336552879&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+q[10]+4294925233&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+q[11]+2304563134&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(F^L&(G^F))+q[12]+1804603682&4294967295,M=L+(z<<7&4294967295|z>>>25),z=F+(G^M&(L^G))+q[13]+4254626195&4294967295,F=M+(z<<12&4294967295|z>>>20),z=G+(L^F&(M^L))+q[14]+2792965006&4294967295,G=F+(z<<17&4294967295|z>>>15),z=L+(M^G&(F^M))+q[15]+1236535329&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(G^F&(L^G))+q[1]+4129170786&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+q[6]+3225465664&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+q[11]+643717713&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+q[0]+3921069994&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^F&(L^G))+q[5]+3593408605&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+q[10]+38016083&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+q[15]+3634488961&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+q[4]+3889429448&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^F&(L^G))+q[9]+568446438&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+q[14]+3275163606&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+q[3]+4107603335&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+q[8]+1163531501&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^F&(L^G))+q[13]+2850285829&4294967295,M=L+(z<<5&4294967295|z>>>27),z=F+(L^G&(M^L))+q[2]+4243563512&4294967295,F=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(F^M))+q[7]+1735328473&4294967295,G=F+(z<<14&4294967295|z>>>18),z=L+(F^M&(G^F))+q[12]+2368359562&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(L^G^F)+q[5]+4294588738&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+q[8]+2272392833&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+q[11]+1839030562&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+q[14]+4259657740&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^F)+q[1]+2763975236&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+q[4]+1272893353&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+q[7]+4139469664&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+q[10]+3200236656&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^F)+q[13]+681279174&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+q[0]+3936430074&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+q[3]+3572445317&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+q[6]+76029189&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^F)+q[9]+3654602809&4294967295,M=L+(z<<4&4294967295|z>>>28),z=F+(M^L^G)+q[12]+3873151461&4294967295,F=M+(z<<11&4294967295|z>>>21),z=G+(F^M^L)+q[15]+530742520&4294967295,G=F+(z<<16&4294967295|z>>>16),z=L+(G^F^M)+q[2]+3299628645&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(G^(L|~F))+q[0]+4096336452&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+q[7]+1126891415&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+q[14]+2878612391&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+q[5]+4237533241&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~F))+q[12]+1700485571&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+q[3]+2399980690&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+q[10]+4293915773&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+q[1]+2240044497&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~F))+q[8]+1873313359&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+q[15]+4264355552&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+q[6]+2734768916&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+q[13]+1309151649&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~F))+q[4]+4149444226&4294967295,M=L+(z<<6&4294967295|z>>>26),z=F+(L^(M|~G))+q[11]+3174756917&4294967295,F=M+(z<<10&4294967295|z>>>22),z=G+(M^(F|~L))+q[2]+718787259&4294967295,G=F+(z<<15&4294967295|z>>>17),z=L+(F^(G|~M))+q[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(G+(z<<21&4294967295|z>>>11))&4294967295,V.g[2]=V.g[2]+G&4294967295,V.g[3]=V.g[3]+F&4294967295}i.prototype.v=function(V,M){M===void 0&&(M=V.length);const L=M-this.blockSize,q=this.C;let G=this.h,F=0;for(;F<M;){if(G==0)for(;F<=L;)s(this,V,F),F+=this.blockSize;if(typeof V=="string"){for(;F<M;)if(q[G++]=V.charCodeAt(F++),G==this.blockSize){s(this,q),G=0;break}}else for(;F<M;)if(q[G++]=V[F++],G==this.blockSize){s(this,q),G=0;break}}this.h=G,this.o+=M},i.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;M=this.o*8;for(var L=V.length-8;L<V.length;++L)V[L]=M&255,M/=256;for(this.v(V),V=Array(16),M=0,L=0;L<4;++L)for(let q=0;q<32;q+=8)V[M++]=this.g[L]>>>q&255;return V};function o(V,M){var L=f;return Object.prototype.hasOwnProperty.call(L,V)?L[V]:L[V]=M(V)}function c(V,M){this.h=M;const L=[];let q=!0;for(let G=V.length-1;G>=0;G--){const F=V[G]|0;q&&F==M||(L[G]=F,q=!1)}this.g=L}var f={};function m(V){return-128<=V&&V<128?o(V,function(M){return new c([M|0],M<0?-1:0)}):new c([V|0],V<0?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return b;if(V<0)return U(g(-V));const M=[];let L=1;for(let q=0;V>=L;q++)M[q]=V/L|0,L*=4294967296;return new c(M,0)}function E(V,M){if(V.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V.charAt(0)=="-")return U(E(V.substring(1),M));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=g(Math.pow(M,8));let q=b;for(let F=0;F<V.length;F+=8){var G=Math.min(8,V.length-F);const z=parseInt(V.substring(F,F+G),M);G<8?(G=g(Math.pow(M,G)),q=q.j(G).add(g(z))):(q=q.j(L),q=q.add(g(z)))}return q}var b=m(0),A=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(k(this))return-U(this).m();let V=0,M=1;for(let L=0;L<this.g.length;L++){const q=this.i(L);V+=(q>=0?q:4294967296+q)*M,M*=4294967296}return V},n.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(D(this))return"0";if(k(this))return"-"+U(this).toString(V);const M=g(Math.pow(V,6));var L=this;let q="";for(;;){const G=Z(L,M).g;L=j(L,G.j(M));let F=((L.g.length>0?L.g[0]:L.h)>>>0).toString(V);if(L=G,D(L))return F+q;for(;F.length<6;)F="0"+F;q=F+q}},n.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function D(V){if(V.h!=0)return!1;for(let M=0;M<V.g.length;M++)if(V.g[M]!=0)return!1;return!0}function k(V){return V.h==-1}n.l=function(V){return V=j(this,V),k(V)?-1:D(V)?0:1};function U(V){const M=V.g.length,L=[];for(let q=0;q<M;q++)L[q]=~V.g[q];return new c(L,~V.h).add(A)}n.abs=function(){return k(this)?U(this):this},n.add=function(V){const M=Math.max(this.g.length,V.g.length),L=[];let q=0;for(let G=0;G<=M;G++){let F=q+(this.i(G)&65535)+(V.i(G)&65535),z=(F>>>16)+(this.i(G)>>>16)+(V.i(G)>>>16);q=z>>>16,F&=65535,z&=65535,L[G]=z<<16|F}return new c(L,L[L.length-1]&-2147483648?-1:0)};function j(V,M){return V.add(U(M))}n.j=function(V){if(D(this)||D(V))return b;if(k(this))return k(V)?U(this).j(U(V)):U(U(this).j(V));if(k(V))return U(this.j(U(V)));if(this.l(N)<0&&V.l(N)<0)return g(this.m()*V.m());const M=this.g.length+V.g.length,L=[];for(var q=0;q<2*M;q++)L[q]=0;for(q=0;q<this.g.length;q++)for(let G=0;G<V.g.length;G++){const F=this.i(q)>>>16,z=this.i(q)&65535,Ft=V.i(G)>>>16,Lt=V.i(G)&65535;L[2*q+2*G]+=z*Lt,K(L,2*q+2*G),L[2*q+2*G+1]+=F*Lt,K(L,2*q+2*G+1),L[2*q+2*G+1]+=z*Ft,K(L,2*q+2*G+1),L[2*q+2*G+2]+=F*Ft,K(L,2*q+2*G+2)}for(V=0;V<M;V++)L[V]=L[2*V+1]<<16|L[2*V];for(V=M;V<2*M;V++)L[V]=0;return new c(L,0)};function K(V,M){for(;(V[M]&65535)!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function X(V,M){this.g=V,this.h=M}function Z(V,M){if(D(M))throw Error("division by zero");if(D(V))return new X(b,b);if(k(V))return M=Z(U(V),M),new X(U(M.g),U(M.h));if(k(M))return M=Z(V,U(M)),new X(U(M.g),M.h);if(V.g.length>30){if(k(V)||k(M))throw Error("slowDivide_ only works with positive integers.");for(var L=A,q=M;q.l(V)<=0;)L=pt(L),q=pt(q);var G=ot(L,1),F=ot(q,1);for(q=ot(q,2),L=ot(L,2);!D(q);){var z=F.add(q);z.l(V)<=0&&(G=G.add(L),F=z),q=ot(q,1),L=ot(L,1)}return M=j(V,G.j(M)),new X(G,M)}for(G=b;V.l(M)>=0;){for(L=Math.max(1,Math.floor(V.m()/M.m())),q=Math.ceil(Math.log(L)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),F=g(L),z=F.j(M);k(z)||z.l(V)>0;)L-=q,F=g(L),z=F.j(M);D(F)&&(F=A),G=G.add(F),V=j(V,z)}return new X(G,V)}n.B=function(V){return Z(this,V).h},n.and=function(V){const M=Math.max(this.g.length,V.g.length),L=[];for(let q=0;q<M;q++)L[q]=this.i(q)&V.i(q);return new c(L,this.h&V.h)},n.or=function(V){const M=Math.max(this.g.length,V.g.length),L=[];for(let q=0;q<M;q++)L[q]=this.i(q)|V.i(q);return new c(L,this.h|V.h)},n.xor=function(V){const M=Math.max(this.g.length,V.g.length),L=[];for(let q=0;q<M;q++)L[q]=this.i(q)^V.i(q);return new c(L,this.h^V.h)};function pt(V){const M=V.g.length+1,L=[];for(let q=0;q<M;q++)L[q]=V.i(q)<<1|V.i(q-1)>>>31;return new c(L,V.h)}function ot(V,M){const L=M>>5;M%=32;const q=V.g.length-L,G=[];for(let F=0;F<q;F++)G[F]=M>0?V.i(F+L)>>>M|V.i(F+L+1)<<32-M:V.i(F+L);return new c(G,V.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Bw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=E,bh=c}).apply(typeof o3<"u"?o3:typeof self<"u"?self:typeof window<"u"?window:{});var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gw,C0,qw,k1,yT,Hw,Fw,jw;(function(){var n,t=Object.defineProperty;function e(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof b1=="object"&&b1];for(var R=0;R<_.length;++R){var I=_[R];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=e(this);function s(_,R){if(R)t:{var I=i;_=_.split(".");for(var P=0;P<_.length-1;P++){var $=_[P];if(!($ in I))break t;I=I[$]}_=_[_.length-1],P=I[_],R=R(P),R!=P&&R!=null&&t(I,_,{configurable:!0,writable:!0,value:R})}}s("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(_){return _||function(R){var I=[],P;for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&I.push([P,R[P]]);return I}});var o=o||{},c=this||self;function f(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function m(_,R,I){return _.call.apply(_.bind,arguments)}function g(_,R,I){return g=m,g.apply(null,arguments)}function E(_,R){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),_.apply(this,P)}}function b(_,R){function I(){}I.prototype=R.prototype,_.Z=R.prototype,_.prototype=new I,_.prototype.constructor=_,_.Ob=function(P,$,ut){for(var Pt=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)Pt[ue-2]=arguments[ue];return R.prototype[$].apply(P,Pt)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function N(_){const R=_.length;if(R>0){const I=Array(R);for(let P=0;P<R;P++)I[P]=_[P];return I}return[]}function D(_,R){for(let P=1;P<arguments.length;P++){const $=arguments[P];var I=typeof $;if(I=I!="object"?I:$?Array.isArray($)?"array":I:"null",I=="array"||I=="object"&&typeof $.length=="number"){I=_.length||0;const ut=$.length||0;_.length=I+ut;for(let Pt=0;Pt<ut;Pt++)_[I+Pt]=$[Pt]}else _.push($)}}class k{constructor(R,I){this.i=R,this.j=I,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function U(_){c.setTimeout(()=>{throw _},0)}function j(){var _=V;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class K{constructor(){this.h=this.g=null}add(R,I){const P=X.get();P.set(R,I),this.h?this.h.next=P:this.g=P,this.h=P}}var X=new k(()=>new Z,_=>_.reset());class Z{constructor(){this.next=this.g=this.h=null}set(R,I){this.h=R,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,ot=!1,V=new K,M=()=>{const _=Promise.resolve(void 0);pt=()=>{_.then(L)}};function L(){for(var _;_=j();){try{_.h.call(_.g)}catch(I){U(I)}var R=X;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}ot=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const I=()=>{};c.addEventListener("test",I,R),c.removeEventListener("test",I,R)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function Ft(_,R){G.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}b(Ft,G),Ft.prototype.init=function(_,R){const I=this.type=_.type,P=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(I=="mouseover"?R=_.fromElement:I=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Ft.Z.h.call(this)},Ft.prototype.h=function(){Ft.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Lt="closure_listenable_"+(Math.random()*1e6|0),W=0;function Et(_,R,I,P,$){this.listener=_,this.proxy=null,this.src=R,this.type=I,this.capture=!!P,this.ha=$,this.key=++W,this.da=this.fa=!1}function vt(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ut(_,R,I){for(const P in _)R.call(I,_[P],P,_)}function Kt(_,R){for(const I in _)R.call(void 0,_[I],I,_)}function H(_){const R={};for(const I in _)R[I]=_[I];return R}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ct(_,R){let I,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(I in P)_[I]=P[I];for(let ut=0;ut<ct.length;ut++)I=ct[ut],Object.prototype.hasOwnProperty.call(P,I)&&(_[I]=P[I])}}function zt(_){this.src=_,this.g={},this.h=0}zt.prototype.add=function(_,R,I,P,$){const ut=_.toString();_=this.g[ut],_||(_=this.g[ut]=[],this.h++);const Pt=se(_,R,P,$);return Pt>-1?(R=_[Pt],I||(R.fa=!1)):(R=new Et(R,this.src,ut,!!P,$),R.fa=I,_.push(R)),R};function te(_,R){const I=R.type;if(I in _.g){var P=_.g[I],$=Array.prototype.indexOf.call(P,R,void 0),ut;(ut=$>=0)&&Array.prototype.splice.call(P,$,1),ut&&(vt(R),_.g[I].length==0&&(delete _.g[I],_.h--))}}function se(_,R,I,P){for(let $=0;$<_.length;++$){const ut=_[$];if(!ut.da&&ut.listener==R&&ut.capture==!!I&&ut.ha==P)return $}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),gn={};function De(_,R,I,P,$){if(Array.isArray(R)){for(let ut=0;ut<R.length;ut++)De(_,R[ut],I,P,$);return null}return I=vo(I),_&&_[Lt]?_.J(R,I,f(P)?!!P.capture:!1,$):Cr(_,R,I,!1,P,$)}function Cr(_,R,I,P,$,ut){if(!R)throw Error("Invalid event type");const Pt=f($)?!!$.capture:!!$;let ue=$i(_);if(ue||(_[Ee]=ue=new zt(_)),I=ue.add(R,I,P,Pt,ut),I.proxy)return I;if(P=Ir(),I.proxy=P,P.src=_,P.listener=I,_.addEventListener)F||($=Pt),$===void 0&&($=!1),_.addEventListener(R.toString(),P,$);else if(_.attachEvent)_.attachEvent(Ns(R.toString()),P);else if(_.addListener&&_.removeListener)_.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ir(){function _(I){return R.call(_.src,_.listener,I)}const R=tr;return _}function Is(_,R,I,P,$){if(Array.isArray(R))for(var ut=0;ut<R.length;ut++)Is(_,R[ut],I,P,$);else P=f(P)?!!P.capture:!!P,I=vo(I),_&&_[Lt]?(_=_.i,ut=String(R).toString(),ut in _.g&&(R=_.g[ut],I=se(R,I,P,$),I>-1&&(vt(R[I]),Array.prototype.splice.call(R,I,1),R.length==0&&(delete _.g[ut],_.h--)))):_&&(_=$i(_))&&(R=_.g[R.toString()],_=-1,R&&(_=se(R,I,P,$)),(I=_>-1?R[_]:null)&&ls(I))}function ls(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Lt])te(R.i,_);else{var I=_.type,P=_.proxy;R.removeEventListener?R.removeEventListener(I,P,_.capture):R.detachEvent?R.detachEvent(Ns(I),P):R.addListener&&R.removeListener&&R.removeListener(P),(I=$i(R))?(te(I,_),I.h==0&&(I.src=null,R[Ee]=null)):vt(_)}}}function Ns(_){return _ in gn?gn[_]:gn[_]="on"+_}function tr(_,R){if(_.da)_=!0;else{R=new Ft(R,this);const I=_.listener,P=_.ha||_.src;_.fa&&ls(_),_=I.call(P,R)}return _}function $i(_){return _=_[Ee],_ instanceof zt?_:null}var us="__closure_events_fn_"+(Math.random()*1e9>>>0);function vo(_){return typeof _=="function"?_:(_[us]||(_[us]=function(R){return _.handleEvent(R)}),_[us])}function _n(){q.call(this),this.i=new zt(this),this.M=this,this.G=null}b(_n,q),_n.prototype[Lt]=!0,_n.prototype.removeEventListener=function(_,R,I,P){Is(this,_,R,I,P)};function rn(_,R){var I,P=_.G;if(P)for(I=[];P;P=P.G)I.push(P);if(_=_.M,P=R.type||R,typeof R=="string")R=new G(R,_);else if(R instanceof G)R.target=R.target||_;else{var $=R;R=new G(P,_),Ct(R,$)}$=!0;let ut,Pt;if(I)for(Pt=I.length-1;Pt>=0;Pt--)ut=R.g=I[Pt],$=cs(ut,P,!0,R)&&$;if(ut=R.g=_,$=cs(ut,P,!0,R)&&$,$=cs(ut,P,!1,R)&&$,I)for(Pt=0;Pt<I.length;Pt++)ut=R.g=I[Pt],$=cs(ut,P,!1,R)&&$}_n.prototype.N=function(){if(_n.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const I=_.g[R];for(let P=0;P<I.length;P++)vt(I[P]);delete _.g[R],_.h--}}this.G=null},_n.prototype.J=function(_,R,I,P){return this.i.add(String(_),R,!1,I,P)},_n.prototype.K=function(_,R,I,P){return this.i.add(String(_),R,!0,I,P)};function cs(_,R,I,P){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let $=!0;for(let ut=0;ut<R.length;++ut){const Pt=R[ut];if(Pt&&!Pt.da&&Pt.capture==I){const ue=Pt.listener,Gn=Pt.ha||Pt.src;Pt.fa&&te(_.i,Pt),$=ue.call(Gn,P)!==!1&&$}}return $&&!P.defaultPrevented}function Bi(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=g(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(_,R||0)}function nn(_){_.g=Bi(()=>{_.g=null,_.i&&(_.i=!1,nn(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class In extends q{constructor(R,I){super(),this.m=R,this.l=I,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:nn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(_){q.call(this),this.h=_,this.g={}}b(Js,q);var bi=[];function At(_){Ut(_.g,function(R,I){this.g.hasOwnProperty(I)&&ls(R)},_),_.g={}}Js.prototype.N=function(){Js.Z.N.call(this),At(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=c.JSON.stringify,Te=c.JSON.parse,Se=class{stringify(_){return c.JSON.stringify(_,void 0)}parse(_){return c.JSON.parse(_,void 0)}};function er(){}function Xh(){}var Ta={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ai(){G.call(this,"d")}b(Ai,G);function Ws(){G.call(this,"c")}b(Ws,G);var Xn={},cc=null;function hc(){return cc=cc||new _n}Xn.Ia="serverreachability";function Jh(_){G.call(this,Xn.Ia,_)}b(Jh,G);function Nr(_){const R=hc();rn(R,new Jh(R))}Xn.STAT_EVENT="statevent";function Eo(_,R){G.call(this,Xn.STAT_EVENT,_),this.stat=R}b(Eo,G);function Nn(_){const R=hc();rn(R,new Eo(R,_))}Xn.Ja="timingevent";function nr(_,R){G.call(this,Xn.Ja,_),this.size=R}b(nr,G);function Zs(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){_()},R)}function Sa(){this.g=!0}Sa.prototype.ua=function(){this.g=!1};function Od(_,R,I,P,$,ut){_.info(function(){if(_.g)if(ut){var Pt="",ue=ut.split("&");for(let xe=0;xe<ue.length;xe++){var Gn=ue[xe].split("=");if(Gn.length>1){const dn=Gn[0];Gn=Gn[1];const ds=dn.split("_");Pt=ds.length>=2&&ds[1]=="type"?Pt+(dn+"="+Gn+"&"):Pt+(dn+"=redacted&")}}}else Pt=null;else Pt=ut;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+R+`
`+I+`
`+Pt})}function Dr(_,R,I,P,$,ut,Pt){_.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+R+`
`+I+`
`+ut+" "+Pt})}function ir(_,R,I,P){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+fc(_,I)+(P?" "+P:"")})}function $o(_,R){_.info(function(){return"TIMEOUT: "+R})}Sa.prototype.info=function(){};function fc(_,R){if(!_.g)return R;if(!R)return null;try{const ut=JSON.parse(R);if(ut){for(_=0;_<ut.length;_++)if(Array.isArray(ut[_])){var I=ut[_];if(!(I.length<2)){var P=I[1];if(Array.isArray(P)&&!(P.length<1)){var $=P[0];if($!="noop"&&$!="stop"&&$!="close")for(let Pt=1;Pt<P.length;Pt++)P[Pt]=""}}}}return Yt(ut)}catch{return R}}var sr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},dc;function xr(){}b(xr,er),xr.prototype.g=function(){return new XMLHttpRequest},dc=new xr;function ba(_){return encodeURIComponent(String(_))}function mc(_){var R=1;_=_.split(":");const I=[];for(;R>0&&_.length;)I.push(_.shift()),R--;return _.length&&I.push(_.join(":")),I}function Gi(_,R,I,P){this.j=_,this.i=R,this.l=I,this.S=P||1,this.V=new Js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}var Dn={},oi={};function wa(_,R,I){_.M=1,_.A=Wn(Jn(R)),_.u=I,_.R=!0,$s(_,null)}function $s(_,R){_.F=Date.now(),Ds(_),_.B=Jn(_.A);var I=_.B,P=_.S;Array.isArray(P)||(P=[String(P)]),au(I.i,"t",P),_.C=0,I=_.j.L,_.h=new Aa,_.g=nf(_.j,I?R:null,!_.u),_.P>0&&(_.O=new In(g(_.Y,_,_.g),_.P)),R=_.V,I=_.g,P=_.ba;var $="readystatechange";Array.isArray($)||($&&(bi[0]=$.toString()),$=bi);for(let ut=0;ut<$.length;ut++){const Pt=De(I,$[ut],P||R.handleEvent,!1,R.h||R);if(!Pt)break;R.g[Pt.key]=Pt}R=_.J?H(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),Nr(),Od(_.i,_.v,_.B,_.l,_.S,_.u)}Gi.prototype.ba=function(_){_=_.target;const R=this.O;R&&cr(_)==3?R.j():this.Y(_)},Gi.prototype.Y=function(_){try{if(_==this.g)t:{const ue=cr(this.g),Gn=this.g.ya(),xe=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Ci(this.g)))){this.K||ue!=4||Gn==7||(Gn==8||xe<=0?Nr(3):Nr(2)),ar(this);var R=this.g.ca();this.X=R;var I=Or(this);if(this.o=R==200,Dr(this.i,this.v,this.B,this.l,this.S,ue,R),this.o){if(this.U&&!this.L){e:{if(this.g){var P,$=this.g;if((P=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(P)){var ut=P;break e}}ut=null}if(_=ut)ir(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ra(this,_);else{this.o=!1,this.m=3,Nn(12),xs(this),ta(this);break t}}if(this.R){_=!0;let dn;for(;!this.K&&this.C<I.length;)if(dn=pc(this,I),dn==oi){ue==4&&(this.m=4,Nn(14),_=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Dn){this.m=4,Nn(15),ir(this.i,this.l,I,"[Invalid Chunk]"),_=!1;break}else ir(this.i,this.l,dn,null),Ra(this,dn);if(el(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||I.length!=0||this.h.h||(this.m=1,Nn(16),_=!1),this.o=this.o&&_,!_)ir(this.i,this.l,I,"[Invalid Chunked Response]"),xs(this),ta(this);else if(I.length>0&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.aa&&!Pt.P&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Rc(Pt),Pt.P=!0,Nn(11))}}else ir(this.i,this.l,I,null),Ra(this,I);ue==4&&xs(this),this.o&&!this.K&&(ue==4?tf(this.j,this):(this.o=!1,Ds(this)))}else zr(this.g),R==400&&I.indexOf("Unknown SID")>0?(this.m=3,Nn(12)):(this.m=0,Nn(13)),xs(this),ta(this)}}}catch{}};function Or(_){if(!el(_))return _.g.la();const R=Ci(_.g);if(R==="")return"";let I="";const P=R.length,$=cr(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return xs(_),ta(_),"";_.h.i=new c.TextDecoder}for(let ut=0;ut<P;ut++)_.h.h=!0,I+=_.h.i.decode(R[ut],{stream:!($&&ut==P-1)});return R.length=0,_.h.g+=I,_.C=0,_.h.g}function el(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function pc(_,R){var I=_.C,P=R.indexOf(`
`,I);return P==-1?oi:(I=Number(R.substring(I,P)),isNaN(I)?Dn:(P+=1,P+I>R.length?oi:(R=R.slice(P,P+I),_.C=P+I,R)))}Gi.prototype.cancel=function(){this.K=!0,xs(this)};function Ds(_){_.T=Date.now()+_.H,Mr(_,_.H)}function Mr(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=Zs(g(_.aa,_),R)}function ar(_){_.D&&(c.clearTimeout(_.D),_.D=null)}Gi.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?($o(this.i,this.B),this.M!=2&&(Nr(),Nn(17)),xs(this),this.m=2,ta(this)):Mr(this,this.T-_)};function ta(_){_.j.I==0||_.K||tf(_.j,_)}function xs(_){ar(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,At(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function Ra(_,R){try{var I=_.j;if(I.I!=0&&(I.g==_||qi(I.h,_))){if(!_.L&&qi(I.h,_)&&I.I==3){try{var P=I.Ba.g.parse(R)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){t:if(!I.v){if(I.g)if(I.g.F+3e3<_.F)Cc(I),Br(I);else break t;ul(I),Nn(18)}}else I.xa=$[1],0<I.xa-I.K&&$[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Zs(g(I.Va,I),6e3));rr(I.h)<=1&&I.ta&&(I.ta=void 0)}else Da(I,11)}else if((_.L||I.g==_)&&Cc(I),!z(R))for($=I.Ba.g.parse(R),R=0;R<$.length;R++){let xe=$[R];const dn=xe[0];if(!(dn<=I.K))if(I.K=dn,xe=xe[1],I.I==2)if(xe[0]=="c"){I.M=xe[1],I.ba=xe[2];const ds=xe[3];ds!=null&&(I.ka=ds,I.j.info("VER="+I.ka));const dr=xe[4];dr!=null&&(I.za=dr,I.j.info("SVER="+I.za));const mr=xe[5];mr!=null&&typeof mr=="number"&&mr>0&&(P=1.5*mr,I.O=P,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const Ms=_.g;if(Ms){const Ro=Ms.g?Ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var ut=P.h;ut.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(Hi(ut,ut.h),ut.h=null))}if(P.G){const fu=Ms.g?Ms.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(P.wa=fu,He(P.J,P.G,fu))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-_.F,I.j.info("Handshake RTT: "+I.T+"ms")),P=I;var Pt=_;if(P.na=ef(P,P.L?P.ba:null,P.W),Pt.L){nl(P.h,Pt);var ue=Pt,Gn=P.O;Gn&&(ue.H=Gn),ue.D&&(ar(ue),Ds(ue)),P.g=Pt}else wc(P);I.i.length>0&&fr(I)}else xe[0]!="stop"&&xe[0]!="close"||Da(I,7);else I.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Da(I,7):bc(I):xe[0]!="noop"&&I.l&&I.l.qa(xe),I.A=0)}}Nr(4)}catch{}}var Bn=class{constructor(_,R){this.g=_,this.map=R}};function Ca(_){this.l=_||10,c.PerformanceNavigationTiming?(_=c.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function iu(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function rr(_){return _.h?1:_.g?_.g.size:0}function qi(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function Hi(_,R){_.g?_.g.add(R):_.h=R}function nl(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}Ca.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function on(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const I of _.g.values())R=R.concat(I.G);return R}return N(_.i)}var gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function il(_,R){if(_){_=_.split("&");for(let I=0;I<_.length;I++){const P=_[I].indexOf("=");let $,ut=null;P>=0?($=_[I].substring(0,P),ut=_[I].substring(P+1)):$=_[I],R($,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}function Os(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof Os?(this.l=_.l,wi(this,_.j),this.o=_.o,this.g=_.g,Pr(this,_.u),this.h=_.h,su(this,Zh(_.i)),this.m=_.m):_&&(R=String(_).match(gc))?(this.l=!1,wi(this,R[1]||"",!0),this.o=Fe(R[2]||""),this.g=Fe(R[3]||"",!0),Pr(this,R[4]),this.h=Fe(R[5]||"",!0),su(this,R[6]||"",!0),this.m=Fe(R[7]||"")):(this.l=!1,this.i=new kr(null,this.l))}Os.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Vr(R,To,!0),":");var I=this.g;return(I||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Vr(R,To,!0),"@"),_.push(ba(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&_.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&_.push("/"),_.push(Vr(I,I.charAt(0)=="/"?ea:_c,!0))),(I=this.i.toString())&&_.push("?",I),(I=this.m)&&_.push("#",Vr(I,yc)),_.join("")},Os.prototype.resolve=function(_){const R=Jn(this);let I=!!_.j;I?wi(R,_.j):I=!!_.o,I?R.o=_.o:I=!!_.g,I?R.g=_.g:I=_.u!=null;var P=_.h;if(I)Pr(R,_.u);else if(I=!!_.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var $=R.h.lastIndexOf("/");$!=-1&&(P=R.h.slice(0,$+1)+P)}if($=P,$==".."||$==".")P="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){P=$.lastIndexOf("/",0)==0,$=$.split("/");const ut=[];for(let Pt=0;Pt<$.length;){const ue=$[Pt++];ue=="."?P&&Pt==$.length&&ut.push(""):ue==".."?((ut.length>1||ut.length==1&&ut[0]!="")&&ut.pop(),P&&Pt==$.length&&ut.push("")):(ut.push(ue),P=!0)}P=ut.join("/")}else P=$}return I?R.h=P:I=_.i.toString()!=="",I?su(R,Zh(_.i)):I=!!_.m,I&&(R.m=_.m),R};function Jn(_){return new Os(_)}function wi(_,R,I){_.j=I?Fe(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function Pr(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function su(_,R,I){R instanceof kr?(_.i=R,ru(_.i,_.l)):(I||(R=Vr(R,or)),_.i=new kr(R,_.l))}function He(_,R,I){_.i.set(R,I)}function Wn(_){return He(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Fe(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Vr(_,R,I){return typeof _=="string"?(_=encodeURI(_).replace(R,Ri),I&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ri(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var To=/[#\/\?@]/g,_c=/[#\?:]/g,ea=/[#\?]/g,or=/[#\?@]/g,yc=/#/g;function kr(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function hs(_){_.g||(_.g=new Map,_.h=0,_.i&&il(_.i,function(R,I){_.add(decodeURIComponent(R.replace(/\+/g," ")),I)}))}n=kr.prototype,n.add=function(_,R){hs(this),this.i=null,_=Lr(this,_);let I=this.g.get(_);return I||this.g.set(_,I=[]),I.push(R),this.h+=1,this};function Wh(_,R){hs(_),R=Lr(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function vc(_,R){return hs(_),R=Lr(_,R),_.g.has(R)}n.forEach=function(_,R){hs(this),this.g.forEach(function(I,P){I.forEach(function($){_.call(R,$,P,this)},this)},this)};function Ec(_,R){hs(_);let I=[];if(typeof R=="string")vc(_,R)&&(I=I.concat(_.g.get(Lr(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)I=I.concat(_[R]);return I}n.set=function(_,R){return hs(this),this.i=null,_=Lr(this,_),vc(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=Ec(this,_),_.length>0?String(_[0]):R):R};function au(_,R,I){Wh(_,R),I.length>0&&(_.i=null,_.g.set(Lr(_,R),N(I)),_.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let P=0;P<R.length;P++){var I=R[P];const $=ba(I);I=Ec(this,I);for(let ut=0;ut<I.length;ut++){let Pt=$;I[ut]!==""&&(Pt+="="+ba(I[ut])),_.push(Pt)}}return this.i=_.join("&")};function Zh(_){const R=new kr;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function Lr(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function ru(_,R){R&&!_.j&&(hs(_),_.i=null,_.g.forEach(function(I,P){const $=P.toLowerCase();P!=$&&(Wh(this,P),au(this,$,I))},_)),_.j=R}function lr(_,R){const I=new Sa;if(c.Image){const P=new Image;P.onload=E(na,I,"TestLoadImage: loaded",!0,R,P),P.onerror=E(na,I,"TestLoadImage: error",!1,R,P),P.onabort=E(na,I,"TestLoadImage: abort",!1,R,P),P.ontimeout=E(na,I,"TestLoadImage: timeout",!1,R,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=_}else R(!1)}function Tc(_,R){const I=new Sa,P=new AbortController,$=setTimeout(()=>{P.abort(),na(I,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:P.signal}).then(ut=>{clearTimeout($),ut.ok?na(I,"TestPingServer: ok",!0,R):na(I,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout($),na(I,"TestPingServer: error",!1,R)})}function na(_,R,I,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(I)}catch{}}function So(){this.g=new Se}function Ia(_){this.i=_.Sb||null,this.h=_.ab||!1}b(Ia,er),Ia.prototype.g=function(){return new sl(this.i,this.h)};function sl(_,R){_n.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(sl,_n),n=sl.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Na(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ou(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function ou(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?bo(this):Na(this),this.readyState==3&&ou(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,bo(this))},n.Na=function(_){this.g&&(this.response=_,bo(this))},n.ga=function(){this.g&&bo(this)};function bo(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Na(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var I=R.next();!I.done;)I=I.value,_.push(I[0]+": "+I[1]),I=R.next();return _.join(`\r
`)};function Na(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function ia(_){let R="";return Ut(_,function(I,P){R+=P,R+=":",R+=I,R+=`\r
`}),R}function lu(_,R,I){t:{for(P in I){var P=!1;break t}P=!0}P||(I=ia(I),typeof _=="string"?I!=null&&ba(I):He(_,R,I))}function Qe(_){_n.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Qe,_n);var fs=/^https?$/i,Sc=["POST","PUT"];n=Qe.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():dc.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(ut){Ur(this,ut);return}if(_=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)I.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ut of P.keys())I.set(ut,P.get(ut));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(I.keys()).find(ut=>ut.toLowerCase()=="content-type"),$=c.FormData&&_ instanceof c.FormData,!(Array.prototype.indexOf.call(Sc,R,void 0)>=0)||P||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Pt]of I)this.g.setRequestHeader(ut,Pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(ut){Ur(this,ut)}};function Ur(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,al(_),ur(_)}function al(_){_.A||(_.A=!0,rn(_,"complete"),rn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,rn(this,"complete"),rn(this,"abort"),ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),Qe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rl(this):this.Xa())},n.Xa=function(){rl(this)};function rl(_){if(_.h&&typeof o<"u"){if(_.v&&cr(_)==4)setTimeout(_.Ca.bind(_),0);else if(rn(_,"readystatechange"),cr(_)==4){_.h=!1;try{const ut=_.ca();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var I;if(!(I=R)){var P;if(P=ut===0){let Pt=String(_.D).match(gc)[1]||null;!Pt&&c.self&&c.self.location&&(Pt=c.self.location.protocol.slice(0,-1)),P=!fs.test(Pt?Pt.toLowerCase():"")}I=P}if(I)rn(_,"complete"),rn(_,"success");else{_.o=6;try{var $=cr(_)>2?_.g.statusText:""}catch{$=""}_.l=$+" ["+_.ca()+"]",al(_)}}finally{ur(_)}}}}function ur(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const I=_.g;_.g=null,R||rn(_,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function cr(_){return _.g?_.g.readyState:0}n.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),Te(R)}};function Ci(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function zr(_){const R={};_=(_.g&&cr(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<_.length;P++){if(z(_[P]))continue;var I=mc(_[P]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ut=R[$]||[];R[$]=ut,ut.push(I)}Kt(R,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hr(_,R,I){return I&&I.internalChannelParams&&I.internalChannelParams[_]||R}function Ao(_){this.za=0,this.i=[],this.j=new Sa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hr("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hr("baseRetryDelayMs",5e3,_),this.Za=hr("retryDelaySeedMs",1e4,_),this.Ta=hr("forwardChannelMaxRetries",2,_),this.va=hr("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Ca(_&&_.concurrentRequestLimit),this.Ba=new So,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ao.prototype,n.ka=8,n.I=1,n.connect=function(_,R,I,P){Nn(0),this.W=_,this.H=R||{},I&&P!==void 0&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.J=ef(this,null,this.W),fr(this)};function bc(_){if(uu(_),_.I==3){var R=_.V++,I=Jn(_.J);if(He(I,"SID",_.M),He(I,"RID",R),He(I,"TYPE","terminate"),ll(_,I),R=new Gi(_,_.j,R),R.M=2,R.A=Wn(Jn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=R.A,I=!0),I||(R.g=nf(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Ds(R)}cu(_)}function Br(_){_.g&&(Rc(_),_.g.cancel(),_.g=null)}function uu(_){Br(_),_.v&&(c.clearTimeout(_.v),_.v=null),Cc(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&c.clearTimeout(_.m),_.m=null)}function fr(_){if(!iu(_.h)&&!_.m){_.m=!0;var R=_.Ea;pt||M(),ot||(pt(),ot=!0),V.add(R,_),_.D=0}}function ol(_,R){return rr(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=Zs(g(_.Ea,_,R),cl(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const $=new Gi(this,this.j,_);let ut=this.o;if(this.U&&(ut?(ut=H(ut),Ct(ut,this.U)):ut=this.U),this.u!==null||this.R||($.J=ut,ut=null),this.S)t:{for(var R=0,I=0;I<this.i.length;I++){e:{var P=this.i[I];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(R+=P,R>4096){R=I;break t}if(R===4096||I===this.i.length-1){R=I+1;break t}}R=1e3}else R=1e3;R=$h(this,$,R),I=Jn(this.J),He(I,"RID",_),He(I,"CVER",22),this.G&&He(I,"X-HTTP-Session-Id",this.G),ll(this,I),ut&&(this.R?R="headers="+ba(ia(ut))+"&"+R:this.u&&lu(I,this.u,ut)),Hi(this.h,$),this.Ra&&He(I,"TYPE","init"),this.S?(He(I,"$req",R),He(I,"SID","null"),$.U=!0,wa($,I,null)):wa($,I,R),this.I=2}}else this.I==3&&(_?Ac(this,_):this.i.length==0||iu(this.h)||Ac(this))};function Ac(_,R){var I;R?I=R.l:I=_.V++;const P=Jn(_.J);He(P,"SID",_.M),He(P,"RID",I),He(P,"AID",_.K),ll(_,P),_.u&&_.o&&lu(P,_.u,_.o),I=new Gi(_,_.j,I,_.D+1),_.u===null&&(I.J=_.o),R&&(_.i=R.G.concat(_.i)),R=$h(_,I,1e3),I.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Hi(_.h,I),wa(I,P,R)}function ll(_,R){_.H&&Ut(_.H,function(I,P){He(R,P,I)}),_.l&&Ut({},function(I,P){He(R,P,I)})}function $h(_,R,I){I=Math.min(_.i.length,I);const P=_.l?g(_.l.Ka,_.l,_):null;t:{var $=_.i;let ue=-1;for(;;){const Gn=["count="+I];ue==-1?I>0?(ue=$[0].g,Gn.push("ofs="+ue)):ue=0:Gn.push("ofs="+ue);let xe=!0;for(let dn=0;dn<I;dn++){var ut=$[dn].g;const ds=$[dn].map;if(ut-=ue,ut<0)ue=Math.max(0,$[dn].g-100),xe=!1;else try{ut="req"+ut+"_"||"";try{var Pt=ds instanceof Map?ds:Object.entries(ds);for(const[dr,mr]of Pt){let Ms=mr;f(mr)&&(Ms=Yt(mr)),Gn.push(ut+dr+"="+encodeURIComponent(Ms))}}catch(dr){throw Gn.push(ut+"type="+encodeURIComponent("_badmap")),dr}}catch{P&&P(ds)}}if(xe){Pt=Gn.join("&");break t}}Pt=void 0}return _=_.i.splice(0,I),R.G=_,Pt}function wc(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;pt||M(),ot||(pt(),ot=!0),V.add(R,_),_.A=0}}function ul(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=Zs(g(_.Da,_),cl(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,Md(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=Zs(g(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nn(10),Br(this),Md(this))};function Rc(_){_.B!=null&&(c.clearTimeout(_.B),_.B=null)}function Md(_){_.g=new Gi(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=Jn(_.na);He(R,"RID","rpc"),He(R,"SID",_.M),He(R,"AID",_.K),He(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&He(R,"TO",_.ia),He(R,"TYPE","xmlhttp"),ll(_,R),_.u&&_.o&&lu(R,_.u,_.o),_.O&&(_.g.H=_.O);var I=_.g;_=_.ba,I.M=1,I.A=Wn(Jn(R)),I.u=null,I.R=!0,$s(I,_)}n.Va=function(){this.C!=null&&(this.C=null,Br(this),ul(this),Nn(19))};function Cc(_){_.C!=null&&(c.clearTimeout(_.C),_.C=null)}function tf(_,R){var I=null;if(_.g==R){Cc(_),Rc(_),_.g=null;var P=2}else if(qi(_.h,R))I=R.G,nl(_.h,R),P=1;else return;if(_.I!=0){if(R.o)if(P==1){I=R.u?R.u.length:0,R=Date.now()-R.F;var $=_.D;P=hc(),rn(P,new nr(P,I)),fr(_)}else wc(_);else if($=R.m,$==3||$==0&&R.X>0||!(P==1&&ol(_,R)||P==2&&ul(_)))switch(I&&I.length>0&&(R=_.h,R.i=R.i.concat(I)),$){case 1:Da(_,5);break;case 4:Da(_,10);break;case 3:Da(_,6);break;default:Da(_,2)}}}function cl(_,R){let I=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(I*=2),I*R}function Da(_,R){if(_.j.info("Error code "+R),R==2){var I=g(_.bb,_),P=_.Ua;const $=!P;P=new Os(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wi(P,"https"),Wn(P),$?lr(P.toString(),I):Tc(P.toString(),I)}else Nn(2);_.I=0,_.l&&_.l.pa(R),cu(_),uu(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function cu(_){if(_.I=0,_.ja=[],_.l){const R=on(_.h);(R.length!=0||_.i.length!=0)&&(D(_.ja,R),D(_.ja,_.i),_.h.i.length=0,N(_.i),_.i.length=0),_.l.oa()}}function ef(_,R,I){var P=I instanceof Os?Jn(I):new Os(I);if(P.g!="")R&&(P.g=R+"."+P.g),Pr(P,P.u);else{var $=c.location;P=$.protocol,R=R?R+"."+$.hostname:$.hostname,$=+$.port;const ut=new Os(null);P&&wi(ut,P),R&&(ut.g=R),$&&Pr(ut,$),I&&(ut.h=I),P=ut}return I=_.G,R=_.wa,I&&R&&He(P,I,R),He(P,"VER",_.ka),ll(_,P),P}function nf(_,R,I){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new Qe(new Ia({ab:I})):new Qe(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ic(){}n=Ic.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function wo(){}wo.prototype.g=function(_,R){return new ts(_,R)};function ts(_,R){_n.call(this),this.g=new Ao(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!z(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!z(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new qr(this)}b(ts,_n),ts.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ts.prototype.close=function(){bc(this.g)},ts.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var I={};I.__data__=_,_=I}else this.v&&(I={},I.__data__=Yt(_),_=I);R.i.push(new Bn(R.Ya++,_)),R.I==3&&fr(R)},ts.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,ts.Z.N.call(this)};function Gr(_){Ai.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){t:{for(const I in R){_=I;break t}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}b(Gr,Ai);function hu(){Ws.call(this),this.status=1}b(hu,Ws);function qr(_){this.g=_}b(qr,Ic),qr.prototype.ra=function(){rn(this.g,"a")},qr.prototype.qa=function(_){rn(this.g,new Gr(_))},qr.prototype.pa=function(_){rn(this.g,new hu)},qr.prototype.oa=function(){rn(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,ts.prototype.send=ts.prototype.o,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,jw=function(){return new wo},Fw=function(){return hc()},Hw=Xn,yT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,k1=sr,tl.COMPLETE="complete",qw=tl,Xh.EventType=Ta,Ta.OPEN="a",Ta.CLOSE="b",Ta.ERROR="c",Ta.MESSAGE="d",_n.prototype.listen=_n.prototype.J,C0=Xh,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,Gw=Qe}).apply(typeof b1<"u"?b1:typeof self<"u"?self:typeof window<"u"?window:{});let rs=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");let Dp="12.9.0";function RP(n){Dp=n}const Dh=new Bv("@firebase/firestore");function Um(){return Dh.logLevel}function CP(n){Dh.setLogLevel(n)}function bt(n,...t){if(Dh.logLevel<=Pe.DEBUG){const e=t.map(SS);Dh.debug(`Firestore (${Dp}): ${n}`,...e)}}function Ei(n,...t){if(Dh.logLevel<=Pe.ERROR){const e=t.map(SS);Dh.error(`Firestore (${Dp}): ${n}`,...e)}}function Xo(n,...t){if(Dh.logLevel<=Pe.WARN){const e=t.map(SS);Dh.warn(`Firestore (${Dp}): ${n}`,...e)}}function SS(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function qt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Kw(n,i,e)}function Kw(n,t,e){let i=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ei(i),new Error(i)}function Qt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||Kw(t,s,i)}function IP(n,t){n||qt(57014,t)}function Bt(n,t){return n}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Ui{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Yw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class NP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(rs.UNAUTHENTICATED)))}shutdown(){}}class DP{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class xP{constructor(t){this.t=t,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Qt(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let o=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rs,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=o;t.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rs)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qt(typeof i.accessToken=="string",31837,{l:i}),new Yw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new rs(t)}}class OP{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=rs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class MP{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new OP(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class l3{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PP{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Qt(this.o===void 0,3512);const i=o=>{o.error!=null&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,bt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const s=o=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new l3(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Qt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new l3(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function VP(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class bS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=VP(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<e&&(i+=t.charAt(s[o]%62))}return i}}function le(n,t){return n<t?-1:n>t?1:0}function vT(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),o=t.charAt(i);if(s!==o)return xE(s)===xE(o)?le(s,o):xE(s)?1:-1}return le(n.length,t.length)}const kP=55296,LP=57343;function xE(n){const t=n.charCodeAt(0);return t>=kP&&t<=LP}function ap(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}function Qw(n){return n+"\0"}const u3="__name__";class Ll{constructor(t,e,i){e===void 0?e=0:e>t.length&&qt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&qt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Ll.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ll?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const o=Ll.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return le(t.length,e.length)}static compareSegments(t,e){const i=Ll.isNumericId(t),s=Ll.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Ll.extractNumericId(t).compare(Ll.extractNumericId(e)):vT(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return bh.fromString(t.substring(4,t.length-2))}}class Ve extends Ll{construct(t,e,i){return new Ve(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Tt(ft.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new Ve(e)}static emptyPath(){return new Ve([])}}const UP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends Ll{construct(t,e,i){return new Yn(t,e,i)}static isValidIdentifier(t){return UP.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u3}static keyField(){return new Yn([u3])}static fromServerFormat(t){const e=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Tt(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new Tt(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Tt(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(o(),s++)}if(o(),c)throw new Tt(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yn(e)}static emptyPath(){return new Yn([])}}class kt{constructor(t){this.path=t}static fromPath(t){return new kt(Ve.fromString(t))}static fromName(t){return new kt(Ve.fromString(t).popFirst(5))}static empty(){return new kt(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ve.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ve.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new kt(new Ve(t.slice()))}}function AS(n,t,e){if(!e)throw new Tt(ft.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Xw(n,t,e,i){if(t===!0&&i===!0)throw new Tt(ft.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function c3(n){if(!kt.isDocumentKey(n))throw new Tt(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function h3(n){if(kt.isDocumentKey(n))throw new Tt(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":qt(12329,{type:typeof n})}function Ye(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Tt(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qv(n);throw new Tt(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function Ww(n,t){if(t<=0)throw new Tt(ft.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}function Li(n,t){const e={typeString:n};return t&&(e.value=t),e}function A_(n,t){if(!Jw(n))throw new Tt(ft.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new Tt(ft.INVALID_ARGUMENT,e);return!0}const f3=-62135596800,d3=1e6;class en{static now(){return en.fromMillis(Date.now())}static fromDate(t){return en.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*d3);return new en(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Tt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Tt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<f3)throw new Tt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Tt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d3}_compareTo(t){return this.seconds===t.seconds?le(this.nanoseconds,t.nanoseconds):le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:en._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(A_(t,en._jsonSchema))return new en(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-f3;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}en._jsonSchemaVersion="firestore/timestamp/1.0",en._jsonSchema={type:Li("string",en._jsonSchemaVersion),seconds:Li("number"),nanoseconds:Li("number")};class Wt{static fromTimestamp(t){return new Wt(t)}static min(){return new Wt(new en(0,0))}static max(){return new Wt(new en(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rp=-1;class nv{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}}function ET(n){return n.fields.find((t=>t.kind===2))}function zf(n){return n.fields.filter((t=>t.kind!==2))}nv.UNKNOWN_ID=-1;class L1{constructor(t,e){this.fieldPath=t,this.kind=e}}class n_{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n_(0,Rr.min())}}function Zw(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Wt.fromTimestamp(i===1e9?new en(e+1,0):new en(e,i));return new Rr(s,kt.empty(),t)}function $w(n){return new Rr(n.readTime,n.key,rp)}class Rr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Rr(Wt.min(),kt.empty(),rp)}static max(){return new Rr(Wt.max(),kt.empty(),rp)}}function wS(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=kt.comparator(n.documentKey,t.documentKey),e!==0?e:le(n.largestBatchId,t.largestBatchId))}const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function qh(n){if(n.code!==ft.FAILED_PRECONDITION||n.message!==tR)throw n;bt("LocalStore","Unexpectedly lost primary lease")}class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new it(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof it?e:it.resolve(e)}catch(e){return it.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):it.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):it.reject(e)}static resolve(t){return new it(((e,i)=>{e(t)}))}static reject(t){return new it(((e,i)=>{i(t)}))}static waitFor(t){return new it(((e,i)=>{let s=0,o=0,c=!1;t.forEach((f=>{++s,f.next((()=>{++o,c&&o===s&&e()}),(m=>i(m)))})),c=!0,o===s&&e()}))}static or(t){let e=it.resolve(!1);for(const i of t)e=e.next((s=>s?it.resolve(s):i()));return e}static forEach(t,e){const i=[];return t.forEach(((s,o)=>{i.push(e.call(this,s,o))})),this.waitFor(i)}static mapArray(t,e){return new it(((i,s)=>{const o=t.length,c=new Array(o);let f=0;for(let m=0;m<o;m++){const g=m;e(t[g]).next((E=>{c[g]=E,++f,f===o&&i(c)}),(E=>s(E)))}}))}static doWhile(t,e){return new it(((i,s)=>{const o=()=>{t()===!0?e().next((()=>{o()}),s):i()};o()}))}}const Er="SimpleDb";class Hv{static open(t,e,i,s){try{return new Hv(e,t.transaction(s,i))}catch(o){throw new U0(e,o)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Rs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new U0(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=RS(i.target.error);this.S.reject(new U0(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(bt(Er,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new BP(e)}}class Yl{static delete(t){return bt(Er,"Removing database:",t),Gf(dS().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!nd())return!1;if(Yl.F())return!0;const t=ii(),e=Yl.M(t),i=0<e&&e<10,s=nR(t),o=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Yl.M(ii())===12.2&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(bt(Er,"Opening database:",this.name),this.db=await new Promise(((e,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;e(c)},s.onblocked=()=>{i(new U0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?i(new Tt(ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new Tt(ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new U0(t,c))},s.onupgradeneeded=o=>{bt(Er,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{bt(Er,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,s){const o=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const f=Hv.open(this.db,t,o?"readonly":"readwrite",i),m=s(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),it.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(bt(Er,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nR(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class zP{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return Gf(this.U.delete())}}class U0 extends Tt{constructor(t,e){super(ft.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Hh(n){return n.name==="IndexedDbTransactionError"}class BP{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(bt(Er,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(bt(Er,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Gf(i)}add(t){return bt(Er,"ADD",this.store.name,t,t),Gf(this.store.add(t))}get(t){return Gf(this.store.get(t)).next((e=>(e===void 0&&(e=null),bt(Er,"GET",this.store.name,t,e),e)))}delete(t){return bt(Er,"DELETE",this.store.name,t),Gf(this.store.delete(t))}count(){return bt(Er,"COUNT",this.store.name),Gf(this.store.count())}H(t,e){const i=this.options(t,e),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new it(((c,f)=>{o.onerror=m=>{f(m.target.error)},o.onsuccess=m=>{c(m.target.result)}}))}{const o=this.cursor(i),c=[];return this.J(o,((f,m)=>{c.push(m)})).next((()=>c))}}Z(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new it(((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}}))}X(t,e){bt(Er,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const s=this.cursor(i);return this.J(s,((o,c,f)=>f.delete()))}ee(t,e){let i;e?i=t:(i={},e=t);const s=this.cursor(i);return this.J(s,e)}te(t){const e=this.cursor({});return new it(((i,s)=>{e.onerror=o=>{const c=RS(o.target.error);s(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}J(t,e){const i=[];return new it(((s,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const f=c.target.result;if(!f)return void s();const m=new zP(f),g=e(f.primaryKey,f.value,m);if(g instanceof it){const E=g.catch((b=>(m.done(),it.reject(b))));i.push(E)}m.isDone?s():m.G===null?f.continue():f.continue(m.G)}})).next((()=>it.waitFor(i)))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Gf(n){return new it(((t,e)=>{n.onsuccess=i=>{const s=i.target.result;t(s)},n.onerror=i=>{const s=RS(i.target.error);e(s)}}))}let m3=!1;function RS(n){const t=Yl.M(ii());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m3||(m3=!0,setTimeout((()=>{throw i}),0)),i}}return n}const z0="IndexBackfiller";class GP{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){bt(z0,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();bt(z0,`Documents written: ${e}`)}catch(e){Hh(e)?bt(z0,"Ignoring IndexedDB error during index backfill: ",e):await qh(e)}await this.re(6e4)}))}}class qP{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const i=new Set;let s=e,o=!0;return it.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!i.has(c))return bt(z0,`Processing collection: ${c}`),this.oe(t,c,s).next((f=>{s-=f,i.add(c)}));o=!1})))).next((()=>e-s))}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((s=>this.localStore.localDocuments.getNextDocuments(t,e,s,i).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(s,o))).next((f=>(bt(z0,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(t,e,f)))).next((()=>c.size))}))))}_e(t,e){let i=t;return e.changes.forEach(((s,o)=>{const c=$w(o);wS(c,i)>0&&(i=c)})),new Rr(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Ja{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ja.ce=-1;const Ah=-1;function w_(n){return n==null}function i_(n){return n===0&&1/n==-1/0}function iR(n){return typeof n=="number"&&Number.isInteger(n)&&!i_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const iv="";function Qs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=p3(t)),t=HP(n.get(e),t);return p3(t)}function HP(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":e+="";break;case iv:e+="";break;default:e+=o}}return e}function p3(n){return n+iv+""}function Fl(n){const t=n.length;if(Qt(t>=2,64408,{path:n}),t===2)return Qt(n.charAt(0)===iv&&n.charAt(1)==="",56145,{path:n}),Ve.emptyPath();const e=t-2,i=[];let s="";for(let o=0;o<t;){const c=n.indexOf(iv,o);switch((c<0||c>e)&&qt(50515,{path:n}),n.charAt(c+1)){case"":const f=n.substring(o,c);let m;s.length===0?m=f:(s+=f,m=s,s=""),i.push(m);break;case"":s+=n.substring(o,c),s+="\0";break;case"":s+=n.substring(o,c+1);break;default:qt(61167,{path:n})}o=c+2}return new Ve(i)}const Bf="remoteDocuments",R_="owner",Dm="owner",s_="mutationQueues",FP="userId",Fo="mutations",g3="batchId",Yf="userMutationsIndex",_3=["userId","batchId"];function U1(n,t){return[n,Qs(t)]}function sR(n,t,e){return[n,Qs(t),e]}const jP={},op="documentMutations",sv="remoteDocumentsV14",KP=["prefixPath","collectionGroup","readTime","documentId"],z1="documentKeyIndex",YP=["prefixPath","collectionGroup","documentId"],aR="collectionGroupIndex",QP=["collectionGroup","readTime","prefixPath","documentId"],a_="remoteDocumentGlobal",TT="remoteDocumentGlobalKey",lp="targets",rR="queryTargetsIndex",XP=["canonicalId","targetId"],up="targetDocuments",JP=["targetId","path"],CS="documentTargetsIndex",WP=["path","targetId"],av="targetGlobalKey",Zf="targetGlobal",r_="collectionParents",ZP=["collectionId","parent"],cp="clientMetadata",$P="clientId",Fv="bundles",tV="bundleId",jv="namedQueries",eV="name",IS="indexConfiguration",nV="indexId",ST="collectionGroupIndex",iV="collectionGroup",B0="indexState",sV=["indexId","uid"],oR="sequenceNumberIndex",aV=["uid","sequenceNumber"],G0="indexEntries",rV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lR="documentKeyIndex",oV=["indexId","uid","orderedDocumentKey"],Kv="documentOverlays",lV=["userId","collectionPath","documentId"],bT="collectionPathOverlayIndex",uV=["userId","collectionPath","largestBatchId"],uR="collectionGroupOverlayIndex",cV=["userId","collectionGroup","largestBatchId"],NS="globals",hV="name",cR=[s_,Fo,op,Bf,lp,R_,Zf,up,cp,a_,r_,Fv,jv],fV=[...cR,Kv],hR=[s_,Fo,op,sv,lp,R_,Zf,up,cp,a_,r_,Fv,jv,Kv],fR=hR,DS=[...fR,IS,B0,G0],dV=DS,dR=[...DS,NS],mV=dR;class AT extends eR{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Zi(n,t){const e=Bt(n);return Yl.O(e.le,t)}function y3(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Fh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function mR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Cn{constructor(t,e){this.comparator=t,this.root=e||As.EMPTY}insert(t,e){return new Cn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,As.BLACK,null,null))}remove(t){return new Cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,As.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new A1(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new A1(this.root,t,this.comparator,!1)}getReverseIterator(){return new A1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new A1(this.root,t,this.comparator,!0)}}class A1{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class As{constructor(t,e,i,s,o){this.key=t,this.value=e,this.color=i??As.RED,this.left=s??As.EMPTY,this.right=o??As.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,o){return new As(t??this.key,e??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,i),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return As.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw qt(27949);return t+(this.isRed()?0:1)}}As.EMPTY=null,As.RED=!0,As.BLACK=!1;As.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(t,e,i,s,o){return this}insert(t,e,i){return new As(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(t){this.comparator=t,this.data=new Cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new v3(this.data.getIterator())}getIteratorFrom(t){return new v3(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof an)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new an(this.comparator);return e.data=t,e}}class v3{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xm(n){return n.hasNext()?n.getNext():void 0}class Wa{constructor(t){this.fields=t,t.sort(Yn.comparator)}static empty(){return new Wa([])}unionWith(t){let e=new an(Yn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Wa(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ap(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class pR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function pV(){return typeof atob<"u"}class fi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pR("Invalid base64 string: "+o):o}})(t);return new fi(e)}static fromUint8Array(t){const e=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(t);return new fi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const gV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ju(n){if(Qt(!!n,39018),typeof n=="string"){let t=0;const e=gV.exec(n);if(Qt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wu(n){return typeof n=="string"?fi.fromBase64String(n):fi.fromUint8Array(n)}const gR="server_timestamp",_R="__type__",yR="__previous_value__",vR="__local_write_time__";function Yv(n){return(n?.mapValue?.fields||{})[_R]?.stringValue===gR}function Qv(n){const t=n.mapValue.fields[yR];return Yv(t)?Qv(t):t}function o_(n){const t=Ju(n.mapValue.fields[vR].timestampValue);return new en(t.seconds,t.nanos)}class _V{constructor(t,e,i,s,o,c,f,m,g,E,b){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=E,this.apiKey=b}}const wT="(default)";class xh{constructor(t,e){this.projectId=t,this.database=e||wT}static empty(){return new xh("","")}get isDefaultDatabase(){return this.database===wT}isEqual(t){return t instanceof xh&&t.projectId===this.projectId&&t.database===this.database}}function yV(n,t){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Tt(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(n.options.projectId,t)}const xS="__type__",ER="__max__",Eh={mapValue:{fields:{__type__:{stringValue:ER}}}},OS="__vector__",hp="value",B1={nullValue:"NULL_VALUE"};function Oh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yv(n)?4:TR(n)?9007199254740991:Xv(n)?10:11:qt(28295,{value:n})}function Wl(n,t){if(n===t)return!0;const e=Oh(n);if(e!==Oh(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return o_(n).isEqual(o_(t));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Ju(s.timestampValue),f=Ju(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,o){return Wu(s.bytesValue).isEqual(Wu(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,o){return Kn(s.geoPointValue.latitude)===Kn(o.geoPointValue.latitude)&&Kn(s.geoPointValue.longitude)===Kn(o.geoPointValue.longitude)})(n,t);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Kn(s.integerValue)===Kn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Kn(s.doubleValue),f=Kn(o.doubleValue);return c===f?i_(c)===i_(f):isNaN(c)&&isNaN(f)}return!1})(n,t);case 9:return ap(n.arrayValue.values||[],t.arrayValue.values||[],Wl);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},f=o.mapValue.fields||{};if(y3(c)!==y3(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Wl(c[m],f[m])))return!1;return!0})(n,t);default:return qt(52216,{left:n})}}function l_(n,t){return(n.values||[]).find((e=>Wl(e,t)))!==void 0}function Mh(n,t){if(n===t)return 0;const e=Oh(n),i=Oh(t);if(e!==i)return le(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const f=Kn(o.integerValue||o.doubleValue),m=Kn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,t);case 3:return E3(n.timestampValue,t.timestampValue);case 4:return E3(o_(n),o_(t));case 5:return vT(n.stringValue,t.stringValue);case 6:return(function(o,c){const f=Wu(o),m=Wu(c);return f.compareTo(m)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const f=o.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const E=le(f[g],m[g]);if(E!==0)return E}return le(f.length,m.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const f=le(Kn(o.latitude),Kn(c.latitude));return f!==0?f:le(Kn(o.longitude),Kn(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return T3(n.arrayValue,t.arrayValue);case 10:return(function(o,c){const f=o.fields||{},m=c.fields||{},g=f[hp]?.arrayValue,E=m[hp]?.arrayValue,b=le(g?.values?.length||0,E?.values?.length||0);return b!==0?b:T3(g,E)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===Eh.mapValue&&c===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(c===Eh.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),g=c.fields||{},E=Object.keys(g);m.sort(),E.sort();for(let b=0;b<m.length&&b<E.length;++b){const A=vT(m[b],E[b]);if(A!==0)return A;const N=Mh(f[m[b]],g[E[b]]);if(N!==0)return N}return le(m.length,E.length)})(n.mapValue,t.mapValue);default:throw qt(23264,{he:e})}}function E3(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return le(n,t);const e=Ju(n),i=Ju(t),s=le(e.seconds,i.seconds);return s!==0?s:le(e.nanos,i.nanos)}function T3(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const o=Mh(e[s],i[s]);if(o)return o}return le(e.length,i.length)}function fp(n){return RT(n)}function RT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=Ju(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Wu(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return kt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(const o of e.values||[])s?s=!1:i+=",",i+=RT(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${RT(e.fields[c])}`;return s+"}"})(n.mapValue):qt(61005,{value:n})}function G1(n){switch(Oh(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qv(n);return t?16+G1(t):16;case 5:return 2*n.stringValue.length;case 6:return Wu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+G1(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Fh(i.fields,((o,c)=>{s+=o.length+G1(c)})),s})(n.mapValue);default:throw qt(13486,{value:n})}}function id(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function CT(n){return!!n&&"integerValue"in n}function u_(n){return!!n&&"arrayValue"in n}function S3(n){return!!n&&"nullValue"in n}function b3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function q1(n){return!!n&&"mapValue"in n}function Xv(n){return(n?.mapValue?.fields||{})[xS]?.stringValue===OS}function q0(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Fh(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=q0(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=q0(n.arrayValue.values[e]);return t}return{...n}}function TR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ER}const SR={mapValue:{fields:{[xS]:{stringValue:OS},[hp]:{arrayValue:{}}}}};function vV(n){return"nullValue"in n?B1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?id(xh.empty(),kt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Xv(n)?SR:{mapValue:{}}:qt(35942,{value:n})}function EV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?id(xh.empty(),kt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?SR:"mapValue"in n?Xv(n)?{mapValue:{}}:Eh:qt(61959,{value:n})}function A3(n,t){const e=Mh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function w3(n,t){const e=Mh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class ws{constructor(t){this.value=t}static empty(){return new ws({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!q1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=q0(e)}setAll(t){let e=Yn.emptyPath(),i={},s=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=f.popLast()}c?i[f.lastSegment()]=q0(c):s.push(f.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,s)}delete(t){const e=this.field(t.popLast());q1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Wl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];q1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Fh(e,((s,o)=>t[s]=o));for(const s of i)delete t[s]}clone(){return new ws(q0(this.value))}}function bR(n){const t=[];return Fh(n.fields,((e,i)=>{const s=new Yn([e]);if(q1(i)){const o=bR(i.mapValue).fields;if(o.length===0)t.push(s);else for(const c of o)t.push(s.child(c))}else t.push(s)})),new Wa(t)}class Un{constructor(t,e,i,s,o,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(t){return new Un(t,0,Wt.min(),Wt.min(),Wt.min(),ws.empty(),0)}static newFoundDocument(t,e,i,s){return new Un(t,1,e,Wt.min(),i,s,0)}static newNoDocument(t,e){return new Un(t,2,e,Wt.min(),Wt.min(),ws.empty(),0)}static newUnknownDocument(t,e){return new Un(t,3,e,Wt.min(),Wt.min(),ws.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ws.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Un&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ph{constructor(t,e){this.position=t,this.inclusive=e}}function R3(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const o=t[s],c=n.position[s];if(o.field.isKeyField()?i=kt.comparator(kt.fromName(c.referenceValue),e.key):i=Mh(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function C3(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Wl(n.position[e],t.position[e]))return!1;return!0}class c_{constructor(t,e="asc"){this.field=t,this.dir=e}}function TV(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class AR{}class Ue extends AR{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new SV(t,e,i):e==="array-contains"?new wV(t,i):e==="in"?new DR(t,i):e==="not-in"?new RV(t,i):e==="array-contains-any"?new CV(t,i):new Ue(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new bV(t,i):new AV(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Mh(e,this.value)):e!==null&&Oh(this.value)===Oh(e)&&this.matchesComparison(Mh(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends AR{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new sn(t,e)}matches(t){return dp(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dp(n){return n.op==="and"}function IT(n){return n.op==="or"}function MS(n){return wR(n)&&dp(n)}function wR(n){for(const t of n.filters)if(t instanceof sn)return!1;return!0}function NT(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+fp(n.value);if(MS(n))return n.filters.map((t=>NT(t))).join(",");{const t=n.filters.map((e=>NT(e))).join(",");return`${n.op}(${t})`}}function RR(n,t){return n instanceof Ue?(function(i,s){return s instanceof Ue&&i.op===s.op&&i.field.isEqual(s.field)&&Wl(i.value,s.value)})(n,t):n instanceof sn?(function(i,s){return s instanceof sn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,c,f)=>o&&RR(c,s.filters[f])),!0):!1})(n,t):void qt(19439)}function CR(n,t){const e=n.filters.concat(t);return sn.create(e,n.op)}function IR(n){return n instanceof Ue?(function(e){return`${e.field.canonicalString()} ${e.op} ${fp(e.value)}`})(n):n instanceof sn?(function(e){return e.op.toString()+" {"+e.getFilters().map(IR).join(" ,")+"}"})(n):"Filter"}class SV extends Ue{constructor(t,e,i){super(t,e,i),this.key=kt.fromName(i.referenceValue)}matches(t){const e=kt.comparator(t.key,this.key);return this.matchesComparison(e)}}class bV extends Ue{constructor(t,e){super(t,"in",e),this.keys=NR("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class AV extends Ue{constructor(t,e){super(t,"not-in",e),this.keys=NR("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function NR(n,t){return(t.arrayValue?.values||[]).map((e=>kt.fromName(e.referenceValue)))}class wV extends Ue{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return u_(e)&&l_(e.arrayValue,this.value)}}class DR extends Ue{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&l_(this.value.arrayValue,e)}}class RV extends Ue{constructor(t,e){super(t,"not-in",e)}matches(t){if(l_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!l_(this.value.arrayValue,e)}}class CV extends Ue{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!u_(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>l_(this.value.arrayValue,i)))}}class IV{constructor(t,e=null,i=[],s=[],o=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function DT(n,t=null,e=[],i=[],s=null,o=null,c=null){return new IV(n,t,e,i,s,o,c)}function sd(n){const t=Bt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>NT(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),w_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>fp(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>fp(i))).join(",")),t.Te=e}return t.Te}function C_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!TV(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!RR(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!C3(n.startAt,t.startAt)&&C3(n.endAt,t.endAt)}function rv(n){return kt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ov(n,t){return n.filters.filter((e=>e instanceof Ue&&e.field.isEqual(t)))}function I3(n,t,e){let i=B1,s=!0;for(const o of ov(n,t)){let c=B1,f=!0;switch(o.op){case"<":case"<=":c=vV(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,f=!1;break;case"!=":case"not-in":c=B1}A3({value:i,inclusive:s},{value:c,inclusive:f})<0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];A3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})<0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}function N3(n,t,e){let i=Eh,s=!0;for(const o of ov(n,t)){let c=Eh,f=!0;switch(o.op){case">=":case">":c=EV(o.value),f=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,f=!1;break;case"!=":case"not-in":c=Eh}w3({value:i,inclusive:s},{value:c,inclusive:f})>0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];w3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})>0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}class ic{constructor(t,e=null,i=[],s=[],o=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function xR(n,t,e,i,s,o,c,f){return new ic(n,t,e,i,s,o,c,f)}function xp(n){return new ic(n)}function D3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NV(n){return kt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function PS(n){return n.collectionGroup!==null}function Ym(n){const t=Bt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new an(Yn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new c_(o,i))})),e.has(Yn.keyField().canonicalString())||t.Ie.push(new c_(Yn.keyField(),i))}return t.Ie}function _a(n){const t=Bt(n);return t.Ee||(t.Ee=DV(t,Ym(n))),t.Ee}function DV(n,t){if(n.limitType==="F")return DT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new c_(s.field,o)}));const e=n.endAt?new Ph(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ph(n.startAt.position,n.startAt.inclusive):null;return DT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function xT(n,t){const e=n.filters.concat([t]);return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function xV(n,t){const e=n.explicitOrderBy.concat([t]);return new ic(n.path,n.collectionGroup,e,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function lv(n,t,e){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function OV(n,t){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,t,n.endAt)}function MV(n,t){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,t)}function I_(n,t){return C_(_a(n),_a(t))&&n.limitType===t.limitType}function OR(n){return`${sd(_a(n))}|lt:${n.limitType}`}function zm(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>IR(s))).join(", ")}]`),w_(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>fp(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>fp(s))).join(",")),`Target(${i})`})(_a(n))}; limitType=${n.limitType})`}function N_(n,t){return t.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):kt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,s){for(const o of Ym(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(c,f,m){const g=R3(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,Ym(i),s)||i.endAt&&!(function(c,f,m){const g=R3(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,Ym(i),s))})(n,t)}function MR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PR(n){return(t,e)=>{let i=!1;for(const s of Ym(n)){const o=PV(s,t,e);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function PV(n,t,e){const i=n.field.isKeyField()?kt.comparator(t.key,e.key):(function(o,c,f){const m=c.data.field(o),g=f.data.field(o);return m!==null&&g!==null?Mh(m,g):qt(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qt(19790,{direction:n.dir})}}class sc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Fh(this.inner,((e,i)=>{for(const[s,o]of i)t(s,o)}))}isEmpty(){return mR(this.inner)}size(){return this.innerSize}}const VV=new Cn(kt.comparator);function Za(){return VV}const VR=new Cn(kt.comparator);function I0(...n){let t=VR;for(const e of n)t=t.insert(e.key,e);return t}function kR(n){let t=VR;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function jl(){return H0()}function LR(){return H0()}function H0(){return new sc((n=>n.toString()),((n,t)=>n.isEqual(t)))}const kV=new Cn(kt.comparator),LV=new an(kt.comparator);function ye(...n){let t=LV;for(const e of n)t=t.add(e);return t}const UV=new an(le);function VS(){return UV}function kS(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:i_(t)?"-0":t}}function UR(n){return{integerValue:""+n}}function zR(n,t){return iR(t)?UR(t):kS(n,t)}class Jv{constructor(){this._=void 0}}function zV(n,t,e){return n instanceof mp?(function(s,o){const c={fields:{[_R]:{stringValue:gR},[vR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Yv(o)&&(o=Qv(o)),o&&(c.fields[yR]=o),{mapValue:c}})(e,t):n instanceof ad?GR(n,t):n instanceof rd?qR(n,t):(function(s,o){const c=BR(s,o),f=x3(c)+x3(s.Ae);return CT(c)&&CT(s.Ae)?UR(f):kS(s.serializer,f)})(n,t)}function BV(n,t,e){return n instanceof ad?GR(n,t):n instanceof rd?qR(n,t):e}function BR(n,t){return n instanceof pp?(function(i){return CT(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class mp extends Jv{}class ad extends Jv{constructor(t){super(),this.elements=t}}function GR(n,t){const e=HR(t);for(const i of n.elements)e.some((s=>Wl(s,i)))||e.push(i);return{arrayValue:{values:e}}}class rd extends Jv{constructor(t){super(),this.elements=t}}function qR(n,t){let e=HR(t);for(const i of n.elements)e=e.filter((s=>!Wl(s,i)));return{arrayValue:{values:e}}}class pp extends Jv{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function x3(n){return Kn(n.integerValue||n.doubleValue)}function HR(n){return u_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D_{constructor(t,e){this.field=t,this.transform=e}}function GV(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof ad&&s instanceof ad||i instanceof rd&&s instanceof rd?ap(i.elements,s.elements,Wl):i instanceof pp&&s instanceof pp?Wl(i.Ae,s.Ae):i instanceof mp&&s instanceof mp})(n.transform,t.transform)}class qV{constructor(t,e){this.version=t,this.transformResults=e}}class Qn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Qn}static exists(t){return new Qn(void 0,t)}static updateTime(t){return new Qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function H1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Wv{}function FR(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Mp(n.key,Qn.none()):new Op(n.key,n.data,Qn.none());{const e=n.data,i=ws.empty();let s=new an(Yn.comparator);for(let o of t.fields)if(!s.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new ac(n.key,i,new Wa(s.toArray()),Qn.none())}}function HV(n,t,e){n instanceof Op?(function(s,o,c){const f=s.value.clone(),m=M3(s.fieldTransforms,o,c.transformResults);f.setAll(m),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):n instanceof ac?(function(s,o,c){if(!H1(s.precondition,o))return void o.convertToUnknownDocument(c.version);const f=M3(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(jR(s)),m.setAll(f),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function F0(n,t,e,i){return n instanceof Op?(function(o,c,f,m){if(!H1(o.precondition,c))return f;const g=o.value.clone(),E=P3(o.fieldTransforms,m,c);return g.setAll(E),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof ac?(function(o,c,f,m){if(!H1(o.precondition,c))return f;const g=P3(o.fieldTransforms,m,c),E=c.data;return E.setAll(jR(o)),E.setAll(g),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,t,e,i):(function(o,c,f){return H1(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,t,e)}function FV(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),o=BR(i.transform,s||null);o!=null&&(e===null&&(e=ws.empty()),e.set(i.field,o))}return e||null}function O3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ap(i,s,((o,c)=>GV(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Op extends Wv{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ac extends Wv{constructor(t,e,i,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jR(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function M3(n,t,e){const i=new Map;Qt(n.length===e.length,32656,{Ve:e.length,de:n.length});for(let s=0;s<e.length;s++){const o=n[s],c=o.transform,f=t.data.field(o.field);i.set(o.field,BV(c,f,e[s]))}return i}function P3(n,t,e){const i=new Map;for(const s of n){const o=s.transform,c=e.data.field(s.field);i.set(s.field,zV(o,c,t))}return i}class Mp extends Wv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LS extends Wv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class US{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&HV(o,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=F0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=F0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=LR();return this.mutations.forEach((s=>{const o=t.get(s.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=e.has(s.key)?null:f;const m=FR(c,f);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Wt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ye())}isEqual(t){return this.batchId===t.batchId&&ap(this.mutations,t.mutations,((e,i)=>O3(e,i)))&&ap(this.baseMutations,t.baseMutations,((e,i)=>O3(e,i)))}}class zS{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Qt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=(function(){return kV})();const o=t.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new zS(t,e,i,s)}}class BS{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class jV{constructor(t,e){this.count=t,this.unchangedNames=e}}var Vi,qe;function KR(n){switch(n){case ft.OK:return qt(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return qt(15467,{code:n})}}function YR(n){if(n===void 0)return Ei("GRPC error has no .code"),ft.UNKNOWN;switch(n){case Vi.OK:return ft.OK;case Vi.CANCELLED:return ft.CANCELLED;case Vi.UNKNOWN:return ft.UNKNOWN;case Vi.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case Vi.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case Vi.INTERNAL:return ft.INTERNAL;case Vi.UNAVAILABLE:return ft.UNAVAILABLE;case Vi.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case Vi.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case Vi.NOT_FOUND:return ft.NOT_FOUND;case Vi.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case Vi.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case Vi.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case Vi.ABORTED:return ft.ABORTED;case Vi.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case Vi.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case Vi.DATA_LOSS:return ft.DATA_LOSS;default:return qt(39323,{code:n})}}(qe=Vi||(Vi={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function QR(){return new TextEncoder}const KV=new bh([4294967295,4294967295],0);function V3(n){const t=QR().encode(n),e=new Bw;return e.update(t),new Uint8Array(e.digest())}function k3(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new bh([e,i],0),new bh([s,o],0)]}class GS{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new N0(`Invalid padding: ${e}`);if(i<0)throw new N0(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new N0(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new N0(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=bh.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(bh.fromNumber(i)));return s.compare(KV)===1&&(s=new bh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=V3(t),[i,s]=k3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new GS(o,s,e);return i.forEach((f=>c.insert(f))),c}insert(t){if(this.ge===0)return;const e=V3(t),[i,s]=k3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);this.be(c)}}be(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class N0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class x_{constructor(t,e,i,s,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,O_.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new x_(Wt.min(),s,new Cn(le),Za(),ye())}}class O_{constructor(t,e,i,s,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new O_(i,e,ye(),ye(),ye())}}class F1{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=s}}class XR{constructor(t,e){this.targetId=t,this.Ce=e}}class JR{constructor(t,e,i=fi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class L3{constructor(){this.ve=0,this.Fe=U3(),this.Me=fi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ye(),e=ye(),i=ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:qt(38017,{changeType:o})}})),new O_(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=U3()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class YV{constructor(t){this.Ge=t,this.ze=new Map,this.je=Za(),this.He=w1(),this.Je=w1(),this.Ze=new Cn(le)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:qt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const o=s.target;if(rv(o))if(i===0){const c=new kt(o.path);this.et(e,c,Un.newNoDocument(c,Wt.min()))}else Qt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const f=this.ut(t),m=f?this.ct(f,t,c):1;if(m!==0){this.it(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=e;let c,f;try{c=Wu(i).toUint8Array()}catch(m){if(m instanceof pR)return Xo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new GS(c,s,o)}catch(m){return Xo(m instanceof N0?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(f)||(this.et(e,o,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&rv(f.target)){const m=new kt(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Un.newNoDocument(m,t))}o.Be&&(e.set(c,o.ke()),o.Ke())}}));let i=ye();this.Je.forEach(((o,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const s=new x_(t,e,this.Ze,this.je,i);return this.je=Za(),this.He=w1(),this.Je=w1(),this.Ze=new Cn(le),s}Ye(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.qe(e,1):s.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new L3,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new an(le),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new an(le),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||bt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new L3),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function w1(){return new Cn(kt.comparator)}function U3(){return new Cn(kt.comparator)}const QV={asc:"ASCENDING",desc:"DESCENDING"},XV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JV={and:"AND",or:"OR"};class WV{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function OT(n,t){return n.useProto3Json||w_(t)?t:{value:t}}function gp(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WR(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function ZV(n,t){return gp(n,t.toTimestamp())}function Ti(n){return Qt(!!n,49232),Wt.fromTimestamp((function(e){const i=Ju(e);return new en(i.seconds,i.nanos)})(n))}function qS(n,t){return MT(n,t).canonicalString()}function MT(n,t){const e=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function ZR(n){const t=Ve.fromString(n);return Qt(lC(t),10190,{key:t.toString()}),t}function h_(n,t){return qS(n.databaseId,t.path)}function Ql(n,t){const e=ZR(t);if(e.get(1)!==n.databaseId.projectId)throw new Tt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Tt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new kt(eC(e))}function $R(n,t){return qS(n.databaseId,t)}function tC(n){const t=ZR(n);return t.length===4?Ve.emptyPath():eC(t)}function PT(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eC(n){return Qt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function z3(n,t,e){return{name:h_(n,t),fields:e.value.mapValue.fields}}function nC(n,t,e){const i=Ql(n,t.name),s=Ti(t.updateTime),o=t.createTime?Ti(t.createTime):Wt.min(),c=new ws({mapValue:{fields:t.fields}}),f=Un.newFoundDocument(i,s,o,c);return e&&f.setHasCommittedMutations(),e?f.setHasCommittedMutations():f}function $V(n,t){return"found"in t?(function(i,s){Qt(!!s.found,43571),s.found.name,s.found.updateTime;const o=Ql(i,s.found.name),c=Ti(s.found.updateTime),f=s.found.createTime?Ti(s.found.createTime):Wt.min(),m=new ws({mapValue:{fields:s.found.fields}});return Un.newFoundDocument(o,c,f,m)})(n,t):"missing"in t?(function(i,s){Qt(!!s.missing,3894),Qt(!!s.readTime,22933);const o=Ql(i,s.missing),c=Ti(s.readTime);return Un.newNoDocument(o,c)})(n,t):qt(7234,{result:t})}function tk(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:qt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=(function(g,E){return g.useProto3Json?(Qt(E===void 0||typeof E=="string",58123),fi.fromBase64String(E||"")):(Qt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),fi.fromUint8Array(E||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const E=g.code===void 0?ft.UNKNOWN:YR(g.code);return new Tt(E,g.message||"")})(c);e=new JR(i,s,o,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ql(n,i.document.name),o=Ti(i.document.updateTime),c=i.document.createTime?Ti(i.document.createTime):Wt.min(),f=new ws({mapValue:{fields:i.document.fields}}),m=Un.newFoundDocument(s,o,c,f),g=i.targetIds||[],E=i.removedTargetIds||[];e=new F1(g,E,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Ql(n,i.document),o=i.readTime?Ti(i.readTime):Wt.min(),c=Un.newNoDocument(s,o),f=i.removedTargetIds||[];e=new F1([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Ql(n,i.document),o=i.removedTargetIds||[];e=new F1([],o,s,null)}else{if(!("filter"in t))return qt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new jV(s,o),f=i.targetId;e=new XR(f,c)}}return e}function f_(n,t){let e;if(t instanceof Op)e={update:z3(n,t.key,t.value)};else if(t instanceof Mp)e={delete:h_(n,t.key)};else if(t instanceof ac)e={update:z3(n,t.key,t.data),updateMask:rk(t.fieldMask)};else{if(!(t instanceof LS))return qt(16599,{dt:t.type});e={verify:h_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const f=c.transform;if(f instanceof mp)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ad)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof rd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pp)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw qt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:ZV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:qt(27497)})(n,t.precondition)),e}function VT(n,t){const e=t.currentDocument?(function(o){return o.updateTime!==void 0?Qn.updateTime(Ti(o.updateTime)):o.exists!==void 0?Qn.exists(o.exists):Qn.none()})(t.currentDocument):Qn.none(),i=t.updateTransforms?t.updateTransforms.map((s=>(function(c,f){let m=null;if("setToServerValue"in f)Qt(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new mp;else if("appendMissingElements"in f){const E=f.appendMissingElements.values||[];m=new ad(E)}else if("removeAllFromArray"in f){const E=f.removeAllFromArray.values||[];m=new rd(E)}else"increment"in f?m=new pp(c,f.increment):qt(16584,{proto:f});const g=Yn.fromServerFormat(f.fieldPath);return new D_(g,m)})(n,s))):[];if(t.update){t.update.name;const s=Ql(n,t.update.name),o=new ws({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Wa(g.map((E=>Yn.fromServerFormat(E))))})(t.updateMask);return new ac(s,o,c,e,i)}return new Op(s,o,e,i)}if(t.delete){const s=Ql(n,t.delete);return new Mp(s,e)}if(t.verify){const s=Ql(n,t.verify);return new LS(s,e)}return qt(1463,{proto:t})}function ek(n,t){return n&&n.length>0?(Qt(t!==void 0,14353),n.map((e=>(function(s,o){let c=s.updateTime?Ti(s.updateTime):Ti(o);return c.isEqual(Wt.min())&&(c=Ti(o)),new qV(c,s.transformResults||[])})(e,t)))):[]}function iC(n,t){return{documents:[$R(n,t.path)]}}function sC(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=$R(n,s);const o=(function(g){if(g.length!==0)return oC(sn.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(g){if(g.length!==0)return g.map((E=>(function(A){return{field:Bm(A.field),direction:ik(A.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=OT(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:s}}function aC(n){let t=tC(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Qt(i===1,65062);const E=e.from[0];E.allDescendants?s=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=(function(b){const A=rC(b);return A instanceof sn&&MS(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(b){return b.map((A=>(function(D){return new c_(Gm(D.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(A)))})(e.orderBy));let f=null;e.limit&&(f=(function(b){let A;return A=typeof b=="object"?b.value:b,w_(A)?null:A})(e.limit));let m=null;e.startAt&&(m=(function(b){const A=!!b.before,N=b.values||[];return new Ph(N,A)})(e.startAt));let g=null;return e.endAt&&(g=(function(b){const A=!b.before,N=b.values||[];return new Ph(N,A)})(e.endAt)),xR(t,s,c,o,f,"F",m,g)}function nk(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qt(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function rC(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Gm(e.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Gm(e.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gm(e.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gm(e.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qt(61313);default:return qt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ue.create(Gm(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qt(58110);default:return qt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return sn.create(e.compositeFilter.filters.map((i=>rC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qt(1026)}})(e.compositeFilter.op))})(n):qt(30097,{filter:n})}function ik(n){return QV[n]}function sk(n){return XV[n]}function ak(n){return JV[n]}function Bm(n){return{fieldPath:n.canonicalString()}}function Gm(n){return Yn.fromServerFormat(n.fieldPath)}function oC(n){return n instanceof Ue?(function(e){if(e.op==="=="){if(b3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NAN"}};if(S3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(b3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NOT_NAN"}};if(S3(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bm(e.field),op:sk(e.op),value:e.value}}})(n):n instanceof sn?(function(e){const i=e.getFilters().map((s=>oC(s)));return i.length===1?i[0]:{compositeFilter:{op:ak(e.op),filters:i}}})(n):qt(54877,{filter:n})}function rk(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function lC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function uC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Hu{constructor(t,e,i,s,o=Wt.min(),c=Wt.min(),f=fi.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new Hu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class cC{constructor(t){this.yt=t}}function ok(n,t){let e;if(t.document)e=nC(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=kt.fromSegments(t.noDocument.path),s=ld(t.noDocument.readTime);e=Un.newNoDocument(i,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return qt(56709);{const i=kt.fromSegments(t.unknownDocument.path),s=ld(t.unknownDocument.version);e=Un.newUnknownDocument(i,s)}}return t.readTime&&e.setReadTime((function(s){const o=new en(s[0],s[1]);return Wt.fromTimestamp(o)})(t.readTime)),e}function B3(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:uv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=(function(o,c){return{name:h_(o,c.key),fields:c.data.value.mapValue.fields,updateTime:gp(o,c.version.toTimestamp()),createTime:gp(o,c.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:od(t.version)};else{if(!t.isUnknownDocument())return qt(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:od(t.version)}}return i}function uv(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function od(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ld(n){const t=new en(n.seconds,n.nanoseconds);return Wt.fromTimestamp(t)}function qf(n,t){const e=(t.baseMutations||[]).map((o=>VT(n.yt,o)));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){const f=t.mutations[o+1];c.updateTransforms=f.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const i=t.mutations.map((o=>VT(n.yt,o))),s=en.fromMillis(t.localWriteTimeMs);return new US(t.batchId,s,e,i)}function D0(n){const t=ld(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?ld(n.lastLimboFreeSnapshotVersion):Wt.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Qt(c===1,1966,{count:c}),_a(xp(tC(o.documents[0])))})(n.query):(function(o){return _a(aC(o))})(n.query),new Hu(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,fi.fromBase64String(n.resumeToken))}function hC(n,t){const e=od(t.snapshotVersion),i=od(t.lastLimboFreeSnapshotVersion);let s;s=rv(t.target)?iC(n.yt,t.target):sC(n.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:sd(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function HS(n){const t=aC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lv(t,t.limit,"L"):t}function OE(n,t){return new BS(t.largestBatchId,VT(n.yt,t.overlayMutation))}function G3(n,t){const e=t.path.lastSegment();return[n,Qs(t.path.popLast()),e]}function q3(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:od(i.readTime),documentKey:Qs(i.documentKey.path),largestBatchId:i.largestBatchId}}class lk{getBundleMetadata(t,e){return H3(t).get(e).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:ld(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(t,e){return H3(t).put((function(s){return{bundleId:s.id,createTime:od(Ti(s.createTime)),version:s.version}})(e))}getNamedQuery(t,e){return F3(t).get(e).next((i=>{if(i)return(function(o){return{name:o.name,query:HS(o.bundledQuery),readTime:ld(o.readTime)}})(i)}))}saveNamedQuery(t,e){return F3(t).put((function(s){return{name:s.name,readTime:od(Ti(s.readTime)),bundledQuery:s.bundledQuery}})(e))}}function H3(n){return Zi(n,Fv)}function F3(n){return Zi(n,jv)}class Zv{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new Zv(t,i)}getOverlay(t,e){return c0(t).get(G3(this.userId,e)).next((i=>i?OE(this.serializer,i):null))}getOverlays(t,e){const i=jl();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){const s=[];return i.forEach(((o,c)=>{const f=new BS(e,c);s.push(this.bt(t,f))})),it.waitFor(s)}removeOverlaysForBatchId(t,e,i){const s=new Set;e.forEach((c=>s.add(Qs(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(c0(t).X(bT,f))})),it.waitFor(o)}getOverlaysForCollection(t,e,i){const s=jl(),o=Qs(e),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return c0(t).H(bT,c).next((f=>{for(const m of f){const g=OE(this.serializer,m);s.set(g.getKey(),g)}return s}))}getOverlaysForCollectionGroup(t,e,i,s){const o=jl();let c;const f=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return c0(t).ee({index:uR,range:f},((m,g,E)=>{const b=OE(this.serializer,g);o.size()<s||b.largestBatchId===c?(o.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>o))}bt(t,e){return c0(t).put((function(s,o,c){const[f,m,g]=G3(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:f_(s.yt,c.mutation)}})(this.serializer,this.userId,e))}}function c0(n){return Zi(n,Kv)}class uk{St(t){return Zi(t,NS)}getSessionToken(t){return this.St(t).get("sessionToken").next((e=>{const i=e?.value;return i?fi.fromUint8Array(i):fi.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Hf{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Kn(t.integerValue));else if("doubleValue"in t){const i=Kn(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),i_(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=Ju(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Wu(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?TR(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Xv(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):qt(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){const i=t.fields||{};this.Ft(e,55);for(const s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){const i=t.fields||{};this.Ft(e,53);const s=hp,o=i[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(Kn(o)),this.Ot(s,e),this.Ct(i[s],e)}qt(t,e){const i=t.values||[];this.Ft(e,50);for(const s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),kt.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Hf.Wt=new Hf;const Om=255;function ck(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function j3(n){const t=64-(function(i){let s=0;for(let o=0;o<8;++o){const c=ck(255&i[o]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(t/8)}class hk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ht(i.value),i=e.next();this.Jt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const s=e.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(t){const e=this.en(t),i=j3(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),i=j3(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(Om),this.sn(255)}_n(){this.an(Om),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let s=1;s<e.length;++s)e[s]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Om?(this.sn(Om),this.sn(0)):this.sn(e)}Ht(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Om?(this.an(Om),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class fk{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class dk{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class h0{constructor(){this.cn=new hk,this.ascending=new fk(this.cn),this.descending=new dk(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ff{constructor(t,e,i,s){this.hn=t,this.Pn=e,this.Tn=i,this.In=s}En(){const t=this.In.length,e=t===0||this.In[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.In,0),e!==t?i.set([0],this.In.length):++i[i.length-1],new Ff(this.hn,this.Pn,this.Tn,i)}Rn(t,e,i){return{indexId:this.hn,uid:t,arrayValue:j1(this.Tn),directionalValue:j1(this.In),orderedDocumentKey:j1(e),documentKey:i.path.toArray()}}An(t,e,i){const s=this.Rn(t,e,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function hh(n,t){let e=n.hn-t.hn;return e!==0?e:(e=K3(n.Tn,t.Tn),e!==0?e:(e=K3(n.In,t.In),e!==0?e:kt.comparator(n.Pn,t.Pn)))}function K3(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}function j1(n){return Cw()?(function(e){let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return i})(n):n}function Y3(n){return typeof n!="string"?n:(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(n)}class Q3{constructor(t){this.Vn=new an(((e,i)=>Yn.comparator(e.field,i.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(t){if(Qt(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const e=ET(t);if(e!==void 0&&!this.pn(e))return!1;const i=zf(t);let s=new Set,o=0,c=0;for(;o<i.length&&this.pn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!s.has(f.field.canonicalString())){const m=i[o];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++o}for(;o<i.length;++o){const f=i[o];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let t=new an(Yn.comparator);const e=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new L1(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new L1(i.field,0))}for(const i of this.dn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new L1(i.field,i.dir==="asc"?0:1)));return new nv(nv.UNKNOWN_ID,this.collectionId,e,n_.empty())}pn(t){for(const e of this.mn)if(this.yn(e,t))return!0;return!1}yn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}wn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function fC(n){if(Qt(n instanceof Ue||n instanceof sn,20012),n instanceof Ue){if(n instanceof DR){const e=n.value.arrayValue?.values?.map((i=>Ue.create(n.field,"==",i)))||[];return sn.create(e,"or")}return n}const t=n.filters.map((e=>fC(e)));return sn.create(t,n.op)}function mk(n){if(n.getFilters().length===0)return[];const t=UT(fC(n));return Qt(dC(t),7391),kT(t)||LT(t)?[t]:t.getFilters()}function kT(n){return n instanceof Ue}function LT(n){return n instanceof sn&&MS(n)}function dC(n){return kT(n)||LT(n)||(function(e){if(e instanceof sn&&IT(e)){for(const i of e.getFilters())if(!kT(i)&&!LT(i))return!1;return!0}return!1})(n)}function UT(n){if(Qt(n instanceof Ue||n instanceof sn,34018),n instanceof Ue)return n;if(n.filters.length===1)return UT(n.filters[0]);const t=n.filters.map((i=>UT(i)));let e=sn.create(t,n.op);return e=cv(e),dC(e)?e:(Qt(e instanceof sn,64498),Qt(dp(e),40251),Qt(e.filters.length>1,57927),e.filters.reduce(((i,s)=>FS(i,s))))}function FS(n,t){let e;return Qt(n instanceof Ue||n instanceof sn,38388),Qt(t instanceof Ue||t instanceof sn,25473),e=n instanceof Ue?t instanceof Ue?(function(s,o){return sn.create([s,o],"and")})(n,t):X3(n,t):t instanceof Ue?X3(t,n):(function(s,o){if(Qt(s.filters.length>0&&o.filters.length>0,48005),dp(s)&&dp(o))return CR(s,o.getFilters());const c=IT(s)?s:o,f=IT(s)?o:s,m=c.filters.map((g=>FS(g,f)));return sn.create(m,"or")})(n,t),cv(e)}function X3(n,t){if(dp(t))return CR(t,n.getFilters());{const e=t.filters.map((i=>FS(n,i)));return sn.create(e,"or")}}function cv(n){if(Qt(n instanceof Ue||n instanceof sn,11850),n instanceof Ue)return n;const t=n.getFilters();if(t.length===1)return cv(t[0]);if(wR(n))return n;const e=t.map((s=>cv(s))),i=[];return e.forEach((s=>{s instanceof Ue?i.push(s):s instanceof sn&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:sn.create(i,n.op)}class pk{constructor(){this.Sn=new jS}addToCollectionParentIndex(t,e){return this.Sn.add(e),it.resolve()}getCollectionParents(t,e){return it.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return it.resolve()}deleteFieldIndex(t,e){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,e){return it.resolve()}getDocumentsMatchingTarget(t,e){return it.resolve(null)}getIndexType(t,e){return it.resolve(0)}getFieldIndexes(t,e){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,e){return it.resolve(Rr.min())}getMinOffsetFromCollectionGroup(t,e){return it.resolve(Rr.min())}updateCollectionGroup(t,e,i){return it.resolve()}updateIndexEntries(t,e){return it.resolve()}}class jS{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new an(Ve.comparator),o=!s.has(i);return this.index[e]=s.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new an(Ve.comparator)).toArray()}}const J3="IndexedDbIndexManager",R1=new Uint8Array(0);class gk{constructor(t,e){this.databaseId=e,this.Dn=new jS,this.Cn=new sc((i=>sd(i)),((i,s)=>C_(i,s))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Dn.has(e)){const i=e.lastSegment(),s=e.popLast();t.addOnCommittedListener((()=>{this.Dn.add(e)}));const o={collectionId:i,parent:Qs(s)};return W3(t).put(o)}return it.resolve()}getCollectionParents(t,e){const i=[],s=IDBKeyRange.bound([e,""],[Qw(e),""],!1,!0);return W3(t).H(s).next((o=>{for(const c of o){if(c.collectionId!==e)break;i.push(Fl(c.parent))}return i}))}addFieldIndex(t,e){const i=f0(t),s=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(e);delete s.indexId;const o=i.add(s);if(e.indexState){const c=Pm(t);return o.next((f=>{c.put(q3(f,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return o.next()}deleteFieldIndex(t,e){const i=f0(t),s=Pm(t),o=Mm(t);return i.delete(e.indexId).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=f0(t),i=Mm(t),s=Pm(t);return e.X().next((()=>i.X())).next((()=>s.X()))}createTargetIndexes(t,e){return it.forEach(this.vn(e),(i=>this.getIndexType(t,i).next((s=>{if(s===0||s===1){const o=new Q3(i).bn();if(o!=null)return this.addFieldIndex(t,o)}}))))}getDocumentsMatchingTarget(t,e){const i=Mm(t);let s=!0;const o=new Map;return it.forEach(this.vn(e),(c=>this.Fn(t,c).next((f=>{s&&(s=!!f),o.set(c,f)})))).next((()=>{if(s){let c=ye();const f=[];return it.forEach(o,((m,g)=>{bt(J3,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(m)} to execute ${sd(e)}`);const E=(function(X,Z){const pt=ET(Z);if(pt===void 0)return null;for(const ot of ov(X,pt.fieldPath))switch(ot.op){case"array-contains-any":return ot.value.arrayValue.values||[];case"array-contains":return[ot.value]}return null})(g,m),b=(function(X,Z){const pt=new Map;for(const ot of zf(Z))for(const V of ov(X,ot.fieldPath))switch(V.op){case"==":case"in":pt.set(ot.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return pt.set(ot.fieldPath.canonicalString(),V.value),Array.from(pt.values())}return null})(g,m),A=(function(X,Z){const pt=[];let ot=!0;for(const V of zf(Z)){const M=V.kind===0?I3(X,V.fieldPath,X.startAt):N3(X,V.fieldPath,X.startAt);pt.push(M.value),ot&&(ot=M.inclusive)}return new Ph(pt,ot)})(g,m),N=(function(X,Z){const pt=[];let ot=!0;for(const V of zf(Z)){const M=V.kind===0?N3(X,V.fieldPath,X.endAt):I3(X,V.fieldPath,X.endAt);pt.push(M.value),ot&&(ot=M.inclusive)}return new Ph(pt,ot)})(g,m),D=this.Mn(m,g,A),k=this.Mn(m,g,N),U=this.xn(m,g,b),j=this.On(m.indexId,E,D,A.inclusive,k,N.inclusive,U);return it.forEach(j,(K=>i.Z(K,e.limit).next((X=>{X.forEach((Z=>{const pt=kt.fromSegments(Z.documentKey);c.has(pt)||(c=c.add(pt),f.push(pt))}))}))))})).next((()=>f))}return it.resolve(null)}))}vn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=mk(sn.create(t.filters,"and")).map((i=>DT(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,e),e)}On(t,e,i,s,o,c,f){const m=(e!=null?e.length:1)*Math.max(i.length,o.length),g=m/(e!=null?e.length:1),E=[];for(let b=0;b<m;++b){const A=e?this.Nn(e[b/g]):R1,N=this.Bn(t,A,i[b%g],s),D=this.Ln(t,A,o[b%g],c),k=f.map((U=>this.Bn(t,A,U,!0)));E.push(...this.createRange(N,D,k))}return E}Bn(t,e,i,s){const o=new Ff(t,kt.empty(),e,i);return s?o:o.En()}Ln(t,e,i,s){const o=new Ff(t,kt.empty(),e,i);return s?o.En():o}Fn(t,e){const i=new Q3(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next((o=>{let c=null;for(const f of o)i.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(t,e){let i=2;const s=this.vn(e);return it.forEach(s,(o=>this.Fn(t,o).next((c=>{c?i!==0&&c.fields.length<(function(m){let g=new an(Yn.comparator),E=!1;for(const b of m.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:g=g.add(A.field));for(const b of m.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(E?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(e)&&s.length>1&&i===2?1:i))}kn(t,e){const i=new h0;for(const s of zf(t)){const o=e.data.field(s.fieldPath);if(o==null)return null;const c=i.ln(s.kind);Hf.Wt.Dt(o,c)}return i.un()}Nn(t){const e=new h0;return Hf.Wt.Dt(t,e.ln(0)),e.un()}Kn(t,e){const i=new h0;return Hf.Wt.Dt(id(this.databaseId,e),i.ln((function(o){const c=zf(o);return c.length===0?0:c[c.length-1].kind})(t))),i.un()}xn(t,e,i){if(i===null)return[];let s=[];s.push(new h0);let o=0;for(const c of zf(t)){const f=i[o++];for(const m of s)if(this.qn(e,c.fieldPath)&&u_(f))s=this.Un(s,c,f);else{const g=m.ln(c.kind);Hf.Wt.Dt(f,g)}}return this.$n(s)}Mn(t,e,i){return this.xn(t,e,i.position)}$n(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Un(t,e,i){const s=[...t],o=[];for(const c of i.arrayValue.values||[])for(const f of s){const m=new h0;m.seed(f.un()),Hf.Wt.Dt(c,m.ln(e.kind)),o.push(m)}return o}qn(t,e){return!!t.filters.find((i=>i instanceof Ue&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(t,e){const i=f0(t),s=Pm(t);return(e?i.H(ST,IDBKeyRange.bound(e,e)):i.H()).next((o=>{const c=[];return it.forEach(o,(f=>s.get([f.indexId,this.uid]).next((m=>{c.push((function(E,b){const A=b?new n_(b.sequenceNumber,new Rr(ld(b.readTime),new kt(Fl(b.documentKey)),b.largestBatchId)):n_.empty(),N=E.fields.map((([D,k])=>new L1(Yn.fromServerFormat(D),k)));return new nv(E.indexId,E.collectionGroup,N,A)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:le(i.collectionGroup,s.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,i){const s=f0(t),o=Pm(t);return this.Wn(t).next((c=>s.H(ST,IDBKeyRange.bound(e,e)).next((f=>it.forEach(f,(m=>o.put(q3(m.indexId,this.uid,c,i))))))))}updateIndexEntries(t,e){const i=new Map;return it.forEach(e,((s,o)=>{const c=i.get(s.collectionGroup);return(c?it.resolve(c):this.getFieldIndexes(t,s.collectionGroup)).next((f=>(i.set(s.collectionGroup,f),it.forEach(f,(m=>this.Qn(t,s,m).next((g=>{const E=this.Gn(o,m);return g.isEqual(E)?it.resolve():this.zn(t,o,m,g,E)})))))))}))}jn(t,e,i,s){return Mm(t).put(s.Rn(this.uid,this.Kn(i,e.key),e.key))}Hn(t,e,i,s){return Mm(t).delete(s.An(this.uid,this.Kn(i,e.key),e.key))}Qn(t,e,i){const s=Mm(t);let o=new an(hh);return s.ee({index:lR,range:IDBKeyRange.only([i.indexId,this.uid,j1(this.Kn(i,e))])},((c,f)=>{o=o.add(new Ff(i.indexId,e,Y3(f.arrayValue),Y3(f.directionalValue)))})).next((()=>o))}Gn(t,e){let i=new an(hh);const s=this.kn(e,t);if(s==null)return i;const o=ET(e);if(o!=null){const c=t.data.field(o.fieldPath);if(u_(c))for(const f of c.arrayValue.values||[])i=i.add(new Ff(e.indexId,t.key,this.Nn(f),s))}else i=i.add(new Ff(e.indexId,t.key,R1,s));return i}zn(t,e,i,s,o){bt(J3,"Updating index entries for document '%s'",e.key);const c=[];return(function(m,g,E,b,A){const N=m.getIterator(),D=g.getIterator();let k=xm(N),U=xm(D);for(;k||U;){let j=!1,K=!1;if(k&&U){const X=E(k,U);X<0?K=!0:X>0&&(j=!0)}else k!=null?K=!0:j=!0;j?(b(U),U=xm(D)):K?(A(k),k=xm(N)):(k=xm(N),U=xm(D))}})(s,o,hh,(f=>{c.push(this.jn(t,e,i,f))}),(f=>{c.push(this.Hn(t,e,i,f))})),it.waitFor(c)}Wn(t){let e=1;return Pm(t).ee({index:oR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),e=s.sequenceNumber+1})).next((()=>e))}createRange(t,e,i){i=i.sort(((c,f)=>hh(c,f))).filter(((c,f,m)=>!f||hh(c,m[f-1])!==0));const s=[];s.push(t);for(const c of i){const f=hh(c,t),m=hh(c,e);if(f===0)s[0]=t.En();else if(f>0&&m<0)s.push(c),s.push(c.En());else if(m>0)break}s.push(e);const o=[];for(let c=0;c<s.length;c+=2){if(this.Jn(s[c],s[c+1]))return[];const f=s[c].An(this.uid,R1,kt.empty()),m=s[c+1].An(this.uid,R1,kt.empty());o.push(IDBKeyRange.bound(f,m))}return o}Jn(t,e){return hh(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Z3)}getMinOffset(t,e){return it.mapArray(this.vn(e),(i=>this.Fn(t,i).next((s=>s||qt(44426))))).next(Z3)}}function W3(n){return Zi(n,r_)}function Mm(n){return Zi(n,G0)}function f0(n){return Zi(n,IS)}function Pm(n){return Zi(n,B0)}function Z3(n){Qt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;wS(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Rr(t.readTime,t.documentKey,e)}const $3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mC=41943040;class js{static withCacheSize(t){return new js(t,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}function pC(n,t,e){const i=n.store(Fo),s=n.store(op),o=[],c=IDBKeyRange.only(e.batchId);let f=0;const m=i.ee({range:c},((E,b,A)=>(f++,A.delete())));o.push(m.next((()=>{Qt(f===1,47070,{batchId:e.batchId})})));const g=[];for(const E of e.mutations){const b=sR(t,E.key.path,e.batchId);o.push(s.delete(b)),g.push(E.key)}return it.waitFor(o).next((()=>g))}function hv(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw qt(14731);t=n.noDocument}return JSON.stringify(t).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(mC,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class $v{constructor(t,e,i,s){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=s,this.Zn={}}static wt(t,e,i,s){Qt(t.uid!=="",64387);const o=t.isAuthenticated()?t.uid:"";return new $v(o,e,i,s)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fh(t).ee({index:Yf,range:i},((s,o,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,i,s){const o=qm(t),c=fh(t);return c.add({}).next((f=>{Qt(typeof f=="number",49019);const m=new US(f,e,i,s),g=(function(N,D,k){const U=k.baseMutations.map((K=>f_(N.yt,K))),j=k.mutations.map((K=>f_(N.yt,K)));return{userId:D,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:U,mutations:j}})(this.serializer,this.userId,m),E=[];let b=new an(((A,N)=>le(A.canonicalString(),N.canonicalString())));for(const A of s){const N=sR(this.userId,A.key.path,f);b=b.add(A.key.path.popLast()),E.push(c.put(g)),E.push(o.put(N,jP))}return b.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(t,A))})),t.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),it.waitFor(E).next((()=>m))}))}lookupMutationBatch(t,e){return fh(t).get(e).next((i=>i?(Qt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),qf(this.serializer,i)):null))}Xn(t,e){return this.Zn[e]?it.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next((i=>{if(i){const s=i.keys();return this.Zn[e]=s,s}return null}))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return fh(t).ee({index:Yf,range:s},((c,f,m)=>{f.userId===this.userId&&(Qt(f.batchId>=i,47524,{Yn:i}),o=qf(this.serializer,f)),m.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ah;return fh(t).ee({index:Yf,range:e,reverse:!0},((s,o,c)=>{i=o.batchId,c.done()})).next((()=>i))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Ah],[this.userId,Number.POSITIVE_INFINITY]);return fh(t).H(Yf,e).next((i=>i.map((s=>qf(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=U1(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=[];return qm(t).ee({range:s},((c,f,m)=>{const[g,E,b]=c,A=Fl(E);if(g===this.userId&&e.path.isEqual(A))return fh(t).get(b).next((N=>{if(!N)throw qt(61480,{er:c,batchId:b});Qt(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:b}),o.push(qf(this.serializer,N))}));m.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new an(le);const s=[];return e.forEach((o=>{const c=U1(this.userId,o.path),f=IDBKeyRange.lowerBound(c),m=qm(t).ee({range:f},((g,E,b)=>{const[A,N,D]=g,k=Fl(N);A===this.userId&&o.path.isEqual(k)?i=i.add(D):b.done()}));s.push(m)})),it.waitFor(s).next((()=>this.tr(t,i)))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1,o=U1(this.userId,i),c=IDBKeyRange.lowerBound(o);let f=new an(le);return qm(t).ee({range:c},((m,g,E)=>{const[b,A,N]=m,D=Fl(A);b===this.userId&&i.isPrefixOf(D)?D.length===s&&(f=f.add(N)):E.done()})).next((()=>this.tr(t,f)))}tr(t,e){const i=[],s=[];return e.forEach((o=>{s.push(fh(t).get(o).next((c=>{if(c===null)throw qt(35274,{batchId:o});Qt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),i.push(qf(this.serializer,c))})))})),it.waitFor(s).next((()=>i))}removeMutationBatch(t,e){return pC(t.le,this.userId,e).next((i=>(t.addOnCommittedListener((()=>{this.nr(e.batchId)})),it.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return it.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return qm(t).ee({range:i},((o,c,f)=>{if(o[0]===this.userId){const m=Fl(o[1]);s.push(m)}else f.done()})).next((()=>{Qt(s.length===0,56720,{rr:s.map((o=>o.canonicalString()))})}))}))}containsKey(t,e){return gC(t,this.userId,e)}ir(t){return _C(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ah,lastStreamToken:""}))}}function gC(n,t,e){const i=U1(t,e.path),s=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return qm(n).ee({range:o,Y:!0},((f,m,g)=>{const[E,b,A]=f;E===t&&b===s&&(c=!0),g.done()})).next((()=>c))}function fh(n){return Zi(n,Fo)}function qm(n){return Zi(n,op)}function _C(n){return Zi(n,s_)}class ud{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new ud(0)}static ar(){return new ud(-1)}}class _k{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.ur(t).next((e=>{const i=new ud(e.highestTargetId);return e.highestTargetId=i.next(),this.cr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((e=>Wt.fromTimestamp(new en(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,i){return this.ur(t).next((s=>(s.highestListenSequenceNumber=e,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.cr(t,s))))}addTargetData(t,e){return this.lr(t,e).next((()=>this.ur(t).next((i=>(i.targetCount+=1,this.hr(e,i),this.cr(t,i))))))}updateTargetData(t,e){return this.lr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Vm(t).delete(e.targetId))).next((()=>this.ur(t))).next((i=>(Qt(i.targetCount>0,8065),i.targetCount-=1,this.cr(t,i))))}removeTargets(t,e,i){let s=0;const o=[];return Vm(t).ee(((c,f)=>{const m=D0(f);m.sequenceNumber<=e&&i.get(m.targetId)===null&&(s++,o.push(this.removeTargetData(t,m)))})).next((()=>it.waitFor(o))).next((()=>s))}forEachTarget(t,e){return Vm(t).ee(((i,s)=>{const o=D0(s);e(o)}))}ur(t){return t5(t).get(av).next((e=>(Qt(e!==null,2888),e)))}cr(t,e){return t5(t).put(av,e)}lr(t,e){return Vm(t).put(hC(this.serializer,e))}hr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.ur(t).next((e=>e.targetCount))}getTargetData(t,e){const i=sd(e),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Vm(t).ee({range:s,index:rR},((c,f,m)=>{const g=D0(f);C_(e,g.target)&&(o=g,m.done())})).next((()=>o))}addMatchingKeys(t,e,i){const s=[],o=vh(t);return e.forEach((c=>{const f=Qs(c.path);s.push(o.put({targetId:i,path:f})),s.push(this.referenceDelegate.addReference(t,i,c))})),it.waitFor(s)}removeMatchingKeys(t,e,i){const s=vh(t);return it.forEach(e,(o=>{const c=Qs(o.path);return it.waitFor([s.delete([i,c]),this.referenceDelegate.removeReference(t,i,o)])}))}removeMatchingKeysForTargetId(t,e){const i=vh(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),s=vh(t);let o=ye();return s.ee({range:i,Y:!0},((c,f,m)=>{const g=Fl(c[1]),E=new kt(g);o=o.add(E)})).next((()=>o))}containsKey(t,e){const i=Qs(e.path),s=IDBKeyRange.bound([i],[Qw(i)],!1,!0);let o=0;return vh(t).ee({index:CS,Y:!0,range:s},(([c,f],m,g)=>{c!==0&&(o++,g.done())})).next((()=>o>0))}At(t,e){return Vm(t).get(e).next((i=>i?D0(i):null))}}function Vm(n){return Zi(n,lp)}function t5(n){return Zi(n,Zf)}function vh(n){return Zi(n,up)}const e5="LruGarbageCollector",yk=1048576;function n5([n,t],[e,i]){const s=le(n,e);return s===0?le(t,i):s}class vk{constructor(t){this.Pr=t,this.buffer=new an(n5),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();n5(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class yC{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){bt(e5,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Hh(e)?bt(e5,"Ignoring IndexedDB error during garbage collection: ",e):await qh(e)}await this.Ar(3e5)}))}}class Ek{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return it.resolve(Ja.ce);const i=new vk(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve($3)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$3):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,s,o,c,f,m,g;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,c=Date.now(),this.nthSequenceNumber(t,s)))).next((b=>(i=b,f=Date.now(),this.removeTargets(t,i,e)))).next((b=>(o=b,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((b=>(g=Date.now(),Um()<=Pe.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-E}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function vC(n,t){return new Ek(n,t)}class Tk{constructor(t,e){this.db=t,this.garbageCollector=vC(this,e)}dr(t){const e=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}mr(t,e){return this.yr(t,((i,s)=>e(s)))}addReference(t,e,i){return C1(t,i)}removeReference(t,e,i){return C1(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return C1(t,e)}wr(t,e){return(function(s,o){let c=!1;return _C(s).te((f=>gC(s,f,o).next((m=>(m&&(c=!0),it.resolve(!m)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.yr(t,((c,f)=>{if(f<=e){const m=this.wr(t,c).next((g=>{if(!g)return o++,i.getEntry(t,c).next((()=>(i.removeEntry(c,Wt.min()),vh(t).delete((function(b){return[0,Qs(b.path)]})(c)))))}));s.push(m)}})).next((()=>it.waitFor(s))).next((()=>i.apply(t))).next((()=>o))}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return C1(t,e)}yr(t,e){const i=vh(t);let s,o=Ja.ce;return i.ee({index:CS},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(o!==Ja.ce&&e(new kt(Fl(s)),o),o=g,s=m):o=Ja.ce})).next((()=>{o!==Ja.ce&&e(new kt(Fl(s)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function C1(n,t){return vh(n).put((function(i,s){return{targetId:0,path:Qs(i.path),sequenceNumber:s}})(t,n.currentSequenceNumber))}class EC{constructor(){this.changes=new sc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Un.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?it.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Sk{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Lf(t).put(i)}removeEntry(t,e,i){return Lf(t).delete((function(o,c){const f=o.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],uv(c),f[f.length-1]]})(e,i))}updateMetadata(t,e){return this.getMetadata(t).next((i=>(i.byteSize+=e,this.br(t,i))))}getEntry(t,e){let i=Un.newInvalidDocument(e);return Lf(t).ee({index:z1,range:IDBKeyRange.only(d0(e))},((s,o)=>{i=this.Sr(e,o)})).next((()=>i))}Dr(t,e){let i={size:0,document:Un.newInvalidDocument(e)};return Lf(t).ee({index:z1,range:IDBKeyRange.only(d0(e))},((s,o)=>{i={document:this.Sr(e,o),size:hv(o)}})).next((()=>i))}getEntries(t,e){let i=Za();return this.Cr(t,e,((s,o)=>{const c=this.Sr(s,o);i=i.insert(s,c)})).next((()=>i))}vr(t,e){let i=Za(),s=new Cn(kt.comparator);return this.Cr(t,e,((o,c)=>{const f=this.Sr(o,c);i=i.insert(o,f),s=s.insert(o,hv(c))})).next((()=>({documents:i,Fr:s})))}Cr(t,e,i){if(e.isEmpty())return it.resolve();let s=new an(a5);e.forEach((m=>s=s.add(m)));const o=IDBKeyRange.bound(d0(s.first()),d0(s.last())),c=s.getIterator();let f=c.getNext();return Lf(t).ee({index:z1,range:o},((m,g,E)=>{const b=kt.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&a5(f,b)<0;)i(f,null),f=c.getNext();f&&f.isEqual(b)&&(i(f,g),f=c.hasNext()?c.getNext():null),f?E.j(d0(f)):E.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,i,s,o){const c=e.path,f=[c.popLast().toArray(),c.lastSegment(),uv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lf(t).H(IDBKeyRange.bound(f,m,!0)).next((g=>{o?.incrementDocumentReadCount(g.length);let E=Za();for(const b of g){const A=this.Sr(kt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(N_(e,A)||s.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(t,e,i,s){let o=Za();const c=s5(e,i),f=s5(e,Rr.max());return Lf(t).ee({index:aR,range:IDBKeyRange.bound(c,f,!0)},((m,g,E)=>{const b=this.Sr(kt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(b.key,b),o.size===s&&E.done()})).next((()=>o))}newChangeBuffer(t){return new bk(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return i5(t).get(TT).next((e=>(Qt(!!e,20021),e)))}br(t,e){return i5(t).put(TT,e)}Sr(t,e){if(e){const i=ok(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Wt.min())))return i}return Un.newInvalidDocument(t)}}function TC(n){return new Sk(n)}class bk extends EC{constructor(t,e){super(),this.Mr=t,this.trackRemovals=e,this.Or=new sc((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(t){const e=[];let i=0,s=new an(((o,c)=>le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const f=this.Or.get(o);if(e.push(this.Mr.removeEntry(t,o,f.readTime)),c.isValidDocument()){const m=B3(this.Mr.serializer,c);s=s.add(o.path.popLast());const g=hv(m);i+=g-f.size,e.push(this.Mr.addEntry(t,o,m))}else if(i-=f.size,this.trackRemovals){const m=B3(this.Mr.serializer,c.convertToNoDocument(Wt.min()));e.push(this.Mr.addEntry(t,o,m))}})),s.forEach((o=>{e.push(this.Mr.indexManager.addToCollectionParentIndex(t,o))})),e.push(this.Mr.updateMetadata(t,i)),it.waitFor(e)}getFromCache(t,e){return this.Mr.Dr(t,e).next((i=>(this.Or.set(e,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(t,e){return this.Mr.vr(t,e).next((({documents:i,Fr:s})=>(s.forEach(((o,c)=>{this.Or.set(o,{size:c,readTime:i.get(o).readTime})})),i)))}}function i5(n){return Zi(n,a_)}function Lf(n){return Zi(n,sv)}function d0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function s5(n,t){const e=t.documentKey.path.toArray();return[n,uv(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function a5(n,t){const e=n.path.toArray(),i=t.path.toArray();let s=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(s=le(e[o],i[o]),s)return s;return s=le(e.length,i.length),s||(s=le(e[e.length-2],i[i.length-2]),s||le(e[e.length-1],i[i.length-1]))}class Ak{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class SC{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&F0(i.mutation,s,Wa.empty(),en.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,ye()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=ye()){const s=jl();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((o=>{let c=I0();return o.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=jl();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,ye())))}populateOverlays(t,e,i){const s=[];return i.forEach((o=>{e.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(t,s).next((o=>{o.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,i,s){let o=Za();const c=H0(),f=(function(){return H0()})();return e.forEach(((m,g)=>{const E=i.get(g.key);s.has(g.key)&&(E===void 0||E.mutation instanceof ac)?o=o.insert(g.key,g):E!==void 0?(c.set(g.key,E.mutation.getFieldMask()),F0(E.mutation,g,E.mutation.getFieldMask(),en.now())):c.set(g.key,Wa.empty())})),this.recalculateAndSaveOverlays(t,o).next((m=>(m.forEach(((g,E)=>c.set(g,E))),e.forEach(((g,E)=>f.set(g,new Ak(E,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(t,e){const i=H0();let s=new Cn(((c,f)=>c-f)),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let E=i.get(m)||Wa.empty();E=f.applyToLocalView(g,E),i.set(m,E);const b=(s.get(f.batchId)||ye()).add(m);s=s.insert(f.batchId,b)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,E=m.value,b=LR();E.forEach((A=>{if(!o.has(A)){const N=FR(e.get(A),i.get(A));N!==null&&b.set(A,N),o=o.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,b))}return it.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return NV(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):PS(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-o.size):it.resolve(jl());let f=rp,m=o;return c.next((g=>it.forEach(g,((E,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),o.get(E)?it.resolve():this.remoteDocumentCache.getEntry(t,E).next((A=>{m=m.insert(E,A)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,m,g,ye()))).next((E=>({batchId:f,changes:kR(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new kt(e)).next((i=>{let s=I0();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const o=e.collectionGroup;let c=I0();return this.indexManager.getCollectionParents(t,o).next((f=>it.forEach(f,(m=>{const g=(function(b,A){return new ic(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(e,m.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next((E=>{E.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,s)))).next((c=>{o.forEach(((m,g)=>{const E=g.getKey();c.get(E)===null&&(c=c.insert(E,Un.newInvalidDocument(E)))}));let f=I0();return c.forEach(((m,g)=>{const E=o.get(m);E!==void 0&&F0(E.mutation,g,Wa.empty(),en.now()),N_(e,g)&&(f=f.insert(m,g))})),f}))}}class wk{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return it.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ti(s.createTime)}})(e)),it.resolve()}getNamedQuery(t,e){return it.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(s){return{name:s.name,query:HS(s.bundledQuery),readTime:Ti(s.readTime)}})(e)),it.resolve()}}class Rk{constructor(){this.overlays=new Cn(kt.comparator),this.Lr=new Map}getOverlay(t,e){return it.resolve(this.overlays.get(e))}getOverlays(t,e){const i=jl();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,o)=>{this.bt(t,e,o)})),it.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(i)),it.resolve()}getOverlaysForCollection(t,e,i){const s=jl(),o=e.length+1,c=new kt(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>i&&s.set(m.getKey(),m)}return it.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let o=new Cn(((g,E)=>g-E));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let E=o.get(g.largestBatchId);E===null&&(E=jl(),o=o.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const f=jl(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,E)=>f.set(g,E))),!(f.size()>=s)););return it.resolve(f)}bt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new BS(e,i));let o=this.Lr.get(e);o===void 0&&(o=ye(),this.Lr.set(e,o)),this.Lr.set(e,o.add(i.key))}}class Ck{constructor(){this.sessionToken=fi.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,it.resolve()}}class KS{constructor(){this.kr=new an(as.Kr),this.qr=new an(as.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const i=new as(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new as(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){const e=new kt(new Ve([])),i=new as(e,t),s=new as(e,t+1),o=[];return this.qr.forEachInRange([i,s],(c=>{this.Wr(c),o.push(c.key)})),o}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new kt(new Ve([])),i=new as(e,t),s=new as(e,t+1);let o=ye();return this.qr.forEachInRange([i,s],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new as(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class as{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return kt.comparator(t.key,e.key)||le(t.Hr,e.Hr)}static Ur(t,e){return le(t.Hr,e.Hr)||kt.comparator(t.key,e.key)}}class Ik{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new an(as.Kr)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new US(o,e,i,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new as(f.key,o)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,e){return it.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),o=s<0?0:s;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?Ah:this.Yn-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new as(e,0),s=new as(e,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],(c=>{const f=this.Zr(c.Hr);o.push(f)})),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new an(le);return e.forEach((s=>{const o=new as(s,0),c=new as(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],(f=>{i=i.add(f.Hr)}))})),it.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let o=i;kt.isDocumentKey(o)||(o=o.child(""));const c=new as(new kt(o),0);let f=new an(le);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Hr)),!0)}),c),it.resolve(this.Yr(f))}Yr(t){const e=[];return t.forEach((i=>{const s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){Qt(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return it.forEach(e.mutations,(s=>{const o=new as(s.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){const i=new as(e,0),s=this.Jr.firstAfterOrEqual(i);return it.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Nk{constructor(t){this.ti=t,this.docs=(function(){return new Cn(kt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),o=s?s.size:0,c=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return it.resolve(i?i.document.mutableCopy():Un.newInvalidDocument(e))}getEntries(t,e){let i=Za();return e.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Un.newInvalidDocument(s))})),it.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let o=Za();const c=e.path,f=new kt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:E}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||wS($w(E),i)<=0||(s.has(E.key)||N_(e,E))&&(o=o.insert(E.key,E.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,e,i,s){qt(9500)}ni(t,e){return it.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new Dk(this)}getSize(t){return it.resolve(this.size)}}class Dk extends EC{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Mr.addEntry(t,s)):this.Mr.removeEntry(i)})),it.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class xk{constructor(t){this.persistence=t,this.ri=new sc((e=>sd(e)),C_),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.ii=0,this.si=new KS,this.targetCount=0,this.oi=ud._r()}forEachTarget(t,e){return this.ri.forEach(((i,s)=>e(s))),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),it.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new ud(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,it.resolve()}updateTargetData(t,e){return this.lr(e),it.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,e,i){let s=0;const o=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),it.waitFor(o).next((()=>s))}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,e){const i=this.ri.get(e)||null;return it.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),it.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);const s=this.persistence.referenceDelegate,o=[];return s&&e.forEach((c=>{o.push(s.markPotentiallyOrphaned(t,c))})),it.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),it.resolve()}getMatchingKeysForTargetId(t,e){const i=this.si.jr(e);return it.resolve(i)}containsKey(t,e){return it.resolve(this.si.containsKey(e))}}class YS{constructor(t,e){this._i={},this.overlays={},this.ai=new Ja(0),this.ui=!1,this.ui=!0,this.ci=new Ck,this.referenceDelegate=t(this),this.li=new xk(this),this.indexManager=new pk,this.remoteDocumentCache=(function(s){return new Nk(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new cC(e),this.Pi=new wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Rk,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new Ik(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){bt("MemoryPersistence","Starting transaction:",t);const s=new Ok(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(t,e){return it.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}}class Ok extends eR{constructor(t){super(),this.currentSequenceNumber=t}}class t2{constructor(t){this.persistence=t,this.Ri=new KS,this.Ai=null}static Vi(t){return new t2(t)}get di(){if(this.Ai)return this.Ai;throw qt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),it.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),it.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),it.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.di,(i=>{const s=kt.fromPath(i);return this.mi(t,s).next((o=>{o||e.removeEntry(s,Wt.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return it.or([()=>it.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class fv{constructor(t,e){this.persistence=t,this.fi=new sc((i=>Qs(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=vC(this,e)}static Vi(t,e){return new fv(t,e)}Ti(){}Ii(t){return it.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return it.forEach(this.fi,((i,s)=>this.wr(t,i,s).next((o=>o?it.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(t,(c=>this.wr(t,c,e).next((f=>{f||(i++,o.removeEntry(c,Wt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=G1(t.data.value)),e}wr(t,e,i){return it.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.fi.get(e);return it.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Mk{constructor(t){this.serializer=t}k(t,e,i,s){const o=new Hv("createOrUpgrade",e);i<1&&s>=1&&((function(m){m.createObjectStore(R_)})(t),(function(m){m.createObjectStore(s_,{keyPath:FP}),m.createObjectStore(Fo,{keyPath:g3,autoIncrement:!0}).createIndex(Yf,_3,{unique:!0}),m.createObjectStore(op)})(t),r5(t),(function(m){m.createObjectStore(Bf)})(t));let c=it.resolve();return i<3&&s>=3&&(i!==0&&((function(m){m.deleteObjectStore(up),m.deleteObjectStore(lp),m.deleteObjectStore(Zf)})(t),r5(t)),c=c.next((()=>(function(m){const g=m.store(Zf),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return g.put(av,E)})(o)))),i<4&&s>=4&&(i!==0&&(c=c.next((()=>(function(m,g){return g.store(Fo).H().next((b=>{m.deleteObjectStore(Fo),m.createObjectStore(Fo,{keyPath:g3,autoIncrement:!0}).createIndex(Yf,_3,{unique:!0});const A=g.store(Fo),N=b.map((D=>A.put(D)));return it.waitFor(N)}))})(t,o)))),c=c.next((()=>{(function(m){m.createObjectStore(cp,{keyPath:$P})})(t)}))),i<5&&s>=5&&(c=c.next((()=>this.gi(o)))),i<6&&s>=6&&(c=c.next((()=>((function(m){m.createObjectStore(a_)})(t),this.pi(o))))),i<7&&s>=7&&(c=c.next((()=>this.yi(o)))),i<8&&s>=8&&(c=c.next((()=>this.wi(t,o)))),i<9&&s>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)}))),i<10&&s>=10&&(c=c.next((()=>this.bi(o)))),i<11&&s>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Fv,{keyPath:tV})})(t),(function(m){m.createObjectStore(jv,{keyPath:eV})})(t)}))),i<12&&s>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Kv,{keyPath:lV});g.createIndex(bT,uV,{unique:!1}),g.createIndex(uR,cV,{unique:!1})})(t)}))),i<13&&s>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(sv,{keyPath:KP});g.createIndex(z1,YP),g.createIndex(aR,QP)})(t))).next((()=>this.Si(t,o))).next((()=>t.deleteObjectStore(Bf)))),i<14&&s>=14&&(c=c.next((()=>this.Di(t,o)))),i<15&&s>=15&&(c=c.next((()=>(function(m){m.createObjectStore(IS,{keyPath:nV,autoIncrement:!0}).createIndex(ST,iV,{unique:!1}),m.createObjectStore(B0,{keyPath:sV}).createIndex(oR,aV,{unique:!1}),m.createObjectStore(G0,{keyPath:rV}).createIndex(lR,oV,{unique:!1})})(t)))),i<16&&s>=16&&(c=c.next((()=>{e.objectStore(B0).clear()})).next((()=>{e.objectStore(G0).clear()}))),i<17&&s>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(NS,{keyPath:hV})})(t)}))),i<18&&s>=18&&Cw()&&(c=c.next((()=>{e.objectStore(B0).clear()})).next((()=>{e.objectStore(G0).clear()}))),c}pi(t){let e=0;return t.store(Bf).ee(((i,s)=>{e+=hv(s)})).next((()=>{const i={byteSize:e};return t.store(a_).put(TT,i)}))}gi(t){const e=t.store(s_),i=t.store(Fo);return e.H().next((s=>it.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,Ah],[o.userId,o.lastAcknowledgedBatchId]);return i.H(Yf,c).next((f=>it.forEach(f,(m=>{Qt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=qf(this.serializer,m);return pC(t,o.userId,g).next((()=>{}))}))))}))))}yi(t){const e=t.store(up),i=t.store(Bf);return t.store(Zf).get(av).next((s=>{const o=[];return i.ee(((c,f)=>{const m=new Ve(c),g=(function(b){return[0,Qs(b)]})(m);o.push(e.get(g).next((E=>E?it.resolve():(b=>e.put({targetId:0,path:Qs(b),sequenceNumber:s.highestListenSequenceNumber}))(m))))})).next((()=>it.waitFor(o)))}))}wi(t,e){t.createObjectStore(r_,{keyPath:ZP});const i=e.store(r_),s=new jS,o=c=>{if(s.add(c)){const f=c.lastSegment(),m=c.popLast();return i.put({collectionId:f,parent:Qs(m)})}};return e.store(Bf).ee({Y:!0},((c,f)=>{const m=new Ve(c);return o(m.popLast())})).next((()=>e.store(op).ee({Y:!0},(([c,f,m],g)=>{const E=Fl(f);return o(E.popLast())}))))}bi(t){const e=t.store(lp);return e.ee(((i,s)=>{const o=D0(s),c=hC(this.serializer,o);return e.put(c)}))}Si(t,e){const i=e.store(Bf),s=[];return i.ee(((o,c)=>{const f=e.store(sv),m=(function(b){return b.document?new kt(Ve.fromString(b.document.name).popFirst(5)):b.noDocument?kt.fromSegments(b.noDocument.path):b.unknownDocument?kt.fromSegments(b.unknownDocument.path):qt(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(f.put(g))})).next((()=>it.waitFor(s)))}Di(t,e){const i=e.store(Fo),s=TC(this.serializer),o=new YS(t2.Vi,this.serializer.yt);return i.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??ye();qf(this.serializer,m).keys().forEach((E=>g=g.add(E))),f.set(m.userId,g)})),it.forEach(f,((m,g)=>{const E=new rs(g),b=Zv.wt(this.serializer,E),A=o.getIndexManager(E),N=$v.wt(E,this.serializer,A,o.referenceDelegate);return new SC(s,N,b,A).recalculateAndSaveOverlaysForDocumentKeys(new AT(e,Ja.ce),m).next()}))}))}}function r5(n){n.createObjectStore(up,{keyPath:JP}).createIndex(CS,WP,{unique:!0}),n.createObjectStore(lp,{keyPath:"targetId"}).createIndex(rR,XP,{unique:!0}),n.createObjectStore(Zf)}const dh="IndexedDbPersistence",ME=18e5,PE=5e3,VE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bC="main";class QS{constructor(t,e,i,s,o,c,f,m,g,E,b=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Ci=o,this.window=c,this.document=f,this.Fi=g,this.Mi=E,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=A=>Promise.resolve(),!QS.v())throw new Tt(ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tk(this,s),this.Ki=e+bC,this.serializer=new cC(m),this.qi=new Yl(this.Ki,this.xi,new Mk(this.serializer)),this.ci=new uk,this.li=new _k(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TC(this.serializer),this.Pi=new lk,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,E===!1&&Ei(dh,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(ft.FAILED_PRECONDITION,VE);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new Ja(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>I1(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((e=>this.isPrimary&&!e?this.Ji(t).next((()=>!1)):!!e&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(Hh(t))return bt(dh,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return bt(dh,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return m0(t).get(Dm).next((e=>it.resolve(this.Xi(e))))}Yi(t){return I1(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,ME)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const i=Zi(e,cp);return i.H().next((s=>{const o=this.ns(s,ME),c=s.filter((f=>o.indexOf(f)===-1));return it.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const e of t)this.Ui.removeItem(this.rs(e.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?it.resolve(!0):m0(t).get(Dm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,PE)&&!this.ss(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new Tt(ft.FAILED_PRECONDITION,VE);return!1}}return!(!this.networkEnabled||!this.inForeground)||I1(t).H().next((i=>this.ns(i,PE).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,f=this.networkEnabled===s.networkEnabled;if(o||c&&f)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&bt(dh,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[R_,cp],(t=>{const e=new AT(t,Ja.ce);return this.Ji(e).next((()=>this.Yi(e)))})),this.qi.close(),this.ls()}ns(t,e){return t.filter((i=>this.ts(i.updateTimeMs,e)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>I1(t).H().next((e=>this.ns(e,ME).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,e){return $v.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new gk(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Zv.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,e,i){bt(dh,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",o=(function(m){return m===18?mV:m===17?dR:m===16?dV:m===15?DS:m===14?fR:m===13?hR:m===12?fV:m===11?cR:void qt(60245)})(this.xi);let c;return this.qi.runTransaction(t,s,o,(f=>(c=new AT(f,this.ai?this.ai.next():Ja.ce),e==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Ei(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Tt(ft.FAILED_PRECONDITION,tR);return i(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(t){return m0(t).get(Dm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,PE)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Tt(ft.FAILED_PRECONDITION,VE)}))}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return m0(t).put(Dm,e)}static v(){return Yl.v()}Ji(t){const e=m0(t);return e.get(Dm).next((i=>this.Xi(i)?(bt(dh,"Releasing primary lease."),e.delete(Dm)):it.resolve()))}ts(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Ei(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Rw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){try{const e=this.Ui?.getItem(this.rs(t))!==null;return bt(dh,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Ei(dh,"Failed to get zombied client id.",e),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){Ei("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function m0(n){return Zi(n,R_)}function I1(n){return Zi(n,cp)}function XS(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class JS{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=s}static Es(t,e){let i=ye(),s=ye();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new JS(t,e.fromCache,i,s)}}class Pk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class AC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Rw()?8:nR(ii())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const o={result:null};return this.gs(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ps(t,e,s,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new Pk;return this.ys(t,e,c).next((f=>{if(o.result=f,this.As)return this.ws(t,e,c,f.size)}))})).next((()=>o.result))}ws(t,e,i,s){return i.documentReadCount<this.Vs?(Um()<=Pe.DEBUG&&bt("QueryEngine","SDK will not create cache indexes for query:",zm(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),it.resolve()):(Um()<=Pe.DEBUG&&bt("QueryEngine","Query:",zm(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(Um()<=Pe.DEBUG&&bt("QueryEngine","The SDK decides to create cache indexes for query:",zm(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_a(e))):it.resolve())}gs(t,e){if(D3(e))return it.resolve(null);let i=_a(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=lv(e,null,"F"),i=_a(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=ye(...o);return this.fs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,i).next((m=>{const g=this.bs(e,f);return this.Ss(e,g,c,m.readTime)?this.gs(t,lv(e,null,"F")):this.Ds(t,g,e,m)}))))})))))}ps(t,e,i,s){return D3(e)||s.isEqual(Wt.min())?it.resolve(null):this.fs.getDocuments(t,i).next((o=>{const c=this.bs(e,o);return this.Ss(e,c,i,s)?it.resolve(null):(Um()<=Pe.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zm(e)),this.Ds(t,c,e,Zw(s,rp)).next((f=>f)))}))}bs(t,e){let i=new an(PR(t));return e.forEach(((s,o)=>{N_(t,o)&&(i=i.add(o))})),i}Ss(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(t,e,i){return Um()<=Pe.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",zm(e)),this.fs.getDocumentsMatchingQuery(t,e,Rr.min(),i)}Ds(t,e,i,s){return this.fs.getDocumentsMatchingQuery(t,i,s).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const WS="LocalStore",Vk=3e8;class kk{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.vs=new Cn(le),this.Fs=new sc((o=>sd(o)),C_),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new SC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function wC(n,t,e,i){return new kk(n,t,e,i)}async function RC(n,t){const e=Bt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],f=[];let m=ye();for(const g of s){c.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}for(const g of o){f.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}return e.localDocuments.getDocuments(i,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function Lk(n,t){const e=Bt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=t.batch.keys(),o=e.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,E){const b=g.batch,A=b.keys();let N=it.resolve();return A.forEach((D=>{N=N.next((()=>E.getEntry(m,D))).next((k=>{const U=g.docVersions.get(D);Qt(U!==null,48541),k.version.compareTo(U)<0&&(b.applyToRemoteDocument(k,g),k.isValidDocument()&&(k.setReadTime(g.commitVersion),E.addEntry(k)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,b)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=ye();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,s)))}))}function CC(n){const t=Bt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function Uk(n,t){const e=Bt(n),i=t.snapshotVersion;let s=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});s=e.vs;const f=[];t.targetChanges.forEach(((E,b)=>{const A=s.get(b);if(!A)return;f.push(e.li.removeMatchingKeys(o,E.removedDocuments,b).next((()=>e.li.addMatchingKeys(o,E.addedDocuments,b))));let N=A.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(b)!==null?N=N.withResumeToken(fi.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),s=s.insert(b,N),(function(k,U,j){return k.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Vk?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(A,N,E)&&f.push(e.li.updateTargetData(o,N))}));let m=Za(),g=ye();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(o,E))})),f.push(IC(o,c,t.documentUpdates).next((E=>{m=E.Bs,g=E.Ls}))),!i.isEqual(Wt.min())){const E=e.li.getLastRemoteSnapshotVersion(o).next((b=>e.li.setTargetsMetadata(o,o.currentSequenceNumber,i)));f.push(E)}return it.waitFor(f).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,m,g))).next((()=>m))})).then((o=>(e.vs=s,o)))}function IC(n,t,e){let i=ye(),s=ye();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=Za();return e.forEach(((f,m)=>{const g=o.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(Wt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):bt(WS,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function zk(n,t){const e=Bt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Ah),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function _p(n,t){const e=Bt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.li.getTargetData(i,t).next((o=>o?(s=o,it.resolve(s)):e.li.allocateTargetId(i).next((c=>(s=new Hu(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=e.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function yp(n,t,e){const i=Bt(n),s=i.vs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Hh(c))throw c;bt(WS,`Failed to update sequence numbers for target ${t}: ${c}`)}i.vs=i.vs.remove(t),i.Fs.delete(s.target)}function dv(n,t,e){const i=Bt(n);let s=Wt.min(),o=ye();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,E){const b=Bt(m),A=b.Fs.get(E);return A!==void 0?it.resolve(b.vs.get(A)):b.li.getTargetData(g,E)})(i,c,_a(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{o=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?s:Wt.min(),e?o:ye()))).next((f=>(xC(i,MR(t),f),{documents:f,ks:o})))))}function NC(n,t){const e=Bt(n),i=Bt(e.li),s=e.vs.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,t).next((c=>c?c.target:null))))}function DC(n,t){const e=Bt(n),i=e.Ms.get(t)||Wt.min();return e.persistence.runTransaction("Get new document changes","readonly",(s=>e.xs.getAllFromCollectionGroup(s,t,Zw(i,rp),Number.MAX_SAFE_INTEGER))).then((s=>(xC(e,t,s),s)))}function xC(n,t,e){let i=n.Ms.get(t)||Wt.min();e.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Ms.set(t,i)}async function Bk(n,t,e,i){const s=Bt(n);let o=ye(),c=Za();for(const g of e){const E=t.Ks(g.metadata.name);g.document&&(o=o.add(E));const b=t.qs(g);b.setReadTime(t.Us(g.metadata.readTime)),c=c.insert(E,b)}const f=s.xs.newChangeBuffer({trackRemovals:!0}),m=await _p(s,(function(E){return _a(xp(Ve.fromString(`__bundle__/docs/${E}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(g=>IC(g,f,c).next((E=>(f.apply(g),E))).next((E=>s.li.removeMatchingKeysForTargetId(g,m.targetId).next((()=>s.li.addMatchingKeys(g,o,m.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(g,E.Bs,E.Ls))).next((()=>E.Bs))))))}async function Gk(n,t,e=ye()){const i=await _p(n,_a(HS(t.bundledQuery))),s=Bt(n);return s.persistence.runTransaction("Save named query","readwrite",(o=>{const c=Ti(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return s.Pi.saveNamedQuery(o,t);const f=i.withResumeToken(fi.EMPTY_BYTE_STRING,c);return s.vs=s.vs.insert(f.targetId,f),s.li.updateTargetData(o,f).next((()=>s.li.removeMatchingKeysForTargetId(o,i.targetId))).next((()=>s.li.addMatchingKeys(o,e,i.targetId))).next((()=>s.Pi.saveNamedQuery(o,t)))}))}const OC="firestore_clients";function o5(n,t){return`${OC}_${n}_${t}`}const MC="firestore_mutations";function l5(n,t,e){let i=`${MC}_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const PC="firestore_targets";function kE(n,t){return`${PC}_${n}_${t}`}const Ul="SharedClientState";class mv{constructor(t,e,i,s){this.user=t,this.batchId=e,this.state=i,this.error=s}static $s(t,e,i){const s=JSON.parse(i);let o,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(o=new Tt(s.error.code,s.error.message))),c?new mv(t,e,s.state,o):(Ei(Ul,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class j0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Tt(i.error.code,i.error.message))),o?new j0(t,i.state,s):(Ei(Ul,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class pv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=VS();for(let c=0;s&&c<i.activeTargetIds.length;++c)s=iR(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return s?new pv(t,o):(Ei(Ul,`Failed to parse client data for instance '${t}': ${e}`),null)}}class ZS{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new ZS(e.clientId,e.onlineState):(Ei(Ul,`Failed to parse online state: ${t}`),null)}}class zT{constructor(){this.activeTargetIds=VS()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class LE{constructor(t,e,i,s,o){this.window=t,this.Ci=e,this.persistenceKey=i,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Cn(le),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=o5(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new zT),this.eo=new RegExp(`^${OC}_${c}_([^_]*)$`),this.no=new RegExp(`^${MC}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${PC}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const i of t){if(i===this.zs)continue;const s=this.getItem(o5(this.persistenceKey,i));if(s){const o=pv.$s(i,s);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();const e=this.storage.getItem(this.io);if(e){const i=this._o(e);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let e=!1;return this.Js.forEach(((i,s)=>{s.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,e,i){this.co(t,e,i),this.lo(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(kE(this.persistenceKey,t));if(s){const o=j0.$s(t,s);o&&(i=o.state)}}return e&&this.ho.Qs(t),this.oo(),i}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(kE(this.persistenceKey,t))}updateQueryState(t,e,i){this.Po(t,e,i)}handleUserChange(t,e,i){e.forEach((s=>{this.lo(s)})),this.currentUser=t,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return bt(Ul,"READ",t,e),e}setItem(t,e){bt(Ul,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){bt(Ul,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(bt(Ul,"EVENT",e.key,e.newValue),e.key===this.Xs)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.eo.test(e.key)){if(e.newValue==null){const i=this.Eo(e.key);return this.Ro(i,null)}{const i=this.Ao(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(e.key)){if(e.newValue!==null){const i=this.Vo(e.key,e.newValue);if(i)return this.mo(i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(e.key===this.io){if(e.newValue!==null){const i=this._o(e.newValue);if(i)return this.ao(i)}}else if(e.key===this.Ys){const i=(function(o){let c=Ja.ce;if(o!=null)try{const f=JSON.parse(o);Qt(typeof f=="number",30636,{yo:o}),c=f}catch(f){Ei(Ul,"Failed to read sequence number from WebStorage",f)}return c})(e.newValue);i!==Ja.ce&&this.sequenceNumberHandler(i)}else if(e.key===this.so){const i=this.wo(e.newValue);await Promise.all(i.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(e)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,e,i){const s=new mv(this.currentUser,t,e,i),o=l5(this.persistenceKey,this.currentUser,t);this.setItem(o,s.Ws())}lo(t){const e=l5(this.persistenceKey,this.currentUser,t);this.removeItem(e)}To(t){const e={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(e))}Po(t,e,i){const s=kE(this.persistenceKey,t),o=new j0(t,e,i);this.setItem(s,o.Ws())}Io(t){const e=JSON.stringify(Array.from(t));this.setItem(this.so,e)}Eo(t){const e=this.eo.exec(t);return e?e[1]:null}Ao(t,e){const i=this.Eo(t);return pv.$s(i,e)}Vo(t,e){const i=this.no.exec(t),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return mv.$s(new rs(o),s,e)}fo(t,e){const i=this.ro.exec(t),s=Number(i[1]);return j0.$s(s,e)}_o(t){return ZS.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);bt(Ul,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Js.insert(t,e):this.Js.remove(t),s=this.uo(this.Js),o=this.uo(i),c=[],f=[];return o.forEach((m=>{s.has(m)||c.push(m)})),s.forEach((m=>{o.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=i}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let e=VS();return t.forEach(((i,s)=>{e=e.unionWith(s.activeTargetIds)})),e}}class VC{constructor(){this.vo=new zT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new zT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class qk{Mo(t){}shutdown(){}}const u5="ConnectivityMonitor";class c5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){bt(u5,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){bt(u5,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let N1=null;function BT(){return N1===null?N1=(function(){return 268435456+Math.round(2147483648*Math.random())})():N1++,"0x"+N1.toString(16)}const UE="RestConnection",Hk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Fk{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===wT?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,o){const c=BT(),f=this.Qo(t,e.toUriEncodedString());bt(UE,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,o);const{host:g}=new URL(f),E=eu(g);return this.zo(t,f,m,i,E).then((b=>(bt(UE,`Received RPC '${t}' ${c}: `,b),b)),(b=>{throw Xo(UE,`RPC '${t}' ${c} failed with error: `,b,"url: ",f,"request:",i),b}))}jo(t,e,i,s,o,c){return this.Wo(t,e,i,s,o)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dp})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,o)=>t[o]=s)),i&&i.headers.forEach(((s,o)=>t[o]=s))}Qo(t,e){const i=Hk[t];let s=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class jk{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const Fs="WebChannelConnection",p0=(n,t,e)=>{n.listen(t,(i=>{try{e(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Qm extends Fk{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Qm.c_){const t=Fw();p0(t,Hw.STAT_EVENT,(e=>{e.stat===yT.PROXY?bt(Fs,"STAT_EVENT: detected buffering proxy"):e.stat===yT.NOPROXY&&bt(Fs,"STAT_EVENT: detected no buffering proxy")})),Qm.c_=!0}}zo(t,e,i,s,o){const c=BT();return new Promise(((f,m)=>{const g=new Gw;g.setWithCredentials(!0),g.listenOnce(qw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case k1.NO_ERROR:const b=g.getResponseJson();bt(Fs,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),f(b);break;case k1.TIMEOUT:bt(Fs,`RPC '${t}' ${c} timed out`),m(new Tt(ft.DEADLINE_EXCEEDED,"Request time out"));break;case k1.HTTP_ERROR:const A=g.getStatus();if(bt(Fs,`RPC '${t}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const D=N?.error;if(D&&D.status&&D.message){const k=(function(j){const K=j.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(K)>=0?K:ft.UNKNOWN})(D.status);m(new Tt(k,D.message))}else m(new Tt(ft.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Tt(ft.UNAVAILABLE,"Connection failed."));break;default:qt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{bt(Fs,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(s);bt(Fs,`RPC '${t}' ${c} sending request:`,s),g.send(e,"POST",E,i,15)}))}T_(t,e,i){const s=BT(),o=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const g=o.join("");bt(Fs,`Creating RPC '${t}' stream ${s}: ${g}`,f);const E=c.createWebChannel(g,f);this.I_(E);let b=!1,A=!1;const N=new jk({Ho:D=>{A?bt(Fs,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(b||(bt(Fs,`Opening RPC '${t}' stream ${s} transport.`),E.open(),b=!0),bt(Fs,`RPC '${t}' stream ${s} sending:`,D),E.send(D))},Jo:()=>E.close()});return p0(E,C0.EventType.OPEN,(()=>{A||(bt(Fs,`RPC '${t}' stream ${s} transport opened.`),N.i_())})),p0(E,C0.EventType.CLOSE,(()=>{A||(A=!0,bt(Fs,`RPC '${t}' stream ${s} transport closed`),N.o_(),this.E_(E))})),p0(E,C0.EventType.ERROR,(D=>{A||(A=!0,Xo(Fs,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),N.o_(new Tt(ft.UNAVAILABLE,"The operation could not be completed")))})),p0(E,C0.EventType.MESSAGE,(D=>{if(!A){const k=D.data[0];Qt(!!k,16349);const U=k,j=U?.error||U[0]?.error;if(j){bt(Fs,`RPC '${t}' stream ${s} received error:`,j);const K=j.status;let X=(function(ot){const V=Vi[ot];if(V!==void 0)return YR(V)})(K),Z=j.message;K==="NOT_FOUND"&&Z.includes("database")&&Z.includes("does not exist")&&Z.includes(this.databaseId.database)&&Xo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),X===void 0&&(X=ft.INTERNAL,Z="Unknown error status: "+K+" with message "+j.message),A=!0,N.o_(new Tt(X,Z)),E.close()}else bt(Fs,`RPC '${t}' stream ${s} received:`,k),N.__(k)}})),Qm.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jw()}}function Kk(n){return new Qm(n)}function kC(){return typeof window<"u"?window:null}function K1(){return typeof document<"u"?document:null}function M_(n){return new WV(n,!0)}Qm.c_=!1;class $S{constructor(t,e,i=1e3,s=1.5,o=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&bt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const h5="PersistentStream";class LC{constructor(t,e,i,s,o,c,f,m){this.Ci=t,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ft.RESOURCE_EXHAUSTED?(Ei(e.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===e&&this.G_(i,s)}),(i=>{t((()=>{const s=new Tt(ft.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(t,e){const i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return bt(h5,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(bt(h5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yk extends LC{constructor(t,e,i,s,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=tk(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Wt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Wt.min():c.readTime?Ti(c.readTime):Wt.min()})(t);return this.listener.J_(e,i)}Z_(t){const e={};e.database=PT(this.serializer),e.addTarget=(function(o,c){let f;const m=c.target;if(f=rv(m)?{documents:iC(o,m)}:{query:sC(o,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=WR(o,c.resumeToken);const g=OT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Wt.min())>0){f.readTime=gp(o,c.snapshotVersion.toTimestamp());const g=OT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const i=nk(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){const e={};e.database=PT(this.serializer),e.removeTarget=t,this.K_(e)}}class Qk extends LC{constructor(t,e,i,s,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=ek(t.writeResults,t.commitTime),i=Ti(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=PT(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>f_(this.serializer,i)))};this.K_(e)}}class Xk{}class Jk extends Xk{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Tt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Wo(t,MT(e,i),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Tt(ft.UNKNOWN,o.toString())}))}jo(t,e,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(t,MT(e,i),s,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Tt(ft.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Wk(n,t,e,i){return new Jk(n,t,e,i)}class Zk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ei(e),this.aa=!1):bt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const cd="RemoteStore";class $k{constructor(t,e,i,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{jh(this)&&(bt(cd,"Restarting streams for network reachability change."),await(async function(m){const g=Bt(m);g.Ea.add(4),await Pp(g),g.Va.set("Unknown"),g.Ea.delete(4),await P_(g)})(this))}))})),this.Va=new Zk(i,s)}}async function P_(n){if(jh(n))for(const t of n.Ra)await t(!0)}async function Pp(n){for(const t of n.Ra)await t(!1)}function e2(n,t){const e=Bt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),nb(e)?eb(e):kp(e).O_()&&tb(e,t))}function vp(n,t){const e=Bt(n),i=kp(e);e.Ia.delete(t),i.O_()&&UC(e,t),e.Ia.size===0&&(i.O_()?i.L_():jh(e)&&e.Va.set("Unknown"))}function tb(n,t){if(n.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}kp(n).Z_(t)}function UC(n,t){n.da.$e(t),kp(n).X_(t)}function eb(n){n.da=new YV({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),kp(n).start(),n.Va.ua()}function nb(n){return jh(n)&&!kp(n).x_()&&n.Ia.size>0}function jh(n){return Bt(n).Ea.size===0}function zC(n){n.da=void 0}async function tL(n){n.Va.set("Online")}async function eL(n){n.Ia.forEach(((t,e)=>{tb(n,t)}))}async function nL(n,t){zC(n),nb(n)?(n.Va.ha(t),eb(n)):n.Va.set("Unknown")}async function iL(n,t,e){if(n.Va.set("Online"),t instanceof JR&&t.state===2&&t.cause)try{await(async function(s,o){const c=o.cause;for(const f of o.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,t)}catch(i){bt(cd,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await gv(n,i)}else if(t instanceof F1?n.da.Xe(t):t instanceof XR?n.da.st(t):n.da.tt(t),!e.isEqual(Wt.min()))try{const i=await CC(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const f=o.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.Ia.get(g);E&&o.Ia.set(g,E.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const E=o.Ia.get(m);if(!E)return;o.Ia.set(m,E.withResumeToken(fi.EMPTY_BYTE_STRING,E.snapshotVersion)),UC(o,m);const b=new Hu(E.target,m,g,E.sequenceNumber);tb(o,b)})),o.remoteSyncer.applyRemoteEvent(f)})(n,e)}catch(i){bt(cd,"Failed to raise snapshot:",i),await gv(n,i)}}async function gv(n,t,e){if(!Hh(t))throw t;n.Ea.add(1),await Pp(n),n.Va.set("Offline"),e||(e=()=>CC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{bt(cd,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await P_(n)}))}function BC(n,t){return t().catch((e=>gv(n,e,t)))}async function Vp(n){const t=Bt(n),e=Vh(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ah;for(;sL(t);)try{const s=await zk(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,aL(t,s)}catch(s){await gv(t,s)}GC(t)&&qC(t)}function sL(n){return jh(n)&&n.Ta.length<10}function aL(n,t){n.Ta.push(t);const e=Vh(n);e.O_()&&e.Y_&&e.ea(t.mutations)}function GC(n){return jh(n)&&!Vh(n).x_()&&n.Ta.length>0}function qC(n){Vh(n).start()}async function rL(n){Vh(n).ra()}async function oL(n){const t=Vh(n);for(const e of n.Ta)t.ea(e.mutations)}async function lL(n,t,e){const i=n.Ta.shift(),s=zS.from(i,t,e);await BC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Vp(n)}async function uL(n,t){t&&Vh(n).Y_&&await(async function(i,s){if((function(c){return KR(c)&&c!==ft.ABORTED})(s.code)){const o=i.Ta.shift();Vh(i).B_(),await BC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Vp(i)}})(n,t),GC(n)&&qC(n)}async function f5(n,t){const e=Bt(n);e.asyncQueue.verifyOperationInProgress(),bt(cd,"RemoteStore received new credentials");const i=jh(e);e.Ea.add(3),await Pp(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await P_(e)}async function GT(n,t){const e=Bt(n);t?(e.Ea.delete(2),await P_(e)):t||(e.Ea.add(2),await Pp(e),e.Va.set("Unknown"))}function kp(n){return n.ma||(n.ma=(function(e,i,s){const o=Bt(e);return o.sa(),new Yk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:tL.bind(null,n),Yo:eL.bind(null,n),t_:nL.bind(null,n),J_:iL.bind(null,n)}),n.Ra.push((async t=>{t?(n.ma.B_(),nb(n)?eb(n):n.Va.set("Unknown")):(await n.ma.stop(),zC(n))}))),n.ma}function Vh(n){return n.fa||(n.fa=(function(e,i,s){const o=Bt(e);return o.sa(),new Qk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:rL.bind(null,n),t_:uL.bind(null,n),ta:oL.bind(null,n),na:lL.bind(null,n)}),n.Ra.push((async t=>{t?(n.fa.B_(),await Vp(n)):(await n.fa.stop(),n.Ta.length>0&&(bt(cd,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class ib{constructor(t,e,i,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,o){const c=Date.now()+i,f=new ib(t,e,c,s,o);return f.start(i),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lp(n,t){if(Ei("AsyncQueue",`${t}: ${n}`),Hh(n))return new Tt(ft.UNAVAILABLE,`${t}: ${n}`);throw n}class Xm{static emptySet(t){return new Xm(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||kt.comparator(e.key,i.key):(e,i)=>kt.comparator(e.key,i.key),this.keyedMap=I0(),this.sortedSet=new Cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Xm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Xm;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class d5{constructor(){this.ga=new Cn(kt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):qt(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Ep{constructor(t,e,i,s,o,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,o){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new Ep(t,e,Xm.emptySet(e),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&I_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}class cL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class hL{constructor(){this.queries=m5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=Bt(e),o=s.queries;s.queries=m5(),o.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Tt(ft.ABORTED,"Firestore shutting down"))}}function m5(){return new sc((n=>OR(n)),I_)}async function sb(n,t){const e=Bt(n);let i=3;const s=t.query;let o=e.queries.get(s);o?!o.Sa()&&t.Da()&&(i=2):(o=new cL,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(s,!0);break;case 1:o.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const f=Lp(c,`Initialization of query '${zm(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,o),o.ba.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&rb(e)}async function ab(n,t){const e=Bt(n),i=t.query;let s=3;const o=e.queries.get(i);if(o){const c=o.ba.indexOf(t);c>=0&&(o.ba.splice(c,1),o.ba.length===0?s=t.Da()?0:1:!o.Sa()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function fL(n,t){const e=Bt(n);let i=!1;for(const s of t){const o=s.query,c=e.queries.get(o);if(c){for(const f of c.ba)f.Fa(s)&&(i=!0);c.wa=s}}i&&rb(e)}function dL(n,t,e){const i=Bt(n),s=i.queries.get(t);if(s)for(const o of s.ba)o.onError(e);i.queries.delete(t)}function rb(n){n.Ca.forEach((t=>{t.next()}))}var qT,p5;(p5=qT||(qT={})).Ma="default",p5.Cache="cache";class ob{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Ep(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Ep.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qT.Cache}}class mL{constructor(t,e){this.qa=t,this.byteLength=e}Ua(){return"metadata"in this.qa}}class g5{constructor(t){this.serializer=t}Ks(t){return Ql(this.serializer,t)}qs(t){return t.metadata.exists?nC(this.serializer,t.document,!1):Un.newNoDocument(this.Ks(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return Ti(t)}}class pL{constructor(t,e){this.$a=t,this.serializer=e,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=HC(t)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Wa.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Qa.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++e;const i=Ve.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.qa.document&&(this.Qa[this.Qa.length-1].document=t.qa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,{...this.progress}):null}za(t){const e=new Map,i=new g5(this.serializer);for(const s of t)if(s.metadata.queries){const o=i.Ks(s.metadata.name);for(const c of s.metadata.queries){const f=(e.get(c)||ye()).add(o);e.set(c,f)}}return e}async ja(t){const e=await Bk(t,new g5(this.serializer),this.Qa,this.$a.id),i=this.za(this.documents);for(const s of this.Wa)await Gk(t,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:e}}}function HC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class FC{constructor(t){this.key=t}}class jC{constructor(t){this.key=t}}class KC{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ye(),this.mutatedKeys=ye(),this.eu=PR(t),this.tu=new Xm(this.eu)}get nu(){return this.Za}ru(t,e){const i=e?e.iu:new d5,s=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((E,b)=>{const A=s.get(E),N=N_(this.query,b)?b:null,D=!!A&&this.mutatedKeys.has(A.key),k=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;A&&N?A.data.isEqual(N.data)?D!==k&&(i.track({type:3,doc:N}),U=!0):this.su(A,N)||(i.track({type:2,doc:N}),U=!0,(m&&this.eu(N,m)>0||g&&this.eu(N,g)<0)&&(f=!0)):!A&&N?(i.track({type:0,doc:N}),U=!0):A&&!N&&(i.track({type:1,doc:A}),U=!0,(m||g)&&(f=!0)),U&&(N?(c=c.add(N),o=k?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),i.track({type:1,doc:E})}return{tu:c,iu:i,Ss:f,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,b)=>(function(N,D){const k=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt(20277,{Vt:U})}};return k(N)-k(D)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(i),s=s??!1;const f=e&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Ep(this.query,t.tu,o,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new d5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=ye(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new jC(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new FC(i))})),e}cu(t){this.Za=t.ks,this.Ya=ye();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Ep.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Kh="SyncEngine";class gL{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class _L{constructor(t){this.key=t,this.hu=!1}}class yL{constructor(t,e,i,s,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new sc((f=>OR(f)),I_),this.Iu=new Map,this.Eu=new Set,this.Ru=new Cn(kt.comparator),this.Au=new Map,this.Vu=new KS,this.du={},this.mu=new Map,this.fu=ud.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vL(n,t,e=!0){const i=n2(n);let s;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await YC(i,t,e,!0),s}async function EL(n,t){const e=n2(n);await YC(e,t,!0,!1)}async function YC(n,t,e,i){const s=await _p(n.localStore,_a(t)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let f;return i&&(f=await lb(n,t,o,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&e2(n.remoteStore,s),f}async function lb(n,t,e,i,s){n.pu=(b,A,N)=>(async function(k,U,j,K){let X=U.view.ru(j);X.Ss&&(X=await dv(k.localStore,U.query,!1).then((({documents:V})=>U.view.ru(V,X))));const Z=K&&K.targetChanges.get(U.targetId),pt=K&&K.targetMismatches.get(U.targetId)!=null,ot=U.view.applyChanges(X,k.isPrimaryClient,Z,pt);return HT(k,U.targetId,ot.au),ot.snapshot})(n,b,A,N);const o=await dv(n.localStore,t,!0),c=new KC(t,o.ks),f=c.ru(o.documents),m=O_.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);HT(n,e,g.au);const E=new gL(t,e,c);return n.Tu.set(t,E),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),g.snapshot}async function TL(n,t,e){const i=Bt(n),s=i.Tu.get(t),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((c=>!I_(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await yp(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&vp(i.remoteStore,s.targetId),Tp(i,s.targetId)})).catch(qh)):(Tp(i,s.targetId),await yp(i.localStore,s.targetId,!0))}async function SL(n,t){const e=Bt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),vp(e.remoteStore,i.targetId))}async function bL(n,t,e){const i=fb(n);try{const s=await(function(c,f){const m=Bt(c),g=en.now(),E=f.reduce(((N,D)=>N.add(D.key)),ye());let b,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let D=Za(),k=ye();return m.xs.getEntries(N,E).next((U=>{D=U,D.forEach(((j,K)=>{K.isValidDocument()||(k=k.add(j))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,D))).next((U=>{b=U;const j=[];for(const K of f){const X=FV(K,b.get(K.key).overlayedDocument);X!=null&&j.push(new ac(K.key,X,bR(X.value.mapValue),Qn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,g,j,f)})).next((U=>{A=U;const j=U.applyToLocalDocumentSet(b,k);return m.documentOverlayCache.saveOverlays(N,U.batchId,j)}))})).then((()=>({batchId:A.batchId,changes:kR(b)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new Cn(le)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(i,s.batchId,e),await rc(i,s.changes),await Vp(i.remoteStore)}catch(s){const o=Lp(s,"Failed to persist write");e.reject(o)}}async function QC(n,t){const e=Bt(n);try{const i=await Uk(e.localStore,t);t.targetChanges.forEach(((s,o)=>{const c=e.Au.get(o);c&&(Qt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Qt(c.hu,14607):s.removedDocuments.size>0&&(Qt(c.hu,42227),c.hu=!1))})),await rc(e,i,t)}catch(i){await qh(i)}}function _5(n,t,e){const i=Bt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach(((o,c)=>{const f=c.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=Bt(c);m.onlineState=f;let g=!1;m.queries.forEach(((E,b)=>{for(const A of b.ba)A.va(f)&&(g=!0)})),g&&rb(m)})(i.eventManager,t),s.length&&i.Pu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function AL(n,t,e){const i=Bt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),o=s&&s.key;if(o){let c=new Cn(kt.comparator);c=c.insert(o,Un.newNoDocument(o,Wt.min()));const f=ye().add(o),m=new x_(Wt.min(),new Map,new Cn(le),c,f);await QC(i,m),i.Ru=i.Ru.remove(o),i.Au.delete(t),hb(i)}else await yp(i.localStore,t,!1).then((()=>Tp(i,t,e))).catch(qh)}async function wL(n,t){const e=Bt(n),i=t.batch.batchId;try{const s=await Lk(e.localStore,t);cb(e,i,null),ub(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await rc(e,s)}catch(s){await qh(s)}}async function RL(n,t,e){const i=Bt(n);try{const s=await(function(c,f){const m=Bt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return m.mutationQueue.lookupMutationBatch(g,f).next((b=>(Qt(b!==null,37113),E=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,E,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>m.localDocuments.getDocuments(g,E)))}))})(i.localStore,t);cb(i,t,e),ub(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await rc(i,s)}catch(s){await qh(s)}}async function CL(n,t){const e=Bt(n);jh(e.remoteStore)||bt(Kh,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(c){const f=Bt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(e.localStore);if(i===Ah)return void t.resolve();const s=e.mu.get(i)||[];s.push(t),e.mu.set(i,s)}catch(i){const s=Lp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(s)}}function ub(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function cb(n,t,e){const i=Bt(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(e?o.reject(e):o.resolve(),s=s.remove(t)),i.du[i.currentUser.toKey()]=s}}function Tp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Vu.Gr(t).forEach((i=>{n.Vu.containsKey(i)||XC(n,i)}))}function XC(n,t){n.Eu.delete(t.path.canonicalString());const e=n.Ru.get(t);e!==null&&(vp(n.remoteStore,e),n.Ru=n.Ru.remove(t),n.Au.delete(e),hb(n))}function HT(n,t,e){for(const i of e)i instanceof FC?(n.Vu.addReference(i.key,t),IL(n,i)):i instanceof jC?(bt(Kh,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,t),n.Vu.containsKey(i.key)||XC(n,i.key)):qt(19791,{wu:i})}function IL(n,t){const e=t.key,i=e.path.canonicalString();n.Ru.get(e)||n.Eu.has(i)||(bt(Kh,"New document in limbo: "+e),n.Eu.add(i),hb(n))}function hb(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new kt(Ve.fromString(t)),i=n.fu.next();n.Au.set(i,new _L(e)),n.Ru=n.Ru.insert(e,i),e2(n.remoteStore,new Hu(_a(xp(e.path)),i,"TargetPurposeLimboResolution",Ja.ce))}}async function rc(n,t,e){const i=Bt(n),s=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,t,e).then((g=>{if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:e?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=JS.Es(m.targetId,g);o.push(E)}})))})),await Promise.all(c),i.Pu.J_(s),await(async function(m,g){const E=Bt(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>it.forEach(g,(A=>it.forEach(A.Ts,(N=>E.persistence.referenceDelegate.addReference(b,A.targetId,N))).next((()=>it.forEach(A.Is,(N=>E.persistence.referenceDelegate.removeReference(b,A.targetId,N)))))))))}catch(b){if(!Hh(b))throw b;bt(WS,"Failed to update sequence numbers: "+b)}for(const b of g){const A=b.targetId;if(!b.fromCache){const N=E.vs.get(A),D=N.snapshotVersion,k=N.withLastLimboFreeSnapshotVersion(D);E.vs=E.vs.insert(A,k)}}})(i.localStore,o))}async function NL(n,t){const e=Bt(n);if(!e.currentUser.isEqual(t)){bt(Kh,"User change. New user:",t.toKey());const i=await RC(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((f=>{f.forEach((m=>{m.reject(new Tt(ft.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await rc(e,i.Ns)}}function DL(n,t){const e=Bt(n),i=e.Au.get(t);if(i&&i.hu)return ye().add(i.key);{let s=ye();const o=e.Iu.get(t);if(!o)return s;for(const c of o){const f=e.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}async function xL(n,t){const e=Bt(n),i=await dv(e.localStore,t.query,!0),s=t.view.cu(i);return e.isPrimaryClient&&HT(e,t.targetId,s.au),s}async function OL(n,t){const e=Bt(n);return DC(e.localStore,t).then((i=>rc(e,i)))}async function ML(n,t,e,i){const s=Bt(n),o=await(function(f,m){const g=Bt(f),E=Bt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.Xn(b,m).next((A=>A?g.localDocuments.getDocuments(b,A):it.resolve(null)))))})(s.localStore,t);o!==null?(e==="pending"?await Vp(s.remoteStore):e==="acknowledged"||e==="rejected"?(cb(s,t,i||null),ub(s,t),(function(f,m){Bt(Bt(f).mutationQueue).nr(m)})(s.localStore,t)):qt(6720,"Unknown batchState",{bu:e}),await rc(s,o)):bt(Kh,"Cannot apply mutation batch with id: "+t)}async function PL(n,t){const e=Bt(n);if(n2(e),fb(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),s=await y5(e,i.toArray());e.gu=!0,await GT(e.remoteStore,!0);for(const o of s)e2(e.remoteStore,o)}else if(t===!1&&e.gu!==!1){const i=[];let s=Promise.resolve();e.Iu.forEach(((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):s=s.then((()=>(Tp(e,c),yp(e.localStore,c,!0)))),vp(e.remoteStore,c)})),await s,await y5(e,i),(function(c){const f=Bt(c);f.Au.forEach(((m,g)=>{vp(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Cn(kt.comparator)})(e),e.gu=!1,await GT(e.remoteStore,!1)}}async function y5(n,t,e){const i=Bt(n),s=[],o=[];for(const c of t){let f;const m=i.Iu.get(c);if(m&&m.length!==0){f=await _p(i.localStore,_a(m[0]));for(const g of m){const E=i.Tu.get(g),b=await xL(i,E);b.snapshot&&o.push(b.snapshot)}}else{const g=await NC(i.localStore,c);f=await _p(i.localStore,g),await lb(i,JC(g),c,!1,f.resumeToken)}s.push(f)}return i.Pu.J_(o),s}function JC(n){return xR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VL(n){return(function(e){return Bt(Bt(e).persistence).hs()})(Bt(n).localStore)}async function kL(n,t,e,i){const s=Bt(n);if(s.gu)return void bt(Kh,"Ignoring unexpected query state notification.");const o=s.Iu.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=await DC(s.localStore,MR(o[0])),f=x_.createSynthesizedRemoteEventForCurrentChange(t,e==="current",fi.EMPTY_BYTE_STRING);await rc(s,c,f);break}case"rejected":await yp(s.localStore,t,!0),Tp(s,t,i);break;default:qt(64155,e)}}async function LL(n,t,e){const i=n2(n);if(i.gu){for(const s of t){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){bt(Kh,"Adding an already active target "+s);continue}const o=await NC(i.localStore,s),c=await _p(i.localStore,o);await lb(i,JC(o),c.targetId,!1,c.resumeToken),e2(i.remoteStore,c)}for(const s of e)i.Iu.has(s)&&await yp(i.localStore,s,!1).then((()=>{vp(i.remoteStore,s),Tp(i,s)})).catch(qh)}}function n2(n){const t=Bt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AL.bind(null,t),t.Pu.J_=fL.bind(null,t.eventManager),t.Pu.yu=dL.bind(null,t.eventManager),t}function fb(n){const t=Bt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RL.bind(null,t),t}function UL(n,t,e){const i=Bt(n);(async function(o,c,f){try{const m=await c.getMetadata();if(await(function(N,D){const k=Bt(N),U=Ti(D.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",(j=>k.Pi.getBundleMetadata(j,D.id))).then((j=>!!j&&j.createTime.compareTo(U)>=0))})(o.localStore,m))return await c.close(),f._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(HC(m));const g=new pL(m,c.serializer);let E=await c.Su();for(;E;){const A=await g.Ga(E);A&&f._updateProgress(A),E=await c.Su()}const b=await g.ja(o.localStore);return await rc(o,b.Ja,void 0),await(function(N,D){const k=Bt(N);return k.persistence.runTransaction("Save bundle","readwrite",(U=>k.Pi.saveBundleMetadata(U,D)))})(o.localStore,m),f._completeWith(b.progress),Promise.resolve(b.Ha)}catch(m){return Xo(Kh,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(i,t,e).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class d_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=M_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return wC(this.persistence,new AC,t.initialUser,this.serializer)}Cu(t){return new YS(t2.Vi,this.serializer)}Du(t){return new VC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}d_.provider={build:()=>new d_};class zL extends d_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Qt(this.persistence.referenceDelegate instanceof fv,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yC(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new YS((i=>fv.Vi(i,e)),this.serializer)}}class WC extends d_{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await fb(this.xu.syncEngine),await Vp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return wC(this.persistence,new AC,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new yC(i,t.asyncQueue,e)}Mu(t,e){const i=new qP(e,this.persistence);return new GP(t.asyncQueue,i)}Cu(t){const e=XS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new QS(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,kC(),K1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new VC}}class BL extends WC{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof LE&&(this.sharedClientState.syncEngine={So:ML.bind(null,e),Do:kL.bind(null,e),Co:LL.bind(null,e),hs:VL.bind(null,e),bo:OL.bind(null,e)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await PL(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(t){const e=kC();if(!LE.v(e))throw new Tt(ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=XS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new LE(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class m_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NL.bind(null,this.syncEngine),await GT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new hL})()}createDatastore(t){const e=M_(t.databaseInfo.databaseId),i=Kk(t.databaseInfo);return Wk(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,o,c,f){return new $k(i,s,o,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>_5(this.syncEngine,e,0)),(function(){return c5.v()?new c5:new qk})())}createSyncEngine(t,e){return(function(s,o,c,f,m,g,E){const b=new yL(s,o,c,f,m,g);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=Bt(e);bt(cd,"RemoteStore shutting down."),i.Ea.add(5),await Pp(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m_.provider={build:()=>new m_};function v5(n,t=10240){let e=0;return{async read(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class i2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ei("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class GL{constructor(t,e){this.Bu=t,this.serializer=e,this.metadata=new Rs,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.Ua()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.Ku();if(t===null)return null;const e=this.Lu.decode(t),i=Number(e);isNaN(i)&&this.qu(`length string (${e}) is not valid number`);const s=await this.Uu(i);return new mL(JSON.parse(s),t.length+i)}$u(){return this.buffer.findIndex((t=>t===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Uu(t){for(;this.buffer.length<t;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const e=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Wu(){const t=await this.Bu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}let qL=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Tt(ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await(async function(s,o){const c=Bt(s),f={documents:o.map((b=>h_(c.serializer,b)))},m=await c.jo("BatchGetDocuments",c.serializer.databaseId,Ve.emptyPath(),f,o.length),g=new Map;m.forEach((b=>{const A=$V(c.serializer,b);g.set(A.key.toString(),A)}));const E=[];return o.forEach((b=>{const A=g.get(b.toString());Qt(!!A,55234,{key:b}),E.push(A)})),E})(this.datastore,t);return e.forEach((i=>this.recordVersion(i))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Mp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((e,i)=>{const s=kt.fromPath(i);this.mutations.push(new LS(s,this.precondition(s)))})),await(async function(i,s){const o=Bt(i),c={writes:s.map((f=>f_(o.serializer,f)))};await o.Wo("Commit",o.serializer.databaseId,Ve.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw qt(50498,{Gu:t.constructor.name});e=Wt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Tt(ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Wt.min())?Qn.exists(!1):Qn.updateTime(e):Qn.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wt.min()))throw new Tt(ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(e)}return Qn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};class HL{constructor(t,e,i,s,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=s,this.deferred=o,this.zu=i.maxAttempts,this.M_=new $S(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const t=new qL(this.datastore),e=this.Ju(t);e&&e.then((i=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Zu(s)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(t){try{const e=this.updateFunction(t);return!w_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(t){this.zu>0&&this.Xu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(t)}Xu(t){if(t?.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!KR(e)}return!1}}const kh="FirestoreClient";class FL{constructor(t,e,i,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=s,this.user=rs.UNAUTHENTICATED,this.clientId=bS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{bt(kh,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(bt(kh,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Lp(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function zE(n,t){n.asyncQueue.verifyOperationInProgress(),bt(kh,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await RC(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function E5(n,t){n.asyncQueue.verifyOperationInProgress();const e=await db(n);bt(kh,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>f5(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>f5(t.remoteStore,s))),n._onlineComponents=t}async function db(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){bt(kh,"Using user provided OfflineComponentProvider");try{await zE(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===ft.FAILED_PRECONDITION||s.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Xo("Error using user provided cache. Falling back to memory cache: "+e),await zE(n,new d_)}}else bt(kh,"Using default OfflineComponentProvider"),await zE(n,new zL(void 0));return n._offlineComponents}async function s2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(bt(kh,"Using user provided OnlineComponentProvider"),await E5(n,n._uninitializedComponentsProvider._online)):(bt(kh,"Using default OnlineComponentProvider"),await E5(n,new m_))),n._onlineComponents}function ZC(n){return db(n).then((t=>t.persistence))}function mb(n){return db(n).then((t=>t.localStore))}function $C(n){return s2(n).then((t=>t.remoteStore))}function pb(n){return s2(n).then((t=>t.syncEngine))}function jL(n){return s2(n).then((t=>t.datastore))}async function Sp(n){const t=await s2(n),e=t.eventManager;return e.onListen=vL.bind(null,t.syncEngine),e.onUnlisten=TL.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=EL.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=SL.bind(null,t.syncEngine),e}function KL(n){return n.asyncQueue.enqueue((async()=>{const t=await ZC(n),e=await $C(n);return t.setNetworkEnabled(!0),(function(s){const o=Bt(s);return o.Ea.delete(0),P_(o)})(e)}))}function YL(n){return n.asyncQueue.enqueue((async()=>{const t=await ZC(n),e=await $C(n);return t.setNetworkEnabled(!1),(async function(s){const o=Bt(s);o.Ea.add(0),await Pp(o),o.Va.set("Offline")})(e)}))}function QL(n,t,e,i){const s=new i2(i),o=new ob(t,s,e);return n.asyncQueue.enqueueAndForget((async()=>sb(await Sp(n),o))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>ab(await Sp(n),o)))}}function XL(n,t){const e=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await(function(g,E){const b=Bt(g);return b.persistence.runTransaction("read document","readonly",(A=>b.localDocuments.getDocument(A,E)))})(s,o);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Tt(ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Lp(f,`Failed to get document '${o} from cache`);c.reject(m)}})(await mb(n),t,e))),e.promise}function t8(n,t,e={}){const i=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new i2({next:A=>{E.Nu(),c.enqueueAndForget((()=>ab(o,b)));const N=A.docs.has(f);!N&&A.fromCache?g.reject(new Tt(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&m&&m.source==="server"?g.reject(new Tt(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new ob(xp(f.path),E,{includeMetadataChanges:!0,Ka:!0});return sb(o,b)})(await Sp(n),n.asyncQueue,t,e,i))),i.promise}function JL(n,t){const e=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await dv(s,o,!0),m=new KC(o,f.ks),g=m.ru(f.documents),E=m.applyChanges(g,!1);c.resolve(E.snapshot)}catch(f){const m=Lp(f,`Failed to execute query '${o} against cache`);c.reject(m)}})(await mb(n),t,e))),e.promise}function e8(n,t,e={}){const i=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new i2({next:A=>{E.Nu(),c.enqueueAndForget((()=>ab(o,b))),A.fromCache&&m.source==="server"?g.reject(new Tt(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new ob(f,E,{includeMetadataChanges:!0,Ka:!0});return sb(o,b)})(await Sp(n),n.asyncQueue,t,e,i))),i.promise}function WL(n,t){const e=new Rs;return n.asyncQueue.enqueueAndForget((async()=>bL(await pb(n),t,e))),e.promise}function ZL(n,t){const e=new i2(t);return n.asyncQueue.enqueueAndForget((async()=>(function(s,o){Bt(s).Ca.add(o),o.next()})(await Sp(n),e))),()=>{e.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,o){Bt(s).Ca.delete(o)})(await Sp(n),e)))}}function $L(n,t,e){const i=new Rs;return n.asyncQueue.enqueueAndForget((async()=>{const s=await jL(n);new HL(n.asyncQueue,s,e,t,i).ju()})),i.promise}function tU(n,t,e,i){const s=(function(c,f){let m;return m=typeof c=="string"?QR().encode(c):c,(function(E,b){return new GL(E,b)})((function(E,b){if(E instanceof Uint8Array)return v5(E,b);if(E instanceof ArrayBuffer)return v5(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(e,M_(t));n.asyncQueue.enqueueAndForget((async()=>{UL(await pb(n),s,i)}))}function eU(n,t){return n.asyncQueue.enqueue((async()=>(function(i,s){const o=Bt(i);return o.persistence.runTransaction("Get named query","readonly",(c=>o.Pi.getNamedQuery(c,s)))})(await mb(n),t)))}function n8(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const nU="ComponentProvider",T5=new Map;function iU(n,t,e,i,s){return new _V(n,t,e,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,n8(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}const i8="firestore.googleapis.com",S5=!0;class b5{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Tt(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i8,this.ssl=S5}else this.host=t.host,this.ssl=t.ssl??S5;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=mC;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<yk)throw new Tt(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Xw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n8(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Tt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Tt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Tt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class V_{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Tt(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b5(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new NP;switch(i.type){case"firstParty":return new MP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Tt(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=T5.get(e);i&&(bt(nU,"Removing Datastore"),T5.delete(e),i.terminate())})(this),Promise.resolve()}}function sU(n,t,e,i={}){n=Ye(n,V_);const s=eu(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${t}:${e}`;s&&(Lv(`https://${f}`),Uv("Firestore",!0)),o.host!==i8&&o.host!==f&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:f,ssl:s,emulatorOptions:i};if(!Ch(m,c)&&(n._setSettings(m),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=rs.MOCK_USER;else{g=Sw(i.mockUserToken,n._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Tt(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new rs(b)}n._authCredentials=new DP(new Yw(g,E))}}let Ea=class s8{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new s8(this.firestore,t,this._query)}},wn=class x0{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new x0(this.firestore,t,this._key)}toJSON(){return{type:x0._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(A_(e,x0._jsonSchema))return new x0(t,i||null,new kt(Ve.fromString(e.referencePath)))}};wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:Li("string",wn._jsonSchemaVersion),referencePath:Li("string")};let wh=class a8 extends Ea{constructor(t,e,i){super(t,e,xp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new wn(this.firestore,null,new kt(t))}withConverter(t){return new a8(this.firestore,t,this._path)}};function gb(n,t,...e){if(n=Ht(n),AS("collection","path",t),n instanceof V_){const i=Ve.fromString(t,...e);return h3(i),new wh(n,null,i)}{if(!(n instanceof wn||n instanceof wh))throw new Tt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(t,...e));return h3(i),new wh(n.firestore,null,i)}}function aU(n,t){if(n=Ye(n,V_),AS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Tt(ft.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ea(n,null,(function(i){return new ic(Ve.emptyPath(),i)})(t))}function _v(n,t,...e){if(n=Ht(n),arguments.length===1&&(t=bS.newId()),AS("doc","path",t),n instanceof V_){const i=Ve.fromString(t,...e);return c3(i),new wn(n,null,new kt(i))}{if(!(n instanceof wn||n instanceof wh))throw new Tt(ft.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(t,...e));return c3(i),new wn(n.firestore,n instanceof wh?n.converter:null,new kt(i))}}function r8(n,t){return n=Ht(n),t=Ht(t),(n instanceof wn||n instanceof wh)&&(t instanceof wn||t instanceof wh)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function o8(n,t){return n=Ht(n),t=Ht(t),n instanceof Ea&&t instanceof Ea&&n.firestore===t.firestore&&I_(n._query,t._query)&&n.converter===t.converter}const A5="AsyncQueue";class w5{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const i=K1();i&&bt(A5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=K1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=K1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Hh(t))throw t;bt(A5,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ei("INTERNAL UNHANDLED ERROR: ",R5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=ib.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&qt(47125,{Pc:R5(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function R5(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class rU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const oU=-1;let Si=class extends V_{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new w5,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w5(t),this._firestoreClient=void 0,await t}}};function Xs(n){if(n._terminated)throw new Tt(ft.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||l8(n),n._firestoreClient}function l8(n){const t=n._freezeSettings(),e=iU(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new FL(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}function lU(n,t){Xo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();return u8(n,m_.provider,{build:i=>new WC(i,e.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}async function uU(n){Xo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();u8(n,m_.provider,{build:e=>new BL(e,t.cacheSizeBytes)})}function u8(n,t,e){if((n=Ye(n,Si))._firestoreClient||n._terminated)throw new Tt(ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Tt(ft.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:t,_offline:e},l8(n)}function cU(n){if(n._initialized&&!n._terminated)throw new Tt(ft.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Rs;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Yl.v())return Promise.resolve();const s=i+bC;await Yl.delete(s)})(XS(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function hU(n){return(function(e){const i=new Rs;return e.asyncQueue.enqueueAndForget((async()=>CL(await pb(e),i))),i.promise})(Xs(n=Ye(n,Si)))}function fU(n){return KL(Xs(n=Ye(n,Si)))}function dU(n){return YL(Xs(n=Ye(n,Si)))}function mU(n,t){const e=Xs(n=Ye(n,Si)),i=new rU;return tU(e,n._databaseId,t,i),i}function pU(n,t){return eU(Xs(n=Ye(n,Si)),t).then((e=>e?new Ea(n,null,e.query):null))}class Ks{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ks(fi.fromBase64String(t))}catch(e){throw new Tt(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ks(fi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(A_(t,Ks._jsonSchema))return Ks.fromBase64String(t.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:Li("string",Ks._jsonSchemaVersion),bytes:Li("string")};let hd=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Tt(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};let Cd=class{constructor(t){this._methodName=t}};class Ko{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Tt(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Tt(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return le(this._lat,t._lat)||le(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(t){if(A_(t,Ko._jsonSchema))return new Ko(t.latitude,t.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:Li("string",Ko._jsonSchemaVersion),latitude:Li("number"),longitude:Li("number")};class Yo{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Yo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(A_(t,Yo._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Yo(t.vectorValues);throw new Tt(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yo._jsonSchemaVersion="firestore/vectorValue/1.0",Yo._jsonSchema={type:Li("string",Yo._jsonSchemaVersion),vectorValues:Li("object")};const gU=/^__.*__$/;class _U{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ac(t,this.data,this.fieldMask,e,this.fieldTransforms):new Op(t,this.data,e,this.fieldTransforms)}}class c8{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ac(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function h8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt(40011,{dataSource:n})}}class a2{constructor(t,e,i,s,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new a2({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return yv(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(h8(this.dataSource)&&gU.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class yU{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||M_(t)}createContext(t,e,i,s=!1){return new a2({dataSource:t,methodName:e,targetDoc:i,path:Yn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(n){const t=n._freezeSettings(),e=M_(n._databaseId);return new yU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function r2(n,t,e,i,s,o={}){const c=n.createContext(o.merge||o.mergeFields?2:0,t,e,s);bb("Data must be an object, but it was:",c,i);const f=m8(i,c);let m,g;if(o.merge)m=new Wa(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const b of o.mergeFields){const A=fd(t,b,e);if(!c.contains(A))throw new Tt(ft.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);_8(E,A)||E.push(A)}m=new Wa(E),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new _U(new ws(f),m,g)}class k_ extends Cd{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof k_}}function f8(n,t,e){return new a2({dataSource:3,targetDoc:t.settings.targetDoc,methodName:n._methodName,arrayElement:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _b extends Cd{_toFieldTransform(t){return new D_(t.path,new mp)}isEqual(t){return t instanceof _b}}class yb extends Cd{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=f8(this,t,!0),i=this.Ac.map((o=>Nd(o,e))),s=new ad(i);return new D_(t.path,s)}isEqual(t){return t instanceof yb&&Ch(this.Ac,t.Ac)}}class vb extends Cd{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=f8(this,t,!0),i=this.Ac.map((o=>Nd(o,e))),s=new rd(i);return new D_(t.path,s)}isEqual(t){return t instanceof vb&&Ch(this.Ac,t.Ac)}}class Eb extends Cd{constructor(t,e){super(t),this.Vc=e}_toFieldTransform(t){const e=new pp(t.serializer,zR(t.serializer,this.Vc));return new D_(t.path,e)}isEqual(t){return t instanceof Eb&&this.Vc===t.Vc}}function Tb(n,t,e,i){const s=n.createContext(1,t,e);bb("Data must be an object, but it was:",s,i);const o=[],c=ws.empty();Fh(i,((m,g)=>{const E=g8(t,m,e);g=Ht(g);const b=s.childContextForFieldPath(E);if(g instanceof k_)o.push(E);else{const A=Nd(g,b);A!=null&&(o.push(E),c.set(E,A))}}));const f=new Wa(o);return new c8(c,f,s.fieldTransforms)}function Sb(n,t,e,i,s,o){const c=n.createContext(1,t,e),f=[fd(t,i,e)],m=[s];if(o.length%2!=0)throw new Tt(ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)f.push(fd(t,o[A])),m.push(o[A+1]);const g=[],E=ws.empty();for(let A=f.length-1;A>=0;--A)if(!_8(g,f[A])){const N=f[A];let D=m[A];D=Ht(D);const k=c.childContextForFieldPath(N);if(D instanceof k_)g.push(N);else{const U=Nd(D,k);U!=null&&(g.push(N),E.set(N,U))}}const b=new Wa(g);return new c8(E,b,c.fieldTransforms)}function d8(n,t,e,i=!1){return Nd(e,n.createContext(i?4:3,t))}function Nd(n,t){if(p8(n=Ht(n)))return bb("Unsupported field value:",t,n),m8(n,t);if(n instanceof Cd)return(function(i,s){if(!h8(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,s){const o=[];let c=0;for(const f of i){let m=Nd(f,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,s){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=en.fromDate(i);return{timestampValue:gp(s.serializer,o)}}if(i instanceof en){const o=new en(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gp(s.serializer,o)}}if(i instanceof Ko)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ks)return{bytesValue:WR(s.serializer,i._byteString)};if(i instanceof wn){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Yo)return(function(c,f){const m=c instanceof Yo?c.toArray():c;return{mapValue:{fields:{[xS]:{stringValue:OS},[hp]:{arrayValue:{values:m.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return kS(f.serializer,E)}))}}}}}})(i,s);if(uC(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qv(i)}`)})(n,t)}function m8(n,t){const e={};return mR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fh(n,((i,s)=>{const o=Nd(s,t.childContextForField(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function p8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof en||n instanceof Ko||n instanceof Ks||n instanceof wn||n instanceof Cd||n instanceof Yo||uC(n))}function bb(n,t,e){if(!p8(e)||!Jw(e)){const i=qv(e);throw i==="an object"?t.createError(n+" a custom object"):t.createError(n+" "+i)}}function fd(n,t,e){if((t=Ht(t))instanceof hd)return t._internalPath;if(typeof t=="string")return g8(n,t);throw yv("Field path arguments must be of type string or ",n,!1,void 0,e)}const vU=new RegExp("[~\\*/\\[\\]]");function g8(n,t,e){if(t.search(vU)>=0)throw yv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new hd(...t.split("."))._internalPath}catch{throw yv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function yv(n,t,e,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new Tt(ft.INVALID_ARGUMENT,f+n+m)}function _8(n,t){return n.some((e=>e.isEqual(t)))}class Ab{convertValue(t,e="none"){switch(Oh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Kn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Wu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw qt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Fh(t,((s,o)=>{i[s]=this.convertValue(o,e)})),i}convertVectorValue(t){const e=t.fields?.[hp].arrayValue?.values?.map((i=>Kn(i.doubleValue)));return new Yo(e)}convertGeoPoint(t){return new Ko(Kn(t.latitude),Kn(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Qv(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(o_(t));default:return null}}convertTimestamp(t){const e=Ju(t);return new en(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Ve.fromString(t);Qt(lC(i),9688,{name:t});const s=new xh(i.get(1),i.get(3)),o=new kt(i.popFirst(5));return s.isEqual(e)||Ei(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}class Dd extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ks(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new wn(this.firestore,null,e)}}function EU(){return new k_("deleteField")}function TU(){return new _b("serverTimestamp")}function SU(...n){return new yb("arrayUnion",n)}function bU(...n){return new vb("arrayRemove",n)}function AU(n){return new Eb("increment",n)}const C5="@firebase/firestore",I5="4.11.0";function FT(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class p_{constructor(t,e,i,s,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new wU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(fd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class wU extends p_{data(){return super.data()}}function y8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Tt(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wb{}class L_ extends wb{}function mh(n,t,...e){let i=[];t instanceof wb&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((m=>m instanceof Rb)).length,f=o.filter((m=>m instanceof o2)).length;if(c>1||c>0&&f>0)throw new Tt(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class o2 extends L_{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new o2(t,e,i)}_apply(t){const e=this._parse(t);return E8(t._query,e),new Ea(t.firestore,t.converter,xT(t._query,e))}_parse(t){const e=Id(t.firestore);return(function(o,c,f,m,g,E,b){let A;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Tt(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){D5(b,E);const D=[];for(const k of b)D.push(N5(m,o,k));A={arrayValue:{values:D}}}else A=N5(m,o,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||D5(b,E),A=d8(f,c,b,E==="in"||E==="not-in");return Ue.create(g,E,A)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function RU(n,t,e){const i=t,s=fd("where",n);return o2._create(s,i,e)}class Rb extends wb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Rb(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:sn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,o){let c=s;const f=o.getFlattenedFilters();for(const m of f)E8(c,m),c=xT(c,m)})(t._query,e),new Ea(t.firestore,t.converter,xT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cb extends L_{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Cb(t,e)}_apply(t){const e=(function(s,o,c){if(s.startAt!==null)throw new Tt(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Tt(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new c_(o,c)})(t._query,this._field,this._direction);return new Ea(t.firestore,t.converter,xV(t._query,e))}}function CU(n,t="asc"){const e=t,i=fd("orderBy",n);return Cb._create(i,e)}class l2 extends L_{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new l2(t,e,i)}_apply(t){return new Ea(t.firestore,t.converter,lv(t._query,this._limit,this._limitType))}}function IU(n){return Ww("limit",n),l2._create("limit",n,"F")}function NU(n){return Ww("limitToLast",n),l2._create("limitToLast",n,"L")}class u2 extends L_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new u2(t,e,i)}_apply(t){const e=v8(t,this.type,this._docOrFields,this._inclusive);return new Ea(t.firestore,t.converter,OV(t._query,e))}}function DU(...n){return u2._create("startAt",n,!0)}function xU(...n){return u2._create("startAfter",n,!1)}class c2 extends L_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new c2(t,e,i)}_apply(t){const e=v8(t,this.type,this._docOrFields,this._inclusive);return new Ea(t.firestore,t.converter,MV(t._query,e))}}function OU(...n){return c2._create("endBefore",n,!1)}function MU(...n){return c2._create("endAt",n,!0)}function v8(n,t,e,i){if(e[0]=Ht(e[0]),e[0]instanceof p_)return(function(o,c,f,m,g){if(!m)throw new Tt(ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const E=[];for(const b of Ym(o))if(b.field.isKeyField())E.push(id(c,m.key));else{const A=m.data.field(b.field);if(Yv(A))throw new Tt(ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const N=b.field.canonicalString();throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(A)}return new Ph(E,g)})(n._query,n.firestore._databaseId,t,e[0]._document,i);{const s=Id(n.firestore);return(function(c,f,m,g,E,b){const A=c.explicitOrderBy;if(E.length>A.length)throw new Tt(ft.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let D=0;D<E.length;D++){const k=E[D];if(A[D].field.isKeyField()){if(typeof k!="string")throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof k}`);if(!PS(c)&&k.indexOf("/")!==-1)throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${k}' contains a slash.`);const U=c.path.child(Ve.fromString(k));if(!kt.isDocumentKey(U))throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const j=new kt(U);N.push(id(f,j))}else{const U=d8(m,g,k);N.push(U)}}return new Ph(N,b)})(n._query,n.firestore._databaseId,s,t,e,i)}}function N5(n,t,e){if(typeof(e=Ht(e))=="string"){if(e==="")throw new Tt(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PS(t)&&e.indexOf("/")!==-1)throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Ve.fromString(e));if(!kt.isDocumentKey(i))throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return id(n,new kt(i))}if(e instanceof wn)return id(n,e._key);throw new Tt(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qv(e)}.`)}function D5(n,t){if(!Array.isArray(n)||n.length===0)throw new Tt(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function E8(n,t){const e=(function(s,o){for(const c of s)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Tt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Tt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function h2(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class PU extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ks(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new wn(this.firestore,null,e)}}class Qf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let go=class T8 extends p_{constructor(t,e,i,s,o,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new K0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(fd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=T8._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};go._jsonSchemaVersion="firestore/documentSnapshot/1.0",go._jsonSchema={type:Li("string",go._jsonSchemaVersion),bundleSource:Li("string","DocumentSnapshot"),bundleName:Li("string"),bundle:Li("string")};let K0=class extends go{data(t={}){return super.data(t)}},Qo=class S8{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Qf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new K0(this._firestore,this._userDataWriter,i.key,i,new Qf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Tt(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new K0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Qf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const m=new K0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Qf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,E=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),E=c.indexOf(f.doc.key)),{type:VU(f.type),doc:m,oldIndex:g,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=S8._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function VU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:n})}}function b8(n,t){return n instanceof go&&t instanceof go?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Qo&&t instanceof Qo&&n._firestore===t._firestore&&o8(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}Qo._jsonSchemaVersion="firestore/querySnapshot/1.0",Qo._jsonSchema={type:Li("string",Qo._jsonSchemaVersion),bundleSource:Li("string","QuerySnapshot"),bundleName:Li("string"),bundle:Li("string")};const kU={maxAttempts:5};let LU=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Id(t)}set(t,e,i){this._verifyNotCommitted();const s=Th(t,this._firestore),o=h2(s.converter,e,i),c=r2(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Qn.none())),this}update(t,e,i,...s){this._verifyNotCommitted();const o=Th(t,this._firestore);let c;return c=typeof(e=Ht(e))=="string"||e instanceof hd?Sb(this._dataReader,"WriteBatch.update",o._key,e,i,s):Tb(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Qn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Th(t,this._firestore);return this._mutations=this._mutations.concat(new Mp(e._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Th(n,t){if((n=Ht(n)).firestore!==t)throw new Tt(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class UU{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Id(t)}get(t){const e=Th(t,this._firestore),i=new PU(this._firestore);return this._transaction.lookup([e._key]).then((s=>{if(!s||s.length!==1)return qt(24041);const o=s[0];if(o.isFoundDocument())return new p_(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new p_(this._firestore,i,e._key,null,e.converter);throw qt(18433,{doc:o})}))}set(t,e,i){const s=Th(t,this._firestore),o=h2(s.converter,e,i),c=r2(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(t,e,i,...s){const o=Th(t,this._firestore);let c;return c=typeof(e=Ht(e))=="string"||e instanceof hd?Sb(this._dataReader,"Transaction.update",o._key,e,i,s):Tb(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=Th(t,this._firestore);return this._transaction.delete(e._key),this}}let zU=class extends UU{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Th(t,this._firestore),i=new Dd(this._firestore);return super.get(t).then((s=>new go(this._firestore,i,e._key,s._document,new Qf(!1,!1),e.converter)))}};function BU(n,t,e){n=Ye(n,Si);const i={...kU,...e};(function(c){if(c.maxAttempts<1)throw new Tt(ft.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const s=Xs(n);return $L(s,(o=>t(new zU(n,o))),i)}function GU(n){n=Ye(n,wn);const t=Ye(n.firestore,Si),e=Xs(t);return t8(e,n._key).then((i=>Ib(t,n,i)))}function qU(n){n=Ye(n,wn);const t=Ye(n.firestore,Si),e=Xs(t),i=new Dd(t);return XL(e,n._key).then((s=>new go(t,i,n._key,s,new Qf(s!==null&&s.hasLocalMutations,!0),n.converter)))}function HU(n){n=Ye(n,wn);const t=Ye(n.firestore,Si),e=Xs(t);return t8(e,n._key,{source:"server"}).then((i=>Ib(t,n,i)))}function A8(n){n=Ye(n,Ea);const t=Ye(n.firestore,Si),e=Xs(t),i=new Dd(t);return y8(n._query),e8(e,n._query).then((s=>new Qo(t,i,n,s)))}function FU(n){n=Ye(n,Ea);const t=Ye(n.firestore,Si),e=Xs(t),i=new Dd(t);return JL(e,n._query).then((s=>new Qo(t,i,n,s)))}function jU(n){n=Ye(n,Ea);const t=Ye(n.firestore,Si),e=Xs(t),i=new Dd(t);return e8(e,n._query,{source:"server"}).then((s=>new Qo(t,i,n,s)))}function x5(n,t,e){n=Ye(n,wn);const i=Ye(n.firestore,Si),s=h2(n.converter,t,e),o=Id(i);return U_(i,[r2(o,"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,Qn.none())])}function O5(n,t,e,...i){n=Ye(n,wn);const s=Ye(n.firestore,Si),o=Id(s);let c;return c=typeof(t=Ht(t))=="string"||t instanceof hd?Sb(o,"updateDoc",n._key,t,e,i):Tb(o,"updateDoc",n._key,t),U_(s,[c.toMutation(n._key,Qn.exists(!0))])}function KU(n){return U_(Ye(n.firestore,Si),[new Mp(n._key,Qn.none())])}function YU(n,t){const e=Ye(n.firestore,Si),i=_v(n),s=h2(n.converter,t),o=Id(n.firestore);return U_(e,[r2(o,"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Qn.exists(!1))]).then((()=>i))}function w8(n,...t){n=Ht(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||FT(t[i])||(e=t[i++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(FT(t[i])){const g=t[i];t[i]=g.next?.bind(g),t[i+1]=g.error?.bind(g),t[i+2]=g.complete?.bind(g)}let o,c,f;if(n instanceof wn)c=Ye(n.firestore,Si),f=xp(n._key.path),o={next:g=>{t[i]&&t[i](Ib(c,n,g))},error:t[i+1],complete:t[i+2]};else{const g=Ye(n,Ea);c=Ye(g.firestore,Si),f=g._query;const E=new Dd(c);o={next:b=>{t[i]&&t[i](new Qo(c,E,g,b))},error:t[i+1],complete:t[i+2]},y8(n._query)}const m=Xs(c);return QL(m,f,s,o)}function QU(n,t){n=Ye(n,Si);const e=Xs(n),i=FT(t)?t:{next:t};return ZL(e,i)}function U_(n,t){const e=Xs(n);return WL(e,t)}function Ib(n,t,e){const i=e.docs.get(t._key),s=new Dd(n);return new go(n,s,t._key,i,new Qf(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){RP(nc),va(new zi("firestore",((i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),f=new Si(new xP(i.getProvider("auth-internal")),new PP(c,i.getProvider("app-check-internal")),yV(c,s),c);return o={useFetchStreams:e,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Xi(C5,I5,t),Xi(C5,I5,"esm2020")})();class XU{constructor(t,e){this._delegate=t,this.firebase=e,t_(t,new zi("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),TS(this._delegate)))}_getService(t,e=Ih){this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=Ih){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){t_(this._delegate,t)}_addOrOverwriteComponent(t){Mw(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const JU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},M5=new nu("app-compat","Firebase",JU);function WU(n){const t={},e={__esModule:!0,initializeApp:o,app:s,registerVersion:Xi,setLogLevel:Lw,onLog:kw,apps:null,SDK_VERSION:nc,INTERNAL:{registerComponent:f,removeApp:i,useAsService:m,modularAPIs:wP}};e.default=e,Object.defineProperty(e,"apps",{get:c});function i(g){delete t[g]}function s(g){if(g=g||Ih,!ZA(t,g))throw M5.create("no-app",{appName:g});return t[g]}s.App=n;function o(g,E={}){const b=ES(g,E);if(ZA(t,b.name))return t[b.name];const A=new n(b,e);return t[b.name]=A,A}function c(){return Object.keys(t).map(g=>t[g])}function f(g){const E=g.name,b=E.replace("-compat","");if(va(g)&&g.type==="PUBLIC"){const A=(N=s())=>{if(typeof N[b]!="function")throw M5.create("invalid-app-argument",{appName:E});return N[b]()};g.serviceProps!==void 0&&tv(A,g.serviceProps),e[b]=A,n.prototype[b]=function(...N){return this._getService.bind(this,E).apply(this,g.multipleInstances?N:[])}}return g.type==="PUBLIC"?e[b]:null}function m(g,E){return E==="serverAuth"?null:E}return e}function R8(){const n=WU(XU);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:R8,extendNamespace:t,createSubscribe:Iw,ErrorFactory:nu,deepExtend:tv};function t(e){tv(n,e)}return n}const ZU=R8();const P5=new Bv("@firebase/app-compat"),$U="@firebase/app-compat",tz="0.5.8";function ez(n){Xi($U,tz,n)}try{const n=dS();if(n.firebase!==void 0){P5.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=n.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&P5.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const yo=ZU;ez();var nz="firebase",iz="12.9.0";yo.registerVersion(nz,iz,"app-compat");const g0={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},km={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function sz(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function C8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const az=sz,rz=C8,I8=new nu("auth","Firebase",C8());const vv=new Bv("@firebase/auth");function oz(n,...t){vv.logLevel<=Pe.WARN&&vv.warn(`Auth (${nc}): ${n}`,...t)}function Y1(n,...t){vv.logLevel<=Pe.ERROR&&vv.error(`Auth (${nc}): ${n}`,...t)}function Cs(n,...t){throw Db(n,...t)}function Ji(n,...t){return Db(n,...t)}function Nb(n,t,e){const i={...rz(),[t]:e};return new nu("auth","Firebase",i).create(t,{appName:n.name})}function os(n){return Nb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Up(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&Cs(n,"argument-error"),Nb(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Db(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return I8.create(n,...t)}function Nt(n,t,...e){if(!n)throw Db(t,...e)}function Kl(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Y1(t),new Error(t)}function Jo(n,t){n||Kl(t)}function g_(){return typeof self<"u"&&self.location?.href||""}function xb(){return V5()==="http:"||V5()==="https:"}function V5(){return typeof self<"u"&&self.location?.protocol||null}function lz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xb()||Aw()||"connection"in navigator)?navigator.onLine:!0}function uz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class z_{constructor(t,e){this.shortDelay=t,this.longDelay=e,Jo(e>t,"Short delay should be less than long delay!"),this.isMobile=iM()||gS()}get(){return lz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ob(n,t){Jo(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class N8{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const hz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fz=new z_(3e4,6e4);function di(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function mi(n,t,e,i,s={}){return D8(n,s,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const f=Ip({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:t,headers:m,...o};return aM()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&eu(n.emulatorConfig.host)&&(g.credentials="include"),N8.fetch()(await x8(n,n.config.apiHost,e,f),g)})}async function D8(n,t,e){n._canInitEmulator=!1;const i={...cz,...t};try{const s=new mz(n),o=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw O0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw O0(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw O0(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw O0(n,"user-disabled",c);const E=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Nb(n,E,g);Cs(n,E)}}catch(s){if(s instanceof Ui)throw s;Cs(n,"network-request-failed",{message:String(s)})}}async function oc(n,t,e,i,s={}){const o=await mi(n,t,e,i,s);return"mfaPendingCredential"in o&&Cs(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function x8(n,t,e,i){const s=`${t}${e}?${i}`,o=n,c=o.config.emulator?Ob(n.config,s):`${n.config.apiScheme}://${s}`;return hz.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function dz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ji(this.auth,"network-request-failed")),fz.get())})}}function O0(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Ji(n,t,i);return s.customData._tokenResponse=e,s}function k5(n){return n!==void 0&&n.getResponse!==void 0}function L5(n){return n!==void 0&&n.enterprise!==void 0}class O8{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return dz(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pz(n){return(await mi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function M8(n,t){return mi(n,"GET","/v2/recaptchaConfig",di(n,t))}async function gz(n,t){return mi(n,"POST","/v1/accounts:delete",t)}async function _z(n,t){return mi(n,"POST","/v1/accounts:update",t)}async function Ev(n,t){return mi(n,"POST","/v1/accounts:lookup",t)}function Y0(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function yz(n,t=!1){const e=Ht(n),i=await e.getIdToken(t),s=f2(i);Nt(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:Y0(BE(s.auth_time)),issuedAtTime:Y0(BE(s.iat)),expirationTime:Y0(BE(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function BE(n){return Number(n)*1e3}function f2(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Y1("JWT malformed, contained fewer than 3 sections"),null;try{const s=fS(e);return s?JSON.parse(s):(Y1("Failed to decode base64 JWT payload"),null)}catch(s){return Y1("Caught error parsing JWT payload as JSON",s?.toString()),null}}function U5(n){const t=f2(n);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Zu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Ui&&vz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function vz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Ez{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jT{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Y0(this.lastLoginAt),this.creationTime=Y0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function __(n){const t=n.auth,e=await n.getIdToken(),i=await Zu(n,Ev(t,{idToken:e}));Nt(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?P8(s.providerUserInfo):[],c=Sz(n.providerData,o),f=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!c?.length,g=f?m:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new jT(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,E)}async function Tz(n){const t=Ht(n);await __(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Sz(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function P8(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function bz(n,t){const e=await D8(n,{},async()=>{const i=Ip({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=await x8(n,s,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&eu(n.emulatorConfig.host)&&(m.credentials="include"),N8.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function Az(n,t){return mi(n,"POST","/v2/accounts:revokeToken",di(n,t))}class Jm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):U5(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const e=U5(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:o}=await bz(t,e);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:o}=e,c=new Jm;return i&&(Nt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(Nt(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),o&&(Nt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jm,this.toJSON())}_performRefresh(){return Kl("not implemented")}}function ph(n,t){Nt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class jo{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new Ez(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await Zu(this,this.stsTokenManager.getToken(this.auth,t));return Nt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return yz(this,t)}reload(){return Tz(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new jo({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await __(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(os(this.auth));const t=await this.getIdToken();return await Zu(this,gz(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,f=e.tenantId??void 0,m=e._redirectEventId??void 0,g=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:N,providerData:D,stsTokenManager:k}=e;Nt(b&&k,t,"internal-error");const U=Jm.fromJSON(this.name,k);Nt(typeof b=="string",t,"internal-error"),ph(i,t.name),ph(s,t.name),Nt(typeof A=="boolean",t,"internal-error"),Nt(typeof N=="boolean",t,"internal-error"),ph(o,t.name),ph(c,t.name),ph(f,t.name),ph(m,t.name),ph(g,t.name),ph(E,t.name);const j=new jo({uid:b,auth:t,email:s,emailVerified:A,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:U,createdAt:g,lastLoginAt:E});return D&&Array.isArray(D)&&(j.providerData=D.map(K=>({...K}))),m&&(j._redirectEventId=m),j}static async _fromIdTokenResponse(t,e,i=!1){const s=new Jm;s.updateFromServerResponse(e);const o=new jo({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await __(o),o}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Nt(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?P8(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,f=new Jm;f.updateFromIdToken(i);const m=new jo({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new jT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(m,g),m}}const z5=new Map;function br(n){Jo(n instanceof Function,"Expected a class definition");let t=z5.get(n);return t?(Jo(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,z5.set(n,t),t)}class V8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}V8.type="NONE";const bp=V8;function $f(n,t,e){return`firebase:${n}:${t}:${e}`}class Wm{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=$f(this.userKey,s.apiKey,o),this.fullPersistenceKey=$f("persistence",s.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Ev(this.auth,{idToken:t}).catch(()=>{});return e?jo._fromGetAccountInfoResponse(this.auth,e,t):null}return jo._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Wm(br(bp),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=s[0]||br(bp);const c=$f(i,t.config.apiKey,t.name);let f=null;for(const g of e)try{const E=await g._get(c);if(E){let b;if(typeof E=="string"){const A=await Ev(t,{idToken:E}).catch(()=>{});if(!A)break;b=await jo._fromGetAccountInfoResponse(t,A,E)}else b=jo._fromJSON(t,E);g!==o&&(f=b),o=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Wm(o,t,i):(o=m[0],f&&await o._set(c,f.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new Wm(o,t,i))}}function B5(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(z8(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(k8(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(B8(t))return"Blackberry";if(G8(t))return"Webos";if(L8(t))return"Safari";if((t.includes("chrome/")||U8(t))&&!t.includes("edge/"))return"Chrome";if(B_(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function k8(n=ii()){return/firefox\//i.test(n)}function L8(n=ii()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function U8(n=ii()){return/crios\//i.test(n)}function z8(n=ii()){return/iemobile/i.test(n)}function B_(n=ii()){return/android/i.test(n)}function B8(n=ii()){return/blackberry/i.test(n)}function G8(n=ii()){return/webos/i.test(n)}function G_(n=ii()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wz(n=ii()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Rz(n=ii()){return G_(n)&&!!window.navigator?.standalone}function Cz(){return ww()&&document.documentMode===10}function q8(n=ii()){return G_(n)||B_(n)||G8(n)||B8(n)||/windows phone/i.test(n)||z8(n)}function H8(n,t=[]){let e;switch(n){case"Browser":e=B5(ii());break;case"Worker":e=`${B5(ii())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${nc}/${i}`}class Iz{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,f)=>{try{const m=t(o);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Nz(n,t={}){return mi(n,"GET","/v2/passwordPolicy",di(n,t))}const Dz=6;class xz{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??Dz,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}class Oz{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G5(this),this.idTokenSubscription=new G5(this),this.beforeStateQueue=new Iz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=br(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wm.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Ev(this,{idToken:t}),i=await jo._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(An(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(t);(!o||o===c)&&f?.user&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await __(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=uz()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(An(this.app))return Promise.reject(os(this));const e=t?Ht(t):null;return e&&Nt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return An(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Nz(this),e=new xz(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new nu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await Az(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&br(t)||this._popupRedirectResolver;Nt(e,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[br(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=H8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&oz(`Error while retrieving App Check token: ${t.error}`),t?.token}}function si(n){return Ht(n)}class G5{constructor(t){this.auth=t,this.observer=null,this.addObserver=Iw(e=>this.observer=e)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let q_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(n){q_=n}function Mb(n){return q_.loadJS(n)}function Pz(){return q_.recaptchaV2Script}function Vz(){return q_.recaptchaEnterpriseScript}function kz(){return q_.gapiScript}function F8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Lz=500,Uz=6e4,D1=1e12;class zz{constructor(t){this.auth=t,this.counter=D1,this._widgets=new Map}render(t,e){const i=this.counter;return this._widgets.set(i,new qz(t,this.auth.name,e||{})),this.counter++,i}reset(t){const e=t||D1;this._widgets.get(e)?.delete(),this._widgets.delete(e)}getResponse(t){const e=t||D1;return this._widgets.get(e)?.getResponse()||""}async execute(t){const e=t||D1;return this._widgets.get(e)?.execute(),""}}class Bz{constructor(){this.enterprise=new Gz}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Gz{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class qz{constructor(t,e,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof t=="string"?document.getElementById(t):t;Nt(s,"argument-error",{appName:e}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Hz(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch{}this.isVisible&&this.execute()},Uz)},Lz))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Hz(n){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)t.push(e.charAt(Math.floor(Math.random()*e.length)));return t.join("")}const Fz="recaptcha-enterprise",Q0="NO_RECAPTCHA";class j8{constructor(t){this.type=Fz,this.auth=si(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{M8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new O8(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(o,c,f){const m=window.grecaptcha;L5(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:t}).then(g=>{c(g)}).catch(()=>{c(Q0)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bz().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(f=>{if(!e&&L5(window.grecaptcha))s(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Vz();m.length!==0&&(m+=f),Mb(m).then(()=>{s(f,o,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function _0(n,t,e,i=!1,s=!1){const o=new j8(n);let c;if(s)c=Q0;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const f={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Rh(n,t,e,i,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _0(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await _0(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const o=await _0(n,t,e);return i(n,o).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);const f=await _0(n,t,e,!1,!0);return i(n,f)}return Promise.reject(c)})}else{const o=await _0(n,t,e,!1,!0);return i(n,o)}else return Promise.reject(s+" provider is not supported.")}async function jz(n){const t=si(n),e=await M8(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new O8(e);t.tenantId==null?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new j8(t).verify()}function Kz(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(br);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function Yz(n,t,e){const i=si(n);Nt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!e?.disableWarnings,o=K8(t),{host:c,port:f}=Qz(t),m=f===null?"":`:${f}`,g={url:`${o}//${c}${m}/`},E=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Nt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Nt(Ch(g,i.config.emulator)&&Ch(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,eu(c)?(Lv(`${o}//${c}${m}`),Uv("Auth",!0)):s||Xz()}function K8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function Qz(n){const t=K8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:q5(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:q5(c)}}}function q5(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function Xz(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class zp{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Kl("not implemented")}_getIdTokenResponse(t){return Kl("not implemented")}_linkToIdToken(t,e){return Kl("not implemented")}_getReauthenticationResolver(t){return Kl("not implemented")}}async function Y8(n,t){return mi(n,"POST","/v1/accounts:resetPassword",di(n,t))}async function Jz(n,t){return mi(n,"POST","/v1/accounts:update",t)}async function Wz(n,t){return mi(n,"POST","/v1/accounts:signUp",t)}async function Zz(n,t){return mi(n,"POST","/v1/accounts:update",di(n,t))}async function $z(n,t){return oc(n,"POST","/v1/accounts:signInWithPassword",di(n,t))}async function d2(n,t){return mi(n,"POST","/v1/accounts:sendOobCode",di(n,t))}async function tB(n,t){return d2(n,t)}async function eB(n,t){return d2(n,t)}async function nB(n,t){return d2(n,t)}async function iB(n,t){return d2(n,t)}async function sB(n,t){return oc(n,"POST","/v1/accounts:signInWithEmailLink",di(n,t))}async function aB(n,t){return oc(n,"POST","/v1/accounts:signInWithEmailLink",di(n,t))}class y_ extends zp{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new y_(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new y_(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(t,e,"signInWithPassword",$z,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sB(t,{email:this._email,oobCode:this._password});default:Cs(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(t,i,"signUpPassword",Wz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return aB(t,{idToken:e,email:this._email,oobCode:this._password});default:Cs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Yu(n,t){return oc(n,"POST","/v1/accounts:signInWithIdp",di(n,t))}const rB="http://localhost";class Zl extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Zl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Cs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...o}=e;if(!i||!s)return null;const c=new Zl(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Yu(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Yu(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yu(t,e)}buildRequest(){const t={requestUri:rB,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ip(e)}return t}}async function H5(n,t){return mi(n,"POST","/v1/accounts:sendVerificationCode",di(n,t))}async function oB(n,t){return oc(n,"POST","/v1/accounts:signInWithPhoneNumber",di(n,t))}async function lB(n,t){const e=await oc(n,"POST","/v1/accounts:signInWithPhoneNumber",di(n,t));if(e.temporaryProof)throw O0(n,"account-exists-with-different-credential",e);return e}const uB={USER_NOT_FOUND:"user-not-found"};async function cB(n,t){const e={...t,operation:"REAUTH"};return oc(n,"POST","/v1/accounts:signInWithPhoneNumber",di(n,e),uB)}class td extends zp{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new td({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new td({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return oB(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return lB(t,{idToken:e,...this._makeVerificationRequest()})}_getReauthenticationResolver(t){return cB(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o}=t;return!i&&!e&&!s&&!o?null:new td({verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o})}}function hB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fB(n){const t=jm(R0(n)).link,e=t?jm(R0(t)).deep_link_id:null,i=jm(R0(n)).deep_link_id;return(i?jm(R0(i)).link:null)||i||e||t||n}class m2{constructor(t){const e=jm(R0(t)),i=e.apiKey??null,s=e.oobCode??null,o=hB(e.mode??null);Nt(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=fB(t);try{return new m2(e)}catch{return null}}}class Yh{constructor(){this.providerId=Yh.PROVIDER_ID}static credential(t,e){return y_._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=m2.parseLink(e);return Nt(i,"argument-error"),y_._fromEmailAndCode(t,i.code,i.tenantId)}}Yh.PROVIDER_ID="password";Yh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lc{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Bp extends lc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Zm extends Bp{static credentialFromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;return Nt("providerId"in e&&"signInMethod"in e,"argument-error"),Zl._fromParams(e)}credential(t){return this._credential({...t,nonce:t.rawNonce})}_credential(t){return Nt(t.idToken||t.accessToken,"argument-error"),Zl._fromParams({...t,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(t){return Zm.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Zm.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:c,providerId:f}=t;if(!i&&!s&&!e&&!o||!f)return null;try{return new Zm(f)._credential({idToken:e,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}class zl extends Bp{constructor(){super("facebook.com")}static credential(t){return Zl._fromParams({providerId:zl.PROVIDER_ID,signInMethod:zl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zl.credentialFromTaggedObject(t)}static credentialFromError(t){return zl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zl.credential(t.oauthAccessToken)}catch{return null}}}zl.FACEBOOK_SIGN_IN_METHOD="facebook.com";zl.PROVIDER_ID="facebook.com";class Bl extends Bp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Zl._fromParams({providerId:Bl.PROVIDER_ID,signInMethod:Bl.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Bl.credentialFromTaggedObject(t)}static credentialFromError(t){return Bl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Bl.credential(e,i)}catch{return null}}}Bl.GOOGLE_SIGN_IN_METHOD="google.com";Bl.PROVIDER_ID="google.com";class Gl extends Bp{constructor(){super("github.com")}static credential(t){return Zl._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gl.credentialFromTaggedObject(t)}static credentialFromError(t){return Gl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gl.credential(t.oauthAccessToken)}catch{return null}}}Gl.GITHUB_SIGN_IN_METHOD="github.com";Gl.PROVIDER_ID="github.com";const dB="http://localhost";class Ap extends zp{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return Yu(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Yu(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yu(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,pendingToken:o}=e;return!i||!s||!o||i!==s?null:new Ap(i,o)}static _create(t,e){return new Ap(t,e)}buildRequest(){return{requestUri:dB,returnSecureToken:!0,pendingToken:this.pendingToken}}}const mB="saml.";class Tv extends lc{constructor(t){Nt(t.startsWith(mB),"argument-error"),super(t)}static credentialFromResult(t){return Tv.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Tv.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=Ap.fromJSON(t);return Nt(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:i}=t;if(!e||!i)return null;try{return Ap._create(i,e)}catch{return null}}}class ql extends Bp{constructor(){super("twitter.com")}static credential(t,e){return Zl._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ql.credentialFromTaggedObject(t)}static credentialFromError(t){return ql.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return ql.credential(e,i)}catch{return null}}}ql.TWITTER_SIGN_IN_METHOD="twitter.com";ql.PROVIDER_ID="twitter.com";async function Q8(n,t){return oc(n,"POST","/v1/accounts:signUp",di(n,t))}class _o{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const o=await jo._fromIdTokenResponse(t,i,s),c=F5(i);return new _o({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=F5(i);return new _o({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function F5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function pB(n){if(An(n.app))return Promise.reject(os(n));const t=si(n);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new _o({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await Q8(t,{returnSecureToken:!0}),i=await _o._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class Sv extends Ui{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Sv.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Sv(t,e,i,s)}}function X8(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sv._fromErrorAndOperation(n,o,t,i):o})}function J8(n){return new Set(n.map(({providerId:t})=>t).filter(t=>!!t))}async function gB(n,t){const e=Ht(n);await p2(!0,e,t);const{providerUserInfo:i}=await _z(e.auth,{idToken:await e.getIdToken(),deleteProvider:[t]}),s=J8(i||[]);return e.providerData=e.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(e.phoneNumber=null),await e.auth._persistUserIfCurrent(e),e}async function Pb(n,t,e=!1){const i=await Zu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return _o._forOperation(n,"link",i)}async function p2(n,t,e){await __(t);const i=J8(t.providerData),s=n===!1?"provider-already-linked":"no-such-provider";Nt(i.has(e)===n,t.auth,s)}async function W8(n,t,e=!1){const{auth:i}=n;if(An(i.app))return Promise.reject(os(i));const s="reauthenticate";try{const o=await Zu(n,X8(i,s,t,n),e);Nt(o.idToken,i,"internal-error");const c=f2(o.idToken);Nt(c,i,"internal-error");const{sub:f}=c;return Nt(n.uid===f,i,"user-mismatch"),_o._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Cs(i,"user-mismatch"),o}}async function Z8(n,t,e=!1){if(An(n.app))return Promise.reject(os(n));const i="signIn",s=await X8(n,i,t),o=await _o._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(o.user),o}async function g2(n,t){return Z8(si(n),t)}async function $8(n,t){const e=Ht(n);return await p2(!1,e,t.providerId),Pb(e,t)}async function t9(n,t){return W8(Ht(n),t)}async function _B(n,t){return oc(n,"POST","/v1/accounts:signInWithCustomToken",di(n,t))}async function yB(n,t){if(An(n.app))return Promise.reject(os(n));const e=si(n),i=await _B(e,{token:t,returnSecureToken:!0}),s=await _o._fromIdTokenResponse(e,"signIn",i);return await e._updateCurrentUser(s.user),s}class H_{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?Vb._fromServerResponse(t,e):"totpInfo"in e?kb._fromServerResponse(t,e):Cs(t,"internal-error")}}class Vb extends H_{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new Vb(e)}}class kb extends H_{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new kb(e)}}function _2(n,t,e){Nt(e.url?.length>0,n,"invalid-continue-uri"),Nt(typeof e.dynamicLinkDomain>"u"||e.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Nt(typeof e.linkDomain>"u"||e.linkDomain.length>0,n,"invalid-hosting-link-domain"),t.continueUrl=e.url,t.dynamicLinkDomain=e.dynamicLinkDomain,t.linkDomain=e.linkDomain,t.canHandleCodeInApp=e.handleCodeInApp,e.iOS&&(Nt(e.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=e.iOS.bundleId),e.android&&(Nt(e.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=e.android.installApp,t.androidMinimumVersionCode=e.android.minimumVersion,t.androidPackageName=e.android.packageName)}async function Lb(n){const t=si(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function vB(n,t,e){const i=si(n),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};e&&_2(i,s,e),await Rh(i,s,"getOobCode",eB,"EMAIL_PASSWORD_PROVIDER")}async function EB(n,t,e){await Y8(Ht(n),{oobCode:t,newPassword:e}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Lb(n),i})}async function TB(n,t){await Zz(Ht(n),{oobCode:t})}async function e9(n,t){const e=Ht(n),i=await Y8(e,{oobCode:t}),s=i.requestType;switch(Nt(s,e,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Nt(i.newEmail,e,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Nt(i.mfaInfo,e,"internal-error");default:Nt(i.email,e,"internal-error")}let o=null;return i.mfaInfo&&(o=H_._fromServerResponse(si(e),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function SB(n,t){const{data:e}=await e9(Ht(n),t);return e.email}async function bB(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=si(n),c=await Rh(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q8,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Lb(n),m}),f=await _o._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function AB(n,t,e){return An(n.app)?Promise.reject(os(n)):g2(Ht(n),Yh.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Lb(n),i})}async function wB(n,t,e){const i=si(n),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(c,f){Nt(f.handleCodeInApp,i,"argument-error"),f&&_2(i,c,f)}o(s,e),await Rh(i,s,"getOobCode",nB,"EMAIL_PASSWORD_PROVIDER")}function RB(n,t){return m2.parseLink(t)?.operation==="EMAIL_SIGNIN"}async function CB(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=Ht(n),s=Yh.credentialWithLink(t,e||g_());return Nt(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),g2(i,s)}async function IB(n,t){return mi(n,"POST","/v1/accounts:createAuthUri",di(n,t))}async function NB(n,t){const e=xb()?g_():"http://localhost",i={identifier:t,continueUri:e},{signinMethods:s}=await IB(Ht(n),i);return s||[]}async function DB(n,t){const e=Ht(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};t&&_2(e.auth,s,t);const{email:o}=await tB(e.auth,s);o!==n.email&&await n.reload()}async function xB(n,t,e){const i=Ht(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:t};e&&_2(i.auth,o,e);const{email:c}=await iB(i.auth,o);c!==n.email&&await n.reload()}async function OB(n,t){return mi(n,"POST","/v1/accounts:update",t)}async function MB(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const i=Ht(n),o={idToken:await i.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},c=await Zu(i,OB(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function PB(n,t){const e=Ht(n);return An(e.auth.app)?Promise.reject(os(e.auth)):n9(e,t,null)}function VB(n,t){return n9(Ht(n),null,t)}async function n9(n,t,e){const{auth:i}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(o.email=t),e&&(o.password=e);const c=await Zu(n,Jz(i,o));await n._updateTokensIfNecessary(c,!0)}function kB(n){if(!n)return null;const{providerId:t}=n,e=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!t&&n?.idToken){const s=f2(n.idToken)?.firebase?.sign_in_provider;if(s){const o=s!=="anonymous"&&s!=="custom"?s:null;return new $m(i,o)}}if(!t)return null;switch(t){case"facebook.com":return new LB(i,e);case"github.com":return new UB(i,e);case"google.com":return new zB(i,e);case"twitter.com":return new BB(i,e,n.screenName||null);case"custom":case"anonymous":return new $m(i,null);default:return new $m(i,t,e)}}class $m{constructor(t,e,i={}){this.isNewUser=t,this.providerId=e,this.profile=i}}class i9 extends $m{constructor(t,e,i,s){super(t,e,i),this.username=s}}class LB extends $m{constructor(t,e){super(t,"facebook.com",e)}}class UB extends i9{constructor(t,e){super(t,"github.com",e,typeof e?.login=="string"?e?.login:null)}}class zB extends $m{constructor(t,e){super(t,"google.com",e)}}class BB extends i9{constructor(t,e,i){super(t,"twitter.com",e,i)}}function GB(n){const{user:t,_tokenResponse:e}=n;return t.isAnonymous&&!e?{providerId:null,isNewUser:!1,profile:null}:kB(e)}class Xf{constructor(t,e,i){this.type=t,this.credential=e,this.user=i}static _fromIdtoken(t,e){return new Xf("enroll",t,e)}static _fromMfaPendingCredential(t){return new Xf("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){if(t?.multiFactorSession){if(t.multiFactorSession?.pendingCredential)return Xf._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(t.multiFactorSession?.idToken)return Xf._fromIdtoken(t.multiFactorSession.idToken)}return null}}class Ub{constructor(t,e,i){this.session=t,this.hints=e,this.signInResolver=i}static _fromError(t,e){const i=si(t),s=e.customData._serverResponse,o=(s.mfaInfo||[]).map(f=>H_._fromServerResponse(i,f));Nt(s.mfaPendingCredential,i,"internal-error");const c=Xf._fromMfaPendingCredential(s.mfaPendingCredential);return new Ub(c,o,async f=>{const m=await f._process(i,c);delete s.mfaInfo,delete s.mfaPendingCredential;const g={...s,idToken:m.idToken,refreshToken:m.refreshToken};switch(e.operationType){case"signIn":const E=await _o._fromIdTokenResponse(i,e.operationType,g);return await i._updateCurrentUser(E.user),E;case"reauthenticate":return Nt(e.user,i,"internal-error"),_o._forOperation(e.user,e.operationType,g);default:Cs(i,"internal-error")}})}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function qB(n,t){const e=Ht(n),i=t;return Nt(t.customData.operationType,e,"argument-error"),Nt(i.customData._serverResponse?.mfaPendingCredential,e,"argument-error"),Ub._fromError(e,i)}function j5(n,t){return mi(n,"POST","/v2/accounts/mfaEnrollment:start",di(n,t))}function HB(n,t){return mi(n,"POST","/v2/accounts/mfaEnrollment:finalize",di(n,t))}function FB(n,t){return mi(n,"POST","/v2/accounts/mfaEnrollment:withdraw",di(n,t))}class zb{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(i=>H_._fromServerResponse(t.auth,i)))})}static _fromUser(t){return new zb(t)}async getSession(){return Xf._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,e){const i=t,s=await this.getSession(),o=await Zu(this.user,i._process(this.user.auth,s,e));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(t){const e=typeof t=="string"?t:t.uid,i=await this.user.getIdToken();try{const s=await Zu(this.user,FB(this.user.auth,{idToken:i,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==e),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const GE=new WeakMap;function jB(n){const t=Ht(n);return GE.has(t)||GE.set(t,zb._fromUser(t)),GE.get(t)}const bv="__sak";class s9{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(bv,"1"),this.storage.removeItem(bv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const KB=1e3,YB=10;class a9 extends s9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);Cz()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,YB):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},KB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}a9.type="LOCAL";const Bb=a9;class r9 extends s9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}r9.type="SESSION";const dd=r9;function QB(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class y2{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new y2(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:o}=e.data,c=this.handlersMap[s];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async g=>g(e.origin,o)),m=await QB(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}y2.receivers=[];function F_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class XB{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,m)=>{const g=F_("",20);s.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(b){const A=b;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(E),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(A.data.response);break;default:clearTimeout(E),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function ki(){return window}function JB(n){ki().location.href=n}function Gb(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function WB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZB(){return navigator?.serviceWorker?.controller||null}function $B(){return Gb()?self:null}const o9="firebaseLocalStorageDb",tG=1,Av="firebaseLocalStorage",l9="fbase_key";class j_{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function v2(n,t){return n.transaction([Av],t?"readwrite":"readonly").objectStore(Av)}function eG(){const n=indexedDB.deleteDatabase(o9);return new j_(n).toPromise()}function KT(){const n=indexedDB.open(o9,tG);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Av,{keyPath:l9})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Av)?t(i):(i.close(),await eG(),t(await KT()))})})}async function K5(n,t,e){const i=v2(n,!0).put({[l9]:t,value:e});return new j_(i).toPromise()}async function nG(n,t){const e=v2(n,!1).get(t),i=await new j_(e).toPromise();return i===void 0?null:i.value}function Y5(n,t){const e=v2(n,!0).delete(t);return new j_(e).toPromise()}const iG=800,sG=3;class u9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KT(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>sG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=y2._getInstance($B()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WB(),!this.activeServiceWorker)return;this.sender=new XB(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ZB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await KT();return await K5(t,bv,"1"),await Y5(t,bv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>K5(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>nG(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Y5(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=v2(s,!1).getAll();return new j_(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u9.type="LOCAL";const v_=u9;function Q5(n,t){return mi(n,"POST","/v2/accounts/mfaSignIn:start",di(n,t))}function aG(n,t){return mi(n,"POST","/v2/accounts/mfaSignIn:finalize",di(n,t))}const qE=F8("rcb"),rG=new z_(3e4,6e4);class oG{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ki().grecaptcha?.render}load(t,e=""){return Nt(lG(e),t,"argument-error"),this.shouldResolveImmediately(e)&&k5(ki().grecaptcha)?Promise.resolve(ki().grecaptcha):new Promise((i,s)=>{const o=ki().setTimeout(()=>{s(Ji(t,"network-request-failed"))},rG.get());ki()[qE]=()=>{ki().clearTimeout(o),delete ki()[qE];const f=ki().grecaptcha;if(!f||!k5(f)){s(Ji(t,"internal-error"));return}const m=f.render;f.render=(g,E)=>{const b=m(g,E);return this.counter++,b},this.hostLanguage=e,i(f)};const c=`${Pz()}?${Ip({onload:qE,render:"explicit",hl:e})}`;Mb(c).catch(()=>{clearTimeout(o),s(Ji(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!ki().grecaptcha?.render&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lG(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class uG{async load(t){return new zz(t)}clearedOneInstance(){}}const X0="recaptcha",cG={theme:"light",type:"image"};let hG=class{constructor(t,e,i={...cG}){this.parameters=i,this.type=X0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=si(t),this.isInvisible=this.parameters.size==="invisible",Nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;Nt(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uG:new oG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),i=e.getResponse(t);return i||new Promise(s=>{const o=c=>{c&&(this.tokenChangeListeners.delete(o),s(c))};this.tokenChangeListeners.add(o),this.isInvisible&&e.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){Nt(!this.parameters.sitekey,this.auth,"argument-error"),Nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(i=>i(e)),typeof t=="function")t(e);else if(typeof t=="string"){const i=ki()[t];typeof i=="function"&&i(e)}}}assertNotDestroyed(){Nt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){Nt(xb()&&!Gb(),this.auth,"internal-error"),await fG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await pz(this.auth);Nt(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return Nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function fG(){let n=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}n=()=>t(),window.addEventListener("load",n)}).catch(t=>{throw n&&window.removeEventListener("load",n),t})}class qb{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=td._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function dG(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=si(n),s=await E2(i,t,Ht(e));return new qb(s,o=>g2(i,o))}async function mG(n,t,e){const i=Ht(n);await p2(!1,i,"phone");const s=await E2(i.auth,t,Ht(e));return new qb(s,o=>$8(i,o))}async function pG(n,t,e){const i=Ht(n);if(An(i.auth.app))return Promise.reject(os(i.auth));const s=await E2(i.auth,t,Ht(e));return new qb(s,o=>t9(i,o))}async function E2(n,t,e){if(!n._getRecaptchaConfig())try{await jz(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof t=="string"?i={phoneNumber:t}:i=t,"session"in i){const s=i.session;if("phoneNumber"in i){Nt(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Rh(n,o,"mfaSmsEnrollment",async(g,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===Q0){Nt(e?.type===X0,g,"argument-error");const b=await HE(g,E,e);return j5(g,b)}return j5(g,E)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{Nt(s.type==="signin",n,"internal-error");const o=i.multiFactorHint?.uid||i.multiFactorUid;Nt(o,n,"missing-multi-factor-info");const c={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Rh(n,c,"mfaSmsSignIn",async(E,b)=>{if(b.phoneSignInInfo.captchaResponse===Q0){Nt(e?.type===X0,E,"argument-error");const A=await HE(E,b,e);return Q5(E,A)}return Q5(E,b)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Rh(n,s,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===Q0){Nt(e?.type===X0,m,"argument-error");const E=await HE(m,g,e);return H5(m,E)}return H5(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{e?._reset()}}async function gG(n,t){const e=Ht(n);if(An(e.auth.app))return Promise.reject(os(e.auth));await Pb(e,t)}async function HE(n,t,e){Nt(e.type===X0,n,"argument-error");const i=await e.verify();Nt(typeof i=="string",n,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,c=s.phoneEnrollmentInfo.captchaResponse,f=s.phoneEnrollmentInfo.clientType,m=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i,captchaResponse:c,clientType:f,recaptchaVersion:m}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,c=s.phoneSignInInfo.clientType,f=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:o,clientType:c,recaptchaVersion:f}}),s}else return Object.assign(s,{recaptchaToken:i}),s}let md=class Q1{constructor(t){this.providerId=Q1.PROVIDER_ID,this.auth=si(t)}verifyPhoneNumber(t,e){return E2(this.auth,t,Ht(e))}static credential(t,e){return td._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Q1.credentialFromTaggedObject(e)}static credentialFromError(t){return Q1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:i}=t;return e&&i?td._fromTokenResponse(e,i):null}};md.PROVIDER_ID="phone";md.PHONE_SIGN_IN_METHOD="phone";function xd(n,t){return t?br(t):(Nt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Hb extends zp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yu(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Yu(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Yu(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function _G(n){return Z8(n.auth,new Hb(n),n.bypassAuthState)}function yG(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),W8(e,new Hb(n),n.bypassAuthState)}async function vG(n){const{auth:t,user:e}=n;return Nt(e,t,"internal-error"),Pb(e,new Hb(n),n.bypassAuthState)}class c9{constructor(t,e,i,s,o=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:o,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return _G;case"linkViaPopup":case"linkViaRedirect":return vG;case"reauthViaPopup":case"reauthViaRedirect":return yG;default:Cs(this.auth,"internal-error")}}resolve(t){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const EG=new z_(2e3,1e4);async function TG(n,t,e){if(An(n.app))return Promise.reject(Ji(n,"operation-not-supported-in-this-environment"));const i=si(n);Up(n,t,lc);const s=xd(i,e);return new Fu(i,"signInViaPopup",t,s).executeNotNull()}async function SG(n,t,e){const i=Ht(n);if(An(i.auth.app))return Promise.reject(Ji(i.auth,"operation-not-supported-in-this-environment"));Up(i.auth,t,lc);const s=xd(i.auth,e);return new Fu(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function bG(n,t,e){const i=Ht(n);Up(i.auth,t,lc);const s=xd(i.auth,e);return new Fu(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class Fu extends c9{constructor(t,e,i,s,o){super(t,e,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Fu.currentPopupAction&&Fu.currentPopupAction.cancel(),Fu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Jo(this.filter.length===1,"Popup operations only handle one event");const t=F_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fu.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,EG.get())};t()}}Fu.currentPopupAction=null;const AG="pendingRedirect",J0=new Map;class wG extends c9{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=J0.get(this.auth._key());if(!t){try{const i=await RG(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}J0.set(this.auth._key(),t)}return this.bypassAuthState||J0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RG(n,t){const e=f9(t),i=h9(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}async function Fb(n,t){return h9(n)._set(f9(t),"true")}function CG(){J0.clear()}function jb(n,t){J0.set(n._key(),t)}function h9(n){return br(n._redirectPersistence)}function f9(n){return $f(AG,n.config.apiKey,n.name)}function IG(n,t,e){return NG(n,t,e)}async function NG(n,t,e){if(An(n.app))return Promise.reject(os(n));const i=si(n);Up(n,t,lc),await i._initializationPromise;const s=xd(i,e);return await Fb(s,i),s._openRedirect(i,t,"signInViaRedirect")}function DG(n,t,e){return xG(n,t,e)}async function xG(n,t,e){const i=Ht(n);if(Up(i.auth,t,lc),An(i.auth.app))return Promise.reject(os(i.auth));await i.auth._initializationPromise;const s=xd(i.auth,e);await Fb(s,i.auth);const o=await d9(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}function OG(n,t,e){return MG(n,t,e)}async function MG(n,t,e){const i=Ht(n);Up(i.auth,t,lc),await i.auth._initializationPromise;const s=xd(i.auth,e);await p2(!1,i,t.providerId),await Fb(s,i.auth);const o=await d9(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}async function PG(n,t){return await si(n)._initializationPromise,T2(n,t,!1)}async function T2(n,t,e=!1){if(An(n.app))return Promise.reject(os(n));const i=si(n),s=xd(i,t),c=await new wG(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}async function d9(n){const t=F_(`${n.uid}:::`);return n._redirectEventId=t,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),t}const VG=600*1e3;class m9{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!kG(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!p9(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Ji(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=VG&&this.cachedEventUids.clear(),this.cachedEventUids.has(X5(t))}saveEventToCache(t){this.cachedEventUids.add(X5(t)),this.lastProcessedEventTime=Date.now()}}function X5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function p9({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function kG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p9(n);default:return!1}}async function g9(n,t={}){return mi(n,"GET","/v1/projects",t)}const LG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UG=/^https?/;async function zG(n){if(n.config.emulator)return;const{authorizedDomains:t}=await g9(n);for(const e of t)try{if(BG(e))return}catch{}Cs(n,"unauthorized-domain")}function BG(n){const t=g_(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!UG.test(e))return!1;if(LG.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const GG=new z_(3e4,6e4);function J5(){const n=ki().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function qG(n){return new Promise((t,e)=>{function i(){J5(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{J5(),e(Ji(n,"network-request-failed"))},timeout:GG.get()})}if(ki().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ki().gapi?.load)i();else{const s=F8("iframefcb");return ki()[s]=()=>{gapi.load?i():e(Ji(n,"network-request-failed"))},Mb(`${kz()}?onload=${s}`).catch(o=>e(o))}}).catch(t=>{throw X1=null,t})}let X1=null;function HG(n){return X1=X1||qG(n),X1}const FG=new z_(5e3,15e3),jG="__/auth/iframe",KG="emulator/auth/iframe",YG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XG(n){const t=n.config;Nt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ob(t,KG):`https://${n.config.authDomain}/${jG}`,i={apiKey:t.apiKey,appName:n.name,v:nc},s=QG.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Ip(i).slice(1)}`}async function JG(n){const t=await HG(n),e=ki().gapi;return Nt(e,n,"internal-error"),t.open({where:document.body,url:XG(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YG,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ji(n,"network-request-failed"),f=ki().setTimeout(()=>{o(c)},FG.get());function m(){ki().clearTimeout(f),s(i)}i.ping(m).then(m,()=>{o(c)})}))}const WG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZG=500,$G=600,tq="_blank",eq="http://localhost";class W5{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nq(n,t,e,i=ZG,s=$G){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...WG,width:i.toString(),height:s.toString(),top:o,left:c},g=ii().toLowerCase();e&&(f=U8(g)?tq:e),k8(g)&&(t=t||eq,m.scrollbars="yes");const E=Object.entries(m).reduce((A,[N,D])=>`${A}${N}=${D},`,"");if(Rz(g)&&f!=="_self")return iq(t||"",f),new W5(null);const b=window.open(t||"",f,E);Nt(b,n,"popup-blocked");try{b.focus()}catch{}return new W5(b)}function iq(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const sq="__/auth/handler",aq="emulator/auth/handler",rq=encodeURIComponent("fac");async function YT(n,t,e,i,s,o){Nt(n.config.authDomain,n,"auth-domain-config-required"),Nt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:nc,eventId:s};if(t instanceof lc){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",hM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,b]of Object.entries(o||{}))c[E]=b}if(t instanceof Bp){const E=t.getScopes().filter(b=>b!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const m=await n._getAppCheckToken(),g=m?`#${rq}=${encodeURIComponent(m)}`:"";return`${oq(n)}?${Ip(f).slice(1)}${g}`}function oq({config:n}){return n.emulator?Ob(n,aq):`https://${n.authDomain}/${sq}`}const FE="webStorageSupport";class lq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dd,this._completeRedirectFn=T2,this._overrideRedirectResult=jb}async _openPopup(t,e,i,s){Jo(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await YT(t,e,i,g_(),s);return nq(t,o,F_())}async _openRedirect(t,e,i,s){await this._originValidation(t);const o=await YT(t,e,i,g_(),s);return JB(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:o}=this.eventManagers[e];return s?Promise.resolve(s):(Jo(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await JG(t),i=new m9(t);return e.register("authEvent",s=>(Nt(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(FE,{type:FE},s=>{const o=s?.[0]?.[FE];o!==void 0&&e(!!o),Cs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=zG(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return q8()||L8()||G_()}}const uq=lq;class cq{constructor(t){this.factorId=t}_process(t,e,i){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,i);case"signin":return this._finalizeSignIn(t,e.credential);default:return Kl("unexpected MultiFactorSessionType")}}}class Kb extends cq{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Kb(t)}_finalizeEnroll(t,e,i){return HB(t,{idToken:e,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return aG(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class _9{constructor(){}static assertion(t){return Kb._fromCredential(t)}}_9.FACTOR_ID="phone";var Z5="@firebase/auth",$5="1.12.0";class hq{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dq(n){va(new zi("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H8(n)},g=new Oz(i,s,o,m);return Kz(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),va(new zi("auth-internal",t=>{const e=si(t.getProvider("auth").getImmediate());return(i=>new hq(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(Z5,$5,fq(n)),Xi(Z5,$5,"esm2020")}const mq=300;$O("authIdTokenMaxAge");function pq(){return document.getElementsByTagName("head")?.[0]??document}Mz({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const o=Ji("internal-error");o.customData=s,e(o)},i.type="text/javascript",i.charset="UTF-8",pq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dq("Browser");function pd(){return window}const gq=2e3;async function _q(n,t,e){const{BuildInfo:i}=pd();Jo(t.sessionId,"AuthEvent did not contain a session ID");const s=await Sq(t.sessionId),o={};return G_()?o.ibi=i.packageName:B_()?o.apn=i.packageName:Cs(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,YT(n,e,t.type,void 0,t.eventId??void 0,o)}async function yq(n){const{BuildInfo:t}=pd(),e={};G_()?e.iosBundleId=t.packageName:B_()?e.androidPackageName=t.packageName:Cs(n,"operation-not-supported-in-this-environment"),await g9(n,e)}function vq(n){const{cordova:t}=pd();return new Promise(e=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(n):s=t.InAppBrowser.open(n,wz()?"_blank":"_system","location=yes"),e(s)})})}async function Eq(n,t,e){const{cordova:i}=pd();let s=()=>{};try{await new Promise((o,c)=>{let f=null;function m(){o();const b=i.plugins.browsertab?.close;typeof b=="function"&&b(),typeof e?.close=="function"&&e.close()}function g(){f||(f=window.setTimeout(()=>{c(Ji(n,"redirect-cancelled-by-user"))},gq))}function E(){document?.visibilityState==="visible"&&g()}t.addPassiveListener(m),document.addEventListener("resume",g,!1),B_()&&document.addEventListener("visibilitychange",E,!1),s=()=>{t.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",E,!1),f&&window.clearTimeout(f)}})}finally{s()}}function Tq(n){const t=pd();Nt(typeof t?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Nt(typeof t?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Nt(typeof t?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nt(typeof t?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nt(typeof t?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Sq(n){const t=bq(n),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}function bq(n){if(Jo(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const t=new ArrayBuffer(n.length),e=new Uint8Array(t);for(let i=0;i<n.length;i++)e[i]=n.charCodeAt(i);return e}const Aq=20;class wq extends m9{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInitialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInitialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}async initialized(){await this.initPromise}}function Rq(n,t,e=null){return{type:t,eventId:e,urlResponse:null,sessionId:Nq(),postBody:null,tenantId:n.tenantId,error:Ji(n,"no-auth-event")}}function Cq(n,t){return QT()._set(XT(n),t)}async function t6(n){const t=await QT()._get(XT(n));return t&&await QT()._remove(XT(n)),t}function Iq(n,t){const e=xq(t);if(e.includes("/__/auth/callback")){const i=J1(e),o=(i.firebaseError?Dq(decodeURIComponent(i.firebaseError)):null)?.code?.split("auth/")?.[1],c=o?Ji(o):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:e,postBody:null}}return null}function Nq(){const n=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<Aq;e++){const i=Math.floor(Math.random()*t.length);n.push(t.charAt(i))}return n.join("")}function QT(){return br(Bb)}function XT(n){return $f("authEvent",n.config.apiKey,n.name)}function Dq(n){try{return JSON.parse(n)}catch{return null}}function xq(n){const t=J1(n),e=t.link?decodeURIComponent(t.link):void 0,i=J1(e).link,s=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return J1(s).link||s||i||e||n}function J1(n){if(!n?.includes("?"))return{};const[t,...e]=n.split("?");return jm(e.join("?"))}const Oq=500;class Mq{constructor(){this._redirectPersistence=dd,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=T2,this._overrideRedirectResult=jb}async _initialize(t){const e=t._key();let i=this.eventManagers.get(e);return i||(i=new wq(t),this.eventManagers.set(e,i),this.attachCallbackListeners(t,i)),i}_openPopup(t){Cs(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,i,s){Tq(t);const o=await this._initialize(t);await o.initialized(),o.resetRedirect(),CG(),await this._originValidation(t);const c=Rq(t,i,s);await Cq(t,c);const f=await _q(t,c,e),m=await vq(f);return Eq(t,o,m)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=yq(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:i,handleOpenURL:s,BuildInfo:o}=pd(),c=setTimeout(async()=>{await t6(t),e.onEvent(e6())},Oq),f=async E=>{clearTimeout(c);const b=await t6(t);let A=null;b&&E?.url&&(A=Iq(b,E.url)),e.onEvent(A||e6())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,f);const m=s,g=`${o.packageName.toLowerCase()}://`;pd().handleOpenURL=async E=>{if(E.toLowerCase().startsWith(g)&&f({url:E}),typeof m=="function")try{m(E)}catch(b){console.error(b)}}}}const Pq=Mq;function e6(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ji("no-auth-event")}}function Vq(n,t){si(n)._logFramework(t)}var kq="@firebase/auth-compat",Lq="0.6.2";const Uq=1e3;function W0(){return self?.location?.protocol||null}function zq(){return W0()==="http:"||W0()==="https:"}function y9(n=ii()){return!!((W0()==="file:"||W0()==="ionic:"||W0()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bq(){return gS()||zv()}function Gq(){return ww()&&document?.documentMode===11}function qq(n=ii()){return/Edge\/\d+/.test(n)}function Hq(n=ii()){return Gq()||qq(n)}function v9(){try{const n=self.localStorage,t=F_();if(n)return n.setItem(t,"1"),n.removeItem(t),Hq()?nd():!0}catch{return Yb()&&nd()}return!1}function Yb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jE(){return(zq()||Aw()||y9())&&!Bq()&&v9()&&!Yb()}function E9(){return y9()&&typeof document<"u"}async function Fq(){return E9()?new Promise(n=>{const t=setTimeout(()=>{n(!1)},Uq);document.addEventListener("deviceready",()=>{clearTimeout(t),n(!0)})}):!1}function jq(){return typeof window<"u"?window:null}const Tr={LOCAL:"local",NONE:"none",SESSION:"session"},y0=Nt,T9="persistence";function Kq(n,t){if(y0(Object.values(Tr).includes(t),n,"invalid-persistence-type"),gS()){y0(t!==Tr.SESSION,n,"unsupported-persistence-type");return}if(zv()){y0(t===Tr.NONE,n,"unsupported-persistence-type");return}if(Yb()){y0(t===Tr.NONE||t===Tr.LOCAL&&nd(),n,"unsupported-persistence-type");return}y0(t===Tr.NONE||v9(),n,"unsupported-persistence-type")}async function JT(n){await n._initializationPromise;const t=S9(),e=$f(T9,n.config.apiKey,n.name);t&&t.setItem(e,n._getPersistenceType())}function Yq(n,t){const e=S9();if(!e)return[];const i=$f(T9,n,t);switch(e.getItem(i)){case Tr.NONE:return[bp];case Tr.LOCAL:return[v_,dd];case Tr.SESSION:return[dd];default:return[]}}function S9(){try{return jq()?.sessionStorage||null}catch{return null}}const Qq=Nt;class Sh{constructor(){this.browserResolver=br(uq),this.cordovaResolver=br(Pq),this.underlyingResolver=null,this._redirectPersistence=dd,this._completeRedirectFn=T2,this._overrideRedirectResult=jb}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,i,s)}async _openRedirect(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,i,s)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return E9()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qq(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await Fq();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}function b9(n){return n.unwrap()}function Xq(n){return n.wrapped()}function Jq(n){return A9(n)}function Wq(n,t){const e=t.customData?._tokenResponse;if(t?.code==="auth/multi-factor-auth-required"){const i=t;i.resolver=new Zq(n,qB(n,t))}else if(e){const i=A9(t),s=t;i&&(s.credential=i,s.tenantId=e.tenantId||void 0,s.email=e.email||void 0,s.phoneNumber=e.phoneNumber||void 0)}}function A9(n){const{_tokenResponse:t}=n instanceof Ui?n.customData:n;if(!t)return null;if(!(n instanceof Ui)&&"temporaryProof"in t&&"phoneNumber"in t)return md.credentialFromResult(n);const e=t.providerId;if(!e||e===g0.PASSWORD)return null;let i;switch(e){case g0.GOOGLE:i=Bl;break;case g0.FACEBOOK:i=zl;break;case g0.GITHUB:i=Gl;break;case g0.TWITTER:i=ql;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:c,pendingToken:f,nonce:m}=t;return!o&&!c&&!s&&!f?null:f?e.startsWith("saml.")?Ap._create(e,f):Zl._fromParams({providerId:e,signInMethod:e,pendingToken:f,idToken:s,accessToken:o}):new Zm(e).credential({idToken:s,accessToken:o,rawNonce:m})}return n instanceof Ui?i.credentialFromError(n):i.credentialFromResult(n)}function Xa(n,t){return t.catch(e=>{throw e instanceof Ui&&Wq(n,e),e}).then(e=>{const i=e.operationType,s=e.user;return{operationType:i,credential:Jq(e),additionalUserInfo:GB(e),user:ju.getOrCreate(s)}})}async function WT(n,t){const e=await t;return{verificationId:e.verificationId,confirm:i=>Xa(n,e.confirm(i))}}class Zq{constructor(t,e){this.resolver=e,this.auth=Xq(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return Xa(b9(this.auth),this.resolver.resolveSignIn(t))}}class ju{constructor(t){this._delegate=t,this.multiFactor=jB(t)}static getOrCreate(t){return ju.USER_MAP.has(t)||ju.USER_MAP.set(t,new ju(t)),ju.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return Xa(this.auth,$8(this._delegate,t))}async linkWithPhoneNumber(t,e){return WT(this.auth,mG(this._delegate,t,e))}async linkWithPopup(t){return Xa(this.auth,bG(this._delegate,t,Sh))}async linkWithRedirect(t){return await JT(si(this.auth)),OG(this._delegate,t,Sh)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return Xa(this.auth,t9(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return WT(this.auth,pG(this._delegate,t,e))}reauthenticateWithPopup(t){return Xa(this.auth,SG(this._delegate,t,Sh))}async reauthenticateWithRedirect(t){return await JT(si(this.auth)),DG(this._delegate,t,Sh)}sendEmailVerification(t){return DB(this._delegate,t)}async unlink(t){return await gB(this._delegate,t),this}updateEmail(t){return PB(this._delegate,t)}updatePassword(t){return VB(this._delegate,t)}updatePhoneNumber(t){return gG(this._delegate,t)}updateProfile(t){return MB(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return xB(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ju.USER_MAP=new WeakMap;const v0=Nt;class ZT{constructor(t,e){if(this.app=t,e.isInitialized()){this._delegate=e.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=t.options;v0(i,"invalid-api-key",{appName:t.name}),v0(i,"invalid-api-key",{appName:t.name});const s=typeof window<"u"?Sh:void 0;this._delegate=e.initialize({options:{persistence:$q(i,t.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(az),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ju.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){Yz(this._delegate,t,e)}applyActionCode(t){return TB(this._delegate,t)}checkActionCode(t){return e9(this._delegate,t)}confirmPasswordReset(t,e){return EB(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return Xa(this._delegate,bB(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return NB(this._delegate,t)}isSignInWithEmailLink(t){return RB(this._delegate,t)}async getRedirectResult(){v0(jE(),this._delegate,"operation-not-supported-in-this-environment");const t=await PG(this._delegate,Sh);return t?Xa(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){Vq(this._delegate,t)}onAuthStateChanged(t,e,i){const{next:s,error:o,complete:c}=n6(t,e,i);return this._delegate.onAuthStateChanged(s,o,c)}onIdTokenChanged(t,e,i){const{next:s,error:o,complete:c}=n6(t,e,i);return this._delegate.onIdTokenChanged(s,o,c)}sendSignInLinkToEmail(t,e){return wB(this._delegate,t,e)}sendPasswordResetEmail(t,e){return vB(this._delegate,t,e||void 0)}async setPersistence(t){Kq(this._delegate,t);let e;switch(t){case Tr.SESSION:e=dd;break;case Tr.LOCAL:e=await br(v_)._isAvailable()?v_:Bb;break;case Tr.NONE:e=bp;break;default:return Cs("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return Xa(this._delegate,pB(this._delegate))}signInWithCredential(t){return Xa(this._delegate,g2(this._delegate,t))}signInWithCustomToken(t){return Xa(this._delegate,yB(this._delegate,t))}signInWithEmailAndPassword(t,e){return Xa(this._delegate,AB(this._delegate,t,e))}signInWithEmailLink(t,e){return Xa(this._delegate,CB(this._delegate,t,e))}signInWithPhoneNumber(t,e){return WT(this._delegate,dG(this._delegate,t,e))}async signInWithPopup(t){return v0(jE(),this._delegate,"operation-not-supported-in-this-environment"),Xa(this._delegate,TG(this._delegate,t,Sh))}async signInWithRedirect(t){return v0(jE(),this._delegate,"operation-not-supported-in-this-environment"),await JT(this._delegate),IG(this._delegate,t,Sh)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return SB(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}ZT.Persistence=Tr;function n6(n,t,e){let i=n;typeof n!="function"&&({next:i,error:t,complete:e}=n);const s=i;return{next:c=>s(c&&ju.getOrCreate(c)),error:t,complete:e}}function $q(n,t){const e=Yq(n,t);if(typeof self<"u"&&!e.includes(v_)&&e.push(v_),typeof window<"u")for(const i of[Bb,dd])e.includes(i)||e.push(i);return e.includes(bp)||e.push(bp),e}class Qb{static credential(t,e){return md.credential(t,e)}constructor(){this.providerId="phone",this._delegate=new md(b9(yo.auth()))}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Qb.PHONE_SIGN_IN_METHOD=md.PHONE_SIGN_IN_METHOD;Qb.PROVIDER_ID=md.PROVIDER_ID;const tH=Nt;class eH{constructor(t,e,i=yo.app()){tH(i.options?.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new hG(i.auth(),t,e),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const nH="auth-compat";function iH(n){n.INTERNAL.registerComponent(new zi(nH,t=>{const e=t.getProvider("app-compat").getImmediate(),i=t.getProvider("auth");return new ZT(e,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:km.EMAIL_SIGNIN,PASSWORD_RESET:km.PASSWORD_RESET,RECOVER_EMAIL:km.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:km.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:km.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:km.VERIFY_EMAIL}},EmailAuthProvider:Yh,FacebookAuthProvider:zl,GithubAuthProvider:Gl,GoogleAuthProvider:Bl,OAuthProvider:Zm,SAMLAuthProvider:Tv,PhoneAuthProvider:Qb,PhoneMultiFactorGenerator:_9,RecaptchaVerifier:eH,TwitterAuthProvider:ql,Auth:ZT,AuthCredential:zp,Error:Ui}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(kq,Lq)}iH(yo);const sH="@firebase/firestore-compat",aH="0.4.5";function Xb(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Tt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function i6(){if(typeof Uint8Array>"u")throw new Tt("unimplemented","Uint8Arrays are not available in this environment.")}function s6(){if(!pV())throw new Tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}let w9=class $T{constructor(t){this._delegate=t}static fromBase64String(t){return s6(),new $T(Ks.fromBase64String(t))}static fromUint8Array(t){return i6(),new $T(Ks.fromUint8Array(t))}toBase64(){return s6(),this._delegate.toBase64()}toUint8Array(){return i6(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function tS(n){return rH(n,["next","error","complete"])}function rH(n,t){if(typeof n!="object"||n===null)return!1;const e=n;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}class oH{enableIndexedDbPersistence(t,e){return lU(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return uU(t._delegate)}clearIndexedDbPersistence(t){return cU(t._delegate)}}class R9{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof xh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t={...e,...t},delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){sU(this._delegate,t,e,i)}enableNetwork(){return fU(this._delegate)}disableNetwork(){return dU(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Xw("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hU(this._delegate)}onSnapshotsInSync(t){return QU(this._delegate,t)}get app(){if(!this._appCompat)throw new Tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new wp(this,gb(this._delegate,t))}catch(e){throw pa(e,"collection()","Firestore.collection()")}}doc(t){try{return new mo(this,_v(this._delegate,t))}catch(e){throw pa(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ma(this,aU(this._delegate,t))}catch(e){throw pa(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return BU(this._delegate,e=>t(new C9(this,e)))}batch(){return Xs(this._delegate),new I9(new LU(this._delegate,t=>U_(this._delegate,t)))}loadBundle(t){return mU(this._delegate,t)}namedQuery(t){return pU(this._delegate,t).then(e=>e?new ma(this,e):null)}}class S2 extends Ab{constructor(t){super(),this.firestore=t}convertBytes(t){return new w9(new Ks(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return mo.forKey(e,this.firestore,null)}}function lH(n){CP(n)}class C9{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new S2(t)}get(t){const e=Jf(t);return this._delegate.get(e).then(i=>new E_(this._firestore,new go(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const s=Jf(t);return i?(Xb("Transaction.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Jf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Jf(t);return this._delegate.delete(e),this}}class I9{constructor(t){this._delegate=t}set(t,e,i){const s=Jf(t);return i?(Xb("WriteBatch.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Jf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Jf(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class gd{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new K0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new T_(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=gd.INSTANCES;let s=i.get(t);s||(s=new WeakMap,i.set(t,s));let o=s.get(e);return o||(o=new gd(t,new S2(t),e),s.set(e,o)),o}}gd.INSTANCES=new WeakMap;class mo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new S2(t)}static forPath(t,e,i){if(t.length%2!==0)throw new Tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new mo(e,new wn(e._delegate,i,new kt(t)))}static forKey(t,e,i){return new mo(e,new wn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new wp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new wp(this.firestore,gb(this._delegate,t))}catch(e){throw pa(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Ht(t),t instanceof wn?r8(this._delegate,t):!1}set(t,e){e=Xb("DocumentReference.set",e);try{return e?x5(this._delegate,t,e):x5(this._delegate,t)}catch(i){throw pa(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?O5(this._delegate,t):O5(this._delegate,t,e,...i)}catch(s){throw pa(s,"updateDoc()","DocumentReference.update()")}}delete(){return KU(this._delegate)}onSnapshot(...t){const e=N9(t),i=D9(t,s=>new E_(this.firestore,new go(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return w8(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=qU(this._delegate):t?.source==="server"?e=HU(this._delegate):e=GU(this._delegate),e.then(i=>new E_(this.firestore,new go(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new mo(this.firestore,t?this._delegate.withConverter(gd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function pa(n,t,e){return n.message=n.message.replace(t,e),n}function N9(n){for(const t of n)if(typeof t=="object"&&!tS(t))return t;return{}}function D9(n,t){let e;return tS(n[0])?e=n[0]:tS(n[1])?e=n[1]:typeof n[0]=="function"?e={next:n[0],error:n[1],complete:n[2]}:e={next:n[1],error:n[2],complete:n[3]},{next:i=>{e.next&&e.next(t(i))},error:e.error?.bind(e),complete:e.complete?.bind(e)}}class E_{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return b8(this._delegate,t._delegate)}}class T_ extends E_{data(t){const e=this._delegate.data(t);return this._delegate._converter||IP(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}}class ma{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new S2(t)}where(t,e,i){try{return new ma(this.firestore,mh(this._delegate,RU(t,e,i)))}catch(s){throw pa(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ma(this.firestore,mh(this._delegate,CU(t,e)))}catch(i){throw pa(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ma(this.firestore,mh(this._delegate,IU(t)))}catch(e){throw pa(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ma(this.firestore,mh(this._delegate,NU(t)))}catch(e){throw pa(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ma(this.firestore,mh(this._delegate,DU(...t)))}catch(e){throw pa(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ma(this.firestore,mh(this._delegate,xU(...t)))}catch(e){throw pa(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ma(this.firestore,mh(this._delegate,OU(...t)))}catch(e){throw pa(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ma(this.firestore,mh(this._delegate,MU(...t)))}catch(e){throw pa(e,"endAt()","Query.endAt()")}}isEqual(t){return o8(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=FU(this._delegate):t?.source==="server"?e=jU(this._delegate):e=A8(this._delegate),e.then(i=>new eS(this.firestore,new Qo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=N9(t),i=D9(t,s=>new eS(this.firestore,new Qo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return w8(this._delegate,e,i)}withConverter(t){return new ma(this.firestore,t?this._delegate.withConverter(gd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class uH{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new T_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eS{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ma(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new T_(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new uH(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new T_(this._firestore,i))})}isEqual(t){return b8(this._delegate,t._delegate)}}class wp extends ma{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new mo(this.firestore,t):null}doc(t){try{return t===void 0?new mo(this.firestore,_v(this._delegate)):new mo(this.firestore,_v(this._delegate,t))}catch(e){throw pa(e,"doc()","CollectionReference.doc()")}}add(t){return YU(this._delegate,t).then(e=>new mo(this.firestore,e))}isEqual(t){return r8(this._delegate,t._delegate)}withConverter(t){return new wp(this.firestore,t?this._delegate.withConverter(gd.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Jf(n){return Ye(n,wn)}class Jb{constructor(...t){this._delegate=new hd(...t)}static documentId(){return new Jb(Yn.keyField().canonicalString())}isEqual(t){return t=Ht(t),t instanceof hd?this._delegate._internalPath.isEqual(t._internalPath):!1}}class jf{static serverTimestamp(){const t=TU();return t._methodName="FieldValue.serverTimestamp",new jf(t)}static delete(){const t=EU();return t._methodName="FieldValue.delete",new jf(t)}static arrayUnion(...t){const e=SU(...t);return e._methodName="FieldValue.arrayUnion",new jf(e)}static arrayRemove(...t){const e=bU(...t);return e._methodName="FieldValue.arrayRemove",new jf(e)}static increment(t){const e=AU(t);return e._methodName="FieldValue.increment",new jf(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}const cH={Firestore:R9,GeoPoint:Ko,Timestamp:en,Blob:w9,Transaction:C9,WriteBatch:I9,DocumentReference:mo,DocumentSnapshot:E_,Query:ma,QueryDocumentSnapshot:T_,QuerySnapshot:eS,CollectionReference:wp,FieldPath:Jb,FieldValue:jf,setLogLevel:lH,CACHE_SIZE_UNLIMITED:oU};function hH(n,t){n.INTERNAL.registerComponent(new zi("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("firestore").getImmediate();return t(i,s)},"PUBLIC").setServiceProps({...cH}))}function fH(n){hH(n,(t,e)=>new R9(t,e,new oH)),n.registerVersion(sH,aH)}fH(yo);const x9="firebasestorage.googleapis.com",O9="storageBucket",dH=120*1e3,mH=600*1e3,pH=1e3;class ri extends Ui{constructor(t,e,i=0){super(KE(t),`Firebase Storage: ${e} (${KE(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ri.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return KE(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zn||(zn={}));function KE(n){return"storage/"+n}function Wb(){const n="An unknown error occurred, please check the error payload for server response.";return new ri(zn.UNKNOWN,n)}function gH(n){return new ri(zn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function _H(n){return new ri(zn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yH(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ri(zn.UNAUTHENTICATED,n)}function vH(){return new ri(zn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EH(n){return new ri(zn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function M9(){return new ri(zn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function P9(){return new ri(zn.CANCELED,"User canceled the upload/download.")}function TH(n){return new ri(zn.INVALID_URL,"Invalid URL '"+n+"'.")}function SH(n){return new ri(zn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function bH(){return new ri(zn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+O9+"' property when initializing the app?")}function V9(){return new ri(zn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function AH(){return new ri(zn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function wH(){return new ri(zn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RH(n){return new ri(zn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(n){return new ri(zn.INVALID_ARGUMENT,n)}function k9(){return new ri(zn.APP_DELETED,"The Firebase app was deleted.")}function L9(n){return new ri(zn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Z0(n,t){return new ri(zn.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function E0(n){throw new ri(zn.INTERNAL_ERROR,"Internal error: "+n)}class Ys{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ys.makeFromUrl(t,e)}catch{return new Ys(t,"")}if(i.path==="")return i;throw SH(t)}static makeFromUrl(t,e){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),m={bucket:1,path:3};function g(Z){Z.path_=decodeURIComponent(Z.path)}const E="v[A-Za-z0-9_]+",b=e.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${E}/b/${s}/o${A}`,"i"),D={bucket:1,path:3},k=e===x9?"(?:storage.googleapis.com|storage.cloud.google.com)":e,U="([^?#]*)",j=new RegExp(`^https?://${k}/${s}/${U}`,"i"),X=[{regex:f,indices:m,postModify:o},{regex:N,indices:D,postModify:g},{regex:j,indices:{bucket:1,path:2},postModify:g}];for(let Z=0;Z<X.length;Z++){const pt=X[Z],ot=pt.regex.exec(t);if(ot){const V=ot[pt.indices.bucket];let M=ot[pt.indices.path];M||(M=""),i=new Ys(V,M),pt.postModify(i);break}}if(i==null)throw TH(t);return i}}class CH{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function IH(n,t,e){let i=1,s=null,o=null,c=!1,f=0;function m(){return f===2}let g=!1;function E(...U){g||(g=!0,t.apply(null,U))}function b(U){s=setTimeout(()=>{s=null,n(N,m())},U)}function A(){o&&clearTimeout(o)}function N(U,...j){if(g){A();return}if(U){A(),E.call(null,U,...j);return}if(m()||c){A(),E.call(null,U,...j);return}i<64&&(i*=2);let X;f===1?(f=2,X=0):X=(i+Math.random())*1e3,b(X)}let D=!1;function k(U){D||(D=!0,A(),!g&&(s!==null?(U||(f=2),clearTimeout(s),b(0)):U||(f=1)))}return b(0),o=setTimeout(()=>{c=!0,k(!0)},e),k}function NH(n){n(!1)}function DH(n){return n!==void 0}function xH(n){return typeof n=="function"}function OH(n){return typeof n=="object"&&!Array.isArray(n)}function b2(n){return typeof n=="string"||n instanceof String}function a6(n){return Zb()&&n instanceof Blob}function Zb(){return typeof Blob<"u"}function nS(n,t,e,i){if(i<t)throw tp(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw tp(`Invalid value for '${n}'. Expected ${e} or less.`)}function Qh(n,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function U9(n){const t=encodeURIComponent;let e="?";for(const i in n)if(n.hasOwnProperty(i)){const s=t(i)+"="+t(n[i]);e=e+s+"&"}return e=e.slice(0,-1),e}var ed;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ed||(ed={}));function z9(n,t){const e=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||s||o}class MH{constructor(t,e,i,s,o,c,f,m,g,E,b,A=!0,N=!1){this.url_=t,this.method_=e,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=E,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,k)=>{this.resolve_=D,this.reject_=k,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new x1(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===ed.NO_ERROR,m=o.getStatus();if(!f||z9(m,this.additionalRetryCodes_)&&this.retry){const E=o.getErrorCode()===ed.ABORT;i(!1,new x1(!1,null,E));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new x1(g,o))})},e=(i,s)=>{const o=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());DH(m)?o(m):o()}catch(m){c(m)}else if(f!==null){const m=Wb();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(s.canceled){const m=this.appDelete_?k9():P9();c(m)}else{const m=M9();c(m)}};this.canceled_?e(!1,new x1(!1,null,!0)):this.backoffId_=IH(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&NH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class x1{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function PH(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function VH(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function kH(n,t){t&&(n["X-Firebase-GMPID"]=t)}function LH(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function UH(n,t,e,i,s,o,c=!0,f=!1){const m=U9(n.urlParams),g=n.url+m,E=Object.assign({},n.headers);return kH(E,t),PH(E,e),VH(E,o),LH(E,i),new MH(g,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,f)}function zH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BH(...n){const t=zH();if(t!==void 0){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}else{if(Zb())return new Blob(n);throw new ri(zn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GH(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function qH(n){if(typeof atob>"u")throw RH("base-64");return atob(n)}const po={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YE{constructor(t,e){this.data=t,this.contentType=e||null}}function B9(n,t){switch(n){case po.RAW:return new YE(G9(t));case po.BASE64:case po.BASE64URL:return new YE(q9(n,t));case po.DATA_URL:return new YE(FH(t),jH(t))}throw Wb()}function G9(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{const o=i,c=n.charCodeAt(++e);i=65536|(o&1023)<<10|c&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function HH(n){let t;try{t=decodeURIComponent(n)}catch{throw Z0(po.DATA_URL,"Malformed data URL.")}return G9(t)}function q9(n,t){switch(n){case po.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw Z0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case po.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw Z0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=qH(t)}catch(s){throw s.message.includes("polyfill")?s:Z0(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}class H9{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(e===null)throw Z0(po.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;i!=null&&(this.base64=KH(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function FH(n){const t=new H9(n);return t.base64?q9(po.BASE64,t.rest):HH(t.rest)}function jH(n){return new H9(n).contentType}function KH(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}class qu{constructor(t,e){let i=0,s="";a6(t)?(this.data_=t,i=t.size,s=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,e){if(a6(this.data_)){const i=this.data_,s=GH(i,t,e);return s===null?null:new qu(s)}else{const i=new Uint8Array(this.data_.buffer,t,e-t);return new qu(i,!0)}}static getBlob(...t){if(Zb()){const e=t.map(i=>i instanceof qu?i.data_:i);return new qu(BH.apply(null,e))}else{const e=t.map(c=>b2(c)?B9(po.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let o=0;return e.forEach(c=>{for(let f=0;f<c.length;f++)s[o++]=c[f]}),new qu(s,!0)}}uploadData(){return this.data_}}function $b(n){let t;try{t=JSON.parse(n)}catch{return null}return OH(t)?t:null}function YH(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function QH(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return n.length===0?e:n+"/"+e}function F9(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function XH(n,t){return t}class da{constructor(t,e,i,s){this.server=t,this.local=e||t,this.writable=!!i,this.xform=s||XH}}let O1=null;function JH(n){return!b2(n)||n.length<2?n:F9(n)}function A2(){if(O1)return O1;const n=[];n.push(new da("bucket")),n.push(new da("generation")),n.push(new da("metageneration")),n.push(new da("name","fullPath",!0));function t(o,c){return JH(c)}const e=new da("name");e.xform=t,n.push(e);function i(o,c){return c!==void 0?Number(c):c}const s=new da("size");return s.xform=i,n.push(s),n.push(new da("timeCreated")),n.push(new da("updated")),n.push(new da("md5Hash",null,!0)),n.push(new da("cacheControl",null,!0)),n.push(new da("contentDisposition",null,!0)),n.push(new da("contentEncoding",null,!0)),n.push(new da("contentLanguage",null,!0)),n.push(new da("contentType",null,!0)),n.push(new da("metadata","customMetadata",!0)),O1=n,O1}function WH(n,t){function e(){const i=n.bucket,s=n.fullPath,o=new Ys(i,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:e})}function ZH(n,t,e){const i={};i.type="file";const s=e.length;for(let o=0;o<s;o++){const c=e[o];i[c.local]=c.xform(i,t[c.server])}return WH(i,n),i}function j9(n,t,e){const i=$b(t);return i===null?null:ZH(n,i,e)}function $H(n,t,e,i){const s=$b(t);if(s===null||!b2(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const E=n.bucket,b=n.fullPath,A="/b/"+c(E)+"/o/"+c(b),N=Qh(A,e,i),D=U9({alt:"media",token:g});return N+D})[0]}function t4(n,t){const e={},i=t.length;for(let s=0;s<i;s++){const o=t[s];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const r6="prefixes",o6="items";function tF(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[r6])for(const s of e[r6]){const o=s.replace(/\/$/,""),c=n._makeStorageReference(new Ys(t,o));i.prefixes.push(c)}if(e[o6])for(const s of e[o6]){const o=n._makeStorageReference(new Ys(t,s.name));i.items.push(o)}return i}function eF(n,t,e){const i=$b(e);return i===null?null:tF(n,t,i)}class uc{constructor(t,e,i,s){this.url=t,this.method=e,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xl(n){if(!n)throw Wb()}function w2(n,t){function e(i,s){const o=j9(n,s,t);return Xl(o!==null),o}return e}function nF(n,t){function e(i,s){const o=eF(n,t,s);return Xl(o!==null),o}return e}function iF(n,t){function e(i,s){const o=j9(n,s,t);return Xl(o!==null),$H(o,s,n.host,n._protocol)}return e}function Gp(n){function t(e,i){let s;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?s=vH():s=yH():e.getStatus()===402?s=_H(n.bucket):e.getStatus()===403?s=EH(n.path):s=i,s.status=e.getStatus(),s.serverResponse=i.serverResponse,s}return t}function R2(n){const t=Gp(n);function e(i,s){let o=t(i,s);return i.getStatus()===404&&(o=gH(n.path)),o.serverResponse=s.serverResponse,o}return e}function K9(n,t,e){const i=t.fullServerUrl(),s=Qh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new uc(s,o,w2(n,e),c);return f.errorHandler=R2(t),f}function sF(n,t,e,i,s){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",e.length>0&&(o.delimiter=e),i&&(o.pageToken=i),s&&(o.maxResults=s);const c=t.bucketOnlyServerUrl(),f=Qh(c,n.host,n._protocol),m="GET",g=n.maxOperationRetryTime,E=new uc(f,m,nF(n,t.bucket),g);return E.urlParams=o,E.errorHandler=Gp(t),E}function aF(n,t,e){const i=t.fullServerUrl(),s=Qh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new uc(s,o,iF(n,e),c);return f.errorHandler=R2(t),f}function rF(n,t,e,i){const s=t.fullServerUrl(),o=Qh(s,n.host,n._protocol),c="PATCH",f=t4(e,i),m={"Content-Type":"application/json; charset=utf-8"},g=n.maxOperationRetryTime,E=new uc(o,c,w2(n,i),g);return E.headers=m,E.body=f,E.errorHandler=R2(t),E}function oF(n,t){const e=t.fullServerUrl(),i=Qh(e,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function c(m,g){}const f=new uc(i,s,c,o);return f.successCodes=[200,204],f.errorHandler=R2(t),f}function lF(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function Y9(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=lF(null,t)),i}function uF(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let X="";for(let Z=0;Z<2;Z++)X=X+Math.random().toString().slice(2);return X}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const g=Y9(t,i,s),E=t4(g,e),b="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+m+"--",N=qu.getBlob(b,i,A);if(N===null)throw V9();const D={name:g.fullPath},k=Qh(o,n.host,n._protocol),U="POST",j=n.maxUploadRetryTime,K=new uc(k,U,w2(n,e),j);return K.urlParams=D,K.headers=c,K.body=N.uploadData(),K.errorHandler=Gp(t),K}class wv{constructor(t,e,i,s){this.current=t,this.total=e,this.finalized=!!i,this.metadata=s||null}}function e4(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xl(!1)}return Xl(!!e&&(t||["active"]).indexOf(e)!==-1),e}function cF(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c=Y9(t,i,s),f={name:c.fullPath},m=Qh(o,n.host,n._protocol),g="POST",E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},b=t4(c,e),A=n.maxUploadRetryTime;function N(k){e4(k);let U;try{U=k.getResponseHeader("X-Goog-Upload-URL")}catch{Xl(!1)}return Xl(b2(U)),U}const D=new uc(m,g,N,A);return D.urlParams=f,D.headers=E,D.body=b,D.errorHandler=Gp(t),D}function hF(n,t,e,i){const s={"X-Goog-Upload-Command":"query"};function o(g){const E=e4(g,["active","final"]);let b=null;try{b=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xl(!1)}b||Xl(!1);const A=Number(b);return Xl(!isNaN(A)),new wv(A,i.size(),E==="final")}const c="POST",f=n.maxUploadRetryTime,m=new uc(e,c,o,f);return m.headers=s,m.errorHandler=Gp(t),m}const l6=256*1024;function fF(n,t,e,i,s,o,c,f){const m=new wv(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw AH();const g=m.total-m.current;let E=g;s>0&&(E=Math.min(E,s));const b=m.current,A=b+E;let N="";E===0?N="finalize":g===E?N="upload, finalize":N="upload";const D={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${m.current}`},k=i.slice(b,A);if(k===null)throw V9();function U(Z,pt){const ot=e4(Z,["active","final"]),V=m.current+E,M=i.size();let L;return ot==="final"?L=w2(t,o)(Z,pt):L=null,new wv(V,M,ot==="final",L)}const j="POST",K=t.maxUploadRetryTime,X=new uc(e,j,U,K);return X.headers=D,X.body=k.uploadData(),X.progressCallback=f||null,X.errorHandler=Gp(n),X}const dF={STATE_CHANGED:"state_changed"},ga={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QE(n){switch(n){case"running":case"pausing":case"canceling":return ga.RUNNING;case"paused":return ga.PAUSED;case"success":return ga.SUCCESS;case"canceled":return ga.CANCELED;case"error":return ga.ERROR;default:return ga.ERROR}}class mF{constructor(t,e,i){if(xH(t)||e!=null||i!=null)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Lm(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class pF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ed.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ed.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ed.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,s,o){if(this.sent_)throw E0("cannot .send() more than once");if(eu(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw E0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw E0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw E0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw E0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class gF extends pF{initXhr(){this.xhr_.responseType="text"}}function Hl(){return new gF}class Q9{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=A2(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(zn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(z9(s.status,[]))if(o)s=M9();else{this.sleepTime=Math.max(this.sleepTime*2,pH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(zn.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,e)=>{const i=cF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Hl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const s=hF(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(s,Hl,e,i);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=l6*this._chunkMultiplier,e=new wv(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,o)=>{let c;try{c=fF(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(c,Hl,s,o,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){l6*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=K9(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,Hl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=uF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Hl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e=this._state==="paused";this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=P9(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=QE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,s){const o=new mF(e||void 0,i||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);e!==-1&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(QE(this._state)){case ga.SUCCESS:Lm(this._resolve.bind(null,this.snapshot))();break;case ga.CANCELED:case ga.ERROR:const e=this._reject;Lm(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(QE(this._state)){case ga.RUNNING:case ga.PAUSED:t.next&&Lm(t.next.bind(t,this.snapshot))();break;case ga.SUCCESS:t.complete&&Lm(t.complete.bind(t))();break;case ga.CANCELED:case ga.ERROR:t.error&&Lm(t.error.bind(t,this._error))();break;default:t.error&&Lm(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}class _d{constructor(t,e){this._service=t,e instanceof Ys?this._location=e:this._location=Ys.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new _d(t,e)}get root(){const t=new Ys(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F9(this._location.path)}get storage(){return this._service}get parent(){const t=YH(this._location.path);if(t===null)return null;const e=new Ys(this._location.bucket,t);return new _d(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw L9(t)}}function _F(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new Q9(n,new qu(t),e)}function yF(n){const t={prefixes:[],items:[]};return X9(n,t).then(()=>t)}async function X9(n,t,e){const s=await J9(n,{pageToken:e});t.prefixes.push(...s.prefixes),t.items.push(...s.items),s.nextPageToken!=null&&await X9(n,t,s.nextPageToken)}function J9(n,t){t!=null&&typeof t.maxResults=="number"&&nS("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=sF(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Hl)}function vF(n){n._throwIfRoot("getMetadata");const t=K9(n.storage,n._location,A2());return n.storage.makeRequestWithTokens(t,Hl)}function EF(n,t){n._throwIfRoot("updateMetadata");const e=rF(n.storage,n._location,t,A2());return n.storage.makeRequestWithTokens(e,Hl)}function TF(n){n._throwIfRoot("getDownloadURL");const t=aF(n.storage,n._location,A2());return n.storage.makeRequestWithTokens(t,Hl).then(e=>{if(e===null)throw wH();return e})}function SF(n){n._throwIfRoot("deleteObject");const t=oF(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Hl)}function W9(n,t){const e=QH(n._location.path,t),i=new Ys(n._location.bucket,e);return new _d(n.storage,i)}function bF(n){return/^[A-Za-z]+:\/\//.test(n)}function AF(n,t){return new _d(n,t)}function Z9(n,t){if(n instanceof n4){const e=n;if(e._bucket==null)throw bH();const i=new _d(e,e._bucket);return t!=null?Z9(i,t):i}else return t!==void 0?W9(n,t):n}function wF(n,t){if(t&&bF(t)){if(n instanceof n4)return AF(n,t);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return Z9(n,t)}function u6(n,t){const e=t?.[O9];return e==null?null:Ys.makeFromBucketSpec(e,n)}function RF(n,t,e,i={}){n.host=`${t}:${e}`;const s=eu(t);s&&(Lv(`https://${n.host}/b`),Uv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Sw(o,n.app.options.projectId))}class n4{constructor(t,e,i,s,o,c=!1){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=x9,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dH,this._maxUploadRetryTime=mH,this._requests=new Set,s!=null?this._bucket=Ys.makeFromBucketSpec(s,this._host):this._bucket=u6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ys.makeFromBucketSpec(this._url,t):this._bucket=u6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){nS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){nS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _d(this,t)}_makeRequest(t,e,i,s,o=!0){if(this._deleted)return new CH(k9());{const c=UH(t,this._appId,i,s,e,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,e){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,s).getPromise()}}const c6="@firebase/storage",h6="0.14.0";const CF="storage";function IF(n,t,e){return n=Ht(n),_F(n,t,e)}function NF(n){return n=Ht(n),vF(n)}function DF(n,t){return n=Ht(n),EF(n,t)}function xF(n,t){return n=Ht(n),J9(n,t)}function OF(n){return n=Ht(n),yF(n)}function MF(n){return n=Ht(n),TF(n)}function PF(n){return n=Ht(n),SF(n)}function f6(n,t){return n=Ht(n),wF(n,t)}function VF(n,t){return W9(n,t)}function kF(n,t,e,i={}){RF(n,t,e,i)}function LF(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new n4(e,i,s,t,nc)}function UF(){va(new zi(CF,LF,"PUBLIC").setMultipleInstances(!0)),Xi(c6,h6,""),Xi(c6,h6,"esm2020")}UF();class M1{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class d6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new M1(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new M1(i,this,this._ref))},e)}on(t,e,i,s){let o;return e&&(typeof e=="function"?o=c=>e(new M1(c,this,this._ref)):o={next:e.next?c=>e.next(new M1(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,i||void 0,s||void 0)}}class m6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Qu(t,this._service))}get items(){return this._delegate.items.map(t=>new Qu(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Qu{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=VF(this._delegate,t);return new Qu(e,this.storage)}get root(){return new Qu(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return t==null?null:new Qu(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new d6(IF(this._delegate,t,e),this)}putString(t,e=po.RAW,i){this._throwIfRoot("putString");const s=B9(e,t),o={...i};return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),new d6(new Q9(this._delegate,new qu(s.data,!0),o),this)}listAll(){return OF(this._delegate).then(t=>new m6(t,this.storage))}list(t){return xF(this._delegate,t||void 0).then(e=>new m6(e,this.storage))}getMetadata(){return NF(this._delegate)}updateMetadata(t){return DF(this._delegate,t)}getDownloadURL(){return MF(this._delegate)}delete(){return this._throwIfRoot("delete"),PF(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw L9(t)}}class $9{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(p6(t))throw tp("ref() expected a child path but got a URL, use refFromURL instead.");return new Qu(f6(this._delegate,t),this)}refFromURL(t){if(!p6(t))throw tp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ys.makeFromUrl(t,this._delegate.host)}catch{throw tp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Qu(f6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){kF(this._delegate,t,e,i)}}function p6(n){return/^[A-Za-z]+:\/\//.test(n)}const zF="@firebase/storage-compat",BF="0.4.0";const GF="storage-compat";function qF(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new $9(e,i)}function HF(n){const t={TaskState:ga,TaskEvent:dF,StringFormat:po,Storage:$9,Reference:Qu};n.INTERNAL.registerComponent(new zi(GF,qF,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion(zF,BF)}HF(yo);const tI="@firebase/installations",i4="0.6.19";const eI=1e4,nI=`w:${i4}`,iI="FIS_v2",FF="https://firebaseinstallations.googleapis.com/v1",jF=3600*1e3,KF="installations",YF="Installations";const QF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yd=new nu(KF,YF,QF);function sI(n){return n instanceof Ui&&n.code.includes("request-failed")}function aI({projectId:n}){return`${FF}/projects/${n}/installations`}function rI(n){return{token:n.token,requestStatus:2,expiresIn:JF(n.expiresIn),creationTime:Date.now()}}async function oI(n,t){const i=(await t.json()).error;return yd.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function lI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function XF(n,{refreshToken:t}){const e=lI(n);return e.append("Authorization",WF(t)),e}async function uI(n){const t=await n();return t.status>=500&&t.status<600?n():t}function JF(n){return Number(n.replace("s","000"))}function WF(n){return`${iI} ${n}`}async function ZF({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=aI(n),s=lI(n),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={fid:e,authVersion:iI,appId:n.appId,sdkVersion:nI},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await uI(()=>fetch(i,f));if(m.ok){const g=await m.json();return{fid:g.fid||e,registrationStatus:2,refreshToken:g.refreshToken,authToken:rI(g.authToken)}}else throw await oI("Create Installation",m)}function cI(n){return new Promise(t=>{setTimeout(t,n)})}function $F(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const tj=/^[cdef][\w-]{21}$/,iS="";function ej(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=nj(n);return tj.test(e)?e:iS}catch{return iS}}function nj(n){return $F(n).substr(0,22)}function C2(n){return`${n.appName}!${n.appId}`}const hI=new Map;function fI(n,t){const e=C2(n);dI(e,t),ij(e,t)}function dI(n,t){const e=hI.get(n);if(e)for(const i of e)i(t)}function ij(n,t){const e=sj();e&&e.postMessage({key:n,fid:t}),aj()}let Wf=null;function sj(){return!Wf&&"BroadcastChannel"in self&&(Wf=new BroadcastChannel("[Firebase] FID Change"),Wf.onmessage=n=>{dI(n.data.key,n.data.fid)}),Wf}function aj(){hI.size===0&&Wf&&(Wf.close(),Wf=null)}const rj="firebase-installations-database",oj=1,vd="firebase-installations-store";let XE=null;function s4(){return XE||(XE=Np(rj,oj,{upgrade:(n,t)=>{t===0&&n.createObjectStore(vd)}})),XE}async function Rv(n,t){const e=C2(n),s=(await s4()).transaction(vd,"readwrite"),o=s.objectStore(vd),c=await o.get(e);return await o.put(t,e),await s.done,(!c||c.fid!==t.fid)&&fI(n,t.fid),t}async function mI(n){const t=C2(n),i=(await s4()).transaction(vd,"readwrite");await i.objectStore(vd).delete(t),await i.done}async function I2(n,t){const e=C2(n),s=(await s4()).transaction(vd,"readwrite"),o=s.objectStore(vd),c=await o.get(e),f=t(c);return f===void 0?await o.delete(e):await o.put(f,e),await s.done,f&&(!c||c.fid!==f.fid)&&fI(n,f.fid),f}async function a4(n){let t;const e=await I2(n.appConfig,i=>{const s=lj(i),o=uj(n,s);return t=o.registrationPromise,o.installationEntry});return e.fid===iS?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function lj(n){const t=n||{fid:ej(),registrationStatus:0};return pI(t)}function uj(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(yd.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=cj(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:hj(n)}:{installationEntry:t}}async function cj(n,t){try{const e=await ZF(n,t);return Rv(n.appConfig,e)}catch(e){throw sI(e)&&e.customData.serverCode===409?await mI(n.appConfig):await Rv(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function hj(n){let t=await g6(n.appConfig);for(;t.registrationStatus===1;)await cI(100),t=await g6(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await a4(n);return i||e}return t}function g6(n){return I2(n,t=>{if(!t)throw yd.create("installation-not-found");return pI(t)})}function pI(n){return fj(n)?{fid:n.fid,registrationStatus:0}:n}function fj(n){return n.registrationStatus===1&&n.registrationTime+eI<Date.now()}async function dj({appConfig:n,heartbeatServiceProvider:t},e){const i=mj(n,e),s=XF(n,e),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={installation:{sdkVersion:nI,appId:n.appId}},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await uI(()=>fetch(i,f));if(m.ok){const g=await m.json();return rI(g)}else throw await oI("Generate Auth Token",m)}function mj(n,{fid:t}){return`${aI(n)}/${t}/authTokens:generate`}async function r4(n,t=!1){let e;const i=await I2(n.appConfig,o=>{if(!gI(o))throw yd.create("not-registered");const c=o.authToken;if(!t&&_j(c))return o;if(c.requestStatus===1)return e=pj(n,t),o;{if(!navigator.onLine)throw yd.create("app-offline");const f=vj(o);return e=gj(n,f),f}});return e?await e:i.authToken}async function pj(n,t){let e=await _6(n.appConfig);for(;e.authToken.requestStatus===1;)await cI(100),e=await _6(n.appConfig);const i=e.authToken;return i.requestStatus===0?r4(n,t):i}function _6(n){return I2(n,t=>{if(!gI(t))throw yd.create("not-registered");const e=t.authToken;return Ej(e)?{...t,authToken:{requestStatus:0}}:t})}async function gj(n,t){try{const e=await dj(n,t),i={...t,authToken:e};return await Rv(n.appConfig,i),e}catch(e){if(sI(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await mI(n.appConfig);else{const i={...t,authToken:{requestStatus:0}};await Rv(n.appConfig,i)}throw e}}function gI(n){return n!==void 0&&n.registrationStatus===2}function _j(n){return n.requestStatus===2&&!yj(n)}function yj(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+jF}function vj(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function Ej(n){return n.requestStatus===1&&n.requestTime+eI<Date.now()}async function Tj(n){const t=n,{installationEntry:e,registrationPromise:i}=await a4(t);return i?i.catch(console.error):r4(t).catch(console.error),e.fid}async function Sj(n,t=!1){const e=n;return await bj(e),(await r4(e,t)).token}async function bj(n){const{registrationPromise:t}=await a4(n);t&&await t}function Aj(n){if(!n||!n.options)throw JE("App Configuration");if(!n.name)throw JE("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw JE(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function JE(n){return yd.create("missing-app-config-values",{valueName:n})}const _I="installations",wj="installations-internal",Rj=n=>{const t=n.getProvider("app").getImmediate(),e=Aj(t),i=Gv(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Cj=n=>{const t=n.getProvider("app").getImmediate(),e=Gv(t,_I).getImmediate();return{getId:()=>Tj(e),getToken:s=>Sj(e,s)}};function Ij(){va(new zi(_I,Rj,"PUBLIC")),va(new zi(wj,Cj,"PRIVATE"))}Ij();Xi(tI,i4);Xi(tI,i4,"esm2020");const Nj="/firebase-messaging-sw.js",Dj="/firebase-cloud-messaging-push-scope",yI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xj="https://fcmregistrations.googleapis.com/v1",vI="google.c.a.c_id",Oj="google.c.a.c_l",Mj="google.c.a.ts",Pj="google.c.a.e",y6=1e4;var v6;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(v6||(v6={}));var S_;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(S_||(S_={}));function Bu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vj(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const WE="fcm_token_details_db",kj=5,E6="fcm_token_object_Store";async function Lj(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(WE))return null;let t=null;return(await Np(WE,kj,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(E6))return;const f=c.objectStore(E6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Bu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Bu(g.auth),p256dh:Bu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Bu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Bu(g.auth),p256dh:Bu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Bu(g.vapidKey)}}}}}})).close(),await Km(WE),await Km("fcm_vapid_details_db"),await Km("undefined"),Uj(t)?t:null}function Uj(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const zj="firebase-messaging-database",Bj=1,Ed="firebase-messaging-store";let ZE=null;function o4(){return ZE||(ZE=Np(zj,Bj,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Ed)}})),ZE}async function EI(n){const t=u4(n),i=await(await o4()).transaction(Ed).objectStore(Ed).get(t);if(i)return i;{const s=await Lj(n.appConfig.senderId);if(s)return await l4(n,s),s}}async function l4(n,t){const e=u4(n),s=(await o4()).transaction(Ed,"readwrite");return await s.objectStore(Ed).put(t,e),await s.done,t}async function Gj(n){const t=u4(n),i=(await o4()).transaction(Ed,"readwrite");await i.objectStore(Ed).delete(t),await i.done}function u4({appConfig:n}){return n.appId}const qj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ya=new nu("messaging","Messaging",qj);async function Hj(n,t){const e=await h4(n),i=SI(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(c4(n.appConfig),s)).json()}catch(c){throw ya.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw ya.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw ya.create("token-subscribe-no-token");return o.token}async function Fj(n,t){const e=await h4(n),i=SI(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${c4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw ya.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw ya.create("token-update-failed",{errorInfo:c})}if(!o.token)throw ya.create("token-update-no-token");return o.token}async function TI(n,t){const i={method:"DELETE",headers:await h4(n)};try{const o=await(await fetch(`${c4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw ya.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw ya.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function c4({projectId:n}){return`${xj}/projects/${n}/registrations`}async function h4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function SI({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==yI&&(s.web.applicationPubKey=i),s}const jj=10080*60*1e3;async function Kj(n){const t=await Xj(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:Bu(t.getKey("auth")),p256dh:Bu(t.getKey("p256dh"))},i=await EI(n.firebaseDependencies);if(i){if(Jj(i.subscriptionOptions,e))return Date.now()>=i.createTime+jj?Qj(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await TI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return T6(n.firebaseDependencies,e)}else return T6(n.firebaseDependencies,e)}async function Yj(n){const t=await EI(n.firebaseDependencies);t&&(await TI(n.firebaseDependencies,t.token),await Gj(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function Qj(n,t){try{const e=await Fj(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await l4(n.firebaseDependencies,i),e}catch(e){throw e}}async function T6(n,t){const i={token:await Hj(n,t),createTime:Date.now(),subscriptionOptions:t};return await l4(n,i),i.token}async function Xj(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vj(t)})}function Jj(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function S6(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Wj(t,n),Zj(t,n),$j(t,n),t}function Wj(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function Zj(n,t){t.data&&(n.data=t.data)}function $j(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function tK(n){return typeof n=="object"&&!!n&&vI in n}function eK(n){if(!n||!n.options)throw $E("App Configuration Object");if(!n.name)throw $E("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw $E(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function $E(n){return ya.create("missing-app-config-values",{valueName:n})}let nK=class{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=eK(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}};async function bI(n){try{n.swRegistration=await navigator.serviceWorker.register(Nj,{scope:Dj}),n.swRegistration.update().catch(()=>{}),await iK(n.swRegistration)}catch(t){throw ya.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function iK(n){return new Promise((t,e)=>{const i=setTimeout(()=>e(new Error(`Service worker not registered after ${y6} ms`)),y6),s=n.installing||n.waiting;n.active?(clearTimeout(i),t()):s?s.onstatechange=o=>{o.target?.state==="activated"&&(s.onstatechange=null,clearTimeout(i),t())}:(clearTimeout(i),e(new Error("No incoming service worker found.")))})}async function sK(n,t){if(!t&&!n.swRegistration&&await bI(n),!(!t&&n.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw ya.create("invalid-sw-registration");n.swRegistration=t}}async function aK(n,t){t?n.vapidKey=t:n.vapidKey||(n.vapidKey=yI)}async function AI(n,t){if(!navigator)throw ya.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ya.create("permission-blocked");return await aK(n,t?.vapidKey),await sK(n,t?.serviceWorkerRegistration),Kj(n)}async function rK(n,t,e){const i=oK(t);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:e[vI],message_name:e[Oj],message_time:e[Mj],message_device_time:Math.floor(Date.now()/1e3)})}function oK(n){switch(n){case S_.NOTIFICATION_CLICKED:return"notification_open";case S_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function lK(n,t){const e=t.data;if(!e.isFirebaseMessaging)return;n.onMessageHandler&&e.messageType===S_.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(S6(e)):n.onMessageHandler.next(S6(e)));const i=e.data;tK(i)&&i[Pj]==="1"&&await rK(n,e.messageType,i)}const b6="@firebase/messaging",A6="0.12.23";const uK=n=>{const t=new nK(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>lK(t,e)),t},cK=n=>{const t=n.getProvider("messaging").getImmediate();return{getToken:i=>AI(t,i)}};function hK(){va(new zi("messaging",uK,"PUBLIC")),va(new zi("messaging-internal",cK,"PRIVATE")),Xi(b6,A6),Xi(b6,A6,"esm2020")}async function fK(n){if(!navigator)throw ya.create("only-available-in-window");return n.swRegistration||await bI(n),Yj(n)}function dK(n,t){if(!navigator)throw ya.create("only-available-in-window");return n.onMessageHandler=t,()=>{n.onMessageHandler=null}}async function mK(n,t){return n=Ht(n),AI(n,t)}function pK(n){return n=Ht(n),fK(n)}function gK(n,t){return n=Ht(n),dK(n,t)}hK();const wI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_K="https://fcmregistrations.googleapis.com/v1",RI="FCM_MSG",yK="google.c.a.c_id",vK=3,EK=1;var Cv;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Cv||(Cv={}));var Iv;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Iv||(Iv={}));function Gu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function TK(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const tT="fcm_token_details_db",SK=5,w6="fcm_token_object_Store";async function bK(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(tT))return null;let t=null;return(await Np(tT,SK,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(w6))return;const f=c.objectStore(w6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Gu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Gu(g.auth),p256dh:Gu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Gu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Gu(g.auth),p256dh:Gu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Gu(g.vapidKey)}}}}}})).close(),await Km(tT),await Km("fcm_vapid_details_db"),await Km("undefined"),AK(t)?t:null}function AK(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const wK="firebase-messaging-database",RK=1,Td="firebase-messaging-store";let eT=null;function f4(){return eT||(eT=Np(wK,RK,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Td)}})),eT}async function d4(n){const t=p4(n),i=await(await f4()).transaction(Td).objectStore(Td).get(t);if(i)return i;{const s=await bK(n.appConfig.senderId);if(s)return await m4(n,s),s}}async function m4(n,t){const e=p4(n),s=(await f4()).transaction(Td,"readwrite");return await s.objectStore(Td).put(t,e),await s.done,t}async function CK(n){const t=p4(n),i=(await f4()).transaction(Td,"readwrite");await i.objectStore(Td).delete(t),await i.done}function p4({appConfig:n}){return n.appId}const IK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Jl=new nu("messaging","Messaging",IK);async function NK(n,t){const e=await _4(n),i=II(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(g4(n.appConfig),s)).json()}catch(c){throw Jl.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Jl.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Jl.create("token-subscribe-no-token");return o.token}async function DK(n,t){const e=await _4(n),i=II(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${g4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw Jl.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Jl.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Jl.create("token-update-no-token");return o.token}async function CI(n,t){const i={method:"DELETE",headers:await _4(n)};try{const o=await(await fetch(`${g4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw Jl.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw Jl.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function g4({projectId:n}){return`${_K}/projects/${n}/registrations`}async function _4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function II({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==wI&&(s.web.applicationPubKey=i),s}const xK=10080*60*1e3;async function OK(n){const t=await PK(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:Gu(t.getKey("auth")),p256dh:Gu(t.getKey("p256dh"))},i=await d4(n.firebaseDependencies);if(i){if(VK(i.subscriptionOptions,e))return Date.now()>=i.createTime+xK?MK(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await CI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return C6(n.firebaseDependencies,e)}else return C6(n.firebaseDependencies,e)}async function R6(n){const t=await d4(n.firebaseDependencies);t&&(await CI(n.firebaseDependencies,t.token),await CK(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function MK(n,t){try{const e=await DK(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await m4(n.firebaseDependencies,i),e}catch(e){throw e}}async function C6(n,t){const i={token:await NK(n,t),createTime:Date.now(),subscriptionOptions:t};return await m4(n,i),i.token}async function PK(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:TK(t)})}function VK(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function kK(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return LK(t,n),UK(t,n),zK(t,n),t}function LK(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function UK(n,t){t.data&&(n.data=t.data)}function zK(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function BK(n){return typeof n=="object"&&!!n&&yK in n}function GK(n){return new Promise(t=>{setTimeout(t,n)})}async function qK(n,t){const e=HK(t,await n.firebaseDependencies.installations.getId());FK(n,e,t.productId)}function HK(n,t){const e={};return n.from&&(e.project_number=n.from),n.fcmMessageId&&(e.message_id=n.fcmMessageId),e.instance_id=t,n.notification?e.message_type=Cv.DISPLAY_NOTIFICATION.toString():e.message_type=Cv.DATA_MESSAGE.toString(),e.sdk_platform=vK.toString(),e.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(e.collapse_key=n.collapse_key),e.event=EK.toString(),n.fcmOptions?.analytics_label&&(e.analytics_label=n.fcmOptions?.analytics_label),e}function FK(n,t,e){const i={};i.event_time_ms=Math.floor(Date.now()).toString(),i.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),e&&(i.compliance_data=jK(e)),n.logEvents.push(i)}function jK(n){return{privacy_context:{prequest:{origin_associated_product_id:n}}}}async function KK(n,t){const{newSubscription:e}=n;if(!e){await R6(t);return}const i=await d4(t.firebaseDependencies);await R6(t),t.vapidKey=i?.subscriptionOptions?.vapidKey??wI,await OK(t)}async function YK(n,t){const e=JK(n);if(!e)return;t.deliveryMetricsExportedToBigQueryEnabled&&await qK(t,e);const i=await NI();if(ZK(i))return $K(i,e);if(e.notification&&await tY(XK(e)),!!t&&t.onBackgroundMessageHandler){const s=kK(e);typeof t.onBackgroundMessageHandler=="function"?await t.onBackgroundMessageHandler(s):t.onBackgroundMessageHandler.next(s)}}async function QK(n){const t=n.notification?.data?.[RI];if(t){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const e=eY(t);if(!e)return;const i=new URL(e,self.location.href),s=new URL(self.location.origin);if(i.host!==s.host)return;let o=await WK(i);if(o?o=await o.focus():(o=await self.clients.openWindow(e),await GK(3e3)),!!o)return t.messageType=Iv.NOTIFICATION_CLICKED,t.isFirebaseMessaging=!0,o.postMessage(t)}function XK(n){const t={...n.notification};return t.data={[RI]:n},t}function JK({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function WK(n){const t=await NI();for(const e of t){const i=new URL(e.url,self.location.href);if(n.host===i.host)return e}return null}function ZK(n){return n.some(t=>t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://"))}function $K(n,t){t.isFirebaseMessaging=!0,t.messageType=Iv.PUSH_RECEIVED;for(const e of n)e.postMessage(t)}function NI(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function tY(n){const{actions:t}=n,{maxActions:e}=Notification;return t&&e&&t.length>e&&console.warn(`This browser only supports ${e} actions. The remaining actions will not be displayed.`),self.registration.showNotification(n.title??"",n)}function eY(n){const t=n.fcmOptions?.link??n.notification?.click_action;return t||(BK(n.data)?self.location.origin:null)}function nY(n){if(!n||!n.options)throw nT("App Configuration Object");if(!n.name)throw nT("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw nT(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function nT(n){return Jl.create("missing-app-config-values",{valueName:n})}class iY{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=nY(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}}const sY=n=>{const t=new iY(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",e=>{e.waitUntil(YK(e,t))}),self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(KK(e,t))}),self.addEventListener("notificationclick",e=>{e.waitUntil(QK(e))}),t};function aY(){va(new zi("messaging-sw",sY,"PUBLIC"))}function rY(n,t){if(self.document!==void 0)throw Jl.create("only-available-in-sw");return n.onBackgroundMessageHandler=t,()=>{n.onBackgroundMessageHandler=null}}function oY(n,t){return n=Ht(n),rY(n,t)}aY();const lY="@firebase/messaging-compat",uY="0.2.23";function cY(){return self&&"ServiceWorkerGlobalScope"in self?fY():hY()}function hY(){return typeof window<"u"&&nd()&&oM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function fY(){return nd()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class I6{constructor(t,e){this.app=t,this._delegate=e,this.app=t,this._delegate=e}async getToken(t){return mK(this._delegate,t)}async deleteToken(){return pK(this._delegate)}onMessage(t){return gK(this._delegate,t)}onBackgroundMessage(t){return oY(this._delegate,t)}}const dY=n=>self&&"ServiceWorkerGlobalScope"in self?new I6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new I6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),mY={isSupported:cY};function pY(){yo.INTERNAL.registerComponent(new zi("messaging-compat",dY,"PUBLIC").setServiceProps(mY))}pY();yo.registerVersion(lY,uY);const gY="type.googleapis.com/google.protobuf.Int64Value",_Y="type.googleapis.com/google.protobuf.UInt64Value";function DI(n,t){const e={};for(const i in n)n.hasOwnProperty(i)&&(e[i]=t(n[i]));return e}function Nv(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(t=>Nv(t));if(typeof n=="function"||typeof n=="object")return DI(n,t=>Nv(t));throw new Error("Data cannot be encoded in JSON: "+n)}function Rp(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case gY:case _Y:{const t=Number(n.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+n);return t}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(t=>Rp(t)):typeof n=="function"||typeof n=="object"?DI(n,t=>Rp(t)):n}const xI="functions";const N6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $a extends Ui{constructor(t,e,i){super(`${xI}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,$a.prototype)}}function yY(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Dv(n,t){let e=yY(n),i=e,s;try{const o=t&&t.error;if(o){const c=o.status;if(typeof c=="string"){if(!N6[c])return new $a("internal","internal");e=N6[c],i=c}const f=o.message;typeof f=="string"&&(i=f),s=o.details,s!==void 0&&(s=Rp(s))}}catch{}return e==="ok"?null:new $a(e,i,s)}class vY{constructor(t,e,i,s){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,An(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:s}}}const D6="us-central1",EY=/^data: (.*?)(?:\n|$)/;function TY(n){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new $a("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{t&&clearTimeout(t)}}}let SY=class{constructor(t,e,i,s,o=D6,c=(...f)=>fetch(...f)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new vY(t,e,i,s),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(o);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=D6}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}};function bY(n,t,e){const i=eu(t);n.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(Lv(n.emulatorOrigin+"/backends"),Uv("Functions",!0))}function AY(n,t,e){const i=s=>CY(n,t,s,e||{});return i.stream=(s,o)=>IY(n,t,s,o),i}function wY(n,t,e){const i=s=>PI(n,t,s,e||{});return i.stream=(s,o)=>VI(n,t,s,o||{}),i}function OI(n){return n.emulatorOrigin&&eu(n.emulatorOrigin)?"include":void 0}async function RY(n,t,e,i,s){e["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(t),headers:e,credentials:OI(s)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function MI(n,t){const e={},i=await n.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function CY(n,t,e,i){const s=n._url(t);return PI(n,s,e,i)}async function PI(n,t,e,i){e=Nv(e);const s={data:e},o=await MI(n,i),c=i.timeout||7e4,f=TY(c),m=await Promise.race([RY(t,s,o,n.fetchImpl,n),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new $a("cancelled","Firebase Functions instance was deleted.");const g=Dv(m.status,m.json);if(g)throw g;if(!m.json)throw new $a("internal","Response is not valid JSON object.");let E=m.json.data;if(typeof E>"u"&&(E=m.json.result),typeof E>"u")throw new $a("internal","Response is missing data field.");return{data:Rp(E)}}function IY(n,t,e,i){const s=n._url(t);return VI(n,s,e,i||{})}async function VI(n,t,e,i){e=Nv(e);const s={data:e},o=await MI(n,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await n.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:i?.signal,credentials:OI(n)})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const D=new $a("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const N=Dv(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let f,m;const g=new Promise((A,N)=>{f=A,m=N});i?.signal?.addEventListener("abort",()=>{const A=new $a("cancelled","Request was cancelled.");m(A)});const E=c.body.getReader(),b=NY(E,f,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const A=b.getReader();return{async next(){const{value:N,done:D}=await A.read();return{value:N,done:D}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:g}}function NY(n,t,e,i){const s=(c,f)=>{const m=c.match(EY);if(!m)return;const g=m[1];try{const E=JSON.parse(g);if("result"in E){t(Rp(E.result));return}if("message"in E){f.enqueue(Rp(E.message));return}if("error"in E){const b=Dv(0,E);f.error(b),e(b);return}}catch(E){if(E instanceof $a){f.error(E),e(E);return}}},o=new TextDecoder;return new ReadableStream({start(c){let f="";return m();async function m(){if(i?.aborted){const g=new $a("cancelled","Request was cancelled");return c.error(g),e(g),Promise.resolve()}try{const{value:g,done:E}=await n.read();if(E){f.trim()&&s(f.trim(),c),c.close();return}if(i?.aborted){const A=new $a("cancelled","Request was cancelled");c.error(A),e(A),await n.cancel();return}f+=o.decode(g,{stream:!0});const b=f.split(`
`);f=b.pop()||"";for(const A of b)A.trim()&&s(A.trim(),c);return m()}catch(g){const E=g instanceof $a?g:Dv(0,null);c.error(E),e(E)}}},cancel(){return n.cancel()}})}const x6="@firebase/functions",O6="0.13.1";const DY="auth-internal",xY="app-check-internal",OY="messaging-internal";function MY(n){const t=(e,{instanceIdentifier:i})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider(DY),c=e.getProvider(OY),f=e.getProvider(xY);return new SY(s,o,c,f,i)};va(new zi(xI,t,"PUBLIC").setMultipleInstances(!0)),Xi(x6,O6,n),Xi(x6,O6,"esm2020")}function M6(n,t,e){bY(Ht(n),t,e)}function PY(n,t,e){return AY(Ht(n),t,e)}function VY(n,t,e){return wY(Ht(n),t,e)}MY();const kY="@firebase/functions-compat",LY="0.4.1";class kI{constructor(t,e){this.app=t,this._delegate=e,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(t,e){return PY(this._delegate,t,e)}httpsCallableFromURL(t,e){return VY(this._delegate,t,e)}useFunctionsEmulator(t){const e=t.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(e==null)throw new Ui("functions","No origin provided to useFunctionsEmulator()");if(e[2]==null)throw new Ui("functions","Port missing in origin provided to useFunctionsEmulator()");return M6(this._delegate,e[1],Number(e[2]))}useEmulator(t,e){return M6(this._delegate,t,e)}}const UY="us-central1",zY=(n,{instanceIdentifier:t})=>{const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("functions").getImmediate({identifier:t??UY});return new kI(e,i)};function BY(){const n={Functions:kI};yo.INTERNAL.registerComponent(new zi("functions-compat",zY,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}BY();yo.registerVersion(kY,LY);const GY={apiKey:"AIzaSyCZ2yeJJ34VwYAmQnFCEv72Q1uDFFGKKjQ",authDomain:"ancb-painel-db.firebaseapp.com",projectId:"ancb-painel-db",storageBucket:"ancb-painel-db.appspot.com",messagingSenderId:"792900234002",appId:"1:792900234002:web:2a37004deb046cb8f261cb",measurementId:"G-VCMEKP1XP4"},K_=yo.initializeApp(GY),qY=K_.firestore();K_.auth();K_.storage();K_.functions();let HY=null;try{typeof window<"u"&&"serviceWorker"in navigator&&yo.messaging.isSupported()&&(HY=K_.messaging())}catch(n){console.warn("Firebase Messaging not supported in this environment",n)}const Hm={courtHalf:"https://i.imgur.com/SIdCxjw.png",courtFull:"https://i.imgur.com/cw3dO3o.png",logo:"https://i.imgur.com/sfO9ILj.png",defaultAvatar:"https://ui-avatars.com/api/?background=0D8ABC&color=fff&rounded=true&bold=true&name="},FY=["#ff0000","#000000","#ffffff"],jY=({token:n,onDragEnd:t,onSelect:e,isSelected:i,isLocked:s})=>{const[o,c]=oe.useState(null),[f,m]=oe.useState("loading");oe.useEffect(()=>{if(n.type==="rival"){m("error");return}const k=new window.Image,U=n.foto||`${Hm.defaultAvatar}${n.nome}`;if(U.startsWith("data:"))k.src=U;else{k.crossOrigin="Anonymous";const K=U.includes("?")?"&":"?";k.src=`${U}${K}t=${new Date().getTime()}`}k.onload=()=>{k.width>0&&k.height>0?(c(k),m("loaded")):m("error")},k.onerror=()=>m("error")},[n.foto,n.nome]);const g=22,E=g*2,b=n.type==="rival",A=b?"#ef4444":"#062553",N=b?"#991b1b":"#041b3d",D=b||f!=="loaded";return Rt.jsxs(TO,{draggable:!s,x:n.x,y:n.y,onDragEnd:k=>t(n.id,k.target.x(),k.target.y()),onClick:k=>{k.cancelBubble=!0,e(n.id)},onTap:k=>{k.cancelBubble=!0,e(n.id)},children:[Rt.jsx(AE,{radius:g,fill:"black",opacity:.3,offsetX:-2,offsetY:-2}),D&&Rt.jsx(AE,{radius:g,fill:A}),!D&&o&&Rt.jsx(mT,{image:o,width:E,height:E,x:-g,y:-g,cornerRadius:g}),Rt.jsx(AE,{radius:g,stroke:i?"#F27405":N,strokeWidth:i?4:2,fillEnabled:!1}),D&&Rt.jsx(FA,{text:b?n.numero?.toString():n.nome?.charAt(0).toUpperCase(),fontSize:20,fontStyle:"bold",fill:"white",align:"center",verticalAlign:"middle",offsetX:6,offsetY:8,listening:!1}),!b&&n.nome&&Rt.jsx(FA,{text:n.nome.split(" ")[0],y:g+6,fontSize:11,fill:"white",align:"center",width:100,offsetX:50,shadowColor:"black",shadowBlur:3,listening:!1})]})},KY=()=>{const n=oe.useRef(null),t=oe.useRef(null),[e,i]=oe.useState({width:0,height:0}),[s,o]=oe.useState("half"),[c,f]=oe.useState({lines:null,logo:null}),[m,g]=oe.useState([]),[E,b]=oe.useState(!1),[A,N]=oe.useState(null),[D,k]=oe.useState([{tokens:[],lines:[]}]),[U,j]=oe.useState(0),[K,X]=oe.useState([]),[Z,pt]=oe.useState([]),[ot,V]=oe.useState("cursor"),[M,L]=oe.useState("#ff0000"),[q,G]=oe.useState(!1),[F,z]=oe.useState(!1),[Ft,Lt]=oe.useState({top:0,right:0}),[W,Et]=oe.useState(!1),[vt,Ut]=oe.useState(!1),[Kt,H]=oe.useState(""),[ct,Ct]=oe.useState([]);oe.useEffect(()=>{(async()=>{try{const Te=(await A8(gb(qY,"jogadores"))).docs.map(Se=>({id:Se.id,...Se.data()}));g(Te.sort((Se,er)=>Se.nome.localeCompare(er.nome)))}catch(Yt){console.error("Erro ao buscar jogadores:",Yt)}})(),vo()},[]),oe.useEffect(()=>{(()=>{const Yt=new window.Image;Yt.crossOrigin="Anonymous",Yt.src=s==="half"?Hm.courtHalf:Hm.courtFull;const Te=new window.Image;Te.crossOrigin="Anonymous",Te.src=Hm.logo,Promise.all([new Promise(Se=>Yt.onload=Se),new Promise(Se=>Te.onload=Se)]).then(()=>{f({lines:Yt,logo:Te})})})()},[s]),oe.useEffect(()=>{const At=()=>{if(n.current&&(i({width:n.current.offsetWidth-85,height:n.current.offsetHeight}),K.length===0&&D[0].tokens.length===0)){const Te=[1,2,3,4,5].map(Se=>({id:`rival-${Se}`,type:"rival",numero:Se,x:40,y:100+Se*60}));zt(Te,[])}};return At(),window.addEventListener("resize",At),()=>window.removeEventListener("resize",At)},[]),oe.useEffect(()=>{const At=()=>{F&&z(!1)};return document.addEventListener("mousedown",At),()=>document.removeEventListener("mousedown",At)},[F]);const zt=(At,Yt)=>{X(At),pt(Yt),k(Te=>{const Se=[...Te];return Se[U]={tokens:At,lines:Yt},Se})},te=At=>{At>=0&&At<D.length&&(j(At),X(D[At].tokens),pt(D[At].lines),N(null))},se=()=>{const Yt={tokens:JSON.parse(JSON.stringify(K)),lines:[]},Te=[...D,Yt];k(Te),j(Te.length-1),X(Yt.tokens),pt(Yt.lines),N(null)},Ee=()=>{if(D.length>1){if(!confirm("Deseja apagar este frame?"))return;const At=D.filter((Te,Se)=>Se!==U);k(At);const Yt=U>=At.length?At.length-1:U;j(Yt),X(At[Yt].tokens),pt(At[Yt].lines)}},gn=At=>{const Yt={id:`${At.id}-${Date.now()}`,type:"ancb",nome:At.nome,foto:At.foto,x:e.width/2+(Math.random()*40-20),y:e.height/2+(Math.random()*40-20)};zt([...K,Yt],Z)},De=(At,Yt,Te)=>{const Se=K.map(er=>er.id===At?{...er,x:Yt,y:Te}:er);zt(Se,Z)},Cr=()=>{if(A){if(A.startsWith("rival-")){const At=parseInt(A.split("-")[1]);De(A,40,100+At*60)}else{const At=K.filter(Yt=>Yt.id!==A);zt(At,Z)}N(null)}},Ir=At=>{const Yt=At.evt.pointerType==="pen";if(ot==="pen"||Yt){G(!0);const Te=At.target.getStage().getPointerPosition(),Se={tool:"pen",color:M,points:[Te.x,Te.y]};pt([...Z,Se])}},Is=At=>{if(!q)return;const Te=At.target.getStage().getPointerPosition(),Se=Z[Z.length-1];Se&&(Se.points=Se.points.concat([Te.x,Te.y]),Z.splice(Z.length-1,1,Se),pt(Z.concat()))},ls=()=>{q&&(G(!1),zt(K,Z))},Ns=()=>{const At=Z.slice(0,-1);zt(K,At)},tr=()=>{zt(K,[])},$i=()=>{if(V("pen"),ot!=="pen"){if(t.current){const Yt=t.current.getBoundingClientRect();Lt({top:Yt.top,right:window.innerWidth-Yt.left+8})}z(!0)}else if(F)z(!1);else{if(t.current){const Yt=t.current.getBoundingClientRect();Lt({top:Yt.top,right:window.innerWidth-Yt.left+8})}z(!0)}},us=()=>{if(!Kt.trim())return alert("Digite um nome!");const Yt=[{id:Date.now().toString(),name:Kt,courtType:s,frames:D,createdAt:Date.now()},...ct];Ct(Yt),localStorage.setItem("ancb_plays",JSON.stringify(Yt)),Et(!1),H(""),alert("Salvo!")},vo=()=>{const At=localStorage.getItem("ancb_plays");if(At)try{Ct(JSON.parse(At))}catch{}},_n=At=>{o(At.courtType),k(At.frames),te(0),Ut(!1)},rn=(At,Yt)=>{if(Yt.stopPropagation(),confirm("Apagar jogada?")){const Te=ct.filter(Se=>Se.id!==At);Ct(Te),localStorage.setItem("ancb_plays",JSON.stringify(Te))}};let cs=1,Bi=0,nn=0,In=0,Js=0,bi={w:0,h:0,x:0,y:0};if(c.lines&&e.width>0&&(cs=Math.min(e.width*.95/c.lines.width,e.height*.95/c.lines.height),Bi=c.lines.width*cs,nn=c.lines.height*cs,In=(e.width-Bi)/2,Js=(e.height-nn)/2,c.logo)){const At=Bi*.2/c.logo.width;bi.w=c.logo.width*At,bi.h=c.logo.height*At,bi.x=In+(Bi-bi.w)/2,bi.y=Js+(nn-bi.h)/2}return Rt.jsxs("div",{className:"flex flex-col h-screen bg-slate-900 text-white font-sans overflow-hidden",children:[Rt.jsxs("header",{className:"px-4 py-2 flex justify-between items-center bg-[#062553] border-b-4 border-[#041b3d] shadow-lg h-16 shrink-0 z-20",children:[Rt.jsxs("div",{className:"flex items-center gap-2",children:[Rt.jsx("img",{src:Hm.logo,alt:"Logo",className:"w-10 h-10 object-contain drop-shadow-md"}),Rt.jsxs("div",{className:"hidden sm:block",children:[Rt.jsx("h1",{className:"font-bold text-lg leading-tight",children:"Prancheta Ttica"}),Rt.jsx("p",{className:"text-[10px] text-gray-300",children:"Modo Offline"})]})]}),Rt.jsxs("div",{className:"flex items-center gap-2",children:[Rt.jsxs("button",{onClick:()=>Ut(!0),className:"bg-slate-700 hover:bg-slate-600 px-3 py-2 rounded-lg text-white font-bold text-sm flex items-center gap-2 transition-colors",children:[Rt.jsx(KA,{size:18})," ",Rt.jsx("span",{className:"hidden sm:inline",children:"Jogadas"})]}),Rt.jsxs("button",{onClick:()=>Et(!0),className:"bg-green-600 hover:bg-green-700 px-3 py-2 rounded-lg text-white font-bold text-sm flex items-center gap-2 shadow-lg transition-colors",children:[Rt.jsx(YA,{size:18})," ",Rt.jsx("span",{className:"hidden sm:inline",children:"Salvar"})]}),Rt.jsx("div",{className:"w-px h-8 bg-slate-700 mx-1"}),A&&Rt.jsx("button",{onClick:Cr,className:"bg-red-600 p-2 rounded-lg text-white shadow animate-pulse",children:Rt.jsx(wE,{size:20})}),Rt.jsx("button",{onClick:()=>b(!0),className:"bg-[#F27405] hover:bg-orange-600 text-white px-3 py-2 rounded-lg font-bold flex items-center gap-2 ml-1",children:Rt.jsx(QA,{size:20})})]})]}),Rt.jsxs("main",{className:"flex-1 w-full relative bg-slate-800 flex overflow-hidden",ref:n,children:[Rt.jsx("div",{className:"flex-1 relative",children:e.width>0&&Rt.jsx(AO,{width:e.width,height:e.height,onMouseDown:Ir,onMousemove:Is,onMouseup:ls,onTouchStart:Ir,onTouchMove:Is,onTouchEnd:ls,className:ot==="pen"?"cursor-crosshair":"cursor-default",onClick:At=>{ot==="cursor"&&At.target===At.target.getStage()&&N(null)},children:Rt.jsxs(EO,{children:[Rt.jsx(SO,{x:In,y:Js,width:Bi,height:nn,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Bi,y:nn},fillLinearGradientColorStops:[0,"#2574d1",1,"#1c64b6"],cornerRadius:5}),c.logo&&Rt.jsx(mT,{image:c.logo,width:bi.w,height:bi.h,x:bi.x,y:bi.y,opacity:.3,listening:!1}),c.lines&&Rt.jsx(mT,{image:c.lines,width:Bi,height:nn,x:In,y:Js,listening:!1}),Z.map((At,Yt)=>Rt.jsx(bO,{points:At.points,stroke:At.color,strokeWidth:4,tension:.5,lineCap:"round",lineJoin:"round",opacity:.8},Yt)),K.map(At=>Rt.jsx(jY,{token:At,onDragEnd:De,onSelect:N,isSelected:A===At.id,isLocked:ot==="pen"},At.id))]})})}),Rt.jsxs("div",{className:"w-[85px] bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 flex flex-col items-center py-4 gap-4 z-30 shrink-0 overflow-y-auto custom-scrollbar",children:[Rt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Rt.jsx("button",{onClick:()=>{V("cursor"),z(!1)},className:`p-3 rounded-xl transition-all ${ot==="cursor"?"bg-[#F27405] text-white shadow-lg":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:Rt.jsx(PO,{size:24})}),Rt.jsxs("div",{className:"relative",children:[Rt.jsx("button",{ref:t,onClick:$i,className:`p-3 rounded-xl transition-all ${ot==="pen"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:Rt.jsx(kO,{size:24})}),Rt.jsx("span",{className:"absolute bottom-1 right-1 w-3 h-3 rounded-full border-2 border-gray-700 pointer-events-none",style:{backgroundColor:M}})]}),Rt.jsx("button",{onClick:Ns,className:"p-3 rounded-xl text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800",children:Rt.jsx(qO,{size:24})}),Rt.jsx("button",{onClick:tr,className:"p-3 rounded-xl text-gray-500 hover:text-red-600 transition-colors",children:Rt.jsx(xO,{size:24})})]}),Rt.jsx("div",{className:"h-px w-10 bg-gray-300 dark:bg-gray-700 my-1"}),Rt.jsxs("div",{className:"flex flex-col gap-3 items-center w-full",children:[Rt.jsx("div",{className:"flex flex-col gap-2 w-full px-2 overflow-y-auto",children:D.map((At,Yt)=>Rt.jsxs("button",{onClick:()=>te(Yt),className:`
                                relative w-12 h-12 rounded-lg font-bold text-sm flex items-center justify-center transition-all border-2 shrink-0 mx-auto
                                ${Yt===U?"bg-[#F27405] border-[#F27405] text-white shadow-lg":"bg-gray-100 dark:bg-white/10 border-transparent text-gray-500 dark:text-gray-300 hover:bg-white/20 hover:border-white/30"}
                            `,children:[Yt+1,At.lines.length>0&&Rt.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-white rounded-full opacity-50"})]},Yt))}),Rt.jsx("button",{onClick:se,className:"bg-blue-600 hover:bg-blue-500 p-3 rounded-full text-white shadow-md transition-transform active:scale-95",title:"Novo Frame",children:Rt.jsx(UO,{size:24})}),D.length>1&&Rt.jsx("button",{onClick:Ee,className:"text-red-400 hover:text-red-300 hover:bg-white/10 p-2 rounded-lg transition-colors",title:"Apagar frame",children:Rt.jsx(wE,{size:20})})]})]})]}),F&&Rt.jsx("div",{className:"fixed flex flex-col gap-2 bg-gray-800 p-3 rounded-2xl shadow-2xl border border-gray-600",style:{top:Ft.top,right:Ft.right,zIndex:9999},onMouseDown:At=>At.stopPropagation(),children:FY.map(At=>Rt.jsx("button",{onClick:()=>{L(At),z(!1)},className:"w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 active:scale-95",style:{backgroundColor:At,borderColor:M===At?"#F27405":"rgba(255,255,255,0.2)",boxShadow:M===At?"0 0 0 2px #F27405":"none"}},At))}),W&&Rt.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:Rt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-sm shadow-2xl border border-gray-700",children:[Rt.jsxs("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[Rt.jsx(YA,{size:20,className:"text-green-500"})," Salvar Jogada"]}),Rt.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nome da jogada",className:"w-full p-3 rounded-lg bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white mb-4 outline-none focus:ring-2 focus:ring-[#F27405]",value:Kt,onChange:At=>H(At.target.value)}),Rt.jsxs("div",{className:"flex gap-2 justify-end",children:[Rt.jsx("button",{onClick:()=>Et(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Cancelar"}),Rt.jsx("button",{onClick:us,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold",children:"Salvar"})]})]})}),vt&&Rt.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:Rt.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md shadow-2xl border border-gray-700 flex flex-col max-h-[80vh]",children:[Rt.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center text-gray-900 dark:text-white",children:[Rt.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[Rt.jsx(KA,{size:20,className:"text-[#F27405]"})," Minhas Jogadas"]}),Rt.jsx("button",{onClick:()=>Ut(!1),children:Rt.jsx(XA,{size:24})})]}),Rt.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:ct.length===0?Rt.jsx("p",{className:"text-center py-8 text-gray-500",children:"Nenhuma jogada salva."}):Rt.jsx("div",{className:"space-y-2",children:ct.map(At=>Rt.jsxs("div",{onClick:()=>_n(At),className:"bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 p-3 rounded-lg cursor-pointer border border-transparent hover:border-[#F27405] transition-all group flex justify-between items-center text-gray-900 dark:text-white",children:[Rt.jsxs("div",{children:[Rt.jsx("p",{className:"font-bold",children:At.name}),Rt.jsxs("p",{className:"text-xs text-gray-500",children:[At.frames.length," frames"]})]}),Rt.jsx("button",{onClick:Yt=>rn(At.id,Yt),className:"p-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:Rt.jsx(wE,{size:18})})]},At.id))})})]})}),E&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>b(!1)}),Rt.jsxs("div",{className:"fixed top-0 right-0 h-full w-80 bg-white dark:bg-gray-900 shadow-2xl z-50 flex flex-col border-l border-gray-700",children:[Rt.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-[#062553]",children:[Rt.jsxs("h2",{className:"font-bold text-white text-lg flex items-center gap-2",children:[Rt.jsx(QA,{size:20,className:"text-[#F27405]"})," Elenco"]}),Rt.jsx("button",{onClick:()=>b(!1),className:"text-gray-300 hover:text-white",children:Rt.jsx(XA,{size:24})})]}),Rt.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:Rt.jsx("div",{className:"grid gap-2",children:m.map(At=>Rt.jsxs("button",{onClick:()=>gn(At),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-800 transition-colors group text-left w-full text-white",children:[Rt.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#062553] bg-gray-200",children:Rt.jsx("img",{src:At.foto||`${Hm.defaultAvatar}${At.nome}`,alt:At.nome,className:"w-full h-full object-cover"})}),Rt.jsx("div",{children:Rt.jsx("p",{className:"font-bold text-sm",children:At.nome})})]},At.id))})})]})]})]})};w7.createRoot(document.getElementById("root")).render(Rt.jsx(oe.StrictMode,{children:Rt.jsx(KY,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function U6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uE={exports:{}},n0={};var nA;function T7(){if(nA)return n0;nA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:o}}return n0.Fragment=t,n0.jsx=e,n0.jsxs=e,n0}var iA;function S7(){return iA||(iA=1,uE.exports=T7()),uE.exports}var At=S7(),cE={exports:{}},ge={};var sA;function b7(){if(sA)return ge;sA=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function N(q){return q===null||typeof q!="object"?null:(q=A&&q[A]||q["@@iterator"],typeof q=="function"?q:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function F(q,ut,It){this.props=q,this.context=ut,this.refs=U,this.updater=It||D}F.prototype.isReactComponent={},F.prototype.setState=function(q,ut){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ut,"setState")},F.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function j(){}j.prototype=F.prototype;function X(q,ut,It){this.props=q,this.context=ut,this.refs=U,this.updater=It||D}var W=X.prototype=new j;W.constructor=X,k(W,F.prototype),W.isPureReactComponent=!0;var mt=Array.isArray;function rt(){}var V={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function L(q,ut,It){var zt=It.ref;return{$$typeof:n,type:q,key:ut,ref:zt!==void 0?zt:null,props:It}}function H(q,ut){return L(q.type,ut,q.props)}function G(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function K(q){var ut={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(It){return ut[It]})}var z=/\/+/g;function Kt(q,ut){return typeof q=="object"&&q!==null&&q.key!=null?K(""+q.key):ut.toString(36)}function Lt(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(rt,rt):(q.status="pending",q.then(function(ut){q.status==="pending"&&(q.status="fulfilled",q.value=ut)},function(ut){q.status==="pending"&&(q.status="rejected",q.reason=ut)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Z(q,ut,It,zt,ee){var ae=typeof q;(ae==="undefined"||ae==="boolean")&&(q=null);var be=!1;if(q===null)be=!0;else switch(ae){case"bigint":case"string":case"number":be=!0;break;case"object":switch(q.$$typeof){case n:case t:be=!0;break;case E:return be=q._init,Z(be(q._payload),ut,It,zt,ee)}}if(be)return ee=ee(q),be=zt===""?"."+Kt(q,0):zt,mt(ee)?(It="",be!=null&&(It=be.replace(z,"$&/")+"/"),Z(ee,ut,It,"",function(xr){return xr})):ee!=null&&(G(ee)&&(ee=H(ee,It+(ee.key==null||q&&q.key===ee.key?"":(""+ee.key).replace(z,"$&/")+"/")+be)),ut.push(ee)),1;be=0;var vn=zt===""?".":zt+":";if(mt(q))for(var ke=0;ke<q.length;ke++)zt=q[ke],ae=vn+Kt(zt,ke),be+=Z(zt,ut,It,ae,ee);else if(ke=N(q),typeof ke=="function")for(q=ke.call(q),ke=0;!(zt=q.next()).done;)zt=zt.value,ae=vn+Kt(zt,ke++),be+=Z(zt,ut,It,ae,ee);else if(ae==="object"){if(typeof q.then=="function")return Z(Lt(q),ut,It,zt,ee);throw ut=String(q),Error("Objects are not valid as a React child (found: "+(ut==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ut)+"). If you meant to render a collection of children, use an array instead.")}return be}function Tt(q,ut,It){if(q==null)return q;var zt=[],ee=0;return Z(q,zt,"","",function(ae){return ut.call(It,ae,ee++)}),zt}function Et(q){if(q._status===-1){var ut=q._result;ut=ut(),ut.then(function(It){(q._status===0||q._status===-1)&&(q._status=1,q._result=It)},function(It){(q._status===0||q._status===-1)&&(q._status=2,q._result=It)}),q._status===-1&&(q._status=0,q._result=ut)}if(q._status===1)return q._result.default;throw q._result}var Bt=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ut=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ut))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Qt={map:Tt,forEach:function(q,ut,It){Tt(q,function(){ut.apply(this,arguments)},It)},count:function(q){var ut=0;return Tt(q,function(){ut++}),ut},toArray:function(q){return Tt(q,function(ut){return ut})||[]},only:function(q){if(!G(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return ge.Activity=b,ge.Children=Qt,ge.Component=F,ge.Fragment=e,ge.Profiler=s,ge.PureComponent=X,ge.StrictMode=i,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,ge.__COMPILER_RUNTIME={__proto__:null,c:function(q){return V.H.useMemoCache(q)}},ge.cache=function(q){return function(){return q.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(q,ut,It){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var zt=k({},q.props),ee=q.key;if(ut!=null)for(ae in ut.key!==void 0&&(ee=""+ut.key),ut)!M.call(ut,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ut.ref===void 0||(zt[ae]=ut[ae]);var ae=arguments.length-2;if(ae===1)zt.children=It;else if(1<ae){for(var be=Array(ae),vn=0;vn<ae;vn++)be[vn]=arguments[vn+2];zt.children=be}return L(q.type,ee,zt)},ge.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},ge.createElement=function(q,ut,It){var zt,ee={},ae=null;if(ut!=null)for(zt in ut.key!==void 0&&(ae=""+ut.key),ut)M.call(ut,zt)&&zt!=="key"&&zt!=="__self"&&zt!=="__source"&&(ee[zt]=ut[zt]);var be=arguments.length-2;if(be===1)ee.children=It;else if(1<be){for(var vn=Array(be),ke=0;ke<be;ke++)vn[ke]=arguments[ke+2];ee.children=vn}if(q&&q.defaultProps)for(zt in be=q.defaultProps,be)ee[zt]===void 0&&(ee[zt]=be[zt]);return L(q,ae,ee)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(q){return{$$typeof:f,render:q}},ge.isValidElement=G,ge.lazy=function(q){return{$$typeof:E,_payload:{_status:-1,_result:q},_init:Et}},ge.memo=function(q,ut){return{$$typeof:g,type:q,compare:ut===void 0?null:ut}},ge.startTransition=function(q){var ut=V.T,It={};V.T=It;try{var zt=q(),ee=V.S;ee!==null&&ee(It,zt),typeof zt=="object"&&zt!==null&&typeof zt.then=="function"&&zt.then(rt,Bt)}catch(ae){Bt(ae)}finally{ut!==null&&It.types!==null&&(ut.types=It.types),V.T=ut}},ge.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},ge.use=function(q){return V.H.use(q)},ge.useActionState=function(q,ut,It){return V.H.useActionState(q,ut,It)},ge.useCallback=function(q,ut){return V.H.useCallback(q,ut)},ge.useContext=function(q){return V.H.useContext(q)},ge.useDebugValue=function(){},ge.useDeferredValue=function(q,ut){return V.H.useDeferredValue(q,ut)},ge.useEffect=function(q,ut){return V.H.useEffect(q,ut)},ge.useEffectEvent=function(q){return V.H.useEffectEvent(q)},ge.useId=function(){return V.H.useId()},ge.useImperativeHandle=function(q,ut,It){return V.H.useImperativeHandle(q,ut,It)},ge.useInsertionEffect=function(q,ut){return V.H.useInsertionEffect(q,ut)},ge.useLayoutEffect=function(q,ut){return V.H.useLayoutEffect(q,ut)},ge.useMemo=function(q,ut){return V.H.useMemo(q,ut)},ge.useOptimistic=function(q,ut){return V.H.useOptimistic(q,ut)},ge.useReducer=function(q,ut,It){return V.H.useReducer(q,ut,It)},ge.useRef=function(q){return V.H.useRef(q)},ge.useState=function(q){return V.H.useState(q)},ge.useSyncExternalStore=function(q,ut,It){return V.H.useSyncExternalStore(q,ut,It)},ge.useTransition=function(){return V.H.useTransition()},ge.version="19.2.4",ge}var aA;function Pv(){return aA||(aA=1,cE.exports=b7()),cE.exports}var ce=Pv();const Ji=U6(ce);var hE={exports:{}},i0={},fE={exports:{}},dE={};var rA;function A7(){return rA||(rA=1,(function(n){function t(Z,Tt){var Et=Z.length;Z.push(Tt);t:for(;0<Et;){var Bt=Et-1>>>1,Qt=Z[Bt];if(0<s(Qt,Tt))Z[Bt]=Tt,Z[Et]=Qt,Et=Bt;else break t}}function e(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var Tt=Z[0],Et=Z.pop();if(Et!==Tt){Z[0]=Et;t:for(var Bt=0,Qt=Z.length,q=Qt>>>1;Bt<q;){var ut=2*(Bt+1)-1,It=Z[ut],zt=ut+1,ee=Z[zt];if(0>s(It,Et))zt<Qt&&0>s(ee,It)?(Z[Bt]=ee,Z[zt]=Et,Bt=zt):(Z[Bt]=It,Z[ut]=Et,Bt=ut);else if(zt<Qt&&0>s(ee,Et))Z[Bt]=ee,Z[zt]=Et,Bt=zt;else break t}}return Tt}function s(Z,Tt){var Et=Z.sortIndex-Tt.sortIndex;return Et!==0?Et:Z.id-Tt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],E=1,b=null,A=3,N=!1,D=!1,k=!1,U=!1,F=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function W(Z){for(var Tt=e(g);Tt!==null;){if(Tt.callback===null)i(g);else if(Tt.startTime<=Z)i(g),Tt.sortIndex=Tt.expirationTime,t(m,Tt);else break;Tt=e(g)}}function mt(Z){if(k=!1,W(Z),!D)if(e(m)!==null)D=!0,rt||(rt=!0,K());else{var Tt=e(g);Tt!==null&&Lt(mt,Tt.startTime-Z)}}var rt=!1,V=-1,M=5,L=-1;function H(){return U?!0:!(n.unstable_now()-L<M)}function G(){if(U=!1,rt){var Z=n.unstable_now();L=Z;var Tt=!0;try{t:{D=!1,k&&(k=!1,j(V),V=-1),N=!0;var Et=A;try{e:{for(W(Z),b=e(m);b!==null&&!(b.expirationTime>Z&&H());){var Bt=b.callback;if(typeof Bt=="function"){b.callback=null,A=b.priorityLevel;var Qt=Bt(b.expirationTime<=Z);if(Z=n.unstable_now(),typeof Qt=="function"){b.callback=Qt,W(Z),Tt=!0;break e}b===e(m)&&i(m),W(Z)}else i(m);b=e(m)}if(b!==null)Tt=!0;else{var q=e(g);q!==null&&Lt(mt,q.startTime-Z),Tt=!1}}break t}finally{b=null,A=Et,N=!1}Tt=void 0}}finally{Tt?K():rt=!1}}}var K;if(typeof X=="function")K=function(){X(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Kt=z.port2;z.port1.onmessage=G,K=function(){Kt.postMessage(null)}}else K=function(){F(G,0)};function Lt(Z,Tt){V=F(function(){Z(n.unstable_now())},Tt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(Z){switch(A){case 1:case 2:case 3:var Tt=3;break;default:Tt=A}var Et=A;A=Tt;try{return Z()}finally{A=Et}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(Z,Tt){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Et=A;A=Z;try{return Tt()}finally{A=Et}},n.unstable_scheduleCallback=function(Z,Tt,Et){var Bt=n.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?Bt+Et:Bt):Et=Bt,Z){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=Et+Qt,Z={id:E++,callback:Tt,priorityLevel:Z,startTime:Et,expirationTime:Qt,sortIndex:-1},Et>Bt?(Z.sortIndex=Et,t(g,Z),e(m)===null&&Z===e(g)&&(k?(j(V),V=-1):k=!0,Lt(mt,Et-Bt))):(Z.sortIndex=Qt,t(m,Z),D||N||(D=!0,rt||(rt=!0,K()))),Z},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(Z){var Tt=A;return function(){var Et=A;A=Tt;try{return Z.apply(this,arguments)}finally{A=Et}}}})(dE)),dE}var oA;function aS(){return oA||(oA=1,fE.exports=A7()),fE.exports}var mE={exports:{}},Ys={};var lA;function w7(){if(lA)return Ys;lA=1;var n=Pv();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:m,containerInfo:g,implementation:E}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ys.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ys.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(m,g,null,E)},Ys.flushSync=function(m){var g=c.T,E=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=E,i.d.f()}},Ys.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Ys.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Ys.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:N}):E==="script"&&i.d.X(m,{crossOrigin:b,integrity:A,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ys.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Ys.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=f(E,g.crossOrigin);i.d.L(m,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ys.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Ys.requestFormReset=function(m){i.d.r(m)},Ys.unstable_batchedUpdates=function(m,g){return m(g)},Ys.useFormState=function(m,g,E){return c.H.useFormState(m,g,E)},Ys.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ys.version="19.2.4",Ys}var uA;function R7(){if(uA)return mE.exports;uA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),mE.exports=w7(),mE.exports}var cA;function C7(){if(cA)return i0;cA=1;var n=aS(),t=Pv(),e=R7();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var r=a,h=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(h=r.return),a=r.return;while(a)}return r.tag===3?h:null}function c(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function f(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function m(a){if(o(a)!==a)throw Error(i(188))}function g(a){var r=a.alternate;if(!r){if(r=o(a),r===null)throw Error(i(188));return r!==a?null:a}for(var h=a,d=r;;){var v=h.return;if(v===null)break;var T=v.alternate;if(T===null){if(d=v.return,d!==null){h=d;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===h)return m(v),a;if(T===d)return m(v),r;T=T.sibling}throw Error(i(188))}if(h.return!==d.return)h=v,d=T;else{for(var C=!1,O=v.child;O;){if(O===h){C=!0,h=v,d=T;break}if(O===d){C=!0,d=v,h=T;break}O=O.sibling}if(!C){for(O=T.child;O;){if(O===h){C=!0,h=T,d=v;break}if(O===d){C=!0,d=T,h=v;break}O=O.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==d)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:r}function E(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=E(a),r!==null)return r;a=a.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),X=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function K(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var z=Symbol.for("react.client.reference");function Kt(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case k:return"Fragment";case F:return"Profiler";case U:return"StrictMode";case mt:return"Suspense";case rt:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case D:return"Portal";case X:return a.displayName||"Context";case j:return(a._context.displayName||"Context")+".Consumer";case W:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return r=a.displayName||null,r!==null?r:Kt(a.type)||"Memo";case M:r=a._payload,a=a._init;try{return Kt(a(r))}catch{}}return null}var Lt=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et={pending:!1,data:null,method:null,action:null},Bt=[],Qt=-1;function q(a){return{current:a}}function ut(a){0>Qt||(a.current=Bt[Qt],Bt[Qt]=null,Qt--)}function It(a,r){Qt++,Bt[Qt]=a.current,a.current=r}var zt=q(null),ee=q(null),ae=q(null),be=q(null);function vn(a,r){switch(It(ae,r),It(ee,a),It(zt,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?w4(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=w4(r),a=R4(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ut(zt),It(zt,a)}function ke(){ut(zt),ut(ee),ut(ae)}function xr(a){a.memoizedState!==null&&It(be,a);var r=zt.current,h=R4(r,a.type);r!==h&&(It(ee,a),It(zt,h))}function To(a){ee.current===a&&(ut(zt),ut(ee)),be.current===a&&(ut(be),Zg._currentValue=Et)}var ta,hs;function fs(a){if(ta===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);ta=r&&r[1]||"",hs=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+a+hs}var wa=!1;function Gi(a,r){if(!a||wa)return"";wa=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(pt){var lt=pt}Reflect.construct(a,[],vt)}else{try{vt.call()}catch(pt){lt=pt}a.call(vt.prototype)}}else{try{throw Error()}catch(pt){lt=pt}(vt=a())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(pt){if(pt&&lt&&typeof pt.stack=="string")return[pt.stack,lt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),C=T[0],O=T[1];if(C&&O){var Y=C.split(`
`),at=O.split(`
`);for(v=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;v<at.length&&!at[v].includes("DetermineComponentFrameRoot");)v++;if(d===Y.length||v===at.length)for(d=Y.length-1,v=at.length-1;1<=d&&0<=v&&Y[d]!==at[v];)v--;for(;1<=d&&0<=v;d--,v--)if(Y[d]!==at[v]){if(d!==1||v!==1)do if(d--,v--,0>v||Y[d]!==at[v]){var gt=`
`+Y[d].replace(" at new "," at ");return a.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",a.displayName)),gt}while(1<=d&&0<=v);break}}}finally{wa=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?fs(h):""}function ds(a,r){switch(a.tag){case 26:case 27:case 5:return fs(a.type);case 16:return fs("Lazy");case 13:return a.child!==r&&r!==null?fs("Suspense Fallback"):fs("Suspense");case 19:return fs("SuspenseList");case 0:case 15:return Gi(a.type,!1);case 11:return Gi(a.type.render,!1);case 1:return Gi(a.type,!0);case 31:return fs("Activity");default:return""}}function So(a){try{var r="",h=null;do r+=ds(a,h),h=a,a=a.return;while(a);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var En=Object.prototype.hasOwnProperty,rn=n.unstable_scheduleCallback,ea=n.unstable_cancelCallback,sr=n.unstable_shouldYield,Gn=n.unstable_requestPaint,en=n.unstable_now,wi=n.unstable_getCurrentPriorityLevel,ms=n.unstable_ImmediatePriority,es=n.unstable_UserBlockingPriority,ns=n.unstable_NormalPriority,Hi=n.unstable_LowPriority,ps=n.unstable_IdlePriority,au=n.log,yt=n.unstable_setDisableYieldValue,Rt=null,qt=null;function le(a){if(typeof au=="function"&&yt(a),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Rt,a)}catch{}}var ue=Math.clz32?Math.clz32:bo,je=Math.log,gs=Math.LN2;function bo(a){return a>>>=0,a===0?32:31-(je(a)/gs|0)|0}var li=256,ar=262144,pn=4194304;function rr(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function na(a,r,h){var d=a.pendingLanes;if(d===0)return 0;var v=0,T=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var O=d&134217727;return O!==0?(d=O&~T,d!==0?v=rr(d):(C&=O,C!==0?v=rr(C):h||(h=O&~a,h!==0&&(v=rr(h))))):(O=d&~T,O!==0?v=rr(O):C!==0?v=rr(C):h||(h=d&~a,h!==0&&(v=rr(h)))),v===0?0:r!==0&&r!==v&&(r&T)===0&&(T=v&-v,h=r&-r,T>=h||T===32&&(h&4194048)!==0)?r:v}function Ra(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Md(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(){var a=pn;return pn<<=1,(pn&62914560)===0&&(pn=4194304),a}function or(a){for(var r=[],h=0;31>h;h++)r.push(a);return r}function nl(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function dc(a,r,h,d,v,T){var C=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var O=a.entanglements,Y=a.expirationTimes,at=a.hiddenUpdates;for(h=C&~h;0<h;){var gt=31-ue(h),vt=1<<gt;O[gt]=0,Y[gt]=-1;var lt=at[gt];if(lt!==null)for(at[gt]=null,gt=0;gt<lt.length;gt++){var pt=lt[gt];pt!==null&&(pt.lane&=-536870913)}h&=~vt}d!==0&&lr(a,d,0),T!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=T&~(C&~r))}function lr(a,r,h){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-ue(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function il(a,r){var h=a.entangledLanes|=r;for(a=a.entanglements;h;){var d=31-ue(h),v=1<<d;v&r|a[d]&r&&(a[d]|=r),h&=~v}}function mc(a,r){var h=r&-r;return h=(h&42)!==0?1:Mr(h),(h&(a.suspendedLanes|r))!==0?0:h}function Mr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ca(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pc(){var a=Tt.p;return a!==0?a:(a=window.event,a===void 0?32:X4(a.type))}function qi(a,r){var h=Tt.p;try{return Tt.p=a,r()}finally{Tt.p=h}}var Ia=Math.random().toString(36).slice(2),xn="__reactFiber$"+Ia,ui="__reactProps$"+Ia,Na="__reactContainer$"+Ia,ia="__reactEvents$"+Ia,Pr="__reactListeners$"+Ia,sl="__reactHandles$"+Ia,gc="__reactResources$"+Ia,Ps="__reactMarker$"+Ia;function Vr(a){delete a[xn],delete a[ui],delete a[ia],delete a[Pr],delete a[sl]}function ur(a){var r=a[xn];if(r)return r;for(var h=a.parentNode;h;){if(r=h[Na]||h[xn]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(a=M4(a);a!==null;){if(h=a[xn])return h;a=M4(a)}return r}a=h,h=a.parentNode}return null}function sa(a){if(a=a[xn]||a[Na]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function Vs(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function Da(a){var r=a[gc];return r||(r=a[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Hn(a){a[Ps]=!0}var xa=new Set,ru={};function cr(a,r){Fi(a,r),Fi(a+"Capture",r)}function Fi(a,r){for(ru[a]=r,a=0;a<r.length;a++)xa.add(r[a])}var ji=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},un={};function _c(a){return En.call(un,a)?!0:En.call(al,a)?!1:ji.test(a)?un[a]=!0:(al[a]=!0,!1)}function rl(a,r,h){if(_c(r))if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+h)}}function ks(a,r,h){if(h===null)a.removeAttribute(r);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+h)}}function Wn(a,r,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(r,h,""+d)}}function Ri(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function kr(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ou(a,r,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,T=d.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return v.call(this)},set:function(C){h=""+C,T.call(this,C)}}),Object.defineProperty(a,r,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function Fe(a){if(!a._valueTracker){var r=kr(a)?"checked":"value";a._valueTracker=ou(a,r,""+a[r])}}function Zn(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var h=r.getValue(),d="";return a&&(d=kr(a)?a.checked?"true":"false":a.value),a=d,a!==h?(r.setValue(a),!0):!1}function Ke(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Lr=/[\n"\\]/g;function Ci(a){return a.replace(Lr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ao(a,r,h,d,v,T,C,O){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),r!=null?C==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+Ri(r)):a.value!==""+Ri(r)&&(a.value=""+Ri(r)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),r!=null?aa(a,C,Ri(r)):h!=null?aa(a,C,Ri(h)):d!=null&&a.removeAttribute("value"),v==null&&T!=null&&(a.defaultChecked=!!T),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+Ri(O):a.removeAttribute("name")}function yc(a,r,h,d,v,T,C,O){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),r!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){Fe(a);return}h=h!=null?""+Ri(h):"",r=r!=null?""+Ri(r):h,O||r===a.value||(a.value=r),a.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=O?a.checked:!!d,a.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C),Fe(a)}function aa(a,r,h){r==="number"&&Ke(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function hr(a,r,h,d){if(a=a.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=r.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&d&&(a[h].defaultSelected=!0)}else{for(h=""+Ri(h),r=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}r!==null||a[v].disabled||(r=a[v])}r!==null&&(r.selected=!0)}}function vc(a,r,h){if(r!=null&&(r=""+Ri(r),r!==a.value&&(a.value=r),h==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=h!=null?""+Ri(h):""}function Ur(a,r,h,d){if(r==null){if(d!=null){if(h!=null)throw Error(i(92));if(Lt(d)){if(1<d.length)throw Error(i(93));d=d[0]}h=d}h==null&&(h=""),r=h}h=Ri(r),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),Fe(a)}function _s(a,r){if(r){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=r;return}}a.textContent=r}var Zh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(a,r,h){var d=r.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,h):typeof h!="number"||h===0||Zh.has(r)?r==="float"?a.cssFloat=h:a[r]=(""+h).trim():a[r]=h+"px"}function Tc(a,r,h){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&h[v]!==d&&Ec(a,v,d)}else for(var T in r)r.hasOwnProperty(T)&&Ec(a,T,r[T])}function lu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uu(a){return zr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function fr(){}var Sc=null;function ra(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var wo=null,Oa=null;function ol(a){var r=sa(a);if(r&&(a=r.stateNode)){var h=a[ui]||null;t:switch(a=r.stateNode,r.type){case"input":if(Ao(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),r=h.name,h.type==="radio"&&r!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ci(""+r)+'"][type="radio"]'),r=0;r<h.length;r++){var d=h[r];if(d!==a&&d.form===a.form){var v=d[ui]||null;if(!v)throw Error(i(90));Ao(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<h.length;r++)d=h[r],d.form===a.form&&Zn(d)}break t;case"textarea":vc(a,h.value,h.defaultValue);break t;case"select":r=h.value,r!=null&&hr(a,!!h.multiple,r,!1)}}}var cu=!1;function Ro(a,r,h){if(cu)return a(r,h);cu=!0;try{var d=a(r);return d}finally{if(cu=!1,(wo!==null||Oa!==null)&&(br(),wo&&(r=wo,a=Oa,Oa=wo=null,ol(r),a)))for(r=0;r<a.length;r++)ol(a[r])}}function Ma(a,r){var h=a.stateNode;if(h===null)return null;var d=h[ui]||null;if(d===null)return null;h=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,r,typeof h));return h}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=!1;if(oa)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){hu=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{hu=!1}var ys=null,bc=null,Br=null;function ll(){if(Br)return Br;var a,r=bc,h=r.length,d,v="value"in ys?ys.value:ys.textContent,T=v.length;for(a=0;a<h&&r[a]===v[a];a++);var C=h-a;for(d=1;d<=C&&r[h-d]===v[T-d];d++);return Br=v.slice(a,1<d?1-d:void 0)}function ul(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function dr(){return!0}function mr(){return!1}function Ii(a){function r(h,d,v,T,C){this._reactName=h,this._targetInst=v,this.type=d,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(h=a[O],this[O]=h?h(T):T[O]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?dr:mr,this.isPropagationStopped=mr,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),r}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=Ii(Gr),Co=b({},Gr,{view:0,detail:0}),Ac=Ii(Co),Hr,fu,gr,cl=b({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==gr&&(gr&&a.type==="mousemove"?(Hr=a.screenX-gr.screenX,fu=a.screenY-gr.screenY):fu=Hr=0,gr=a),Hr)},movementY:function(a){return"movementY"in a?a.movementY:fu}}),wc=Ii(cl),hl=b({},cl,{dataTransfer:0}),tf=Ii(hl),Rc=b({},Co,{relatedTarget:0}),fl=Ii(Rc),Cc=b({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pd=Ii(Cc),Ic=b({},Gr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ef=Ii(Ic),dl=b({},Gr,{data:0}),Pa=Ii(dl),du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=sf[a])?!!r[a]:!1}function Io(){return Nc}var is=b({},Co,{key:function(a){if(a.key){var r=du[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=ul(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?nf[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(a){return a.type==="keypress"?ul(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ul(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),qr=Ii(is),mu=b({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fr=Ii(mu),_=b({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),R=Ii(_),I=b({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=Ii(I),$=b({},cl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ct=Ii($),Vt=b({},Gr,{newState:0,oldState:0}),fe=Ii(Vt),qn=[9,13,27,32],xe=oa&&"CompositionEvent"in window,gn=null;oa&&"documentMode"in document&&(gn=document.documentMode);var vs=oa&&"TextEvent"in window&&!gn,_r=oa&&(!xe||gn&&8<gn&&11>=gn),yr=" ",Ls=!1;function No(a,r){switch(a){case"keyup":return qn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var gu=!1;function Q_(a,r){switch(a){case"compositionend":return pu(r);case"keypress":return r.which!==32?null:(Ls=!0,yr);case"textInput":return a=r.data,a===yr&&Ls?null:a;default:return null}}function qp(a,r){if(gu)return a==="compositionend"||!xe&&No(a,r)?(a=ll(),Br=bc=ys=null,gu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _r&&r.locale!=="ko"?null:r.data;default:return null}}var Fp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!Fp[a.type]:r==="textarea"}function Vd(a,r,h,d){wo?Oa?Oa.push(d):Oa=[d]:wo=d,r=$y(r,"onChange"),0<r.length&&(h=new pr("onChange","change",null,h,d),a.push({event:h,listeners:r}))}var ml=null,_u=null;function X_(a){v4(a,0)}function Dc(a){var r=Vs(a);if(Zn(r))return a}function Kp(a,r){if(a==="change")return r}var jr=!1;if(oa){var af;if(oa){var Yp="oninput"in document;if(!Yp){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),Yp=typeof Qp.oninput=="function"}af=Yp}else af=!1;jr=af&&(!document.documentMode||9<document.documentMode)}function Va(){ml&&(ml.detachEvent("onpropertychange",rf),_u=ml=null)}function rf(a){if(a.propertyName==="value"&&Dc(_u)){var r=[];Vd(r,_u,a,ra(a)),Ro(X_,r)}}function J_(a,r,h){a==="focusin"?(Va(),ml=r,_u=h,ml.attachEvent("onpropertychange",rf)):a==="focusout"&&Va()}function Xp(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Dc(_u)}function W_(a,r){if(a==="click")return Dc(r)}function Z_(a,r){if(a==="input"||a==="change")return Dc(r)}function Jp(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var Es=typeof Object.is=="function"?Object.is:Jp;function xc(a,r){if(Es(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var h=Object.keys(a),d=Object.keys(r);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var v=h[d];if(!En.call(r,v)||!Es(a[v],r[v]))return!1}return!0}function of(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Oc(a,r){var h=of(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=r&&d>=r)return{node:h,offset:r-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=of(h)}}function cn(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?cn(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function $_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=Ke(a.document);r instanceof a.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)a=r.contentWindow;else break;r=Ke(a.document)}return r}function Wp(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var ty=oa&&"documentMode"in document&&11>=document.documentMode,Kr=null,Yr=null,Mc=null,kd=!1;function Pc(a,r,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;kd||Kr==null||Kr!==Ke(d)||(d=Kr,"selectionStart"in d&&Wp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Mc&&xc(Mc,d)||(Mc=d,d=$y(Yr,"onSelect"),0<d.length&&(r=new pr("onSelect","select",null,r,h),a.push({event:r,listeners:d}),r.target=Kr)))}function ss(a,r){var h={};return h[a.toLowerCase()]=r.toLowerCase(),h["Webkit"+a]="webkit"+r,h["Moz"+a]="moz"+r,h}var yu={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},lf={},Zp={};oa&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete yu.animationend.animation,delete yu.animationiteration.animation,delete yu.animationstart.animation),"TransitionEvent"in window||delete yu.transitionend.transition);function Do(a){if(lf[a])return lf[a];if(!yu[a])return a;var r=yu[a],h;for(h in r)if(r.hasOwnProperty(h)&&h in Zp)return lf[a]=r[h];return a}var Ld=Do("animationend"),uf=Do("animationiteration"),$p=Do("animationstart"),ey=Do("transitionrun"),O2=Do("transitionstart"),ny=Do("transitioncancel"),tg=Do("transitionend"),ka=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function La(a,r){ka.set(a,r),cr(r,[a])}var hf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ua=[],xo=0,Ni=0;function ff(){for(var a=xo,r=Ni=xo=0;r<a;){var h=Ua[r];Ua[r++]=null;var d=Ua[r];Ua[r++]=null;var v=Ua[r];Ua[r++]=null;var T=Ua[r];if(Ua[r++]=null,d!==null&&v!==null){var C=d.pending;C===null?v.next=v:(v.next=C.next,C.next=v),d.pending=v}T!==0&&pl(h,v,T)}}function Di(a,r,h,d){Ua[xo++]=a,Ua[xo++]=r,Ua[xo++]=h,Ua[xo++]=d,Ni|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Ud(a,r,h,d){return Di(a,r,h,d),za(a)}function Ts(a,r){return Di(a,null,null,r),za(a)}function pl(a,r,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var v=!1,T=a.return;T!==null;)T.childLanes|=h,d=T.alternate,d!==null&&(d.childLanes|=h),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(v=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,v&&r!==null&&(v=31-ue(h),a=T.hiddenUpdates,d=a[v],d===null?a[v]=[r]:d.push(r),r.lane=h|536870912),T):null}function za(a){if(50<Pl)throw Pl=0,Lu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var gl={};function eg(a,r,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(a,r,h,d){return new eg(a,r,h,d)}function zd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Us(a,r){var h=a.alternate;return h===null?(h=On(a.tag,r,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=r,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,r=a.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Vc(a,r){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,r=h.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Qr(a,r,h,d,v,T){var C=0;if(d=a,typeof a=="function")zd(a)&&(C=1);else if(typeof a=="string")C=u7(a,h,zt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case L:return a=On(31,h,r,v),a.elementType=L,a.lanes=T,a;case k:return _l(h.children,v,T,r);case U:C=8,v|=24;break;case F:return a=On(12,h,r,v|2),a.elementType=F,a.lanes=T,a;case mt:return a=On(13,h,r,v),a.elementType=mt,a.lanes=T,a;case rt:return a=On(19,h,r,v),a.elementType=rt,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case X:C=10;break t;case j:C=9;break t;case W:C=11;break t;case V:C=14;break t;case M:C=16,d=null;break t}C=29,h=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=On(C,h,r,v),r.elementType=a,r.type=d,r.lanes=T,r}function _l(a,r,h,d){return a=On(7,a,d,r),a.lanes=h,a}function Bd(a,r,h){return a=On(6,a,null,r),a.lanes=h,a}function kc(a){var r=On(18,null,null,0);return r.stateNode=a,r}function Gd(a,r,h){return r=On(4,a.children!==null?a.children:[],a.key,r),r.lanes=h,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var df=new WeakMap;function la(a,r){if(typeof a=="object"&&a!==null){var h=df.get(a);return h!==void 0?h:(r={value:a,source:r,stack:So(r)},df.set(a,r),r)}return{value:a,source:r,stack:So(r)}}var yl=[],vl=0,Lc=null,Uc=0,zs=[],Tn=0,Oo=null,Mn=1,vr="";function Xr(a,r){yl[vl++]=Uc,yl[vl++]=Lc,Lc=a,Uc=r}function iy(a,r,h){zs[Tn++]=Mn,zs[Tn++]=vr,zs[Tn++]=Oo,Oo=a;var d=Mn;a=vr;var v=32-ue(d)-1;d&=~(1<<v),h+=1;var T=32-ue(r)+v;if(30<T){var C=v-v%5;T=(d&(1<<C)-1).toString(32),d>>=C,v-=C,Mn=1<<32-ue(r)+v|h<<v|d,vr=T+a}else Mn=1<<T|h<<v|d,vr=a}function Jr(a){a.return!==null&&(Xr(a,1),iy(a,1,0))}function Hd(a){for(;a===Lc;)Lc=yl[--vl],yl[vl]=null,Uc=yl[--vl],yl[vl]=null;for(;a===Oo;)Oo=zs[--Tn],zs[Tn]=null,vr=zs[--Tn],zs[Tn]=null,Mn=zs[--Tn],zs[Tn]=null}function qd(a,r){zs[Tn++]=Mn,zs[Tn++]=vr,zs[Tn++]=Oo,Mn=r.id,vr=r.overflow,Oo=a}var Fn=null,hn=null,Ne=!1,Mo=null,ua=!1,zc=Error(i(519));function Wr(a){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zr(la(r,a)),zc}function sy(a){var r=a.stateNode,h=a.type,d=a.memoizedProps;switch(r[xn]=a,r[ui]=d,h){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(h=0;h<Za.length;h++)Me(Za[h],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),yc(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Ur(r,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||r.textContent===""+h||d.suppressHydrationWarning===!0||b4(r.textContent,h)?(d.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),d.onScroll!=null&&Me("scroll",r),d.onScrollEnd!=null&&Me("scrollend",r),d.onClick!=null&&(r.onclick=fr),r=!0):r=!1,r||Wr(a,!0)}function ay(a){for(Fn=a.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Fn=Fn.return}}function Bc(a){if(a!==Fn)return!1;if(!Ne)return ay(a),Ne=!0,!1;var r=a.tag,h;if((h=r!==3&&r!==27)&&((h=r===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||Q2(a.type,a.memoizedProps)),h=!h),h&&hn&&Wr(a),ay(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=O4(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));hn=O4(a)}else r===27?(r=hn,rh(a.type)?(a=$2,$2=null,hn=a):hn=r):hn=Fn?fo(a.stateNode.nextSibling):null;return!0}function El(){hn=Fn=null,Ne=!1}function Fd(){var a=Mo;return a!==null&&(Kn===null?Kn=a:Kn.push.apply(Kn,a),Mo=null),a}function Zr(a){Mo===null?Mo=[a]:Mo.push(a)}var Gc=q(null),Tl=null,$r=null;function Po(a,r,h){It(Gc,r._currentValue),r._currentValue=h}function to(a){a._currentValue=Gc.current,ut(Gc)}function jd(a,r,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===h)break;a=a.return}}function Kd(a,r,h,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var T=v.dependencies;if(T!==null){var C=v.child;T=T.firstContext;t:for(;T!==null;){var O=T;T=v;for(var Y=0;Y<r.length;Y++)if(O.context===r[Y]){T.lanes|=h,O=T.alternate,O!==null&&(O.lanes|=h),jd(T.return,h,a),d||(C=null);break t}T=O.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=h,T=C.alternate,T!==null&&(T.lanes|=h),jd(C,h,a),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===a){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function eo(a,r,h,d){a=null;for(var v=r,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=v.type;Es(v.pendingProps.value,C.value)||(a!==null?a.push(O):a=[O])}}else if(v===be.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Zg):a=[Zg])}v=v.return}a!==null&&Kd(r,a,h,d),r.flags|=262144}function mf(a){for(a=a.firstContext;a!==null;){if(!Es(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Sl(a){Tl=a,$r=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function re(a){return ry(Tl,a)}function Hc(a,r){return Tl===null&&Sl(a),ry(a,r)}function ry(a,r){var h=r._currentValue;if(r={context:r,memoizedValue:h,next:null},$r===null){if(a===null)throw Error(i(308));$r=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else $r=$r.next=r;return h}var oy=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(h){return h()})}},M2=n.unstable_scheduleCallback,P2=n.unstable_NormalPriority,ci={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ng(){return{controller:new oy,data:new Map,refCount:0}}function vu(a){a.refCount--,a.refCount===0&&M2(P2,function(){a.controller.abort()})}var ca=null,Yd=0,Vo=0,Ba=null;function ig(a,r){if(ca===null){var h=ca=[];Yd=0,Vo=ht(),Ba={status:"pending",value:void 0,then:function(d){h.push(d)}}}return Yd++,r.then(sg,sg),r}function sg(){if(--Yd===0&&ca!==null){Ba!==null&&(Ba.status="fulfilled");var a=ca;ca=null,Vo=0,Ba=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function ag(a,r){var h=[],d={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<h.length;v++)(0,h[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),d}var ly=Z.S;Z.S=function(a,r){Kg=en(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ig(a,r),ly!==null&&ly(a,r)};var bl=q(null);function Qd(){var a=bl.current;return a!==null?a:oe.pooledCache}function pf(a,r){r===null?It(bl,bl.current):It(bl,r.pool)}function rg(){var a=Qd();return a===null?null:{parent:ci._currentValue,pool:a}}var Eu=Error(i(460)),gf=Error(i(474)),ye=Error(i(542)),Xd={then:function(){}};function Bs(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Jd(a,r,h){switch(h=a[h],h===void 0?a.push(r):h!==r&&(r.then(fr,fr),r=h),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,bu(a),a;default:if(typeof r.status=="string")r.then(fr,fr);else{if(a=oe,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,bu(a),a}throw no=r,Eu}}function Tu(a){try{var r=a._init;return r(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(no=h,Eu):h}}var no=null;function Su(){if(no===null)throw Error(i(459));var a=no;return no=null,a}function bu(a){if(a===Eu||a===ye)throw Error(i(483))}var Au=null,wu=0;function _f(a){var r=wu;return wu+=1,Au===null&&(Au=[]),Jd(Au,a,r)}function Ga(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function qc(a,r){throw r.$$typeof===A?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function Wd(a){function r(tt,J){if(a){var st=tt.deletions;st===null?(tt.deletions=[J],tt.flags|=16):st.push(J)}}function h(tt,J){if(!a)return null;for(;J!==null;)r(tt,J),J=J.sibling;return null}function d(tt){for(var J=new Map;tt!==null;)tt.key!==null?J.set(tt.key,tt):J.set(tt.index,tt),tt=tt.sibling;return J}function v(tt,J){return tt=Us(tt,J),tt.index=0,tt.sibling=null,tt}function T(tt,J,st){return tt.index=st,a?(st=tt.alternate,st!==null?(st=st.index,st<J?(tt.flags|=67108866,J):st):(tt.flags|=67108866,J)):(tt.flags|=1048576,J)}function C(tt){return a&&tt.alternate===null&&(tt.flags|=67108866),tt}function O(tt,J,st,_t){return J===null||J.tag!==6?(J=Bd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function Y(tt,J,st,_t){var te=st.type;return te===k?gt(tt,J,st.props.children,_t,st.key):J!==null&&(J.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===M&&Tu(te)===J.type)?(J=v(J,st.props),Ga(J,st),J.return=tt,J):(J=Qr(st.type,st.key,st.props,null,tt.mode,_t),Ga(J,st),J.return=tt,J)}function at(tt,J,st,_t){return J===null||J.tag!==4||J.stateNode.containerInfo!==st.containerInfo||J.stateNode.implementation!==st.implementation?(J=Gd(st,tt.mode,_t),J.return=tt,J):(J=v(J,st.children||[]),J.return=tt,J)}function gt(tt,J,st,_t,te){return J===null||J.tag!==7?(J=_l(st,tt.mode,_t,te),J.return=tt,J):(J=v(J,st),J.return=tt,J)}function vt(tt,J,st){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Bd(""+J,tt.mode,st),J.return=tt,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return st=Qr(J.type,J.key,J.props,null,tt.mode,st),Ga(st,J),st.return=tt,st;case D:return J=Gd(J,tt.mode,st),J.return=tt,J;case M:return J=Tu(J),vt(tt,J,st)}if(Lt(J)||K(J))return J=_l(J,tt.mode,st,null),J.return=tt,J;if(typeof J.then=="function")return vt(tt,_f(J),st);if(J.$$typeof===X)return vt(tt,Hc(tt,J),st);qc(tt,J)}return null}function lt(tt,J,st,_t){var te=J!==null?J.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return te!==null?null:O(tt,J,""+st,_t);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case N:return st.key===te?Y(tt,J,st,_t):null;case D:return st.key===te?at(tt,J,st,_t):null;case M:return st=Tu(st),lt(tt,J,st,_t)}if(Lt(st)||K(st))return te!==null?null:gt(tt,J,st,_t,null);if(typeof st.then=="function")return lt(tt,J,_f(st),_t);if(st.$$typeof===X)return lt(tt,J,Hc(tt,st),_t);qc(tt,st)}return null}function pt(tt,J,st,_t,te){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return tt=tt.get(st)||null,O(J,tt,""+_t,te);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case N:return tt=tt.get(_t.key===null?st:_t.key)||null,Y(J,tt,_t,te);case D:return tt=tt.get(_t.key===null?st:_t.key)||null,at(J,tt,_t,te);case M:return _t=Tu(_t),pt(tt,J,st,_t,te)}if(Lt(_t)||K(_t))return tt=tt.get(st)||null,gt(J,tt,_t,te,null);if(typeof _t.then=="function")return pt(tt,J,st,_f(_t),te);if(_t.$$typeof===X)return pt(tt,J,st,Hc(J,_t),te);qc(J,_t)}return null}function Yt(tt,J,st,_t){for(var te=null,Ye=null,Jt=J,Se=J=0,Ue=null;Jt!==null&&Se<st.length;Se++){Jt.index>Se?(Ue=Jt,Jt=null):Ue=Jt.sibling;var Qe=lt(tt,Jt,st[Se],_t);if(Qe===null){Jt===null&&(Jt=Ue);break}a&&Jt&&Qe.alternate===null&&r(tt,Jt),J=T(Qe,J,Se),Ye===null?te=Qe:Ye.sibling=Qe,Ye=Qe,Jt=Ue}if(Se===st.length)return h(tt,Jt),Ne&&Xr(tt,Se),te;if(Jt===null){for(;Se<st.length;Se++)Jt=vt(tt,st[Se],_t),Jt!==null&&(J=T(Jt,J,Se),Ye===null?te=Jt:Ye.sibling=Jt,Ye=Jt);return Ne&&Xr(tt,Se),te}for(Jt=d(Jt);Se<st.length;Se++)Ue=pt(Jt,tt,Se,st[Se],_t),Ue!==null&&(a&&Ue.alternate!==null&&Jt.delete(Ue.key===null?Se:Ue.key),J=T(Ue,J,Se),Ye===null?te=Ue:Ye.sibling=Ue,Ye=Ue);return a&&Jt.forEach(function(hh){return r(tt,hh)}),Ne&&Xr(tt,Se),te}function se(tt,J,st,_t){if(st==null)throw Error(i(151));for(var te=null,Ye=null,Jt=J,Se=J=0,Ue=null,Qe=st.next();Jt!==null&&!Qe.done;Se++,Qe=st.next()){Jt.index>Se?(Ue=Jt,Jt=null):Ue=Jt.sibling;var hh=lt(tt,Jt,Qe.value,_t);if(hh===null){Jt===null&&(Jt=Ue);break}a&&Jt&&hh.alternate===null&&r(tt,Jt),J=T(hh,J,Se),Ye===null?te=hh:Ye.sibling=hh,Ye=hh,Jt=Ue}if(Qe.done)return h(tt,Jt),Ne&&Xr(tt,Se),te;if(Jt===null){for(;!Qe.done;Se++,Qe=st.next())Qe=vt(tt,Qe.value,_t),Qe!==null&&(J=T(Qe,J,Se),Ye===null?te=Qe:Ye.sibling=Qe,Ye=Qe);return Ne&&Xr(tt,Se),te}for(Jt=d(Jt);!Qe.done;Se++,Qe=st.next())Qe=pt(Jt,tt,Se,Qe.value,_t),Qe!==null&&(a&&Qe.alternate!==null&&Jt.delete(Qe.key===null?Se:Qe.key),J=T(Qe,J,Se),Ye===null?te=Qe:Ye.sibling=Qe,Ye=Qe);return a&&Jt.forEach(function(E7){return r(tt,E7)}),Ne&&Xr(tt,Se),te}function mn(tt,J,st,_t){if(typeof st=="object"&&st!==null&&st.type===k&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case N:t:{for(var te=st.key;J!==null;){if(J.key===te){if(te=st.type,te===k){if(J.tag===7){h(tt,J.sibling),_t=v(J,st.props.children),_t.return=tt,tt=_t;break t}}else if(J.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===M&&Tu(te)===J.type){h(tt,J.sibling),_t=v(J,st.props),Ga(_t,st),_t.return=tt,tt=_t;break t}h(tt,J);break}else r(tt,J);J=J.sibling}st.type===k?(_t=_l(st.props.children,tt.mode,_t,st.key),_t.return=tt,tt=_t):(_t=Qr(st.type,st.key,st.props,null,tt.mode,_t),Ga(_t,st),_t.return=tt,tt=_t)}return C(tt);case D:t:{for(te=st.key;J!==null;){if(J.key===te)if(J.tag===4&&J.stateNode.containerInfo===st.containerInfo&&J.stateNode.implementation===st.implementation){h(tt,J.sibling),_t=v(J,st.children||[]),_t.return=tt,tt=_t;break t}else{h(tt,J);break}else r(tt,J);J=J.sibling}_t=Gd(st,tt.mode,_t),_t.return=tt,tt=_t}return C(tt);case M:return st=Tu(st),mn(tt,J,st,_t)}if(Lt(st))return Yt(tt,J,st,_t);if(K(st)){if(te=K(st),typeof te!="function")throw Error(i(150));return st=te.call(st),se(tt,J,st,_t)}if(typeof st.then=="function")return mn(tt,J,_f(st),_t);if(st.$$typeof===X)return mn(tt,J,Hc(tt,st),_t);qc(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,J!==null&&J.tag===6?(h(tt,J.sibling),_t=v(J,st),_t.return=tt,tt=_t):(h(tt,J),_t=Bd(st,tt.mode,_t),_t.return=tt,tt=_t),C(tt)):h(tt,J)}return function(tt,J,st,_t){try{wu=0;var te=mn(tt,J,st,_t);return Au=null,te}catch(Jt){if(Jt===Eu||Jt===ye)throw Jt;var Ye=On(29,Jt,null,tt.mode);return Ye.lanes=_t,Ye.return=tt,Ye}}}var ko=Wd(!0),Zd=Wd(!1),Ss=!1;function yf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function og(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Lo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Al(a,r,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Wt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=za(a),pl(a,null,h),r}return Di(a,d,r,h),za(a)}function wl(a,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,il(a,h)}}function $t(a,r){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var v=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?v=T=C:T=T.next=C,h=h.next}while(h!==null);T===null?v=T=r:T=T.next=r}else v=T=r;h={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=r:a.next=r,h.lastBaseUpdate=r}var lg=!1;function vf(){if(lg){var a=Ba;if(a!==null)throw a}}function Fc(a,r,h,d){lg=!1;var v=a.updateQueue;Ss=!1;var T=v.firstBaseUpdate,C=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var Y=O,at=Y.next;Y.next=null,C===null?T=at:C.next=at,C=Y;var gt=a.alternate;gt!==null&&(gt=gt.updateQueue,O=gt.lastBaseUpdate,O!==C&&(O===null?gt.firstBaseUpdate=at:O.next=at,gt.lastBaseUpdate=Y))}if(T!==null){var vt=v.baseState;C=0,gt=at=Y=null,O=T;do{var lt=O.lane&-536870913,pt=lt!==O.lane;if(pt?(_e&lt)===lt:(d&lt)===lt){lt!==0&&lt===Vo&&(lg=!0),gt!==null&&(gt=gt.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var Yt=a,se=O;lt=r;var mn=h;switch(se.tag){case 1:if(Yt=se.payload,typeof Yt=="function"){vt=Yt.call(mn,vt,lt);break t}vt=Yt;break t;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=se.payload,lt=typeof Yt=="function"?Yt.call(mn,vt,lt):Yt,lt==null)break t;vt=b({},vt,lt);break t;case 2:Ss=!0}}lt=O.callback,lt!==null&&(a.flags|=64,pt&&(a.flags|=8192),pt=v.callbacks,pt===null?v.callbacks=[lt]:pt.push(lt))}else pt={lane:lt,tag:O.tag,payload:O.payload,callback:O.callback,next:null},gt===null?(at=gt=pt,Y=vt):gt=gt.next=pt,C|=lt;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;pt=O,O=pt.next,pt.next=null,v.lastBaseUpdate=pt,v.shared.pending=null}}while(!0);gt===null&&(Y=vt),v.baseState=Y,v.firstBaseUpdate=at,v.lastBaseUpdate=gt,T===null&&(v.shared.lanes=0),uo|=C,a.lanes=C,a.memoizedState=vt}}function jc(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function uy(a,r){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)jc(h[a],r)}var Kc=q(null),$d=q(0);function cy(a,r){a=ma,It($d,a),It(Kc,r),ma=a|r.baseLanes}function ug(){It($d,ma),It(Kc,Kc.current)}function Ef(){ma=$d.current,ut(Kc),ut($d)}var Gs=q(null),bs=null;function Uo(a){var r=a.alternate;It(De,De.current&1),It(Gs,a),bs===null&&(r===null||Kc.current!==null||r.memoizedState!==null)&&(bs=a)}function cg(a){It(De,De.current),It(Gs,a),bs===null&&(bs=a)}function hy(a){a.tag===22?(It(De,De.current),It(Gs,a),bs===null&&(bs=a)):Hs()}function Hs(){It(De,De.current),It(Gs,Gs.current)}function $n(a){ut(Gs),bs===a&&(bs=null),ut(De)}var De=q(0);function ha(a){for(var r=a;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||W2(h)||Z2(h)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sn=0,me=null,nn=null,Re=null,Ha=!1,Yc=!1,Ru=!1,tm=0,Tf=0,Qc=null,hg=0;function Pn(){throw Error(i(321))}function fg(a,r){if(r===null)return!1;for(var h=0;h<r.length&&h<a.length;h++)if(!Es(a[h],r[h]))return!1;return!0}function em(a,r,h,d,v,T){return Sn=T,me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=a===null||a.memoizedState===null?qy:Og,Ru=!1,T=h(d,v),Ru=!1,Yc&&(T=Cu(r,h,d,v)),fy(a),T}function fy(a){Z.H=Xc;var r=nn!==null&&nn.next!==null;if(Sn=0,Re=nn=me=null,Ha=!1,Tf=0,Qc=null,r)throw Error(i(300));a===null||hi||(a=a.dependencies,a!==null&&mf(a)&&(hi=!0))}function Cu(a,r,h,d){me=a;var v=0;do{if(Yc&&(Qc=null),Tf=0,Yc=!1,25<=v)throw Error(i(301));if(v+=1,Re=nn=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}Z.H=qa,T=r(h,d)}while(Yc);return T}function Iu(){var a=Z.H,r=a.useState()[0];return r=typeof r.then=="function"?Sf(r):r,a=a.useState()[0],(nn!==null?nn.memoizedState:null)!==a&&(me.flags|=1024),r}function dg(){var a=tm!==0;return tm=0,a}function mg(a,r,h){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~h}function pg(a){if(Ha){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Ha=!1}Sn=0,Re=nn=me=null,Yc=!1,Tf=tm=0,Qc=null}function _i(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?me.memoizedState=Re=a:Re=Re.next=a,Re}function ti(){if(nn===null){var a=me.alternate;a=a!==null?a.memoizedState:null}else a=nn.next;var r=Re===null?me.memoizedState:Re.next;if(r!==null)Re=r,nn=a;else{if(a===null)throw me.alternate===null?Error(i(467)):Error(i(310));nn=a,a={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Re===null?me.memoizedState=Re=a:Re=Re.next=a}return Re}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sf(a){var r=Tf;return Tf+=1,Qc===null&&(Qc=[]),a=Jd(Qc,a,r),r=me,(Re===null?r.memoizedState:Re.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?qy:Og),a}function Rl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Sf(a);if(a.$$typeof===X)return re(a)}throw Error(i(438,String(a)))}function gg(a){var r=null,h=me.updateQueue;if(h!==null&&(r=h.memoCache),r==null){var d=me.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),h===null&&(h=nm(),me.updateQueue=h),h.memoCache=r,h=r.data[r.index],h===void 0)for(h=r.data[r.index]=Array(a),d=0;d<a;d++)h[d]=H;return r.index++,h}function zo(a,r){return typeof r=="function"?r(a):r}function im(a){var r=ti();return _g(r,nn,a)}function _g(a,r,h){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=h;var v=a.baseQueue,T=d.pending;if(T!==null){if(v!==null){var C=v.next;v.next=T.next,T.next=C}r.baseQueue=v=T,d.pending=null}if(T=a.baseState,v===null)a.memoizedState=T;else{r=v.next;var O=C=null,Y=null,at=r,gt=!1;do{var vt=at.lane&-536870913;if(vt!==at.lane?(_e&vt)===vt:(Sn&vt)===vt){var lt=at.revertLane;if(lt===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),vt===Vo&&(gt=!0);else if((Sn&lt)===lt){at=at.next,lt===Vo&&(gt=!0);continue}else vt={lane:0,revertLane:at.revertLane,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Y===null?(O=Y=vt,C=T):Y=Y.next=vt,me.lanes|=lt,uo|=lt;vt=at.action,Ru&&h(T,vt),T=at.hasEagerState?at.eagerState:h(T,vt)}else lt={lane:vt,revertLane:at.revertLane,gesture:at.gesture,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Y===null?(O=Y=lt,C=T):Y=Y.next=lt,me.lanes|=vt,uo|=vt;at=at.next}while(at!==null&&at!==r);if(Y===null?C=T:Y.next=O,!Es(T,a.memoizedState)&&(hi=!0,gt&&(h=Ba,h!==null)))throw h;a.memoizedState=T,a.baseState=C,a.baseQueue=Y,d.lastRenderedState=T}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function yg(a){var r=ti(),h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var d=h.dispatch,v=h.pending,T=r.memoizedState;if(v!==null){h.pending=null;var C=v=v.next;do T=a(T,C.action),C=C.next;while(C!==v);Es(T,r.memoizedState)||(hi=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),h.lastRenderedState=T}return[T,d]}function dy(a,r,h){var d=me,v=ti(),T=Ne;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=r();var C=!Es((nn||v).memoizedState,h);if(C&&(v.memoizedState=h,hi=!0),v=v.queue,Rg(gy.bind(null,d,v,a),[a]),v.getSnapshot!==r||C||Re!==null&&Re.memoizedState.tag&1){if(d.flags|=2048,Cl(9,{destroy:void 0},py.bind(null,d,v,h,r),null),oe===null)throw Error(i(349));T||(Sn&127)!==0||my(d,r,h)}return h}function my(a,r,h){a.flags|=16384,a={getSnapshot:r,value:h},r=me.updateQueue,r===null?(r=nm(),me.updateQueue=r,r.stores=[a]):(h=r.stores,h===null?r.stores=[a]:h.push(a))}function py(a,r,h,d){r.value=h,r.getSnapshot=d,_y(r)&&yy(a)}function gy(a,r,h){return h(function(){_y(r)&&yy(a)})}function _y(a){var r=a.getSnapshot;a=a.value;try{var h=r();return!Es(a,h)}catch{return!0}}function yy(a){var r=Ts(a,2);r!==null&&Ee(r,a,2)}function vg(a){var r=_i();if(typeof a=="function"){var h=a;if(a=h(),Ru){le(!0);try{h()}finally{le(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:a},r}function Eg(a,r,h,d){return a.baseState=h,_g(a,nn,typeof d=="function"?d:zo)}function V2(a,r,h,d,v){if(om(a))throw Error(i(485));if(a=r.action,a!==null){var T={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};Z.T!==null?h(!0):T.isTransition=!1,d(T),h=r.pending,h===null?(T.next=r.pending=T,vy(r,T)):(T.next=h.next,r.pending=h.next=T)}}function vy(a,r){var h=r.action,d=r.payload,v=a.state;if(r.isTransition){var T=Z.T,C={};Z.T=C;try{var O=h(v,d),Y=Z.S;Y!==null&&Y(C,O),Ey(a,r,O)}catch(at){Tg(a,r,at)}finally{T!==null&&C.types!==null&&(T.types=C.types),Z.T=T}}else try{T=h(v,d),Ey(a,r,T)}catch(at){Tg(a,r,at)}}function Ey(a,r,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){Ty(a,r,d)},function(d){return Tg(a,r,d)}):Ty(a,r,h)}function Ty(a,r,h){r.status="fulfilled",r.value=h,Sy(r),a.state=h,r=a.pending,r!==null&&(h=r.next,h===r?a.pending=null:(h=h.next,r.next=h,vy(a,h)))}function Tg(a,r,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=h,Sy(r),r=r.next;while(r!==d)}a.action=null}function Sy(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Sg(a,r){return r}function bg(a,r){if(Ne){var h=oe.formState;if(h!==null){t:{var d=me;if(Ne){if(hn){e:{for(var v=hn,T=ua;v.nodeType!==8;){if(!T){v=null;break e}if(v=fo(v.nextSibling),v===null){v=null;break e}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){hn=fo(v.nextSibling),d=v.data==="F!";break t}}Wr(d)}d=!1}d&&(r=h[0])}}return h=_i(),h.memoizedState=h.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:r},h.queue=d,h=By.bind(null,me,d),d.dispatch=h,d=vg(!1),T=xg.bind(null,me,!1,d.queue),d=_i(),v={state:r,dispatch:null,action:a,pending:null},d.queue=v,h=V2.bind(null,me,v,T,h),v.dispatch=h,d.memoizedState=a,[r,h,!1]}function by(a){var r=ti();return Ag(r,nn,a)}function Ag(a,r,h){if(r=_g(a,r,Sg)[0],a=im(zo)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Sf(r)}catch(C){throw C===Eu?ye:C}else d=r;r=ti();var v=r.queue,T=v.dispatch;return h!==r.memoizedState&&(me.flags|=2048,Cl(9,{destroy:void 0},Ay.bind(null,v,h),null)),[d,T,a]}function Ay(a,r){a.action=r}function wg(a){var r=ti(),h=nn;if(h!==null)return Ag(r,h,a);ti(),r=r.memoizedState,h=ti();var d=h.queue.dispatch;return h.memoizedState=a,[r,d,!1]}function Cl(a,r,h,d){return a={tag:a,create:h,deps:d,inst:r,next:null},r=me.updateQueue,r===null&&(r=nm(),me.updateQueue=r),h=r.lastEffect,h===null?r.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,r.lastEffect=a),a}function sm(){return ti().memoizedState}function am(a,r,h,d){var v=_i();me.flags|=a,v.memoizedState=Cl(1|r,{destroy:void 0},h,d===void 0?null:d)}function rm(a,r,h,d){var v=ti();d=d===void 0?null:d;var T=v.memoizedState.inst;nn!==null&&d!==null&&fg(d,nn.memoizedState.deps)?v.memoizedState=Cl(r,T,h,d):(me.flags|=a,v.memoizedState=Cl(1|r,T,h,d))}function wy(a,r){am(8390656,8,a,r)}function Rg(a,r){rm(2048,8,a,r)}function Ry(a){me.flags|=4;var r=me.updateQueue;if(r===null)r=nm(),me.updateQueue=r,r.events=[a];else{var h=r.events;h===null?r.events=[a]:h.push(a)}}function Cy(a){var r=ti().memoizedState;return Ry({ref:r,nextImpl:a}),function(){if((Wt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Iy(a,r){return rm(4,2,a,r)}function Ny(a,r){return rm(4,4,a,r)}function Dy(a,r){if(typeof r=="function"){a=a();var h=r(a);return function(){typeof h=="function"?h():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function xy(a,r,h){h=h!=null?h.concat([a]):null,rm(4,4,Dy.bind(null,r,a),h)}function Cg(){}function Oy(a,r){var h=ti();r=r===void 0?null:r;var d=h.memoizedState;return r!==null&&fg(r,d[1])?d[0]:(h.memoizedState=[a,r],a)}function My(a,r){var h=ti();r=r===void 0?null:r;var d=h.memoizedState;if(r!==null&&fg(r,d[1]))return d[0];if(d=a(),Ru){le(!0);try{a()}finally{le(!1)}}return h.memoizedState=[d,r],d}function Ig(a,r,h){return h===void 0||(Sn&1073741824)!==0&&(_e&261930)===0?a.memoizedState=r:(a.memoizedState=h,a=Ae(),me.lanes|=a,uo|=a,h)}function Py(a,r,h,d){return Es(h,r)?h:Kc.current!==null?(a=Ig(a,h,d),Es(a,r)||(hi=!0),a):(Sn&42)===0||(Sn&1073741824)!==0&&(_e&261930)===0?(hi=!0,a.memoizedState=h):(a=Ae(),me.lanes|=a,uo|=a,r)}function Vy(a,r,h,d,v){var T=Tt.p;Tt.p=T!==0&&8>T?T:8;var C=Z.T,O={};Z.T=O,xg(a,!1,r,h);try{var Y=v(),at=Z.S;if(at!==null&&at(O,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var gt=ag(Y,d);bf(a,r,gt,ga(a))}else bf(a,r,d,ga(a))}catch(vt){bf(a,r,{then:function(){},status:"rejected",reason:vt},ga())}finally{Tt.p=T,C!==null&&O.types!==null&&(C.types=O.types),Z.T=C}}function k2(){}function Ng(a,r,h,d){if(a.tag!==5)throw Error(i(476));var v=ky(a).queue;Vy(a,v,r,Et,h===null?k2:function(){return Ly(a),h(d)})}function ky(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:Et,baseState:Et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:Et},next:null};var h={};return r.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:h},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function Ly(a){var r=ky(a);r.next===null&&(r=a.alternate.memoizedState),bf(a,r.next.queue,{},ga())}function Dg(){return re(Zg)}function Uy(){return ti().memoizedState}function zy(){return ti().memoizedState}function L2(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var h=ga();a=Lo(h);var d=Al(r,a,h);d!==null&&(Ee(d,r,h),wl(d,r,h)),r={cache:ng()},a.payload=r;return}r=r.return}}function U2(a,r,h){var d=ga();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},om(a)?Gy(r,h):(h=Ud(a,r,h,d),h!==null&&(Ee(h,a,d),Hy(h,r,d)))}function By(a,r,h){var d=ga();bf(a,r,h,d)}function bf(a,r,h,d){var v={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(om(a))Gy(r,v);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,O=T(C,h);if(v.hasEagerState=!0,v.eagerState=O,Es(O,C))return Di(a,r,v,0),oe===null&&ff(),!1}catch{}if(h=Ud(a,r,v,d),h!==null)return Ee(h,a,d),Hy(h,r,d),!0}return!1}function xg(a,r,h,d){if(d={lane:2,revertLane:ht(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},om(a)){if(r)throw Error(i(479))}else r=Ud(a,h,d,2),r!==null&&Ee(r,a,2)}function om(a){var r=a.alternate;return a===me||r!==null&&r===me}function Gy(a,r){Yc=Ha=!0;var h=a.pending;h===null?r.next=r:(r.next=h.next,h.next=r),a.pending=r}function Hy(a,r,h){if((h&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,h|=d,r.lanes=h,il(a,h)}}var Xc={readContext:re,use:Rl,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};Xc.useEffectEvent=Pn;var qy={readContext:re,use:Rl,useCallback:function(a,r){return _i().memoizedState=[a,r===void 0?null:r],a},useContext:re,useEffect:wy,useImperativeHandle:function(a,r,h){h=h!=null?h.concat([a]):null,am(4194308,4,Dy.bind(null,r,a),h)},useLayoutEffect:function(a,r){return am(4194308,4,a,r)},useInsertionEffect:function(a,r){am(4,2,a,r)},useMemo:function(a,r){var h=_i();r=r===void 0?null:r;var d=a();if(Ru){le(!0);try{a()}finally{le(!1)}}return h.memoizedState=[d,r],d},useReducer:function(a,r,h){var d=_i();if(h!==void 0){var v=h(r);if(Ru){le(!0);try{h(r)}finally{le(!1)}}}else v=r;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=U2.bind(null,me,a),[d.memoizedState,a]},useRef:function(a){var r=_i();return a={current:a},r.memoizedState=a},useState:function(a){a=vg(a);var r=a.queue,h=By.bind(null,me,r);return r.dispatch=h,[a.memoizedState,h]},useDebugValue:Cg,useDeferredValue:function(a,r){var h=_i();return Ig(h,a,r)},useTransition:function(){var a=vg(!1);return a=Vy.bind(null,me,a.queue,!0,!1),_i().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,h){var d=me,v=_i();if(Ne){if(h===void 0)throw Error(i(407));h=h()}else{if(h=r(),oe===null)throw Error(i(349));(_e&127)!==0||my(d,r,h)}v.memoizedState=h;var T={value:h,getSnapshot:r};return v.queue=T,wy(gy.bind(null,d,T,a),[a]),d.flags|=2048,Cl(9,{destroy:void 0},py.bind(null,d,T,h,r),null),h},useId:function(){var a=_i(),r=oe.identifierPrefix;if(Ne){var h=vr,d=Mn;h=(d&~(1<<32-ue(d)-1)).toString(32)+h,r="_"+r+"R_"+h,h=tm++,0<h&&(r+="H"+h.toString(32)),r+="_"}else h=hg++,r="_"+r+"r_"+h.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Dg,useFormState:bg,useActionState:bg,useOptimistic:function(a){var r=_i();r.memoizedState=r.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=h,r=xg.bind(null,me,!0,h),h.dispatch=r,[a,r]},useMemoCache:gg,useCacheRefresh:function(){return _i().memoizedState=L2.bind(null,me)},useEffectEvent:function(a){var r=_i(),h={impl:a};return r.memoizedState=h,function(){if((Wt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Og={readContext:re,use:Rl,useCallback:Oy,useContext:re,useEffect:Rg,useImperativeHandle:xy,useInsertionEffect:Iy,useLayoutEffect:Ny,useMemo:My,useReducer:im,useRef:sm,useState:function(){return im(zo)},useDebugValue:Cg,useDeferredValue:function(a,r){var h=ti();return Py(h,nn.memoizedState,a,r)},useTransition:function(){var a=im(zo)[0],r=ti().memoizedState;return[typeof a=="boolean"?a:Sf(a),r]},useSyncExternalStore:dy,useId:Uy,useHostTransitionStatus:Dg,useFormState:by,useActionState:by,useOptimistic:function(a,r){var h=ti();return Eg(h,nn,a,r)},useMemoCache:gg,useCacheRefresh:zy};Og.useEffectEvent=Cy;var qa={readContext:re,use:Rl,useCallback:Oy,useContext:re,useEffect:Rg,useImperativeHandle:xy,useInsertionEffect:Iy,useLayoutEffect:Ny,useMemo:My,useReducer:yg,useRef:sm,useState:function(){return yg(zo)},useDebugValue:Cg,useDeferredValue:function(a,r){var h=ti();return nn===null?Ig(h,a,r):Py(h,nn.memoizedState,a,r)},useTransition:function(){var a=yg(zo)[0],r=ti().memoizedState;return[typeof a=="boolean"?a:Sf(a),r]},useSyncExternalStore:dy,useId:Uy,useHostTransitionStatus:Dg,useFormState:wg,useActionState:wg,useOptimistic:function(a,r){var h=ti();return nn!==null?Eg(h,nn,a,r):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:gg,useCacheRefresh:zy};qa.useEffectEvent=Cy;function lm(a,r,h,d){r=a.memoizedState,h=h(d,r),h=h==null?r:b({},r,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Af={enqueueSetState:function(a,r,h){a=a._reactInternals;var d=ga(),v=Lo(d);v.payload=r,h!=null&&(v.callback=h),r=Al(a,v,d),r!==null&&(Ee(r,a,d),wl(r,a,d))},enqueueReplaceState:function(a,r,h){a=a._reactInternals;var d=ga(),v=Lo(d);v.tag=1,v.payload=r,h!=null&&(v.callback=h),r=Al(a,v,d),r!==null&&(Ee(r,a,d),wl(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var h=ga(),d=Lo(h);d.tag=2,r!=null&&(d.callback=r),r=Al(a,d,h),r!==null&&(Ee(r,a,h),wl(r,a,h))}};function Mg(a,r,h,d,v,T,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,T,C):r.prototype&&r.prototype.isPureReactComponent?!xc(h,d)||!xc(v,T):!0}function Pg(a,r,h,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,d),r.state!==a&&Af.enqueueReplaceState(r,r.state,null)}function Il(a,r){var h=r;if("ref"in r){h={};for(var d in r)d!=="ref"&&(h[d]=r[d])}if(a=a.defaultProps){h===r&&(h=b({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}function Fy(a){hf(a)}function Vg(a){console.error(a)}function kg(a){hf(a)}function um(a,r){try{var h=a.onUncaughtError;h(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function jy(a,r,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Lg(a,r,h){return h=Lo(h),h.tag=3,h.payload={element:null},h.callback=function(){um(a,r)},h}function Ug(a){return a=Lo(a),a.tag=3,a}function Ky(a,r,h,d){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var T=d.value;a.payload=function(){return v(T)},a.callback=function(){jy(r,h,d)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){jy(r,h,d),typeof v!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function yi(a,r,h,d,v){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=h.alternate,r!==null&&eo(r,h,v,!0),h=Gs.current,h!==null){switch(h.tag){case 31:case 13:return bs===null?nh():h.alternate===null&&Vn===0&&(Vn=3),h.flags&=-257,h.flags|=65536,h.lanes=v,d===Xd?h.flags|=16384:(r=h.updateQueue,r===null?h.updateQueue=new Set([d]):r.add(d),kf(a,d,v)),!1;case 22:return h.flags|=65536,d===Xd?h.flags|=16384:(r=h.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=r):(h=r.retryQueue,h===null?r.retryQueue=new Set([d]):h.add(d)),kf(a,d,v)),!1}throw Error(i(435,h.tag))}return kf(a,d,v),nh(),!1}if(Ne)return r=Gs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==zc&&(a=Error(i(422),{cause:d}),Zr(la(a,h)))):(d!==zc&&(r=Error(i(423),{cause:d}),Zr(la(r,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=la(d,h),v=Lg(a.stateNode,d,v),$t(a,v),Vn!==4&&(Vn=2)),!1;var T=Error(i(520),{cause:d});if(T=la(T,h),ku===null?ku=[T]:ku.push(T),Vn!==4&&(Vn=2),r===null)return!0;d=la(d,h),h=r;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=Lg(h.stateNode,d,a),$t(h,a),!1;case 1:if(r=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ii===null||!ii.has(T))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Ug(v),Ky(v,a,h,d),$t(h,v),!1}h=h.return}while(h!==null);return!1}var cm=Error(i(461)),hi=!1;function xi(a,r,h,d){r.child=a===null?Zd(r,null,h,d):ko(r,a.child,h,d)}function zg(a,r,h,d,v){h=h.render;var T=r.ref;if("ref"in d){var C={};for(var O in d)O!=="ref"&&(C[O]=d[O])}else C=d;return Sl(r),d=em(a,r,h,C,T,v),O=dg(),a!==null&&!hi?(mg(a,r,v),ei(a,r,v)):(Ne&&O&&Jr(r),r.flags|=1,xi(a,r,d,v),r.child)}function Nu(a,r,h,d,v){if(a===null){var T=h.type;return typeof T=="function"&&!zd(T)&&T.defaultProps===void 0&&h.compare===null?(r.tag=15,r.type=T,hm(a,r,T,d,v)):(a=Qr(h.type,null,d,r,r.mode,v),a.ref=r.ref,a.return=r,r.child=a)}if(T=a.child,!_m(a,v)){var C=T.memoizedProps;if(h=h.compare,h=h!==null?h:xc,h(C,d)&&a.ref===r.ref)return ei(a,r,v)}return r.flags|=1,a=Us(T,d),a.ref=r.ref,a.return=r,r.child=a}function hm(a,r,h,d,v){if(a!==null){var T=a.memoizedProps;if(xc(T,d)&&a.ref===r.ref)if(hi=!1,r.pendingProps=d=T,_m(a,v))(a.flags&131072)!==0&&(hi=!0);else return r.lanes=a.lanes,ei(a,r,v)}return Jc(a,r,h,d,v)}function Du(a,r,h,d){var v=d.children,T=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,a!==null){for(d=r.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~T}else d=0,r.child=null;return qs(a,r,T,h,d)}if((h&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&pf(r,T!==null?T.cachePool:null),T!==null?cy(r,T):ug(),hy(r);else return d=r.lanes=536870912,qs(a,r,T!==null?T.baseLanes|h:h,h,d)}else T!==null?(pf(r,T.cachePool),cy(r,T),Hs(),r.memoizedState=null):(a!==null&&pf(r,null),ug(),Hs());return xi(a,r,v,h),r.child}function io(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qs(a,r,h,d,v){var T=Qd();return T=T===null?null:{parent:ci._currentValue,pool:T},r.memoizedState={baseLanes:h,cachePool:T},a!==null&&pf(r,null),ug(),hy(r),a!==null&&eo(a,r,d,!0),r.childLanes=v,null}function fm(a,r){return r=gm({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function Yy(a,r,h){return ko(r,a.child,null,h),a=fm(r,r.pendingProps),a.flags|=2,$n(r),r.memoizedState=null,a}function dm(a,r,h){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(Ne){if(d.mode==="hidden")return a=fm(r,d),r.lanes=536870912,io(null,a);if(cg(r),(a=hn)?(a=x4(a,ua),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:Oo!==null?{id:Mn,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},h=kc(a),h.return=r,r.child=h,Fn=r,hn=null)):a=null,a===null)throw Wr(r);return r.lanes=536870912,null}return fm(r,d)}var T=a.memoizedState;if(T!==null){var C=T.dehydrated;if(cg(r),v)if(r.flags&256)r.flags&=-257,r=Yy(a,r,h);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(i(558));else if(hi||eo(a,r,h,!1),v=(h&a.childLanes)!==0,hi||v){if(d=oe,d!==null&&(C=mc(d,h),C!==0&&C!==T.retryLane))throw T.retryLane=C,Ts(a,C),Ee(d,a,C),cm;nh(),r=Yy(a,r,h)}else a=T.treeContext,hn=fo(C.nextSibling),Fn=r,Ne=!0,Mo=null,ua=!1,a!==null&&qd(r,a),r=fm(r,d),r.flags|=4096;return r}return a=Us(a.child,{mode:d.mode,children:d.children}),a.ref=r.ref,r.child=a,a.return=r,a}function xu(a,r){var h=r.ref;if(h===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(r.flags|=4194816)}}function Jc(a,r,h,d,v){return Sl(r),h=em(a,r,h,d,void 0,v),d=dg(),a!==null&&!hi?(mg(a,r,v),ei(a,r,v)):(Ne&&d&&Jr(r),r.flags|=1,xi(a,r,h,v),r.child)}function wf(a,r,h,d,v,T){return Sl(r),r.updateQueue=null,h=Cu(r,d,h,v),fy(a),d=dg(),a!==null&&!hi?(mg(a,r,T),ei(a,r,T)):(Ne&&d&&Jr(r),r.flags|=1,xi(a,r,h,T),r.child)}function mm(a,r,h,d,v){if(Sl(r),r.stateNode===null){var T=gl,C=h.contextType;typeof C=="object"&&C!==null&&(T=re(C)),T=new h(d,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Af,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=d,T.state=r.memoizedState,T.refs={},yf(r),C=h.contextType,T.context=typeof C=="object"&&C!==null?re(C):gl,T.state=r.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(lm(r,h,C,d),T.state=r.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&Af.enqueueReplaceState(T,T.state,null),Fc(r,d,T,v),vf(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){T=r.stateNode;var O=r.memoizedProps,Y=Il(h,O);T.props=Y;var at=T.context,gt=h.contextType;C=gl,typeof gt=="object"&&gt!==null&&(C=re(gt));var vt=h.getDerivedStateFromProps;gt=typeof vt=="function"||typeof T.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,gt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O||at!==C)&&Pg(r,T,d,C),Ss=!1;var lt=r.memoizedState;T.state=lt,Fc(r,d,T,v),vf(),at=r.memoizedState,O||lt!==at||Ss?(typeof vt=="function"&&(lm(r,h,vt,d),at=r.memoizedState),(Y=Ss||Mg(r,h,Y,d,lt,at,C))?(gt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=at),T.props=d,T.state=at,T.context=C,d=Y):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{T=r.stateNode,og(a,r),C=r.memoizedProps,gt=Il(h,C),T.props=gt,vt=r.pendingProps,lt=T.context,at=h.contextType,Y=gl,typeof at=="object"&&at!==null&&(Y=re(at)),O=h.getDerivedStateFromProps,(at=typeof O=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==vt||lt!==Y)&&Pg(r,T,d,Y),Ss=!1,lt=r.memoizedState,T.state=lt,Fc(r,d,T,v),vf();var pt=r.memoizedState;C!==vt||lt!==pt||Ss||a!==null&&a.dependencies!==null&&mf(a.dependencies)?(typeof O=="function"&&(lm(r,h,O,d),pt=r.memoizedState),(gt=Ss||Mg(r,h,gt,d,lt,pt,Y)||a!==null&&a.dependencies!==null&&mf(a.dependencies))?(at||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,pt,Y),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,pt,Y)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=pt),T.props=d,T.state=pt,T.context=Y,d=gt):(typeof T.componentDidUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&lt===a.memoizedState||(r.flags|=1024),d=!1)}return T=d,xu(a,r),d=(r.flags&128)!==0,T||d?(T=r.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,a!==null&&d?(r.child=ko(r,a.child,null,v),r.child=ko(r,null,h,v)):xi(a,r,h,v),r.memoizedState=T.state,a=r.child):a=ei(a,r,v),a}function Qy(a,r,h,d){return El(),r.flags|=256,xi(a,r,h,d),r.child}var Bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function as(a){return{baseLanes:a,cachePool:rg()}}function pm(a,r,h){return a=a!==null?a.childLanes&~h:0,r&&(a|=Cs),a}function Xy(a,r,h){var d=r.pendingProps,v=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=a!==null&&a.memoizedState===null?!1:(De.current&2)!==0),C&&(v=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,a===null){if(Ne){if(v?Uo(r):Hs(),(a=hn)?(a=x4(a,ua),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:Oo!==null?{id:Mn,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},h=kc(a),h.return=r,r.child=h,Fn=r,hn=null)):a=null,a===null)throw Wr(r);return Z2(a)?r.lanes=32:r.lanes=536870912,null}var O=d.children;return d=d.fallback,v?(Hs(),v=r.mode,O=gm({mode:"hidden",children:O},v),d=_l(d,v,h,null),O.return=r,d.return=r,O.sibling=d,r.child=O,d=r.child,d.memoizedState=as(h),d.childLanes=pm(a,C,h),r.memoizedState=Bg,io(null,d)):(Uo(r),Rf(r,O))}var Y=a.memoizedState;if(Y!==null&&(O=Y.dehydrated,O!==null)){if(T)r.flags&256?(Uo(r),r.flags&=-257,r=Gg(a,r,h)):r.memoizedState!==null?(Hs(),r.child=a.child,r.flags|=128,r=null):(Hs(),O=d.fallback,v=r.mode,d=gm({mode:"visible",children:d.children},v),O=_l(O,v,h,null),O.flags|=2,d.return=r,O.return=r,d.sibling=O,r.child=d,ko(r,a.child,null,h),d=r.child,d.memoizedState=as(h),d.childLanes=pm(a,C,h),r.memoizedState=Bg,r=io(null,d));else if(Uo(r),Z2(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var at=C.dgst;C=at,d=Error(i(419)),d.stack="",d.digest=C,Zr({value:d,source:null,stack:null}),r=Gg(a,r,h)}else if(hi||eo(a,r,h,!1),C=(h&a.childLanes)!==0,hi||C){if(C=oe,C!==null&&(d=mc(C,h),d!==0&&d!==Y.retryLane))throw Y.retryLane=d,Ts(a,d),Ee(C,a,d),cm;W2(O)||nh(),r=Gg(a,r,h)}else W2(O)?(r.flags|=192,r.child=a.child,r=null):(a=Y.treeContext,hn=fo(O.nextSibling),Fn=r,Ne=!0,Mo=null,ua=!1,a!==null&&qd(r,a),r=Rf(r,d.children),r.flags|=4096);return r}return v?(Hs(),O=d.fallback,v=r.mode,Y=a.child,at=Y.sibling,d=Us(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,at!==null?O=Us(at,O):(O=_l(O,v,h,null),O.flags|=2),O.return=r,d.return=r,d.sibling=O,r.child=d,io(null,d),d=r.child,O=a.child.memoizedState,O===null?O=as(h):(v=O.cachePool,v!==null?(Y=ci._currentValue,v=v.parent!==Y?{parent:Y,pool:Y}:v):v=rg(),O={baseLanes:O.baseLanes|h,cachePool:v}),d.memoizedState=O,d.childLanes=pm(a,C,h),r.memoizedState=Bg,io(a.child,d)):(Uo(r),h=a.child,a=h.sibling,h=Us(h,{mode:"visible",children:d.children}),h.return=r,h.sibling=null,a!==null&&(C=r.deletions,C===null?(r.deletions=[a],r.flags|=16):C.push(a)),r.child=h,r.memoizedState=null,h)}function Rf(a,r){return r=gm({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function gm(a,r){return a=On(22,a,null,r),a.lanes=0,a}function Gg(a,r,h){return ko(r,a.child,null,h),a=Rf(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function Jy(a,r,h){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),jd(a.return,r,h)}function Ou(a,r,h,d,v,T){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:v,treeForkCount:T}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=h,C.tailMode=v,C.treeForkCount=T)}function Fs(a,r,h){var d=r.pendingProps,v=d.revealOrder,T=d.tail;d=d.children;var C=De.current,O=(C&2)!==0;if(O?(C=C&1|2,r.flags|=128):C&=1,It(De,C),xi(a,r,d,h),d=Ne?Uc:0,!O&&a!==null&&(a.flags&128)!==0)t:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Jy(a,h,r);else if(a.tag===19)Jy(a,h,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(h=r.child,v=null;h!==null;)a=h.alternate,a!==null&&ha(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),Ou(r,!1,v,h,T,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(a=v.alternate,a!==null&&ha(a)===null){r.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}Ou(r,!0,h,null,T,d);break;case"together":Ou(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function ei(a,r,h){if(a!==null&&(r.dependencies=a.dependencies),uo|=r.lanes,(h&r.childLanes)===0)if(a!==null){if(eo(a,r,h,!1),(h&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,h=Us(a,a.pendingProps),r.child=h,h.return=r;a.sibling!==null;)a=a.sibling,h=h.sibling=Us(a,a.pendingProps),h.return=r;h.sibling=null}return r.child}function _m(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&mf(a)))}function z2(a,r,h){switch(r.tag){case 3:vn(r,r.stateNode.containerInfo),Po(r,ci,a.memoizedState.cache),El();break;case 27:case 5:xr(r);break;case 4:vn(r,r.stateNode.containerInfo);break;case 10:Po(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,cg(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Uo(r),r.flags|=128,null):(h&r.child.childLanes)!==0?Xy(a,r,h):(Uo(r),a=ei(a,r,h),a!==null?a.sibling:null);Uo(r);break;case 19:var v=(a.flags&128)!==0;if(d=(h&r.childLanes)!==0,d||(eo(a,r,h,!1),d=(h&r.childLanes)!==0),v){if(d)return Fs(a,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),It(De,De.current),d)break;return null;case 22:return r.lanes=0,Du(a,r,h,r.pendingProps);case 24:Po(r,ci,a.memoizedState.cache)}return ei(a,r,h)}function ym(a,r,h){if(a!==null)if(a.memoizedProps!==r.pendingProps)hi=!0;else{if(!_m(a,h)&&(r.flags&128)===0)return hi=!1,z2(a,r,h);hi=(a.flags&131072)!==0}else hi=!1,Ne&&(r.flags&1048576)!==0&&iy(r,Uc,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(a=Tu(r.elementType),r.type=a,typeof a=="function")zd(a)?(d=Il(a,d),r.tag=1,r=mm(null,r,a,d,h)):(r.tag=0,r=Jc(null,r,a,d,h));else{if(a!=null){var v=a.$$typeof;if(v===W){r.tag=11,r=zg(null,r,a,d,h);break t}else if(v===V){r.tag=14,r=Nu(null,r,a,d,h);break t}}throw r=Kt(a)||a,Error(i(306,r,""))}}return r;case 0:return Jc(a,r,r.type,r.pendingProps,h);case 1:return d=r.type,v=Il(d,r.pendingProps),mm(a,r,d,v,h);case 3:t:{if(vn(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var T=r.memoizedState;v=T.element,og(a,r),Fc(r,d,null,h);var C=r.memoizedState;if(d=C.cache,Po(r,ci,d),d!==T.cache&&Kd(r,[ci],h,!0),vf(),d=C.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=Qy(a,r,d,h);break t}else if(d!==v){v=la(Error(i(424)),r),Zr(v),r=Qy(a,r,d,h);break t}else for(a=r.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,hn=fo(a.firstChild),Fn=r,Ne=!0,Mo=null,ua=!0,h=Zd(r,null,d,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(El(),d===v){r=ei(a,r,h);break t}xi(a,r,d,h)}r=r.child}return r;case 26:return xu(a,r),a===null?(h=L4(r.type,null,r.pendingProps,null))?r.memoizedState=h:Ne||(h=r.type,a=r.pendingProps,d=t1(ae.current).createElement(h),d[xn]=r,d[ui]=a,Ns(d,h,a),Hn(d),r.stateNode=d):r.memoizedState=L4(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return xr(r),a===null&&Ne&&(d=r.stateNode=P4(r.type,r.pendingProps,ae.current),Fn=r,ua=!0,v=hn,rh(r.type)?($2=v,hn=fo(d.firstChild)):hn=v),xi(a,r,r.pendingProps.children,h),xu(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&Ne&&((v=d=hn)&&(d=JI(d,r.type,r.pendingProps,ua),d!==null?(r.stateNode=d,Fn=r,hn=fo(d.firstChild),ua=!1,v=!0):v=!1),v||Wr(r)),xr(r),v=r.type,T=r.pendingProps,C=a!==null?a.memoizedProps:null,d=T.children,Q2(v,T)?d=null:C!==null&&Q2(v,C)&&(r.flags|=32),r.memoizedState!==null&&(v=em(a,r,Iu,null,null,h),Zg._currentValue=v),xu(a,r),xi(a,r,d,h),r.child;case 6:return a===null&&Ne&&((a=h=hn)&&(h=WI(h,r.pendingProps,ua),h!==null?(r.stateNode=h,Fn=r,hn=null,a=!0):a=!1),a||Wr(r)),null;case 13:return Xy(a,r,h);case 4:return vn(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=ko(r,null,d,h):xi(a,r,d,h),r.child;case 11:return zg(a,r,r.type,r.pendingProps,h);case 7:return xi(a,r,r.pendingProps,h),r.child;case 8:return xi(a,r,r.pendingProps.children,h),r.child;case 12:return xi(a,r,r.pendingProps.children,h),r.child;case 10:return d=r.pendingProps,Po(r,r.type,d.value),xi(a,r,d.children,h),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,Sl(r),v=re(v),d=d(v),r.flags|=1,xi(a,r,d,h),r.child;case 14:return Nu(a,r,r.type,r.pendingProps,h);case 15:return hm(a,r,r.type,r.pendingProps,h);case 19:return Fs(a,r,h);case 31:return dm(a,r,h);case 22:return Du(a,r,h,r.pendingProps);case 24:return Sl(r),d=re(ci),a===null?(v=Qd(),v===null&&(v=oe,T=ng(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=h),v=T),r.memoizedState={parent:d,cache:v},yf(r),Po(r,ci,v)):((a.lanes&h)!==0&&(og(a,r),Fc(r,null,null,h),vf()),v=a.memoizedState,T=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Po(r,ci,d)):(d=T.cache,Po(r,ci,d),d!==v.cache&&Kd(r,[ci],h,!0))),xi(a,r,r.pendingProps.children,h),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function so(a){a.flags|=4}function Cf(a,r,h,d,v){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(Ln())a.flags|=8192;else throw no=Xd,gf}else a.flags&=-16777217}function Hg(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!H4(r))if(Ln())a.flags|=8192;else throw no=Xd,gf}function Bo(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Or():536870912,a.lanes|=r,_n|=r)}function ao(a,r){if(!Ne)switch(a.tailMode){case"hidden":r=a.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function sn(a){var r=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(r)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=h,r}function If(a,r,h){var d=r.pendingProps;switch(Hd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(r),null;case 1:return sn(r),null;case 3:return h=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),to(ci),ke(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Bc(r)?so(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fd())),sn(r),null;case 26:var v=r.type,T=r.memoizedState;return a===null?(so(r),T!==null?(sn(r),Hg(r,T)):(sn(r),Cf(r,v,null,d,h))):T?T!==a.memoizedState?(so(r),sn(r),Hg(r,T)):(sn(r),r.flags&=-16777217):(a=a.memoizedProps,a!==d&&so(r),sn(r),Cf(r,v,a,d,h)),null;case 27:if(To(r),h=ae.current,v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&so(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return sn(r),null}a=zt.current,Bc(r)?sy(r):(a=P4(v,d,h),r.stateNode=a,so(r))}return sn(r),null;case 5:if(To(r),v=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&so(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return sn(r),null}if(T=zt.current,Bc(r))sy(r);else{var C=t1(ae.current);switch(T){case 1:T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":T=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":T=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":T=C.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?C.createElement(v,{is:d.is}):C.createElement(v)}}T[xn]=r,T[ui]=d;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)T.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=T;t:switch(Ns(T,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&so(r)}}return sn(r),Cf(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,h),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&so(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=ae.current,Bc(r)){if(a=r.stateNode,h=r.memoizedProps,d=null,v=Fn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[xn]=r,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||b4(a.nodeValue,h)),a||Wr(r,!0)}else a=t1(a).createTextNode(d),a[xn]=r,r.stateNode=a}return sn(r),null;case 31:if(h=r.memoizedState,a===null||a.memoizedState!==null){if(d=Bc(r),h!==null){if(a===null){if(!d)throw Error(i(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[xn]=r}else El(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sn(r),a=!1}else h=Fd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return r.flags&256?($n(r),r):($n(r),null);if((r.flags&128)!==0)throw Error(i(558))}return sn(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Bc(r),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[xn]=r}else El(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sn(r),v=!1}else v=Fd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?($n(r),r):($n(r),null)}return $n(r),(r.flags&128)!==0?(r.lanes=h,r):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==v&&(d.flags|=2048)),h!==a&&h&&(r.child.flags|=8192),Bo(r,r.updateQueue),sn(r),null);case 4:return ke(),a===null&&q2(r.stateNode.containerInfo),sn(r),null;case 10:return to(r.type),sn(r),null;case 19:if(ut(De),d=r.memoizedState,d===null)return sn(r),null;if(v=(r.flags&128)!==0,T=d.rendering,T===null)if(v)ao(d,!1);else{if(Vn!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(T=ha(a),T!==null){for(r.flags|=128,ao(d,!1),a=T.updateQueue,r.updateQueue=a,Bo(r,a),r.subtreeFlags=0,a=h,h=r.child;h!==null;)Vc(h,a),h=h.sibling;return It(De,De.current&1|2),Ne&&Xr(r,d.treeForkCount),r.child}a=a.sibling}d.tail!==null&&en()>ni&&(r.flags|=128,v=!0,ao(d,!1),r.lanes=4194304)}else{if(!v)if(a=ha(T),a!==null){if(r.flags|=128,v=!0,a=a.updateQueue,r.updateQueue=a,Bo(r,a),ao(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!Ne)return sn(r),null}else 2*en()-d.renderingStartTime>ni&&h!==536870912&&(r.flags|=128,v=!0,ao(d,!1),r.lanes=4194304);d.isBackwards?(T.sibling=r.child,r.child=T):(a=d.last,a!==null?a.sibling=T:r.child=T,d.last=T)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=en(),a.sibling=null,h=De.current,It(De,v?h&1|2:h&1),Ne&&Xr(r,d.treeForkCount),a):(sn(r),null);case 22:case 23:return $n(r),Ef(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(h&536870912)!==0&&(r.flags&128)===0&&(sn(r),r.subtreeFlags&6&&(r.flags|=8192)):sn(r),h=r.updateQueue,h!==null&&Bo(r,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==h&&(r.flags|=2048),a!==null&&ut(bl),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),to(ci),sn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Fa(a,r){switch(Hd(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return to(ci),ke(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return To(r),null;case 31:if(r.memoizedState!==null){if($n(r),r.alternate===null)throw Error(i(340));El()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if($n(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));El()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return ut(De),null;case 4:return ke(),null;case 10:return to(r.type),null;case 22:case 23:return $n(r),Ef(),a!==null&&ut(bl),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return to(ci),null;case 25:return null;default:return null}}function fa(a,r){switch(Hd(r),r.tag){case 3:to(ci),ke();break;case 26:case 27:case 5:To(r);break;case 4:ke();break;case 31:r.memoizedState!==null&&$n(r);break;case 13:$n(r);break;case 19:ut(De);break;case 10:to(r.type);break;case 22:case 23:$n(r),Ef(),a!==null&&ut(bl);break;case 24:to(ci)}}function ja(a,r){try{var h=r.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var v=d.next;h=v;do{if((h.tag&a)===a){d=void 0;var T=h.create,C=h.inst;d=T(),C.destroy=d}h=h.next}while(h!==v)}}catch(O){Ge(r,r.return,O)}}function Ki(a,r,h){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var T=v.next;d=T;do{if((d.tag&a)===a){var C=d.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,v=r;var Y=h,at=O;try{at()}catch(gt){Ge(v,Y,gt)}}}d=d.next}while(d!==T)}}catch(gt){Ge(r,r.return,gt)}}function Er(a){var r=a.updateQueue;if(r!==null){var h=a.stateNode;try{uy(r,h)}catch(d){Ge(a,a.return,d)}}}function Oi(a,r,h){h.props=Il(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){Ge(a,r,d)}}function Go(a,r){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(v){Ge(a,r,v)}}function Yi(a,r){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(v){Ge(a,r,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){Ge(a,r,v)}else h.current=null}function Nf(a){var r=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(v){Ge(a,a.return,v)}}function vi(a,r,h){try{var d=a.stateNode;FI(d,a.type,h,r),d[ui]=r}catch(v){Ge(a,a.return,v)}}function bn(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&rh(a.type)||a.tag===4}function Ce(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||bn(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&rh(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ro(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,r):(r=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,r.appendChild(a),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=fr));else if(d!==4&&(d===27&&rh(a.type)&&(h=a.stateNode,r=null),a=a.child,a!==null))for(ro(a,r,h),a=a.sibling;a!==null;)ro(a,r,h),a=a.sibling}function As(a,r,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?h.insertBefore(a,r):h.appendChild(a);else if(d!==4&&(d===27&&rh(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(As(a,r,h),a=a.sibling;a!==null;)As(a,r,h),a=a.sibling}function vm(a){var r=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Ns(r,d,h),r[xn]=a,r[ui]=h}catch(T){Ge(a,a.return,T)}}var Ka=!1,fn=!1,Tr=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function B2(a,r){if(a=a.containerInfo,K2=o1,a=$_(a),Wp(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var v=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break t}var C=0,O=-1,Y=-1,at=0,gt=0,vt=a,lt=null;e:for(;;){for(var pt;vt!==h||v!==0&&vt.nodeType!==3||(O=C+v),vt!==T||d!==0&&vt.nodeType!==3||(Y=C+d),vt.nodeType===3&&(C+=vt.nodeValue.length),(pt=vt.firstChild)!==null;)lt=vt,vt=pt;for(;;){if(vt===a)break e;if(lt===h&&++at===v&&(O=C),lt===T&&++gt===d&&(Y=C),(pt=vt.nextSibling)!==null)break;vt=lt,lt=vt.parentNode}vt=pt}h=O===-1||Y===-1?null:{start:O,end:Y}}else h=null}h=h||{start:0,end:0}}else h=null;for(Y2={focusedElem:a,selectionRange:h},o1=!1,Mi=r;Mi!==null;)if(r=Mi,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Mi=a;else for(;Mi!==null;){switch(r=Mi,T=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)v=a[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,h=r,v=T.memoizedProps,T=T.memoizedState,d=h.stateNode;try{var Yt=Il(h.type,v);a=d.getSnapshotBeforeUpdate(Yt,T),d.__reactInternalSnapshotBeforeUpdate=a}catch(se){Ge(h,h.return,se)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,h=a.nodeType,h===9)J2(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":J2(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Mi=a;break}Mi=r.return}}function An(a,r,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:Xa(a,h),d&4&&ja(5,h);break;case 1:if(Xa(a,h),d&4)if(a=h.stateNode,r===null)try{a.componentDidMount()}catch(C){Ge(h,h.return,C)}else{var v=Il(h.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(v,r,a.__reactInternalSnapshotBeforeUpdate)}catch(C){Ge(h,h.return,C)}}d&64&&Er(h),d&512&&Go(h,h.return);break;case 3:if(Xa(a,h),d&64&&(a=h.updateQueue,a!==null)){if(r=null,h.child!==null)switch(h.child.tag){case 27:case 5:r=h.child.stateNode;break;case 1:r=h.child.stateNode}try{uy(a,r)}catch(C){Ge(h,h.return,C)}}break;case 27:r===null&&d&4&&vm(h);case 26:case 5:Xa(a,h),r===null&&d&4&&Nf(h),d&512&&Go(h,h.return);break;case 12:Xa(a,h);break;case 31:Xa(a,h),d&4&&Nl(a,h);break;case 13:Xa(a,h),d&4&&Wc(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=p.bind(null,h),ZI(a,h))));break;case 22:if(d=h.memoizedState!==null||Ka,!d){r=r!==null&&r.memoizedState!==null||fn,v=Ka;var T=fn;Ka=d,(fn=r)&&!T?ws(a,h,(h.subtreeFlags&8772)!==0):Xa(a,h),Ka=v,fn=T}break;case 30:break;default:Xa(a,h)}}function Df(a){var r=a.alternate;r!==null&&(a.alternate=null,Df(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&Vr(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var We=null,rs=!1;function Ya(a,r,h){for(h=h.child;h!==null;)Em(a,r,h),h=h.sibling}function Em(a,r,h){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Rt,h)}catch{}switch(h.tag){case 26:fn||Yi(h,r),Ya(a,r,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||Yi(h,r);var d=We,v=rs;rh(h.type)&&(We=h.stateNode,rs=!1),Ya(a,r,h),Xg(h.stateNode),We=d,rs=v;break;case 5:fn||Yi(h,r);case 6:if(d=We,v=rs,We=null,Ya(a,r,h),We=d,rs=v,We!==null)if(rs)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(h.stateNode)}catch(T){Ge(h,r,T)}else try{We.removeChild(h.stateNode)}catch(T){Ge(h,r,T)}break;case 18:We!==null&&(rs?(a=We,N4(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Im(a)):N4(We,h.stateNode));break;case 4:d=We,v=rs,We=h.stateNode.containerInfo,rs=!0,Ya(a,r,h),We=d,rs=v;break;case 0:case 11:case 14:case 15:Ki(2,h,r),fn||Ki(4,h,r),Ya(a,r,h);break;case 1:fn||(Yi(h,r),d=h.stateNode,typeof d.componentWillUnmount=="function"&&Oi(h,r,d)),Ya(a,r,h);break;case 21:Ya(a,r,h);break;case 22:fn=(d=fn)||h.memoizedState!==null,Ya(a,r,h),fn=d;break;default:Ya(a,r,h)}}function Nl(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Im(a)}catch(h){Ge(r,r.return,h)}}}function Wc(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Im(a)}catch(h){Ge(r,r.return,h)}}function qg(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new Wy),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new Wy),r;default:throw Error(i(435,a.tag))}}function Ho(a,r){var h=qg(a);r.forEach(function(d){if(!h.has(d)){h.add(d);var v=y.bind(null,a,d);d.then(v,v)}})}function Ei(a,r){var h=r.deletions;if(h!==null)for(var d=0;d<h.length;d++){var v=h[d],T=a,C=r,O=C;t:for(;O!==null;){switch(O.tag){case 27:if(rh(O.type)){We=O.stateNode,rs=!1;break t}break;case 5:We=O.stateNode,rs=!1;break t;case 3:case 4:We=O.stateNode.containerInfo,rs=!0;break t}O=O.return}if(We===null)throw Error(i(160));Em(T,C,v),We=null,rs=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Dl(r,a),r=r.sibling}var Qa=null;function Dl(a,r){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ei(r,a),Ti(a),d&4&&(Ki(3,a,a.return),ja(3,a),Ki(5,a,a.return));break;case 1:Ei(r,a),Ti(a),d&512&&(fn||h===null||Yi(h,h.return)),d&64&&Ka&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var v=Qa;if(Ei(r,a),Ti(a),d&512&&(fn||h===null||Yi(h,h.return)),d&4){var T=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":T=v.getElementsByTagName("title")[0],(!T||T[Ps]||T[xn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(d),v.head.insertBefore(T,v.querySelector("head > title"))),Ns(T,d,h),T[xn]=a,Hn(T),d=T;break t;case"link":var C=B4("link","href",v).get(d+(h.href||""));if(C){for(var O=0;O<C.length;O++)if(T=C[O],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(O,1);break e}}T=v.createElement(d),Ns(T,d,h),v.head.appendChild(T);break;case"meta":if(C=B4("meta","content",v).get(d+(h.content||""))){for(O=0;O<C.length;O++)if(T=C[O],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(O,1);break e}}T=v.createElement(d),Ns(T,d,h),v.head.appendChild(T);break;default:throw Error(i(468,d))}T[xn]=a,Hn(T),d=T}a.stateNode=d}else G4(v,a.type,a.stateNode);else a.stateNode=z4(v,d,a.memoizedProps);else T!==d?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,d===null?G4(v,a.type,a.stateNode):z4(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&vi(a,a.memoizedProps,h.memoizedProps)}break;case 27:Ei(r,a),Ti(a),d&512&&(fn||h===null||Yi(h,h.return)),h!==null&&d&4&&vi(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Ei(r,a),Ti(a),d&512&&(fn||h===null||Yi(h,h.return)),a.flags&32){v=a.stateNode;try{_s(v,"")}catch(Yt){Ge(a,a.return,Yt)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,vi(a,v,h!==null?h.memoizedProps:v)),d&1024&&(Tr=!0);break;case 6:if(Ei(r,a),Ti(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(Yt){Ge(a,a.return,Yt)}}break;case 3:if(i1=null,v=Qa,Qa=e1(r.containerInfo),Ei(r,a),Qa=v,Ti(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{Im(r.containerInfo)}catch(Yt){Ge(a,a.return,Yt)}Tr&&(Tr=!1,Tm(a));break;case 4:d=Qa,Qa=e1(a.stateNode.containerInfo),Ei(r,a),Ti(a),Qa=d;break;case 12:Ei(r,a),Ti(a);break;case 31:Ei(r,a),Ti(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Ho(a,d)));break;case 13:Ei(r,a),Ti(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Zc=en()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Ho(a,d)));break;case 22:v=a.memoizedState!==null;var Y=h!==null&&h.memoizedState!==null,at=Ka,gt=fn;if(Ka=at||v,fn=gt||Y,Ei(r,a),fn=gt,Ka=at,Ti(a),d&8192)t:for(r=a.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(h===null||Y||Ka||fn||oo(a)),h=null,r=a;;){if(r.tag===5||r.tag===26){if(h===null){Y=h=r;try{if(T=Y.stateNode,v)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=Y.stateNode;var vt=Y.memoizedProps.style,lt=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;O.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(Yt){Ge(Y,Y.return,Yt)}}}else if(r.tag===6){if(h===null){Y=r;try{Y.stateNode.nodeValue=v?"":Y.memoizedProps}catch(Yt){Ge(Y,Y.return,Yt)}}}else if(r.tag===18){if(h===null){Y=r;try{var pt=Y.stateNode;v?D4(pt,!0):D4(Y.stateNode,!1)}catch(Yt){Ge(Y,Y.return,Yt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;h===r&&(h=null),r=r.return}h===r&&(h=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,Ho(a,h))));break;case 19:Ei(r,a),Ti(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Ho(a,d)));break;case 30:break;case 21:break;default:Ei(r,a),Ti(a)}}function Ti(a){var r=a.flags;if(r&2){try{for(var h,d=a.return;d!==null;){if(bn(d)){h=d;break}d=d.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var v=h.stateNode,T=Ce(a);As(a,T,v);break;case 5:var C=h.stateNode;h.flags&32&&(_s(C,""),h.flags&=-33);var O=Ce(a);As(a,O,C);break;case 3:case 4:var Y=h.stateNode.containerInfo,at=Ce(a);ro(a,at,Y);break;default:throw Error(i(161))}}catch(gt){Ge(a,a.return,gt)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Tm(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Tm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function Xa(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)An(a,r.alternate,r),r=r.sibling}function oo(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Ki(4,r,r.return),oo(r);break;case 1:Yi(r,r.return);var h=r.stateNode;typeof h.componentWillUnmount=="function"&&Oi(r,r.return,h),oo(r);break;case 27:Xg(r.stateNode);case 26:case 5:Yi(r,r.return),oo(r);break;case 22:r.memoizedState===null&&oo(r);break;case 30:oo(r);break;default:oo(r)}a=a.sibling}}function ws(a,r,h){for(h=h&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=a,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:ws(v,T,h),ja(4,T);break;case 1:if(ws(v,T,h),d=T,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(at){Ge(d,d.return,at)}if(d=T,v=d.updateQueue,v!==null){var O=d.stateNode;try{var Y=v.shared.hiddenCallbacks;if(Y!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Y.length;v++)jc(Y[v],O)}catch(at){Ge(d,d.return,at)}}h&&C&64&&Er(T),Go(T,T.return);break;case 27:vm(T);case 26:case 5:ws(v,T,h),h&&d===null&&C&4&&Nf(T),Go(T,T.return);break;case 12:ws(v,T,h);break;case 31:ws(v,T,h),h&&C&4&&Nl(v,T);break;case 13:ws(v,T,h),h&&C&4&&Wc(v,T);break;case 22:T.memoizedState===null&&ws(v,T,h),Go(T,T.return);break;case 30:break;default:ws(v,T,h)}r=r.sibling}}function xl(a,r){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&vu(h))}function Mu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&vu(a))}function Qi(a,r,h,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fg(a,r,h,d),r=r.sibling}function Fg(a,r,h,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Qi(a,r,h,d),v&2048&&ja(9,r);break;case 1:Qi(a,r,h,d);break;case 3:Qi(a,r,h,d),v&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&vu(a)));break;case 12:if(v&2048){Qi(a,r,h,d),a=r.stateNode;try{var T=r.memoizedProps,C=T.id,O=T.onPostCommit;typeof O=="function"&&O(C,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Y){Ge(r,r.return,Y)}}else Qi(a,r,h,d);break;case 31:Qi(a,r,h,d);break;case 13:Qi(a,r,h,d);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?Qi(a,r,h,d):lo(a,r):T._visibility&2?Qi(a,r,h,d):(T._visibility|=2,Xi(a,r,h,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&xl(C,r);break;case 24:Qi(a,r,h,d),v&2048&&Mu(r.alternate,r);break;default:Qi(a,r,h,d)}}function Xi(a,r,h,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=a,C=r,O=h,Y=d,at=C.flags;switch(C.tag){case 0:case 11:case 15:Xi(T,C,O,Y,v),ja(8,C);break;case 23:break;case 22:var gt=C.stateNode;C.memoizedState!==null?gt._visibility&2?Xi(T,C,O,Y,v):lo(T,C):(gt._visibility|=2,Xi(T,C,O,Y,v)),v&&at&2048&&xl(C.alternate,C);break;case 24:Xi(T,C,O,Y,v),v&&at&2048&&Mu(C.alternate,C);break;default:Xi(T,C,O,Y,v)}r=r.sibling}}function lo(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var h=a,d=r,v=d.flags;switch(d.tag){case 22:lo(h,d),v&2048&&xl(d.alternate,d);break;case 24:lo(h,d),v&2048&&Mu(d.alternate,d);break;default:lo(h,d)}r=r.sibling}}var Pu=8192;function da(a,r,h){if(a.subtreeFlags&Pu)for(a=a.child;a!==null;)Sm(a,r,h),a=a.sibling}function Sm(a,r,h){switch(a.tag){case 26:da(a,r,h),a.flags&Pu&&a.memoizedState!==null&&c7(h,Qa,a.memoizedState,a.memoizedProps);break;case 5:da(a,r,h);break;case 3:case 4:var d=Qa;Qa=e1(a.stateNode.containerInfo),da(a,r,h),Qa=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Pu,Pu=16777216,da(a,r,h),Pu=d):da(a,r,h));break;default:da(a,r,h)}}function Vu(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function Ol(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Mi=d,jn(d,a)}Vu(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)js(a),a=a.sibling}function js(a){switch(a.tag){case 0:case 11:case 15:Ol(a),a.flags&2048&&Ki(9,a,a.return);break;case 3:Ol(a);break;case 12:Ol(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Rs(a)):Ol(a);break;default:Ol(a)}}function Rs(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var h=0;h<r.length;h++){var d=r[h];Mi=d,jn(d,a)}Vu(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Ki(8,r,r.return),Rs(r);break;case 22:h=r.stateNode,h._visibility&2&&(h._visibility&=-3,Rs(r));break;default:Rs(r)}a=a.sibling}}function jn(a,r){for(;Mi!==null;){var h=Mi;switch(h.tag){case 0:case 11:case 15:Ki(8,h,r);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:vu(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,Mi=d;else t:for(h=a;Mi!==null;){d=Mi;var v=d.sibling,T=d.return;if(Df(d),d===h){Mi=null;break t}if(v!==null){v.return=T,Mi=v;break t}Mi=T}}}var qo={getCacheForType:function(a){var r=re(ci),h=r.data.get(a);return h===void 0&&(h=a(),r.data.set(a,h)),h},cacheSignal:function(){return re(ci).controller.signal}},pe=typeof WeakMap=="function"?WeakMap:Map,Wt=0,oe=null,ve=null,_e=0,Oe=0,os=null,Ja=!1,Sr=!1,jg=!1,ma=0,Vn=0,uo=0,Ml=0,xf=0,Cs=0,_n=0,ku=null,Kn=null,Yn=!1,Zc=0,Kg=0,ni=1/0,kn=null,ii=null,Ze=0,pa=null,$c=null,Wa=0,th=0,eh=null,Of=null,Pl=0,Lu=null;function ga(){return(Wt&2)!==0&&_e!==0?_e&-_e:Z.T!==null?ht():pc()}function Ae(){if(Cs===0)if((_e&536870912)===0||Ne){var a=ar;ar<<=1,(ar&3932160)===0&&(ar=262144),Cs=a}else Cs=536870912;return a=Gs.current,a!==null&&(a.flags|=32),Cs}function Ee(a,r,h){(a===oe&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)&&(kl(a,0),fi(a,_e,Cs,!1)),nl(a,h),((Wt&2)===0||a!==oe)&&(a===oe&&((Wt&2)===0&&(Ml|=h),Vn===4&&fi(a,_e,Cs,!1)),Ct(a))}function we(a,r,h){if((Wt&6)!==0)throw Error(i(327));var d=!h&&(r&127)===0&&(r&a.expiredLanes)===0||Ra(a,r),v=d?Mf(a,r):Is(a,r,!0),T=d;do{if(v===0){Sr&&!d&&fi(a,r,0,!1);break}else{if(h=a.current.alternate,T&&!$e(h)){v=Is(a,r,!1),T=!1;continue}if(v===2){if(T=r,a.errorRecoveryDisabledLanes&T)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var O=a;v=ku;var Y=O.current.memoizedState.isDehydrated;if(Y&&(kl(O,C).flags|=256),C=Is(O,C,!1),C!==2){if(jg&&!Y){O.errorRecoveryDisabledLanes|=T,Ml|=T,v=4;break t}T=Kn,Kn=v,T!==null&&(Kn===null?Kn=T:Kn.push.apply(Kn,T))}v=C}if(T=!1,v!==2)continue}}if(v===1){kl(a,0),fi(a,r,0,!0);break}t:{switch(d=a,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:fi(d,r,Cs,!Ja);break t;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Zc+300-en(),10<v)){if(fi(d,r,Cs,!Ja),na(d,0,!0)!==0)break t;Wa=r,d.timeoutHandle=C4(Ie.bind(null,d,h,Kn,kn,Yn,r,Cs,Ml,_n,Ja,T,"Throttled",-0,0),v);break t}Ie(d,h,Kn,kn,Yn,r,Cs,Ml,_n,Ja,T,null,-0,0)}}break}while(!0);Ct(a)}function Ie(a,r,h,d,v,T,C,O,Y,at,gt,vt,lt,pt){if(a.timeoutHandle=-1,vt=r.subtreeFlags,vt&8192||(vt&16785408)===16785408){vt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fr},Sm(r,T,vt);var Yt=(T&62914560)===T?Zc-en():(T&4194048)===T?Kg-en():0;if(Yt=h7(vt,Yt),Yt!==null){Wa=T,a.cancelPendingCommit=Yt(jo.bind(null,a,r,T,h,d,v,C,O,Y,gt,vt,null,lt,pt)),fi(a,T,C,!at);return}}jo(a,r,T,h,d,v,C,O,Y)}function $e(a){for(var r=a;;){var h=r.tag;if((h===0||h===11||h===15)&&r.flags&16384&&(h=r.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var v=h[d],T=v.getSnapshot;v=v.value;try{if(!Es(T(),v))return!1}catch{return!1}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function fi(a,r,h,d){r&=~xf,r&=~Ml,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var v=r;0<v;){var T=31-ue(v),C=1<<T;d[T]=-1,v&=~C}h!==0&&lr(a,h,r)}function br(){return(Wt&6)===0?(Ht(0),!1):!0}function Vl(){if(ve!==null){if(Oe===0)var a=ve.return;else a=ve,$r=Tl=null,pg(a),Au=null,wu=0,a=ve;for(;a!==null;)fa(a.alternate,a),a=a.return;ve=null}}function kl(a,r){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,YI(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Wa=0,Vl(),oe=a,ve=h=Us(a.current,null),_e=r,Oe=0,os=null,Ja=!1,Sr=Ra(a,r),jg=!1,_n=Cs=xf=Ml=uo=Vn=0,Kn=ku=null,Yn=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var v=31-ue(d),T=1<<v;r|=a[v],d&=~T}return ma=r,ff(),h}function co(a,r){me=null,Z.H=Xc,r===Eu||r===ye?(r=Su(),Oe=3):r===gf?(r=Su(),Oe=4):Oe=r===cm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,os=r,ve===null&&(Vn=1,um(a,la(r,a.current)))}function Ln(){var a=Gs.current;return a===null?!0:(_e&4194048)===_e?bs===null:(_e&62914560)===_e||(_e&536870912)!==0?a===bs:!1}function Fo(){var a=Z.H;return Z.H=Xc,a===null?Xc:a}function Ll(){var a=Z.A;return Z.A=qo,a}function nh(){Vn=4,Ja||(_e&4194048)!==_e&&Gs.current!==null||(Sr=!0),(uo&134217727)===0&&(Ml&134217727)===0||oe===null||fi(oe,_e,Cs,!1)}function Is(a,r,h){var d=Wt;Wt|=2;var v=Fo(),T=Ll();(oe!==a||_e!==r)&&(kn=null,kl(a,r)),r=!1;var C=Vn;t:do try{if(Oe!==0&&ve!==null){var O=ve,Y=os;switch(Oe){case 8:Vl(),C=6;break t;case 3:case 2:case 9:case 6:Gs.current===null&&(r=!0);var at=Oe;if(Oe=0,os=null,Uu(a,O,Y,at),h&&Sr){C=0;break t}break;default:at=Oe,Oe=0,os=null,Uu(a,O,Y,at)}}ih(),C=Vn;break}catch(gt){co(a,gt)}while(!0);return r&&a.shellSuspendCounter++,$r=Tl=null,Wt=d,Z.H=v,Z.A=T,ve===null&&(oe=null,_e=0,ff()),C}function ih(){for(;ve!==null;)bm(ve)}function Mf(a,r){var h=Wt;Wt|=2;var d=Fo(),v=Ll();oe!==a||_e!==r?(kn=null,ni=en()+500,kl(a,r)):Sr=Ra(a,r);t:do try{if(Oe!==0&&ve!==null){r=ve;var T=os;e:switch(Oe){case 1:Oe=0,os=null,Uu(a,r,T,1);break;case 2:case 9:if(Bs(T)){Oe=0,os=null,Pf(r);break}r=function(){Oe!==2&&Oe!==9||oe!==a||(Oe=7),Ct(a)},T.then(r,r);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:Bs(T)?(Oe=0,os=null,Pf(r)):(Oe=0,os=null,Uu(a,r,T,7));break;case 5:var C=null;switch(ve.tag){case 26:C=ve.memoizedState;case 5:case 27:var O=ve;if(C?H4(C):O.stateNode.complete){Oe=0,os=null;var Y=O.sibling;if(Y!==null)ve=Y;else{var at=O.return;at!==null?(ve=at,Ul(at)):ve=null}break e}}Oe=0,os=null,Uu(a,r,T,5);break;case 6:Oe=0,os=null,Uu(a,r,T,6);break;case 8:Vl(),Vn=6;break t;default:throw Error(i(462))}}Ks();break}catch(gt){co(a,gt)}while(!0);return $r=Tl=null,Z.H=d,Z.A=v,Wt=h,ve!==null?0:(oe=null,_e=0,ff(),Vn)}function Ks(){for(;ve!==null&&!sr();)bm(ve)}function bm(a){var r=ym(a.alternate,a,ma);a.memoizedProps=a.pendingProps,r===null?Ul(a):ve=r}function Pf(a){var r=a,h=r.alternate;switch(r.tag){case 15:case 0:r=wf(h,r,r.pendingProps,r.type,void 0,_e);break;case 11:r=wf(h,r,r.pendingProps,r.type.render,r.ref,_e);break;case 5:pg(r);default:fa(h,r),r=ve=Vc(r,ma),r=ym(h,r,ma)}a.memoizedProps=a.pendingProps,r===null?Ul(a):ve=r}function Uu(a,r,h,d){$r=Tl=null,pg(r),Au=null,wu=0;var v=r.return;try{if(yi(a,v,r,h,_e)){Vn=1,um(a,la(h,a.current)),ve=null;return}}catch(T){if(v!==null)throw ve=v,T;Vn=1,um(a,la(h,a.current)),ve=null;return}r.flags&32768?(Ne||d===1?a=!0:Sr||(_e&536870912)!==0?a=!1:(Ja=a=!0,(d===2||d===9||d===3||d===6)&&(d=Gs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Vf(r,a)):Ul(r)}function Ul(a){var r=a;do{if((r.flags&32768)!==0){Vf(r,Ja);return}a=r.return;var h=If(r.alternate,r,ma);if(h!==null){ve=h;return}if(r=r.sibling,r!==null){ve=r;return}ve=r=a}while(r!==null);Vn===0&&(Vn=5)}function Vf(a,r){do{var h=Fa(a.alternate,a);if(h!==null){h.flags&=32767,ve=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!r&&(a=a.sibling,a!==null)){ve=a;return}ve=a=h}while(a!==null);Vn=6,ve=null}function jo(a,r,h,d,v,T,C,O,Y){a.cancelPendingCommit=null;do sh();while(Ze!==0);if((Wt&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=Ni,dc(a,h,T,C,O,Y),a===oe&&(ve=oe=null,_e=0),$c=r,pa=a,Wa=h,th=T,eh=v,Of=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,S(ns,function(){return Am(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null,v=Tt.p,Tt.p=2,C=Wt,Wt|=4;try{B2(a,r,h)}finally{Wt=C,Tt.p=v,Z.T=d}}Ze=1,di(),Ko(),zu()}}function di(){if(Ze===1){Ze=0;var a=pa,r=$c,h=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||h){h=Z.T,Z.T=null;var d=Tt.p;Tt.p=2;var v=Wt;Wt|=4;try{Dl(r,a);var T=Y2,C=$_(a.containerInfo),O=T.focusedElem,Y=T.selectionRange;if(C!==O&&O&&O.ownerDocument&&cn(O.ownerDocument.documentElement,O)){if(Y!==null&&Wp(O)){var at=Y.start,gt=Y.end;if(gt===void 0&&(gt=at),"selectionStart"in O)O.selectionStart=at,O.selectionEnd=Math.min(gt,O.value.length);else{var vt=O.ownerDocument||document,lt=vt&&vt.defaultView||window;if(lt.getSelection){var pt=lt.getSelection(),Yt=O.textContent.length,se=Math.min(Y.start,Yt),mn=Y.end===void 0?se:Math.min(Y.end,Yt);!pt.extend&&se>mn&&(C=mn,mn=se,se=C);var tt=Oc(O,se),J=Oc(O,mn);if(tt&&J&&(pt.rangeCount!==1||pt.anchorNode!==tt.node||pt.anchorOffset!==tt.offset||pt.focusNode!==J.node||pt.focusOffset!==J.offset)){var st=vt.createRange();st.setStart(tt.node,tt.offset),pt.removeAllRanges(),se>mn?(pt.addRange(st),pt.extend(J.node,J.offset)):(st.setEnd(J.node,J.offset),pt.addRange(st))}}}}for(vt=[],pt=O;pt=pt.parentNode;)pt.nodeType===1&&vt.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<vt.length;O++){var _t=vt[O];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}o1=!!K2,Y2=K2=null}finally{Wt=v,Tt.p=d,Z.T=h}}a.current=r,Ze=2}}function Ko(){if(Ze===2){Ze=0;var a=pa,r=$c,h=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||h){h=Z.T,Z.T=null;var d=Tt.p;Tt.p=2;var v=Wt;Wt|=4;try{An(a,r.alternate,r)}finally{Wt=v,Tt.p=d,Z.T=h}}Ze=3}}function zu(){if(Ze===4||Ze===3){Ze=0,Gn();var a=pa,r=$c,h=Wa,d=Of;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ze=5:(Ze=0,$c=pa=null,ho(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(ii=null),Ca(h),r=r.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Rt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=Z.T,v=Tt.p,Tt.p=2,Z.T=null;try{for(var T=a.onRecoverableError,C=0;C<d.length;C++){var O=d[C];T(O.value,{componentStack:O.stack})}}finally{Z.T=r,Tt.p=v}}(Wa&3)!==0&&sh(),Ct(a),v=a.pendingLanes,(h&261930)!==0&&(v&42)!==0?a===Lu?Pl++:(Pl=0,Lu=a):Pl=0,Ht(0)}}function ho(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,vu(r)))}function sh(){return di(),Ko(),zu(),Am()}function Am(){if(Ze!==5)return!1;var a=pa,r=th;th=0;var h=Ca(Wa),d=Z.T,v=Tt.p;try{Tt.p=32>h?32:h,Z.T=null,h=eh,eh=null;var T=pa,C=Wa;if(Ze=0,$c=pa=null,Wa=0,(Wt&6)!==0)throw Error(i(331));var O=Wt;if(Wt|=4,js(T.current),Fg(T,T.current,C,h),Wt=O,Ht(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Rt,T)}catch{}return!0}finally{Tt.p=v,Z.T=d,ho(a,r)}}function Yg(a,r,h){r=la(h,r),r=Lg(a.stateNode,r,2),a=Al(a,r,2),a!==null&&(nl(a,2),Ct(a))}function Ge(a,r,h){if(a.tag===3)Yg(a,a,h);else for(;r!==null;){if(r.tag===3){Yg(r,a,h);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ii===null||!ii.has(d))){a=la(h,a),h=Ug(2),d=Al(r,h,2),d!==null&&(Ky(h,d,r,a),nl(d,2),Ct(d));break}}r=r.return}}function kf(a,r,h){var d=a.pingCache;if(d===null){d=a.pingCache=new pe;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(h)||(jg=!0,v.add(h),a=l.bind(null,a,r,h),r.then(a,a))}function l(a,r,h){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,oe===a&&(_e&h)===h&&(Vn===4||Vn===3&&(_e&62914560)===_e&&300>en()-Zc?(Wt&2)===0&&kl(a,0):xf|=h,_n===_e&&(_n=0)),Ct(a)}function u(a,r){r===0&&(r=Or()),a=Ts(a,r),a!==null&&(nl(a,r),Ct(a))}function p(a){var r=a.memoizedState,h=0;r!==null&&(h=r.retryLane),u(a,h)}function y(a,r){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),u(a,h)}function S(a,r){return rn(a,r)}var w=null,x=null,Q=!1,dt=!1,bt=!1,Pt=0;function Ct(a){a!==x&&a.next===null&&(x===null?w=x=a:x=x.next=a),dt=!0,Q||(Q=!0,nt())}function Ht(a,r){if(!bt&&dt){bt=!0;do for(var h=!1,d=w;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var T=0;else{var C=d.suspendedLanes,O=d.pingedLanes;T=(1<<31-ue(42|a)+1)-1,T&=v&~(C&~O),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,ot(d,T))}else T=_e,T=na(d,d===oe?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||Ra(d,T)||(h=!0,ot(d,T));d=d.next}while(h);bt=!1}}function de(){Pi()}function Pi(){dt=Q=!1;var a=0;Pt!==0&&KI()&&(a=Pt);for(var r=en(),h=null,d=w;d!==null;){var v=d.next,T=ah(d,r);T===0?(d.next=null,h===null?w=v:h.next=v,v===null&&(x=h)):(h=d,(a!==0||(T&3)!==0)&&(dt=!0)),d=v}Ze!==0&&Ze!==5||Ht(a),Pt!==0&&(Pt=0)}function ah(a,r){for(var h=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var C=31-ue(T),O=1<<C,Y=v[C];Y===-1?((O&h)===0||(O&d)!==0)&&(v[C]=Md(O,r)):Y<=r&&(a.expiredLanes|=O),T&=~O}if(r=oe,h=_e,h=na(a,a===r?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===r&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&ea(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Ra(a,h)){if(r=h&-h,r===a.callbackPriority)return r;switch(d!==null&&ea(d),Ca(h)){case 2:case 8:h=es;break;case 32:h=ns;break;case 268435456:h=ps;break;default:h=ns}return d=zl.bind(null,a),h=rn(h,d),a.callbackPriority=r,a.callbackNode=h,r}return d!==null&&d!==null&&ea(d),a.callbackPriority=2,a.callbackNode=null,2}function zl(a,r){if(Ze!==0&&Ze!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(sh()&&a.callbackNode!==h)return null;var d=_e;return d=na(a,a===oe?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(we(a,d,r),ah(a,en()),a.callbackNode!=null&&a.callbackNode===h?zl.bind(null,a):null)}function ot(a,r){if(sh())return null;we(a,r,!0)}function nt(){QI(function(){(Wt&6)!==0?rn(ms,de):Pi()})}function ht(){if(Pt===0){var a=Vo;a===0&&(a=li,li<<=1,(li&261888)===0&&(li=256)),Pt=a}return Pt}function xt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:uu(""+a)}function ne(a,r){var h=r.ownerDocument.createElement("input");return h.name=r.name,h.value=r.value,a.id&&h.setAttribute("form",a.id),r.parentNode.insertBefore(h,r),a=new FormData(a),h.parentNode.removeChild(h),a}function Un(a,r,h,d,v){if(r==="submit"&&h&&h.stateNode===v){var T=xt((v[ui]||null).action),C=d.submitter;C&&(r=(r=C[ui]||null)?xt(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var O=new pr("action","action",null,d,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Pt!==0){var Y=C?ne(v,C):new FormData(v);Ng(h,{pending:!0,data:Y,method:v.method,action:T},null,Y)}}else typeof T=="function"&&(O.preventDefault(),Y=C?ne(v,C):new FormData(v),Ng(h,{pending:!0,data:Y,method:v.method,action:T},T,Y))},currentTarget:v}]})}}for(var ie=0;ie<cf.length;ie++){var Le=cf[ie],Vi=Le.toLowerCase(),He=Le[0].toUpperCase()+Le.slice(1);La(Vi,"on"+He)}La(Ld,"onAnimationEnd"),La(uf,"onAnimationIteration"),La($p,"onAnimationStart"),La("dblclick","onDoubleClick"),La("focusin","onFocus"),La("focusout","onBlur"),La(ey,"onTransitionRun"),La(O2,"onTransitionStart"),La(ny,"onTransitionCancel"),La(tg,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Za));function v4(a,r){r=(r&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],v=d.event;d=d.listeners;t:{var T=void 0;if(r)for(var C=d.length-1;0<=C;C--){var O=d[C],Y=O.instance,at=O.currentTarget;if(O=O.listener,Y!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(gt){hf(gt)}v.currentTarget=null,T=Y}else for(C=0;C<d.length;C++){if(O=d[C],Y=O.instance,at=O.currentTarget,O=O.listener,Y!==T&&v.isPropagationStopped())break t;T=O,v.currentTarget=at;try{T(v)}catch(gt){hf(gt)}v.currentTarget=null,T=Y}}}}function Me(a,r){var h=r[ia];h===void 0&&(h=r[ia]=new Set);var d=a+"__bubble";h.has(d)||(E4(r,a,2,!1),h.add(d))}function H2(a,r,h){var d=0;r&&(d|=4),E4(h,a,d,r)}var Zy="_reactListening"+Math.random().toString(36).slice(2);function q2(a){if(!a[Zy]){a[Zy]=!0,xa.forEach(function(h){h!=="selectionchange"&&(G2.has(h)||H2(h,!1,a),H2(h,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[Zy]||(r[Zy]=!0,H2("selectionchange",!1,r))}}function E4(a,r,h,d){switch(X4(r)){case 2:var v=m7;break;case 8:v=p7;break;default:v=sE}h=v.bind(null,r,h,a),v=void 0,!hu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(r,h,{capture:!0,passive:v}):a.addEventListener(r,h,!0):v!==void 0?a.addEventListener(r,h,{passive:v}):a.addEventListener(r,h,!1)}function F2(a,r,h,d,v){var T=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var O=d.stateNode.containerInfo;if(O===v)break;if(C===4)for(C=d.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;O!==null;){if(C=ur(O),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){d=T=C;continue t}O=O.parentNode}}d=d.return}Ro(function(){var at=T,gt=ra(h),vt=[];t:{var lt=ka.get(a);if(lt!==void 0){var pt=pr,Yt=a;switch(a){case"keypress":if(ul(h)===0)break t;case"keydown":case"keyup":pt=qr;break;case"focusin":Yt="focus",pt=fl;break;case"focusout":Yt="blur",pt=fl;break;case"beforeblur":case"afterblur":pt=fl;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=R;break;case Ld:case uf:case $p:pt=Pd;break;case tg:pt=P;break;case"scroll":case"scrollend":pt=Ac;break;case"wheel":pt=ct;break;case"copy":case"cut":case"paste":pt=ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Fr;break;case"toggle":case"beforetoggle":pt=fe}var se=(r&4)!==0,mn=!se&&(a==="scroll"||a==="scrollend"),tt=se?lt!==null?lt+"Capture":null:lt;se=[];for(var J=at,st;J!==null;){var _t=J;if(st=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||st===null||tt===null||(_t=Ma(J,tt),_t!=null&&se.push(Qg(J,_t,st))),mn)break;J=J.return}0<se.length&&(lt=new pt(lt,Yt,null,h,gt),vt.push({event:lt,listeners:se}))}}if((r&7)===0){t:{if(lt=a==="mouseover"||a==="pointerover",pt=a==="mouseout"||a==="pointerout",lt&&h!==Sc&&(Yt=h.relatedTarget||h.fromElement)&&(ur(Yt)||Yt[Na]))break t;if((pt||lt)&&(lt=gt.window===gt?gt:(lt=gt.ownerDocument)?lt.defaultView||lt.parentWindow:window,pt?(Yt=h.relatedTarget||h.toElement,pt=at,Yt=Yt?ur(Yt):null,Yt!==null&&(mn=o(Yt),se=Yt.tag,Yt!==mn||se!==5&&se!==27&&se!==6)&&(Yt=null)):(pt=null,Yt=at),pt!==Yt)){if(se=wc,_t="onMouseLeave",tt="onMouseEnter",J="mouse",(a==="pointerout"||a==="pointerover")&&(se=Fr,_t="onPointerLeave",tt="onPointerEnter",J="pointer"),mn=pt==null?lt:Vs(pt),st=Yt==null?lt:Vs(Yt),lt=new se(_t,J+"leave",pt,h,gt),lt.target=mn,lt.relatedTarget=st,_t=null,ur(gt)===at&&(se=new se(tt,J+"enter",Yt,h,gt),se.target=st,se.relatedTarget=mn,_t=se),mn=_t,pt&&Yt)e:{for(se=GI,tt=pt,J=Yt,st=0,_t=tt;_t;_t=se(_t))st++;_t=0;for(var te=J;te;te=se(te))_t++;for(;0<st-_t;)tt=se(tt),st--;for(;0<_t-st;)J=se(J),_t--;for(;st--;){if(tt===J||J!==null&&tt===J.alternate){se=tt;break e}tt=se(tt),J=se(J)}se=null}else se=null;pt!==null&&T4(vt,lt,pt,se,!1),Yt!==null&&mn!==null&&T4(vt,mn,Yt,se,!0)}}t:{if(lt=at?Vs(at):window,pt=lt.nodeName&&lt.nodeName.toLowerCase(),pt==="select"||pt==="input"&&lt.type==="file")var Ye=Kp;else if(jp(lt))if(jr)Ye=Z_;else{Ye=Xp;var Jt=J_}else pt=lt.nodeName,!pt||pt.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?at&&lu(at.elementType)&&(Ye=Kp):Ye=W_;if(Ye&&(Ye=Ye(a,at))){Vd(vt,Ye,h,gt);break t}Jt&&Jt(a,lt,at),a==="focusout"&&at&&lt.type==="number"&&at.memoizedProps.value!=null&&aa(lt,"number",lt.value)}switch(Jt=at?Vs(at):window,a){case"focusin":(jp(Jt)||Jt.contentEditable==="true")&&(Kr=Jt,Yr=at,Mc=null);break;case"focusout":Mc=Yr=Kr=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Pc(vt,h,gt);break;case"selectionchange":if(ty)break;case"keydown":case"keyup":Pc(vt,h,gt)}var Se;if(xe)t:{switch(a){case"compositionstart":var Ue="onCompositionStart";break t;case"compositionend":Ue="onCompositionEnd";break t;case"compositionupdate":Ue="onCompositionUpdate";break t}Ue=void 0}else gu?No(a,h)&&(Ue="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Ue="onCompositionStart");Ue&&(_r&&h.locale!=="ko"&&(gu||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&gu&&(Se=ll()):(ys=gt,bc="value"in ys?ys.value:ys.textContent,gu=!0)),Jt=$y(at,Ue),0<Jt.length&&(Ue=new Pa(Ue,a,null,h,gt),vt.push({event:Ue,listeners:Jt}),Se?Ue.data=Se:(Se=pu(h),Se!==null&&(Ue.data=Se)))),(Se=vs?Q_(a,h):qp(a,h))&&(Ue=$y(at,"onBeforeInput"),0<Ue.length&&(Jt=new Pa("onBeforeInput","beforeinput",null,h,gt),vt.push({event:Jt,listeners:Ue}),Jt.data=Se)),Un(vt,a,at,h,gt)}v4(vt,r)})}function Qg(a,r,h){return{instance:a,listener:r,currentTarget:h}}function $y(a,r){for(var h=r+"Capture",d=[];a!==null;){var v=a,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=Ma(a,h),v!=null&&d.unshift(Qg(a,v,T)),v=Ma(a,r),v!=null&&d.push(Qg(a,v,T))),a.tag===3)return d;a=a.return}return[]}function GI(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function T4(a,r,h,d,v){for(var T=r._reactName,C=[];h!==null&&h!==d;){var O=h,Y=O.alternate,at=O.stateNode;if(O=O.tag,Y!==null&&Y===d)break;O!==5&&O!==26&&O!==27||at===null||(Y=at,v?(at=Ma(h,T),at!=null&&C.unshift(Qg(h,at,Y))):v||(at=Ma(h,T),at!=null&&C.push(Qg(h,at,Y)))),h=h.return}C.length!==0&&a.push({event:r,listeners:C})}var HI=/\r\n?/g,qI=/\u0000|\uFFFD/g;function S4(a){return(typeof a=="string"?a:""+a).replace(HI,`
`).replace(qI,"")}function b4(a,r){return r=S4(r),S4(a)===r}function dn(a,r,h,d,v,T){switch(h){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||_s(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&_s(a,""+d);break;case"className":ks(a,"class",d);break;case"tabIndex":ks(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(a,h,d);break;case"style":Tc(a,d,T);break;case"data":if(r!=="object"){ks(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=uu(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(r!=="input"&&dn(a,r,"name",v.name,v,null),dn(a,r,"formEncType",v.formEncType,v,null),dn(a,r,"formMethod",v.formMethod,v,null),dn(a,r,"formTarget",v.formTarget,v,null)):(dn(a,r,"encType",v.encType,v,null),dn(a,r,"method",v.method,v,null),dn(a,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=uu(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=fr);break;case"onScroll":d!=null&&Me("scroll",a);break;case"onScrollEnd":d!=null&&Me("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=uu(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":Me("beforetoggle",a),Me("toggle",a),rl(a,"popover",d);break;case"xlinkActuate":Wn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Wn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Wn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Wn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Wn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Wn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Wn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Wn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Wn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":rl(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=$h.get(h)||h,rl(a,h,d))}}function j2(a,r,h,d,v,T){switch(h){case"style":Tc(a,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(h=d.__html,h!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof d=="string"?_s(a,d):(typeof d=="number"||typeof d=="bigint")&&_s(a,""+d);break;case"onScroll":d!=null&&Me("scroll",a);break;case"onScrollEnd":d!=null&&Me("scrollend",a);break;case"onClick":d!=null&&(a.onclick=fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ru.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),r=h.slice(2,v?h.length-7:void 0),T=a[ui]||null,T=T!=null?T[h]:null,typeof T=="function"&&a.removeEventListener(r,T,v),typeof d=="function")){typeof T!="function"&&T!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(r,d,v);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):rl(a,h,d)}}}function Ns(a,r,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",a),Me("load",a);var d=!1,v=!1,T;for(T in h)if(h.hasOwnProperty(T)){var C=h[T];if(C!=null)switch(T){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,T,C,h,null)}}v&&dn(a,r,"srcSet",h.srcSet,h,null),d&&dn(a,r,"src",h.src,h,null);return;case"input":Me("invalid",a);var O=T=C=v=null,Y=null,at=null;for(d in h)if(h.hasOwnProperty(d)){var gt=h[d];if(gt!=null)switch(d){case"name":v=gt;break;case"type":C=gt;break;case"checked":Y=gt;break;case"defaultChecked":at=gt;break;case"value":T=gt;break;case"defaultValue":O=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,r));break;default:dn(a,r,d,gt,h,null)}}yc(a,T,O,Y,at,C,v,!1);return;case"select":Me("invalid",a),d=C=T=null;for(v in h)if(h.hasOwnProperty(v)&&(O=h[v],O!=null))switch(v){case"value":T=O;break;case"defaultValue":C=O;break;case"multiple":d=O;default:dn(a,r,v,O,h,null)}r=T,h=C,a.multiple=!!d,r!=null?hr(a,!!d,r,!1):h!=null&&hr(a,!!d,h,!0);return;case"textarea":Me("invalid",a),T=v=d=null;for(C in h)if(h.hasOwnProperty(C)&&(O=h[C],O!=null))switch(C){case"value":d=O;break;case"defaultValue":v=O;break;case"children":T=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:dn(a,r,C,O,h,null)}Ur(a,d,v,T);return;case"option":for(Y in h)h.hasOwnProperty(Y)&&(d=h[Y],d!=null)&&(Y==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":dn(a,r,Y,d,h,null));return;case"dialog":Me("beforetoggle",a),Me("toggle",a),Me("cancel",a),Me("close",a);break;case"iframe":case"object":Me("load",a);break;case"video":case"audio":for(d=0;d<Za.length;d++)Me(Za[d],a);break;case"image":Me("error",a),Me("load",a);break;case"details":Me("toggle",a);break;case"embed":case"source":case"link":Me("error",a),Me("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in h)if(h.hasOwnProperty(at)&&(d=h[at],d!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dn(a,r,at,d,h,null)}return;default:if(lu(r)){for(gt in h)h.hasOwnProperty(gt)&&(d=h[gt],d!==void 0&&j2(a,r,gt,d,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(d=h[O],d!=null&&dn(a,r,O,d,h,null))}function FI(a,r,h,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,C=null,O=null,Y=null,at=null,gt=null;for(pt in h){var vt=h[pt];if(h.hasOwnProperty(pt)&&vt!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":Y=vt;default:d.hasOwnProperty(pt)||dn(a,r,pt,null,d,vt)}}for(var lt in d){var pt=d[lt];if(vt=h[lt],d.hasOwnProperty(lt)&&(pt!=null||vt!=null))switch(lt){case"type":T=pt;break;case"name":v=pt;break;case"checked":at=pt;break;case"defaultChecked":gt=pt;break;case"value":C=pt;break;case"defaultValue":O=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,r));break;default:pt!==vt&&dn(a,r,lt,pt,d,vt)}}Ao(a,C,O,Y,at,gt,T,v);return;case"select":pt=C=O=lt=null;for(T in h)if(Y=h[T],h.hasOwnProperty(T)&&Y!=null)switch(T){case"value":break;case"multiple":pt=Y;default:d.hasOwnProperty(T)||dn(a,r,T,null,d,Y)}for(v in d)if(T=d[v],Y=h[v],d.hasOwnProperty(v)&&(T!=null||Y!=null))switch(v){case"value":lt=T;break;case"defaultValue":O=T;break;case"multiple":C=T;default:T!==Y&&dn(a,r,v,T,d,Y)}r=O,h=C,d=pt,lt!=null?hr(a,!!h,lt,!1):!!d!=!!h&&(r!=null?hr(a,!!h,r,!0):hr(a,!!h,h?[]:"",!1));return;case"textarea":pt=lt=null;for(O in h)if(v=h[O],h.hasOwnProperty(O)&&v!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:dn(a,r,O,null,d,v)}for(C in d)if(v=d[C],T=h[C],d.hasOwnProperty(C)&&(v!=null||T!=null))switch(C){case"value":lt=v;break;case"defaultValue":pt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&dn(a,r,C,v,d,T)}vc(a,lt,pt);return;case"option":for(var Yt in h)lt=h[Yt],h.hasOwnProperty(Yt)&&lt!=null&&!d.hasOwnProperty(Yt)&&(Yt==="selected"?a.selected=!1:dn(a,r,Yt,null,d,lt));for(Y in d)lt=d[Y],pt=h[Y],d.hasOwnProperty(Y)&&lt!==pt&&(lt!=null||pt!=null)&&(Y==="selected"?a.selected=lt&&typeof lt!="function"&&typeof lt!="symbol":dn(a,r,Y,lt,d,pt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in h)lt=h[se],h.hasOwnProperty(se)&&lt!=null&&!d.hasOwnProperty(se)&&dn(a,r,se,null,d,lt);for(at in d)if(lt=d[at],pt=h[at],d.hasOwnProperty(at)&&lt!==pt&&(lt!=null||pt!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,r));break;default:dn(a,r,at,lt,d,pt)}return;default:if(lu(r)){for(var mn in h)lt=h[mn],h.hasOwnProperty(mn)&&lt!==void 0&&!d.hasOwnProperty(mn)&&j2(a,r,mn,void 0,d,lt);for(gt in d)lt=d[gt],pt=h[gt],!d.hasOwnProperty(gt)||lt===pt||lt===void 0&&pt===void 0||j2(a,r,gt,lt,d,pt);return}}for(var tt in h)lt=h[tt],h.hasOwnProperty(tt)&&lt!=null&&!d.hasOwnProperty(tt)&&dn(a,r,tt,null,d,lt);for(vt in d)lt=d[vt],pt=h[vt],!d.hasOwnProperty(vt)||lt===pt||lt==null&&pt==null||dn(a,r,vt,lt,d,pt)}function A4(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jI(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var v=h[d],T=v.transferSize,C=v.initiatorType,O=v.duration;if(T&&O&&A4(C)){for(C=0,O=v.responseEnd,d+=1;d<h.length;d++){var Y=h[d],at=Y.startTime;if(at>O)break;var gt=Y.transferSize,vt=Y.initiatorType;gt&&A4(vt)&&(Y=Y.responseEnd,C+=gt*(Y<O?1:(O-at)/(Y-at)))}if(--d,r+=8*(T+C)/(v.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var K2=null,Y2=null;function t1(a){return a.nodeType===9?a:a.ownerDocument}function w4(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R4(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function Q2(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var X2=null;function KI(){var a=window.event;return a&&a.type==="popstate"?a===X2?!1:(X2=a,!0):(X2=null,!1)}var C4=typeof setTimeout=="function"?setTimeout:void 0,YI=typeof clearTimeout=="function"?clearTimeout:void 0,I4=typeof Promise=="function"?Promise:void 0,QI=typeof queueMicrotask=="function"?queueMicrotask:typeof I4<"u"?function(a){return I4.resolve(null).then(a).catch(XI)}:C4;function XI(a){setTimeout(function(){throw a})}function rh(a){return a==="head"}function N4(a,r){var h=r,d=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(v),Im(r);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")Xg(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,Xg(h);for(var T=h.firstChild;T;){var C=T.nextSibling,O=T.nodeName;T[Ps]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=C}}else h==="body"&&Xg(a.ownerDocument.body);h=v}while(h);Im(r)}function D4(a,r){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?r?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(r?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function J2(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var h=r;switch(r=r.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":J2(h),Vr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function JI(a,r,h,d){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Ps])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=fo(a.nextSibling),a===null)break}return null}function WI(a,r,h){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=fo(a.nextSibling),a===null))return null;return a}function x4(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=fo(a.nextSibling),a===null))return null;return a}function W2(a){return a.data==="$?"||a.data==="$~"}function Z2(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function ZI(a,r){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||h.readyState!=="loading")r();else{var d=function(){r(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function fo(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var $2=null;function O4(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(r===0)return fo(a.nextSibling);r--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||r++}a=a.nextSibling}return null}function M4(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(r===0)return a;r--}else h!=="/$"&&h!=="/&"||r++}a=a.previousSibling}return null}function P4(a,r,h){switch(r=t1(h),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Xg(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Vr(a)}var mo=new Map,V4=new Set;function e1(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Bu=Tt.d;Tt.d={f:$I,r:t7,D:e7,C:n7,L:i7,m:s7,X:r7,S:a7,M:o7};function $I(){var a=Bu.f(),r=br();return a||r}function t7(a){var r=sa(a);r!==null&&r.tag===5&&r.type==="form"?Ly(r):Bu.r(a)}var wm=typeof document>"u"?null:document;function k4(a,r,h){var d=wm;if(d&&typeof r=="string"&&r){var v=Ci(r);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),V4.has(v)||(V4.add(v),a={rel:a,crossOrigin:h,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Ns(r,"link",a),Hn(r),d.head.appendChild(r)))}}function e7(a){Bu.D(a),k4("dns-prefetch",a,null)}function n7(a,r){Bu.C(a,r),k4("preconnect",a,r)}function i7(a,r,h){Bu.L(a,r,h);var d=wm;if(d&&a&&r){var v='link[rel="preload"][as="'+Ci(r)+'"]';r==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+Ci(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+Ci(h.imageSizes)+'"]')):v+='[href="'+Ci(a)+'"]';var T=v;switch(r){case"style":T=Rm(a);break;case"script":T=Cm(a)}mo.has(T)||(a=b({rel:"preload",href:r==="image"&&h&&h.imageSrcSet?void 0:a,as:r},h),mo.set(T,a),d.querySelector(v)!==null||r==="style"&&d.querySelector(Jg(T))||r==="script"&&d.querySelector(Wg(T))||(r=d.createElement("link"),Ns(r,"link",a),Hn(r),d.head.appendChild(r)))}}function s7(a,r){Bu.m(a,r);var h=wm;if(h&&a){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Ci(d)+'"][href="'+Ci(a)+'"]',T=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Cm(a)}if(!mo.has(T)&&(a=b({rel:"modulepreload",href:a},r),mo.set(T,a),h.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Wg(T)))return}d=h.createElement("link"),Ns(d,"link",a),Hn(d),h.head.appendChild(d)}}}function a7(a,r,h){Bu.S(a,r,h);var d=wm;if(d&&a){var v=Da(d).hoistableStyles,T=Rm(a);r=r||"default";var C=v.get(T);if(!C){var O={loading:0,preload:null};if(C=d.querySelector(Jg(T)))O.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":r},h),(h=mo.get(T))&&tE(a,h);var Y=C=d.createElement("link");Hn(Y),Ns(Y,"link",a),Y._p=new Promise(function(at,gt){Y.onload=at,Y.onerror=gt}),Y.addEventListener("load",function(){O.loading|=1}),Y.addEventListener("error",function(){O.loading|=2}),O.loading|=4,n1(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:O},v.set(T,C)}}}function r7(a,r){Bu.X(a,r);var h=wm;if(h&&a){var d=Da(h).hoistableScripts,v=Cm(a),T=d.get(v);T||(T=h.querySelector(Wg(v)),T||(a=b({src:a,async:!0},r),(r=mo.get(v))&&eE(a,r),T=h.createElement("script"),Hn(T),Ns(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function o7(a,r){Bu.M(a,r);var h=wm;if(h&&a){var d=Da(h).hoistableScripts,v=Cm(a),T=d.get(v);T||(T=h.querySelector(Wg(v)),T||(a=b({src:a,async:!0,type:"module"},r),(r=mo.get(v))&&eE(a,r),T=h.createElement("script"),Hn(T),Ns(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(v,T))}}function L4(a,r,h,d){var v=(v=ae.current)?e1(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(r=Rm(h.href),h=Da(v).hoistableStyles,d=h.get(r),d||(d={type:"style",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Rm(h.href);var T=Da(v).hoistableStyles,C=T.get(a);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,C),(T=v.querySelector(Jg(a)))&&!T._p&&(C.instance=T,C.state.loading=5),mo.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},mo.set(a,h),T||l7(v,a,h,C.state))),r&&d===null)throw Error(i(528,""));return C}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=h.async,h=h.src,typeof h=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Cm(h),h=Da(v).hoistableScripts,d=h.get(r),d||(d={type:"script",instance:null,count:0,state:null},h.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function Rm(a){return'href="'+Ci(a)+'"'}function Jg(a){return'link[rel="stylesheet"]['+a+"]"}function U4(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function l7(a,r,h,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Ns(r,"link",h),Hn(r),a.head.appendChild(r))}function Cm(a){return'[src="'+Ci(a)+'"]'}function Wg(a){return"script[async]"+a}function z4(a,r,h){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+Ci(h.href)+'"]');if(d)return r.instance=d,Hn(d),d;var v=b({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Hn(d),Ns(d,"style",v),n1(d,h.precedence,a),r.instance=d;case"stylesheet":v=Rm(h.href);var T=a.querySelector(Jg(v));if(T)return r.state.loading|=4,r.instance=T,Hn(T),T;d=U4(h),(v=mo.get(v))&&tE(d,v),T=(a.ownerDocument||a).createElement("link"),Hn(T);var C=T;return C._p=new Promise(function(O,Y){C.onload=O,C.onerror=Y}),Ns(T,"link",d),r.state.loading|=4,n1(T,h.precedence,a),r.instance=T;case"script":return T=Cm(h.src),(v=a.querySelector(Wg(T)))?(r.instance=v,Hn(v),v):(d=h,(v=mo.get(T))&&(d=b({},h),eE(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),Hn(v),Ns(v,"link",d),a.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,n1(d,h.precedence,a));return r.instance}function n1(a,r,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,T=v,C=0;C<d.length;C++){var O=d[C];if(O.dataset.precedence===r)T=O;else if(T!==v)break}T?T.parentNode.insertBefore(a,T.nextSibling):(r=h.nodeType===9?h.head:h,r.insertBefore(a,r.firstChild))}function tE(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function eE(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var i1=null;function B4(a,r,h){if(i1===null){var d=new Map,v=i1=new Map;v.set(h,d)}else v=i1,d=v.get(h),d||(d=new Map,v.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var T=h[v];if(!(T[Ps]||T[xn]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=a+C;var O=d.get(C);O?O.push(T):d.set(C,[T])}}return d}function G4(a,r,h){a=a.ownerDocument||a,a.head.insertBefore(h,r==="title"?a.querySelector("head > title"):null)}function u7(a,r,h){if(h===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(a=r.disabled,typeof r.precedence=="string"&&a==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function H4(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function c7(a,r,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=Rm(d.href),T=r.querySelector(Jg(v));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=s1.bind(a),r.then(a,a)),h.state.loading|=4,h.instance=T,Hn(T);return}T=r.ownerDocument||r,d=U4(d),(v=mo.get(v))&&tE(d,v),T=T.createElement("link"),Hn(T);var C=T;C._p=new Promise(function(O,Y){C.onload=O,C.onerror=Y}),Ns(T,"link",d),h.instance=T}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,r),(r=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=s1.bind(a),r.addEventListener("load",h),r.addEventListener("error",h))}}var nE=0;function h7(a,r){return a.stylesheets&&a.count===0&&r1(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&r1(a,a.stylesheets),a.unsuspend){var T=a.unsuspend;a.unsuspend=null,T()}},6e4+r);0<a.imgBytes&&nE===0&&(nE=62500*jI());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&r1(a,a.stylesheets),a.unsuspend)){var T=a.unsuspend;a.unsuspend=null,T()}},(a.imgBytes>nE?50:800)+r);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function s1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)r1(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var a1=null;function r1(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,a1=new Map,r.forEach(f7,a),a1=null,s1.call(a))}function f7(a,r){if(!(r.state.loading&4)){var h=a1.get(a);if(h)var d=h.get(null);else{h=new Map,a1.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var C=v[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),d=C)}d&&h.set(null,d)}v=r.instance,C=v.getAttribute("data-precedence"),T=h.get(C)||d,T===d&&h.set(null,v),h.set(C,v),this.count++,d=s1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),T?T.parentNode.insertBefore(v,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),r.state.loading|=4}}var Zg={$$typeof:X,Provider:null,Consumer:null,_currentValue:Et,_currentValue2:Et,_threadCount:0};function d7(a,r,h,d,v,T,C,O,Y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function q4(a,r,h,d,v,T,C,O,Y,at,gt,vt){return a=new d7(a,r,h,C,Y,at,gt,vt,O),r=1,T===!0&&(r|=24),T=On(3,null,null,r),a.current=T,T.stateNode=a,r=ng(),r.refCount++,a.pooledCache=r,r.refCount++,T.memoizedState={element:d,isDehydrated:h,cache:r},yf(T),a}function F4(a){return a?(a=gl,a):gl}function j4(a,r,h,d,v,T){v=F4(v),d.context===null?d.context=v:d.pendingContext=v,d=Lo(r),d.payload={element:h},T=T===void 0?null:T,T!==null&&(d.callback=T),h=Al(a,d,r),h!==null&&(Ee(h,a,r),wl(h,a,r))}function K4(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<r?h:r}}function iE(a,r){K4(a,r),(a=a.alternate)&&K4(a,r)}function Y4(a){if(a.tag===13||a.tag===31){var r=Ts(a,67108864);r!==null&&Ee(r,a,67108864),iE(a,67108864)}}function Q4(a){if(a.tag===13||a.tag===31){var r=ga();r=Mr(r);var h=Ts(a,r);h!==null&&Ee(h,a,r),iE(a,r)}}var o1=!0;function m7(a,r,h,d){var v=Z.T;Z.T=null;var T=Tt.p;try{Tt.p=2,sE(a,r,h,d)}finally{Tt.p=T,Z.T=v}}function p7(a,r,h,d){var v=Z.T;Z.T=null;var T=Tt.p;try{Tt.p=8,sE(a,r,h,d)}finally{Tt.p=T,Z.T=v}}function sE(a,r,h,d){if(o1){var v=aE(d);if(v===null)F2(a,r,d,l1,h),J4(a,d);else if(_7(v,a,r,h,d))d.stopPropagation();else if(J4(a,d),r&4&&-1<g7.indexOf(a)){for(;v!==null;){var T=sa(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=rr(T.pendingLanes);if(C!==0){var O=T;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var Y=1<<31-ue(C);O.entanglements[1]|=Y,C&=~Y}Ct(T),(Wt&6)===0&&(ni=en()+500,Ht(0))}}break;case 31:case 13:O=Ts(T,2),O!==null&&Ee(O,T,2),br(),iE(T,2)}if(T=aE(d),T===null&&F2(a,r,d,l1,h),T===v)break;v=T}v!==null&&d.stopPropagation()}else F2(a,r,d,null,h)}}function aE(a){return a=ra(a),rE(a)}var l1=null;function rE(a){if(l1=null,a=ur(a),a!==null){var r=o(a);if(r===null)a=null;else{var h=r.tag;if(h===13){if(a=c(r),a!==null)return a;a=null}else if(h===31){if(a=f(r),a!==null)return a;a=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return l1=a,null}function X4(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wi()){case ms:return 2;case es:return 8;case ns:case Hi:return 32;case ps:return 268435456;default:return 32}default:return 32}}var oE=!1,oh=null,lh=null,uh=null,$g=new Map,t0=new Map,ch=[],g7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J4(a,r){switch(a){case"focusin":case"focusout":oh=null;break;case"dragenter":case"dragleave":lh=null;break;case"mouseover":case"mouseout":uh=null;break;case"pointerover":case"pointerout":$g.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":t0.delete(r.pointerId)}}function e0(a,r,h,d,v,T){return a===null||a.nativeEvent!==T?(a={blockedOn:r,domEventName:h,eventSystemFlags:d,nativeEvent:T,targetContainers:[v]},r!==null&&(r=sa(r),r!==null&&Y4(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),a)}function _7(a,r,h,d,v){switch(r){case"focusin":return oh=e0(oh,a,r,h,d,v),!0;case"dragenter":return lh=e0(lh,a,r,h,d,v),!0;case"mouseover":return uh=e0(uh,a,r,h,d,v),!0;case"pointerover":var T=v.pointerId;return $g.set(T,e0($g.get(T)||null,a,r,h,d,v)),!0;case"gotpointercapture":return T=v.pointerId,t0.set(T,e0(t0.get(T)||null,a,r,h,d,v)),!0}return!1}function W4(a){var r=ur(a.target);if(r!==null){var h=o(r);if(h!==null){if(r=h.tag,r===13){if(r=c(h),r!==null){a.blockedOn=r,qi(a.priority,function(){Q4(h)});return}}else if(r===31){if(r=f(h),r!==null){a.blockedOn=r,qi(a.priority,function(){Q4(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function u1(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var h=aE(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);Sc=d,h.target.dispatchEvent(d),Sc=null}else return r=sa(h),r!==null&&Y4(r),a.blockedOn=h,!1;r.shift()}return!0}function Z4(a,r,h){u1(a)&&h.delete(r)}function y7(){oE=!1,oh!==null&&u1(oh)&&(oh=null),lh!==null&&u1(lh)&&(lh=null),uh!==null&&u1(uh)&&(uh=null),$g.forEach(Z4),t0.forEach(Z4)}function c1(a,r){a.blockedOn===r&&(a.blockedOn=null,oE||(oE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,y7)))}var h1=null;function $4(a){h1!==a&&(h1=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){h1===a&&(h1=null);for(var r=0;r<a.length;r+=3){var h=a[r],d=a[r+1],v=a[r+2];if(typeof d!="function"){if(rE(d||h)===null)continue;break}var T=sa(h);T!==null&&(a.splice(r,3),r-=3,Ng(T,{pending:!0,data:v,method:h.method,action:d},d,v))}}))}function Im(a){function r(Y){return c1(Y,a)}oh!==null&&c1(oh,a),lh!==null&&c1(lh,a),uh!==null&&c1(uh,a),$g.forEach(r),t0.forEach(r);for(var h=0;h<ch.length;h++){var d=ch[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<ch.length&&(h=ch[0],h.blockedOn===null);)W4(h),h.blockedOn===null&&ch.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var v=h[d],T=h[d+1],C=v[ui]||null;if(typeof T=="function")C||$4(h);else if(C){var O=null;if(T&&T.hasAttribute("formAction")){if(v=T,C=T[ui]||null)O=C.formAction;else if(rE(v)!==null)continue}else O=C.action;typeof O=="function"?h[d+1]=O:(h.splice(d,3),d-=3),$4(h)}}}function tA(){function a(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function lE(a){this._internalRoot=a}f1.prototype.render=lE.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var h=r.current,d=ga();j4(h,d,a,r,null,null)},f1.prototype.unmount=lE.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;j4(a.current,2,null,a,null,null),br(),r[Na]=null}};function f1(a){this._internalRoot=a}f1.prototype.unstable_scheduleHydration=function(a){if(a){var r=pc();a={blockedOn:null,target:a,priority:r};for(var h=0;h<ch.length&&r!==0&&r<ch[h].priority;h++);ch.splice(h,0,a),h===0&&W4(a)}};var eA=t.version;if(eA!=="19.2.4")throw Error(i(527,eA,"19.2.4"));Tt.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=g(r),a=a!==null?E(a):null,a=a===null?null:a.stateNode,a};var v7={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d1.isDisabled&&d1.supportsFiber)try{Rt=d1.inject(v7),qt=d1}catch{}}return i0.createRoot=function(a,r){if(!s(a))throw Error(i(299));var h=!1,d="",v=Fy,T=Vg,C=kg;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=q4(a,1,!1,null,null,h,d,null,v,T,C,tA),a[Na]=r.current,q2(a),new lE(r)},i0.hydrateRoot=function(a,r,h){if(!s(a))throw Error(i(299));var d=!1,v="",T=Fy,C=Vg,O=kg,Y=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(Y=h.formState)),r=q4(a,1,!0,r,h??null,d,v,Y,T,C,O,tA),r.context=F4(null),h=r.current,d=ga(),d=Mr(d),v=Lo(d),v.callback=null,Al(h,v,d),h=d,r.current.lanes=h,nl(r,h),Ct(r),a[Na]=r.current,q2(a),new f1(r)},i0.version="19.2.4",i0}var hA;function I7(){if(hA)return hE.exports;hA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),hE.exports=C7(),hE.exports}var N7=I7();const D7=Math.PI/180;function x7(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Yf=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},kt={_global:Yf,version:"10.2.0",isBrowser:x7(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return kt.angleDeg?n*D7:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return kt.DD.isDragging},isTransforming(){var n,t;return(t=(n=kt.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!kt.DD.node},releaseCanvasOnDestroy:!0,document:Yf.document,_injectGlobal(n){typeof Yf.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Yf.Konva=n}},ri=n=>{kt[n.prototype.getClassName()]=n};kt._injectGlobal(kt);const O7=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,fA=()=>{if(typeof document>"u")throw new Error(O7)};class Rr{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Rr(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,o=this.m[1]*e+this.m[3]*i,c=this.m[0]*-i+this.m[2]*e,f=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=o,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,c=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=c,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],c=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,o=this.m[0]*t,c=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=o,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],i=this.m[2],s=this.m[3],o=this.m[4],c=this.m[5],f=t*s-e*i,m={x:o,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);m.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),m.scaleX=g,m.scaleY=f/g,m.skewX=(t*i+e*s)/f,m.skewY=0}else if(i!=0||s!=0){const g=Math.sqrt(i*i+s*s);m.rotation=Math.PI/2-(s>0?Math.acos(-i/g):-Math.acos(i/g)),m.scaleX=f/g,m.scaleY=g,m.skewX=0,m.skewY=(t*i+e*s)/f}return m.rotation=et._getRotation(m.rotation),m}}const M7="[object Array]",P7="[object Number]",V7="[object String]",k7="[object Boolean]",L7=Math.PI/180,U7=180/Math.PI,s0="#",z7="",B7="0",G7="Konva warning: ",dA="Konva error: ",H7="rgb(",pE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},q7=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let m1=[],a0=null;const F7=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},et={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===M7},_isNumber(n){return Object.prototype.toString.call(n)===P7&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===V7},_isBoolean(n){return Object.prototype.toString.call(n)===k7},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const t=n[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){m1.push(n),m1.length===1&&F7(function(){const t=m1;m1=[],t.forEach(function(e){e()})})},createCanvasElement(){fA();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return fA(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,t){const e=et.createImageElement();e.onload=function(){t(e)},e.src=n},_rgbToHex(n,t,e){return((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(n){n=n.replace(s0,z7);const t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=B7+n;return s0+n},isCanvasFarblingActive(){if(a0!==null)return a0;if(typeof document>"u")return a0=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const t=n.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(e[s*4]!==40||e[s*4+1]!==40||e[s*4+2]!==40||e[s*4+3]!==255){i=!0;break}return a0=i,this.releaseCanvas(n),a0},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,t,e){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,t=Math.round(t/5)*5,e=Math.round(e/5)*5),s0+this._rgbToHex(n,t,e)},getSnappedHexColor(n){const t=this._hexToRgb(n);return s0+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(n){let t;return n in pE?(t=pE[n],{r:t[0],g:t[1],b:t[2]}):n[0]===s0?this._hexToRgb(n.substring(1)):n.substr(0,4)===H7?(t=q7.exec(n.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",et._namedColorToRBA(n)||et._hex3ColorToRGBA(n)||et._hex4ColorToRGBA(n)||et._hex6ColorToRGBA(n)||et._hex8ColorToRGBA(n)||et._rgbColorToRGBA(n)||et._rgbaColorToRGBA(n)||et._hslColorToRGBA(n)},_namedColorToRBA(n){const t=pE[n.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const t=n.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const t=n.split(/ *, */).map((e,i)=>e.slice(-1)==="%"?i===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(e[0])/360,s=Number(e[1])/100,o=Number(e[2])/100;let c,f,m;if(s===0)return m=o*255,{r:Math.round(m),g:Math.round(m),b:Math.round(m),a:1};o<.5?c=o*(1+s):c=o+s-o*s;const g=2*o-c,E=[0,0,0];for(let b=0;b<3;b++)f=i+1/3*-(b-1),f<0&&f++,f>1&&f--,6*f<1?m=g+(c-g)*6*f:2*f<1?m=c:3*f<2?m=g+(c-g)*(2/3-f)*6:m=g,E[b]=m*255;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection(n,t){return!(t.x>n.x+n.width||t.x+t.width<n.x||t.y>n.y+n.height||t.y+t.height<n.y)},cloneObject(n){const t={};for(const e in n)this._isPlainObject(n[e])?t[e]=this.cloneObject(n[e]):this._isArray(n[e])?t[e]=this.cloneArray(n[e]):t[e]=n[e];return t},cloneArray(n){return n.slice(0)},degToRad(n){return n*L7},radToDeg(n){return n*U7},_degToRad(n){return et.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),et.degToRad(n)},_radToDeg(n){return et.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),et.radToDeg(n)},_getRotation(n){return kt.angleDeg?et.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(dA+n)},error(n){console.error(dA+n)},warn(n){kt.showWarnings&&console.warn(G7+n)},each(n,t){for(const e in n)t(e,n[e])},_inRange(n,t,e){return t<=n&&n<e},_getProjectionToSegment(n,t,e,i,s,o){let c,f,m;const g=(n-e)*(n-e)+(t-i)*(t-i);if(g==0)c=n,f=t,m=(s-e)*(s-e)+(o-i)*(o-i);else{const E=((s-n)*(e-n)+(o-t)*(i-t))/g;E<0?(c=n,f=t,m=(n-s)*(n-s)+(t-o)*(t-o)):E>1?(c=e,f=i,m=(e-s)*(e-s)+(i-o)*(i-o)):(c=n+E*(e-n),f=t+E*(i-t),m=(c-s)*(c-s)+(f-o)*(f-o))}return[c,f,m]},_getProjectionToLine(n,t,e){const i=et.cloneObject(n);let s=Number.MAX_VALUE;return t.forEach(function(o,c){if(!e&&c===t.length-1)return;const f=t[(c+1)%t.length],m=et._getProjectionToSegment(o.x,o.y,f.x,f.y,n.x,n.y),g=m[0],E=m[1],b=m[2];b<s&&(i.x=g,i.y=E,s=b)}),i},_prepareArrayForTween(n,t,e){const i=[],s=[];if(n.length>t.length){const c=t;t=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<t.length;c+=2)s.push({x:t[c],y:t[c+1]});const o=[];return s.forEach(function(c){const f=et._getProjectionToLine(c,i,e);o.push(f.x),o.push(f.y)}),o},_prepareToStringify(n){let t;n.visitedByCircularReferenceRemoval=!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]&&typeof n[e]=="object"){if(t=Object.getOwnPropertyDescriptor(n,e),n[e].visitedByCircularReferenceRemoval||et._isElement(n[e]))if(t.configurable)delete n[e];else return null;else if(et._prepareToStringify(n[e])===null)if(t.configurable)delete n[e];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,t){for(const e in t)n[e]=t[e];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){kt.releaseCanvasOnDestroy&&n.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(n,t,e,i){let s=t<0?t:0,o=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let c=0,f=0,m=0,g=0;typeof i=="number"?c=f=m=g=Math.min(i,t/2,e/2):(c=Math.min(i[0]||0,t/2,e/2),f=Math.min(i[1]||0,t/2,e/2),g=Math.min(i[2]||0,t/2,e/2),m=Math.min(i[3]||0,t/2,e/2)),n.moveTo(s+c,o),n.lineTo(s+t-f,o),n.arc(s+t-f,o+f,f,Math.PI*3/2,0,!1),n.lineTo(s+t,o+e-g),n.arc(s+t-g,o+e-g,g,0,Math.PI/2,!1),n.lineTo(s+m,o+e),n.arc(s+m,o+e-m,m,Math.PI/2,Math.PI,!1),n.lineTo(s,o+c),n.arc(s+c,o+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,t,e,i,s){i=Math.abs(i);for(let o=0;o<e;o++){const c=t[(o-1+e)%e],f=t[o],m=t[(o+1)%e],g={x:f.x-c.x,y:f.y-c.y},E={x:m.x-f.x,y:m.y-f.y},b=Math.hypot(g.x,g.y),A=Math.hypot(E.x,E.y);let N;typeof s=="number"?N=s:N=o<s.length?s[o]:0,N=i*Math.cos(Math.PI/e)*Math.min(1,N/i*2);const k={x:g.x/b,y:g.y/b},U={x:E.x/A,y:E.y/A},F={x:f.x-k.x*N,y:f.y-k.y*N},j={x:f.x+U.x*N,y:f.y+U.y*N};o===0?n.moveTo(F.x,F.y):n.lineTo(F.x,F.y),n.arcTo(f.x,f.y,j.x,j.y,N)}}};function j7(n){const t=[],e=n.length,i=et;for(let s=0;s<e;s++){let o=n[s];i._isNumber(o)?o=Math.round(o*1e3)/1e3:i._isString(o)||(o=o+""),t.push(o)}return t}const mA=",",K7="(",Y7=")",Q7="([",X7="])",J7=";",W7="()",Z7="=",pA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],$7=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],tN=100;let p1=null;function gA(){if(p1!==null)return p1;try{const t=et.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(p1=!1,!1)}catch{return p1=!1,!1}}class Vv{constructor(t){this.canvas=t,kt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,s=i.length,o="",c,f,m,g;for(c=0;c<s;c++)f=i[c],m=f.method,m?(g=f.args,o+=m,t?o+=W7:et._isArray(g[0])?o+=Q7+g.join(mA)+X7:(e&&(g=g.map(E=>typeof E=="number"?Math.floor(E):E)),o+=K7+g.join(mA)+Y7)):(o+=f.property,t||(o+=Z7+f.val)),o+=J7;return o}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,i;e.push(t),i=e.length,i>=tN&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,o,c){this._context.arc(t,e,i,s,o,c)}arcTo(t,e,i,s,o){this._context.arcTo(t,e,i,s,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,o,c){this._context.bezierCurveTo(t,e,i,s,o,c)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;if(i.length===2)return this._context.createImageData(t,e);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,o,c){return this._context.createRadialGradient(t,e,i,s,o,c)}drawImage(t,e,i,s,o,c,f,m,g){const E=arguments,b=this._context;E.length===3?b.drawImage(t,e,i):E.length===5?b.drawImage(t,e,i,s,o):E.length===9&&b.drawImage(t,e,i,s,o,c,f,m,g)}ellipse(t,e,i,s,o,c,f,m){this._context.ellipse(t,e,i,s,o,c,f,m)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,o){this._context.roundRect(t,e,i,s,o)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,o,c){this._context.setTransform(t,e,i,s,o,c)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,o,c){this._context.transform(t,e,i,s,o,c)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=pA.length,i=this.setAttr,s,o;const c=function(f){let m=t[f],g;t[f]=function(){return o=j7(Array.prototype.slice.call(arguments,0)),g=m.apply(t,arguments),t._trace({method:f,args:o}),g}};for(s=0;s<e;s++)c(pA[s]);t.setAttr=function(){i.apply(t,arguments);const f=arguments[0];let m=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(m=m/this.canvas.getPixelRatio()),t._trace({property:f,val:m})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}$7.forEach(function(n){Object.defineProperty(Vv.prototype,n,{get(){return this._context[n]},set(t){this._context[n]=t}})});class eN extends Vv{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&i==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&i==="linear-gradient"){this._fillLinearGradient(t);return}const c=t.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):s?this._fillPattern(t):o?this._fillLinearGradient(t):c&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)o.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const o=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",c=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},m=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),E=m.x*g,b=m.y*g;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",c*Math.min(Math.abs(E),Math.abs(b))),this.setAttr("shadowOffsetX",f.x*E),this.setAttr("shadowOffsetY",f.y*b)}}class nN extends Vv{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let g1;function iN(){if(g1)return g1;const n=et.createCanvasElement(),t=n.getContext("2d");return g1=(function(){const e=kt._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/i})(),et.releaseCanvas(n),g1}class rS{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||kt.pixelRatio||iN();this.pixelRatio=i,this._canvas=et.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(s){return et.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Eh extends rS{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new eN(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class oS extends rS{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new nN(this),this.setSize(t.width,t.height)}}const tn={get isDragging(){let n=!1;return tn._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return tn._dragElements.forEach(t=>{n=t.node}),n},_dragElements:new Map,_drag(n){const t=[];tn._dragElements.forEach((e,i)=>{const{node:s}=e,o=s.getStage();o.setPointersPositions(n),e.pointerId===void 0&&(e.pointerId=et._getFirstPointerId(n));const c=o._changedPointerPositions.find(f=>f.id===e.pointerId);if(c){if(e.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-e.startPointerPos.x),Math.abs(c.y-e.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,e),t.push(s)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:n},!0)})},_endDragBefore(n){const t=[];tn._dragElements.forEach(e=>{const{node:i}=e,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(tn.justDragged=!0,kt._mouseListenClick=!1,kt._touchListenClick=!1,kt._pointerListenClick=!1,e.dragStatus="stopped");const c=e.node.getLayer()||e.node instanceof kt.Stage&&e.node;c&&t.indexOf(c)===-1&&t.push(c)}),t.forEach(e=>{e.draw()})},_endDragAfter(n){tn._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:n},!0),t.dragStatus!=="dragging"&&tn._dragElements.delete(e)})}};kt.isBrowser&&(window.addEventListener("mouseup",tn._endDragBefore,!0),window.addEventListener("touchend",tn._endDragBefore,!0),window.addEventListener("touchcancel",tn._endDragBefore,!0),window.addEventListener("mousemove",tn._drag),window.addEventListener("touchmove",tn._drag),window.addEventListener("mouseup",tn._endDragAfter,!1),window.addEventListener("touchend",tn._endDragAfter,!1),window.addEventListener("touchcancel",tn._endDragAfter,!1));function zh(n){return et._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||et._isBoolean(n)?n:Object.prototype.toString.call(n)}function z6(n){return n>255?255:n<0?0:Math.round(n)}function Mt(){if(kt.isUnminified)return function(n,t){return et._isNumber(n)||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),n}}function kv(n){if(kt.isUnminified)return function(t,e){let i=et._isNumber(t),s=et._isArray(t)&&t.length==n;return!i&&!s&&et.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+n+")"),t}}function lS(){if(kt.isUnminified)return function(n,t){return et._isNumber(n)||n==="auto"||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),n}}function bd(){if(kt.isUnminified)return function(n,t){return et._isString(n)||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),n}}function B6(){if(kt.isUnminified)return function(n,t){const e=et._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return e||i||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),n}}function sN(){if(kt.isUnminified)return function(n,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&n instanceof e||(et._isArray(n)?n.forEach(function(i){et._isNumber(i)||et.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),n}}function tl(){if(kt.isUnminified)return function(n,t){return n===!0||n===!1||et.warn(zh(n)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),n}}function aN(n){if(kt.isUnminified)return function(t,e){return t==null||et.isObject(t)||et.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+n),t}}const r0="get",o0="set",B={addGetterSetter(n,t,e,i,s){B.addGetter(n,t,e),B.addSetter(n,t,i,s),B.addOverloadedGetterSetter(n,t)},addGetter(n,t,e){const i=r0+et._capitalize(t);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[t];return s===void 0?e:s}},addSetter(n,t,e,i){const s=o0+et._capitalize(t);n.prototype[s]||B.overWriteSetter(n,t,e,i)},overWriteSetter(n,t,e,i){const s=o0+et._capitalize(t);n.prototype[s]=function(o){return e&&o!==void 0&&o!==null&&(o=e.call(this,o,t)),this._setAttr(t,o),i&&i.call(this),this}},addComponentsGetterSetter(n,t,e,i,s){const o=e.length,c=et._capitalize,f=r0+c(t),m=o0+c(t);n.prototype[f]=function(){const E={};for(let b=0;b<o;b++){const A=e[b];E[A]=this.getAttr(t+c(A))}return E};const g=aN(e);n.prototype[m]=function(E){const b=this.attrs[t];i&&(E=i.call(this,E,t)),g&&g.call(this,E,t);for(const A in E)E.hasOwnProperty(A)&&this._setAttr(t+c(A),E[A]);return E||e.forEach(A=>{this._setAttr(t+c(A),void 0)}),this._fireChangeEvent(t,b,E),s&&s.call(this),this},B.addOverloadedGetterSetter(n,t)},addOverloadedGetterSetter(n,t){const e=et._capitalize(t),i=o0+e,s=r0+e;n.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,t,e,i){et.error("Adding deprecated "+t);const s=r0+et._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){et.error(o);const c=this.attrs[t];return c===void 0?e:c},B.addSetter(n,t,i,function(){et.error(o)}),B.addOverloadedGetterSetter(n,t)},backCompat(n,t){et.each(t,function(e,i){const s=n.prototype[i],o=r0+et._capitalize(e),c=o0+et._capitalize(e);function f(){s.apply(this,arguments),et.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[e]=f,n.prototype[o]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function rN(n){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(n))!==null;){const[,i,s]=e;switch(i){case"blur":{const o=parseFloat(s.replace("px",""));return function(c){this.blurRadius(o*.5);const f=kt.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const o=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(o);const f=kt.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const o=parseFloat(s);return function(c){const f=100*(Math.sqrt(o)-1);this.contrast(f);const m=kt.Filters;m&&m.Contrast&&m.Contrast.call(this,c)}}case"grayscale":return function(o){const c=kt.Filters;c&&c.Grayscale&&c.Grayscale.call(this,o)};case"sepia":return function(o){const c=kt.Filters;c&&c.Sepia&&c.Sepia.call(this,o)};case"invert":return function(o){const c=kt.Filters;c&&c.Invert&&c.Invert.call(this,o)};default:et.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const k1="absoluteOpacity",_A="allEventListeners",Hu="absoluteTransform",yA="absoluteScale",Lf="canvas",oN="Change",lN="children",uN="konva",aT="listening",cN="mouseenter",hN="mouseleave",fN="pointerenter",dN="pointerleave",mN="touchenter",pN="touchleave",vA="set",EA="Shape",L1=" ",TA="stage",_h="transform",gN="Stage",rT="visible",_N=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(L1);let yN=1;class Ot{constructor(t){this._id=yN++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===_h||t===Hu)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t);return(i===void 0||(t===_h||t===Hu)&&i.dirty===!0)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const s=e.map(o=>o+"Change.konva").join(L1);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Lf)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Hu&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Lf)){const{scene:t,filter:e,hit:i}=this._cache.get(Lf);et.releaseCanvas(t._canvas,e._canvas,i._canvas),this._cache.delete(Lf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(e.width||i.width),o=Math.ceil(e.height||i.height),c=e.pixelRatio,f=e.x===void 0?Math.floor(i.x):e.x,m=e.y===void 0?Math.floor(i.y):e.y,g=e.offset||0,E=e.drawBorder||!1,b=e.hitCanvasPixelRatio||1;if(!s||!o){et.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const A=Math.abs(Math.round(i.x)-f)>.5?1:0,N=Math.abs(Math.round(i.y)-m)>.5?1:0;s+=g*2+A,o+=g*2+N,f-=g,m-=g;const D=new Eh({pixelRatio:c,width:s,height:o}),k=new Eh({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),U=new oS({pixelRatio:b,width:s,height:o}),F=D.getContext(),j=U.getContext(),X=new Eh({width:D.width/D.pixelRatio+Math.abs(f),height:D.height/D.pixelRatio+Math.abs(m),pixelRatio:D.pixelRatio}),W=X.getContext();return U.isCache=!0,D.isCache=!0,this._cache.delete(Lf),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(D.getContext()._context.imageSmoothingEnabled=!1,k.getContext()._context.imageSmoothingEnabled=!1),F.save(),j.save(),W.save(),F.translate(-f,-m),j.translate(-f,-m),W.translate(-f,-m),X.x=f,X.y=m,this._isUnderCache=!0,this._clearSelfAndDescendantCache(k1),this._clearSelfAndDescendantCache(yA),this.drawScene(D,this,X),this.drawHit(U,this),this._isUnderCache=!1,F.restore(),j.restore(),E&&(F.save(),F.beginPath(),F.rect(0,0,s,o),F.closePath(),F.setAttr("strokeStyle","red"),F.setAttr("lineWidth",5),F.stroke(),F.restore()),et.releaseCanvas(X._canvas),this._cache.set(Lf,{scene:D,filter:k,hit:U,x:f,y:m}),this._requestDraw(),this}isCached(){return this._cache.has(Lf)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,o=1/0,c=-1/0,f=-1/0;const m=this.getAbsoluteTransform(e);return i.forEach(function(g){const E=m.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),{x:s,y:o,width:c-s,height:f-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,s=e.filter,o=s.getContext(),c,f,m,g;if(!t||t.length===0)return i;if(this._filterUpToDate)return s;let E=!0;for(let A=0;A<t.length;A++)if(typeof t[A]=="string"&&gA(),typeof t[A]!="string"||!gA()){E=!1;break}const b=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),E){const A=t.join(" ");return o.save(),o.setAttr("filter",A),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),o.restore(),this._filterUpToDate=!0,s}try{for(c=t.length,o.clear(),o.drawImage(i._canvas,0,0,i.getWidth()/b,i.getHeight()/b),f=o.getImageData(0,0,s.getWidth(),s.getHeight()),m=0;m<c;m++)g=t[m],typeof g=="string"&&(g=rN(g)),g.call(this,f),o.putImageData(f,0,0)}catch(A){et.error("Unable to apply filter. "+A.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,e){if(this._cache&&this._cache.delete(_A),arguments.length===3)return this._delegate.apply(this,arguments);const i=t.split(L1);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],m=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:m,handler:e})}return this}off(t,e){let i=(t||"").split(L1),s=i.length,o,c,f,m,g,E;if(this._cache&&this._cache.delete(_A),!t)for(c in this.eventListeners)this._off(c);for(o=0;o<s;o++)if(f=i[o],m=f.split("."),g=m[0],E=m[1],g)this.eventListeners[g]&&this._off(g,E,e);else for(c in this.eventListeners)this._off(c,E,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(i){e.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const s=this;this.on(t,function(o){const c=o.target.findAncestors(e,!0,s);for(let f=0;f<c.length;f++)o=et.cloneObject(o),o.currentTarget=c[f],i.call(c[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),tn._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Hu),this._clearSelfAndDescendantCache(k1),this._clearSelfAndDescendantCache(yA),this._clearSelfAndDescendantCache(TA),this._clearSelfAndDescendantCache(rT),this._clearSelfAndDescendantCache(aT)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+et._capitalize(t);return et._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)e!==lN&&(i=vA+et._capitalize(e),et._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(aT,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(rT,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;tn._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const o=!e&&!kt.hitOnDragEnabled&&(s||kt.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,s,o,c,f;function m(E){for(s=[],o=E.length,c=0;c<o;c++)f=E[c],i++,f.nodeType!==EA&&(s=s.concat(f.getChildren().slice())),f._id===e._id&&(c=o);s.length>0&&s[0].getDepth()<=t&&m(s)}const g=this.getStage();return e.nodeType!==gN&&g&&m(g.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(_h),this._clearSelfAndDescendantCache(Hu)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),o=new Rr,c=this.offset();return o.m=s.slice(),o.translate(c.x,c.y),o.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(_h);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(_h),this._clearSelfAndDescendantCache(Hu),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),o=this.y();return e!==void 0&&(s+=e),i!==void 0&&(o+=i),this.setPosition({x:s,y:o}),this}_eachAncestorReverse(t,e){let i=[],s=this.getParent(),o,c;if(!(e&&e._id===this._id)){for(i.unshift(this);s&&(!e||s._id!==e._id);)i.unshift(s),s=s.parent;for(o=i.length,c=0;c<o;c++)t(i[c])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return et.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return et.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return et.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return et.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return et.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&et.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(k1,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,s,o,c;const f={attrs:{},className:this.getClassName()};for(e in t)i=t[e],c=et.isObject(i)&&!et._isPlainObject(i)&&!et._isArray(i),!c&&(s=typeof this[e]=="function"&&this[e],delete t[e],o=s?s.call(this):null,t[e]=i,o!==i&&(f.attrs[e]=i));return et._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let o=this.parent;for(;o;){if(o===i)return s;o._isMatch(t)&&s.push(o),o=o.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,s,o;for(s=0;s<i;s++)if(o=e[s],et.isValidSelector(o)||(et.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),et.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),et.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(TA,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Hu,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new Rr,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?e.multiply(i.getTransform()):s==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;{e=this._cache.get(Hu)||new Rr,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const i=this.transformsEnabled();if(i==="all")e.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,o=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;e.translate(s-c,o-f)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(_h,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(_h)||new Rr;i.reset();const s=this.x(),o=this.y(),c=kt.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,m=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,E=this.attrs.skewY||0,b=this.attrs.offsetX||0,A=this.attrs.offsetY||0;return(s!==0||o!==0)&&i.translate(s,o),c!==0&&i.rotate(c),(g!==0||E!==0)&&i.skew(g,E),(f!==1||m!==1)&&i.scale(f,m),(b!==0||A!==0)&&i.translate(-1*b,-1*A),i.dirty=!1,i}clone(t){let e=et.cloneObject(this.attrs),i,s,o,c,f;for(i in t)e[i]=t[i];const m=new this.constructor(e);for(i in this.eventListeners)for(s=this.eventListeners[i],o=s.length,c=0;c<o;c++)f=s[c],f.name.indexOf(uN)<0&&(m.eventListeners[i]||(m.eventListeners[i]=[]),m.eventListeners[i].push(f));return m}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=t.x!==void 0?t.x:Math.floor(e.x),o=t.y!==void 0?t.y:Math.floor(e.y),c=t.pixelRatio||1,f=new Eh({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:c}),m=f.getContext(),g=new Eh({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(m._context.imageSmoothingEnabled=!1),m.save(),(s||o)&&m.translate(-1*s,-1*o),this.drawScene(f,void 0,g),m.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,et._urlToImage(this.toDataURL(t),function(o){e(o),s?.(o)})}catch(s){i(s)}})}toBlob(t){return new Promise((e,i)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(o=>{e(o),s?.(o)},t?.mimeType,t?.quality)}catch(s){i(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():kt.dragDistance}_off(t,e,i){let s=this.eventListeners[t],o,c,f;for(o=0;o<s.length;o++)if(c=s[o].name,f=s[o].handler,(c!=="konva"||e==="konva")&&(!e||c===e)&&(!i||i===f)){if(s.splice(o,1),s.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,e,i){this._fire(t+oN,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return i!==-1&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[vA+et._capitalize(t)];return et._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(kt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];i===e&&!et.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;i!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===EA&&(e.target=this);const s=[cN,hN,fN,dN,mN,pN];if(!(s.indexOf(t)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(t,e);const c=s.indexOf(t)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i;const{nodeType:s}=this,o=Ot.protoListenerMap.get(s)||{};let c=o?.[t];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const m=(i=(e=f.eventListeners)===null||e===void 0?void 0:e[t])!==null&&i!==void 0?i:[];c.push(...m),f=Object.getPrototypeOf(f)}o[t]=c,Ot.protoListenerMap.set(s,o)}return c}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(let o=0;o<i.length;o++)i[o].handler.call(this,e);const s=this.eventListeners[t];if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const o=i._getPointerById(e)||i._changedPointerPositions[0]||s;tn._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-s.x,y:o.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){tn._dragElements.has(this._id)||this._createDragElement(t);const i=tn._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let s={x:i.x-e.offset.x,y:i.y-e.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const c=o.call(this,s,t);c?s=c:et.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const e=tn._dragElements.get(this._id);e&&(e.dragStatus="stopped"),tn._endDragBefore(t),tn._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=tn._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||kt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;tn._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=tn._dragElements.get(this._id),i=e&&e.dragStatus==="dragging",s=e&&e.dragStatus==="ready";i?this.stopDrag():s&&tn._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return et.haveIntersection(i,this.getClientRect())}static create(t,e){return et._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=Ot.prototype.getClassName.call(t),s=t.children,o,c,f;e&&(t.attrs.container=e),kt[i]||(et.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const m=kt[i];if(o=new m(t.attrs),s)for(c=s.length,f=0;f<c;f++)o.add(Ot._createNode(s[f]));return o}}Ot.protoListenerMap=new Map;Ot.prototype.nodeType="Node";Ot.prototype._attrsAffectingSize=[];Ot.prototype.eventListeners={};Ot.prototype.on.call(Ot.prototype,_N,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(_h),this._clearSelfAndDescendantCache(Hu)});Ot.prototype.on.call(Ot.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(rT)});Ot.prototype.on.call(Ot.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(aT)});Ot.prototype.on.call(Ot.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(k1)});const yn=B.addGetterSetter;yn(Ot,"zIndex");yn(Ot,"absolutePosition");yn(Ot,"position");yn(Ot,"x",0,Mt());yn(Ot,"y",0,Mt());yn(Ot,"globalCompositeOperation","source-over",bd());yn(Ot,"opacity",1,Mt());yn(Ot,"name","",bd());yn(Ot,"id","",bd());yn(Ot,"rotation",0,Mt());B.addComponentsGetterSetter(Ot,"scale",["x","y"]);yn(Ot,"scaleX",1,Mt());yn(Ot,"scaleY",1,Mt());B.addComponentsGetterSetter(Ot,"skew",["x","y"]);yn(Ot,"skewX",0,Mt());yn(Ot,"skewY",0,Mt());B.addComponentsGetterSetter(Ot,"offset",["x","y"]);yn(Ot,"offsetX",0,Mt());yn(Ot,"offsetY",0,Mt());yn(Ot,"dragDistance",void 0,Mt());yn(Ot,"width",0,Mt());yn(Ot,"height",0,Mt());yn(Ot,"listening",!0,tl());yn(Ot,"preventDefault",!0,tl());yn(Ot,"filters",void 0,function(n){return this._filterUpToDate=!1,n});yn(Ot,"visible",!0,tl());yn(Ot,"transformsEnabled","all",bd());yn(Ot,"size");yn(Ot,"dragBoundFunc");yn(Ot,"draggable",!1,tl());B.backCompat(Ot,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ir extends Ot{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let i=0;i<t.length;i++)this.add(t[i]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants(s=>{const o=s._isMatch(t);return o&&i.push(s),!!(o&&e)}),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=Ot.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=Ot.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){e.add(i.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,i){e.index=i}),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas(),c=o&&o.getContext(),f=this._getCanvasCache(),m=f&&f.scene,g=o&&o.isCache;if(!this.isVisible()&&!g)return this;if(m){c.save();const E=this.getAbsoluteTransform(e).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",o,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,o=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){o.save();const m=this.getAbsoluteTransform(e).getMatrix();o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var o;const c=e&&e.getContext(),f=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),E=typeof f=="number"&&typeof m=="number"||g,b=i===this;if(E){c.save();const N=this.getAbsoluteTransform(i);let D=N.getMatrix();c.transform(D[0],D[1],D[2],D[3],D[4],D[5]),c.beginPath();let k;if(g)k=g.call(this,c,this);else{const U=this.clipX(),F=this.clipY();c.rect(U||0,F||0,f,m)}c.clip.apply(c,k),D=N.copy().invert().getMatrix(),c.transform(D[0],D[1],D[2],D[3],D[4],D[5])}const A=!b&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";A&&(c.save(),c._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(N){N[t](e,i,s)}),A&&c.restore(),E&&c.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let o,c,f,m,g={x:1/0,y:1/0,width:0,height:0};const E=this;(e=this.children)===null||e===void 0||e.forEach(function(N){if(!N.visible())return;const D=N.getClientRect({relativeTo:E,skipShadow:t.skipShadow,skipStroke:t.skipStroke});D.width===0&&D.height===0||(o===void 0?(o=D.x,c=D.y,f=D.x+D.width,m=D.y+D.height):(o=Math.min(o,D.x),c=Math.min(c,D.y),f=Math.max(f,D.x+D.width),m=Math.max(m,D.y+D.height)))});const b=this.find("Shape");let A=!1;for(let N=0;N<b.length;N++)if(b[N]._isVisible(this)){A=!0;break}return A&&o!==void 0?g={x:o,y:c,width:f-o,height:m-c}:g={x:0,y:0,width:0,height:0},i?g:this._transformedRect(g,s)}}B.addComponentsGetterSetter(Ir,"clip",["x","y","width","height"]);B.addGetterSetter(Ir,"clipX",void 0,Mt());B.addGetterSetter(Ir,"clipY",void 0,Mt());B.addGetterSetter(Ir,"clipWidth",void 0,Mt());B.addGetterSetter(Ir,"clipHeight",void 0,Mt());B.addGetterSetter(Ir,"clipFunc");const t_=new Map,G6=kt._global.PointerEvent!==void 0;function gE(n){return t_.get(n)}function uS(n){return{evt:n,pointerId:n.pointerId}}function H6(n,t){return t_.get(n)===t}function q6(n,t){P0(n),t.getStage()&&(t_.set(n,t),G6&&t._fire("gotpointercapture",uS(new PointerEvent("gotpointercapture"))))}function P0(n,t){const e=t_.get(n);if(!e)return;const i=e.getStage();i&&i.content,t_.delete(n),G6&&e._fire("lostpointercapture",uS(new PointerEvent("lostpointercapture")))}const vN="Stage",EN="string",SA="px",TN="mouseout",F6="mouseleave",j6="mouseover",K6="mouseenter",Y6="mousemove",Q6="mousedown",X6="mouseup",S0="pointermove",b0="pointerdown",Fm="pointerup",A0="pointercancel",SN="lostpointercapture",_1="pointerout",w0="pointerleave",y1="pointerover",v1="pointerenter",oT="contextmenu",J6="touchstart",W6="touchend",Z6="touchmove",$6="touchcancel",lT="wheel",bN=5,AN=[[K6,"_pointerenter"],[Q6,"_pointerdown"],[Y6,"_pointermove"],[X6,"_pointerup"],[F6,"_pointerleave"],[J6,"_pointerdown"],[Z6,"_pointermove"],[W6,"_pointerup"],[$6,"_pointercancel"],[j6,"_pointerover"],[lT,"_wheel"],[oT,"_contextmenu"],[b0,"_pointerdown"],[S0,"_pointermove"],[Fm,"_pointerup"],[A0,"_pointercancel"],[w0,"_pointerleave"],[SN,"_lostpointercapture"]],_E={mouse:{[_1]:TN,[w0]:F6,[y1]:j6,[v1]:K6,[S0]:Y6,[b0]:Q6,[Fm]:X6,[A0]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[_1]:"touchout",[w0]:"touchleave",[y1]:"touchover",[v1]:"touchenter",[S0]:Z6,[b0]:J6,[Fm]:W6,[A0]:$6,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[_1]:_1,[w0]:w0,[y1]:y1,[v1]:v1,[S0]:S0,[b0]:b0,[Fm]:Fm,[A0]:A0,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},R0=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Nm=n=>{const t=R0(n);if(t==="pointer")return kt.pointerEventsEnabled&&_E.pointer;if(t==="touch")return _E.touch;if(t==="mouse")return _E.mouse};function bA(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&et.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const wN="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",V0=[];let Lv=class extends Ir{constructor(t){super(bA(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),V0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{bA(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",i=t.getType()==="FastLayer";e||i||et.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===EN){let e;if(t.charAt(0)==="."){const i=t.slice(1);t=document.getElementsByClassName(i)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Ir.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&et._isInDocument(t)&&this.container().removeChild(t);const e=V0.indexOf(this);return e>-1&&V0.splice(e,1),et.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(et.warn(wN),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new Eh({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach(function(o){if(!o.isVisible())return;const c=o._toKonvaCanvas(t);i.drawImage(c._canvas,t.x,t.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let o=s;o>=0;o--){const c=e[o].getIntersection(t);if(c)return c}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+SA,this.content.style.height=e+SA),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t,...e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const i=this.children.length;return i>bN&&et.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),kt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return H6(t,this)}setPointerCapture(t){q6(t,this)}releaseCapture(t){P0(t)}getLayers(){return this.children}_bindContentEvents(){kt.isBrowser&&AN.forEach(([t,e])=>{this.content.addEventListener(t,i=>{this[e](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Nm(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Nm(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Nm(t.type),i=R0(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),o=!(kt.isDragging()||kt.isTransforming())||kt.hitOnDragEnabled;s&&o?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):o&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Nm(t.type),i=R0(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(o=>{const c=this.getIntersection(o);if(tn.justDragged=!1,kt["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}kt.capturePointerEventsEnabled&&c.setPointerCapture(o.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(e.pointerdown,{evt:t,pointerId:o.id}),s=!0;const f=t.type.indexOf("touch")>=0;c.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Nm(t.type),i=R0(t.type);if(!e)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(kt.isDragging()&&tn.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(kt.isDragging()||kt.isTransforming())||kt.hitOnDragEnabled))return;const c={};let f=!1;const m=this._getTargetShape(i);this._changedPointerPositions.forEach(g=>{const E=gE(g.id)||this.getIntersection(g),b=g.id,A={evt:t,pointerId:b},N=m!==E;if(N&&m&&(m._fireAndBubble(e.pointerout,{...A},E),m._fireAndBubble(e.pointerleave,{...A},E)),E){if(c[E._id])return;c[E._id]=!0}E&&E.isListening()?(f=!0,N&&(E._fireAndBubble(e.pointerover,{...A},m),E._fireAndBubble(e.pointerenter,{...A},m),this[i+"targetShape"]=E),E._fireAndBubble(e.pointermove,{...A})):m&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:b}),this[i+"targetShape"]=null)}),f||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Nm(t.type),i=R0(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],o=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(m=>{const g=gE(m.id)||this.getIntersection(m);if(g){if(g.releaseCapture(m.id),c[g._id])return;c[g._id]=!0}const E=m.id,b={evt:t,pointerId:E};let A=!1;kt["_"+i+"InDblClickWindow"]?(A=!0,clearTimeout(this[i+"DblTimeout"])):tn.justDragged||(kt["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){kt["_"+i+"InDblClickWindow"]=!1},kt.dblClickWindow),g&&g.isListening()?(f=!0,this[i+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...b}),kt["_"+i+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(e.pointerclick,{...b}),A&&o&&o===g&&g._fireAndBubble(e.pointerdblclick,{...b}))):(this[i+"ClickEndShape"]=null,f||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),kt["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:E}),A&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:E}))}),f||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),kt["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&i!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(oT,{evt:t}):this._fire(oT,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(lT,{evt:t}):this._fire(lT,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=gE(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(Fm,uS(t)),P0(t.pointerId)}_lostpointercapture(t){P0(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-e.left)/e.scaleX,y:(o.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,s=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:s,id:et._getFirstPointerId(t)}])}_setPointerPosition(t){et.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Eh({width:this.width(),height:this.height()}),this.bufferHitCanvas=new oS({pixelRatio:1,width:this.width(),height:this.height()}),!kt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return et.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Lv.prototype.nodeType=vN;ri(Lv);B.addGetterSetter(Lv,"container");kt.isBrowser&&document.addEventListener("visibilitychange",()=>{V0.forEach(n=>{n.batchDraw()})});const tw="hasShadow",ew="shadowRGBA",nw="patternImage",iw="linearGradient",sw="radialGradient";let E1;function yE(){return E1||(E1=et.createCanvasElement().getContext("2d"),E1)}const k0={};function RN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function CN(n){n.stroke()}function IN(n){const t=this.attrs.fillRule;t?n.fill(t):n.fill()}function NN(n){n.stroke()}function DN(){this._clearCache(tw)}function xN(){this._clearCache(ew)}function ON(){this._clearCache(nw)}function MN(){this._clearCache(iw)}function PN(){this._clearCache(sw)}class Nt extends Ot{constructor(t){super(t);let e,i=0;for(;e=et.getHitColor(),!(e&&!(e in k0));)if(i++,i>=1e4){et.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),e=et.getRandomColor();break}this.colorKey=e,k0[e]=this}getContext(){return et.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return et.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(tw,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(nw,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=yE().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const i=new Rr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(kt.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),o=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);e.setTransform(o)}return e}}_getLinearGradient(){return this._getCache(iw,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=yE(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),o=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}_getRadialGradient(){return this._getCache(sw,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=yE(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),o=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<t.length;c+=2)o.addColorStop(t[c],t[c+1]);return o}}getShadowRGBA(){return this._getCache(ew,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=et.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Ot.prototype.destroy.call(this),delete k0[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const s=t||this.hasFill(),o=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&o&&c)return!0;const f=this.hasShadow(),m=this.shadowForStrokeEnabled();return!!(s&&o&&f&&m)}setStrokeHitEnabled(t){et.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,o=t.relativeTo||e&&this.getStage()||void 0,c=this.getSelfRect(),m=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=c.width+m,E=c.height+m,b=!t.skipShadow&&this.hasShadow(),A=b?this.shadowOffsetX():0,N=b?this.shadowOffsetY():0,D=g+Math.abs(A),k=E+Math.abs(N),U=b&&this.shadowBlur()||0,F=D+U*2,j=k+U*2,X={width:F,height:j,x:-(m/2+U)+Math.min(A,0)+c.x,y:-(m/2+U)+Math.min(N,0)+c.y};return s?X:this._transformedRect(X,o)}drawScene(t,e,i){const s=this.getLayer(),o=t||s.getCanvas(),c=o.getContext(),f=this._getCanvasCache(),m=this.getSceneFunc(),g=this.hasShadow();let E;const b=e===this;if(!this.isVisible()&&!b)return this;if(f){c.save();const A=this.getAbsoluteTransform(e).getMatrix();return c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!m)return this;if(c.save(),this._useBufferCanvas()){E=this.getStage();const A=i||E.bufferCanvas,N=A.getContext();i?(N.save(),N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,A.width,A.height),N.restore()):N.clear(),N.save(),N._applyLineJoin(this),N._applyMiterLimit(this);const D=this.getAbsoluteTransform(e).getMatrix();N.transform(D[0],D[1],D[2],D[3],D[4],D[5]),m.call(this,N,this),N.restore();const k=A.pixelRatio;g&&c._applyShadow(this),b||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(A._canvas,A.x||0,A.y||0,A.width/k,A.height/k)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!b){const A=this.getAbsoluteTransform(e).getMatrix();c.transform(A[0],A[1],A[2],A[3],A[4],A[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}g&&c._applyShadow(this),m.call(this,c,this)}return c.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),o=t||s.hitCanvas,c=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),m=this._getCanvasCache(),g=m&&m.hit;if(this.colorKey||et.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){c.save();const b=this.getAbsoluteTransform(e).getMatrix();return c.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===e)){const b=this.getAbsoluteTransform(e).getMatrix();c.transform(b[0],b[1],b[2],b[3],b[4],b[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,o=s.getContext(),c=s.getWidth(),f=s.getHeight();o.clear(),o.drawImage(i._canvas,0,0,c,f);try{const m=o.getImageData(0,0,c,f),g=m.data,E=g.length,b=et._hexToRgb(this.colorKey);for(let A=0;A<E;A+=4)g[A+3]>t?(g[A]=b.r,g[A+1]=b.g,g[A+2]=b.b,g[A+3]=255):g[A+3]=0;o.putImageData(m,0,0)}catch(m){et.error("Unable to draw hit graph from cached scene canvas. "+m.message)}return this}hasPointerCapture(t){return H6(t,this)}setPointerCapture(t){q6(t,this)}releaseCapture(t){P0(t)}}Nt.prototype._fillFunc=RN;Nt.prototype._strokeFunc=CN;Nt.prototype._fillFuncHit=IN;Nt.prototype._strokeFuncHit=NN;Nt.prototype._centroid=!1;Nt.prototype.nodeType="Shape";ri(Nt);Nt.prototype.eventListeners={};Nt.prototype.on.call(Nt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",DN);Nt.prototype.on.call(Nt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",xN);Nt.prototype.on.call(Nt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",ON);Nt.prototype.on.call(Nt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",MN);Nt.prototype.on.call(Nt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",PN);B.addGetterSetter(Nt,"stroke",void 0,B6());B.addGetterSetter(Nt,"strokeWidth",2,Mt());B.addGetterSetter(Nt,"fillAfterStrokeEnabled",!1);B.addGetterSetter(Nt,"hitStrokeWidth","auto",lS());B.addGetterSetter(Nt,"strokeHitEnabled",!0,tl());B.addGetterSetter(Nt,"perfectDrawEnabled",!0,tl());B.addGetterSetter(Nt,"shadowForStrokeEnabled",!0,tl());B.addGetterSetter(Nt,"lineJoin");B.addGetterSetter(Nt,"lineCap");B.addGetterSetter(Nt,"miterLimit");B.addGetterSetter(Nt,"sceneFunc");B.addGetterSetter(Nt,"hitFunc");B.addGetterSetter(Nt,"dash");B.addGetterSetter(Nt,"dashOffset",0,Mt());B.addGetterSetter(Nt,"shadowColor",void 0,bd());B.addGetterSetter(Nt,"shadowBlur",0,Mt());B.addGetterSetter(Nt,"shadowOpacity",1,Mt());B.addComponentsGetterSetter(Nt,"shadowOffset",["x","y"]);B.addGetterSetter(Nt,"shadowOffsetX",0,Mt());B.addGetterSetter(Nt,"shadowOffsetY",0,Mt());B.addGetterSetter(Nt,"fillPatternImage");B.addGetterSetter(Nt,"fill",void 0,B6());B.addGetterSetter(Nt,"fillPatternX",0,Mt());B.addGetterSetter(Nt,"fillPatternY",0,Mt());B.addGetterSetter(Nt,"fillLinearGradientColorStops");B.addGetterSetter(Nt,"strokeLinearGradientColorStops");B.addGetterSetter(Nt,"fillRadialGradientStartRadius",0);B.addGetterSetter(Nt,"fillRadialGradientEndRadius",0);B.addGetterSetter(Nt,"fillRadialGradientColorStops");B.addGetterSetter(Nt,"fillPatternRepeat","repeat");B.addGetterSetter(Nt,"fillEnabled",!0);B.addGetterSetter(Nt,"strokeEnabled",!0);B.addGetterSetter(Nt,"shadowEnabled",!0);B.addGetterSetter(Nt,"dashEnabled",!0);B.addGetterSetter(Nt,"strokeScaleEnabled",!0);B.addGetterSetter(Nt,"fillPriority","color");B.addComponentsGetterSetter(Nt,"fillPatternOffset",["x","y"]);B.addGetterSetter(Nt,"fillPatternOffsetX",0,Mt());B.addGetterSetter(Nt,"fillPatternOffsetY",0,Mt());B.addComponentsGetterSetter(Nt,"fillPatternScale",["x","y"]);B.addGetterSetter(Nt,"fillPatternScaleX",1,Mt());B.addGetterSetter(Nt,"fillPatternScaleY",1,Mt());B.addComponentsGetterSetter(Nt,"fillLinearGradientStartPoint",["x","y"]);B.addComponentsGetterSetter(Nt,"strokeLinearGradientStartPoint",["x","y"]);B.addGetterSetter(Nt,"fillLinearGradientStartPointX",0);B.addGetterSetter(Nt,"strokeLinearGradientStartPointX",0);B.addGetterSetter(Nt,"fillLinearGradientStartPointY",0);B.addGetterSetter(Nt,"strokeLinearGradientStartPointY",0);B.addComponentsGetterSetter(Nt,"fillLinearGradientEndPoint",["x","y"]);B.addComponentsGetterSetter(Nt,"strokeLinearGradientEndPoint",["x","y"]);B.addGetterSetter(Nt,"fillLinearGradientEndPointX",0);B.addGetterSetter(Nt,"strokeLinearGradientEndPointX",0);B.addGetterSetter(Nt,"fillLinearGradientEndPointY",0);B.addGetterSetter(Nt,"strokeLinearGradientEndPointY",0);B.addComponentsGetterSetter(Nt,"fillRadialGradientStartPoint",["x","y"]);B.addGetterSetter(Nt,"fillRadialGradientStartPointX",0);B.addGetterSetter(Nt,"fillRadialGradientStartPointY",0);B.addComponentsGetterSetter(Nt,"fillRadialGradientEndPoint",["x","y"]);B.addGetterSetter(Nt,"fillRadialGradientEndPointX",0);B.addGetterSetter(Nt,"fillRadialGradientEndPointY",0);B.addGetterSetter(Nt,"fillPatternRotation",0);B.addGetterSetter(Nt,"fillRule",void 0,bd());B.backCompat(Nt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const VN="beforeDraw",kN="draw",aw=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],LN=aw.length;let Ad=class extends Ir{constructor(t){super(t),this.canvas=new Eh,this.hitCanvas=new oS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ot.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Ot.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ot.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ot.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Ot.prototype.remove.call(this),t&&t.parentNode&&et._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Ot.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){et.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){et.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,et.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let s=0;s<LN;s++){const o=aw[s],c=this._getIntersection({x:t.x+o.x*e,y:t.y+o.y*e}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=i[3];if(s===255){const o=et.getHitColorKey(i[0],i[1],i[2]),c=k0[o];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e,i){const s=this.getLayer(),o=t||s&&s.getCanvas();return this._fire(VN,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),Ir.prototype.drawScene.call(this,o,e,i),this._fire(kN,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Ir.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return et.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ad.prototype.nodeType="Layer";ri(Ad);B.addGetterSetter(Ad,"imageSmoothingEnabled",!0);B.addGetterSetter(Ad,"clearBeforeDraw",!0);B.addGetterSetter(Ad,"hitGraphEnabled",!0,tl());class cS extends Ad{constructor(t){super(t),this.listening(!1),et.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}cS.prototype.nodeType="FastLayer";ri(cS);let np=class extends Ir{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&et.throw("You may only add groups and shapes to groups.")}};np.prototype.nodeType="Group";ri(np);const vE=(function(){return Yf.performance&&Yf.performance.now?function(){return Yf.performance.now()}:function(){return new Date().getTime()}})();class po{constructor(t,e){this.id=po.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:vE(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=po.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=vE(),po._addAnimation(this),this}stop(){return po._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let o=0;o<s;o++)if(i[o].id===e){this.animations.splice(o,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],o=s.layers,c=s.func;s._updateFrameObject(vE());const f=o.length;let m;if(c?m=c.call(s,s.frame)!==!1:m=!0,!!m)for(let g=0;g<f;g++){const E=o[g];E._id!==void 0&&(t[E._id]=E)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=po;t.animations.length?(t._runFrames(),et.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,et.requestAnimFrame(this._animationLoop))}}po.animations=[];po.animIdCounter=0;po.animRunning=!1;const UN={node:1,duration:1,easing:1,onFinish:1,yoyo:1},zN=1,AA=2,wA=3,RA=["fill","stroke","shadowColor"];let BN=0;class GN{constructor(t,e,i,s,o,c,f){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=o-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=AA,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=wA,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===AA?this.setTime(t):this.state===wA&&this.setTime(this.duration-t)}pause(){this.state=zN,this.fire("onPause")}getTimer(){return new Date().getTime()}}class wn{constructor(t){const e=this,i=t.node,s=i._id,o=t.easing||L0.Linear,c=!!t.yoyo;let f,m;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=i,this._id=BN++;const g=i.getLayer()||(i instanceof kt.Stage?i.getLayers():null);g||et.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new po(function(){e.tween.onEnterFrame()},g),this.tween=new GN(m,function(E){e._tweenFunc(E)},o,0,1,f*1e3,c),this._addListeners(),wn.attrs[s]||(wn.attrs[s]={}),wn.attrs[s][this._id]||(wn.attrs[s][this._id]={}),wn.tweens[s]||(wn.tweens[s]={});for(m in t)UN[m]===void 0&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,s=i._id;let o,c,f,m,g;const E=wn.tweens[s][t];E&&delete wn.attrs[s][E][t];let b=i.getAttr(t);if(et._isArray(e))if(o=[],c=Math.max(e.length,b.length),t==="points"&&e.length!==b.length&&(e.length>b.length?(m=b,b=et._prepareArrayForTween(b,e,i.closed())):(f=e,e=et._prepareArrayForTween(e,b,i.closed()))),t.indexOf("fill")===0)for(let A=0;A<c;A++)if(A%2===0)o.push(e[A]-b[A]);else{const N=et.colorToRGBA(b[A]);g=et.colorToRGBA(e[A]),b[A]=N,o.push({r:g.r-N.r,g:g.g-N.g,b:g.b-N.b,a:g.a-N.a})}else for(let A=0;A<c;A++)o.push(e[A]-b[A]);else RA.indexOf(t)!==-1?(b=et.colorToRGBA(b),g=et.colorToRGBA(e),o={r:g.r-b.r,g:g.g-b.g,b:g.b-b.b,a:g.a-b.a}):o=e-b;wn.attrs[s][this._id][t]={start:b,diff:o,end:e,trueEnd:f,trueStart:m},wn.tweens[s][t]=this._id}_tweenFunc(t){const e=this.node,i=wn.attrs[e._id][this._id];let s,o,c,f,m,g,E,b;for(s in i){if(o=i[s],c=o.start,f=o.diff,b=o.end,et._isArray(c))if(m=[],E=Math.max(c.length,b.length),s.indexOf("fill")===0)for(g=0;g<E;g++)g%2===0?m.push((c[g]||0)+f[g]*t):m.push("rgba("+Math.round(c[g].r+f[g].r*t)+","+Math.round(c[g].g+f[g].g*t)+","+Math.round(c[g].b+f[g].b*t)+","+(c[g].a+f[g].a*t)+")");else for(g=0;g<E;g++)m.push((c[g]||0)+f[g]*t);else RA.indexOf(s)!==-1?m="rgba("+Math.round(c.r+f.r*t)+","+Math.round(c.g+f.g*t)+","+Math.round(c.b+f.b*t)+","+(c.a+f.a*t)+")":m=c+f*t;e.setAttr(s,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=wn.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=wn.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=wn.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete wn.tweens[t][s];delete wn.attrs[t][e],wn.tweens[t]&&(Object.keys(wn.tweens[t]).length===0&&delete wn.tweens[t],Object.keys(wn.attrs[t]).length===0&&delete wn.attrs[t])}}wn.attrs={};wn.tweens={};Ot.prototype.to=function(n){const t=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),t&&t()},new wn(n).play()};const L0={BackEaseIn(n,t,e,i){return e*(n/=i)*n*((1.70158+1)*n-1.70158)+t},BackEaseOut(n,t,e,i){return e*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+t},BackEaseInOut(n,t,e,i){let s=1.70158;return(n/=i/2)<1?e/2*(n*n*(((s*=1.525)+1)*n-s))+t:e/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},ElasticEaseIn(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t)},ElasticEaseOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i)===1?t+e:(o||(o=i*.3),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/o)+e+t)},ElasticEaseInOut(n,t,e,i,s,o){let c=0;return n===0?t:(n/=i/2)===2?t+e:(o||(o=i*(.3*1.5)),!s||s<Math.abs(e)?(s=e,c=o/4):c=o/(2*Math.PI)*Math.asin(e/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o))+t:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/o)*.5+e+t)},BounceEaseOut(n,t,e,i){return(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},BounceEaseIn(n,t,e,i){return e-L0.BounceEaseOut(i-n,0,e,i)+t},BounceEaseInOut(n,t,e,i){return n<i/2?L0.BounceEaseIn(n*2,0,e,i)*.5+t:L0.BounceEaseOut(n*2-i,0,e,i)*.5+e*.5+t},EaseIn(n,t,e,i){return e*(n/=i)*n+t},EaseOut(n,t,e,i){return-e*(n/=i)*(n-2)+t},EaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*(--n*(n-2)-1)+t},StrongEaseIn(n,t,e,i){return e*(n/=i)*n*n*n*n+t},StrongEaseOut(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},StrongEaseInOut(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},Linear(n,t,e,i){return e*n/i+t}},ip=et._assign(kt,{Util:et,Transform:Rr,Node:Ot,Container:Ir,Stage:Lv,stages:V0,Layer:Ad,FastLayer:cS,Group:np,DD:tn,Shape:Nt,shapes:k0,Animation:po,Tween:wn,Easings:L0,Context:Vv,Canvas:rS});class nc extends Nt{_sceneFunc(t){const e=kt.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=kt.getAngle(i?360-this.angle():this.angle()),o=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),m=Math.sin(Math.min(s,Math.PI/2)),g=o*(o>0?t:e),E=c*e,b=f*(f>0?t:e),A=m*(m>0?e:t);return{x:g,y:i?-1*A:b,width:E-g,height:A-b}}}nc.prototype._centroid=!0;nc.prototype.className="Arc";nc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];ri(nc);B.addGetterSetter(nc,"innerRadius",0,Mt());B.addGetterSetter(nc,"outerRadius",0,Mt());B.addGetterSetter(nc,"angle",0,Mt());B.addGetterSetter(nc,"clockwise",!1,tl());function uT(n,t,e,i,s,o,c){const f=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),m=Math.sqrt(Math.pow(s-e,2)+Math.pow(o-i,2)),g=c*f/(f+m),E=c*m/(f+m),b=e-g*(s-n),A=i-g*(o-t),N=e+E*(s-n),D=i+E*(o-t);return[b,A,N,D]}function CA(n,t){const e=n.length,i=[];for(let s=2;s<e-2;s+=2){const o=uT(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],t);isNaN(o[0])||(i.push(o[0]),i.push(o[1]),i.push(n[s]),i.push(n[s+1]),i.push(o[2]),i.push(o[3]))}return i}function HN(n){const t=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],e=[];for(const i of t){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const o=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=o*o-4*s*c;if(f>=0){const m=Math.sqrt(f);e.push((-o+m)/(2*s)),e.push((-o-m)/(2*s))}}}return e.filter(i=>i>0&&i<1).flatMap(i=>t.map(s=>{const o=1-i;return o*o*o*s[0]+3*o*o*i*s[1]+3*o*i*i*s[2]+i*i*i*s[3]}))}let ic=class extends Nt{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),i=e.length,s=this.tension(),o=this.closed(),c=this.bezier();if(!i)return;let f=0;if(t.beginPath(),t.moveTo(e[0],e[1]),s!==0&&i>4){const m=this.getTensionPoints(),g=m.length;for(f=o?0:4,o||t.quadraticCurveTo(m[0],m[1],m[2],m[3]);f<g-2;)t.bezierCurveTo(m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]);o||t.quadraticCurveTo(m[g-2],m[g-1],e[i-2],e[i-1])}else if(c)for(f=2;f<i;)t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);else for(f=2;f<i;f+=2)t.lineTo(e[f],e[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():CA(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=uT(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=uT(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),c=CA(t,i);return[s[2],s[3]].concat(c).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...HN(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);return{x:e,y:s,width:i-e,height:o-s}}};ic.prototype.className="Line";ic.prototype._attrsAffectingSize=["points","bezier","tension"];ri(ic);B.addGetterSetter(ic,"closed",!1);B.addGetterSetter(ic,"bezier",!1);B.addGetterSetter(ic,"tension",0,Mt());B.addGetterSetter(ic,"points",[],sN());const qN=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],FN=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],jN=[[1],[1,1],[1,2,1],[1,3,3,1]],IA=(n,t,e)=>{let i,s;const c=e/2;i=0;for(let f=0;f<20;f++)s=c*qN[20][f]+c,i+=FN[20][f]*KN(n,t,s);return c*i},NA=(n,t,e)=>{e===void 0&&(e=1);const i=n[0]-2*n[1]+n[2],s=t[0]-2*t[1]+t[2],o=2*n[1]-2*n[0],c=2*t[1]-2*t[0],f=4*(i*i+s*s),m=4*(i*o+s*c),g=o*o+c*c;if(f===0)return e*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(t[2]-t[0],2));const E=m/(2*f),b=g/f,A=e+E,N=b-E*E,D=A*A+N>0?Math.sqrt(A*A+N):0,k=E*E+N>0?Math.sqrt(E*E+N):0,U=E+Math.sqrt(E*E+N)!==0?N*Math.log(Math.abs((A+D)/(E+k))):0;return Math.sqrt(f)/2*(A*D-E*k+U)};function KN(n,t,e){const i=cT(1,e,n),s=cT(1,e,t),o=i*i+s*s;return Math.sqrt(o)}const cT=(n,t,e)=>{const i=e.length-1;let s,o;if(i===0)return 0;if(n===0){o=0;for(let c=0;c<=i;c++)o+=jN[i][c]*Math.pow(1-t,i-c)*Math.pow(t,c)*e[c];return o}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(e[c+1]-e[c]);return cT(n-1,t,s)}},DA=(n,t,e)=>{let i=1,s=n/t,o=(n-e(s))/t,c=0;for(;i>.001;){const f=e(s+o),m=Math.abs(n-f)/t;if(m<i)i=m,s+=o;else{const g=e(s-o),E=Math.abs(n-g)/t;E<i?(i=E,s-=o):o/=2}if(c++,c>500)break}return s};class Rn extends Nt{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Rn.parsePathData(this.data()),this.pathLength=Rn.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let s=0;s<e.length;s++){const o=e[s].command,c=e[s].points;switch(o){case"L":t.lineTo(c[0],c[1]);break;case"M":t.moveTo(c[0],c[1]);break;case"C":t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":t.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],m=c[1],g=c[2],E=c[3],b=c[4],A=c[5],N=c[6],D=c[7],k=g>E?g:E,U=g>E?1:g/E,F=g>E?E/g:1;t.translate(f,m),t.rotate(N),t.scale(U,F),t.arc(0,0,k,b,b+A,1-D),t.scale(1/U,1/F),t.rotate(-N),t.translate(-f,-m);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(m){if(m.command==="A"){const g=m.points[4],E=m.points[5],b=m.points[4]+E;let A=Math.PI/180;if(Math.abs(g-b)<A&&(A=Math.abs(g-b)),E<0)for(let N=g-A;N>b;N-=A){const D=Rn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}else for(let N=g+A;N<b;N+=A){const D=Rn.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],N,0);t.push(D.x,D.y)}}else if(m.command==="C")for(let g=0;g<=1;g+=.01){const E=Rn.getPointOnCubicBezier(g,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);t.push(E.x,E.y)}else t=t.concat(m.points)});let e=t[0],i=t[0],s=t[1],o=t[1],c,f;for(let m=0;m<t.length/2;m++)c=t[m*2],f=t[m*2+1],isNaN(c)||(e=Math.min(e,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),o=Math.max(o,f));return{x:e,y:s,width:i-e,height:o-s}}getLength(){return this.pathLength}getPointAtLength(t){return Rn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,o=e.length;if(!o)return null;for(;s<o&&t>e[s].pathLength;)t-=e[s].pathLength,++s;if(s===o)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return e[s].command==="M"?(i=e[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:e[s].start.x,y:e[s].start.y};const c=e[s],f=c.points;switch(c.command){case"L":return Rn.getPointOnLine(t,c.start.x,c.start.y,f[0],f[1]);case"C":return Rn.getPointOnCubicBezier(DA(t,Rn.getPathLength(e),k=>IA([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],k)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Rn.getPointOnQuadraticBezier(DA(t,Rn.getPathLength(e),k=>NA([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],k)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const m=f[0],g=f[1],E=f[2],b=f[3],A=f[5],N=f[6];let D=f[4];return D+=A*t/c.pathLength,Rn.getPointOnEllipticalArc(m,g,E,b,D,N)}return null}static getPointOnLine(t,e,i,s,o,c,f){c=c??e,f=f??i;const m=this.getLineLength(e,i,s,o);if(m<1e-10)return{x:e,y:i};if(s===e)return{x:c,y:f+(o>i?t:-t)};const g=(o-i)/(s-e),E=Math.sqrt(t*t/(1+g*g))*(s<e?-1:1),b=g*E;if(Math.abs(f-i-g*(c-e))<1e-10)return{x:c+E,y:f+b};const A=((c-e)*(s-e)+(f-i)*(o-i))/(m*m),N=e+A*(s-e),D=i+A*(o-i),k=this.getLineLength(c,f,N,D),U=Math.sqrt(t*t-k*k),F=Math.sqrt(U*U/(1+g*g))*(s<e?-1:1),j=g*F;return{x:N+F,y:D+j}}static getPointOnCubicBezier(t,e,i,s,o,c,f,m,g){function E(U){return U*U*U}function b(U){return 3*U*U*(1-U)}function A(U){return 3*U*(1-U)*(1-U)}function N(U){return(1-U)*(1-U)*(1-U)}const D=m*E(t)+c*b(t)+s*A(t)+e*N(t),k=g*E(t)+f*b(t)+o*A(t)+i*N(t);return{x:D,y:k}}static getPointOnQuadraticBezier(t,e,i,s,o,c,f){function m(N){return N*N}function g(N){return 2*N*(1-N)}function E(N){return(1-N)*(1-N)}const b=c*m(t)+s*g(t)+e*E(t),A=f*m(t)+o*g(t)+i*E(t);return{x:b,y:A}}static getPointOnEllipticalArc(t,e,i,s,o,c){const f=Math.cos(c),m=Math.sin(c),g={x:i*Math.cos(o),y:s*Math.sin(o)};return{x:t+(g.x*f-g.y*m),y:e+(g.x*m+g.y*f)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let b=0;b<i.length;b++)e=e.replace(new RegExp(i[b],"g"),"|"+i[b]);const s=e.split("|"),o=[],c=[];let f=0,m=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let E;for(let b=1;b<s.length;b++){let A=s[b],N=A.charAt(0);for(A=A.slice(1),c.length=0;E=g.exec(A);)c.push(E[0]);let D=[],k=N==="A"||N==="a"?0:-1;for(let U=0,F=c.length;U<F;U++){const j=c[U];if(j==="00"){D.push(0,0),k>=0&&(k+=2,k>=7&&(k-=7));continue}if(k>=0){if(k===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(j)){D.push(parseInt(j[0],10)),D.push(parseInt(j[1],10)),D.push(parseFloat(j.slice(2))),k+=3,k>=7&&(k-=7);continue}if(j==="11"||j==="10"||j==="01"){D.push(parseInt(j[0],10)),D.push(parseInt(j[1],10)),k+=2,k>=7&&(k-=7);continue}if(j==="0"||j==="1"){D.push(parseInt(j,10)),k+=1,k>=7&&(k-=7);continue}}else if(k===4){if(/^[01]\d+(?:\.\d+)?$/.test(j)){D.push(parseInt(j[0],10)),D.push(parseFloat(j.slice(1))),k+=2,k>=7&&(k-=7);continue}if(j==="0"||j==="1"){D.push(parseInt(j,10)),k+=1,k>=7&&(k-=7);continue}}const X=parseFloat(j);isNaN(X)?D.push(0):D.push(X),k+=1,k>=7&&(k-=7)}else{const X=parseFloat(j);isNaN(X)?D.push(0):D.push(X)}}for(;D.length>0&&!isNaN(D[0]);){let U="",F=[];const j=f,X=m;let W,mt,rt,V,M,L,H,G,K,z;switch(N){case"l":f+=D.shift(),m+=D.shift(),U="L",F.push(f,m);break;case"L":f=D.shift(),m=D.shift(),F.push(f,m);break;case"m":const Kt=D.shift(),Lt=D.shift();if(f+=Kt,m+=Lt,U="M",o.length>2&&o[o.length-1].command==="z"){for(let Z=o.length-2;Z>=0;Z--)if(o[Z].command==="M"){f=o[Z].points[0]+Kt,m=o[Z].points[1]+Lt;break}}F.push(f,m),N="l";break;case"M":f=D.shift(),m=D.shift(),U="M",F.push(f,m),N="L";break;case"h":f+=D.shift(),U="L",F.push(f,m);break;case"H":f=D.shift(),U="L",F.push(f,m);break;case"v":m+=D.shift(),U="L",F.push(f,m);break;case"V":m=D.shift(),U="L",F.push(f,m);break;case"C":F.push(D.shift(),D.shift(),D.shift(),D.shift()),f=D.shift(),m=D.shift(),F.push(f,m);break;case"c":F.push(f+D.shift(),m+D.shift(),f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",F.push(f,m);break;case"S":mt=f,rt=m,W=o[o.length-1],W.command==="C"&&(mt=f+(f-W.points[2]),rt=m+(m-W.points[3])),F.push(mt,rt,D.shift(),D.shift()),f=D.shift(),m=D.shift(),U="C",F.push(f,m);break;case"s":mt=f,rt=m,W=o[o.length-1],W.command==="C"&&(mt=f+(f-W.points[2]),rt=m+(m-W.points[3])),F.push(mt,rt,f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="C",F.push(f,m);break;case"Q":F.push(D.shift(),D.shift()),f=D.shift(),m=D.shift(),F.push(f,m);break;case"q":F.push(f+D.shift(),m+D.shift()),f+=D.shift(),m+=D.shift(),U="Q",F.push(f,m);break;case"T":mt=f,rt=m,W=o[o.length-1],W.command==="Q"&&(mt=f+(f-W.points[0]),rt=m+(m-W.points[1])),f=D.shift(),m=D.shift(),U="Q",F.push(mt,rt,f,m);break;case"t":mt=f,rt=m,W=o[o.length-1],W.command==="Q"&&(mt=f+(f-W.points[0]),rt=m+(m-W.points[1])),f+=D.shift(),m+=D.shift(),U="Q",F.push(mt,rt,f,m);break;case"A":V=D.shift(),M=D.shift(),L=D.shift(),H=D.shift(),G=D.shift(),K=f,z=m,f=D.shift(),m=D.shift(),U="A",F=this.convertEndpointToCenterParameterization(K,z,f,m,H,G,V,M,L);break;case"a":V=D.shift(),M=D.shift(),L=D.shift(),H=D.shift(),G=D.shift(),K=f,z=m,f+=D.shift(),m+=D.shift(),U="A",F=this.convertEndpointToCenterParameterization(K,z,f,m,H,G,V,M,L);break}o.push({command:U||N,points:F,start:{x:j,y:X},pathLength:this.calcLength(j,X,U||N,F)})}(N==="z"||N==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,i,s){let o,c,f,m;const g=Rn;switch(i){case"L":return g.getLineLength(t,e,s[0],s[1]);case"C":return IA([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return NA([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":o=0;const E=s[4],b=s[5],A=s[4]+b;let N=Math.PI/180;if(Math.abs(E-A)<N&&(N=Math.abs(E-A)),c=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],E,0),b<0)for(m=E-N;m>A;m-=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(m=E+N;m<A;m+=N)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],A,0),o+=g.getLineLength(c.x,c.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(t,e,i,s,o,c,f,m,g){const E=g*(Math.PI/180),b=Math.cos(E)*(t-i)/2+Math.sin(E)*(e-s)/2,A=-1*Math.sin(E)*(t-i)/2+Math.cos(E)*(e-s)/2,N=b*b/(f*f)+A*A/(m*m);N>1&&(f*=Math.sqrt(N),m*=Math.sqrt(N));let D=Math.sqrt((f*f*(m*m)-f*f*(A*A)-m*m*(b*b))/(f*f*(A*A)+m*m*(b*b)));o===c&&(D*=-1),isNaN(D)&&(D=0);const k=D*f*A/m,U=D*-m*b/f,F=(t+i)/2+Math.cos(E)*k-Math.sin(E)*U,j=(e+s)/2+Math.sin(E)*k+Math.cos(E)*U,X=function(H){return Math.sqrt(H[0]*H[0]+H[1]*H[1])},W=function(H,G){return(H[0]*G[0]+H[1]*G[1])/(X(H)*X(G))},mt=function(H,G){return(H[0]*G[1]<H[1]*G[0]?-1:1)*Math.acos(W(H,G))},rt=mt([1,0],[(b-k)/f,(A-U)/m]),V=[(b-k)/f,(A-U)/m],M=[(-1*b-k)/f,(-1*A-U)/m];let L=mt(V,M);return W(V,M)<=-1&&(L=Math.PI),W(V,M)>=1&&(L=0),c===0&&L>0&&(L=L-2*Math.PI),c===1&&L<0&&(L=L+2*Math.PI),[F,j,f,m,rt,L,E,c]}}Rn.prototype.className="Path";Rn.prototype._attrsAffectingSize=["data"];ri(Rn);B.addGetterSetter(Rn,"data");class wd extends ic{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,i=this.points();let s=i;const o=this.tension()!==0&&i.length>4;o&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let m,g;if(o){const A=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],N=Rn.calcLength(s[s.length-4],s[s.length-3],"C",A),D=Rn.getPointOnQuadraticBezier(Math.min(1,1-c/N),A[0],A[1],A[2],A[3],A[4],A[5]);m=i[f-2]-D.x,g=i[f-1]-D.y}else m=i[f-2]-i[f-4],g=i[f-1]-i[f-3];const E=(Math.atan2(g,m)+e)%e,b=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[f-2],i[f-1]),t.rotate(E),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),o?(m=(s[0]+s[2])/2-i[0],g=(s[1]+s[3])/2-i[1]):(m=i[2]-i[0],g=i[3]-i[1]),t.rotate((Math.atan2(-g,-m)+e)%e),t.moveTo(0,0),t.lineTo(-c,b/2),t.lineTo(-c,-b/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}wd.prototype.className="Arrow";ri(wd);B.addGetterSetter(wd,"pointerLength",10,Mt());B.addGetterSetter(wd,"pointerWidth",10,Mt());B.addGetterSetter(wd,"pointerAtBeginning",!1);B.addGetterSetter(wd,"pointerAtEnding",!0);let Ip=class extends Nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Ip.prototype._centroid=!0;Ip.prototype.className="Circle";Ip.prototype._attrsAffectingSize=["radius"];ri(Ip);B.addGetterSetter(Ip,"radius",0,Mt());class Bh extends Nt{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Bh.prototype.className="Ellipse";Bh.prototype._centroid=!0;Bh.prototype._attrsAffectingSize=["radiusX","radiusY"];ri(Bh);B.addComponentsGetterSetter(Bh,"radius",["x","y"]);B.addGetterSetter(Bh,"radiusX",0,Mt());B.addGetterSetter(Bh,"radiusY",0,Mt());let el=class rw extends Nt{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),o=this.attrs.image;let c;if(o){const f=this.attrs.cropWidth,m=this.attrs.cropHeight;f&&m?c=[o,this.cropX(),this.cropY(),f,m,0,0,e,i]:c=[o,0,0,e,i]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),o&&(s&&t.clip(),t.drawImage.apply(t,c))}_hitFunc(t){const e=this.width(),i=this.height(),s=this.cornerRadius();t.beginPath(),s?et.drawRoundedRectPath(t,e,i,s):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return(i=(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:0}getHeight(){var t,e,i;return(i=(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}static fromURL(t,e,i=null){const s=et.createImageElement();s.onload=function(){const o=new rw({image:s});e(o)},s.onerror=i,s.crossOrigin="Anonymous",s.src=t}};el.prototype.className="Image";el.prototype._attrsAffectingSize=["image"];ri(el);B.addGetterSetter(el,"cornerRadius",0,kv(4));B.addGetterSetter(el,"image");B.addComponentsGetterSetter(el,"crop",["x","y","width","height"]);B.addGetterSetter(el,"cropX",0,Mt());B.addGetterSetter(el,"cropY",0,Mt());B.addGetterSetter(el,"cropWidth",0,Mt());B.addGetterSetter(el,"cropHeight",0,Mt());const ow=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],YN="Change.konva",QN="none",hT="up",fT="right",dT="down",mT="left",XN=ow.length;class hS extends np{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i;const s=function(){e._sync()};for(i=0;i<XN;i++)t.on(ow[i]+YN,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,s,o,c,f,m,g;if(t&&e){switch(i=t.width(),s=t.height(),o=e.pointerDirection(),c=e.pointerWidth(),g=e.pointerHeight(),f=0,m=0,o){case hT:f=i/2,m=-1*g;break;case fT:f=i+c,m=s/2;break;case dT:f=i/2,m=s+g;break;case mT:f=-1*c,m=s/2;break}e.setAttrs({x:-1*f,y:-1*m,width:i,height:s}),t.setAttrs({x:-1*f,y:-1*m})}}}hS.prototype.className="Label";ri(hS);class Rd extends Nt{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),o=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let m=0,g=0,E=0,b=0;typeof f=="number"?m=g=E=b=Math.min(f,e/2,i/2):(m=Math.min(f[0]||0,e/2,i/2),g=Math.min(f[1]||0,e/2,i/2),b=Math.min(f[2]||0,e/2,i/2),E=Math.min(f[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(m,0),s===hT&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+o)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),s===fT&&(t.lineTo(e,(i-c)/2),t.lineTo(e+o,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i-b),t.arc(e-b,i-b,b,0,Math.PI/2,!1),s===dT&&(t.lineTo((e+o)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-o)/2,i)),t.lineTo(E,i),t.arc(E,i-E,E,Math.PI/2,Math.PI,!1),s===mT&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-c)/2)),t.lineTo(0,m),t.arc(m,m,m,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),o=this.pointerDirection(),c=this.width(),f=this.height();return o===hT?(e-=s,f+=s):o===dT?f+=s:o===mT?(t-=i*1.5,c+=i):o===fT&&(c+=i*1.5),{x:t,y:e,width:c,height:f}}}Rd.prototype.className="Tag";ri(Rd);B.addGetterSetter(Rd,"pointerDirection",QN);B.addGetterSetter(Rd,"pointerWidth",0,Mt());B.addGetterSetter(Rd,"pointerHeight",0,Mt());B.addGetterSetter(Rd,"cornerRadius",0,kv(4));let A_=class extends Nt{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?et.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}};A_.prototype.className="Rect";ri(A_);B.addGetterSetter(A_,"cornerRadius",0,kv(4));class Gh extends Nt{_sceneFunc(t){const e=this._getPoints(),i=this.radius(),s=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)et.drawRoundedPolygonPath(t,e,s,i,o);else{t.moveTo(e[0].x,e[0].y);for(let c=1;c<e.length;c++)t.lineTo(e[c].x,e[c].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(s*2*Math.PI/t),y:-1*e*Math.cos(s*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].x,s=t[0].y,o=t[0].y;return t.forEach(c=>{e=Math.min(e,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),o=Math.max(o,c.y)}),{x:e,y:s,width:i-e,height:o-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Gh.prototype.className="RegularPolygon";Gh.prototype._centroid=!0;Gh.prototype._attrsAffectingSize=["radius"];ri(Gh);B.addGetterSetter(Gh,"radius",0,Mt());B.addGetterSetter(Gh,"sides",0,Mt());B.addGetterSetter(Gh,"cornerRadius",0,kv(4));const xA=Math.PI*2;class Cd extends Nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,xA,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),xA,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Cd.prototype.className="Ring";Cd.prototype._centroid=!0;Cd.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ri(Cd);B.addGetterSetter(Cd,"innerRadius",0,Mt());B.addGetterSetter(Cd,"outerRadius",0,Mt());class nu extends Nt{constructor(t){super(t),this._updated=!0,this.anim=new po(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+0],m=o[s+1],g=o[s+2],E=o[s+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,E),t.closePath(),t.fillStrokeShape(this)),b)if(c){const A=c[e],N=i*2;t.drawImage(b,f,m,g,E,A[N+0],A[N+1],g,E)}else t.drawImage(b,f,m,g,E,0,0,g,E)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=i*4,o=this.animations()[e],c=this.frameOffsets(),f=o[s+2],m=o[s+3];if(t.beginPath(),c){const g=c[e],E=i*2;t.rect(g[E+0],g[E+1],f,m)}else t.rect(0,0,f,m);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],o=s.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}nu.prototype.className="Sprite";ri(nu);B.addGetterSetter(nu,"animation");B.addGetterSetter(nu,"animations");B.addGetterSetter(nu,"frameOffsets");B.addGetterSetter(nu,"image");B.addGetterSetter(nu,"frameIndex",0,Mt());B.addGetterSetter(nu,"frameRate",17,Mt());B.backCompat(nu,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Hh extends Nt{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let o=1;o<s*2;o++){const c=o%2===0?i:e,f=c*Math.sin(o*Math.PI/s),m=-1*c*Math.cos(o*Math.PI/s);t.lineTo(f,m)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Hh.prototype.className="Star";Hh.prototype._centroid=!0;Hh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ri(Hh);B.addGetterSetter(Hh,"numPoints",5,Mt());B.addGetterSetter(Hh,"innerRadius",0,Mt());B.addGetterSetter(Hh,"outerRadius",0,Mt());function yh(n){return[...n].reduce((t,e,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const o=s[i+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(e+o),s[i+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const Dm="auto",JN="center",lw="inherit",l0="justify",WN="Change.konva",ZN="2d",OA="-",uw="left",$N="text",tD="Text",eD="top",nD="bottom",MA="middle",cw="normal",iD="px ",T1=" ",sD="right",PA="rtl",aD="word",rD="char",VA="none",EE="",hw=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],oD=hw.length;function lD(n){return n.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}let S1;function TE(){return S1||(S1=et.createCanvasElement().getContext(ZN),S1)}function uD(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function cD(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function hD(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let Nn=class extends Nt{constructor(t){super(hD(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<oD;e++)this.on(hw[e]+WN,this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;const s=this.textArr,o=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),m=this.lineHeight()*f,g=this.verticalAlign(),E=this.direction(),b=0,A=this.align(),N=this.getWidth(),D=this.letterSpacing(),k=this.charRenderFunc(),U=this.fill(),F=this.textDecoration(),j=this.underlineOffset(),X=F.indexOf("underline")!==-1,W=F.indexOf("line-through")!==-1,mt;E=E===lw?t.direction:E;let rt=m/2,V=MA;if(!kt.legacyTextRendering){const M=this.measureSize("M");V="alphabetic";const L=(e=M.fontBoundingBoxAscent)!==null&&e!==void 0?e:M.actualBoundingBoxAscent,H=(i=M.fontBoundingBoxDescent)!==null&&i!==void 0?i:M.actualBoundingBoxDescent;rt=(L-H)/2+m/2}for(E===PA&&t.setAttr("direction",E),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",V),t.setAttr("textAlign",uw),g===MA?b=(this.getHeight()-o*m-c*2)/2:g===nD&&(b=this.getHeight()-o*m-c*2),t.translate(c,b+c),mt=0;mt<o;mt++){let M=0,L=0;const H=s[mt],G=H.text,K=H.width,z=H.lastInParagraph;if(t.save(),A===sD?M+=N-K-c*2:A===JN&&(M+=(N-K-c*2)/2),X){t.save(),t.beginPath();const Lt=j??(kt.legacyTextRendering?Math.round(f/2):Math.round(f/4)),Z=M,Tt=rt+L+Lt;t.moveTo(Z,Tt);const Et=A===l0&&!z?N-c*2:K;t.lineTo(Z+Math.round(Et),Tt),t.lineWidth=f/15;const Bt=this._getLinearGradient();t.strokeStyle=Bt||U,t.stroke(),t.restore()}const Kt=M;if(E!==PA&&(D!==0||A===l0||k)){const Lt=G.split(" ").length-1,Z=yh(G);for(let Tt=0;Tt<Z.length;Tt++){const Et=Z[Tt];if(Et===" "&&!z&&A===l0&&(M+=(N-c*2-K)/Lt),this._partialTextX=M,this._partialTextY=rt+L,this._partialText=Et,k){t.save();const Qt=s.slice(0,mt).reduce((ut,It)=>ut+yh(It.text).length,0),q=Tt+Qt;k({char:Et,index:q,x:M,y:rt+L,lineIndex:mt,column:Tt,isLastInLine:z,width:this.measureSize(Et).width,context:t})}t.fillStrokeShape(this),k&&t.restore(),M+=this.measureSize(Et).width+D}}else D!==0&&t.setAttr("letterSpacing",`${D}px`),this._partialTextX=M,this._partialTextY=rt+L,this._partialText=G,t.fillStrokeShape(this);if(W){t.save(),t.beginPath();const Lt=kt.legacyTextRendering?0:-Math.round(f/4),Z=Kt;t.moveTo(Z,rt+L+Lt);const Tt=A===l0&&!z?N-c*2:K;t.lineTo(Z+Math.round(Tt),rt+L+Lt),t.lineWidth=f/15;const Et=this._getLinearGradient();t.strokeStyle=Et||U,t.stroke(),t.restore()}t.restore(),o>1&&(rt+=m)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=et._isString(t)?t:t==null?"":t+"";return this._setAttr($N,e),this}getWidth(){return this.attrs.width===Dm||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Dm||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,o,c,f,m,g,E,b,A;let N=TE(),D=this.fontSize(),k;N.save(),N.font=this._getContextFont(),k=N.measureText(t),N.restore();const U=D/100;return{actualBoundingBoxAscent:(e=k.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*U,actualBoundingBoxDescent:(i=k.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=k.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*U,actualBoundingBoxRight:(o=k.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*U,alphabeticBaseline:(c=k.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=k.emHeightAscent)!==null&&f!==void 0?f:100*U,emHeightDescent:(m=k.emHeightDescent)!==null&&m!==void 0?m:-20*U,fontBoundingBoxAscent:(g=k.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*U,fontBoundingBoxDescent:(E=k.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*U,hangingBaseline:(b=k.hangingBaseline)!==null&&b!==void 0?b:72.80000305175781*U,ideographicBaseline:(A=k.ideographicBaseline)!==null&&A!==void 0?A:-21*U,width:k.width,height:D}}_getContextFont(){return this.fontStyle()+T1+this.fontVariant()+T1+(this.fontSize()+iD)+lD(this.fontFamily())}_addTextLine(t){this.align()===l0&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return TE().measureText(t).width+e*i}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),i=0,s=this.lineHeight()*e,o=this.attrs.width,c=this.attrs.height,f=o!==Dm&&o!==void 0,m=c!==Dm&&c!==void 0,g=this.padding(),E=o-g*2,b=c-g*2,A=0,N=this.wrap(),D=N!==VA,k=N!==rD&&D,U=this.ellipsis();this.textArr=[],TE().font=this._getContextFont();const F=U?this._getTextWidth(EE):0;for(let j=0,X=t.length;j<X;++j){let W=t[j],mt=this._getTextWidth(W);if(f&&mt>E)for(;W.length>0;){let rt=0,V=yh(W).length,M="",L=0;for(;rt<V;){const H=rt+V>>>1,G=yh(W),K=G.slice(0,H+1).join(""),z=this._getTextWidth(K);(U&&m&&A+s>b?z+F:z)<=E?(rt=H+1,M=K,L=z):V=H}if(M){if(k){const K=yh(W),z=yh(M),Kt=K[z.length],Lt=Kt===T1||Kt===OA;let Z;if(Lt&&L<=E)Z=z.length;else{const Tt=z.lastIndexOf(T1),Et=z.lastIndexOf(OA);Z=Math.max(Tt,Et)+1}Z>0&&(rt=Z,M=K.slice(0,rt).join(""),L=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,L),A+=s,this._shouldHandleEllipsis(A)){this._tryToAddEllipsisToLastLine();break}if(W=yh(W).slice(rt).join("").trimLeft(),W.length>0&&(mt=this._getTextWidth(W),mt<=E)){this._addTextLine(W),A+=s,i=Math.max(i,mt);break}}else break}else this._addTextLine(W),A+=s,i=Math.max(i,mt),this._shouldHandleEllipsis(A)&&j<X-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),m&&A+s>b)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,o=s!==Dm&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==VA)||o&&t+i>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==Dm&&t!==void 0,i=this.padding(),s=t-i*2,o=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!o||(e&&(this._getTextWidth(c.text+EE)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+EE))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};Nn.prototype._fillFunc=uD;Nn.prototype._strokeFunc=cD;Nn.prototype.className=tD;Nn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];ri(Nn);B.overWriteSetter(Nn,"width",lS());B.overWriteSetter(Nn,"height",lS());B.addGetterSetter(Nn,"direction",lw);B.addGetterSetter(Nn,"fontFamily","Arial");B.addGetterSetter(Nn,"fontSize",12,Mt());B.addGetterSetter(Nn,"fontStyle",cw);B.addGetterSetter(Nn,"fontVariant",cw);B.addGetterSetter(Nn,"padding",0,Mt());B.addGetterSetter(Nn,"align",uw);B.addGetterSetter(Nn,"verticalAlign",eD);B.addGetterSetter(Nn,"lineHeight",1,Mt());B.addGetterSetter(Nn,"wrap",aD);B.addGetterSetter(Nn,"ellipsis",!1,tl());B.addGetterSetter(Nn,"letterSpacing",0,Mt());B.addGetterSetter(Nn,"text","",bd());B.addGetterSetter(Nn,"textDecoration","");B.addGetterSetter(Nn,"underlineOffset",void 0,Mt());B.addGetterSetter(Nn,"charRenderFunc",void 0);const fD="",fw="normal";function dw(n){n.fillText(this.partialText,0,0)}function mw(n){n.strokeText(this.partialText,0,0)}class $i extends Nt{constructor(t){super(t),this.dummyCanvas=et.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Rn.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t>e?null:Rn.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Rn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),o=this.glyphInfo,c=e.indexOf("underline")!==-1,f=e.indexOf("line-through")!==-1;c&&t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),this.partialText=o[m].text,t.fillStrokeShape(this),c&&(m===0&&t.moveTo(0,s/2+1),t.lineTo(o[m].width,s/2+1)),t.restore()}if(c&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),f){t.beginPath();for(let m=0;m<o.length;m++){t.save();const g=o[m].p0;t.translate(g.x,g.y),t.rotate(o[m].rotation),m===0&&t.moveTo(0,0),t.lineTo(o[m].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Nn.prototype.setText.call(this,t)}_getContextFont(){return Nn.prototype._getContextFont.call(this)}_getTextSize(t){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=yh(this.text()),e=[];let i=0;for(let b=0;b<t.length;b++)e.push({char:t[b],width:this._getTextSize(t[b]).width}),i+=e[b].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-m/2)),c==="right"&&(g=Math.max(0,this.pathLength-m));let E=g;for(let b=0;b<e.length;b++){const A=this._getPointAtLength(E);if(!A)return;const N=e[b].char;let D=e[b].width+o;if(N===" "&&c==="justify"){const W=this.text().split(" ").length-1;D+=(this.pathLength-m)/W}const k=this._getPointAtLength(E+D);if(!k)return;const U=Rn.getLineLength(A.x,A.y,k.x,k.y);let F=0;if(f)try{F=f(e[b-1].char,N)*this.fontSize()}catch{F=0}A.x+=F,k.x+=F,this.textWidth+=F;const j=Rn.getPointOnLine(F+U/2,A.x,A.y,k.x,k.y),X=Math.atan2(k.y-A.y,k.x-A.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:t[b],rotation:X,p0:A,p1:k,width:U}),E+=D}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,i=t[0]||0,s=t[1]||0,o=t[1]||0,c,f;for(let g=0;g<t.length/2;g++)c=t[g*2],f=t[g*2+1],e=Math.min(e,c),i=Math.max(i,c),s=Math.min(s,f),o=Math.max(o,f);const m=this.fontSize();return{x:e-m/2,y:s-m/2,width:i-e+m,height:o-s+m}}destroy(){return et.releaseCanvas(this.dummyCanvas),super.destroy()}}$i.prototype._fillFunc=dw;$i.prototype._strokeFunc=mw;$i.prototype._fillFuncHit=dw;$i.prototype._strokeFuncHit=mw;$i.prototype.className="TextPath";$i.prototype._attrsAffectingSize=["text","fontSize","data"];ri($i);B.addGetterSetter($i,"data");B.addGetterSetter($i,"fontFamily","Arial");B.addGetterSetter($i,"fontSize",12,Mt());B.addGetterSetter($i,"fontStyle",fw);B.addGetterSetter($i,"align","left");B.addGetterSetter($i,"letterSpacing",0,Mt());B.addGetterSetter($i,"textBaseline","middle");B.addGetterSetter($i,"fontVariant",fw);B.addGetterSetter($i,"text",fD);B.addGetterSetter($i,"textDecoration","");B.addGetterSetter($i,"kerningFunc",void 0);const pw="tr-konva",dD=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${pw}`).join(" "),kA="nodesRect",mD=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],pD={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},gD="ontouchstart"in kt._global;function _D(n,t,e){if(n==="rotater")return e;t+=et.degToRad(pD[n]||0);const i=(et.radToDeg(t)%360+360)%360;return et._inRange(i,315+22.5,360)||et._inRange(i,0,22.5)?"ns-resize":et._inRange(i,45-22.5,45+22.5)?"nesw-resize":et._inRange(i,90-22.5,90+22.5)?"ew-resize":et._inRange(i,135-22.5,135+22.5)?"nwse-resize":et._inRange(i,180-22.5,180+22.5)?"ns-resize":et._inRange(i,225-22.5,225+22.5)?"nesw-resize":et._inRange(i,270-22.5,270+22.5)?"ew-resize":et._inRange(i,315-22.5,315+22.5)?"nwse-resize":(et.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const $1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function yD(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function gw(n,t,e){const i=e.x+(n.x-e.x)*Math.cos(t)-(n.y-e.y)*Math.sin(t),s=e.y+(n.x-e.x)*Math.sin(t)+(n.y-e.y)*Math.cos(t);return{...n,rotation:n.rotation+t,x:i,y:s}}function vD(n,t){const e=yD(n);return gw(n,t,e)}function ED(n,t,e){let i=t;for(let s=0;s<n.length;s++){const o=kt.getAngle(n[s]),c=Math.abs(o-t)%(Math.PI*2);Math.min(c,Math.PI*2-c)<e&&(i=o)}return i}let pT=0;class Be extends np{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(dD,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return et.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return pw+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(s=>s.isAncestorOf(this)?(et.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,o)}s.on(mD.map(c=>c+`.${this._getEventNamespace()}`).join(" "),o),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;const s=t.getAbsolutePosition(),o=s.x-e.x,c=s.y-e.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const m=f.getAbsolutePosition();f.setAbsolutePosition({x:m.x+o,y:m.y+c}),f.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(kA),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(kA,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(i),c=t.getAbsolutePosition(i),f=s.x*o.x-t.offsetX()*o.x,m=s.y*o.y-t.offsetY()*o.y,g=(kt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),E={x:c.x+f*Math.cos(g)+m*Math.sin(-g),y:c.y+m*Math.cos(g)+f*Math.sin(g),width:s.width*o.x,height:s.height*o.y,rotation:g};return gw(E,-kt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const E=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=[{x:E.x,y:E.y},{x:E.x+E.width,y:E.y},{x:E.x+E.width,y:E.y+E.height},{x:E.x,y:E.y+E.height}],A=g.getAbsoluteTransform();b.forEach(function(N){const D=A.point(N);e.push(D)})});const i=new Rr;i.rotate(-kt.getAngle(this.rotation()));let s=1/0,o=1/0,c=-1/0,f=-1/0;e.forEach(function(g){const E=i.point(g);s===void 0&&(s=c=E.x,o=f=E.y),s=Math.min(s,E.x),o=Math.min(o,E.y),c=Math.max(c,E.x),f=Math.max(f,E.y)}),i.invert();const m=i.point({x:s,y:o});return{x:m.x,y:m.y,width:c-s,height:f-o,rotation:kt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),$1.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new A_({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:gD?10:"auto"}),i=this;e.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),e.on("dragstart",s=>{e.stopDrag(),s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),e.on("mouseenter",()=>{const s=kt.getAngle(this.rotation()),o=this.rotateAnchorCursor(),c=_D(t,s,o);e.getStage().content&&(e.getStage().content.style.cursor=c),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new Nt({name:"back",width:0,height:0,sceneFunc(e,i){const s=i.getParent(),o=s.padding(),c=i.width(),f=i.height();if(e.beginPath(),e.rect(-o,-o,c+o*2,f+o*2),s.rotateEnabled()&&s.rotateLineVisible()){const m=s.rotateAnchorAngle(),g=s.rotateAnchorOffset(),E=et.degToRad(m),b=Math.sin(E),A=-Math.cos(E),N=c/2,D=f/2;let k=1/0;A<0?k=Math.min(k,-D/A):A>0&&(k=Math.min(k,(f-D)/A)),b<0?k=Math.min(k,-N/b):b>0&&(k=Math.min(k,(c-N)/b));const U=N+b*k,F=D+A*k,j=et._sign(f),X=U+b*g*j,W=F+A*g*j;e.moveTo(U,F),e.lineTo(X,W)}e.fillStrokeShape(i)},hitFunc:(e,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();e.beginPath(),e.rect(-s,-s,i.width()+s*2,i.height()+s*2),e.fillStrokeShape(i)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/o),this.cos=Math.abs(i/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},pT++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(m=>{m._fire("transformstart",{evt:t.evt,target:m})})}_handleMouseMove(t){let e,i,s;const o=this.findOne("."+this._movingAnchorName),c=o.getStage();c.setPointersPositions(t);const f=c.getPointerPosition();let m={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(m=this.anchorDragBoundFunc()(g,m,t)),o.setAbsolutePosition(m);const E=o.getAbsolutePosition();if(g.x===E.x&&g.y===E.y)return;if(this._movingAnchorName==="rotater"){const j=this._getNodeRect();e=o.x()-j.width/2,i=-o.y()+j.height/2;const X=kt.getAngle(this.rotateAnchorAngle());let W=Math.atan2(-i,e)+Math.PI/2-X;j.height<0&&(W-=Math.PI);const rt=kt.getAngle(this.rotation())+W,V=kt.getAngle(this.rotationSnapTolerance()),L=ED(this.rotationSnaps(),rt,V)-j.rotation,H=vD(j,L);this._fitNodesInto(H,t);return}const b=this.shiftBehavior();let A;b==="inverted"?A=this.keepRatio()&&!t.shiftKey:b==="none"?A=this.keepRatio():A=this.keepRatio()||t.shiftKey;let N=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(j.x-o.x(),2)+Math.pow(j.y-o.y(),2));const X=this.findOne(".top-left").x()>j.x?-1:1,W=this.findOne(".top-left").y()>j.y?-1:1;e=s*this.cos*X,i=s*this.sin*W,this.findOne(".top-left").x(j.x-e),this.findOne(".top-left").y(j.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(o.x()-j.x,2)+Math.pow(j.y-o.y(),2));const X=this.findOne(".top-right").x()<j.x?-1:1,W=this.findOne(".top-right").y()>j.y?-1:1;e=s*this.cos*X,i=s*this.sin*W,this.findOne(".top-right").x(j.x+e),this.findOne(".top-right").y(j.y-i)}var D=o.position();this.findOne(".top-left").y(D.y),this.findOne(".bottom-right").x(D.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(j.x-o.x(),2)+Math.pow(o.y()-j.y,2));const X=j.x<o.x()?-1:1,W=o.y()<j.y?-1:1;e=s*this.cos*X,i=s*this.sin*W,o.x(j.x-e),o.y(j.y+i)}D=o.position(),this.findOne(".top-left").x(D.x),this.findOne(".bottom-right").y(D.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(A){const j=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(o.x()-j.x,2)+Math.pow(o.y()-j.y,2));const X=this.findOne(".bottom-right").x()<j.x?-1:1,W=this.findOne(".bottom-right").y()<j.y?-1:1;e=s*this.cos*X,i=s*this.sin*W,this.findOne(".bottom-right").x(j.x+e),this.findOne(".bottom-right").y(j.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(N=this.centeredScaling()||t.altKey,N){const j=this.findOne(".top-left"),X=this.findOne(".bottom-right"),W=j.x(),mt=j.y(),rt=this.getWidth()-X.x(),V=this.getHeight()-X.y();X.move({x:-W,y:-mt}),j.move({x:rt,y:V})}const k=this.findOne(".top-left").getAbsolutePosition();e=k.x,i=k.y;const U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),F=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:U,height:F,rotation:kt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();pT--,this._fire("transformend",{evt:t,target:i}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),i&&this._nodes.forEach(s=>{var o;s._fire("transformend",{evt:t,target:s}),(o=s.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),s=1;if(et._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(et._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const o=new Rr;if(o.rotate(kt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const A=o.point({x:-this.padding()*2,y:0});t.x+=A.x,t.y+=A.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const A=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const A=o.point({x:0,y:-this.padding()*2});t.x+=A.x,t.y+=A.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const A=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const A=this.boundBoxFunc()(i,t);A?t=A:et.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new Rr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const m=new Rr,g=t.width/c,E=t.height/c;this.flipEnabled()===!1?(m.translate(t.x,t.y),m.rotate(t.rotation),m.translate(t.width<0?t.width:0,t.height<0?t.height:0),m.scale(Math.abs(g),Math.abs(E))):(m.translate(t.x,t.y),m.rotate(t.rotation),m.scale(g,E));const b=m.multiply(f.invert());this._nodes.forEach(A=>{var N;if(!A.getStage())return;const D=A.getParent().getAbsoluteTransform(),k=A.getTransform().copy();k.translate(A.offsetX(),A.offsetY());const U=new Rr;U.multiply(D.copy().invert()).multiply(b).multiply(D).multiply(k);const F=U.decompose();A.setAttrs(F),(N=A.getLayer())===null||N===void 0||N.batchDraw()}),this.rotation(et._getRotation(t.rotation)),this._nodes.forEach(A=>{this._fire("transform",{evt:e,target:A}),A._fire("transform",{evt:e,target:A})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(et._getRotation(e.rotation));const i=e.width,s=e.height,o=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),m=this.anchorSize(),g=this.find("._anchor");g.forEach(rt=>{rt.setAttrs({width:m,height:m,offsetX:m/2,offsetY:m/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:m/2+f,offsetY:m/2+f,visible:c&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:m/2+f,visible:c&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:m/2-f,offsetY:m/2+f,visible:c&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:m/2+f,visible:c&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:m/2-f,visible:c&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:m/2+f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:m/2-f,visible:c&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:m/2-f,offsetY:m/2-f,visible:c&&o.indexOf("bottom-right")>=0});const E=this.rotateAnchorAngle(),b=this.rotateAnchorOffset(),A=et.degToRad(E),N=Math.sin(A),D=-Math.cos(A),k=i/2,U=s/2;let F=1/0;D<0?F=Math.min(F,-U/D):D>0&&(F=Math.min(F,(s-U)/D)),N<0?F=Math.min(F,-k/N):N>0&&(F=Math.min(F,(i-k)/N));const j=k+N*F,X=U+D*F,W=et._sign(s);this._batchChangeChild(".rotater",{x:j+N*b*W,y:X+D*b*W-f*D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(rt=>rt.draggable()),x:0,y:0});const mt=this.anchorStyleFunc();mt&&g.forEach(rt=>{mt(rt)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),np.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Ot.prototype.toObject.call(this)}clone(t){return Ot.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Be.isTransforming=()=>pT>0;function TD(n){return n instanceof Array||et.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(t){$1.indexOf(t)===-1&&et.warn("Unknown anchor name: "+t+". Available names are: "+$1.join(", "))}),n||[]}Be.prototype.className="Transformer";ri(Be);B.addGetterSetter(Be,"enabledAnchors",$1,TD);B.addGetterSetter(Be,"flipEnabled",!0,tl());B.addGetterSetter(Be,"resizeEnabled",!0);B.addGetterSetter(Be,"anchorSize",10,Mt());B.addGetterSetter(Be,"rotateEnabled",!0);B.addGetterSetter(Be,"rotateLineVisible",!0);B.addGetterSetter(Be,"rotationSnaps",[]);B.addGetterSetter(Be,"rotateAnchorOffset",50,Mt());B.addGetterSetter(Be,"rotateAnchorAngle",0,Mt());B.addGetterSetter(Be,"rotateAnchorCursor","crosshair");B.addGetterSetter(Be,"rotationSnapTolerance",5,Mt());B.addGetterSetter(Be,"borderEnabled",!0);B.addGetterSetter(Be,"anchorStroke","rgb(0, 161, 255)");B.addGetterSetter(Be,"anchorStrokeWidth",1,Mt());B.addGetterSetter(Be,"anchorFill","white");B.addGetterSetter(Be,"anchorCornerRadius",0,Mt());B.addGetterSetter(Be,"borderStroke","rgb(0, 161, 255)");B.addGetterSetter(Be,"borderStrokeWidth",1,Mt());B.addGetterSetter(Be,"borderDash");B.addGetterSetter(Be,"keepRatio",!0);B.addGetterSetter(Be,"shiftBehavior","default");B.addGetterSetter(Be,"centeredScaling",!1);B.addGetterSetter(Be,"ignoreStroke",!1);B.addGetterSetter(Be,"padding",0,Mt());B.addGetterSetter(Be,"nodes");B.addGetterSetter(Be,"node");B.addGetterSetter(Be,"boundBoxFunc");B.addGetterSetter(Be,"anchorDragBoundFunc");B.addGetterSetter(Be,"anchorStyleFunc");B.addGetterSetter(Be,"shouldOverdrawWholeArea",!1);B.addGetterSetter(Be,"useSingleNodeRotation",!0);B.backCompat(Be,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class sc extends Nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,kt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}sc.prototype.className="Wedge";sc.prototype._centroid=!0;sc.prototype._attrsAffectingSize=["radius"];ri(sc);B.addGetterSetter(sc,"radius",0,Mt());B.addGetterSetter(sc,"angle",0,Mt());B.addGetterSetter(sc,"clockwise",!1);B.backCompat(sc,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function LA(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const SD=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],bD=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function AD(n,t){const e=n.data,i=n.width,s=n.height;let o,c,f,m,g,E,b,A,N,D,k,U,F,j,X,W,mt,rt,V,M;const L=t+t+1,H=i-1,G=s-1,K=t+1,z=K*(K+1)/2,Kt=new LA,Lt=SD[t],Z=bD[t];let Tt=null,Et=Kt,Bt=null,Qt=null;for(let q=1;q<L;q++)Et=Et.next=new LA,q===K&&(Tt=Et);Et.next=Kt,f=c=0;for(let q=0;q<s;q++){U=F=j=X=m=g=E=b=0,A=K*(W=e[c]),N=K*(mt=e[c+1]),D=K*(rt=e[c+2]),k=K*(V=e[c+3]),m+=z*W,g+=z*mt,E+=z*rt,b+=z*V,Et=Kt;for(let ut=0;ut<K;ut++)Et.r=W,Et.g=mt,Et.b=rt,Et.a=V,Et=Et.next;for(let ut=1;ut<K;ut++)o=c+((H<ut?H:ut)<<2),m+=(Et.r=W=e[o])*(M=K-ut),g+=(Et.g=mt=e[o+1])*M,E+=(Et.b=rt=e[o+2])*M,b+=(Et.a=V=e[o+3])*M,U+=W,F+=mt,j+=rt,X+=V,Et=Et.next;Bt=Kt,Qt=Tt;for(let ut=0;ut<i;ut++)e[c+3]=V=b*Lt>>Z,V!==0?(V=255/V,e[c]=(m*Lt>>Z)*V,e[c+1]=(g*Lt>>Z)*V,e[c+2]=(E*Lt>>Z)*V):e[c]=e[c+1]=e[c+2]=0,m-=A,g-=N,E-=D,b-=k,A-=Bt.r,N-=Bt.g,D-=Bt.b,k-=Bt.a,o=f+((o=ut+t+1)<H?o:H)<<2,U+=Bt.r=e[o],F+=Bt.g=e[o+1],j+=Bt.b=e[o+2],X+=Bt.a=e[o+3],m+=U,g+=F,E+=j,b+=X,Bt=Bt.next,A+=W=Qt.r,N+=mt=Qt.g,D+=rt=Qt.b,k+=V=Qt.a,U-=W,F-=mt,j-=rt,X-=V,Qt=Qt.next,c+=4;f+=i}for(let q=0;q<i;q++){F=j=X=U=g=E=b=m=0,c=q<<2,A=K*(W=e[c]),N=K*(mt=e[c+1]),D=K*(rt=e[c+2]),k=K*(V=e[c+3]),m+=z*W,g+=z*mt,E+=z*rt,b+=z*V,Et=Kt;for(let It=0;It<K;It++)Et.r=W,Et.g=mt,Et.b=rt,Et.a=V,Et=Et.next;let ut=i;for(let It=1;It<=t;It++)c=ut+q<<2,m+=(Et.r=W=e[c])*(M=K-It),g+=(Et.g=mt=e[c+1])*M,E+=(Et.b=rt=e[c+2])*M,b+=(Et.a=V=e[c+3])*M,U+=W,F+=mt,j+=rt,X+=V,Et=Et.next,It<G&&(ut+=i);c=q,Bt=Kt,Qt=Tt;for(let It=0;It<s;It++)o=c<<2,e[o+3]=V=b*Lt>>Z,V>0?(V=255/V,e[o]=(m*Lt>>Z)*V,e[o+1]=(g*Lt>>Z)*V,e[o+2]=(E*Lt>>Z)*V):e[o]=e[o+1]=e[o+2]=0,m-=A,g-=N,E-=D,b-=k,A-=Bt.r,N-=Bt.g,D-=Bt.b,k-=Bt.a,o=q+((o=It+K)<G?o:G)*i<<2,m+=U+=Bt.r=e[o],g+=F+=Bt.g=e[o+1],E+=j+=Bt.b=e[o+2],b+=X+=Bt.a=e[o+3],Bt=Bt.next,A+=W=Qt.r,N+=mt=Qt.g,D+=rt=Qt.b,k+=V=Qt.a,U-=W,F-=mt,j-=rt,X-=V,Qt=Qt.next,c+=i}}const wD=function(t){const e=Math.round(this.blurRadius());e>0&&AD(t,e)};B.addGetterSetter(Ot,"blurRadius",0,Mt(),B.afterSetFilter);const RD=function(n){const t=this.brightness()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]+=t,e[s+1]+=t,e[s+2]+=t};B.addGetterSetter(Ot,"brightness",0,Mt(),B.afterSetFilter);const CD=function(n){const t=this.brightness(),e=n.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=Math.min(255,e[s]*t),e[s+1]=Math.min(255,e[s+1]*t),e[s+2]=Math.min(255,e[s+2]*t)},ID=function(n){const t=Math.pow((this.contrast()+100)/100,2),e=n.data,i=e.length;let s=150,o=150,c=150;for(let f=0;f<i;f+=4)s=e[f],o=e[f+1],c=e[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,c/=255,c-=.5,c*=t,c+=.5,c*=255,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,c=c<0?0:c>255?255:c,e[f]=s,e[f+1]=o,e[f+2]=c};B.addGetterSetter(Ot,"contrast",0,Mt(),B.afterSetFilter);const ND=function(n){var t,e,i,s,o,c,f,m,g;const E=n.data,b=n.width,A=n.height,N=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),D=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),U=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,F=!!((g=(m=this.embossBlend)===null||m===void 0?void 0:m.call(this))!==null&&g!==void 0&&g),j=N*10,X=D*255,W=U*Math.PI/180,mt=Math.cos(W),rt=Math.sin(W),V=128/1020*j,M=new Uint8ClampedArray(E),L=new Float32Array(b*A);for(let Kt=0,Lt=0;Lt<E.length;Lt+=4,Kt++)L[Kt]=.2126*M[Lt]+.7152*M[Lt+1]+.0722*M[Lt+2];const H=[-1,0,1,-2,0,2,-1,0,1],G=[-1,-2,-1,0,0,0,1,2,1],K=[-b-1,-b,-b+1,-1,0,1,b-1,b,b+1],z=Kt=>Kt<0?0:Kt>255?255:Kt;for(let Kt=1;Kt<A-1;Kt++)for(let Lt=1;Lt<b-1;Lt++){const Z=Kt*b+Lt;let Tt=0,Et=0;Tt+=L[Z+K[0]]*H[0],Et+=L[Z+K[0]]*G[0],Tt+=L[Z+K[1]]*H[1],Et+=L[Z+K[1]]*G[1],Tt+=L[Z+K[2]]*H[2],Et+=L[Z+K[2]]*G[2],Tt+=L[Z+K[3]]*H[3],Et+=L[Z+K[3]]*G[3],Tt+=L[Z+K[5]]*H[5],Et+=L[Z+K[5]]*G[5],Tt+=L[Z+K[6]]*H[6],Et+=L[Z+K[6]]*G[6],Tt+=L[Z+K[7]]*H[7],Et+=L[Z+K[7]]*G[7],Tt+=L[Z+K[8]]*H[8],Et+=L[Z+K[8]]*G[8];const Bt=mt*Tt+rt*Et,Qt=z(X+Bt*V),q=Z*4;if(F){const ut=Qt-X;E[q]=z(M[q]+ut),E[q+1]=z(M[q+1]+ut),E[q+2]=z(M[q+2]+ut),E[q+3]=M[q+3]}else E[q]=E[q+1]=E[q+2]=Qt,E[q+3]=M[q+3]}for(let Kt=0;Kt<b;Kt++){let Lt=Kt*4,Z=((A-1)*b+Kt)*4;E[Lt]=M[Lt],E[Lt+1]=M[Lt+1],E[Lt+2]=M[Lt+2],E[Lt+3]=M[Lt+3],E[Z]=M[Z],E[Z+1]=M[Z+1],E[Z+2]=M[Z+2],E[Z+3]=M[Z+3]}for(let Kt=1;Kt<A-1;Kt++){let Lt=Kt*b*4,Z=(Kt*b+(b-1))*4;E[Lt]=M[Lt],E[Lt+1]=M[Lt+1],E[Lt+2]=M[Lt+2],E[Lt+3]=M[Lt+3],E[Z]=M[Z],E[Z+1]=M[Z+1],E[Z+2]=M[Z+2],E[Z+3]=M[Z+3]}return n};B.addGetterSetter(Ot,"embossStrength",.5,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"embossWhiteLevel",.5,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"embossDirection","top-left",void 0,B.afterSetFilter);B.addGetterSetter(Ot,"embossBlend",!1,void 0,B.afterSetFilter);function SE(n,t,e,i,s){const o=e-t,c=s-i;if(o===0)return i+c/2;if(c===0)return i;let f=(n-t)/o;return f=c*f+i,f}const DD=function(n){const t=n.data,e=t.length;let i=t[0],s=i,o,c=t[1],f=c,m,g=t[2],E=g,b;const A=this.enhance();if(A===0)return;for(let X=0;X<e;X+=4)o=t[X+0],o<i?i=o:o>s&&(s=o),m=t[X+1],m<c?c=m:m>f&&(f=m),b=t[X+2],b<g?g=b:b>E&&(E=b);s===i&&(s=255,i=0),f===c&&(f=255,c=0),E===g&&(E=255,g=0);let N,D,k,U,F,j;if(A>0)N=s+A*(255-s),D=i-A*(i-0),k=f+A*(255-f),U=c-A*(c-0),F=E+A*(255-E),j=g-A*(g-0);else{const X=(s+i)*.5;N=s+A*(s-X),D=i+A*(i-X);const W=(f+c)*.5;k=f+A*(f-W),U=c+A*(c-W);const mt=(E+g)*.5;F=E+A*(E-mt),j=g+A*(g-mt)}for(let X=0;X<e;X+=4)t[X+0]=SE(t[X+0],i,s,D,N),t[X+1]=SE(t[X+1],c,f,U,k),t[X+2]=SE(t[X+2],g,E,j,F)};B.addGetterSetter(Ot,"enhance",0,Mt(),B.afterSetFilter);const xD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=.34*t[i]+.5*t[i+1]+.16*t[i+2];t[i]=s,t[i+1]=s,t[i+2]=s}};B.addGetterSetter(Ot,"hue",0,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"saturation",0,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"luminance",0,Mt(),B.afterSetFilter);const OD=function(n){const t=n.data,e=t.length,i=1,s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(o*Math.PI/180),m=i*s*Math.sin(o*Math.PI/180),g=.299*i+.701*f+.167*m,E=.587*i-.587*f+.33*m,b=.114*i-.114*f-.497*m,A=.299*i-.299*f-.328*m,N=.587*i+.413*f+.035*m,D=.114*i-.114*f+.293*m,k=.299*i-.3*f+1.25*m,U=.587*i-.586*f-1.05*m,F=.114*i+.886*f-.2*m;let j,X,W,mt;for(let rt=0;rt<e;rt+=4)j=t[rt+0],X=t[rt+1],W=t[rt+2],mt=t[rt+3],t[rt+0]=g*j+E*X+b*W+c,t[rt+1]=A*j+N*X+D*W+c,t[rt+2]=k*j+U*X+F*W+c,t[rt+3]=mt},MD=function(n){const t=n.data,e=t.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(o*Math.PI/180),f=i*s*Math.sin(o*Math.PI/180),m=.299*i+.701*c+.167*f,g=.587*i-.587*c+.33*f,E=.114*i-.114*c-.497*f,b=.299*i-.299*c-.328*f,A=.587*i+.413*c+.035*f,N=.114*i-.114*c+.293*f,D=.299*i-.3*c+1.25*f,k=.587*i-.586*c-1.05*f,U=.114*i+.886*c-.2*f;for(let F=0;F<e;F+=4){const j=t[F+0],X=t[F+1],W=t[F+2],mt=t[F+3];t[F+0]=m*j+g*X+E*W,t[F+1]=b*j+A*X+N*W,t[F+2]=D*j+k*X+U*W,t[F+3]=mt}};B.addGetterSetter(Ot,"hue",0,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"saturation",0,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"value",0,Mt(),B.afterSetFilter);const PD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},VD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,k=360/D*Math.PI/180;for(let U=0;U<D;U+=1){const F=Math.sin(U*k),j=Math.cos(U*k);for(let X=0;X<N;X+=1){E=Math.floor(f+g*X/N*j),b=Math.floor(m+g*X/N*F);let W=(b*o+E)*4;const mt=i[W+0],rt=i[W+1],V=i[W+2],M=i[W+3];W=(U+X*o)*4,s[W+0]=mt,s[W+1]=rt,s[W+2]=V,s[W+3]=M}}},kD=function(n,t,e){const i=n.data,s=t.data,o=n.width,c=n.height,f=e.polarCenterX||o/2,m=e.polarCenterY||c/2;let g=Math.sqrt(f*f+m*m),E=o-f,b=c-m;const A=Math.sqrt(E*E+b*b);g=A>g?A:g;const N=c,D=o,k=0;let U,F;for(E=0;E<o;E+=1)for(b=0;b<c;b+=1){const j=E-f,X=b-m,W=Math.sqrt(j*j+X*X)*N/g;let mt=(Math.atan2(X,j)*180/Math.PI+360+k)%360;mt=mt*D/360,U=Math.floor(mt),F=Math.floor(W);let rt=(F*o+U)*4;const V=i[rt+0],M=i[rt+1],L=i[rt+2],H=i[rt+3];rt=(b*o+E)*4,s[rt+0]=V,s[rt+1]=M,s[rt+2]=L,s[rt+3]=H}},LD=function(n){const t=n.width,e=n.height;let i,s,o,c,f,m,g,E,b,A,N=Math.round(this.kaleidoscopePower());const D=Math.round(this.kaleidoscopeAngle()),k=Math.floor(t*(D%360)/360);if(N<1)return;const U=et.createCanvasElement();U.width=t,U.height=e;const F=U.getContext("2d").getImageData(0,0,t,e);et.releaseCanvas(U),VD(n,F,{polarCenterX:t/2,polarCenterY:e/2});let j=t/Math.pow(2,N);for(;j<=8;)j=j*2,N-=1;j=Math.ceil(j);let X=j,W=0,mt=X,rt=1;for(k+j>t&&(W=X,mt=0,rt=-1),s=0;s<e;s+=1)for(i=W;i!==mt;i+=rt)o=Math.round(i+k)%t,b=(t*s+o)*4,f=F.data[b+0],m=F.data[b+1],g=F.data[b+2],E=F.data[b+3],A=(t*s+i)*4,F.data[A+0]=f,F.data[A+1]=m,F.data[A+2]=g,F.data[A+3]=E;for(s=0;s<e;s+=1)for(X=Math.floor(j),c=0;c<N;c+=1){for(i=0;i<X+1;i+=1)b=(t*s+i)*4,f=F.data[b+0],m=F.data[b+1],g=F.data[b+2],E=F.data[b+3],A=(t*s+X*2-i-1)*4,F.data[A+0]=f,F.data[A+1]=m,F.data[A+2]=g,F.data[A+3]=E;X*=2}kD(F,n,{})};B.addGetterSetter(Ot,"kaleidoscopePower",2,Mt(),B.afterSetFilter);B.addGetterSetter(Ot,"kaleidoscopeAngle",0,Mt(),B.afterSetFilter);function b1(n,t,e){let i=(e*n.width+t)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function u0(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2))}function UD(n){const t=[0,0,0];for(let e=0;e<n.length;e++)t[0]+=n[e][0],t[1]+=n[e][1],t[2]+=n[e][2];return t[0]/=n.length,t[1]/=n.length,t[2]/=n.length,t}function zD(n,t){const e=b1(n,0,0),i=b1(n,n.width-1,0),s=b1(n,0,n.height-1),o=b1(n,n.width-1,n.height-1),c=t||10;if(u0(e,i)<c&&u0(i,o)<c&&u0(o,s)<c&&u0(s,e)<c){const f=UD([i,e,o,s]),m=[];for(let g=0;g<n.width*n.height;g++){const E=u0(f,[n.data[g*4],n.data[g*4+1],n.data[g*4+2]]);m[g]=E<c?0:255}return m}}function BD(n,t){for(let e=0;e<n.width*n.height;e++)n.data[4*e+3]=t[e]}function GD(n,t,e){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const k=N*t+D,U=i[b*s+A];E+=n[k]*U}}c[g]=E===2040?255:0}return c}function HD(n,t,e){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const k=N*t+D,U=i[b*s+A];E+=n[k]*U}}c[g]=E>=1020?255:0}return c}function qD(n,t,e){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),c=[];for(let f=0;f<e;f++)for(let m=0;m<t;m++){const g=f*t+m;let E=0;for(let b=0;b<s;b++)for(let A=0;A<s;A++){const N=f+b-o,D=m+A-o;if(N>=0&&N<e&&D>=0&&D<t){const k=N*t+D,U=i[b*s+A];E+=n[k]*U}}c[g]=E}return c}const FD=function(n){const t=this.threshold();let e=zD(n,t);return e&&(e=GD(e,n.width,n.height),e=HD(e,n.width,n.height),e=qD(e,n.width,n.height),BD(n,e)),n};B.addGetterSetter(Ot,"threshold",0,Mt(),B.afterSetFilter);const jD=function(n){const t=this.noise()*255,e=n.data,i=e.length,s=t/2;for(let o=0;o<i;o+=4)e[o+0]+=s-2*s*Math.random(),e[o+1]+=s-2*s*Math.random(),e[o+2]+=s-2*s*Math.random()};B.addGetterSetter(Ot,"noise",.2,Mt(),B.afterSetFilter);const KD=function(n){let t=Math.ceil(this.pixelSize()),e=n.width,i=n.height,s=Math.ceil(e/t),o=Math.ceil(i/t),c=n.data;if(t<=0){et.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let m=0;m<o;m+=1){let g=0,E=0,b=0,A=0;const N=f*t,D=N+t,k=m*t,U=k+t;let F=0;for(let j=N;j<D;j+=1)if(!(j>=e))for(let X=k;X<U;X+=1){if(X>=i)continue;const W=(e*X+j)*4;g+=c[W+0],E+=c[W+1],b+=c[W+2],A+=c[W+3],F+=1}g=g/F,E=E/F,b=b/F,A=A/F;for(let j=N;j<D;j+=1)if(!(j>=e))for(let X=k;X<U;X+=1){if(X>=i)continue;const W=(e*X+j)*4;c[W+0]=g,c[W+1]=E,c[W+2]=b,c[W+3]=A}}};B.addGetterSetter(Ot,"pixelSize",8,Mt(),B.afterSetFilter);const YD=function(n){const t=Math.round(this.levels()*254)+1,e=n.data,i=e.length,s=255/t;for(let o=0;o<i;o+=1)e[o]=Math.floor(e[o]/s)*s};B.addGetterSetter(Ot,"levels",.5,Mt(),B.afterSetFilter);const QD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue();for(let c=0;c<e;c+=4){const f=(.34*t[c]+.5*t[c+1]+.16*t[c+2])/255;t[c]=f*i,t[c+1]=f*s,t[c+2]=f*o,t[c+3]=t[c+3]}};B.addGetterSetter(Ot,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(Ot,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(Ot,"blue",0,z6,B.afterSetFilter);const XD=function(n){const t=n.data,e=t.length,i=this.red(),s=this.green(),o=this.blue(),c=this.alpha();for(let f=0;f<e;f+=4){const m=1-c;t[f]=i*c+t[f]*m,t[f+1]=s*c+t[f+1]*m,t[f+2]=o*c+t[f+2]*m}};B.addGetterSetter(Ot,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(Ot,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});B.addGetterSetter(Ot,"blue",0,z6,B.afterSetFilter);B.addGetterSetter(Ot,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const JD=function(n){const t=n.data,e=t.length;for(let i=0;i<e;i+=4){const s=t[i+0],o=t[i+1],c=t[i+2];t[i+0]=Math.min(255,s*.393+o*.769+c*.189),t[i+1]=Math.min(255,s*.349+o*.686+c*.168),t[i+2]=Math.min(255,s*.272+o*.534+c*.131)}},WD=function(n){const e=n.data;for(let i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],c=e[i+2];.2126*s+.7152*o+.0722*c>=128&&(e[i]=255-s,e[i+1]=255-o,e[i+2]=255-c)}return n},ZD=function(n){const t=this.threshold()*255,e=n.data,i=e.length;for(let s=0;s<i;s+=1)e[s]=e[s]<t?0:255};B.addGetterSetter(Ot,"threshold",.5,Mt(),B.afterSetFilter);ip.Util._assign(ip,{Arc:nc,Arrow:wd,Circle:Ip,Ellipse:Bh,Image:el,Label:hS,Tag:Rd,Line:ic,Path:Rn,Rect:A_,RegularPolygon:Gh,Ring:Cd,Sprite:nu,Star:Hh,Text:Nn,TextPath:$i,Transformer:Be,Wedge:sc,Filters:{Blur:wD,Brightness:CD,Brighten:RD,Contrast:ID,Emboss:ND,Enhance:DD,Grayscale:xD,HSL:OD,HSV:MD,Invert:PD,Kaleidoscope:LD,Mask:FD,Noise:jD,Pixelate:KD,Posterize:YD,RGB:QD,RGBA:XD,Sepia:JD,Solarize:WD,Threshold:ZD}});var bE={exports:{}},AE={exports:{}};var UA;function $D(){return UA||(UA=1,(function(n){n.exports=function(t){function e(l,u,p,y){return new ng(l,u,p,y)}function i(){}function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function c(l){if(o(l)!==l)throw Error(s(188))}function f(l){var u=l.alternate;if(!u){if(u=o(l),u===null)throw Error(s(188));return u!==l?null:l}for(var p=l,y=u;;){var S=p.return;if(S===null)break;var w=S.alternate;if(w===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===w.child){for(w=S.child;w;){if(w===p)return c(S),l;if(w===y)return c(S),u;w=w.sibling}throw Error(s(188))}if(p.return!==y.return)p=S,y=w;else{for(var x=!1,Q=S.child;Q;){if(Q===p){x=!0,p=S,y=w;break}if(Q===y){x=!0,y=S,p=w;break}Q=Q.sibling}if(!x){for(Q=w.child;Q;){if(Q===p){x=!0,p=w,y=S;break}if(Q===y){x=!0,y=w,p=S;break}Q=Q.sibling}if(!x)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}function g(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=g(l),u!==null))return u;l=l.sibling}return null}function E(l){return l===null||typeof l!="object"?null:(l=Lo&&l[Lo]||l["@@iterator"],typeof l=="function"?l:null)}function b(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Al?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case bu:return"Fragment";case wu:return"Profiler";case Au:return"StrictMode";case Wd:return"Suspense";case ko:return"SuspenseList";case yf:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Su:return"Portal";case Ga:return l.displayName||"Context";case _f:return(l._context.displayName||"Context")+".Consumer";case qc:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Zd:return u=l.displayName||null,u!==null?u:b(l.type)||"Memo";case Ss:u=l._payload,l=l._init;try{return b(l(u))}catch{}}return null}function A(l){return{current:l}}function N(l){0>Du||(l.current=hm[Du],hm[Du]=null,Du--)}function D(l,u){Du++,hm[Du]=l.current,l.current=u}function k(l){return l>>>=0,l===0?32:31-(fm(l)/Yy|0)|0}function U(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function F(l,u,p){var y=l.pendingLanes;if(y===0)return 0;var S=0,w=l.suspendedLanes,x=l.pingedLanes;l=l.warmLanes;var Q=y&134217727;return Q!==0?(y=Q&~w,y!==0?S=U(y):(x&=Q,x!==0?S=U(x):p||(p=Q&~l,p!==0&&(S=U(p))))):(Q=y&~w,Q!==0?S=U(Q):x!==0?S=U(x):p||(p=y&~l,p!==0&&(S=U(p)))),S===0?0:u!==0&&u!==S&&(u&w)===0&&(w=S&-S,p=u&-u,w>=p||w===32&&(p&4194048)!==0)?u:S}function j(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function X(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W(){var l=Jc;return Jc<<=1,(Jc&62914560)===0&&(Jc=4194304),l}function mt(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function rt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function V(l,u,p,y,S,w){var x=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Q=l.entanglements,dt=l.expirationTimes,bt=l.hiddenUpdates;for(p=x&~p;0<p;){var Pt=31-qs(p),Ct=1<<Pt;Q[Pt]=0,dt[Pt]=-1;var Ht=bt[Pt];if(Ht!==null)for(bt[Pt]=null,Pt=0;Pt<Ht.length;Pt++){var de=Ht[Pt];de!==null&&(de.lane&=-536870913)}p&=~Ct}y!==0&&M(l,y,0),w!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=w&~(x&~u))}function M(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-qs(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function L(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-qs(p),S=1<<y;S&u|l[y]&u&&(l[y]|=u),p&=~S}}function H(l,u){var p=u&-u;return p=(p&42)!==0?1:G(p),(p&(l.suspendedLanes|u))!==0?0:p}function G(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function K(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function z(l){if(typeof Gg=="function"&&Jy(l),Fs&&typeof Fs.setStrictMode=="function")try{Fs.setStrictMode(Ou,l)}catch{}}function Kt(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function Lt(l){if(ym===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);ym=u&&u[1]||"",so=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ym+l+so}function Z(l,u){if(!l||Cf)return"";Cf=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(de){var Ht=de}Reflect.construct(l,[],Ct)}else{try{Ct.call()}catch(de){Ht=de}l.call(Ct.prototype)}}else{try{throw Error()}catch(de){Ht=de}(Ct=l())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(de){if(de&&Ht&&typeof de.stack=="string")return[de.stack,Ht.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),x=w[0],Q=w[1];if(x&&Q){var dt=x.split(`
`),bt=Q.split(`
`);for(S=y=0;y<dt.length&&!dt[y].includes("DetermineComponentFrameRoot");)y++;for(;S<bt.length&&!bt[S].includes("DetermineComponentFrameRoot");)S++;if(y===dt.length||S===bt.length)for(y=dt.length-1,S=bt.length-1;1<=y&&0<=S&&dt[y]!==bt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(dt[y]!==bt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||dt[y]!==bt[S]){var Pt=`
`+dt[y].replace(" at new "," at ");return l.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",l.displayName)),Pt}while(1<=y&&0<=S);break}}}finally{Cf=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Lt(p):""}function Tt(l,u){switch(l.tag){case 26:case 27:case 5:return Lt(l.type);case 16:return Lt("Lazy");case 13:return l.child!==u&&u!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return Z(l.type,!1);case 11:return Z(l.type.render,!1);case 1:return Z(l.type,!0);case 31:return Lt("Activity");default:return""}}function Et(l){try{var u="",p=null;do u+=Tt(l,p),p=l,l=l.return;while(l);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Bt(l,u){if(typeof l=="object"&&l!==null){var p=Hg.get(l);return p!==void 0?p:(u={value:l,source:u,stack:Et(u)},Hg.set(l,u),u)}return{value:l,source:u,stack:Et(u)}}function Qt(l,u){Bo[ao++]=If,Bo[ao++]=sn,sn=l,If=u}function q(l,u,p){Fa[fa++]=Ki,Fa[fa++]=Er,Fa[fa++]=ja,ja=l;var y=Ki;l=Er;var S=32-qs(y)-1;y&=~(1<<S),p+=1;var w=32-qs(u)+S;if(30<w){var x=S-S%5;w=(y&(1<<x)-1).toString(32),y>>=x,S-=x,Ki=1<<32-qs(u)+S|p<<S|y,Er=w+l}else Ki=1<<w|p<<S|y,Er=l}function ut(l){l.return!==null&&(Qt(l,1),q(l,1,0))}function It(l){for(;l===sn;)sn=Bo[--ao],Bo[ao]=null,If=Bo[--ao],Bo[ao]=null;for(;l===ja;)ja=Fa[--fa],Fa[fa]=null,Er=Fa[--fa],Fa[fa]=null,Ki=Fa[--fa],Fa[fa]=null}function zt(l,u){Fa[fa++]=Ki,Fa[fa++]=Er,Fa[fa++]=ja,Ki=u.id,Er=u.overflow,ja=l}function ee(l,u){D(Yi,u),D(Go,l),D(Oi,null),l=uy(u),N(Oi),D(Oi,l)}function ae(){N(Oi),N(Go),N(Yi)}function be(l){l.memoizedState!==null&&D(Nf,l);var u=Oi.current,p=Kc(u,l.type);u!==p&&(D(Go,l),D(Oi,p))}function vn(l){Go.current===l&&(N(Oi),N(Go)),Nf.current===l&&(N(Nf),$n?Iu._currentValue=Cu:Iu._currentValue2=Cu)}function ke(l){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wa(Bt(u,l)),vm}function xr(l,u){if(!Sn)throw Error(s(175));Vy(l.stateNode,l.type,l.memoizedProps,u,l)||ke(l,!0)}function To(l){for(vi=l.return;vi;)switch(vi.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:vi=vi.return}}function ta(l){if(!Sn||l!==vi)return!1;if(!Ce)return To(l),Ce=!0,!1;var u=l.tag;if(yi?u!==3&&u!==27&&(u!==5||Xc(l.type)&&!bs(l.type,l.memoizedProps))&&bn&&ke(l):u!==3&&(u!==5||Xc(l.type)&&!bs(l.type,l.memoizedProps))&&bn&&ke(l),To(l),u===13){if(!Sn)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));bn=Dg(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));bn=Ly(l)}else bn=yi&&u===27?Cy(l.type,bn):vi?Ry(l.stateNode):null;return!0}function hs(){Sn&&(bn=vi=null,Ce=!1)}function fs(){var l=ro;return l!==null&&(Ks===null?Ks=l:Ks.push.apply(Ks,l),ro=null),l}function wa(l){ro===null?ro=[l]:ro.push(l)}function Gi(l,u,p){$n?(D(Ka,u._currentValue),u._currentValue=p):(D(Ka,u._currentValue2),u._currentValue2=p)}function ds(l){var u=Ka.current;$n?l._currentValue=u:l._currentValue2=u,N(Ka)}function So(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function En(l,u,p,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var w=S.dependencies;if(w!==null){var x=S.child;w=w.firstContext;t:for(;w!==null;){var Q=w;w=S;for(var dt=0;dt<u.length;dt++)if(Q.context===u[dt]){w.lanes|=p,Q=w.alternate,Q!==null&&(Q.lanes|=p),So(w.return,p,l),y||(x=null);break t}w=Q.next}}else if(S.tag===18){if(x=S.return,x===null)throw Error(s(341));x.lanes|=p,w=x.alternate,w!==null&&(w.lanes|=p),So(x,p,l),x=null}else x=S.child;if(x!==null)x.return=S;else for(x=S;x!==null;){if(x===l){x=null;break}if(S=x.sibling,S!==null){S.return=x.return,x=S;break}x=x.return}S=x}}function rn(l,u,p,y){l=null;for(var S=u,w=!1;S!==null;){if(!w){if((S.flags&524288)!==0)w=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var x=S.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var Q=S.type;ei(S.pendingProps.value,x.value)||(l!==null?l.push(Q):l=[Q])}}else if(S===Nf.current){if(x=S.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Iu):l=[Iu])}S=S.return}l!==null&&En(u,l,p,y),u.flags|=262144}function ea(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!ei($n?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function sr(l){fn=l,Tr=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Gn(l){return wi(fn,l)}function en(l,u){return fn===null&&sr(l),wi(l,u)}function wi(l,u){var p=$n?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},Tr===null){if(l===null)throw Error(s(308));Tr=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Tr=Tr.next=u;return p}function ms(){return{controller:new Wy,data:new Map,refCount:0}}function es(l){l.refCount--,l.refCount===0&&Mi(B2,function(){l.controller.abort()})}function ns(){}function Hi(l){l!==We&&l.next===null&&(We===null?Df=We=l:We=We.next=l),Ya=!0,rs||(rs=!0,ue())}function ps(l,u){if(!Em&&Ya){Em=!0;do for(var p=!1,y=Df;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var w=0;else{var x=y.suspendedLanes,Q=y.pingedLanes;w=(1<<31-qs(42|l)+1)-1,w&=S&~(x&~Q),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,le(y,w))}else w=Ie,w=F(y,y===Ee?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==Hs),(w&3)===0||j(y,w)||(p=!0,le(y,w));y=y.next}while(p);Em=!1}}function au(){yt()}function yt(){Ya=rs=!1;var l=0;Nl!==0&&Ru()&&(l=Nl);for(var u=as(),p=null,y=Df;y!==null;){var S=y.next,w=Rt(y,u);w===0?(y.next=null,p===null?Df=S:p.next=S,S===null&&(We=p)):(p=y,(l!==0||(w&3)!==0)&&(Ya=!0)),y=S}di!==0&&di!==5||ps(l),Nl!==0&&(Nl=0)}function Rt(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var x=31-qs(w),Q=1<<x,dt=S[x];dt===-1?((Q&p)===0||(Q&y)!==0)&&(S[x]=X(Q,u)):dt<=u&&(l.expiredLanes|=Q),w&=~Q}if(u=Ee,p=Ie,p=F(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Hs),y=l.callbackNode,p===0||l===u&&($e===2||$e===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&mm(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||j(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&mm(y),K(p)){case 2:case 8:p=Xy;break;case 32:p=Rf;break;case 268435456:p=gm;break;default:p=Rf}return y=qt.bind(null,l),p=wf(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&mm(y),l.callbackPriority=2,l.callbackNode=null,2}function qt(l,u){if(di!==0&&di!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(eo()&&l.callbackNode!==p)return null;var y=Ie;return y=F(l,l===Ee?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Hs),y===0?null:(vr(l,y,u),Rt(l,as()),l.callbackNode!=null&&l.callbackNode===p?qt.bind(null,l):null)}function le(l,u){if(eo())return null;vr(l,u,!0)}function ue(){mg?pg(function(){(Ae&6)!==0?wf(pm,au):yt()}):wf(pm,au)}function je(){if(Nl===0){var l=Ho;l===0&&(l=dm,dm<<=1,(dm&261888)===0&&(dm=256)),Nl=l}return Nl}function gs(l,u){if(Wc===null){var p=Wc=[];qg=0,Ho=je(),Ei={status:"pending",value:void 0,then:function(y){p.push(y)}}}return qg++,u.then(bo,bo),u}function bo(){if(--qg===0&&Wc!==null){Ei!==null&&(Ei.status="fulfilled");var l=Wc;Wc=null,Ho=0,Ei=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function li(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}function ar(){var l=Dl.current;return l!==null?l:Ee.pooledCache}function pn(l,u){u===null?D(Dl,Dl.current):D(Dl,u.pool)}function rr(){var l=ar();return l===null?null:{parent:$n?An._currentValue:An._currentValue2,pool:l}}function na(l,u){if(ei(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!z2.call(u,S)||!ei(l[S],u[S]))return!1}return!0}function Ra(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Md(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(ns,ns),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,nl(l),l;default:if(typeof u.status=="string")u.then(ns,ns);else{if(l=Ee,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,nl(l),l}throw ws=u,Ti}}function Or(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(ws=p,Ti):p}}function or(){if(ws===null)throw Error(s(459));var l=ws;return ws=null,l}function nl(l){if(l===Ti||l===Xa)throw Error(s(483))}function dc(l){var u=Mu;return Mu+=1,xl===null&&(xl=[]),Md(xl,l,u)}function lr(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function il(l,u){throw u.$$typeof===Tu?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function mc(l){function u(ot,nt){if(l){var ht=ot.deletions;ht===null?(ot.deletions=[nt],ot.flags|=16):ht.push(nt)}}function p(ot,nt){if(!l)return null;for(;nt!==null;)u(ot,nt),nt=nt.sibling;return null}function y(ot){for(var nt=new Map;ot!==null;)ot.key!==null?nt.set(ot.key,ot):nt.set(ot.index,ot),ot=ot.sibling;return nt}function S(ot,nt){return ot=ca(ot,nt),ot.index=0,ot.sibling=null,ot}function w(ot,nt,ht){return ot.index=ht,l?(ht=ot.alternate,ht!==null?(ht=ht.index,ht<nt?(ot.flags|=67108866,nt):ht):(ot.flags|=67108866,nt)):(ot.flags|=1048576,nt)}function x(ot){return l&&ot.alternate===null&&(ot.flags|=67108866),ot}function Q(ot,nt,ht,xt){return nt===null||nt.tag!==6?(nt=ig(ht,ot.mode,xt),nt.return=ot,nt):(nt=S(nt,ht),nt.return=ot,nt)}function dt(ot,nt,ht,xt){var ne=ht.type;return ne===bu?Pt(ot,nt,ht.props.children,xt,ht.key):nt!==null&&(nt.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Ss&&Or(ne)===nt.type)?(nt=S(nt,ht.props),lr(nt,ht),nt.return=ot,nt):(nt=Vo(ht.type,ht.key,ht.props,null,ot.mode,xt),lr(nt,ht),nt.return=ot,nt)}function bt(ot,nt,ht,xt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==ht.containerInfo||nt.stateNode.implementation!==ht.implementation?(nt=ag(ht,ot.mode,xt),nt.return=ot,nt):(nt=S(nt,ht.children||[]),nt.return=ot,nt)}function Pt(ot,nt,ht,xt,ne){return nt===null||nt.tag!==7?(nt=Ba(ht,ot.mode,xt,ne),nt.return=ot,nt):(nt=S(nt,ht),nt.return=ot,nt)}function Ct(ot,nt,ht){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=ig(""+nt,ot.mode,ht),nt.return=ot,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case no:return ht=Vo(nt.type,nt.key,nt.props,null,ot.mode,ht),lr(ht,nt),ht.return=ot,ht;case Su:return nt=ag(nt,ot.mode,ht),nt.return=ot,nt;case Ss:return nt=Or(nt),Ct(ot,nt,ht)}if(wl(nt)||E(nt))return nt=Ba(nt,ot.mode,ht,null),nt.return=ot,nt;if(typeof nt.then=="function")return Ct(ot,dc(nt),ht);if(nt.$$typeof===Ga)return Ct(ot,en(ot,nt),ht);il(ot,nt)}return null}function Ht(ot,nt,ht,xt){var ne=nt!==null?nt.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ne!==null?null:Q(ot,nt,""+ht,xt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case no:return ht.key===ne?dt(ot,nt,ht,xt):null;case Su:return ht.key===ne?bt(ot,nt,ht,xt):null;case Ss:return ht=Or(ht),Ht(ot,nt,ht,xt)}if(wl(ht)||E(ht))return ne!==null?null:Pt(ot,nt,ht,xt,null);if(typeof ht.then=="function")return Ht(ot,nt,dc(ht),xt);if(ht.$$typeof===Ga)return Ht(ot,nt,en(ot,ht),xt);il(ot,ht)}return null}function de(ot,nt,ht,xt,ne){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return ot=ot.get(ht)||null,Q(nt,ot,""+xt,ne);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case no:return ot=ot.get(xt.key===null?ht:xt.key)||null,dt(nt,ot,xt,ne);case Su:return ot=ot.get(xt.key===null?ht:xt.key)||null,bt(nt,ot,xt,ne);case Ss:return xt=Or(xt),de(ot,nt,ht,xt,ne)}if(wl(xt)||E(xt))return ot=ot.get(ht)||null,Pt(nt,ot,xt,ne,null);if(typeof xt.then=="function")return de(ot,nt,ht,dc(xt),ne);if(xt.$$typeof===Ga)return de(ot,nt,ht,en(nt,xt),ne);il(nt,xt)}return null}function Pi(ot,nt,ht,xt){for(var ne=null,Un=null,ie=nt,Le=nt=0,Vi=null;ie!==null&&Le<ht.length;Le++){ie.index>Le?(Vi=ie,ie=null):Vi=ie.sibling;var He=Ht(ot,ie,ht[Le],xt);if(He===null){ie===null&&(ie=Vi);break}l&&ie&&He.alternate===null&&u(ot,ie),nt=w(He,nt,Le),Un===null?ne=He:Un.sibling=He,Un=He,ie=Vi}if(Le===ht.length)return p(ot,ie),Ce&&Qt(ot,Le),ne;if(ie===null){for(;Le<ht.length;Le++)ie=Ct(ot,ht[Le],xt),ie!==null&&(nt=w(ie,nt,Le),Un===null?ne=ie:Un.sibling=ie,Un=ie);return Ce&&Qt(ot,Le),ne}for(ie=y(ie);Le<ht.length;Le++)Vi=de(ie,ot,Le,ht[Le],xt),Vi!==null&&(l&&Vi.alternate!==null&&ie.delete(Vi.key===null?Le:Vi.key),nt=w(Vi,nt,Le),Un===null?ne=Vi:Un.sibling=Vi,Un=Vi);return l&&ie.forEach(function(Za){return u(ot,Za)}),Ce&&Qt(ot,Le),ne}function ah(ot,nt,ht,xt){if(ht==null)throw Error(s(151));for(var ne=null,Un=null,ie=nt,Le=nt=0,Vi=null,He=ht.next();ie!==null&&!He.done;Le++,He=ht.next()){ie.index>Le?(Vi=ie,ie=null):Vi=ie.sibling;var Za=Ht(ot,ie,He.value,xt);if(Za===null){ie===null&&(ie=Vi);break}l&&ie&&Za.alternate===null&&u(ot,ie),nt=w(Za,nt,Le),Un===null?ne=Za:Un.sibling=Za,Un=Za,ie=Vi}if(He.done)return p(ot,ie),Ce&&Qt(ot,Le),ne;if(ie===null){for(;!He.done;Le++,He=ht.next())He=Ct(ot,He.value,xt),He!==null&&(nt=w(He,nt,Le),Un===null?ne=He:Un.sibling=He,Un=He);return Ce&&Qt(ot,Le),ne}for(ie=y(ie);!He.done;Le++,He=ht.next())He=de(ie,ot,Le,He.value,xt),He!==null&&(l&&He.alternate!==null&&ie.delete(He.key===null?Le:He.key),nt=w(He,nt,Le),Un===null?ne=He:Un.sibling=He,Un=He);return l&&ie.forEach(function(G2){return u(ot,G2)}),Ce&&Qt(ot,Le),ne}function zl(ot,nt,ht,xt){if(typeof ht=="object"&&ht!==null&&ht.type===bu&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case no:t:{for(var ne=ht.key;nt!==null;){if(nt.key===ne){if(ne=ht.type,ne===bu){if(nt.tag===7){p(ot,nt.sibling),xt=S(nt,ht.props.children),xt.return=ot,ot=xt;break t}}else if(nt.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Ss&&Or(ne)===nt.type){p(ot,nt.sibling),xt=S(nt,ht.props),lr(xt,ht),xt.return=ot,ot=xt;break t}p(ot,nt);break}else u(ot,nt);nt=nt.sibling}ht.type===bu?(xt=Ba(ht.props.children,ot.mode,xt,ht.key),xt.return=ot,ot=xt):(xt=Vo(ht.type,ht.key,ht.props,null,ot.mode,xt),lr(xt,ht),xt.return=ot,ot=xt)}return x(ot);case Su:t:{for(ne=ht.key;nt!==null;){if(nt.key===ne)if(nt.tag===4&&nt.stateNode.containerInfo===ht.containerInfo&&nt.stateNode.implementation===ht.implementation){p(ot,nt.sibling),xt=S(nt,ht.children||[]),xt.return=ot,ot=xt;break t}else{p(ot,nt);break}else u(ot,nt);nt=nt.sibling}xt=ag(ht,ot.mode,xt),xt.return=ot,ot=xt}return x(ot);case Ss:return ht=Or(ht),zl(ot,nt,ht,xt)}if(wl(ht))return Pi(ot,nt,ht,xt);if(E(ht)){if(ne=E(ht),typeof ne!="function")throw Error(s(150));return ht=ne.call(ht),ah(ot,nt,ht,xt)}if(typeof ht.then=="function")return zl(ot,nt,dc(ht),xt);if(ht.$$typeof===Ga)return zl(ot,nt,en(ot,ht),xt);il(ot,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,nt!==null&&nt.tag===6?(p(ot,nt.sibling),xt=S(nt,ht),xt.return=ot,ot=xt):(p(ot,nt),xt=ig(ht,ot.mode,xt),xt.return=ot,ot=xt),x(ot)):p(ot,nt)}return function(ot,nt,ht,xt){try{Mu=0;var ne=zl(ot,nt,ht,xt);return xl=null,ne}catch(ie){if(ie===Ti||ie===Xa)throw ie;var Un=e(29,ie,null,ot.mode);return Un.lanes=xt,Un.return=ot,Un}}}function Mr(){for(var l=lo,u=Pu=lo=0;u<l;){var p=Xi[u];Xi[u++]=null;var y=Xi[u];Xi[u++]=null;var S=Xi[u];Xi[u++]=null;var w=Xi[u];if(Xi[u++]=null,y!==null&&S!==null){var x=y.pending;x===null?S.next=S:(S.next=x.next,x.next=S),y.pending=S}w!==0&&Ia(p,S,w)}}function Ca(l,u,p,y){Xi[lo++]=l,Xi[lo++]=u,Xi[lo++]=p,Xi[lo++]=y,Pu|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function pc(l,u,p,y){return Ca(l,u,p,y),xn(l)}function qi(l,u){return Ca(l,null,null,u),xn(l)}function Ia(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var S=!1,w=l.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(S=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,S&&u!==null&&(S=31-qs(p),l=w.hiddenUpdates,y=l[S],y===null?l[S]=[u]:y.push(u),u.lane=p|536870912),w):null}function xn(l){if(50<Ge)throw Ge=0,kf=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function ui(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Na(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ia(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Pr(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Ae&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=xn(l),Ia(l,null,p),u}return Ca(l,y,u,p),xn(l)}function sl(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,L(l,p)}}function gc(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var x={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?S=w=x:w=w.next=x,p=p.next}while(p!==null);w===null?S=w=u:w=w.next=u}else S=w=u;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Ps(){if(Sm){var l=Ei;if(l!==null)throw l}}function Vr(l,u,p,y){Sm=!1;var S=l.updateQueue;da=!1;var w=S.firstBaseUpdate,x=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var dt=Q,bt=dt.next;dt.next=null,x===null?w=bt:x.next=bt,x=dt;var Pt=l.alternate;Pt!==null&&(Pt=Pt.updateQueue,Q=Pt.lastBaseUpdate,Q!==x&&(Q===null?Pt.firstBaseUpdate=bt:Q.next=bt,Pt.lastBaseUpdate=dt))}if(w!==null){var Ct=S.baseState;x=0,Pt=bt=dt=null,Q=w;do{var Ht=Q.lane&-536870913,de=Ht!==Q.lane;if(de?(Ie&Ht)===Ht:(y&Ht)===Ht){Ht!==0&&Ht===Ho&&(Sm=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});t:{var Pi=l,ah=Q;Ht=u;var zl=p;switch(ah.tag){case 1:if(Pi=ah.payload,typeof Pi=="function"){Ct=Pi.call(zl,Ct,Ht);break t}Ct=Pi;break t;case 3:Pi.flags=Pi.flags&-65537|128;case 0:if(Pi=ah.payload,Ht=typeof Pi=="function"?Pi.call(zl,Ct,Ht):Pi,Ht==null)break t;Ct=Jd({},Ct,Ht);break t;case 2:da=!0}}Ht=Q.callback,Ht!==null&&(l.flags|=64,de&&(l.flags|=8192),de=S.callbacks,de===null?S.callbacks=[Ht]:de.push(Ht))}else de={lane:Ht,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Pt===null?(bt=Pt=de,dt=Ct):Pt=Pt.next=de,x|=Ht;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;de=Q,Q=de.next,de.next=null,S.lastBaseUpdate=de,S.shared.pending=null}}while(!0);Pt===null&&(dt=Ct),S.baseState=dt,S.firstBaseUpdate=bt,S.lastBaseUpdate=Pt,w===null&&(S.shared.lanes=0),Fo|=x,l.lanes=x,l.memoizedState=Ct}}function ur(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function sa(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)ur(p[l],u)}function Vs(l,u){l=co,D(Ol,l),D(Vu,u),co=l|u.baseLanes}function Da(){D(Ol,co),D(Vu,Vu.current)}function Hn(){co=Ol.current,N(Vu),N(Ol)}function xa(l){var u=l.alternate;D(jn,jn.current&1),D(js,l),Rs===null&&(u===null||Vu.current!==null||u.memoizedState!==null)&&(Rs=l)}function ru(l){D(jn,jn.current),D(js,l),Rs===null&&(Rs=l)}function cr(l){l.tag===22?(D(jn,jn.current),D(js,l),Rs===null&&(Rs=l)):Fi()}function Fi(){D(jn,jn.current),D(js,js.current)}function ji(l){N(js),Rs===l&&(Rs=null),N(jn)}function al(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Cl(p)||sm(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function un(){throw Error(s(321))}function _c(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!ei(l[p],u[p]))return!1;return!0}function rl(l,u,p,y,S,w){return qo=w,pe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,$t.H=l===null||l.memoizedState===null?Vn:uo,Oe=!1,w=p(y,S),Oe=!1,_e&&(w=Wn(u,p,y,S)),ks(l),w}function ks(l){$t.H=ma;var u=Wt!==null&&Wt.next!==null;if(qo=0,oe=Wt=pe=null,ve=!1,Ja=0,Sr=null,u)throw Error(s(300));l===null||_n||(l=l.dependencies,l!==null&&ea(l)&&(_n=!0))}function Wn(l,u,p,y){pe=l;var S=0;do{if(_e&&(Sr=null),Ja=0,_e=!1,25<=S)throw Error(s(301));if(S+=1,oe=Wt=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$t.H=Ml,w=u(p,y)}while(_e);return w}function Ri(){var l=$t.H,u=l.useState()[0];return u=typeof u.then=="function"?Ci(u):u,l=l.useState()[0],(Wt!==null?Wt.memoizedState:null)!==l&&(pe.flags|=1024),u}function kr(){var l=os!==0;return os=0,l}function ou(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function Fe(l){if(ve){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ve=!1}qo=0,oe=Wt=pe=null,_e=!1,Ja=os=0,Sr=null}function Zn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?pe.memoizedState=oe=l:oe=oe.next=l,oe}function Ke(){if(Wt===null){var l=pe.alternate;l=l!==null?l.memoizedState:null}else l=Wt.next;var u=oe===null?pe.memoizedState:oe.next;if(u!==null)oe=u,Wt=l;else{if(l===null)throw pe.alternate===null?Error(s(467)):Error(s(310));Wt=l,l={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},oe===null?pe.memoizedState=oe=l:oe=oe.next=l}return oe}function Lr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ci(l){var u=Ja;return Ja+=1,Sr===null&&(Sr=[]),l=Md(Sr,l,u),u=pe,(oe===null?u.memoizedState:oe.next)===null&&(u=u.alternate,$t.H=u===null||u.memoizedState===null?Vn:uo),l}function Ao(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ci(l);if(l.$$typeof===Ga)return Gn(l)}throw Error(s(438,String(l)))}function yc(l){var u=null,p=pe.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=pe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Lr(),pe.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=og;return u.index++,p}function aa(l,u){return typeof u=="function"?u(l):u}function hr(l){var u=Ke();return vc(u,Wt,l)}function vc(l,u,p){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var S=l.baseQueue,w=y.pending;if(w!==null){if(S!==null){var x=S.next;S.next=w.next,w.next=x}u.baseQueue=S=w,y.pending=null}if(w=l.baseState,S===null)l.memoizedState=w;else{u=S.next;var Q=x=null,dt=null,bt=u,Pt=!1;do{var Ct=bt.lane&-536870913;if(Ct!==bt.lane?(Ie&Ct)===Ct:(qo&Ct)===Ct){var Ht=bt.revertLane;if(Ht===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),Ct===Ho&&(Pt=!0);else if((qo&Ht)===Ht){bt=bt.next,Ht===Ho&&(Pt=!0);continue}else Ct={lane:0,revertLane:bt.revertLane,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},dt===null?(Q=dt=Ct,x=w):dt=dt.next=Ct,pe.lanes|=Ht,Fo|=Ht;Ct=bt.action,Oe&&p(w,Ct),w=bt.hasEagerState?bt.eagerState:p(w,Ct)}else Ht={lane:Ct,revertLane:bt.revertLane,gesture:bt.gesture,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},dt===null?(Q=dt=Ht,x=w):dt=dt.next=Ht,pe.lanes|=Ct,Fo|=Ct;bt=bt.next}while(bt!==null&&bt!==u);if(dt===null?x=w:dt.next=Q,!ei(w,l.memoizedState)&&(_n=!0,Pt&&(p=Ei,p!==null)))throw p;l.memoizedState=w,l.baseState=x,l.baseQueue=dt,y.lastRenderedState=w}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Ur(l){var u=Ke(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,w=u.memoizedState;if(S!==null){p.pending=null;var x=S=S.next;do w=l(w,x.action),x=x.next;while(x!==S);ei(w,u.memoizedState)||(_n=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),p.lastRenderedState=w}return[w,y]}function _s(l,u,p){var y=pe,S=Ke(),w=Ce;if(w){if(p===void 0)throw Error(s(407));p=p()}else p=u();var x=!ei((Wt||S).memoizedState,p);if(x&&(S.memoizedState=p,_n=!0),S=S.queue,dr(Tc.bind(null,y,S,l),[l]),S.getSnapshot!==u||x||oe!==null&&oe.memoizedState.tag&1){if(y.flags|=2048,ys(9,{destroy:void 0},Ec.bind(null,y,S,p,u),null),Ee===null)throw Error(s(349));w||(qo&127)!==0||Zh(y,u,p)}return p}function Zh(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=pe.updateQueue,u===null?(u=Lr(),pe.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function Ec(l,u,p,y){u.value=p,u.getSnapshot=y,lu(u)&&$h(l)}function Tc(l,u,p){return p(function(){lu(u)&&$h(l)})}function lu(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!ei(l,p)}catch{return!0}}function $h(l){var u=qi(l,2);u!==null&&Mn(u,l,2)}function zr(l){var u=Zn();if(typeof l=="function"){var p=l;if(l=p(),Oe){z(!0);try{p()}finally{z(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:l},u}function uu(l,u,p,y){return l.baseState=p,vc(l,Wt,typeof y=="function"?y:aa)}function fr(l,u,p,y,S){if(du(l))throw Error(s(485));if(l=u.action,l!==null){var w={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){w.listeners.push(x)}};$t.T!==null?p(!0):w.isTransition=!1,y(w),p=u.pending,p===null?(w.next=u.pending=w,Sc(u,w)):(w.next=p.next,u.pending=p.next=w)}}function Sc(l,u){var p=u.action,y=u.payload,S=l.state;if(u.isTransition){var w=$t.T,x={};$t.T=x;try{var Q=p(S,y),dt=$t.S;dt!==null&&dt(x,Q),ra(l,u,Q)}catch(bt){Oa(l,u,bt)}finally{w!==null&&x.types!==null&&(w.types=x.types),$t.T=w}}else try{w=p(S,y),ra(l,u,w)}catch(bt){Oa(l,u,bt)}}function ra(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){wo(l,u,y)},function(y){return Oa(l,u,y)}):wo(l,u,p)}function wo(l,u,p){u.status="fulfilled",u.value=p,ol(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,Sc(l,p)))}function Oa(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,ol(u),u=u.next;while(u!==y)}l.action=null}function ol(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function cu(l,u){return u}function Ro(l,u){if(Ce){var p=Ee.formState;if(p!==null){t:{var y=pe;if(Ce){if(bn){var S=wy(bn,As);if(S){bn=Ry(S),y=Rg(S);break t}}ke(y)}y=!1}y&&(u=p[0])}}p=Zn(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:u},p.queue=y,p=ef.bind(null,pe,y),y.dispatch=p,y=zr(!1);var w=Pa.bind(null,pe,!1,y.queue);return y=Zn(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,p=fr.bind(null,pe,S,w,p),S.dispatch=p,y.memoizedState=l,[u,p,!1]}function Ma(l){var u=Ke();return oa(u,Wt,l)}function oa(l,u,p){if(u=vc(l,u,cu)[0],l=hr(aa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Ci(u)}catch(x){throw x===Ti?Xa:x}else y=u;u=Ke();var S=u.queue,w=S.dispatch;return p!==u.memoizedState&&(pe.flags|=2048,ys(9,{destroy:void 0},hu.bind(null,S,p),null)),[y,w,l]}function hu(l,u){l.action=u}function Je(l){var u=Ke(),p=Wt;if(p!==null)return oa(u,p,l);Ke(),u=u.memoizedState,p=Ke();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function ys(l,u,p,y){return l={tag:l,create:p,deps:y,inst:u,next:null},u=pe.updateQueue,u===null&&(u=Lr(),pe.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function bc(){return Ke().memoizedState}function Br(l,u,p,y){var S=Zn();pe.flags|=l,S.memoizedState=ys(1|u,{destroy:void 0},p,y===void 0?null:y)}function ll(l,u,p,y){var S=Ke();y=y===void 0?null:y;var w=S.memoizedState.inst;Wt!==null&&y!==null&&_c(y,Wt.memoizedState.deps)?S.memoizedState=ys(u,w,p,y):(pe.flags|=l,S.memoizedState=ys(1|u,w,p,y))}function ul(l,u){Br(8390656,8,l,u)}function dr(l,u){ll(2048,8,l,u)}function mr(l){pe.flags|=4;var u=pe.updateQueue;if(u===null)u=Lr(),pe.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function Ii(l){var u=Ke().memoizedState;return mr({ref:u,nextImpl:l}),function(){if((Ae&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function Gr(l,u){return ll(4,2,l,u)}function pr(l,u){return ll(4,4,l,u)}function Co(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Ac(l,u,p){p=p!=null?p.concat([l]):null,ll(4,4,Co.bind(null,u,l),p)}function Hr(){}function fu(l,u){var p=Ke();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&_c(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function gr(l,u){var p=Ke();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&_c(u,y[1]))return y[0];if(y=l(),Oe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y}function cl(l,u,p){return p===void 0||(qo&1073741824)!==0&&(Ie&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=Oo(),pe.lanes|=l,Fo|=l,p)}function wc(l,u,p,y){return ei(p,u)?p:Vu.current!==null?(l=cl(l,p,y),ei(l,u)||(_n=!0),l):(qo&42)===0||(qo&1073741824)!==0&&(Ie&261930)===0?(_n=!0,l.memoizedState=p):(l=Oo(),pe.lanes|=l,Fo|=l,u)}function hl(l,u,p,y,S){var w=Ha();Re(w!==0&&8>w?w:8);var x=$t.T,Q={};$t.T=Q,Pa(l,!1,u,p);try{var dt=S(),bt=$t.S;if(bt!==null&&bt(Q,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var Pt=li(dt,y);dl(l,u,Pt,Tn(l))}else dl(l,u,y,Tn(l))}catch(Ct){dl(l,u,{then:function(){},status:"rejected",reason:Ct},Tn())}finally{Re(w),x!==null&&Q.types!==null&&(x.types=Q.types),$t.T=x}}function tf(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Cu,baseState:Cu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:Cu},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Rc(){return Gn(Iu)}function fl(){return Ke().memoizedState}function Cc(){return Ke().memoizedState}function Pd(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=Tn();l=ia(p);var y=Pr(u,l,p);y!==null&&(Mn(y,u,p),sl(y,u,p)),u={cache:ms()},l.payload=u;return}u=u.return}}function Ic(l,u,p){var y=Tn();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},du(l)?nf(u,p):(p=pc(l,u,p,y),p!==null&&(Mn(p,l,y),sf(p,u,y)))}function ef(l,u,p){var y=Tn();dl(l,u,p,y)}function dl(l,u,p,y){var S={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(du(l))nf(u,S);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var x=u.lastRenderedState,Q=w(x,p);if(S.hasEagerState=!0,S.eagerState=Q,ei(Q,x))return Ca(l,u,S,0),Ee===null&&Mr(),!1}catch{}if(p=pc(l,u,S,y),p!==null)return Mn(p,l,y),sf(p,u,y),!0}return!1}function Pa(l,u,p,y){if(y={lane:2,revertLane:je(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},du(l)){if(u)throw Error(s(479))}else u=pc(l,p,y,2),u!==null&&Mn(u,l,2)}function du(l){var u=l.alternate;return l===pe||u!==null&&u===pe}function nf(l,u){_e=ve=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function sf(l,u,p){if((p&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,L(l,p)}}function Nc(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:Jd({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}function Io(l,u,p,y,S,w,x){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,w,x):u.prototype&&u.prototype.isPureReactComponent?!na(p,y)||!na(S,w):!0}function is(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&xf.enqueueReplaceState(u,u.state,null)}function qr(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=Jd({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function mu(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function Fr(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function _(l,u,p){return p=ia(p),p.tag=3,p.payload={element:null},p.callback=function(){mu(l,u)},p}function R(l){return l=ia(l),l.tag=3,l}function I(l,u,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var w=y.value;l.payload=function(){return S(w)},l.callback=function(){Fr(u,p,y)}}var x=p.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){Fr(u,p,y),typeof S!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var Q=y.stack;this.componentDidCatch(y.value,{componentStack:Q!==null?Q:""})})}function P(l,u,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&rn(u,p,S,!0),p=js.current,p!==null){switch(p.tag){case 31:case 13:return Rs===null?zc():p.alternate===null&&Ln===0&&(Ln=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===oo?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),Hc(l,y,S)),!1;case 22:return p.flags|=65536,y===oo?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),Hc(l,y,S)),!1}throw Error(s(435,p.tag))}return Hc(l,y,S),zc(),!1}if(Ce)return u=js.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==vm&&(l=Error(s(422),{cause:y}),wa(Bt(l,p)))):(y!==vm&&(u=Error(s(423),{cause:y}),wa(Bt(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=Bt(y,p),S=_(l.stateNode,y,S),gc(l,S),Ln!==4&&(Ln=2)),!1;var w=Error(s(520),{cause:y});if(w=Bt(w,p),Mf===null?Mf=[w]:Mf.push(w),Ln!==4&&(Ln=2),u===null)return!0;y=Bt(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=_(p.stateNode,y,l),gc(p,l),!1;case 1:if(u=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(jo===null||!jo.has(w))))return p.flags|=65536,S&=-S,p.lanes|=S,S=R(S),I(S,l,p,y),gc(p,S),!1}p=p.return}while(p!==null);return!1}function $(l,u,p,y){u.child=l===null?Fg(u,null,p,y):Qi(u,l.child,p,y)}function ct(l,u,p,y,S){p=p.render;var w=u.ref;if("ref"in y){var x={};for(var Q in y)Q!=="ref"&&(x[Q]=y[Q])}else x=y;return sr(u),y=rl(l,u,p,x,w,S),Q=kr(),l!==null&&!_n?(ou(l,u,S),jr(l,u,S)):(Ce&&Q&&ut(u),u.flags|=1,$(l,u,y,S),u.child)}function Vt(l,u,p,y,S){if(l===null){var w=p.type;return typeof w=="function"&&!vu(w)&&w.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=w,fe(l,u,w,y,S)):(l=Vo(p.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(w=l.child,!af(l,S)){var x=w.memoizedProps;if(p=p.compare,p=p!==null?p:na,p(x,y)&&l.ref===u.ref)return jr(l,u,S)}return u.flags|=1,l=ca(w,y),l.ref=u.ref,l.return=u,u.child=l}function fe(l,u,p,y,S){if(l!==null){var w=l.memoizedProps;if(na(w,y)&&l.ref===u.ref)if(_n=!1,u.pendingProps=y=w,af(l,S))(l.flags&131072)!==0&&(_n=!0);else return u.lanes=l.lanes,jr(l,u,S)}return No(l,u,p,y,S)}function qn(l,u,p,y){var S=y.children,w=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,l!==null){for(y=u.child=l.child,S=0;y!==null;)S=S|y.lanes|y.childLanes,y=y.sibling;y=S&~w}else y=0,u.child=null;return gn(l,u,w,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&pn(u,w!==null?w.cachePool:null),w!==null?Vs(u,w):Da(),cr(u);else return y=u.lanes=536870912,gn(l,u,w!==null?w.baseLanes|p:p,p,y)}else w!==null?(pn(u,w.cachePool),Vs(u,w),Fi(),u.memoizedState=null):(l!==null&&pn(u,null),Da(),Fi());return $(l,u,S,p),u.child}function xe(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function gn(l,u,p,y,S){var w=ar();return w=w===null?null:{parent:$n?An._currentValue:An._currentValue2,pool:w},u.memoizedState={baseLanes:p,cachePool:w},l!==null&&pn(u,null),Da(),cr(u),l!==null&&rn(l,u,y,!0),u.childLanes=S,null}function vs(l,u){return u=ml({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function _r(l,u,p){return Qi(u,l.child,null,p),l=vs(u,u.pendingProps),l.flags|=2,ji(u),u.memoizedState=null,l}function yr(l,u,p){var y=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Ce){if(y.mode==="hidden")return l=vs(u,y),u.lanes=536870912,xe(null,l);if(ru(u),(l=bn)?(l=Ig(l,As),l!==null&&(u.memoizedState={dehydrated:l,treeContext:ja!==null?{id:Ki,overflow:Er}:null,retryLane:536870912,hydrationErrors:null},p=sg(l),p.return=u,u.child=p,vi=u,bn=null)):l=null,l===null)throw ke(u);return u.lanes=536870912,null}return vs(u,y)}var w=l.memoizedState;if(w!==null){var x=w.dehydrated;if(ru(u),S)if(u.flags&256)u.flags&=-257,u=_r(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(s(558));else if(_n||rn(l,u,p,!1),S=(p&l.childLanes)!==0,_n||S){if(y=Ee,y!==null&&(x=H(y,p),x!==0&&x!==w.retryLane))throw w.retryLane=x,qi(l,x),Mn(y,l,x),Cs;zc(),u=_r(l,u,p)}else l=w.treeContext,Sn&&(bn=Dy(x),vi=u,Ce=!0,ro=null,As=!1,l!==null&&zt(u,l)),u=vs(u,y),u.flags|=4096;return u}return l=ca(l.child,{mode:y.mode,children:y.children}),l.ref=u.ref,u.child=l,l.return=u,l}function Ls(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function No(l,u,p,y,S){return sr(u),p=rl(l,u,p,y,void 0,S),y=kr(),l!==null&&!_n?(ou(l,u,S),jr(l,u,S)):(Ce&&y&&ut(u),u.flags|=1,$(l,u,p,S),u.child)}function pu(l,u,p,y,S,w){return sr(u),u.updateQueue=null,p=Wn(u,y,p,S),ks(l),y=kr(),l!==null&&!_n?(ou(l,u,w),jr(l,u,w)):(Ce&&y&&ut(u),u.flags|=1,$(l,u,p,w),u.child)}function gu(l,u,p,y,S){if(sr(u),u.stateNode===null){var w=io,x=p.contextType;typeof x=="object"&&x!==null&&(w=Gn(x)),w=new p(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=xf,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},ui(u),x=p.contextType,w.context=typeof x=="object"&&x!==null?Gn(x):io,w.state=u.memoizedState,x=p.getDerivedStateFromProps,typeof x=="function"&&(Nc(u,p,x,y),w.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(x=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),x!==w.state&&xf.enqueueReplaceState(w,w.state,null),Vr(u,y,w,S),Ps(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){w=u.stateNode;var Q=u.memoizedProps,dt=qr(p,Q);w.props=dt;var bt=w.context,Pt=p.contextType;x=io,typeof Pt=="object"&&Pt!==null&&(x=Gn(Pt));var Ct=p.getDerivedStateFromProps;Pt=typeof Ct=="function"||typeof w.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,Pt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Q||bt!==x)&&is(u,w,y,x),da=!1;var Ht=u.memoizedState;w.state=Ht,Vr(u,y,w,S),Ps(),bt=u.memoizedState,Q||Ht!==bt||da?(typeof Ct=="function"&&(Nc(u,p,Ct,y),bt=u.memoizedState),(dt=da||Io(u,p,dt,y,Ht,bt,x))?(Pt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=bt),w.props=y,w.state=bt,w.context=x,y=dt):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,Na(l,u),x=u.memoizedProps,Pt=qr(p,x),w.props=Pt,Ct=u.pendingProps,Ht=w.context,bt=p.contextType,dt=io,typeof bt=="object"&&bt!==null&&(dt=Gn(bt)),Q=p.getDerivedStateFromProps,(bt=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==Ct||Ht!==dt)&&is(u,w,y,dt),da=!1,Ht=u.memoizedState,w.state=Ht,Vr(u,y,w,S),Ps();var de=u.memoizedState;x!==Ct||Ht!==de||da||l!==null&&l.dependencies!==null&&ea(l.dependencies)?(typeof Q=="function"&&(Nc(u,p,Q,y),de=u.memoizedState),(Pt=da||Io(u,p,Pt,y,Ht,de,dt)||l!==null&&l.dependencies!==null&&ea(l.dependencies))?(bt||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,de,dt),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,de,dt)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Ht===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Ht===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=de),w.props=y,w.state=de,w.context=dt,y=Pt):(typeof w.componentDidUpdate!="function"||x===l.memoizedProps&&Ht===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&Ht===l.memoizedState||(u.flags|=1024),y=!1)}return w=y,Ls(l,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,l!==null&&y?(u.child=Qi(u,l.child,null,S),u.child=Qi(u,null,p,S)):$(l,u,p,S),u.memoizedState=w.state,l=u.child):l=jr(l,u,S),l}function Q_(l,u,p,y){return hs(),u.flags|=256,$(l,u,p,y),u.child}function qp(l){return{baseLanes:l,cachePool:rr()}}function Fp(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Is),l}function jp(l,u,p){var y=u.pendingProps,S=!1,w=(u.flags&128)!==0,x;if((x=w)||(x=l!==null&&l.memoizedState===null?!1:(jn.current&2)!==0),x&&(S=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,l===null){if(Ce){if(S?xa(u):Fi(),(l=bn)?(l=Py(l,As),l!==null&&(u.memoizedState={dehydrated:l,treeContext:ja!==null?{id:Ki,overflow:Er}:null,retryLane:536870912,hydrationErrors:null},p=sg(l),p.return=u,u.child=p,vi=u,bn=null)):l=null,l===null)throw ke(u);return sm(l)?u.lanes=32:u.lanes=536870912,null}var Q=y.children;return y=y.fallback,S?(Fi(),S=u.mode,Q=ml({mode:"hidden",children:Q},S),y=Ba(y,S,p,null),Q.return=u,y.return=u,Q.sibling=y,u.child=Q,y=u.child,y.memoizedState=qp(p),y.childLanes=Fp(l,x,p),u.memoizedState=ku,xe(null,y)):(xa(u),Vd(u,Q))}var dt=l.memoizedState;if(dt!==null&&(Q=dt.dehydrated,Q!==null)){if(w)u.flags&256?(xa(u),u.flags&=-257,u=_u(l,u,p)):u.memoizedState!==null?(Fi(),u.child=l.child,u.flags|=128,u=null):(Fi(),Q=y.fallback,S=u.mode,y=ml({mode:"visible",children:y.children},S),Q=Ba(Q,S,p,null),Q.flags|=2,y.return=u,Q.return=u,y.sibling=Q,u.child=y,Qi(u,l.child,null,p),y=u.child,y.memoizedState=qp(p),y.childLanes=Fp(l,x,p),u.memoizedState=ku,u=xe(null,y));else if(xa(u),sm(Q))x=am(Q).digest,y=Error(s(419)),y.stack="",y.digest=x,wa({value:y,source:null,stack:null}),u=_u(l,u,p);else if(_n||rn(l,u,p,!1),x=(p&l.childLanes)!==0,_n||x){if(x=Ee,x!==null&&(y=H(x,p),y!==0&&y!==dt.retryLane))throw dt.retryLane=y,qi(l,y),Mn(x,l,y),Cs;Cl(Q)||zc(),u=_u(l,u,p)}else Cl(Q)?(u.flags|=192,u.child=l.child,u=null):(l=dt.treeContext,Sn&&(bn=xy(Q),vi=u,Ce=!0,ro=null,As=!1,l!==null&&zt(u,l)),u=Vd(u,y.children),u.flags|=4096);return u}return S?(Fi(),Q=y.fallback,S=u.mode,dt=l.child,w=dt.sibling,y=ca(dt,{mode:"hidden",children:y.children}),y.subtreeFlags=dt.subtreeFlags&65011712,w!==null?Q=ca(w,Q):(Q=Ba(Q,S,p,null),Q.flags|=2),Q.return=u,y.return=u,y.sibling=Q,u.child=y,xe(null,y),y=u.child,Q=l.child.memoizedState,Q===null?Q=qp(p):(S=Q.cachePool,S!==null?(dt=$n?An._currentValue:An._currentValue2,S=S.parent!==dt?{parent:dt,pool:dt}:S):S=rr(),Q={baseLanes:Q.baseLanes|p,cachePool:S}),y.memoizedState=Q,y.childLanes=Fp(l,x,p),u.memoizedState=ku,xe(l.child,y)):(xa(u),p=l.child,l=p.sibling,p=ca(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(x=u.deletions,x===null?(u.deletions=[l],u.flags|=16):x.push(l)),u.child=p,u.memoizedState=null,p)}function Vd(l,u){return u=ml({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function ml(l,u){return l=e(22,l,null,u),l.lanes=0,l}function _u(l,u,p){return Qi(u,l.child,null,p),l=Vd(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function X_(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),So(l.return,u,p)}function Dc(l,u,p,y,S,w){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S,treeForkCount:w}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=p,x.tailMode=S,x.treeForkCount=w)}function Kp(l,u,p){var y=u.pendingProps,S=y.revealOrder,w=y.tail;y=y.children;var x=jn.current,Q=(x&2)!==0;if(Q?(x=x&1|2,u.flags|=128):x&=1,D(jn,x),$(l,u,y,p),y=Ce?If:0,!Q&&l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&X_(l,p,u);else if(l.tag===19)X_(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&al(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),Dc(u,!1,S,p,w,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&al(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}Dc(u,!0,p,null,w,y);break;case"together":Dc(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function jr(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Fo|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(rn(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,p=ca(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=ca(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function af(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&ea(l)))}function Yp(l,u,p){switch(u.tag){case 3:ee(u,u.stateNode.containerInfo),Gi(u,An,l.memoizedState.cache),hs();break;case 27:case 5:be(u);break;case 4:ee(u,u.stateNode.containerInfo);break;case 10:Gi(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,ru(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(xa(u),u.flags|=128,null):(p&u.child.childLanes)!==0?jp(l,u,p):(xa(u),l=jr(l,u,p),l!==null?l.sibling:null);xa(u);break;case 19:var S=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(rn(l,u,p,!1),y=(p&u.childLanes)!==0),S){if(y)return Kp(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),D(jn,jn.current),y)break;return null;case 22:return u.lanes=0,qn(l,u,p,u.pendingProps);case 24:Gi(u,An,l.memoizedState.cache)}return jr(l,u,p)}function Qp(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)_n=!0;else{if(!af(l,p)&&(u.flags&128)===0)return _n=!1,Yp(l,u,p);_n=(l.flags&131072)!==0}else _n=!1,Ce&&(u.flags&1048576)!==0&&q(u,If,u.index);switch(u.lanes=0,u.tag){case 16:t:{var y=u.pendingProps;if(l=Or(u.elementType),u.type=l,typeof l=="function")vu(l)?(y=qr(l,y),u.tag=1,u=gu(null,u,l,y,p)):(u.tag=0,u=No(null,u,l,y,p));else{if(l!=null){var S=l.$$typeof;if(S===qc){u.tag=11,u=ct(null,u,l,y,p);break t}else if(S===Zd){u.tag=14,u=Vt(null,u,l,y,p);break t}}throw u=b(l)||l,Error(s(306,u,""))}}return u;case 0:return No(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,S=qr(y,u.pendingProps),gu(l,u,y,S,p);case 3:t:{if(ee(u,u.stateNode.containerInfo),l===null)throw Error(s(387));var w=u.pendingProps;S=u.memoizedState,y=S.element,Na(l,u),Vr(u,w,null,p);var x=u.memoizedState;if(w=x.cache,Gi(u,An,w),w!==S.cache&&En(u,[An],p,!0),Ps(),w=x.element,Sn&&S.isDehydrated)if(S={element:w,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Q_(l,u,w,p);break t}else if(w!==y){y=Bt(Error(s(424)),u),wa(y),u=Q_(l,u,w,p);break t}else for(Sn&&(bn=Ny(u.stateNode.containerInfo),vi=u,Ce=!0,ro=null,As=!0),p=Fg(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(hs(),w===y){u=jr(l,u,p);break t}$(l,u,w,p)}u=u.child}return u;case 26:if(qa)return Ls(l,u),l===null?(p=Mg(u.type,null,u.pendingProps,null))?u.memoizedState=p:Ce||(u.stateNode=um(u.type,u.pendingProps,Yi.current,u)):u.memoizedState=Mg(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(yi)return be(u),l===null&&yi&&Ce&&(y=u.stateNode=cm(u.type,u.pendingProps,Yi.current,Oi.current,!1),vi=u,As=!0,bn=Cg(u.type,y,bn)),$(l,u,u.pendingProps.children,p),Ls(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Ce&&(qy(u.type,u.pendingProps,Oi.current),(S=y=bn)&&(y=Oy(y,u.type,u.pendingProps,As),y!==null?(u.stateNode=y,vi=u,bn=Iy(y),As=!1,S=!0):S=!1),S||ke(u)),be(u),S=u.type,w=u.pendingProps,x=l!==null?l.memoizedProps:null,y=w.children,bs(S,w)?y=null:x!==null&&bs(S,x)&&(u.flags|=32),u.memoizedState!==null&&(S=rl(l,u,Ri,null,null,p),$n?Iu._currentValue=S:Iu._currentValue2=S),Ls(l,u),$(l,u,y,p),u.child;case 6:return l===null&&Ce&&(Og(u.pendingProps,Oi.current),(l=p=bn)&&(p=My(p,u.pendingProps,As),p!==null?(u.stateNode=p,vi=u,bn=null,l=!0):l=!1),l||ke(u)),null;case 13:return jp(l,u,p);case 4:return ee(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Qi(u,null,y,p):$(l,u,y,p),u.child;case 11:return ct(l,u,u.type,u.pendingProps,p);case 7:return $(l,u,u.pendingProps,p),u.child;case 8:return $(l,u,u.pendingProps.children,p),u.child;case 12:return $(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,Gi(u,u.type,y.value),$(l,u,y.children,p),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,sr(u),S=Gn(S),y=y(S),u.flags|=1,$(l,u,y,p),u.child;case 14:return Vt(l,u,u.type,u.pendingProps,p);case 15:return fe(l,u,u.type,u.pendingProps,p);case 19:return Kp(l,u,p);case 31:return yr(l,u,p);case 22:return qn(l,u,p,u.pendingProps);case 24:return sr(u),y=Gn(An),l===null?(S=ar(),S===null&&(S=Ee,w=ms(),S.pooledCache=w,w.refCount++,w!==null&&(S.pooledCacheLanes|=p),S=w),u.memoizedState={parent:y,cache:S},ui(u),Gi(u,An,S)):((l.lanes&p)!==0&&(Na(l,u),Vr(u,null,null,p),Ps()),S=l.memoizedState,w=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),Gi(u,An,y)):(y=w.cache,Gi(u,An,y),y!==S.cache&&En(u,[An],p,!0))),$(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function Va(l){l.flags|=4}function rf(l){ha&&(l.flags|=8)}function J_(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&8218)!==0||(l.subtreeFlags&8218)!==0)return!0;l=l.sibling}return!1}function Xp(l,u,p,y){if(De)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)Ef(l,p.stateNode);else if(!(p.tag===4||yi&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(ha)for(var S=u.child;S!==null;){if(S.tag===5){var w=S.stateNode;p&&y&&(w=Ay(w,S.type,S.memoizedProps)),Ef(l,w)}else if(S.tag===6)w=S.stateNode,p&&y&&(w=wg(w,S.memoizedProps)),Ef(l,w);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)w=S.child,w!==null&&(w.return=S),Xp(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function W_(l,u,p,y){var S=!1;if(ha)for(var w=u.child;w!==null;){if(w.tag===5){var x=w.stateNode;p&&y&&(x=Ay(x,w.type,w.memoizedProps)),bg(l,x)}else if(w.tag===6)x=w.stateNode,p&&y&&(x=wg(x,w.memoizedProps)),bg(l,x);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)S=w.child,S!==null&&(S.return=w),W_(l,w,!0,!0),S=!0;else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return S;w=w.return}w.sibling.return=w.return,w=w.sibling}return S}function Z_(l,u){if(ha&&J_(l,u)){l=u.stateNode;var p=l.containerInfo,y=Sg();W_(y,u,!1,!1),l.pendingChildren=y,Va(u),by(p,y)}}function Jp(l,u,p,y){if(De)l.memoizedProps!==y&&Va(u);else if(ha){var S=l.stateNode,w=l.memoizedProps;if((l=J_(l,u))||w!==y){var x=Oi.current;w=Sy(S,p,w,y,!l,null),w===S?u.stateNode=S:(rf(u),Gs(w,p,y,x)&&Va(u),u.stateNode=w,l&&Xp(w,u,!1,!1))}else u.stateNode=S}}function Es(l,u,p,y,S){if((l.mode&32)!==0&&(p===null?Tf(u,y):Qc(u,p,y))){if(l.flags|=16777216,(S&335544128)===S||hg(u,y))if(Pn(l.stateNode,u,y))l.flags|=8192;else if(Ne())l.flags|=8192;else throw ws=oo,Tm}else l.flags&=-16777217}function xc(l,u){if(Lg(u)){if(l.flags|=16777216,!Ug(u))if(Ne())l.flags|=8192;else throw ws=oo,Tm}else l.flags&=-16777217}function of(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?W():536870912,l.lanes|=u,ih|=u)}function Oc(l,u){if(!Ce)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function cn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function $_(l,u,p){var y=u.pendingProps;switch(It(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(u),null;case 1:return cn(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),ds(An),ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(ta(u)?Va(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,fs())),Z_(l,u),cn(u),null;case 26:if(qa){var S=u.type,w=u.memoizedState;return l===null?(Va(u),w!==null?(cn(u),xc(u,w)):(cn(u),Es(u,S,null,y,p))):w?w!==l.memoizedState?(Va(u),cn(u),xc(u,w)):(cn(u),u.flags&=-16777217):(w=l.memoizedProps,De?w!==y&&Va(u):Jp(l,u,S,y),cn(u),Es(u,S,w,y,p)),null}case 27:if(yi){if(vn(u),p=Yi.current,S=u.type,l!==null&&u.stateNode!=null)De?l.memoizedProps!==y&&Va(u):Jp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}l=Oi.current,ta(u)?xr(u,l):(l=cm(S,y,p,l,!0),u.stateNode=l,Va(u))}return cn(u),null}case 5:if(vn(u),S=u.type,l!==null&&u.stateNode!=null)Jp(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return cn(u),null}if(w=Oi.current,ta(u))xr(u,w),By(u.stateNode,S,y,w)&&(u.flags|=64);else{var x=ug(S,y,Yi.current,w,u);rf(u),Xp(x,u,!1,!1),u.stateNode=x,Gs(x,S,y,w)&&Va(u)}}return cn(u),Es(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)p=l.memoizedProps,De?p!==y&&Va(u):ha&&(p!==y?(l=Yi.current,p=Oi.current,rf(u),u.stateNode=Uo(y,l,p,u)):u.stateNode=l.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(l=Yi.current,p=Oi.current,ta(u)){if(!Sn)throw Error(s(176));if(l=u.stateNode,p=u.memoizedProps,y=null,S=vi,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}k2(l,p,u,y)||ke(u,!0)}else rf(u),u.stateNode=Uo(y,l,p,u)}return cn(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(y=ta(u),p!==null){if(l===null){if(!y)throw Error(s(318));if(!Sn)throw Error(s(556));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));Ng(l,u)}else hs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),l=!1}else p=fs(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(ji(u),u):(ji(u),null);if((u.flags&128)!==0)throw Error(s(558))}return cn(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=ta(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!Sn)throw Error(s(344));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));ky(S,u)}else hs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),S=!1}else S=fs(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(ji(u),u):(ji(u),null)}return ji(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool),w=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==S&&(y.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),of(u,u.updateQueue),cn(u),null);case 4:return ae(),Z_(l,u),l===null&&nn(u.stateNode.containerInfo),cn(u),null;case 10:return ds(u.type),cn(u),null;case 19:if(N(jn),y=u.memoizedState,y===null)return cn(u),null;if(S=(u.flags&128)!==0,w=y.rendering,w===null)if(S)Oc(y,!1);else{if(Ln!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(w=al(l),w!==null){for(u.flags|=128,Oc(y,!1),l=w.updateQueue,u.updateQueue=l,of(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)Yd(p,l),p=p.sibling;return D(jn,jn.current&1|2),Ce&&Qt(u,y.treeForkCount),u.child}l=l.sibling}y.tail!==null&&as()>Ul&&(u.flags|=128,S=!0,Oc(y,!1),u.lanes=4194304)}else{if(!S)if(l=al(w),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,of(u,l),Oc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Ce)return cn(u),null}else 2*as()-y.renderingStartTime>Ul&&p!==536870912&&(u.flags|=128,S=!0,Oc(y,!1),u.lanes=4194304);y.isBackwards?(w.sibling=u.child,u.child=w):(l=y.last,l!==null?l.sibling=w:u.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=as(),l.sibling=null,p=jn.current,D(jn,S?p&1|2:p&1),Ce&&Qt(u,y.treeForkCount),l):(cn(u),null);case 22:case 23:return ji(u),Hn(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(cn(u),u.subtreeFlags&6&&(u.flags|=8192)):cn(u),p=u.updateQueue,p!==null&&of(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&N(Dl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),ds(An),cn(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function Wp(l,u){switch(It(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ds(An),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return vn(u),null;case 31:if(u.memoizedState!==null){if(ji(u),u.alternate===null)throw Error(s(340));hs()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ji(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));hs()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return N(jn),null;case 4:return ae(),null;case 10:return ds(u.type),null;case 22:case 23:return ji(u),Hn(),l!==null&&N(Dl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return ds(An),null;case 25:return null;default:return null}}function ty(l,u){switch(It(u),u.tag){case 3:ds(An),ae();break;case 26:case 27:case 5:vn(u);break;case 4:ae();break;case 31:u.memoizedState!==null&&ji(u);break;case 13:ji(u);break;case 19:N(jn);break;case 10:ds(u.type);break;case 22:case 23:ji(u),Hn(),l!==null&&N(Dl);break;case 24:ds(An)}}function Kr(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&l)===l){y=void 0;var w=p.create,x=p.inst;y=w(),x.destroy=y}p=p.next}while(p!==S)}}catch(Q){re(u,u.return,Q)}}function Yr(l,u,p){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var w=S.next;y=w;do{if((y.tag&l)===l){var x=y.inst,Q=x.destroy;if(Q!==void 0){x.destroy=void 0,S=u;var dt=p,bt=Q;try{bt()}catch(Pt){re(S,dt,Pt)}}}y=y.next}while(y!==w)}}catch(Pt){re(u,u.return,Pt)}}function Mc(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{sa(u,p)}catch(y){re(l,l.return,y)}}}function kd(l,u,p){p.props=qr(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){re(l,u,y)}}function Pc(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=jc(l.stateNode);break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(S){re(l,u,S)}}function ss(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){re(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){re(l,u,S)}else p.current=null}function yu(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{my(y,u,p,l)}catch(S){re(l,l.return,S)}}function lf(l,u,p){try{py(l.stateNode,l.type,p,u,l)}catch(y){re(l,l.return,y)}}function Zp(l){return l.tag===5||l.tag===3||(qa?l.tag===26:!1)||(yi?l.tag===27&&Nu(l.type):!1)||l.tag===4}function Do(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Zp(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(yi&&l.tag===27&&Nu(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ld(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?_y(p,l,u):yg(p,l);else if(y!==4&&(yi&&y===27&&Nu(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(Ld(l,u,p),l=l.sibling;l!==null;)Ld(l,u,p),l=l.sibling}function uf(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?gy(p,l,u):_g(p,l);else if(y!==4&&(yi&&y===27&&Nu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(uf(l,u,p),l=l.sibling;l!==null;)uf(l,u,p),l=l.sibling}function $p(l,u,p){l=l.containerInfo;try{Ag(l,p)}catch(y){re(u,u.return,y)}}function ey(l){var u=l.stateNode,p=l.memoizedProps;try{hi(l.type,p,u,l)}catch(y){re(l,l.return,y)}}function O2(l,u){for($d(l.containerInfo),ni=u;ni!==null;)if(l=ni,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,ni=u;else for(;ni!==null;){l=ni;var p=l.alternate;switch(u=l.flags,l.tag){case 0:if((u&4)!==0&&(u=l.updateQueue,u=u!==null?u.events:null,u!==null))for(var y=0;y<u.length;y++){var S=u[y];S.ref.impl=S.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0,y=l,S=p.memoizedProps,p=p.memoizedState;var w=y.stateNode;try{var x=qr(y.type,S);u=w.getSnapshotBeforeUpdate(x,p),w.__reactInternalSnapshotBeforeUpdate=u}catch(Q){re(y,y.return,Q)}}break;case 3:(u&1024)!==0&&De&&Tg(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=l.sibling,u!==null){u.return=l.return,ni=u;break}ni=l.return}}function ny(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ts(l,p),y&4&&Kr(5,p);break;case 1:if(Ts(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(x){re(p,p.return,x)}else{var S=qr(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(x){re(p,p.return,x)}}y&64&&Mc(p),y&512&&Pc(p,p.return);break;case 3:if(Ts(l,p),y&64&&(y=p.updateQueue,y!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=jc(p.child.stateNode);break;case 1:l=p.child.stateNode}try{sa(y,l)}catch(x){re(p,p.return,x)}}break;case 27:yi&&u===null&&y&4&&ey(p);case 26:case 5:if(Ts(l,p),u===null){if(y&4)yu(p);else if(y&64){l=p.type,u=p.memoizedProps,S=p.stateNode;try{Uy(S,l,u,p)}catch(x){re(p,p.return,x)}}}y&512&&Pc(p,p.return);break;case 12:Ts(l,p);break;case 31:Ts(l,p),y&4&&La(l,p);break;case 13:Ts(l,p),y&4&&hf(l,p),y&64&&(y=p.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(p=M2.bind(null,p),rm(y,p))));break;case 22:if(y=p.memoizedState!==null||Kn,!y){u=u!==null&&u.memoizedState!==null||Yn,S=Kn;var w=Yn;Kn=y,(Yn=u)&&!w?za(l,p,(p.subtreeFlags&8772)!==0):Ts(l,p),Kn=S,Yn=w}break;case 30:break;default:Ts(l,p)}}function tg(l){var u=l.alternate;u!==null&&(l.alternate=null,tg(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&tm(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function ka(l,u,p){for(p=p.child;p!==null;)cf(l,u,p),p=p.sibling}function cf(l,u,p){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(Ou,p)}catch{}switch(p.tag){case 26:if(qa){Yn||ss(p,u),ka(l,u,p),p.memoizedState?Il(p.memoizedState):p.stateNode&&kg(p.stateNode);break}case 27:if(yi){Yn||ss(p,u);var y=kn,S=ii;Nu(p.type)&&(kn=p.stateNode,ii=!1),ka(l,u,p),xi(p.stateNode),kn=y,ii=S;break}case 5:Yn||ss(p,u);case 6:if(De){if(y=kn,S=ii,kn=null,ka(l,u,p),kn=y,ii=S,kn!==null)if(ii)try{vg(kn,p.stateNode)}catch(w){re(p,u,w)}else try{yy(kn,p.stateNode)}catch(w){re(p,u,w)}}else ka(l,u,p);break;case 18:De&&kn!==null&&(ii?om(kn,p.stateNode):xg(kn,p.stateNode));break;case 4:De?(y=kn,S=ii,kn=p.stateNode.containerInfo,ii=!0,ka(l,u,p),kn=y,ii=S):(ha&&$p(p.stateNode,p,Sg()),ka(l,u,p));break;case 0:case 11:case 14:case 15:Yr(2,p,u),Yn||Yr(4,p,u),ka(l,u,p);break;case 1:Yn||(ss(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&kd(p,u,y)),ka(l,u,p);break;case 21:ka(l,u,p);break;case 22:Yn=(y=Yn)||p.memoizedState!==null,ka(l,u,p),Yn=y;break;default:ka(l,u,p)}}function La(l,u){if(Sn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{L2(l)}catch(p){re(u,u.return,p)}}}function hf(l,u){if(Sn&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{U2(l)}catch(p){re(u,u.return,p)}}function Ua(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Kg),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Kg),u;default:throw Error(s(435,l.tag))}}function xo(l,u){var p=Ua(l);u.forEach(function(y){if(!p.has(y)){p.add(y);var S=P2.bind(null,l,y);y.then(S,S)}})}function Ni(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],w=l,x=u;if(De){var Q=x;t:for(;Q!==null;){switch(Q.tag){case 27:if(yi){if(Nu(Q.type)){kn=Q.stateNode,ii=!1;break t}break}case 5:kn=Q.stateNode,ii=!1;break t;case 3:case 4:kn=Q.stateNode.containerInfo,ii=!0;break t}Q=Q.return}if(kn===null)throw Error(s(160));cf(w,x,S),kn=null,ii=!1}else cf(w,x,S);w=S.alternate,w!==null&&(w.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)ff(u,l),u=u.sibling}function ff(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ni(u,l),Di(l),y&4&&(Yr(3,l,l.return),Kr(3,l),Yr(5,l,l.return));break;case 1:Ni(u,l),Di(l),y&512&&(Yn||p===null||ss(p,p.return)),y&64&&Kn&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(qa){var S=Ze;if(Ni(u,l),Di(l),y&512&&(Yn||p===null||ss(p,p.return)),y&4){y=p!==null?p.memoizedState:null;var w=l.memoizedState;p===null?w===null?l.stateNode===null?l.stateNode=Fy(S,l.type,l.memoizedProps,l):Vg(S,l.type,l.stateNode):l.stateNode=Pg(S,w,l.memoizedProps):y!==w?(y===null?p.stateNode!==null&&kg(p.stateNode):Il(y),w===null?Vg(S,l.type,l.stateNode):Pg(S,w,l.memoizedProps)):w===null&&l.stateNode!==null&&lf(l,l.memoizedProps,p.memoizedProps)}break}case 27:if(yi){Ni(u,l),Di(l),y&512&&(Yn||p===null||ss(p,p.return)),p!==null&&y&4&&lf(l,l.memoizedProps,p.memoizedProps);break}case 5:if(Ni(u,l),Di(l),y&512&&(Yn||p===null||ss(p,p.return)),De){if(l.flags&32){S=l.stateNode;try{Eg(S)}catch(Ct){re(l,l.return,Ct)}}y&4&&l.stateNode!=null&&(S=l.memoizedProps,lf(l,S,p!==null?p.memoizedProps:S)),y&1024&&(Zc=!0)}else ha&&l.alternate!==null&&(l.alternate.stateNode=l.stateNode);break;case 6:if(Ni(u,l),Di(l),y&4&&De){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,p=p!==null?p.memoizedProps:y,S=l.stateNode;try{dy(S,p,y)}catch(Ct){re(l,l.return,Ct)}}break;case 3:if(qa?(jy(),S=Ze,Ze=Af(u.containerInfo),Ni(u,l),Ze=S):Ni(u,l),Di(l),y&4){if(De&&Sn&&p!==null&&p.memoizedState.isDehydrated)try{zy(u.containerInfo)}catch(Ct){re(l,l.return,Ct)}if(ha){y=u.containerInfo,p=u.pendingChildren;try{Ag(y,p)}catch(Ct){re(l,l.return,Ct)}}}Zc&&(Zc=!1,Ud(l));break;case 4:qa?(p=Ze,Ze=Af(l.stateNode.containerInfo),Ni(u,l),Di(l),Ze=p):(Ni(u,l),Di(l)),y&4&&ha&&$p(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Ni(u,l),Di(l);break;case 31:Ni(u,l),Di(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xo(l,y)));break;case 13:Ni(u,l),Di(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Pf=as()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xo(l,y)));break;case 22:S=l.memoizedState!==null;var x=p!==null&&p.memoizedState!==null,Q=Kn,dt=Yn;if(Kn=Q||S,Yn=dt||x,Ni(u,l),Yn=dt,Kn=Q,Di(l),y&8192&&(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(p===null||x||Kn||Yn||pl(l)),De)){t:if(p=null,De)for(u=l;;){if(u.tag===5||qa&&u.tag===26){if(p===null){x=p=u;try{w=x.stateNode,S?V2(w):Ey(x.stateNode,x.memoizedProps)}catch(Ct){re(x,x.return,Ct)}}}else if(u.tag===6){if(p===null){x=u;try{var bt=x.stateNode;S?vy(bt):Ty(bt,x.memoizedProps)}catch(Ct){re(x,x.return,Ct)}}}else if(u.tag===18){if(p===null){x=u;try{var Pt=x.stateNode;S?Gy(Pt):Hy(x.stateNode)}catch(Ct){re(x,x.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,xo(l,p))));break;case 19:Ni(u,l),Di(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xo(l,y)));break;case 30:break;case 21:break;default:Ni(u,l),Di(l)}}function Di(l){var u=l.flags;if(u&2){try{for(var p,y=l.return;y!==null;){if(Zp(y)){p=y;break}y=y.return}if(De){if(p==null)throw Error(s(160));switch(p.tag){case 27:if(yi){var S=p.stateNode,w=Do(l);uf(l,w,S);break}case 5:var x=p.stateNode;p.flags&32&&(Eg(x),p.flags&=-33);var Q=Do(l);uf(l,Q,x);break;case 3:case 4:var dt=p.stateNode.containerInfo,bt=Do(l);Ld(l,bt,dt);break;default:throw Error(s(161))}}}catch(Pt){re(l,l.return,Pt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Ud(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Ud(u),u.tag===5&&u.flags&1024&&dg(u.stateNode),l=l.sibling}}function Ts(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ny(l,u.alternate,u),u=u.sibling}function pl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Yr(4,u,u.return),pl(u);break;case 1:ss(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&kd(u,u.return,p),pl(u);break;case 27:yi&&xi(u.stateNode);case 26:case 5:ss(u,u.return),pl(u);break;case 22:u.memoizedState===null&&pl(u);break;case 30:pl(u);break;default:pl(u)}l=l.sibling}}function za(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,w=u,x=w.flags;switch(w.tag){case 0:case 11:case 15:za(S,w,p),Kr(4,w);break;case 1:if(za(S,w,p),y=w,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(bt){re(y,y.return,bt)}if(y=w,S=y.updateQueue,S!==null){var Q=y.stateNode;try{var dt=S.shared.hiddenCallbacks;if(dt!==null)for(S.shared.hiddenCallbacks=null,S=0;S<dt.length;S++)ur(dt[S],Q)}catch(bt){re(y,y.return,bt)}}p&&x&64&&Mc(w),Pc(w,w.return);break;case 27:yi&&ey(w);case 26:case 5:za(S,w,p),p&&y===null&&x&4&&yu(w),Pc(w,w.return);break;case 12:za(S,w,p);break;case 31:za(S,w,p),p&&x&4&&La(S,w);break;case 13:za(S,w,p),p&&x&4&&hf(S,w);break;case 22:w.memoizedState===null&&za(S,w,p),Pc(w,w.return);break;case 30:break;default:za(S,w,p)}u=u.sibling}}function gl(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&es(p))}function eg(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&es(l))}function On(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)zd(l,u,p,y),u=u.sibling}function zd(l,u,p,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:On(l,u,p,y),S&2048&&Kr(9,u);break;case 1:On(l,u,p,y);break;case 3:On(l,u,p,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&es(l)));break;case 12:if(S&2048){On(l,u,p,y),l=u.stateNode;try{var w=u.memoizedProps,x=w.id,Q=w.onPostCommit;typeof Q=="function"&&Q(x,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(dt){re(u,u.return,dt)}}else On(l,u,p,y);break;case 31:On(l,u,p,y);break;case 13:On(l,u,p,y);break;case 23:break;case 22:w=u.stateNode,x=u.alternate,u.memoizedState!==null?w._visibility&2?On(l,u,p,y):Vc(l,u):w._visibility&2?On(l,u,p,y):(w._visibility|=2,Us(l,u,p,y,(u.subtreeFlags&10256)!==0||!1)),S&2048&&gl(x,u);break;case 24:On(l,u,p,y),S&2048&&eg(u.alternate,u);break;default:On(l,u,p,y)}}function Us(l,u,p,y,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=l,x=u,Q=p,dt=y,bt=x.flags;switch(x.tag){case 0:case 11:case 15:Us(w,x,Q,dt,S),Kr(8,x);break;case 23:break;case 22:var Pt=x.stateNode;x.memoizedState!==null?Pt._visibility&2?Us(w,x,Q,dt,S):Vc(w,x):(Pt._visibility|=2,Us(w,x,Q,dt,S)),S&&bt&2048&&gl(x.alternate,x);break;case 24:Us(w,x,Q,dt,S),S&&bt&2048&&eg(x.alternate,x);break;default:Us(w,x,Q,dt,S)}u=u.sibling}}function Vc(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,S=y.flags;switch(y.tag){case 22:Vc(p,y),S&2048&&gl(y.alternate,y);break;case 24:Vc(p,y),S&2048&&eg(y.alternate,y);break;default:Vc(p,y)}u=u.sibling}}function Qr(l,u,p){if(l.subtreeFlags&pa)for(l=l.child;l!==null;)_l(l,u,p),l=l.sibling}function _l(l,u,p){switch(l.tag){case 26:if(Qr(l,u,p),l.flags&pa)if(l.memoizedState!==null)Ky(p,Ze,l.memoizedState,l.memoizedProps);else{var y=l.stateNode,S=l.type;l=l.memoizedProps,((u&335544128)===u||hg(S,l))&&em(p,y,S,l)}break;case 5:Qr(l,u,p),l.flags&pa&&(y=l.stateNode,S=l.type,l=l.memoizedProps,((u&335544128)===u||hg(S,l))&&em(p,y,S,l));break;case 3:case 4:qa?(y=Ze,Ze=Af(l.stateNode.containerInfo),Qr(l,u,p),Ze=y):Qr(l,u,p);break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=pa,pa=16777216,Qr(l,u,p),pa=y):Qr(l,u,p));break;default:Qr(l,u,p)}}function Bd(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function kc(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];ni=y,la(y,l)}Bd(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Gd(l),l=l.sibling}function Gd(l){switch(l.tag){case 0:case 11:case 15:kc(l),l.flags&2048&&Yr(9,l,l.return);break;case 3:kc(l);break;case 12:kc(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,df(l)):kc(l);break;default:kc(l)}}function df(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];ni=y,la(y,l)}Bd(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Yr(8,u,u.return),df(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,df(u));break;default:df(u)}l=l.sibling}}function la(l,u){for(;ni!==null;){var p=ni;switch(p.tag){case 0:case 11:case 15:Yr(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:es(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,ni=y;else t:for(p=l;ni!==null;){y=ni;var S=y.sibling,w=y.return;if(tg(y),y===p){ni=null;break t}if(S!==null){S.return=w,ni=S;break t}ni=w}}}function yl(l){var u=me(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(l=ti(l),l===null)throw Error(s(362));return l.stateNode.current}function vl(l,u){var p=l.tag;switch(u.$$typeof){case Wa:if(l.type===u.value)return!0;break;case th:t:{for(u=u.value,l=[l,0],p=0;p<l.length;){var y=l[p++],S=y.tag,w=l[p++],x=u[w];if(S!==5&&S!==26&&S!==27||!Rl(y)){for(;x!=null&&vl(y,x);)w++,x=u[w];if(w===u.length){u=!0;break t}else for(y=y.child;y!==null;)l.push(y,w),y=y.sibling}}u=!1}return u;case eh:if((p===5||p===26||p===27)&&gg(l.stateNode,u.value))return!0;break;case Pl:if((p===5||p===6||p===26||p===27)&&(l=Sf(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Of:if((p===5||p===26||p===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Lc(l){switch(l.$$typeof){case Wa:return"<"+(b(l.value)||"Unknown")+">";case th:return":has("+(Lc(l)||"")+")";case eh:return'[role="'+l.value+'"]';case Pl:return'"'+l.value+'"';case Of:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function Uc(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var S=l[y++],w=S.tag,x=l[y++],Q=u[x];if(w!==5&&w!==26&&w!==27||!Rl(S)){for(;Q!=null&&vl(S,Q);)x++,Q=u[x];if(x===u.length)p.push(S);else for(S=S.child;S!==null;)l.push(S,x),S=S.sibling}}return p}function zs(l,u){if(!_i)throw Error(s(363));l=yl(l),l=Uc(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++],S=y.tag;if(S===5||S===26||S===27)Rl(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}function Tn(){return(Ae&2)!==0&&Ie!==0?Ie&-Ie:$t.T!==null?je():Yc()}function Oo(){if(Is===0)if((Ie&536870912)===0||Ce){var l=xu;xu<<=1,(xu&3932160)===0&&(xu=262144),Is=l}else Is=536870912;return l=js.current,l!==null&&(l.flags|=32),Is}function Mn(l,u,p){(l===Ee&&($e===2||$e===9)||l.cancelPendingCommit!==null)&&(Fn(l,0),Jr(l,Ie,Is,!1)),rt(l,p),((Ae&2)===0||l!==Ee)&&(l===Ee&&((Ae&2)===0&&(Ll|=p),Ln===4&&Jr(l,Ie,Is,!1)),Hi(l))}function vr(l,u,p){if((Ae&6)!==0)throw Error(s(327));var y=!p&&(u&127)===0&&(u&l.expiredLanes)===0||j(l,u),S=y?ay(l,u):Wr(l,u,!0),w=y;do{if(S===0){Vl&&!y&&Jr(l,u,0,!1);break}else{if(p=l.current.alternate,w&&!iy(p)){S=Wr(l,u,!1),w=!1;continue}if(S===2){if(w=u,l.errorRecoveryDisabledLanes&w)var x=0;else x=l.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;t:{var Q=l;S=Mf;var dt=Sn&&Q.current.memoizedState.isDehydrated;if(dt&&(Fn(Q,x).flags|=256),x=Wr(Q,x,!1),x!==2){if(kl&&!dt){Q.errorRecoveryDisabledLanes|=w,Ll|=w,S=4;break t}w=Ks,Ks=S,w!==null&&(Ks===null?Ks=w:Ks.push.apply(Ks,w))}S=x}if(w=!1,S!==2)continue}}if(S===1){Fn(l,0),Jr(l,u,0,!0);break}t:{switch(y=l,w=S,w){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Jr(y,u,Is,!br);break t;case 2:Ks=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(S=Pf+300-as(),10<S)){if(Jr(y,u,Is,!br),F(y,0,!0)!==0)break t;ho=u,y.timeoutHandle=cg(Xr.bind(null,y,p,Ks,Vf,bm,u,Is,Ll,ih,br,w,"Throttled",-0,0),S);break t}Xr(y,p,Ks,Vf,bm,u,Is,Ll,ih,br,w,null,-0,0)}}break}while(!0);Hi(l)}function Xr(l,u,p,y,S,w,x,Q,dt,bt,Pt,Ct,Ht,de){if(l.timeoutHandle=Hs,Ct=u.subtreeFlags,Ct&8192||(Ct&16785408)===16785408){Ct=fg(),_l(u,w,Ct);var Pi=(w&62914560)===w?Pf-as():(w&4194048)===w?Uu-as():0;if(Pi=fy(Ct,Pi),Pi!==null){ho=w,l.cancelPendingCommit=Pi($r.bind(null,l,u,w,p,y,S,x,Q,dt,Pt,Ct,null,Ht,de)),Jr(l,w,x,!bt);return}}$r(l,u,w,p,y,S,x,Q,dt)}function iy(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],w=S.getSnapshot;S=S.value;try{if(!ei(w(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Jr(l,u,p,y){u&=~nh,u&=~Ll,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var w=31-qs(S),x=1<<w;y[w]=-1,S&=~x}p!==0&&M(l,p,u)}function Hd(){return(Ae&6)===0?(ps(0),!1):!0}function qd(){if(we!==null){if($e===0)var l=we.return;else l=we,Tr=fn=null,Fe(l),xl=null,Mu=0,l=we;for(;l!==null;)ty(l.alternate,l),l=l.return;we=null}}function Fn(l,u){var p=l.timeoutHandle;p!==Hs&&(l.timeoutHandle=Hs,hy(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),ho=0,qd(),Ee=l,we=p=ca(l.current,null),Ie=u,$e=0,fi=null,br=!1,Vl=j(l,u),kl=!1,ih=Is=nh=Ll=Fo=Ln=0,Ks=Mf=null,bm=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-qs(y),w=1<<S;u|=l[S],y&=~w}return co=u,Mr(),p}function hn(l,u){pe=null,$t.H=ma,u===Ti||u===Xa?(u=or(),$e=3):u===Tm?(u=or(),$e=4):$e=u===Cs?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,fi=u,we===null&&(Ln=1,mu(l,Bt(u,l.current)))}function Ne(){var l=js.current;return l===null?!0:(Ie&4194048)===Ie?Rs===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?l===Rs:!1}function Mo(){var l=$t.H;return $t.H=ma,l===null?ma:l}function ua(){var l=$t.A;return $t.A=$c,l}function zc(){Ln=4,br||(Ie&4194048)!==Ie&&js.current!==null||(Vl=!0),(Fo&134217727)===0&&(Ll&134217727)===0||Ee===null||Jr(Ee,Ie,Is,!1)}function Wr(l,u,p){var y=Ae;Ae|=2;var S=Mo(),w=ua();(Ee!==l||Ie!==u)&&(Vf=null,Fn(l,u)),u=!1;var x=Ln;t:do try{if($e!==0&&we!==null){var Q=we,dt=fi;switch($e){case 8:qd(),x=6;break t;case 3:case 2:case 9:case 6:js.current===null&&(u=!0);var bt=$e;if($e=0,fi=null,Zr(l,Q,dt,bt),p&&Vl){x=0;break t}break;default:bt=$e,$e=0,fi=null,Zr(l,Q,dt,bt)}}sy(),x=Ln;break}catch(Pt){hn(l,Pt)}while(!0);return u&&l.shellSuspendCounter++,Tr=fn=null,Ae=y,$t.H=S,$t.A=w,we===null&&(Ee=null,Ie=0,Mr()),x}function sy(){for(;we!==null;)El(we)}function ay(l,u){var p=Ae;Ae|=2;var y=Mo(),S=ua();Ee!==l||Ie!==u?(Vf=null,Ul=as()+500,Fn(l,u)):Vl=j(l,u);t:do try{if($e!==0&&we!==null){u=we;var w=fi;e:switch($e){case 1:$e=0,fi=null,Zr(l,u,w,1);break;case 2:case 9:if(Ra(w)){$e=0,fi=null,Fd(u);break}u=function(){$e!==2&&$e!==9||Ee!==l||($e=7),Hi(l)},w.then(u,u);break t;case 3:$e=7;break t;case 4:$e=5;break t;case 7:Ra(w)?($e=0,fi=null,Fd(u)):($e=0,fi=null,Zr(l,u,w,7));break;case 5:var x=null;switch(we.tag){case 26:x=we.memoizedState;case 5:case 27:var Q=we,dt=Q.type,bt=Q.pendingProps;if(x?Ug(x):Pn(Q.stateNode,dt,bt)){$e=0,fi=null;var Pt=Q.sibling;if(Pt!==null)we=Pt;else{var Ct=Q.return;Ct!==null?(we=Ct,Gc(Ct)):we=null}break e}}$e=0,fi=null,Zr(l,u,w,5);break;case 6:$e=0,fi=null,Zr(l,u,w,6);break;case 8:qd(),Ln=6;break t;default:throw Error(s(462))}}Bc();break}catch(Ht){hn(l,Ht)}while(!0);return Tr=fn=null,$t.H=y,$t.A=S,Ae=p,we!==null?0:(Ee=null,Ie=0,Mr(),Ln)}function Bc(){for(;we!==null&&!Qy();)El(we)}function El(l){var u=Qp(l.alternate,l,co);l.memoizedProps=l.pendingProps,u===null?Gc(l):we=u}function Fd(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=pu(p,u,u.pendingProps,u.type,void 0,Ie);break;case 11:u=pu(p,u,u.pendingProps,u.type.render,u.ref,Ie);break;case 5:Fe(u);default:ty(p,u),u=we=Yd(u,co),u=Qp(p,u,co)}l.memoizedProps=l.pendingProps,u===null?Gc(l):we=u}function Zr(l,u,p,y){Tr=fn=null,Fe(u),xl=null,Mu=0;var S=u.return;try{if(P(l,S,u,p,Ie)){Ln=1,mu(l,Bt(p,l.current)),we=null;return}}catch(w){if(S!==null)throw we=S,w;Ln=1,mu(l,Bt(p,l.current)),we=null;return}u.flags&32768?(Ce||y===1?l=!0:Vl||(Ie&536870912)!==0?l=!1:(br=l=!0,(y===2||y===9||y===3||y===6)&&(y=js.current,y!==null&&y.tag===13&&(y.flags|=16384))),Tl(u,l)):Gc(u)}function Gc(l){var u=l;do{if((u.flags&32768)!==0){Tl(u,br);return}l=u.return;var p=$_(u.alternate,u,co);if(p!==null){we=p;return}if(u=u.sibling,u!==null){we=u;return}we=u=l}while(u!==null);Ln===0&&(Ln=5)}function Tl(l,u){do{var p=Wp(l.alternate,l);if(p!==null){p.flags&=32767,we=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){we=l;return}we=l=p}while(l!==null);Ln=6,we=null}function $r(l,u,p,y,S,w,x,Q,dt){l.cancelPendingCommit=null;do eo();while(di!==0);if((Ae&6)!==0)throw Error(s(327));if(u!==null){if(u===l.current)throw Error(s(177));if(w=u.lanes|u.childLanes,w|=Pu,V(l,p,w,x,Q,dt),l===Ee&&(we=Ee=null,Ie=0),zu=u,Ko=l,ho=p,sh=w,Am=S,Yg=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,ci(Rf,function(){return mf(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=$t.T,$t.T=null,S=Ha(),Re(2),x=Ae,Ae|=4;try{O2(l,u,p)}finally{Ae=x,Re(S),$t.T=y}}di=1,Po(),to(),jd()}}function Po(){if(di===1){di=0;var l=Ko,u=zu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=$t.T,$t.T=null;var y=Ha();Re(2);var S=Ae;Ae|=4;try{ff(u,l),cy(l.containerInfo)}finally{Ae=S,Re(y),$t.T=p}}l.current=u,di=2}}function to(){if(di===2){di=0;var l=Ko,u=zu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=$t.T,$t.T=null;var y=Ha();Re(2);var S=Ae;Ae|=4;try{ny(l,u.alternate,u)}finally{Ae=S,Re(y),$t.T=p}}di=3}}function jd(){if(di===4||di===3){di=0,Bg();var l=Ko,u=zu,p=ho,y=Yg;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?di=5:(di=0,zu=Ko=null,Kd(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(jo=null),K(p),u=u.stateNode,Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(Ou,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=$t.T,S=Ha(),Re(2),$t.T=null;try{for(var w=l.onRecoverableError,x=0;x<y.length;x++){var Q=y[x];w(Q.value,{componentStack:Q.stack})}}finally{$t.T=u,Re(S)}}(ho&3)!==0&&eo(),Hi(l),S=l.pendingLanes,(p&261930)!==0&&(S&42)!==0?l===kf?Ge++:(Ge=0,kf=l):Ge=0,Sn&&bf(),ps(0)}}function Kd(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,es(u)))}function eo(){return Po(),to(),jd(),mf()}function mf(){if(di!==5)return!1;var l=Ko,u=sh;sh=0;var p=K(ho),y=32>p?32:p;p=$t.T;var S=Ha();try{Re(y),$t.T=null,y=Am,Am=null;var w=Ko,x=ho;if(di=0,zu=Ko=null,ho=0,(Ae&6)!==0)throw Error(s(331));var Q=Ae;if(Ae|=4,Gd(w.current),zd(w,w.current,x,y),Ae=Q,ps(0,!1),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(Ou,w)}catch{}return!0}finally{Re(S),$t.T=p,Kd(l,u)}}function Sl(l,u,p){u=Bt(p,u),u=_(l.stateNode,u,2),l=Pr(l,u,2),l!==null&&(rt(l,2),Hi(l))}function re(l,u,p){if(l.tag===3)Sl(l,l,p);else for(;u!==null;){if(u.tag===3){Sl(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(jo===null||!jo.has(y))){l=Bt(p,l),p=R(2),y=Pr(u,p,2),y!==null&&(I(p,y,u,l),rt(y,2),Hi(y));break}}u=u.return}}function Hc(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new ga;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(p)||(kl=!0,S.add(p),l=ry.bind(null,l,u,p),u.then(l,l))}function ry(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Ee===l&&(Ie&p)===p&&(Ln===4||Ln===3&&(Ie&62914560)===Ie&&300>as()-Pf?(Ae&2)===0&&Fn(l,0):nh|=p,ih===Ie&&(ih=0)),Hi(l)}function oy(l,u){u===0&&(u=W()),l=qi(l,u),l!==null&&(rt(l,u),Hi(l))}function M2(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),oy(l,p)}function P2(l,u){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),oy(l,p)}function ci(l,u){return wf(l,u)}function ng(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ca(l,u){var p=l.alternate;return p===null?(p=e(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Yd(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Vo(l,u,p,y,S,w){var x=0;if(y=l,typeof l=="function")vu(l)&&(x=1);else if(typeof l=="string")x=qa&&yi?lm(l,p,Oi.current)?26:zg(l)?27:5:qa?lm(l,p,Oi.current)?26:5:yi&&zg(l)?27:5;else t:switch(l){case yf:return l=e(31,p,u,S),l.elementType=yf,l.lanes=w,l;case bu:return Ba(p.children,S,w,u);case Au:x=8,S|=24;break;case wu:return l=e(12,p,u,S|2),l.elementType=wu,l.lanes=w,l;case Wd:return l=e(13,p,u,S),l.elementType=Wd,l.lanes=w,l;case ko:return l=e(19,p,u,S),l.elementType=ko,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Ga:x=10;break t;case _f:x=9;break t;case qc:x=11;break t;case Zd:x=14;break t;case Ss:x=16,y=null;break t}x=29,p=Error(s(130,l===null?"null":typeof l,"")),y=null}return u=e(x,p,u,S),u.elementType=l,u.type=y,u.lanes=w,u}function Ba(l,u,p,y){return l=e(7,l,y,u),l.lanes=p,l}function ig(l,u,p){return l=e(6,l,null,u),l.lanes=p,l}function sg(l){var u=e(18,null,null,0);return u.stateNode=l,u}function ag(l,u,p){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function ly(l,u,p,y,S,w,x,Q,dt){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Hs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=w,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=dt,this.incompleteTransitions=new Map}function bl(l,u,p,y,S,w,x,Q,dt,bt,Pt,Ct){return l=new ly(l,u,p,x,dt,bt,Pt,Ct,Q),u=1,w===!0&&(u|=24),w=e(3,null,null,u),l.current=w,w.stateNode=l,u=ms(),u.refCount++,l.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:u},ui(w),l}function Qd(l){return l?(l=io,l):io}function pf(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=f(u),l=l!==null?m(l):null,l===null?null:jc(l.stateNode)}function rg(l,u,p,y,S,w){S=Qd(S),y.context===null?y.context=S:y.pendingContext=S,y=ia(u),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Pr(l,y,u),p!==null&&(Mn(p,l,u),sl(p,l,u))}function Eu(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function gf(l,u){Eu(l,u),(l=l.alternate)&&Eu(l,u)}var ye={},Xd=Pv(),Bs=aS(),Jd=Object.assign,Tu=Symbol.for("react.element"),no=Symbol.for("react.transitional.element"),Su=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),Au=Symbol.for("react.strict_mode"),wu=Symbol.for("react.profiler"),_f=Symbol.for("react.consumer"),Ga=Symbol.for("react.context"),qc=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),ko=Symbol.for("react.suspense_list"),Zd=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),yf=Symbol.for("react.activity"),og=Symbol.for("react.memo_cache_sentinel"),Lo=Symbol.iterator,Al=Symbol.for("react.client.reference"),wl=Array.isArray,$t=Xd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lg=t.rendererVersion,vf=t.rendererPackageName,Fc=t.extraDevToolsConfig,jc=t.getPublicInstance,uy=t.getRootHostContext,Kc=t.getChildHostContext,$d=t.prepareForCommit,cy=t.resetAfterCommit,ug=t.createInstance;t.cloneMutableInstance;var Ef=t.appendInitialChild,Gs=t.finalizeInitialChildren,bs=t.shouldSetTextContent,Uo=t.createTextInstance;t.cloneMutableTextInstance;var cg=t.scheduleTimeout,hy=t.cancelTimeout,Hs=t.noTimeout,$n=t.isPrimaryRenderer;t.warnsIfNotActing;var De=t.supportsMutation,ha=t.supportsPersistence,Sn=t.supportsHydration,me=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var nn=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Re=t.setCurrentUpdatePriority,Ha=t.getCurrentUpdatePriority,Yc=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var Ru=t.shouldAttemptEagerTransition,tm=t.detachDeletedInstance;t.requestPostPaintCallback;var Tf=t.maySuspendCommit,Qc=t.maySuspendCommitOnUpdate,hg=t.maySuspendCommitInSyncRender,Pn=t.preloadInstance,fg=t.startSuspendingCommit,em=t.suspendInstance;t.suspendOnActiveViewTransition;var fy=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var Cu=t.NotPendingTransition,Iu=t.HostTransitionContext,dg=t.resetFormInstance;t.bindToConsole;var mg=t.supportsMicrotasks,pg=t.scheduleMicrotask,_i=t.supportsTestSelectors,ti=t.findFiberRoot,nm=t.getBoundingRect,Sf=t.getTextContent,Rl=t.isHiddenSubtree,gg=t.matchAccessibilityRole,zo=t.setFocusIfFocusable,im=t.setupIntersectionObserver,_g=t.appendChild,yg=t.appendChildToContainer,dy=t.commitTextUpdate,my=t.commitMount,py=t.commitUpdate,gy=t.insertBefore,_y=t.insertInContainerBefore,yy=t.removeChild,vg=t.removeChildFromContainer,Eg=t.resetTextContent,V2=t.hideInstance,vy=t.hideTextInstance,Ey=t.unhideInstance,Ty=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Tg=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var Sy=t.cloneInstance,Sg=t.createContainerChildSet,bg=t.appendChildToContainerChildSet,by=t.finalizeContainerChildren,Ag=t.replaceContainerChildren,Ay=t.cloneHiddenInstance,wg=t.cloneHiddenTextInstance,Cl=t.isSuspenseInstancePending,sm=t.isSuspenseInstanceFallback,am=t.getSuspenseInstanceFallbackErrorDetails,rm=t.registerSuspenseInstanceRetry,wy=t.canHydrateFormStateMarker,Rg=t.isFormStateMarkerMatching,Ry=t.getNextHydratableSibling,Cy=t.getNextHydratableSiblingAfterSingleton,Iy=t.getFirstHydratableChild,Ny=t.getFirstHydratableChildWithinContainer,Dy=t.getFirstHydratableChildWithinActivityInstance,xy=t.getFirstHydratableChildWithinSuspenseInstance,Cg=t.getFirstHydratableChildWithinSingleton,Oy=t.canHydrateInstance,My=t.canHydrateTextInstance,Ig=t.canHydrateActivityInstance,Py=t.canHydrateSuspenseInstance,Vy=t.hydrateInstance,k2=t.hydrateTextInstance,Ng=t.hydrateActivityInstance,ky=t.hydrateSuspenseInstance,Ly=t.getNextHydratableInstanceAfterActivityInstance,Dg=t.getNextHydratableInstanceAfterSuspenseInstance,Uy=t.commitHydratedInstance,zy=t.commitHydratedContainer,L2=t.commitHydratedActivityInstance,U2=t.commitHydratedSuspenseInstance,By=t.finalizeHydratedChildren,bf=t.flushHydrationEvents;t.clearActivityBoundary;var xg=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var om=t.clearSuspenseBoundaryFromContainer,Gy=t.hideDehydratedBoundary,Hy=t.unhideDehydratedBoundary,Xc=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var qy=t.validateHydratableInstance,Og=t.validateHydratableTextInstance,qa=t.supportsResources,lm=t.isHostHoistableType,Af=t.getHoistableRoot,Mg=t.getResource,Pg=t.acquireResource,Il=t.releaseResource,Fy=t.hydrateHoistable,Vg=t.mountHoistable,kg=t.unmountHoistable,um=t.createHoistableInstance,jy=t.prepareToCommitHoistables,Lg=t.mayResourceSuspendCommit,Ug=t.preloadResource,Ky=t.suspendResource,yi=t.supportsSingletons,cm=t.resolveSingletonInstance,hi=t.acquireSingletonInstance,xi=t.releaseSingletonInstance,zg=t.isHostSingletonType,Nu=t.isSingletonScope,hm=[],Du=-1,io={},qs=Math.clz32?Math.clz32:k,fm=Math.log,Yy=Math.LN2,dm=256,xu=262144,Jc=4194304,wf=Bs.unstable_scheduleCallback,mm=Bs.unstable_cancelCallback,Qy=Bs.unstable_shouldYield,Bg=Bs.unstable_requestPaint,as=Bs.unstable_now,pm=Bs.unstable_ImmediatePriority,Xy=Bs.unstable_UserBlockingPriority,Rf=Bs.unstable_NormalPriority,gm=Bs.unstable_IdlePriority,Gg=Bs.log,Jy=Bs.unstable_setDisableYieldValue,Ou=null,Fs=null,ei=typeof Object.is=="function"?Object.is:Kt,_m=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},z2=Object.prototype.hasOwnProperty,ym,so,Cf=!1,Hg=new WeakMap,Bo=[],ao=0,sn=null,If=0,Fa=[],fa=0,ja=null,Ki=1,Er="",Oi=A(null),Go=A(null),Yi=A(null),Nf=A(null),vi=null,bn=null,Ce=!1,ro=null,As=!1,vm=Error(s(519)),Ka=A(null),fn=null,Tr=null,Wy=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},Mi=Bs.unstable_scheduleCallback,B2=Bs.unstable_NormalPriority,An={$$typeof:Ga,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Df=null,We=null,rs=!1,Ya=!1,Em=!1,Nl=0,Wc=null,qg=0,Ho=0,Ei=null,Qa=$t.S;$t.S=function(l,u){Uu=as(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&gs(l,u),Qa!==null&&Qa(l,u)};var Dl=A(null),Ti=Error(s(460)),Tm=Error(s(474)),Xa=Error(s(542)),oo={then:function(){}},ws=null,xl=null,Mu=0,Qi=mc(!0),Fg=mc(!1),Xi=[],lo=0,Pu=0,da=!1,Sm=!1,Vu=A(null),Ol=A(0),js=A(null),Rs=null,jn=A(0),qo=0,pe=null,Wt=null,oe=null,ve=!1,_e=!1,Oe=!1,os=0,Ja=0,Sr=null,jg=0,ma={readContext:Gn,use:Ao,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};ma.useEffectEvent=un;var Vn={readContext:Gn,use:Ao,useCallback:function(l,u){return Zn().memoizedState=[l,u===void 0?null:u],l},useContext:Gn,useEffect:ul,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,Br(4194308,4,Co.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Br(4194308,4,l,u)},useInsertionEffect:function(l,u){Br(4,2,l,u)},useMemo:function(l,u){var p=Zn();u=u===void 0?null:u;var y=l();if(Oe){z(!0);try{l()}finally{z(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=Zn();if(p!==void 0){var S=p(u);if(Oe){z(!0);try{p(u)}finally{z(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=Ic.bind(null,pe,l),[y.memoizedState,l]},useRef:function(l){var u=Zn();return l={current:l},u.memoizedState=l},useState:function(l){l=zr(l);var u=l.queue,p=ef.bind(null,pe,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:Hr,useDeferredValue:function(l,u){var p=Zn();return cl(p,l,u)},useTransition:function(){var l=zr(!1);return l=hl.bind(null,pe,l.queue,!0,!1),Zn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=pe,S=Zn();if(Ce){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),Ee===null)throw Error(s(349));(Ie&127)!==0||Zh(y,u,p)}S.memoizedState=p;var w={value:p,getSnapshot:u};return S.queue=w,ul(Tc.bind(null,y,w,l),[l]),y.flags|=2048,ys(9,{destroy:void 0},Ec.bind(null,y,w,p,u),null),p},useId:function(){var l=Zn(),u=Ee.identifierPrefix;if(Ce){var p=Er,y=Ki;p=(y&~(1<<32-qs(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=os++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=jg++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Rc,useFormState:Ro,useActionState:Ro,useOptimistic:function(l){var u=Zn();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Pa.bind(null,pe,!0,p),p.dispatch=u,[l,u]},useMemoCache:yc,useCacheRefresh:function(){return Zn().memoizedState=Pd.bind(null,pe)},useEffectEvent:function(l){var u=Zn(),p={impl:l};return u.memoizedState=p,function(){if((Ae&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}},uo={readContext:Gn,use:Ao,useCallback:fu,useContext:Gn,useEffect:dr,useImperativeHandle:Ac,useInsertionEffect:Gr,useLayoutEffect:pr,useMemo:gr,useReducer:hr,useRef:bc,useState:function(){return hr(aa)},useDebugValue:Hr,useDeferredValue:function(l,u){var p=Ke();return wc(p,Wt.memoizedState,l,u)},useTransition:function(){var l=hr(aa)[0],u=Ke().memoizedState;return[typeof l=="boolean"?l:Ci(l),u]},useSyncExternalStore:_s,useId:fl,useHostTransitionStatus:Rc,useFormState:Ma,useActionState:Ma,useOptimistic:function(l,u){var p=Ke();return uu(p,Wt,l,u)},useMemoCache:yc,useCacheRefresh:Cc};uo.useEffectEvent=Ii;var Ml={readContext:Gn,use:Ao,useCallback:fu,useContext:Gn,useEffect:dr,useImperativeHandle:Ac,useInsertionEffect:Gr,useLayoutEffect:pr,useMemo:gr,useReducer:Ur,useRef:bc,useState:function(){return Ur(aa)},useDebugValue:Hr,useDeferredValue:function(l,u){var p=Ke();return Wt===null?cl(p,l,u):wc(p,Wt.memoizedState,l,u)},useTransition:function(){var l=Ur(aa)[0],u=Ke().memoizedState;return[typeof l=="boolean"?l:Ci(l),u]},useSyncExternalStore:_s,useId:fl,useHostTransitionStatus:Rc,useFormState:Je,useActionState:Je,useOptimistic:function(l,u){var p=Ke();return Wt!==null?uu(p,Wt,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:yc,useCacheRefresh:Cc};Ml.useEffectEvent=Ii;var xf={enqueueSetState:function(l,u,p){l=l._reactInternals;var y=Tn(),S=ia(y);S.payload=u,p!=null&&(S.callback=p),u=Pr(l,S,y),u!==null&&(Mn(u,l,y),sl(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=Tn(),S=ia(y);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=Pr(l,S,y),u!==null&&(Mn(u,l,y),sl(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=Tn(),y=ia(p);y.tag=2,u!=null&&(y.callback=u),u=Pr(l,y,p),u!==null&&(Mn(u,l,p),sl(u,l,p))}},Cs=Error(s(461)),_n=!1,ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Kn=!1,Yn=!1,Zc=!1,Kg=typeof WeakSet=="function"?WeakSet:Set,ni=null,kn=null,ii=!1,Ze=null,pa=8192,$c={getCacheForType:function(l){var u=Gn(An),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return Gn(An).controller.signal}},Wa=0,th=1,eh=2,Of=3,Pl=4;if(typeof Symbol=="function"&&Symbol.for){var Lu=Symbol.for;Wa=Lu("selector.component"),th=Lu("selector.has_pseudo_class"),eh=Lu("selector.role"),Of=Lu("selector.test_id"),Pl=Lu("selector.text")}var ga=typeof WeakMap=="function"?WeakMap:Map,Ae=0,Ee=null,we=null,Ie=0,$e=0,fi=null,br=!1,Vl=!1,kl=!1,co=0,Ln=0,Fo=0,Ll=0,nh=0,Is=0,ih=0,Mf=null,Ks=null,bm=!1,Pf=0,Uu=0,Ul=1/0,Vf=null,jo=null,di=0,Ko=null,zu=null,ho=0,sh=0,Am=null,Yg=null,Ge=0,kf=null;return ye.attemptContinuousHydration=function(l){if(l.tag===13||l.tag===31){var u=qi(l,67108864);u!==null&&Mn(u,l,67108864),gf(l,67108864)}},ye.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13||l.tag===31){var u=Tn();u=G(u);var p=qi(l,u);p!==null&&Mn(p,l,u),gf(l,u)}},ye.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=U(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var p=1<<31-qs(u);l.entanglements[1]|=p,u&=~p}Hi(l),(Ae&6)===0&&(Ul=as()+500,ps(0))}}break;case 31:case 13:u=qi(l,2),u!==null&&Mn(u,l,2),Hd(),gf(l,2)}},ye.batchedUpdates=function(l,u){return l(u)},ye.createComponentSelector=function(l){return{$$typeof:Wa,value:l}},ye.createContainer=function(l,u,p,y,S,w,x,Q,dt,bt){return bl(l,u,!1,null,p,y,w,null,x,Q,dt,bt)},ye.createHasPseudoClassSelector=function(l){return{$$typeof:th,value:l}},ye.createHydrationContainer=function(l,u,p,y,S,w,x,Q,dt,bt,Pt,Ct,Ht,de){return l=bl(p,y,!0,l,S,w,Q,de,dt,bt,Pt,Ct),l.context=Qd(null),p=l.current,y=Tn(),y=G(y),S=ia(y),S.callback=u??null,Pr(p,S,y),u=y,l.current.lanes=u,rt(l,u),Hi(l),l},ye.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Su,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},ye.createRoleSelector=function(l){return{$$typeof:eh,value:l}},ye.createTestNameSelector=function(l){return{$$typeof:Of,value:l}},ye.createTextSelector=function(l){return{$$typeof:Pl,value:l}},ye.defaultOnCaughtError=function(l){console.error(l)},ye.defaultOnRecoverableError=function(l){_m(l)},ye.defaultOnUncaughtError=function(l){_m(l)},ye.deferredUpdates=function(l){var u=$t.T,p=Ha();try{return Re(32),$t.T=null,l()}finally{Re(p),$t.T=u}},ye.discreteUpdates=function(l,u,p,y,S){var w=$t.T,x=Ha();try{return Re(2),$t.T=null,l(u,p,y,S)}finally{Re(x),$t.T=w,Ae===0&&(Ul=as()+500)}},ye.findAllNodes=zs,ye.findBoundingRects=function(l,u){if(!_i)throw Error(s(363));u=zs(l,u),l=[];for(var p=0;p<u.length;p++)l.push(nm(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,S=y+p.width,w=p.y,x=w+p.height,Q=u-1;0<=Q;Q--)if(u!==Q){var dt=l[Q],bt=dt.x,Pt=bt+dt.width,Ct=dt.y,Ht=Ct+dt.height;if(y>=bt&&w>=Ct&&S<=Pt&&x<=Ht){l.splice(u,1);break}else if(y!==bt||p.width!==dt.width||Ht<w||Ct>x){if(!(w!==Ct||p.height!==dt.height||Pt<y||bt>S)){bt>y&&(dt.width+=bt-y,dt.x=y),Pt<S&&(dt.width=S-bt),l.splice(u,1);break}}else{Ct>w&&(dt.height+=Ct-w,dt.y=w),Ht<x&&(dt.height=x-Ct),l.splice(u,1);break}}}return l},ye.findHostInstance=pf,ye.findHostInstanceWithNoPortals=function(l){return l=f(l),l=l!==null?g(l):null,l===null?null:jc(l.stateNode)},ye.findHostInstanceWithWarning=function(l){return pf(l)},ye.flushPassiveEffects=eo,ye.flushSyncFromReconciler=function(l){var u=Ae;Ae|=1;var p=$t.T,y=Ha();try{if(Re(2),$t.T=null,l)return l()}finally{Re(y),$t.T=p,Ae=u,(Ae&6)===0&&ps(0)}},ye.flushSyncWork=Hd,ye.focusWithin=function(l,u){if(!_i)throw Error(s(363));for(l=yl(l),u=Uc(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++],y=p.tag;if(!Rl(p)){if((y===5||y===26||y===27)&&zo(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},ye.getFindAllNodesFailureDescription=function(l,u){if(!_i)throw Error(s(363));var p=0,y=[];l=[yl(l),0];for(var S=0;S<l.length;){var w=l[S++],x=w.tag,Q=l[S++],dt=u[Q];if((x!==5&&x!==26&&x!==27||!Rl(w))&&(vl(w,dt)&&(y.push(Lc(dt)),Q++,Q>p&&(p=Q)),Q<u.length))for(w=w.child;w!==null;)l.push(w,Q),w=w.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(Lc(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},ye.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return jc(l.child.stateNode);default:return l.child.stateNode}},ye.injectIntoDevTools=function(){var l={bundleType:0,version:lg,rendererPackageName:vf,currentDispatcherRef:$t,reconcilerVersion:"19.2.0"};if(Fc!==null&&(l.rendererConfig=Fc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Ou=u.inject(l),Fs=u}catch{}l=!!u.checkDCE}}return l},ye.isAlreadyRendering=function(){return(Ae&6)!==0},ye.observeVisibleRects=function(l,u,p,y){if(!_i)throw Error(s(363));l=zs(l,u);var S=im(l,p,y).disconnect;return{disconnect:function(){S()}}},ye.shouldError=function(){return null},ye.shouldSuspend=function(){return!1},ye.startHostTransition=function(l,u,p,y){if(l.tag!==5)throw Error(s(476));var S=tf(l).queue;hl(l,S,u,Cu,p===null?i:function(){var w=tf(l);return w.next===null&&(w=l.alternate.memoizedState),dl(l,w.next.queue,{},Tn()),p(y)})},ye.updateContainer=function(l,u,p,y){var S=u.current,w=Tn();return rg(S,w,l,u,p,y),w},ye.updateContainerSync=function(l,u,p,y){return rg(u.current,2,l,u,p,y),2},ye},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(AE)),AE.exports}var zA;function tx(){return zA||(zA=1,bE.exports=$D()),bE.exports}var ex=tx();const nx=U6(ex);var wE={exports:{}},Gu={};var BA;function ix(){return BA||(BA=1,Gu.ConcurrentRoot=1,Gu.ContinuousEventPriority=8,Gu.DefaultEventPriority=32,Gu.DiscreteEventPriority=2,Gu.IdleEventPriority=268435456,Gu.LegacyRoot=0,Gu.NoEventPriority=0),Gu}var GA;function sx(){return GA||(GA=1,wE.exports=ix()),wE.exports}var Uv=sx();const HA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let qA=!1,FA=!1;const tv=".react-konva-event",ax=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,rx=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,ox={};function zv(n,t,e=ox){if(!qA&&"zIndex"in t&&(console.warn(rx),qA=!0),!FA&&t.draggable){var i=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;i&&!s&&(console.warn(ax),FA=!0)}for(var o in e)if(!HA[o]){var c=o.slice(0,2)==="on",f=e[o]!==t[o];if(c&&f){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),n.off(m,e[o])}var g=!t.hasOwnProperty(o);g&&n.setAttr(o,void 0)}var E=t._useStrictMode,b={},A=!1;const N={};for(var o in t)if(!HA[o]){var c=o.slice(0,2)==="on",D=e[o]!==t[o];if(c&&D){var m=o.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[o]&&(N[m]=t[o])}!c&&(t[o]!==e[o]||E&&t[o]!==n.getAttr(o))&&(A=!0,b[o]=t[o])}A&&(n.setAttrs(b),qh(n));for(var m in N)n.off(m+tv),n.on(m+tv,N[m])}function qh(n){if(!kt.autoDrawEnabled){var t=n.getLayer()||n.getStage();t&&t.batchDraw()}}var RE=aS();const _w={},lx={};ip.Node.prototype._applyProps=zv;let yw=Uv.DefaultEventPriority;function ux(n,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}n.add(t),qh(n)}function cx(n,t,e){let i=ip[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=ip.Group);const s={},o={};for(var c in t)if(c!=="ref"){var f=c.slice(0,2)==="on";f?o[c]=t[c]:s[c]=t[c]}const m=new i(s);return zv(m,o),m}function hx(n,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function fx(n,t,e){return!1}function dx(n){return n}function mx(){return null}function px(){return null}function gx(n,t,e,i){return lx}function _x(){}function yx(n){}function vx(n,t){return!1}function Ex(){return _w}function Tx(){return _w}const Sx=setTimeout,bx=clearTimeout,Ax=!0,wx=n=>{n()},Rx=-1;function Cx(n,t){return!1}const Ix=!1,Nx=!1,Dx=!0,xx=!1,Ox=!1;function Mx(n,t){t.parent===n?t.moveToTop():n.add(t),qh(n)}function Px(n,t){t.parent===n?t.moveToTop():n.add(t),qh(n)}function vw(n,t,e){t._remove(),n.add(t),t.setZIndex(e.getZIndex()),qh(n)}function Vx(n,t,e){vw(n,t,e)}function kx(n,t){t.destroy(),t.off(tv),qh(n)}function Lx(n,t){t.destroy(),t.off(tv),qh(n)}function Ux(n,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function zx(n,t,e){}function Bx(n,t,e,i){zv(n,i,e)}function Gx(n){n.hide(),qh(n)}function Hx(n){}function qx(n,t){(t.visible==null||t.visible)&&n.show()}function Fx(n,t){}function jx(n){}function Kx(){}function Yx(){return null}function Qx(){}function Xx(){}function Jx(){return Uv.DefaultEventPriority}function Wx(){}function Zx(){return null}function $x(n){yw=n}function tO(){return yw}function eO(){return Uv.DiscreteEventPriority}function nO(){return!1}function iO(){}function sO(){return null}function aO(){return-1.1}function rO(){}function oO(){return!1}function lO(){return!0}function uO(){}function cO(){}function hO(){return null}const fO=null,dO=Ji.createContext(null);function mO(){}const pO=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:dO,NotPendingTransition:fO,afterActiveInstanceBlur:Xx,appendChild:Mx,appendChildToContainer:Px,appendInitialChild:ux,beforeActiveInstanceBlur:Qx,cancelTimeout:bx,clearContainer:jx,commitMount:zx,commitTextUpdate:Ux,commitUpdate:Bx,createInstance:cx,createTextInstance:hx,detachDeletedInstance:Kx,finalizeInitialChildren:fx,getChildHostContext:Tx,getCurrentEventPriority:Jx,getCurrentUpdatePriority:tO,getInstanceFromNode:Yx,getInstanceFromScope:Zx,getPublicInstance:dx,getRootHostContext:Ex,hideInstance:Gx,hideTextInstance:Hx,idlePriority:RE.unstable_IdlePriority,insertBefore:vw,insertInContainerBefore:Vx,isPrimaryRenderer:Ix,maySuspendCommit:oO,noTimeout:Rx,now:RE.unstable_now,preloadInstance:lO,prepareForCommit:mx,preparePortalMount:px,prepareScopeUpdate:Wx,prepareUpdate:gx,removeChild:kx,removeChildFromContainer:Lx,requestPostPaintCallback:rO,resetAfterCommit:_x,resetFormInstance:mO,resetTextContent:yx,resolveEventTimeStamp:aO,resolveEventType:sO,resolveUpdatePriority:eO,run:RE.unstable_runWithPriority,scheduleMicrotask:wx,scheduleTimeout:Sx,setCurrentUpdatePriority:$x,shouldAttemptEagerTransition:nO,shouldDeprioritizeSubtree:vx,shouldSetTextContent:Cx,startSuspendingCommit:uO,supportsHydration:Ox,supportsMicrotasks:Ax,supportsMutation:Dx,supportsPersistence:xx,suspendInstance:cO,trackSchedulerEvent:iO,unhideInstance:qx,unhideTextInstance:Fx,waitForCommitToBeReady:hO,warnsIfNotActing:Nx},Symbol.toStringTag,{value:"Module"}));function Ew(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=Ew(i,t,e);if(s)return s;i=i.sibling}}function Tw(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const fS=Tw(ce.createContext(null));class Sw extends ce.Component{render(){return ce.createElement(fS.Provider,{value:this._reactInternals},this.props.children)}}function gO(){const n=ce.useContext(fS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ce.useId();return ce.useMemo(()=>{for(const e of[n,n?.alternate]){if(!e)continue;const i=Ew(e,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[n,t])}const _O=Symbol.for("react.context"),yO=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===_O;function vO(){const n=gO(),[t]=ce.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;yO(i)&&i!==fS&&!t.has(i)&&t.set(i,ce.use(Tw(i))),e=e.return}return t}function EO(){const n=vO();return ce.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>ce.createElement(t,null,ce.createElement(e.Provider,{...i,value:n.get(e)})),t=>ce.createElement(Sw,{...t})),[n])}if(Ji.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function TO(n){const t=Ji.useRef({});return Ji.useLayoutEffect(()=>{t.current=n}),Ji.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const SO=()=>{const n=Ji.useRef(0);return Ji.useMemo(()=>{n.current++},[]),n.current>1},bO=n=>{const t=Ji.useRef(null),e=Ji.useRef(null),i=Ji.useRef(null),s=TO(n),o=EO(),c=Ji.useRef(null),f=E=>{const{forwardedRef:b}=n;b&&(typeof b=="function"?b(E):b.current=E)},m=SO(),g=()=>{f(null),c0.updateContainer(null,i.current,null),e.current?.destroy(),e.current=null};return Ji.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),e.current?f(e.current):(e.current=new ip.Stage({width:n.width,height:n.height,container:t.current}),f(e.current),i.current=c0.createContainer(e.current,Uv.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),c0.updateContainer(Ji.createElement(o,{},n.children),i.current,null,()=>{})),()=>{m?c.current=setTimeout(g,0):g()}),[]),Ji.useLayoutEffect(()=>{f(e.current),zv(e.current,n,s),c0.flushSyncFromReconciler(()=>{c0.updateContainer(Ji.createElement(o,{},n.children),i.current,null)})}),Ji.createElement("div",{ref:t,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},AO="Layer",jA="Group",wO="Rect",A1="Circle",RO="Line",ev="Image",KA="Text",c0=nx(pO),CO=Ji.forwardRef((n,t)=>Ji.createElement(Sw,{},Ji.createElement(bO,{...n,forwardedRef:t})));const bw=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const IO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const NO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const YA=n=>{const t=NO(n);return t.charAt(0).toUpperCase()+t.slice(1)};var DO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xO=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const OO=ce.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...f},m)=>ce.createElement("svg",{ref:m,...DO,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:bw("lucide",s),...!o&&!xO(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,E])=>ce.createElement(g,E)),...Array.isArray(o)?o:[o]]));const Fh=(n,t)=>{const e=ce.forwardRef(({className:i,...s},o)=>ce.createElement(OO,{ref:o,iconNode:t,className:bw(`lucide-${IO(YA(n))}`,`lucide-${n}`,i),...s}));return e.displayName=YA(n),e};const MO=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],PO=Fh("eraser",MO);const VO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],QA=Fh("folder-open",VO);const kO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],XA=Fh("plus",kO);const LO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],JA=Fh("save",LO);const UO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],CE=Fh("trash-2",UO);const zO=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],BO=Fh("undo",zO);const GO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],WA=Fh("user-plus",GO);const HO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ZA=Fh("x",HO),qO=()=>{};var $A={};const Aw=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},FO=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[e++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[e++],c=n[e++],f=n[e++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return t.join("")},ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,E=o>>2,b=(o&3)<<4|f>>4;let A=(f&15)<<2|g>>6,N=g&63;m||(N=64,c||(A=64)),i.push(e[E],e[b],e[A],e[N])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Aw(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):FO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=e[n.charAt(s++)],f=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const b=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||f==null||g==null||b==null)throw new jO;const A=o<<2|f>>4;if(i.push(A),g!==64){const N=f<<4&240|g>>2;if(i.push(N),b!==64){const D=g<<6&192|b;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KO=function(n){const t=Aw(n);return ww.encodeByteArray(t,!0)},nv=function(n){return KO(n).replace(/\./g,"")},dS=function(n){try{return ww.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function iv(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!YO(e)||(n[e]=iv(n[e],t[e]));return n}function YO(n){return n!=="__proto__"}function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const QO=()=>mS().__FIREBASE_DEFAULTS__,XO=()=>{if(typeof process>"u"||typeof $A>"u")return;const n=$A.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&dS(n[1]);return t&&JSON.parse(t)},pS=()=>{try{return qO()||QO()||XO()||JO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gS=()=>pS()?.config,WO=n=>pS()?.[`_${n}`];class ZO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function iu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bv(n){return(await fetch(n,{credentials:"include"})).ok}function Rw(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nv(JSON.stringify(e)),nv(JSON.stringify(c)),""].join(".")}const U0={};function $O(){const n={prod:[],emulator:[]};for(const t of Object.keys(U0))U0[t]?n.emulator.push(t):n.prod.push(t);return n}function tM(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let t3=!1;function Gv(n,t){if(typeof window>"u"||typeof document>"u"||!iu(window.location.host)||U0[n]===t||U0[n]||t3)return;U0[n]=t;function e(A){return`__firebase__banner__${A}`}const i="__firebase__banner",o=$O().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,N){A.setAttribute("width","24"),A.setAttribute("id",N),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{t3=!0,c()},A}function E(A,N){A.setAttribute("id",N),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=tM(i),N=e("text"),D=document.getElementById(N)||document.createElement("span"),k=e("learnmore"),U=document.getElementById(k)||document.createElement("a"),F=e("preprendIcon"),j=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;f(X),E(U,k);const W=g();m(j,F),X.append(j,D,U,W),document.body.appendChild(X)}o?(D.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function Hv(){const n=pS()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nM(){return typeof window<"u"||Cw()}function Cw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function iM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Iw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nw(){const n=si();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Dw(){return!Hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xw(){return!Hv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function id(){try{return typeof indexedDB=="object"}catch{return!1}}function sM(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}function aM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const rM="FirebaseError";class zi extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=rM,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],c=o?oM(o,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new zi(s,f,i)}}function oM(n,t){return n.replace(lM,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const lM=/\{\$([^}]+)}/g;function e3(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function uM(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Nh(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const o=n[s],c=t[s];if(n3(o)&&n3(c)){if(!Nh(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function n3(n){return n!==null&&typeof n=="object"}function Np(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function jm(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function C0(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function Ow(n,t){const e=new cM(n,t);return e.subscribe.bind(e)}class cM{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");hM(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=IE),s.error===void 0&&(s.error=IE),s.complete===void 0&&(s.complete=IE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hM(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function IE(){}function jt(n){return n&&n._delegate?n._delegate:n}class Bi{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const zf="[DEFAULT]";class fM{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new ZO;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mM(t))try{this.getOrInitializeService({instanceIdentifier:zf})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=zf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zf){return this.instances.has(t)}getOptions(t=zf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);i===f&&c.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=zf){return this.component?this.component.multipleInstances?t:zf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dM(n){return n===zf?void 0:n}function mM(n){return n.instantiationMode==="EAGER"}class Mw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new fM(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const yS=[];var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const Pw={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},pM=Pe.INFO,gM={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},_M=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=gM[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class qv{constructor(t){this.name=t,this._logLevel=pM,this._logHandler=_M,this._userLogHandler=null,yS.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Pw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}function yM(n){yS.forEach(t=>{t.setLogLevel(n)})}function vM(n,t){for(const e of yS){let i=null;t&&t.level&&(i=Pw[t.level]),n===null?e.userLogHandler=null:e.userLogHandler=(s,o,...c)=>{const f=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");o>=(i??s.logLevel)&&n({level:Pe[o].toLowerCase(),message:f,args:c,type:s.name})}}}const EM=(n,t)=>t.some(e=>n instanceof e);let i3,s3;function TM(){return i3||(i3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SM(){return s3||(s3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vw=new WeakMap,gT=new WeakMap,kw=new WeakMap,NE=new WeakMap,vS=new WeakMap;function bM(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Xu(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Vw.set(e,n)}).catch(()=>{}),vS.set(t,n),t}function AM(n){if(gT.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});gT.set(n,t)}let _T={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return gT.get(n);if(t==="objectStoreNames")return n.objectStoreNames||kw.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Xu(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function wM(n){_T=n(_T)}function RM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(DE(this),t,...e);return kw.set(i,t.sort?t.sort():[t]),Xu(i)}:SM().includes(n)?function(...t){return n.apply(DE(this),t),Xu(Vw.get(this))}:function(...t){return Xu(n.apply(DE(this),t))}}function CM(n){return typeof n=="function"?RM(n):(n instanceof IDBTransaction&&AM(n),EM(n,TM())?new Proxy(n,_T):n)}function Xu(n){if(n instanceof IDBRequest)return bM(n);if(NE.has(n))return NE.get(n);const t=CM(n);return t!==n&&(NE.set(n,t),vS.set(t,n)),t}const DE=n=>vS.get(n);function Dp(n,t,{blocked:e,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(n,t),f=Xu(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Xu(c.result),m.oldVersion,m.newVersion,Xu(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}function Km(n,{blocked:t}={}){const e=indexedDB.deleteDatabase(n);return t&&e.addEventListener("blocked",i=>t(i.oldVersion,i)),Xu(e).then(()=>{})}const IM=["get","getKey","getAll","getAllKeys","count"],NM=["put","add","delete","clear"],xE=new Map;function a3(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(xE.get(t))return xE.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=NM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||IM.includes(e)))return;const o=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),s&&m.done]))[0]};return xE.set(t,o),o}wM(n=>({...n,get:(t,e,i)=>a3(t,e)||n.get(t,e,i),has:(t,e)=>!!a3(t,e)||n.has(t,e)}));class DM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(xM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function xM(n){return n.getComponent()?.type==="VERSION"}const sv="@firebase/app",yT="0.14.8";const Zu=new qv("@firebase/app"),OM="@firebase/app-compat",MM="@firebase/analytics-compat",PM="@firebase/analytics",VM="@firebase/app-check-compat",kM="@firebase/app-check",LM="@firebase/auth",UM="@firebase/auth-compat",zM="@firebase/database",BM="@firebase/data-connect",GM="@firebase/database-compat",HM="@firebase/functions",qM="@firebase/functions-compat",FM="@firebase/installations",jM="@firebase/installations-compat",KM="@firebase/messaging",YM="@firebase/messaging-compat",QM="@firebase/performance",XM="@firebase/performance-compat",JM="@firebase/remote-config",WM="@firebase/remote-config-compat",ZM="@firebase/storage",$M="@firebase/storage-compat",tP="@firebase/firestore",eP="@firebase/ai",nP="@firebase/firestore-compat",iP="firebase",sP="12.9.0";const Dh="[DEFAULT]",aP={[sv]:"fire-core",[OM]:"fire-core-compat",[PM]:"fire-analytics",[MM]:"fire-analytics-compat",[kM]:"fire-app-check",[VM]:"fire-app-check-compat",[LM]:"fire-auth",[UM]:"fire-auth-compat",[zM]:"fire-rtdb",[BM]:"fire-data-connect",[GM]:"fire-rtdb-compat",[HM]:"fire-fn",[qM]:"fire-fn-compat",[FM]:"fire-iid",[jM]:"fire-iid-compat",[KM]:"fire-fcm",[YM]:"fire-fcm-compat",[QM]:"fire-perf",[XM]:"fire-perf-compat",[JM]:"fire-rc",[WM]:"fire-rc-compat",[ZM]:"fire-gcs",[$M]:"fire-gcs-compat",[tP]:"fire-fst",[nP]:"fire-fst-compat",[eP]:"fire-vertex","fire-js":"fire-js",[iP]:"fire-js-all"};const xh=new Map,sp=new Map,ap=new Map;function e_(n,t){try{n.container.addComponent(t)}catch(e){Zu.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Lw(n,t){n.container.addOrOverwriteComponent(t)}function ba(n){const t=n.name;if(ap.has(t))return Zu.debug(`There were multiple attempts to register component ${t}.`),!1;ap.set(t,n);for(const e of xh.values())e_(e,n);for(const e of sp.values())e_(e,n);return!0}function Fv(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function rP(n,t,e=Dh){Fv(n,t).clearInstance(e)}function ES(n){return n.options!==void 0}function Uw(n){return ES(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Cn(n){return n==null?!1:n.settings!==void 0}function oP(){ap.clear()}const lP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new su("app","Firebase",lP);let zw=class{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};function r3(n,t){const e=dS(n.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(e).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class uP extends zw{constructor(t,e,i,s){const o=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,c={name:i,automaticDataCollectionEnabled:o};if(t.apiKey!==void 0)super(t,c,s);else{const f=t;super(f.options,c,s)}this._serverConfig={automaticDataCollectionEnabled:o,...e},this._serverConfig.authIdToken&&r3(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&r3(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Wi(sv,yT,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){SS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Nr.create("server-app-deleted")}}const ac=sP;function TS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Dh,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(e||(e=gS()),!e)throw Nr.create("no-options");const o=xh.get(s);if(o){if(Nh(e,o.options)&&Nh(i,o.config))return o;throw Nr.create("duplicate-app",{appName:s})}const c=new Mw(s);for(const m of ap.values())c.addComponent(m);const f=new zw(e,i,c);return xh.set(s,f),f}function cP(n,t={}){if(nM()&&!Cw())throw Nr.create("invalid-server-app-environment");let e,i=t||{};if(n&&(ES(n)?e=n.options:Uw(n)?i=n:e=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),e||(e=gS()),!e)throw Nr.create("no-options");const s={...i,...e};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const o=E=>[...E].reduce((b,A)=>Math.imul(31,b)+A.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Nr.create("finalization-registry-not-supported",{});const c=""+o(JSON.stringify(s)),f=sp.get(c);if(f)return f.incRefCount(i.releaseOnDeref),f;const m=new Mw(c);for(const E of ap.values())m.addComponent(E);const g=new uP(e,i,c,m);return sp.set(c,g),g}function hP(n=Dh){const t=xh.get(n);if(!t&&n===Dh&&gS())return TS();if(!t)throw Nr.create("no-app",{appName:n});return t}function fP(){return Array.from(xh.values())}async function SS(n){let t=!1;const e=n.name;xh.has(e)?(t=!0,xh.delete(e)):sp.has(e)&&n.decRefCount()<=0&&(sp.delete(e),t=!0),t&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Wi(n,t,e){let i=aP[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${t}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Zu.warn(c.join(" "));return}ba(new Bi(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function Bw(n,t){if(n!==null&&typeof n!="function")throw Nr.create("invalid-log-argument");vM(n,t)}function Gw(n){yM(n)}const dP="firebase-heartbeat-database",mP=1,n_="firebase-heartbeat-store";let OE=null;function Hw(){return OE||(OE=Dp(dP,mP,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(n_)}catch(e){console.warn(e)}}}}).catch(n=>{throw Nr.create("idb-open",{originalErrorMessage:n.message})})),OE}async function pP(n){try{const e=(await Hw()).transaction(n_),i=await e.objectStore(n_).get(qw(n));return await e.done,i}catch(t){if(t instanceof zi)Zu.warn(t.message);else{const e=Nr.create("idb-get",{originalErrorMessage:t?.message});Zu.warn(e.message)}}}async function o3(n,t){try{const i=(await Hw()).transaction(n_,"readwrite");await i.objectStore(n_).put(t,qw(n)),await i.done}catch(e){if(e instanceof zi)Zu.warn(e.message);else{const i=Nr.create("idb-set",{originalErrorMessage:e?.message});Zu.warn(i.message)}}}function qw(n){return`${n.name}!${n.options.appId}`}const gP=1024,_P=30;class yP{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new EP(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=l3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>_P){const s=TP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Zu.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=l3(),{heartbeatsToSend:e,unsentEntries:i}=vP(this._heartbeatsCache.heartbeats),s=nv(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Zu.warn(t),""}}}function l3(){return new Date().toISOString().substring(0,10)}function vP(n,t=gP){const e=[];let i=n.slice();for(const s of n){const o=e.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),u3(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),u3(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class EP{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return id()?sM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await pP(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return o3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return o3(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function u3(n){return nv(JSON.stringify({version:2,heartbeats:n})).length}function TP(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function SP(n){ba(new Bi("platform-logger",t=>new DM(t),"PRIVATE")),ba(new Bi("heartbeat",t=>new yP(t),"PRIVATE")),Wi(sv,yT,n),Wi(sv,yT,"esm2020"),Wi("fire-js","")}SP("");const bP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:zi,SDK_VERSION:ac,_DEFAULT_ENTRY_NAME:Dh,_addComponent:e_,_addOrOverwriteComponent:Lw,_apps:xh,_clearComponents:oP,_components:ap,_getProvider:Fv,_isFirebaseApp:ES,_isFirebaseServerApp:Cn,_isFirebaseServerAppSettings:Uw,_registerComponent:ba,_removeServiceInstance:rP,_serverApps:sp,deleteApp:SS,getApp:hP,getApps:fP,initializeApp:TS,initializeServerApp:cP,onLog:Bw,registerVersion:Wi,setLogLevel:Gw},Symbol.toStringTag,{value:"Module"}));var c3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wh,Fw;(function(){var n;function t(V,M){function L(){}L.prototype=M.prototype,V.F=M.prototype,V.prototype=new L,V.prototype.constructor=V,V.D=function(H,G,K){for(var z=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)z[Kt-2]=arguments[Kt];return M.prototype[G].apply(H,z)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(V,M,L){L||(L=0);const H=Array(16);if(typeof M=="string")for(var G=0;G<16;++G)H[G]=M.charCodeAt(L++)|M.charCodeAt(L++)<<8|M.charCodeAt(L++)<<16|M.charCodeAt(L++)<<24;else for(G=0;G<16;++G)H[G]=M[L++]|M[L++]<<8|M[L++]<<16|M[L++]<<24;M=V.g[0],L=V.g[1],G=V.g[2];let K=V.g[3],z;z=M+(K^L&(G^K))+H[0]+3614090360&4294967295,M=L+(z<<7&4294967295|z>>>25),z=K+(G^M&(L^G))+H[1]+3905402710&4294967295,K=M+(z<<12&4294967295|z>>>20),z=G+(L^K&(M^L))+H[2]+606105819&4294967295,G=K+(z<<17&4294967295|z>>>15),z=L+(M^G&(K^M))+H[3]+3250441966&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(K^L&(G^K))+H[4]+4118548399&4294967295,M=L+(z<<7&4294967295|z>>>25),z=K+(G^M&(L^G))+H[5]+1200080426&4294967295,K=M+(z<<12&4294967295|z>>>20),z=G+(L^K&(M^L))+H[6]+2821735955&4294967295,G=K+(z<<17&4294967295|z>>>15),z=L+(M^G&(K^M))+H[7]+4249261313&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(K^L&(G^K))+H[8]+1770035416&4294967295,M=L+(z<<7&4294967295|z>>>25),z=K+(G^M&(L^G))+H[9]+2336552879&4294967295,K=M+(z<<12&4294967295|z>>>20),z=G+(L^K&(M^L))+H[10]+4294925233&4294967295,G=K+(z<<17&4294967295|z>>>15),z=L+(M^G&(K^M))+H[11]+2304563134&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(K^L&(G^K))+H[12]+1804603682&4294967295,M=L+(z<<7&4294967295|z>>>25),z=K+(G^M&(L^G))+H[13]+4254626195&4294967295,K=M+(z<<12&4294967295|z>>>20),z=G+(L^K&(M^L))+H[14]+2792965006&4294967295,G=K+(z<<17&4294967295|z>>>15),z=L+(M^G&(K^M))+H[15]+1236535329&4294967295,L=G+(z<<22&4294967295|z>>>10),z=M+(G^K&(L^G))+H[1]+4129170786&4294967295,M=L+(z<<5&4294967295|z>>>27),z=K+(L^G&(M^L))+H[6]+3225465664&4294967295,K=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(K^M))+H[11]+643717713&4294967295,G=K+(z<<14&4294967295|z>>>18),z=L+(K^M&(G^K))+H[0]+3921069994&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^K&(L^G))+H[5]+3593408605&4294967295,M=L+(z<<5&4294967295|z>>>27),z=K+(L^G&(M^L))+H[10]+38016083&4294967295,K=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(K^M))+H[15]+3634488961&4294967295,G=K+(z<<14&4294967295|z>>>18),z=L+(K^M&(G^K))+H[4]+3889429448&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^K&(L^G))+H[9]+568446438&4294967295,M=L+(z<<5&4294967295|z>>>27),z=K+(L^G&(M^L))+H[14]+3275163606&4294967295,K=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(K^M))+H[3]+4107603335&4294967295,G=K+(z<<14&4294967295|z>>>18),z=L+(K^M&(G^K))+H[8]+1163531501&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(G^K&(L^G))+H[13]+2850285829&4294967295,M=L+(z<<5&4294967295|z>>>27),z=K+(L^G&(M^L))+H[2]+4243563512&4294967295,K=M+(z<<9&4294967295|z>>>23),z=G+(M^L&(K^M))+H[7]+1735328473&4294967295,G=K+(z<<14&4294967295|z>>>18),z=L+(K^M&(G^K))+H[12]+2368359562&4294967295,L=G+(z<<20&4294967295|z>>>12),z=M+(L^G^K)+H[5]+4294588738&4294967295,M=L+(z<<4&4294967295|z>>>28),z=K+(M^L^G)+H[8]+2272392833&4294967295,K=M+(z<<11&4294967295|z>>>21),z=G+(K^M^L)+H[11]+1839030562&4294967295,G=K+(z<<16&4294967295|z>>>16),z=L+(G^K^M)+H[14]+4259657740&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^K)+H[1]+2763975236&4294967295,M=L+(z<<4&4294967295|z>>>28),z=K+(M^L^G)+H[4]+1272893353&4294967295,K=M+(z<<11&4294967295|z>>>21),z=G+(K^M^L)+H[7]+4139469664&4294967295,G=K+(z<<16&4294967295|z>>>16),z=L+(G^K^M)+H[10]+3200236656&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^K)+H[13]+681279174&4294967295,M=L+(z<<4&4294967295|z>>>28),z=K+(M^L^G)+H[0]+3936430074&4294967295,K=M+(z<<11&4294967295|z>>>21),z=G+(K^M^L)+H[3]+3572445317&4294967295,G=K+(z<<16&4294967295|z>>>16),z=L+(G^K^M)+H[6]+76029189&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(L^G^K)+H[9]+3654602809&4294967295,M=L+(z<<4&4294967295|z>>>28),z=K+(M^L^G)+H[12]+3873151461&4294967295,K=M+(z<<11&4294967295|z>>>21),z=G+(K^M^L)+H[15]+530742520&4294967295,G=K+(z<<16&4294967295|z>>>16),z=L+(G^K^M)+H[2]+3299628645&4294967295,L=G+(z<<23&4294967295|z>>>9),z=M+(G^(L|~K))+H[0]+4096336452&4294967295,M=L+(z<<6&4294967295|z>>>26),z=K+(L^(M|~G))+H[7]+1126891415&4294967295,K=M+(z<<10&4294967295|z>>>22),z=G+(M^(K|~L))+H[14]+2878612391&4294967295,G=K+(z<<15&4294967295|z>>>17),z=L+(K^(G|~M))+H[5]+4237533241&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~K))+H[12]+1700485571&4294967295,M=L+(z<<6&4294967295|z>>>26),z=K+(L^(M|~G))+H[3]+2399980690&4294967295,K=M+(z<<10&4294967295|z>>>22),z=G+(M^(K|~L))+H[10]+4293915773&4294967295,G=K+(z<<15&4294967295|z>>>17),z=L+(K^(G|~M))+H[1]+2240044497&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~K))+H[8]+1873313359&4294967295,M=L+(z<<6&4294967295|z>>>26),z=K+(L^(M|~G))+H[15]+4264355552&4294967295,K=M+(z<<10&4294967295|z>>>22),z=G+(M^(K|~L))+H[6]+2734768916&4294967295,G=K+(z<<15&4294967295|z>>>17),z=L+(K^(G|~M))+H[13]+1309151649&4294967295,L=G+(z<<21&4294967295|z>>>11),z=M+(G^(L|~K))+H[4]+4149444226&4294967295,M=L+(z<<6&4294967295|z>>>26),z=K+(L^(M|~G))+H[11]+3174756917&4294967295,K=M+(z<<10&4294967295|z>>>22),z=G+(M^(K|~L))+H[2]+718787259&4294967295,G=K+(z<<15&4294967295|z>>>17),z=L+(K^(G|~M))+H[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(G+(z<<21&4294967295|z>>>11))&4294967295,V.g[2]=V.g[2]+G&4294967295,V.g[3]=V.g[3]+K&4294967295}i.prototype.v=function(V,M){M===void 0&&(M=V.length);const L=M-this.blockSize,H=this.C;let G=this.h,K=0;for(;K<M;){if(G==0)for(;K<=L;)s(this,V,K),K+=this.blockSize;if(typeof V=="string"){for(;K<M;)if(H[G++]=V.charCodeAt(K++),G==this.blockSize){s(this,H),G=0;break}}else for(;K<M;)if(H[G++]=V[K++],G==this.blockSize){s(this,H),G=0;break}}this.h=G,this.o+=M},i.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;M=this.o*8;for(var L=V.length-8;L<V.length;++L)V[L]=M&255,M/=256;for(this.v(V),V=Array(16),M=0,L=0;L<4;++L)for(let H=0;H<32;H+=8)V[M++]=this.g[L]>>>H&255;return V};function o(V,M){var L=f;return Object.prototype.hasOwnProperty.call(L,V)?L[V]:L[V]=M(V)}function c(V,M){this.h=M;const L=[];let H=!0;for(let G=V.length-1;G>=0;G--){const K=V[G]|0;H&&K==M||(L[G]=K,H=!1)}this.g=L}var f={};function m(V){return-128<=V&&V<128?o(V,function(M){return new c([M|0],M<0?-1:0)}):new c([V|0],V<0?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return b;if(V<0)return U(g(-V));const M=[];let L=1;for(let H=0;V>=L;H++)M[H]=V/L|0,L*=4294967296;return new c(M,0)}function E(V,M){if(V.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V.charAt(0)=="-")return U(E(V.substring(1),M));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=g(Math.pow(M,8));let H=b;for(let K=0;K<V.length;K+=8){var G=Math.min(8,V.length-K);const z=parseInt(V.substring(K,K+G),M);G<8?(G=g(Math.pow(M,G)),H=H.j(G).add(g(z))):(H=H.j(L),H=H.add(g(z)))}return H}var b=m(0),A=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(k(this))return-U(this).m();let V=0,M=1;for(let L=0;L<this.g.length;L++){const H=this.i(L);V+=(H>=0?H:4294967296+H)*M,M*=4294967296}return V},n.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(D(this))return"0";if(k(this))return"-"+U(this).toString(V);const M=g(Math.pow(V,6));var L=this;let H="";for(;;){const G=W(L,M).g;L=F(L,G.j(M));let K=((L.g.length>0?L.g[0]:L.h)>>>0).toString(V);if(L=G,D(L))return K+H;for(;K.length<6;)K="0"+K;H=K+H}},n.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function D(V){if(V.h!=0)return!1;for(let M=0;M<V.g.length;M++)if(V.g[M]!=0)return!1;return!0}function k(V){return V.h==-1}n.l=function(V){return V=F(this,V),k(V)?-1:D(V)?0:1};function U(V){const M=V.g.length,L=[];for(let H=0;H<M;H++)L[H]=~V.g[H];return new c(L,~V.h).add(A)}n.abs=function(){return k(this)?U(this):this},n.add=function(V){const M=Math.max(this.g.length,V.g.length),L=[];let H=0;for(let G=0;G<=M;G++){let K=H+(this.i(G)&65535)+(V.i(G)&65535),z=(K>>>16)+(this.i(G)>>>16)+(V.i(G)>>>16);H=z>>>16,K&=65535,z&=65535,L[G]=z<<16|K}return new c(L,L[L.length-1]&-2147483648?-1:0)};function F(V,M){return V.add(U(M))}n.j=function(V){if(D(this)||D(V))return b;if(k(this))return k(V)?U(this).j(U(V)):U(U(this).j(V));if(k(V))return U(this.j(U(V)));if(this.l(N)<0&&V.l(N)<0)return g(this.m()*V.m());const M=this.g.length+V.g.length,L=[];for(var H=0;H<2*M;H++)L[H]=0;for(H=0;H<this.g.length;H++)for(let G=0;G<V.g.length;G++){const K=this.i(H)>>>16,z=this.i(H)&65535,Kt=V.i(G)>>>16,Lt=V.i(G)&65535;L[2*H+2*G]+=z*Lt,j(L,2*H+2*G),L[2*H+2*G+1]+=K*Lt,j(L,2*H+2*G+1),L[2*H+2*G+1]+=z*Kt,j(L,2*H+2*G+1),L[2*H+2*G+2]+=K*Kt,j(L,2*H+2*G+2)}for(V=0;V<M;V++)L[V]=L[2*V+1]<<16|L[2*V];for(V=M;V<2*M;V++)L[V]=0;return new c(L,0)};function j(V,M){for(;(V[M]&65535)!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function X(V,M){this.g=V,this.h=M}function W(V,M){if(D(M))throw Error("division by zero");if(D(V))return new X(b,b);if(k(V))return M=W(U(V),M),new X(U(M.g),U(M.h));if(k(M))return M=W(V,U(M)),new X(U(M.g),M.h);if(V.g.length>30){if(k(V)||k(M))throw Error("slowDivide_ only works with positive integers.");for(var L=A,H=M;H.l(V)<=0;)L=mt(L),H=mt(H);var G=rt(L,1),K=rt(H,1);for(H=rt(H,2),L=rt(L,2);!D(H);){var z=K.add(H);z.l(V)<=0&&(G=G.add(L),K=z),H=rt(H,1),L=rt(L,1)}return M=F(V,G.j(M)),new X(G,M)}for(G=b;V.l(M)>=0;){for(L=Math.max(1,Math.floor(V.m()/M.m())),H=Math.ceil(Math.log(L)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),K=g(L),z=K.j(M);k(z)||z.l(V)>0;)L-=H,K=g(L),z=K.j(M);D(K)&&(K=A),G=G.add(K),V=F(V,z)}return new X(G,V)}n.B=function(V){return W(this,V).h},n.and=function(V){const M=Math.max(this.g.length,V.g.length),L=[];for(let H=0;H<M;H++)L[H]=this.i(H)&V.i(H);return new c(L,this.h&V.h)},n.or=function(V){const M=Math.max(this.g.length,V.g.length),L=[];for(let H=0;H<M;H++)L[H]=this.i(H)|V.i(H);return new c(L,this.h|V.h)},n.xor=function(V){const M=Math.max(this.g.length,V.g.length),L=[];for(let H=0;H<M;H++)L[H]=this.i(H)^V.i(H);return new c(L,this.h^V.h)};function mt(V){const M=V.g.length+1,L=[];for(let H=0;H<M;H++)L[H]=V.i(H)<<1|V.i(H-1)>>>31;return new c(L,V.h)}function rt(V,M){const L=M>>5;M%=32;const H=V.g.length-L,G=[];for(let K=0;K<H;K++)G[K]=M>0?V.i(K+L)>>>M|V.i(K+L+1)<<32-M:V.i(K+L);return new c(G,V.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Fw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=E,wh=c}).apply(typeof c3<"u"?c3:typeof self<"u"?self:typeof window<"u"?window:{});var w1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jw,I0,Kw,U1,vT,Yw,Qw,Xw;(function(){var n,t=Object.defineProperty;function e(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof w1=="object"&&w1];for(var R=0;R<_.length;++R){var I=_[R];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=e(this);function s(_,R){if(R)t:{var I=i;_=_.split(".");for(var P=0;P<_.length-1;P++){var $=_[P];if(!($ in I))break t;I=I[$]}_=_[_.length-1],P=I[_],R=R(P),R!=P&&R!=null&&t(I,_,{configurable:!0,writable:!0,value:R})}}s("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(_){return _||function(R){var I=[],P;for(P in R)Object.prototype.hasOwnProperty.call(R,P)&&I.push([P,R[P]]);return I}});var o=o||{},c=this||self;function f(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function m(_,R,I){return _.call.apply(_.bind,arguments)}function g(_,R,I){return g=m,g.apply(null,arguments)}function E(_,R){var I=Array.prototype.slice.call(arguments,1);return function(){var P=I.slice();return P.push.apply(P,arguments),_.apply(this,P)}}function b(_,R){function I(){}I.prototype=R.prototype,_.Z=R.prototype,_.prototype=new I,_.prototype.constructor=_,_.Ob=function(P,$,ct){for(var Vt=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)Vt[fe-2]=arguments[fe];return R.prototype[$].apply(P,Vt)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function N(_){const R=_.length;if(R>0){const I=Array(R);for(let P=0;P<R;P++)I[P]=_[P];return I}return[]}function D(_,R){for(let P=1;P<arguments.length;P++){const $=arguments[P];var I=typeof $;if(I=I!="object"?I:$?Array.isArray($)?"array":I:"null",I=="array"||I=="object"&&typeof $.length=="number"){I=_.length||0;const ct=$.length||0;_.length=I+ct;for(let Vt=0;Vt<ct;Vt++)_[I+Vt]=$[Vt]}else _.push($)}}class k{constructor(R,I){this.i=R,this.j=I,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function U(_){c.setTimeout(()=>{throw _},0)}function F(){var _=V;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class j{constructor(){this.h=this.g=null}add(R,I){const P=X.get();P.set(R,I),this.h?this.h.next=P:this.g=P,this.h=P}}var X=new k(()=>new W,_=>_.reset());class W{constructor(){this.next=this.g=this.h=null}set(R,I){this.h=R,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let mt,rt=!1,V=new j,M=()=>{const _=Promise.resolve(void 0);mt=()=>{_.then(L)}};function L(){for(var _;_=F();){try{_.h.call(_.g)}catch(I){U(I)}var R=X;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}rt=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var K=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const I=()=>{};c.addEventListener("test",I,R),c.removeEventListener("test",I,R)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function Kt(_,R){G.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}b(Kt,G),Kt.prototype.init=function(_,R){const I=this.type=_.type,P=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(I=="mouseover"?R=_.fromElement:I=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Kt.Z.h.call(this)},Kt.prototype.h=function(){Kt.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Lt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function Tt(_,R,I,P,$){this.listener=_,this.proxy=null,this.src=R,this.type=I,this.capture=!!P,this.ha=$,this.key=++Z,this.da=this.fa=!1}function Et(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Bt(_,R,I){for(const P in _)R.call(I,_[P],P,_)}function Qt(_,R){for(const I in _)R.call(void 0,_[I],I,_)}function q(_){const R={};for(const I in _)R[I]=_[I];return R}const ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function It(_,R){let I,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(I in P)_[I]=P[I];for(let ct=0;ct<ut.length;ct++)I=ut[ct],Object.prototype.hasOwnProperty.call(P,I)&&(_[I]=P[I])}}function zt(_){this.src=_,this.g={},this.h=0}zt.prototype.add=function(_,R,I,P,$){const ct=_.toString();_=this.g[ct],_||(_=this.g[ct]=[],this.h++);const Vt=ae(_,R,P,$);return Vt>-1?(R=_[Vt],I||(R.fa=!1)):(R=new Tt(R,this.src,ct,!!P,$),R.fa=I,_.push(R)),R};function ee(_,R){const I=R.type;if(I in _.g){var P=_.g[I],$=Array.prototype.indexOf.call(P,R,void 0),ct;(ct=$>=0)&&Array.prototype.splice.call(P,$,1),ct&&(Et(R),_.g[I].length==0&&(delete _.g[I],_.h--))}}function ae(_,R,I,P){for(let $=0;$<_.length;++$){const ct=_[$];if(!ct.da&&ct.listener==R&&ct.capture==!!I&&ct.ha==P)return $}return-1}var be="closure_lm_"+(Math.random()*1e6|0),vn={};function ke(_,R,I,P,$){if(Array.isArray(R)){for(let ct=0;ct<R.length;ct++)ke(_,R[ct],I,P,$);return null}return I=So(I),_&&_[Lt]?_.J(R,I,f(P)?!!P.capture:!1,$):xr(_,R,I,!1,P,$)}function xr(_,R,I,P,$,ct){if(!R)throw Error("Invalid event type");const Vt=f($)?!!$.capture:!!$;let fe=Gi(_);if(fe||(_[be]=fe=new zt(_)),I=fe.add(R,I,P,Vt,ct),I.proxy)return I;if(P=To(),I.proxy=P,P.src=_,P.listener=I,_.addEventListener)K||($=Vt),$===void 0&&($=!1),_.addEventListener(R.toString(),P,$);else if(_.attachEvent)_.attachEvent(fs(R.toString()),P);else if(_.addListener&&_.removeListener)_.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return I}function To(){function _(I){return R.call(_.src,_.listener,I)}const R=wa;return _}function ta(_,R,I,P,$){if(Array.isArray(R))for(var ct=0;ct<R.length;ct++)ta(_,R[ct],I,P,$);else P=f(P)?!!P.capture:!!P,I=So(I),_&&_[Lt]?(_=_.i,ct=String(R).toString(),ct in _.g&&(R=_.g[ct],I=ae(R,I,P,$),I>-1&&(Et(R[I]),Array.prototype.splice.call(R,I,1),R.length==0&&(delete _.g[ct],_.h--)))):_&&(_=Gi(_))&&(R=_.g[R.toString()],_=-1,R&&(_=ae(R,I,P,$)),(I=_>-1?R[_]:null)&&hs(I))}function hs(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Lt])ee(R.i,_);else{var I=_.type,P=_.proxy;R.removeEventListener?R.removeEventListener(I,P,_.capture):R.detachEvent?R.detachEvent(fs(I),P):R.addListener&&R.removeListener&&R.removeListener(P),(I=Gi(R))?(ee(I,_),I.h==0&&(I.src=null,R[be]=null)):Et(_)}}}function fs(_){return _ in vn?vn[_]:vn[_]="on"+_}function wa(_,R){if(_.da)_=!0;else{R=new Kt(R,this);const I=_.listener,P=_.ha||_.src;_.fa&&hs(_),_=I.call(P,R)}return _}function Gi(_){return _=_[be],_ instanceof zt?_:null}var ds="__closure_events_fn_"+(Math.random()*1e9>>>0);function So(_){return typeof _=="function"?_:(_[ds]||(_[ds]=function(R){return _.handleEvent(R)}),_[ds])}function En(){H.call(this),this.i=new zt(this),this.M=this,this.G=null}b(En,H),En.prototype[Lt]=!0,En.prototype.removeEventListener=function(_,R,I,P){ta(this,_,R,I,P)};function rn(_,R){var I,P=_.G;if(P)for(I=[];P;P=P.G)I.push(P);if(_=_.M,P=R.type||R,typeof R=="string")R=new G(R,_);else if(R instanceof G)R.target=R.target||_;else{var $=R;R=new G(P,_),It(R,$)}$=!0;let ct,Vt;if(I)for(Vt=I.length-1;Vt>=0;Vt--)ct=R.g=I[Vt],$=ea(ct,P,!0,R)&&$;if(ct=R.g=_,$=ea(ct,P,!0,R)&&$,$=ea(ct,P,!1,R)&&$,I)for(Vt=0;Vt<I.length;Vt++)ct=R.g=I[Vt],$=ea(ct,P,!1,R)&&$}En.prototype.N=function(){if(En.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const I=_.g[R];for(let P=0;P<I.length;P++)Et(I[P]);delete _.g[R],_.h--}}this.G=null},En.prototype.J=function(_,R,I,P){return this.i.add(String(_),R,!1,I,P)},En.prototype.K=function(_,R,I,P){return this.i.add(String(_),R,!0,I,P)};function ea(_,R,I,P){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let $=!0;for(let ct=0;ct<R.length;++ct){const Vt=R[ct];if(Vt&&!Vt.da&&Vt.capture==I){const fe=Vt.listener,qn=Vt.ha||Vt.src;Vt.fa&&ee(_.i,Vt),$=fe.call(qn,P)!==!1&&$}}return $&&!P.defaultPrevented}function sr(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=g(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(_,R||0)}function Gn(_){_.g=sr(()=>{_.g=null,_.i&&(_.i=!1,Gn(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class en extends H{constructor(R,I){super(),this.m=R,this.l=I,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Gn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(_){H.call(this),this.h=_,this.g={}}b(wi,H);var ms=[];function es(_){Bt(_.g,function(R,I){this.g.hasOwnProperty(I)&&hs(R)},_),_.g={}}wi.prototype.N=function(){wi.Z.N.call(this),es(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ns=c.JSON.stringify,Hi=c.JSON.parse,ps=class{stringify(_){return c.JSON.stringify(_,void 0)}parse(_){return c.JSON.parse(_,void 0)}};function au(){}function yt(){}var Rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){G.call(this,"d")}b(qt,G);function le(){G.call(this,"c")}b(le,G);var ue={},je=null;function gs(){return je=je||new En}ue.Ia="serverreachability";function bo(_){G.call(this,ue.Ia,_)}b(bo,G);function li(_){const R=gs();rn(R,new bo(R))}ue.STAT_EVENT="statevent";function ar(_,R){G.call(this,ue.STAT_EVENT,_),this.stat=R}b(ar,G);function pn(_){const R=gs();rn(R,new ar(R,_))}ue.Ja="timingevent";function rr(_,R){G.call(this,ue.Ja,_),this.size=R}b(rr,G);function na(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){_()},R)}function Ra(){this.g=!0}Ra.prototype.ua=function(){this.g=!1};function Md(_,R,I,P,$,ct){_.info(function(){if(_.g)if(ct){var Vt="",fe=ct.split("&");for(let xe=0;xe<fe.length;xe++){var qn=fe[xe].split("=");if(qn.length>1){const gn=qn[0];qn=qn[1];const vs=gn.split("_");Vt=vs.length>=2&&vs[1]=="type"?Vt+(gn+"="+qn+"&"):Vt+(gn+"=redacted&")}}}else Vt=null;else Vt=ct;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+R+`
`+I+`
`+Vt})}function Or(_,R,I,P,$,ct,Vt){_.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+R+`
`+I+`
`+ct+" "+Vt})}function or(_,R,I,P){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+dc(_,I)+(P?" "+P:"")})}function nl(_,R){_.info(function(){return"TIMEOUT: "+R})}Ra.prototype.info=function(){};function dc(_,R){if(!_.g)return R;if(!R)return null;try{const ct=JSON.parse(R);if(ct){for(_=0;_<ct.length;_++)if(Array.isArray(ct[_])){var I=ct[_];if(!(I.length<2)){var P=I[1];if(Array.isArray(P)&&!(P.length<1)){var $=P[0];if($!="noop"&&$!="stop"&&$!="close")for(let Vt=1;Vt<P.length;Vt++)P[Vt]=""}}}}return ns(ct)}catch{return R}}var lr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},il={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mc;function Mr(){}b(Mr,au),Mr.prototype.g=function(){return new XMLHttpRequest},mc=new Mr;function Ca(_){return encodeURIComponent(String(_))}function pc(_){var R=1;_=_.split(":");const I=[];for(;R>0&&_.length;)I.push(_.shift()),R--;return _.length&&I.push(_.join(":")),I}function qi(_,R,I,P){this.j=_,this.i=R,this.l=I,this.S=P||1,this.V=new wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ia}function Ia(){this.i=null,this.g="",this.h=!1}var xn={},ui={};function Na(_,R,I){_.M=1,_.A=Zn(Wn(R)),_.u=I,_.R=!0,ia(_,null)}function ia(_,R){_.F=Date.now(),Ps(_),_.B=Wn(_.A);var I=_.B,P=_.S;Array.isArray(P)||(P=[String(P)]),lu(I.i,"t",P),_.C=0,I=_.j.L,_.h=new Ia,_.g=sf(_.j,I?R:null,!_.u),_.P>0&&(_.O=new en(g(_.Y,_,_.g),_.P)),R=_.V,I=_.g,P=_.ba;var $="readystatechange";Array.isArray($)||($&&(ms[0]=$.toString()),$=ms);for(let ct=0;ct<$.length;ct++){const Vt=ke(I,$[ct],P||R.handleEvent,!1,R.h||R);if(!Vt)break;R.g[Vt.key]=Vt}R=_.J?q(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),li(),Md(_.i,_.v,_.B,_.l,_.S,_.u)}qi.prototype.ba=function(_){_=_.target;const R=this.O;R&&mr(_)==3?R.j():this.Y(_)},qi.prototype.Y=function(_){try{if(_==this.g)t:{const fe=mr(this.g),qn=this.g.ya(),xe=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||Ii(this.g)))){this.K||fe!=4||qn==7||(qn==8||xe<=0?li(3):li(2)),ur(this);var R=this.g.ca();this.X=R;var I=Pr(this);if(this.o=R==200,Or(this.i,this.v,this.B,this.l,this.S,fe,R),this.o){if(this.U&&!this.L){e:{if(this.g){var P,$=this.g;if((P=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(P)){var ct=P;break e}}ct=null}if(_=ct)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Da(this,_);else{this.o=!1,this.m=3,pn(12),Vs(this),sa(this);break t}}if(this.R){_=!0;let gn;for(;!this.K&&this.C<I.length;)if(gn=gc(this,I),gn==ui){fe==4&&(this.m=4,pn(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==xn){this.m=4,pn(15),or(this.i,this.l,I,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,gn,null),Da(this,gn);if(sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||I.length!=0||this.h.h||(this.m=1,pn(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,I,"[Invalid Chunked Response]"),Vs(this),sa(this);else if(I.length>0&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.aa&&!Vt.P&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Cc(Vt),Vt.P=!0,pn(11))}}else or(this.i,this.l,I,null),Da(this,I);fe==4&&Vs(this),this.o&&!this.K&&(fe==4?ef(this.j,this):(this.o=!1,Ps(this)))}else Gr(this.g),R==400&&I.indexOf("Unknown SID")>0?(this.m=3,pn(12)):(this.m=0,pn(13)),Vs(this),sa(this)}}}catch{}};function Pr(_){if(!sl(_))return _.g.la();const R=Ii(_.g);if(R==="")return"";let I="";const P=R.length,$=mr(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Vs(_),sa(_),"";_.h.i=new c.TextDecoder}for(let ct=0;ct<P;ct++)_.h.h=!0,I+=_.h.i.decode(R[ct],{stream:!($&&ct==P-1)});return R.length=0,_.h.g+=I,_.C=0,_.h.g}function sl(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function gc(_,R){var I=_.C,P=R.indexOf(`
`,I);return P==-1?ui:(I=Number(R.substring(I,P)),isNaN(I)?xn:(P+=1,P+I>R.length?ui:(R=R.slice(P,P+I),_.C=P+I,R)))}qi.prototype.cancel=function(){this.K=!0,Vs(this)};function Ps(_){_.T=Date.now()+_.H,Vr(_,_.H)}function Vr(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=na(g(_.aa,_),R)}function ur(_){_.D&&(c.clearTimeout(_.D),_.D=null)}qi.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(nl(this.i,this.B),this.M!=2&&(li(),pn(17)),Vs(this),this.m=2,sa(this)):Vr(this,this.T-_)};function sa(_){_.j.I==0||_.K||ef(_.j,_)}function Vs(_){ur(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,es(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function Da(_,R){try{var I=_.j;if(I.I!=0&&(I.g==_||Fi(I.h,_))){if(!_.L&&Fi(I.h,_)&&I.I==3){try{var P=I.Ba.g.parse(R)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){t:if(!I.v){if(I.g)if(I.g.F+3e3<_.F)Ic(I),Hr(I);else break t;fl(I),pn(18)}}else I.xa=$[1],0<I.xa-I.K&&$[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=na(g(I.Va,I),6e3));cr(I.h)<=1&&I.ta&&(I.ta=void 0)}else Pa(I,11)}else if((_.L||I.g==_)&&Ic(I),!z(R))for($=I.Ba.g.parse(R),R=0;R<$.length;R++){let xe=$[R];const gn=xe[0];if(!(gn<=I.K))if(I.K=gn,xe=xe[1],I.I==2)if(xe[0]=="c"){I.M=xe[1],I.ba=xe[2];const vs=xe[3];vs!=null&&(I.ka=vs,I.j.info("VER="+I.ka));const _r=xe[4];_r!=null&&(I.za=_r,I.j.info("SVER="+I.za));const yr=xe[5];yr!=null&&typeof yr=="number"&&yr>0&&(P=1.5*yr,I.O=P,I.j.info("backChannelRequestTimeoutMs_="+P)),P=I;const Ls=_.g;if(Ls){const No=Ls.g?Ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var ct=P.h;ct.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(ct.j=ct.l,ct.g=new Set,ct.h&&(ji(ct,ct.h),ct.h=null))}if(P.G){const pu=Ls.g?Ls.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(P.wa=pu,Fe(P.J,P.G,pu))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-_.F,I.j.info("Handshake RTT: "+I.T+"ms")),P=I;var Vt=_;if(P.na=nf(P,P.L?P.ba:null,P.W),Vt.L){al(P.h,Vt);var fe=Vt,qn=P.O;qn&&(fe.H=qn),fe.D&&(ur(fe),Ps(fe)),P.g=Vt}else Rc(P);I.i.length>0&&gr(I)}else xe[0]!="stop"&&xe[0]!="close"||Pa(I,7);else I.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Pa(I,7):Ac(I):xe[0]!="noop"&&I.l&&I.l.qa(xe),I.A=0)}}li(4)}catch{}}var Hn=class{constructor(_,R){this.g=_,this.map=R}};function xa(_){this.l=_||10,c.PerformanceNavigationTiming?(_=c.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ru(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function cr(_){return _.h?1:_.g?_.g.size:0}function Fi(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function ji(_,R){_.g?_.g.add(R):_.h=R}function al(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}xa.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function un(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const I of _.g.values())R=R.concat(I.G);return R}return N(_.i)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(_,R){if(_){_=_.split("&");for(let I=0;I<_.length;I++){const P=_[I].indexOf("=");let $,ct=null;P>=0?($=_[I].substring(0,P),ct=_[I].substring(P+1)):$=_[I],R($,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}function ks(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof ks?(this.l=_.l,Ri(this,_.j),this.o=_.o,this.g=_.g,kr(this,_.u),this.h=_.h,ou(this,$h(_.i)),this.m=_.m):_&&(R=String(_).match(_c))?(this.l=!1,Ri(this,R[1]||"",!0),this.o=Ke(R[2]||""),this.g=Ke(R[3]||"",!0),kr(this,R[4]),this.h=Ke(R[5]||"",!0),ou(this,R[6]||"",!0),this.m=Ke(R[7]||"")):(this.l=!1,this.i=new Ur(null,this.l))}ks.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Lr(R,Ao,!0),":");var I=this.g;return(I||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Lr(R,Ao,!0),"@"),_.push(Ca(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&_.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&_.push("/"),_.push(Lr(I,I.charAt(0)=="/"?aa:yc,!0))),(I=this.i.toString())&&_.push("?",I),(I=this.m)&&_.push("#",Lr(I,vc)),_.join("")},ks.prototype.resolve=function(_){const R=Wn(this);let I=!!_.j;I?Ri(R,_.j):I=!!_.o,I?R.o=_.o:I=!!_.g,I?R.g=_.g:I=_.u!=null;var P=_.h;if(I)kr(R,_.u);else if(I=!!_.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var $=R.h.lastIndexOf("/");$!=-1&&(P=R.h.slice(0,$+1)+P)}if($=P,$==".."||$==".")P="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){P=$.lastIndexOf("/",0)==0,$=$.split("/");const ct=[];for(let Vt=0;Vt<$.length;){const fe=$[Vt++];fe=="."?P&&Vt==$.length&&ct.push(""):fe==".."?((ct.length>1||ct.length==1&&ct[0]!="")&&ct.pop(),P&&Vt==$.length&&ct.push("")):(ct.push(fe),P=!0)}P=ct.join("/")}else P=$}return I?R.h=P:I=_.i.toString()!=="",I?ou(R,$h(_.i)):I=!!_.m,I&&(R.m=_.m),R};function Wn(_){return new ks(_)}function Ri(_,R,I){_.j=I?Ke(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function kr(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function ou(_,R,I){R instanceof Ur?(_.i=R,uu(_.i,_.l)):(I||(R=Lr(R,hr)),_.i=new Ur(R,_.l))}function Fe(_,R,I){_.i.set(R,I)}function Zn(_){return Fe(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Ke(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Lr(_,R,I){return typeof _=="string"?(_=encodeURI(_).replace(R,Ci),I&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ci(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Ao=/[#\/\?@]/g,yc=/[#\?:]/g,aa=/[#\?]/g,hr=/[#\?@]/g,vc=/#/g;function Ur(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function _s(_){_.g||(_.g=new Map,_.h=0,_.i&&rl(_.i,function(R,I){_.add(decodeURIComponent(R.replace(/\+/g," ")),I)}))}n=Ur.prototype,n.add=function(_,R){_s(this),this.i=null,_=zr(this,_);let I=this.g.get(_);return I||this.g.set(_,I=[]),I.push(R),this.h+=1,this};function Zh(_,R){_s(_),R=zr(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function Ec(_,R){return _s(_),R=zr(_,R),_.g.has(R)}n.forEach=function(_,R){_s(this),this.g.forEach(function(I,P){I.forEach(function($){_.call(R,$,P,this)},this)},this)};function Tc(_,R){_s(_);let I=[];if(typeof R=="string")Ec(_,R)&&(I=I.concat(_.g.get(zr(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)I=I.concat(_[R]);return I}n.set=function(_,R){return _s(this),this.i=null,_=zr(this,_),Ec(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=Tc(this,_),_.length>0?String(_[0]):R):R};function lu(_,R,I){Zh(_,R),I.length>0&&(_.i=null,_.g.set(zr(_,R),N(I)),_.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let P=0;P<R.length;P++){var I=R[P];const $=Ca(I);I=Tc(this,I);for(let ct=0;ct<I.length;ct++){let Vt=$;I[ct]!==""&&(Vt+="="+Ca(I[ct])),_.push(Vt)}}return this.i=_.join("&")};function $h(_){const R=new Ur;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function zr(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function uu(_,R){R&&!_.j&&(_s(_),_.i=null,_.g.forEach(function(I,P){const $=P.toLowerCase();P!=$&&(Zh(this,P),lu(this,$,I))},_)),_.j=R}function fr(_,R){const I=new Ra;if(c.Image){const P=new Image;P.onload=E(ra,I,"TestLoadImage: loaded",!0,R,P),P.onerror=E(ra,I,"TestLoadImage: error",!1,R,P),P.onabort=E(ra,I,"TestLoadImage: abort",!1,R,P),P.ontimeout=E(ra,I,"TestLoadImage: timeout",!1,R,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=_}else R(!1)}function Sc(_,R){const I=new Ra,P=new AbortController,$=setTimeout(()=>{P.abort(),ra(I,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:P.signal}).then(ct=>{clearTimeout($),ct.ok?ra(I,"TestPingServer: ok",!0,R):ra(I,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout($),ra(I,"TestPingServer: error",!1,R)})}function ra(_,R,I,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(I)}catch{}}function wo(){this.g=new ps}function Oa(_){this.i=_.Sb||null,this.h=_.ab||!1}b(Oa,au),Oa.prototype.g=function(){return new ol(this.i,this.h)};function ol(_,R){En.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ol,En),n=ol.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Ma(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cu(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function cu(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?Ro(this):Ma(this),this.readyState==3&&cu(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,Ro(this))},n.Na=function(_){this.g&&(this.response=_,Ro(this))},n.ga=function(){this.g&&Ro(this)};function Ro(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Ma(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var I=R.next();!I.done;)I=I.value,_.push(I[0]+": "+I[1]),I=R.next();return _.join(`\r
`)};function Ma(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function oa(_){let R="";return Bt(_,function(I,P){R+=P,R+=":",R+=I,R+=`\r
`}),R}function hu(_,R,I){t:{for(P in I){var P=!1;break t}P=!0}P||(I=oa(I),typeof _=="string"?I!=null&&Ca(I):Fe(_,R,I))}function Je(_){En.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Je,En);var ys=/^https?$/i,bc=["POST","PUT"];n=Je.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,I,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mc.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(ct){Br(this,ct);return}if(_=I||"",I=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)I.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ct of P.keys())I.set(ct,P.get(ct));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(I.keys()).find(ct=>ct.toLowerCase()=="content-type"),$=c.FormData&&_ instanceof c.FormData,!(Array.prototype.indexOf.call(bc,R,void 0)>=0)||P||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ct,Vt]of I)this.g.setRequestHeader(ct,Vt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(ct){Br(this,ct)}};function Br(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,ll(_),dr(_)}function ll(_){_.A||(_.A=!0,rn(_,"complete"),rn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,rn(this,"complete"),rn(this,"abort"),dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ul(this):this.Xa())},n.Xa=function(){ul(this)};function ul(_){if(_.h&&typeof o<"u"){if(_.v&&mr(_)==4)setTimeout(_.Ca.bind(_),0);else if(rn(_,"readystatechange"),mr(_)==4){_.h=!1;try{const ct=_.ca();t:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var I;if(!(I=R)){var P;if(P=ct===0){let Vt=String(_.D).match(_c)[1]||null;!Vt&&c.self&&c.self.location&&(Vt=c.self.location.protocol.slice(0,-1)),P=!ys.test(Vt?Vt.toLowerCase():"")}I=P}if(I)rn(_,"complete"),rn(_,"success");else{_.o=6;try{var $=mr(_)>2?_.g.statusText:""}catch{$=""}_.l=$+" ["+_.ca()+"]",ll(_)}}finally{dr(_)}}}}function dr(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const I=_.g;_.g=null,R||rn(_,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function mr(_){return _.g?_.g.readyState:0}n.ca=function(){try{return mr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),Hi(R)}};function Ii(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Gr(_){const R={};_=(_.g&&mr(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<_.length;P++){if(z(_[P]))continue;var I=pc(_[P]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ct=R[$]||[];R[$]=ct,ct.push(I)}Qt(R,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(_,R,I){return I&&I.internalChannelParams&&I.internalChannelParams[_]||R}function Co(_){this.za=0,this.i=[],this.j=new Ra,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pr("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pr("baseRetryDelayMs",5e3,_),this.Za=pr("retryDelaySeedMs",1e4,_),this.Ta=pr("forwardChannelMaxRetries",2,_),this.va=pr("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new xa(_&&_.concurrentRequestLimit),this.Ba=new wo,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Co.prototype,n.ka=8,n.I=1,n.connect=function(_,R,I,P){pn(0),this.W=_,this.H=R||{},I&&P!==void 0&&(this.H.OSID=I,this.H.OAID=P),this.F=this.X,this.J=nf(this,null,this.W),gr(this)};function Ac(_){if(fu(_),_.I==3){var R=_.V++,I=Wn(_.J);if(Fe(I,"SID",_.M),Fe(I,"RID",R),Fe(I,"TYPE","terminate"),hl(_,I),R=new qi(_,_.j,R),R.M=2,R.A=Zn(Wn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=R.A,I=!0),I||(R.g=sf(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Ps(R)}du(_)}function Hr(_){_.g&&(Cc(_),_.g.cancel(),_.g=null)}function fu(_){Hr(_),_.v&&(c.clearTimeout(_.v),_.v=null),Ic(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&c.clearTimeout(_.m),_.m=null)}function gr(_){if(!ru(_.h)&&!_.m){_.m=!0;var R=_.Ea;mt||M(),rt||(mt(),rt=!0),V.add(R,_),_.D=0}}function cl(_,R){return cr(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=na(g(_.Ea,_,R),dl(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const $=new qi(this,this.j,_);let ct=this.o;if(this.U&&(ct?(ct=q(ct),It(ct,this.U)):ct=this.U),this.u!==null||this.R||($.J=ct,ct=null),this.S)t:{for(var R=0,I=0;I<this.i.length;I++){e:{var P=this.i[I];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(R+=P,R>4096){R=I;break t}if(R===4096||I===this.i.length-1){R=I+1;break t}}R=1e3}else R=1e3;R=tf(this,$,R),I=Wn(this.J),Fe(I,"RID",_),Fe(I,"CVER",22),this.G&&Fe(I,"X-HTTP-Session-Id",this.G),hl(this,I),ct&&(this.R?R="headers="+Ca(oa(ct))+"&"+R:this.u&&hu(I,this.u,ct)),ji(this.h,$),this.Ra&&Fe(I,"TYPE","init"),this.S?(Fe(I,"$req",R),Fe(I,"SID","null"),$.U=!0,Na($,I,null)):Na($,I,R),this.I=2}}else this.I==3&&(_?wc(this,_):this.i.length==0||ru(this.h)||wc(this))};function wc(_,R){var I;R?I=R.l:I=_.V++;const P=Wn(_.J);Fe(P,"SID",_.M),Fe(P,"RID",I),Fe(P,"AID",_.K),hl(_,P),_.u&&_.o&&hu(P,_.u,_.o),I=new qi(_,_.j,I,_.D+1),_.u===null&&(I.J=_.o),R&&(_.i=R.G.concat(_.i)),R=tf(_,I,1e3),I.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),ji(_.h,I),Na(I,P,R)}function hl(_,R){_.H&&Bt(_.H,function(I,P){Fe(R,P,I)}),_.l&&Bt({},function(I,P){Fe(R,P,I)})}function tf(_,R,I){I=Math.min(_.i.length,I);const P=_.l?g(_.l.Ka,_.l,_):null;t:{var $=_.i;let fe=-1;for(;;){const qn=["count="+I];fe==-1?I>0?(fe=$[0].g,qn.push("ofs="+fe)):fe=0:qn.push("ofs="+fe);let xe=!0;for(let gn=0;gn<I;gn++){var ct=$[gn].g;const vs=$[gn].map;if(ct-=fe,ct<0)fe=Math.max(0,$[gn].g-100),xe=!1;else try{ct="req"+ct+"_"||"";try{var Vt=vs instanceof Map?vs:Object.entries(vs);for(const[_r,yr]of Vt){let Ls=yr;f(yr)&&(Ls=ns(yr)),qn.push(ct+_r+"="+encodeURIComponent(Ls))}}catch(_r){throw qn.push(ct+"type="+encodeURIComponent("_badmap")),_r}}catch{P&&P(vs)}}if(xe){Vt=qn.join("&");break t}}Vt=void 0}return _=_.i.splice(0,I),R.G=_,Vt}function Rc(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;mt||M(),rt||(mt(),rt=!0),V.add(R,_),_.A=0}}function fl(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=na(g(_.Da,_),dl(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,Pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=na(g(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pn(10),Hr(this),Pd(this))};function Cc(_){_.B!=null&&(c.clearTimeout(_.B),_.B=null)}function Pd(_){_.g=new qi(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=Wn(_.na);Fe(R,"RID","rpc"),Fe(R,"SID",_.M),Fe(R,"AID",_.K),Fe(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&Fe(R,"TO",_.ia),Fe(R,"TYPE","xmlhttp"),hl(_,R),_.u&&_.o&&hu(R,_.u,_.o),_.O&&(_.g.H=_.O);var I=_.g;_=_.ba,I.M=1,I.A=Zn(Wn(R)),I.u=null,I.R=!0,ia(I,_)}n.Va=function(){this.C!=null&&(this.C=null,Hr(this),fl(this),pn(19))};function Ic(_){_.C!=null&&(c.clearTimeout(_.C),_.C=null)}function ef(_,R){var I=null;if(_.g==R){Ic(_),Cc(_),_.g=null;var P=2}else if(Fi(_.h,R))I=R.G,al(_.h,R),P=1;else return;if(_.I!=0){if(R.o)if(P==1){I=R.u?R.u.length:0,R=Date.now()-R.F;var $=_.D;P=gs(),rn(P,new rr(P,I)),gr(_)}else Rc(_);else if($=R.m,$==3||$==0&&R.X>0||!(P==1&&cl(_,R)||P==2&&fl(_)))switch(I&&I.length>0&&(R=_.h,R.i=R.i.concat(I)),$){case 1:Pa(_,5);break;case 4:Pa(_,10);break;case 3:Pa(_,6);break;default:Pa(_,2)}}}function dl(_,R){let I=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(I*=2),I*R}function Pa(_,R){if(_.j.info("Error code "+R),R==2){var I=g(_.bb,_),P=_.Ua;const $=!P;P=new ks(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ri(P,"https"),Zn(P),$?fr(P.toString(),I):Sc(P.toString(),I)}else pn(2);_.I=0,_.l&&_.l.pa(R),du(_),fu(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function du(_){if(_.I=0,_.ja=[],_.l){const R=un(_.h);(R.length!=0||_.i.length!=0)&&(D(_.ja,R),D(_.ja,_.i),_.h.i.length=0,N(_.i),_.i.length=0),_.l.oa()}}function nf(_,R,I){var P=I instanceof ks?Wn(I):new ks(I);if(P.g!="")R&&(P.g=R+"."+P.g),kr(P,P.u);else{var $=c.location;P=$.protocol,R=R?R+"."+$.hostname:$.hostname,$=+$.port;const ct=new ks(null);P&&Ri(ct,P),R&&(ct.g=R),$&&kr(ct,$),I&&(ct.h=I),P=ct}return I=_.G,R=_.wa,I&&R&&Fe(P,I,R),Fe(P,"VER",_.ka),hl(_,P),P}function sf(_,R,I){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new Je(new Oa({ab:I})):new Je(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}n=Nc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Io(){}Io.prototype.g=function(_,R){return new is(_,R)};function is(_,R){En.call(this),this.g=new Co(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!z(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!z(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new Fr(this)}b(is,En),is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},is.prototype.close=function(){Ac(this.g)},is.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var I={};I.__data__=_,_=I}else this.v&&(I={},I.__data__=ns(_),_=I);R.i.push(new Hn(R.Ya++,_)),R.I==3&&gr(R)},is.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,is.Z.N.call(this)};function qr(_){qt.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){t:{for(const I in R){_=I;break t}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}b(qr,qt);function mu(){le.call(this),this.status=1}b(mu,le);function Fr(_){this.g=_}b(Fr,Nc),Fr.prototype.ra=function(){rn(this.g,"a")},Fr.prototype.qa=function(_){rn(this.g,new qr(_))},Fr.prototype.pa=function(_){rn(this.g,new mu)},Fr.prototype.oa=function(){rn(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,is.prototype.send=is.prototype.o,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,Xw=function(){return new Io},Qw=function(){return gs()},Yw=ue,vT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,U1=lr,il.COMPLETE="complete",Kw=il,yt.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",En.prototype.listen=En.prototype.J,I0=yt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,jw=Je}).apply(typeof w1<"u"?w1:typeof self<"u"?self:typeof window<"u"?window:{});let us=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};us.UNAUTHENTICATED=new us(null),us.GOOGLE_CREDENTIALS=new us("google-credentials-uid"),us.FIRST_PARTY=new us("first-party-uid"),us.MOCK_USER=new us("mock-user");let xp="12.9.0";function AP(n){xp=n}const Oh=new qv("@firebase/firestore");function zm(){return Oh.logLevel}function wP(n){Oh.setLogLevel(n)}function wt(n,...t){if(Oh.logLevel<=Pe.DEBUG){const e=t.map(bS);Oh.debug(`Firestore (${xp}): ${n}`,...e)}}function Si(n,...t){if(Oh.logLevel<=Pe.ERROR){const e=t.map(bS);Oh.error(`Firestore (${xp}): ${n}`,...e)}}function Zo(n,...t){if(Oh.logLevel<=Pe.WARN){const e=t.map(bS);Oh.warn(`Firestore (${xp}): ${n}`,...e)}}function bS(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function Ft(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Jw(n,i,e)}function Jw(n,t,e){let i=`FIRESTORE (${xp}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Si(i),new Error(i)}function Xt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||Jw(t,s,i)}function RP(n,t){n||Ft(57014,t)}function Gt(n,t){return n}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends zi{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Os{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ww{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(us.UNAUTHENTICATED)))}shutdown(){}}class IP{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class NP{constructor(t){this.t=t,this.currentUser=us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Xt(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let o=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Os,t.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=o;t.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Os)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xt(typeof i.accessToken=="string",31837,{l:i}),new Ww(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xt(t===null||typeof t=="string",2055,{h:t}),new us(t)}}class DP{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=us.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class xP{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new DP(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(us.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class h3{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OP{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Xt(this.o===void 0,3512);const i=o=>{o.error!=null&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,wt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const s=o=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new h3(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Xt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new h3(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function MP(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class AS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=MP(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<e&&(i+=t.charAt(s[o]%62))}return i}}function he(n,t){return n<t?-1:n>t?1:0}function ET(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),o=t.charAt(i);if(s!==o)return ME(s)===ME(o)?he(s,o):ME(s)?1:-1}return he(n.length,t.length)}const PP=55296,VP=57343;function ME(n){const t=n.charCodeAt(0);return t>=PP&&t<=VP}function rp(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}function Zw(n){return n+"\0"}const f3="__name__";class Bl{constructor(t,e,i){e===void 0?e=0:e>t.length&&Ft(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Ft(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Bl.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Bl?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const o=Bl.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return he(t.length,e.length)}static compareSegments(t,e){const i=Bl.isNumericId(t),s=Bl.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Bl.extractNumericId(t).compare(Bl.extractNumericId(e)):ET(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wh.fromString(t.substring(4,t.length-2))}}class Ve extends Bl{construct(t,e,i){return new Ve(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new St(ft.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new Ve(e)}static emptyPath(){return new Ve([])}}const kP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Bl{construct(t,e,i){return new Xn(t,e,i)}static isValidIdentifier(t){return kP.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f3}static keyField(){return new Xn([f3])}static fromServerFormat(t){const e=[];let i="",s=0;const o=()=>{if(i.length===0)throw new St(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new St(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new St(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(o(),s++)}if(o(),c)throw new St(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xn(e)}static emptyPath(){return new Xn([])}}class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(Ve.fromString(t))}static fromName(t){return new Ut(Ve.fromString(t).popFirst(5))}static empty(){return new Ut(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ve.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ve.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new Ve(t.slice()))}}function wS(n,t,e){if(!e)throw new St(ft.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function $w(n,t,e,i){if(t===!0&&i===!0)throw new St(ft.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function d3(n){if(!Ut.isDocumentKey(n))throw new St(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m3(n){if(Ut.isDocumentKey(n))throw new St(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ft(12329,{type:typeof n})}function Xe(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new St(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=jv(n);throw new St(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function eR(n,t){if(t<=0)throw new St(ft.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}function Ui(n,t){const e={typeString:n};return t&&(e.value=t),e}function w_(n,t){if(!tR(n))throw new St(ft.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new St(ft.INVALID_ARGUMENT,e);return!0}const p3=-62135596800,g3=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(t){return an.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*g3);return new an(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new St(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new St(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<p3)throw new St(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g3}_compareTo(t){return this.seconds===t.seconds?he(this.nanoseconds,t.nanoseconds):he(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:an._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(w_(t,an._jsonSchema))return new an(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-p3;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}an._jsonSchemaVersion="firestore/timestamp/1.0",an._jsonSchema={type:Ui("string",an._jsonSchemaVersion),seconds:Ui("number"),nanoseconds:Ui("number")};class Zt{static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new an(0,0))}static max(){return new Zt(new an(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const op=-1;class av{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}}function TT(n){return n.fields.find((t=>t.kind===2))}function Bf(n){return n.fields.filter((t=>t.kind!==2))}av.UNKNOWN_ID=-1;class z1{constructor(t,e){this.fieldPath=t,this.kind=e}}class i_{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new i_(0,Dr.min())}}function nR(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Zt.fromTimestamp(i===1e9?new an(e+1,0):new an(e,i));return new Dr(s,Ut.empty(),t)}function iR(n){return new Dr(n.readTime,n.key,op)}class Dr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Dr(Zt.min(),Ut.empty(),op)}static max(){return new Dr(Zt.max(),Ut.empty(),op)}}function RS(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Ut.comparator(n.documentKey,t.documentKey),e!==0?e:he(n.largestBatchId,t.largestBatchId))}const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function jh(n){if(n.code!==ft.FAILED_PRECONDITION||n.message!==sR)throw n;wt("LocalStore","Unexpectedly lost primary lease")}class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new it(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof it?e:it.resolve(e)}catch(e){return it.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):it.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):it.reject(e)}static resolve(t){return new it(((e,i)=>{e(t)}))}static reject(t){return new it(((e,i)=>{i(t)}))}static waitFor(t){return new it(((e,i)=>{let s=0,o=0,c=!1;t.forEach((f=>{++s,f.next((()=>{++o,c&&o===s&&e()}),(m=>i(m)))})),c=!0,o===s&&e()}))}static or(t){let e=it.resolve(!1);for(const i of t)e=e.next((s=>s?it.resolve(s):i()));return e}static forEach(t,e){const i=[];return t.forEach(((s,o)=>{i.push(e.call(this,s,o))})),this.waitFor(i)}static mapArray(t,e){return new it(((i,s)=>{const o=t.length,c=new Array(o);let f=0;for(let m=0;m<o;m++){const g=m;e(t[g]).next((E=>{c[g]=E,++f,f===o&&i(c)}),(E=>s(E)))}}))}static doWhile(t,e){return new it(((i,s)=>{const o=()=>{t()===!0?e().next((()=>{o()}),s):i()};o()}))}}const Ar="SimpleDb";class Kv{static open(t,e,i,s){try{return new Kv(e,t.transaction(s,i))}catch(o){throw new z0(e,o)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Os,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new z0(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=CS(i.target.error);this.S.reject(new z0(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(wt(Ar,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new UP(e)}}class Jl{static delete(t){return wt(Ar,"Removing database:",t),Hf(mS().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!id())return!1;if(Jl.F())return!0;const t=si(),e=Jl.M(t),i=0<e&&e<10,s=rR(t),o=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.N=i,this.B=null,Jl.M(si())===12.2&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(wt(Ar,"Opening database:",this.name),this.db=await new Promise(((e,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;e(c)},s.onblocked=()=>{i(new z0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?i(new St(ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new St(ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new z0(t,c))},s.onupgradeneeded=o=>{wt(Ar,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{wt(Ar,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,s){const o=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const f=Kv.open(this.db,t,o?"readonly":"readwrite",i),m=s(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),it.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(wt(Ar,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function rR(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class LP{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return Hf(this.U.delete())}}class z0 extends St{constructor(t,e){super(ft.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Kh(n){return n.name==="IndexedDbTransactionError"}class UP{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(wt(Ar,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(wt(Ar,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Hf(i)}add(t){return wt(Ar,"ADD",this.store.name,t,t),Hf(this.store.add(t))}get(t){return Hf(this.store.get(t)).next((e=>(e===void 0&&(e=null),wt(Ar,"GET",this.store.name,t,e),e)))}delete(t){return wt(Ar,"DELETE",this.store.name,t),Hf(this.store.delete(t))}count(){return wt(Ar,"COUNT",this.store.name),Hf(this.store.count())}H(t,e){const i=this.options(t,e),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new it(((c,f)=>{o.onerror=m=>{f(m.target.error)},o.onsuccess=m=>{c(m.target.result)}}))}{const o=this.cursor(i),c=[];return this.J(o,((f,m)=>{c.push(m)})).next((()=>c))}}Z(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new it(((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}}))}X(t,e){wt(Ar,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const s=this.cursor(i);return this.J(s,((o,c,f)=>f.delete()))}ee(t,e){let i;e?i=t:(i={},e=t);const s=this.cursor(i);return this.J(s,e)}te(t){const e=this.cursor({});return new it(((i,s)=>{e.onerror=o=>{const c=CS(o.target.error);s(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}J(t,e){const i=[];return new it(((s,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const f=c.target.result;if(!f)return void s();const m=new LP(f),g=e(f.primaryKey,f.value,m);if(g instanceof it){const E=g.catch((b=>(m.done(),it.reject(b))));i.push(E)}m.isDone?s():m.G===null?f.continue():f.continue(m.G)}})).next((()=>it.waitFor(i)))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Hf(n){return new it(((t,e)=>{n.onsuccess=i=>{const s=i.target.result;t(s)},n.onerror=i=>{const s=CS(i.target.error);e(s)}}))}let _3=!1;function CS(n){const t=Jl.M(si());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _3||(_3=!0,setTimeout((()=>{throw i}),0)),i}}return n}const B0="IndexBackfiller";class zP{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){wt(B0,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();wt(B0,`Documents written: ${e}`)}catch(e){Kh(e)?wt(B0,"Ignoring IndexedDB error during index backfill: ",e):await jh(e)}await this.re(6e4)}))}}class BP{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const i=new Set;let s=e,o=!0;return it.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!i.has(c))return wt(B0,`Processing collection: ${c}`),this.oe(t,c,s).next((f=>{s-=f,i.add(c)}));o=!1})))).next((()=>e-s))}oe(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((s=>this.localStore.localDocuments.getNextDocuments(t,e,s,i).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(s,o))).next((f=>(wt(B0,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(t,e,f)))).next((()=>c.size))}))))}_e(t,e){let i=t;return e.changes.forEach(((s,o)=>{const c=iR(o);RS(c,i)>0&&(i=c)})),new Dr(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class tr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}tr.ce=-1;const Rh=-1;function R_(n){return n==null}function s_(n){return n===0&&1/n==-1/0}function oR(n){return typeof n=="number"&&Number.isInteger(n)&&!s_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rv="";function Zs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=y3(t)),t=GP(n.get(e),t);return y3(t)}function GP(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":e+="";break;case rv:e+="";break;default:e+=o}}return e}function y3(n){return n+rv+""}function Yl(n){const t=n.length;if(Xt(t>=2,64408,{path:n}),t===2)return Xt(n.charAt(0)===rv&&n.charAt(1)==="",56145,{path:n}),Ve.emptyPath();const e=t-2,i=[];let s="";for(let o=0;o<t;){const c=n.indexOf(rv,o);switch((c<0||c>e)&&Ft(50515,{path:n}),n.charAt(c+1)){case"":const f=n.substring(o,c);let m;s.length===0?m=f:(s+=f,m=s,s=""),i.push(m);break;case"":s+=n.substring(o,c),s+="\0";break;case"":s+=n.substring(o,c+1);break;default:Ft(61167,{path:n})}o=c+2}return new Ve(i)}const Gf="remoteDocuments",C_="owner",xm="owner",a_="mutationQueues",HP="userId",Yo="mutations",v3="batchId",Qf="userMutationsIndex",E3=["userId","batchId"];function B1(n,t){return[n,Zs(t)]}function lR(n,t,e){return[n,Zs(t),e]}const qP={},lp="documentMutations",ov="remoteDocumentsV14",FP=["prefixPath","collectionGroup","readTime","documentId"],G1="documentKeyIndex",jP=["prefixPath","collectionGroup","documentId"],uR="collectionGroupIndex",KP=["collectionGroup","readTime","prefixPath","documentId"],r_="remoteDocumentGlobal",ST="remoteDocumentGlobalKey",up="targets",cR="queryTargetsIndex",YP=["canonicalId","targetId"],cp="targetDocuments",QP=["targetId","path"],IS="documentTargetsIndex",XP=["path","targetId"],lv="targetGlobalKey",$f="targetGlobal",o_="collectionParents",JP=["collectionId","parent"],hp="clientMetadata",WP="clientId",Yv="bundles",ZP="bundleId",Qv="namedQueries",$P="name",NS="indexConfiguration",tV="indexId",bT="collectionGroupIndex",eV="collectionGroup",G0="indexState",nV=["indexId","uid"],hR="sequenceNumberIndex",iV=["uid","sequenceNumber"],H0="indexEntries",sV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fR="documentKeyIndex",aV=["indexId","uid","orderedDocumentKey"],Xv="documentOverlays",rV=["userId","collectionPath","documentId"],AT="collectionPathOverlayIndex",oV=["userId","collectionPath","largestBatchId"],dR="collectionGroupOverlayIndex",lV=["userId","collectionGroup","largestBatchId"],DS="globals",uV="name",mR=[a_,Yo,lp,Gf,up,C_,$f,cp,hp,r_,o_,Yv,Qv],cV=[...mR,Xv],pR=[a_,Yo,lp,ov,up,C_,$f,cp,hp,r_,o_,Yv,Qv,Xv],gR=pR,xS=[...gR,NS,G0,H0],hV=xS,_R=[...xS,DS],fV=_R;class wT extends aR{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function ts(n,t){const e=Gt(n);return Jl.O(e.le,t)}function T3(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Yh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Dn{constructor(t,e){this.comparator=t,this.root=e||Ds.EMPTY}insert(t,e){return new Dn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(t){return new Dn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new R1(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new R1(this.root,t,this.comparator,!1)}getReverseIterator(){return new R1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new R1(this.root,t,this.comparator,!0)}}class R1{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ds{constructor(t,e,i,s,o){this.key=t,this.value=e,this.color=i??Ds.RED,this.left=s??Ds.EMPTY,this.right=o??Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,o){return new Ds(t??this.key,e??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,i),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Ds.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ft(27949);return t+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1;Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(t,e,i,s,o){return this}insert(t,e,i){return new Ds(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(t){this.comparator=t,this.data=new Dn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new S3(this.data.getIterator())}getIteratorFrom(t){return new S3(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof ln)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ln(this.comparator);return e.data=t,e}}class S3{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Om(n){return n.hasNext()?n.getNext():void 0}class er{constructor(t){this.fields=t,t.sort(Xn.comparator)}static empty(){return new er([])}unionWith(t){let e=new ln(Xn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new er(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rp(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}class vR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function dV(){return typeof atob<"u"}class mi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vR("Invalid base64 string: "+o):o}})(t);return new mi(e)}static fromUint8Array(t){const e=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(t);return new mi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return he(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}mi.EMPTY_BYTE_STRING=new mi("");const mV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(n){if(Xt(!!n,39018),typeof n=="string"){let t=0;const e=mV.exec(n);if(Xt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tc(n){return typeof n=="string"?mi.fromBase64String(n):mi.fromUint8Array(n)}const ER="server_timestamp",TR="__type__",SR="__previous_value__",bR="__local_write_time__";function Jv(n){return(n?.mapValue?.fields||{})[TR]?.stringValue===ER}function Wv(n){const t=n.mapValue.fields[SR];return Jv(t)?Wv(t):t}function l_(n){const t=$u(n.mapValue.fields[bR].timestampValue);return new an(t.seconds,t.nanos)}class pV{constructor(t,e,i,s,o,c,f,m,g,E,b){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=E,this.apiKey=b}}const RT="(default)";class Mh{constructor(t,e){this.projectId=t,this.database=e||RT}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===RT}isEqual(t){return t instanceof Mh&&t.projectId===this.projectId&&t.database===this.database}}function gV(n,t){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new St(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(n.options.projectId,t)}const OS="__type__",AR="__max__",Sh={mapValue:{fields:{__type__:{stringValue:AR}}}},MS="__vector__",fp="value",H1={nullValue:"NULL_VALUE"};function Ph(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jv(n)?4:wR(n)?9007199254740991:Zv(n)?10:11:Ft(28295,{value:n})}function tu(n,t){if(n===t)return!0;const e=Ph(n);if(e!==Ph(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return l_(n).isEqual(l_(t));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=$u(s.timestampValue),f=$u(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,o){return tc(s.bytesValue).isEqual(tc(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,o){return Qn(s.geoPointValue.latitude)===Qn(o.geoPointValue.latitude)&&Qn(s.geoPointValue.longitude)===Qn(o.geoPointValue.longitude)})(n,t);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Qn(s.integerValue)===Qn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Qn(s.doubleValue),f=Qn(o.doubleValue);return c===f?s_(c)===s_(f):isNaN(c)&&isNaN(f)}return!1})(n,t);case 9:return rp(n.arrayValue.values||[],t.arrayValue.values||[],tu);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},f=o.mapValue.fields||{};if(T3(c)!==T3(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!tu(c[m],f[m])))return!1;return!0})(n,t);default:return Ft(52216,{left:n})}}function u_(n,t){return(n.values||[]).find((e=>tu(e,t)))!==void 0}function Vh(n,t){if(n===t)return 0;const e=Ph(n),i=Ph(t);if(e!==i)return he(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const f=Qn(o.integerValue||o.doubleValue),m=Qn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,t);case 3:return b3(n.timestampValue,t.timestampValue);case 4:return b3(l_(n),l_(t));case 5:return ET(n.stringValue,t.stringValue);case 6:return(function(o,c){const f=tc(o),m=tc(c);return f.compareTo(m)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const f=o.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const E=he(f[g],m[g]);if(E!==0)return E}return he(f.length,m.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const f=he(Qn(o.latitude),Qn(c.latitude));return f!==0?f:he(Qn(o.longitude),Qn(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return A3(n.arrayValue,t.arrayValue);case 10:return(function(o,c){const f=o.fields||{},m=c.fields||{},g=f[fp]?.arrayValue,E=m[fp]?.arrayValue,b=he(g?.values?.length||0,E?.values?.length||0);return b!==0?b:A3(g,E)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===Sh.mapValue&&c===Sh.mapValue)return 0;if(o===Sh.mapValue)return 1;if(c===Sh.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),g=c.fields||{},E=Object.keys(g);m.sort(),E.sort();for(let b=0;b<m.length&&b<E.length;++b){const A=ET(m[b],E[b]);if(A!==0)return A;const N=Vh(f[m[b]],g[E[b]]);if(N!==0)return N}return he(m.length,E.length)})(n.mapValue,t.mapValue);default:throw Ft(23264,{he:e})}}function b3(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return he(n,t);const e=$u(n),i=$u(t),s=he(e.seconds,i.seconds);return s!==0?s:he(e.nanos,i.nanos)}function A3(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const o=Vh(e[s],i[s]);if(o)return o}return he(e.length,i.length)}function dp(n){return CT(n)}function CT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=$u(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return tc(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return Ut.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(const o of e.values||[])s?s=!1:i+=",",i+=CT(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${CT(e.fields[c])}`;return s+"}"})(n.mapValue):Ft(61005,{value:n})}function q1(n){switch(Ph(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wv(n);return t?16+q1(t):16;case 5:return 2*n.stringValue.length;case 6:return tc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+q1(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Yh(i.fields,((o,c)=>{s+=o.length+q1(c)})),s})(n.mapValue);default:throw Ft(13486,{value:n})}}function sd(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function IT(n){return!!n&&"integerValue"in n}function c_(n){return!!n&&"arrayValue"in n}function w3(n){return!!n&&"nullValue"in n}function R3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function F1(n){return!!n&&"mapValue"in n}function Zv(n){return(n?.mapValue?.fields||{})[OS]?.stringValue===MS}function q0(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Yh(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=q0(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=q0(n.arrayValue.values[e]);return t}return{...n}}function wR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}const RR={mapValue:{fields:{[OS]:{stringValue:MS},[fp]:{arrayValue:{}}}}};function _V(n){return"nullValue"in n?H1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sd(Mh.empty(),Ut.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Zv(n)?RR:{mapValue:{}}:Ft(35942,{value:n})}function yV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sd(Mh.empty(),Ut.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?RR:"mapValue"in n?Zv(n)?{mapValue:{}}:Sh:Ft(61959,{value:n})}function C3(n,t){const e=Vh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function I3(n,t){const e=Vh(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class xs{constructor(t){this.value=t}static empty(){return new xs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!F1(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=q0(e)}setAll(t){let e=Xn.emptyPath(),i={},s=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=f.popLast()}c?i[f.lastSegment()]=q0(c):s.push(f.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,s)}delete(t){const e=this.field(t.popLast());F1(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return tu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];F1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Yh(e,((s,o)=>t[s]=o));for(const s of i)delete t[s]}clone(){return new xs(q0(this.value))}}function CR(n){const t=[];return Yh(n.fields,((e,i)=>{const s=new Xn([e]);if(F1(i)){const o=CR(i.mapValue).fields;if(o.length===0)t.push(s);else for(const c of o)t.push(s.child(c))}else t.push(s)})),new er(t)}class zn{constructor(t,e,i,s,o,c,f){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(t){return new zn(t,0,Zt.min(),Zt.min(),Zt.min(),xs.empty(),0)}static newFoundDocument(t,e,i,s){return new zn(t,1,e,Zt.min(),i,s,0)}static newNoDocument(t,e){return new zn(t,2,e,Zt.min(),Zt.min(),xs.empty(),0)}static newUnknownDocument(t,e){return new zn(t,3,e,Zt.min(),Zt.min(),xs.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kh{constructor(t,e){this.position=t,this.inclusive=e}}function N3(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const o=t[s],c=n.position[s];if(o.field.isKeyField()?i=Ut.comparator(Ut.fromName(c.referenceValue),e.key):i=Vh(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function D3(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!tu(n.position[e],t.position[e]))return!1;return!0}class h_{constructor(t,e="asc"){this.field=t,this.dir=e}}function vV(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class IR{}class ze extends IR{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new EV(t,e,i):e==="array-contains"?new bV(t,i):e==="in"?new PR(t,i):e==="not-in"?new AV(t,i):e==="array-contains-any"?new wV(t,i):new ze(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new TV(t,i):new SV(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Vh(e,this.value)):e!==null&&Ph(this.value)===Ph(e)&&this.matchesComparison(Vh(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends IR{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new on(t,e)}matches(t){return mp(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mp(n){return n.op==="and"}function NT(n){return n.op==="or"}function PS(n){return NR(n)&&mp(n)}function NR(n){for(const t of n.filters)if(t instanceof on)return!1;return!0}function DT(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+dp(n.value);if(PS(n))return n.filters.map((t=>DT(t))).join(",");{const t=n.filters.map((e=>DT(e))).join(",");return`${n.op}(${t})`}}function DR(n,t){return n instanceof ze?(function(i,s){return s instanceof ze&&i.op===s.op&&i.field.isEqual(s.field)&&tu(i.value,s.value)})(n,t):n instanceof on?(function(i,s){return s instanceof on&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,c,f)=>o&&DR(c,s.filters[f])),!0):!1})(n,t):void Ft(19439)}function xR(n,t){const e=n.filters.concat(t);return on.create(e,n.op)}function OR(n){return n instanceof ze?(function(e){return`${e.field.canonicalString()} ${e.op} ${dp(e.value)}`})(n):n instanceof on?(function(e){return e.op.toString()+" {"+e.getFilters().map(OR).join(" ,")+"}"})(n):"Filter"}class EV extends ze{constructor(t,e,i){super(t,e,i),this.key=Ut.fromName(i.referenceValue)}matches(t){const e=Ut.comparator(t.key,this.key);return this.matchesComparison(e)}}class TV extends ze{constructor(t,e){super(t,"in",e),this.keys=MR("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class SV extends ze{constructor(t,e){super(t,"not-in",e),this.keys=MR("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function MR(n,t){return(t.arrayValue?.values||[]).map((e=>Ut.fromName(e.referenceValue)))}class bV extends ze{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return c_(e)&&u_(e.arrayValue,this.value)}}class PR extends ze{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&u_(this.value.arrayValue,e)}}class AV extends ze{constructor(t,e){super(t,"not-in",e)}matches(t){if(u_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!u_(this.value.arrayValue,e)}}class wV extends ze{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!c_(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>u_(this.value.arrayValue,i)))}}class RV{constructor(t,e=null,i=[],s=[],o=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function xT(n,t=null,e=[],i=[],s=null,o=null,c=null){return new RV(n,t,e,i,s,o,c)}function ad(n){const t=Gt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>DT(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),R_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>dp(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>dp(i))).join(",")),t.Te=e}return t.Te}function I_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!vV(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!DR(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!D3(n.startAt,t.startAt)&&D3(n.endAt,t.endAt)}function uv(n){return Ut.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function cv(n,t){return n.filters.filter((e=>e instanceof ze&&e.field.isEqual(t)))}function x3(n,t,e){let i=H1,s=!0;for(const o of cv(n,t)){let c=H1,f=!0;switch(o.op){case"<":case"<=":c=_V(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,f=!1;break;case"!=":case"not-in":c=H1}C3({value:i,inclusive:s},{value:c,inclusive:f})<0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];C3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})<0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}function O3(n,t,e){let i=Sh,s=!0;for(const o of cv(n,t)){let c=Sh,f=!0;switch(o.op){case">=":case">":c=yV(o.value),f=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,f=!1;break;case"!=":case"not-in":c=Sh}I3({value:i,inclusive:s},{value:c,inclusive:f})>0&&(i=c,s=f)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];I3({value:i,inclusive:s},{value:c,inclusive:e.inclusive})>0&&(i=c,s=e.inclusive);break}}return{value:i,inclusive:s}}class rc{constructor(t,e=null,i=[],s=[],o=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function VR(n,t,e,i,s,o,c,f){return new rc(n,t,e,i,s,o,c,f)}function Op(n){return new rc(n)}function M3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CV(n){return Ut.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function VS(n){return n.collectionGroup!==null}function Ym(n){const t=Gt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new ln(Xn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new h_(o,i))})),e.has(Xn.keyField().canonicalString())||t.Ie.push(new h_(Xn.keyField(),i))}return t.Ie}function Ta(n){const t=Gt(n);return t.Ee||(t.Ee=IV(t,Ym(n))),t.Ee}function IV(n,t){if(n.limitType==="F")return xT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new h_(s.field,o)}));const e=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return xT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function OT(n,t){const e=n.filters.concat([t]);return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function NV(n,t){const e=n.explicitOrderBy.concat([t]);return new rc(n.path,n.collectionGroup,e,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function hv(n,t,e){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function DV(n,t){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,t,n.endAt)}function xV(n,t){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,t)}function N_(n,t){return I_(Ta(n),Ta(t))&&n.limitType===t.limitType}function kR(n){return`${ad(Ta(n))}|lt:${n.limitType}`}function Bm(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>OR(s))).join(", ")}]`),R_(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>dp(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>dp(s))).join(",")),`Target(${i})`})(Ta(n))}; limitType=${n.limitType})`}function D_(n,t){return t.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ut.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,s){for(const o of Ym(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(c,f,m){const g=N3(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,Ym(i),s)||i.endAt&&!(function(c,f,m){const g=N3(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,Ym(i),s))})(n,t)}function LR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UR(n){return(t,e)=>{let i=!1;for(const s of Ym(n)){const o=OV(s,t,e);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function OV(n,t,e){const i=n.field.isKeyField()?Ut.comparator(t.key,e.key):(function(o,c,f){const m=c.data.field(o),g=f.data.field(o);return m!==null&&g!==null?Vh(m,g):Ft(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ft(19790,{direction:n.dir})}}class oc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Yh(this.inner,((e,i)=>{for(const[s,o]of i)t(s,o)}))}isEmpty(){return yR(this.inner)}size(){return this.innerSize}}const MV=new Dn(Ut.comparator);function nr(){return MV}const zR=new Dn(Ut.comparator);function N0(...n){let t=zR;for(const e of n)t=t.insert(e.key,e);return t}function BR(n){let t=zR;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Ql(){return F0()}function GR(){return F0()}function F0(){return new oc((n=>n.toString()),((n,t)=>n.isEqual(t)))}const PV=new Dn(Ut.comparator),VV=new ln(Ut.comparator);function Te(...n){let t=VV;for(const e of n)t=t.add(e);return t}const kV=new ln(he);function kS(){return kV}function LS(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:s_(t)?"-0":t}}function HR(n){return{integerValue:""+n}}function qR(n,t){return oR(t)?HR(t):LS(n,t)}class $v{constructor(){this._=void 0}}function LV(n,t,e){return n instanceof pp?(function(s,o){const c={fields:{[TR]:{stringValue:ER},[bR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Jv(o)&&(o=Wv(o)),o&&(c.fields[SR]=o),{mapValue:c}})(e,t):n instanceof rd?jR(n,t):n instanceof od?KR(n,t):(function(s,o){const c=FR(s,o),f=P3(c)+P3(s.Ae);return IT(c)&&IT(s.Ae)?HR(f):LS(s.serializer,f)})(n,t)}function UV(n,t,e){return n instanceof rd?jR(n,t):n instanceof od?KR(n,t):e}function FR(n,t){return n instanceof gp?(function(i){return IT(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class pp extends $v{}class rd extends $v{constructor(t){super(),this.elements=t}}function jR(n,t){const e=YR(t);for(const i of n.elements)e.some((s=>tu(s,i)))||e.push(i);return{arrayValue:{values:e}}}class od extends $v{constructor(t){super(),this.elements=t}}function KR(n,t){let e=YR(t);for(const i of n.elements)e=e.filter((s=>!tu(s,i)));return{arrayValue:{values:e}}}class gp extends $v{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function P3(n){return Qn(n.integerValue||n.doubleValue)}function YR(n){return c_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class x_{constructor(t,e){this.field=t,this.transform=e}}function zV(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof rd&&s instanceof rd||i instanceof od&&s instanceof od?rp(i.elements,s.elements,tu):i instanceof gp&&s instanceof gp?tu(i.Ae,s.Ae):i instanceof pp&&s instanceof pp})(n.transform,t.transform)}class BV{constructor(t,e){this.version=t,this.transformResults=e}}class Jn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Jn}static exists(t){return new Jn(void 0,t)}static updateTime(t){return new Jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function j1(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class t2{}function QR(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Pp(n.key,Jn.none()):new Mp(n.key,n.data,Jn.none());{const e=n.data,i=xs.empty();let s=new ln(Xn.comparator);for(let o of t.fields)if(!s.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new lc(n.key,i,new er(s.toArray()),Jn.none())}}function GV(n,t,e){n instanceof Mp?(function(s,o,c){const f=s.value.clone(),m=k3(s.fieldTransforms,o,c.transformResults);f.setAll(m),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):n instanceof lc?(function(s,o,c){if(!j1(s.precondition,o))return void o.convertToUnknownDocument(c.version);const f=k3(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(XR(s)),m.setAll(f),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,e):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function j0(n,t,e,i){return n instanceof Mp?(function(o,c,f,m){if(!j1(o.precondition,c))return f;const g=o.value.clone(),E=L3(o.fieldTransforms,m,c);return g.setAll(E),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,t,e,i):n instanceof lc?(function(o,c,f,m){if(!j1(o.precondition,c))return f;const g=L3(o.fieldTransforms,m,c),E=c.data;return E.setAll(XR(o)),E.setAll(g),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,t,e,i):(function(o,c,f){return j1(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,t,e)}function HV(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),o=FR(i.transform,s||null);o!=null&&(e===null&&(e=xs.empty()),e.set(i.field,o))}return e||null}function V3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&rp(i,s,((o,c)=>zV(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Mp extends t2{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class lc extends t2{constructor(t,e,i,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XR(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function k3(n,t,e){const i=new Map;Xt(n.length===e.length,32656,{Ve:e.length,de:n.length});for(let s=0;s<e.length;s++){const o=n[s],c=o.transform,f=t.data.field(o.field);i.set(o.field,UV(c,f,e[s]))}return i}function L3(n,t,e){const i=new Map;for(const s of n){const o=s.transform,c=e.data.field(s.field);i.set(s.field,LV(o,c,t))}return i}class Pp extends t2{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class US extends t2{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zS{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&GV(o,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=j0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=j0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=GR();return this.mutations.forEach((s=>{const o=t.get(s.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=e.has(s.key)?null:f;const m=QR(c,f);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Zt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Te())}isEqual(t){return this.batchId===t.batchId&&rp(this.mutations,t.mutations,((e,i)=>V3(e,i)))&&rp(this.baseMutations,t.baseMutations,((e,i)=>V3(e,i)))}}class BS{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Xt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=(function(){return PV})();const o=t.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new BS(t,e,i,s)}}class GS{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qV{constructor(t,e){this.count=t,this.unchangedNames=e}}var ki,qe;function JR(n){switch(n){case ft.OK:return Ft(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return Ft(15467,{code:n})}}function WR(n){if(n===void 0)return Si("GRPC error has no .code"),ft.UNKNOWN;switch(n){case ki.OK:return ft.OK;case ki.CANCELLED:return ft.CANCELLED;case ki.UNKNOWN:return ft.UNKNOWN;case ki.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case ki.INTERNAL:return ft.INTERNAL;case ki.UNAVAILABLE:return ft.UNAVAILABLE;case ki.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case ki.NOT_FOUND:return ft.NOT_FOUND;case ki.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case ki.ABORTED:return ft.ABORTED;case ki.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case ki.DATA_LOSS:return ft.DATA_LOSS;default:return Ft(39323,{code:n})}}(qe=ki||(ki={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function ZR(){return new TextEncoder}const FV=new wh([4294967295,4294967295],0);function U3(n){const t=ZR().encode(n),e=new Fw;return e.update(t),new Uint8Array(e.digest())}function z3(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new wh([e,i],0),new wh([s,o],0)]}class HS{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new D0(`Invalid padding: ${e}`);if(i<0)throw new D0(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new D0(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new D0(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=wh.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(wh.fromNumber(i)));return s.compare(FV)===1&&(s=new wh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=U3(t),[i,s]=z3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new HS(o,s,e);return i.forEach((f=>c.insert(f))),c}insert(t){if(this.ge===0)return;const e=U3(t),[i,s]=z3(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);this.be(c)}}be(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class D0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class O_{constructor(t,e,i,s,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,M_.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new O_(Zt.min(),s,new Dn(he),nr(),Te())}}class M_{constructor(t,e,i,s,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new M_(i,e,Te(),Te(),Te())}}class K1{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=s}}class $R{constructor(t,e){this.targetId=t,this.Ce=e}}class tC{constructor(t,e,i=mi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class B3{constructor(){this.ve=0,this.Fe=G3(),this.Me=mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Te(),e=Te(),i=Te();return this.Fe.forEach(((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:Ft(38017,{changeType:o})}})),new M_(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=G3()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Xt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class jV{constructor(t){this.Ge=t,this.ze=new Map,this.je=nr(),this.He=C1(),this.Je=C1(),this.Ze=new Dn(he)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:Ft(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const o=s.target;if(uv(o))if(i===0){const c=new Ut(o.path);this.et(e,c,zn.newNoDocument(c,Zt.min()))}else Xt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const f=this.ut(t),m=f?this.ct(f,t,c):1;if(m!==0){this.it(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=e;let c,f;try{c=tc(i).toUint8Array()}catch(m){if(m instanceof vR)return Zo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new HS(c,s,o)}catch(m){return Zo(m instanceof D0?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(f)||(this.et(e,o,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&uv(f.target)){const m=new Ut(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,zn.newNoDocument(m,t))}o.Be&&(e.set(c,o.ke()),o.Ke())}}));let i=Te();this.Je.forEach(((o,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const s=new O_(t,e,this.Ze,this.je,i);return this.je=nr(),this.He=C1(),this.Je=C1(),this.Ze=new Dn(he),s}Ye(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.qe(e,1):s.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new B3,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new ln(he),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new ln(he),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||wt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new B3),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function C1(){return new Dn(Ut.comparator)}function G3(){return new Dn(Ut.comparator)}const KV={asc:"ASCENDING",desc:"DESCENDING"},YV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QV={and:"AND",or:"OR"};class XV{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function MT(n,t){return n.useProto3Json||R_(t)?t:{value:t}}function _p(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function eC(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function JV(n,t){return _p(n,t.toTimestamp())}function bi(n){return Xt(!!n,49232),Zt.fromTimestamp((function(e){const i=$u(e);return new an(i.seconds,i.nanos)})(n))}function qS(n,t){return PT(n,t).canonicalString()}function PT(n,t){const e=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function nC(n){const t=Ve.fromString(n);return Xt(fC(t),10190,{key:t.toString()}),t}function f_(n,t){return qS(n.databaseId,t.path)}function Wl(n,t){const e=nC(t);if(e.get(1)!==n.databaseId.projectId)throw new St(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new St(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ut(aC(e))}function iC(n,t){return qS(n.databaseId,t)}function sC(n){const t=nC(n);return t.length===4?Ve.emptyPath():aC(t)}function VT(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aC(n){return Xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function H3(n,t,e){return{name:f_(n,t),fields:e.value.mapValue.fields}}function rC(n,t,e){const i=Wl(n,t.name),s=bi(t.updateTime),o=t.createTime?bi(t.createTime):Zt.min(),c=new xs({mapValue:{fields:t.fields}}),f=zn.newFoundDocument(i,s,o,c);return e&&f.setHasCommittedMutations(),e?f.setHasCommittedMutations():f}function WV(n,t){return"found"in t?(function(i,s){Xt(!!s.found,43571),s.found.name,s.found.updateTime;const o=Wl(i,s.found.name),c=bi(s.found.updateTime),f=s.found.createTime?bi(s.found.createTime):Zt.min(),m=new xs({mapValue:{fields:s.found.fields}});return zn.newFoundDocument(o,c,f,m)})(n,t):"missing"in t?(function(i,s){Xt(!!s.missing,3894),Xt(!!s.readTime,22933);const o=Wl(i,s.missing),c=bi(s.readTime);return zn.newNoDocument(o,c)})(n,t):Ft(7234,{result:t})}function ZV(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ft(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=(function(g,E){return g.useProto3Json?(Xt(E===void 0||typeof E=="string",58123),mi.fromBase64String(E||"")):(Xt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),mi.fromUint8Array(E||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const E=g.code===void 0?ft.UNKNOWN:WR(g.code);return new St(E,g.message||"")})(c);e=new tC(i,s,o,f||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Wl(n,i.document.name),o=bi(i.document.updateTime),c=i.document.createTime?bi(i.document.createTime):Zt.min(),f=new xs({mapValue:{fields:i.document.fields}}),m=zn.newFoundDocument(s,o,c,f),g=i.targetIds||[],E=i.removedTargetIds||[];e=new K1(g,E,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Wl(n,i.document),o=i.readTime?bi(i.readTime):Zt.min(),c=zn.newNoDocument(s,o),f=i.removedTargetIds||[];e=new K1([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Wl(n,i.document),o=i.removedTargetIds||[];e=new K1([],o,s,null)}else{if(!("filter"in t))return Ft(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new qV(s,o),f=i.targetId;e=new $R(f,c)}}return e}function d_(n,t){let e;if(t instanceof Mp)e={update:H3(n,t.key,t.value)};else if(t instanceof Pp)e={delete:f_(n,t.key)};else if(t instanceof lc)e={update:H3(n,t.key,t.data),updateMask:sk(t.fieldMask)};else{if(!(t instanceof US))return Ft(16599,{dt:t.type});e={verify:f_(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const f=c.transform;if(f instanceof pp)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof rd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof od)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gp)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ft(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:JV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ft(27497)})(n,t.precondition)),e}function kT(n,t){const e=t.currentDocument?(function(o){return o.updateTime!==void 0?Jn.updateTime(bi(o.updateTime)):o.exists!==void 0?Jn.exists(o.exists):Jn.none()})(t.currentDocument):Jn.none(),i=t.updateTransforms?t.updateTransforms.map((s=>(function(c,f){let m=null;if("setToServerValue"in f)Xt(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new pp;else if("appendMissingElements"in f){const E=f.appendMissingElements.values||[];m=new rd(E)}else if("removeAllFromArray"in f){const E=f.removeAllFromArray.values||[];m=new od(E)}else"increment"in f?m=new gp(c,f.increment):Ft(16584,{proto:f});const g=Xn.fromServerFormat(f.fieldPath);return new x_(g,m)})(n,s))):[];if(t.update){t.update.name;const s=Wl(n,t.update.name),o=new xs({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new er(g.map((E=>Xn.fromServerFormat(E))))})(t.updateMask);return new lc(s,o,c,e,i)}return new Mp(s,o,e,i)}if(t.delete){const s=Wl(n,t.delete);return new Pp(s,e)}if(t.verify){const s=Wl(n,t.verify);return new US(s,e)}return Ft(1463,{proto:t})}function $V(n,t){return n&&n.length>0?(Xt(t!==void 0,14353),n.map((e=>(function(s,o){let c=s.updateTime?bi(s.updateTime):bi(o);return c.isEqual(Zt.min())&&(c=bi(o)),new BV(c,s.transformResults||[])})(e,t)))):[]}function oC(n,t){return{documents:[iC(n,t.path)]}}function lC(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=iC(n,s);const o=(function(g){if(g.length!==0)return hC(on.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(g){if(g.length!==0)return g.map((E=>(function(A){return{field:Gm(A.field),direction:ek(A.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=MT(n,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:s}}function uC(n){let t=sC(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Xt(i===1,65062);const E=e.from[0];E.allDescendants?s=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=(function(b){const A=cC(b);return A instanceof on&&PS(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(b){return b.map((A=>(function(D){return new h_(Hm(D.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(A)))})(e.orderBy));let f=null;e.limit&&(f=(function(b){let A;return A=typeof b=="object"?b.value:b,R_(A)?null:A})(e.limit));let m=null;e.startAt&&(m=(function(b){const A=!!b.before,N=b.values||[];return new kh(N,A)})(e.startAt));let g=null;return e.endAt&&(g=(function(b){const A=!b.before,N=b.values||[];return new kh(N,A)})(e.endAt)),VR(t,s,c,o,f,"F",m,g)}function tk(n,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function cC(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Hm(e.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Hm(e.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hm(e.unaryFilter.field);return ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hm(e.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}})(n):n.fieldFilter!==void 0?(function(e){return ze.create(Hm(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return on.create(e.compositeFilter.filters.map((i=>cC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}})(e.compositeFilter.op))})(n):Ft(30097,{filter:n})}function ek(n){return KV[n]}function nk(n){return YV[n]}function ik(n){return QV[n]}function Gm(n){return{fieldPath:n.canonicalString()}}function Hm(n){return Xn.fromServerFormat(n.fieldPath)}function hC(n){return n instanceof ze?(function(e){if(e.op==="=="){if(R3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NAN"}};if(w3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(R3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NOT_NAN"}};if(w3(e.value))return{unaryFilter:{field:Gm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gm(e.field),op:nk(e.op),value:e.value}}})(n):n instanceof on?(function(e){const i=e.getFilters().map((s=>hC(s)));return i.length===1?i[0]:{compositeFilter:{op:ik(e.op),filters:i}}})(n):Ft(54877,{filter:n})}function sk(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function fC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function dC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Ku{constructor(t,e,i,s,o=Zt.min(),c=Zt.min(),f=mi.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new Ku(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class mC{constructor(t){this.yt=t}}function ak(n,t){let e;if(t.document)e=rC(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ut.fromSegments(t.noDocument.path),s=ud(t.noDocument.readTime);e=zn.newNoDocument(i,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ft(56709);{const i=Ut.fromSegments(t.unknownDocument.path),s=ud(t.unknownDocument.version);e=zn.newUnknownDocument(i,s)}}return t.readTime&&e.setReadTime((function(s){const o=new an(s[0],s[1]);return Zt.fromTimestamp(o)})(t.readTime)),e}function q3(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:fv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=(function(o,c){return{name:f_(o,c.key),fields:c.data.value.mapValue.fields,updateTime:_p(o,c.version.toTimestamp()),createTime:_p(o,c.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:ld(t.version)};else{if(!t.isUnknownDocument())return Ft(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:ld(t.version)}}return i}function fv(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function ld(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ud(n){const t=new an(n.seconds,n.nanoseconds);return Zt.fromTimestamp(t)}function qf(n,t){const e=(t.baseMutations||[]).map((o=>kT(n.yt,o)));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){const f=t.mutations[o+1];c.updateTransforms=f.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const i=t.mutations.map((o=>kT(n.yt,o))),s=an.fromMillis(t.localWriteTimeMs);return new zS(t.batchId,s,e,i)}function x0(n){const t=ud(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?ud(n.lastLimboFreeSnapshotVersion):Zt.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Xt(c===1,1966,{count:c}),Ta(Op(sC(o.documents[0])))})(n.query):(function(o){return Ta(uC(o))})(n.query),new Ku(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,mi.fromBase64String(n.resumeToken))}function pC(n,t){const e=ld(t.snapshotVersion),i=ld(t.lastLimboFreeSnapshotVersion);let s;s=uv(t.target)?oC(n.yt,t.target):lC(n.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ad(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function FS(n){const t=uC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hv(t,t.limit,"L"):t}function PE(n,t){return new GS(t.largestBatchId,kT(n.yt,t.overlayMutation))}function F3(n,t){const e=t.path.lastSegment();return[n,Zs(t.path.popLast()),e]}function j3(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:ld(i.readTime),documentKey:Zs(i.documentKey.path),largestBatchId:i.largestBatchId}}class rk{getBundleMetadata(t,e){return K3(t).get(e).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:ud(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(t,e){return K3(t).put((function(s){return{bundleId:s.id,createTime:ld(bi(s.createTime)),version:s.version}})(e))}getNamedQuery(t,e){return Y3(t).get(e).next((i=>{if(i)return(function(o){return{name:o.name,query:FS(o.bundledQuery),readTime:ud(o.readTime)}})(i)}))}saveNamedQuery(t,e){return Y3(t).put((function(s){return{name:s.name,readTime:ld(bi(s.readTime)),bundledQuery:s.bundledQuery}})(e))}}function K3(n){return ts(n,Yv)}function Y3(n){return ts(n,Qv)}class e2{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const i=e.uid||"";return new e2(t,i)}getOverlay(t,e){return h0(t).get(F3(this.userId,e)).next((i=>i?PE(this.serializer,i):null))}getOverlays(t,e){const i=Ql();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){const s=[];return i.forEach(((o,c)=>{const f=new GS(e,c);s.push(this.bt(t,f))})),it.waitFor(s)}removeOverlaysForBatchId(t,e,i){const s=new Set;e.forEach((c=>s.add(Zs(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(h0(t).X(AT,f))})),it.waitFor(o)}getOverlaysForCollection(t,e,i){const s=Ql(),o=Zs(e),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return h0(t).H(AT,c).next((f=>{for(const m of f){const g=PE(this.serializer,m);s.set(g.getKey(),g)}return s}))}getOverlaysForCollectionGroup(t,e,i,s){const o=Ql();let c;const f=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return h0(t).ee({index:dR,range:f},((m,g,E)=>{const b=PE(this.serializer,g);o.size()<s||b.largestBatchId===c?(o.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>o))}bt(t,e){return h0(t).put((function(s,o,c){const[f,m,g]=F3(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:d_(s.yt,c.mutation)}})(this.serializer,this.userId,e))}}function h0(n){return ts(n,Xv)}class ok{St(t){return ts(t,DS)}getSessionToken(t){return this.St(t).get("sessionToken").next((e=>{const i=e?.value;return i?mi.fromUint8Array(i):mi.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Ff{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(Qn(t.integerValue));else if("doubleValue"in t){const i=Qn(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),s_(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=$u(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(tc(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?wR(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Zv(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):Ft(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){const i=t.fields||{};this.Ft(e,55);for(const s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){const i=t.fields||{};this.Ft(e,53);const s=fp,o=i[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(Qn(o)),this.Ot(s,e),this.Ct(i[s],e)}qt(t,e){const i=t.values||[];this.Ft(e,50);for(const s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),Ut.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Ff.Wt=new Ff;const Mm=255;function lk(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function Q3(n){const t=64-(function(i){let s=0;for(let o=0;o<8;++o){const c=lk(255&i[o]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(t/8)}class uk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Gt(i.value),i=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ht(i.value),i=e.next();this.Jt()}Zt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=e.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const s=e.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(t){const e=this.en(t),i=Q3(e);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=255&e[s]}nn(t){const e=this.en(t),i=Q3(e);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=e.length-i;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}rn(){this.sn(Mm),this.sn(255)}_n(){this.an(Mm),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let s=1;s<e.length;++s)e[s]^=i?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Mm?(this.sn(Mm),this.sn(0)):this.sn(e)}Ht(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Mm?(this.an(Mm),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class ck{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class hk{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class f0{constructor(){this.cn=new uk,this.ascending=new ck(this.cn),this.descending=new hk(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class jf{constructor(t,e,i,s){this.hn=t,this.Pn=e,this.Tn=i,this.In=s}En(){const t=this.In.length,e=t===0||this.In[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.In,0),e!==t?i.set([0],this.In.length):++i[i.length-1],new jf(this.hn,this.Pn,this.Tn,i)}Rn(t,e,i){return{indexId:this.hn,uid:t,arrayValue:Y1(this.Tn),directionalValue:Y1(this.In),orderedDocumentKey:Y1(e),documentKey:i.path.toArray()}}An(t,e,i){const s=this.Rn(t,e,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function fh(n,t){let e=n.hn-t.hn;return e!==0?e:(e=X3(n.Tn,t.Tn),e!==0?e:(e=X3(n.In,t.In),e!==0?e:Ut.comparator(n.Pn,t.Pn)))}function X3(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}function Y1(n){return xw()?(function(e){let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return i})(n):n}function J3(n){return typeof n!="string"?n:(function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(n)}class W3{constructor(t){this.Vn=new ln(((e,i)=>Xn.comparator(e.field,i.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(t){if(Xt(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const e=TT(t);if(e!==void 0&&!this.pn(e))return!1;const i=Bf(t);let s=new Set,o=0,c=0;for(;o<i.length&&this.pn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!s.has(f.field.canonicalString())){const m=i[o];if(!this.yn(f,m)||!this.wn(this.dn[c++],m))return!1}++o}for(;o<i.length;++o){const f=i[o];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let t=new ln(Xn.comparator);const e=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new z1(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new z1(i.field,0))}for(const i of this.dn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new z1(i.field,i.dir==="asc"?0:1)));return new av(av.UNKNOWN_ID,this.collectionId,e,i_.empty())}pn(t){for(const e of this.mn)if(this.yn(e,t))return!0;return!1}yn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}wn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function gC(n){if(Xt(n instanceof ze||n instanceof on,20012),n instanceof ze){if(n instanceof PR){const e=n.value.arrayValue?.values?.map((i=>ze.create(n.field,"==",i)))||[];return on.create(e,"or")}return n}const t=n.filters.map((e=>gC(e)));return on.create(t,n.op)}function fk(n){if(n.getFilters().length===0)return[];const t=zT(gC(n));return Xt(_C(t),7391),LT(t)||UT(t)?[t]:t.getFilters()}function LT(n){return n instanceof ze}function UT(n){return n instanceof on&&PS(n)}function _C(n){return LT(n)||UT(n)||(function(e){if(e instanceof on&&NT(e)){for(const i of e.getFilters())if(!LT(i)&&!UT(i))return!1;return!0}return!1})(n)}function zT(n){if(Xt(n instanceof ze||n instanceof on,34018),n instanceof ze)return n;if(n.filters.length===1)return zT(n.filters[0]);const t=n.filters.map((i=>zT(i)));let e=on.create(t,n.op);return e=dv(e),_C(e)?e:(Xt(e instanceof on,64498),Xt(mp(e),40251),Xt(e.filters.length>1,57927),e.filters.reduce(((i,s)=>jS(i,s))))}function jS(n,t){let e;return Xt(n instanceof ze||n instanceof on,38388),Xt(t instanceof ze||t instanceof on,25473),e=n instanceof ze?t instanceof ze?(function(s,o){return on.create([s,o],"and")})(n,t):Z3(n,t):t instanceof ze?Z3(t,n):(function(s,o){if(Xt(s.filters.length>0&&o.filters.length>0,48005),mp(s)&&mp(o))return xR(s,o.getFilters());const c=NT(s)?s:o,f=NT(s)?o:s,m=c.filters.map((g=>jS(g,f)));return on.create(m,"or")})(n,t),dv(e)}function Z3(n,t){if(mp(t))return xR(t,n.getFilters());{const e=t.filters.map((i=>jS(n,i)));return on.create(e,"or")}}function dv(n){if(Xt(n instanceof ze||n instanceof on,11850),n instanceof ze)return n;const t=n.getFilters();if(t.length===1)return dv(t[0]);if(NR(n))return n;const e=t.map((s=>dv(s))),i=[];return e.forEach((s=>{s instanceof ze?i.push(s):s instanceof on&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:on.create(i,n.op)}class dk{constructor(){this.Sn=new KS}addToCollectionParentIndex(t,e){return this.Sn.add(e),it.resolve()}getCollectionParents(t,e){return it.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return it.resolve()}deleteFieldIndex(t,e){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,e){return it.resolve()}getDocumentsMatchingTarget(t,e){return it.resolve(null)}getIndexType(t,e){return it.resolve(0)}getFieldIndexes(t,e){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,e){return it.resolve(Dr.min())}getMinOffsetFromCollectionGroup(t,e){return it.resolve(Dr.min())}updateCollectionGroup(t,e,i){return it.resolve()}updateIndexEntries(t,e){return it.resolve()}}class KS{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new ln(Ve.comparator),o=!s.has(i);return this.index[e]=s.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new ln(Ve.comparator)).toArray()}}const $3="IndexedDbIndexManager",I1=new Uint8Array(0);class mk{constructor(t,e){this.databaseId=e,this.Dn=new KS,this.Cn=new oc((i=>ad(i)),((i,s)=>I_(i,s))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Dn.has(e)){const i=e.lastSegment(),s=e.popLast();t.addOnCommittedListener((()=>{this.Dn.add(e)}));const o={collectionId:i,parent:Zs(s)};return t5(t).put(o)}return it.resolve()}getCollectionParents(t,e){const i=[],s=IDBKeyRange.bound([e,""],[Zw(e),""],!1,!0);return t5(t).H(s).next((o=>{for(const c of o){if(c.collectionId!==e)break;i.push(Yl(c.parent))}return i}))}addFieldIndex(t,e){const i=d0(t),s=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(e);delete s.indexId;const o=i.add(s);if(e.indexState){const c=Vm(t);return o.next((f=>{c.put(j3(f,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return o.next()}deleteFieldIndex(t,e){const i=d0(t),s=Vm(t),o=Pm(t);return i.delete(e.indexId).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=d0(t),i=Pm(t),s=Vm(t);return e.X().next((()=>i.X())).next((()=>s.X()))}createTargetIndexes(t,e){return it.forEach(this.vn(e),(i=>this.getIndexType(t,i).next((s=>{if(s===0||s===1){const o=new W3(i).bn();if(o!=null)return this.addFieldIndex(t,o)}}))))}getDocumentsMatchingTarget(t,e){const i=Pm(t);let s=!0;const o=new Map;return it.forEach(this.vn(e),(c=>this.Fn(t,c).next((f=>{s&&(s=!!f),o.set(c,f)})))).next((()=>{if(s){let c=Te();const f=[];return it.forEach(o,((m,g)=>{wt($3,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((W=>`${W.fieldPath}:${W.kind}`)).join(",")}`})(m)} to execute ${ad(e)}`);const E=(function(X,W){const mt=TT(W);if(mt===void 0)return null;for(const rt of cv(X,mt.fieldPath))switch(rt.op){case"array-contains-any":return rt.value.arrayValue.values||[];case"array-contains":return[rt.value]}return null})(g,m),b=(function(X,W){const mt=new Map;for(const rt of Bf(W))for(const V of cv(X,rt.fieldPath))switch(V.op){case"==":case"in":mt.set(rt.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return mt.set(rt.fieldPath.canonicalString(),V.value),Array.from(mt.values())}return null})(g,m),A=(function(X,W){const mt=[];let rt=!0;for(const V of Bf(W)){const M=V.kind===0?x3(X,V.fieldPath,X.startAt):O3(X,V.fieldPath,X.startAt);mt.push(M.value),rt&&(rt=M.inclusive)}return new kh(mt,rt)})(g,m),N=(function(X,W){const mt=[];let rt=!0;for(const V of Bf(W)){const M=V.kind===0?O3(X,V.fieldPath,X.endAt):x3(X,V.fieldPath,X.endAt);mt.push(M.value),rt&&(rt=M.inclusive)}return new kh(mt,rt)})(g,m),D=this.Mn(m,g,A),k=this.Mn(m,g,N),U=this.xn(m,g,b),F=this.On(m.indexId,E,D,A.inclusive,k,N.inclusive,U);return it.forEach(F,(j=>i.Z(j,e.limit).next((X=>{X.forEach((W=>{const mt=Ut.fromSegments(W.documentKey);c.has(mt)||(c=c.add(mt),f.push(mt))}))}))))})).next((()=>f))}return it.resolve(null)}))}vn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=fk(on.create(t.filters,"and")).map((i=>xT(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,e),e)}On(t,e,i,s,o,c,f){const m=(e!=null?e.length:1)*Math.max(i.length,o.length),g=m/(e!=null?e.length:1),E=[];for(let b=0;b<m;++b){const A=e?this.Nn(e[b/g]):I1,N=this.Bn(t,A,i[b%g],s),D=this.Ln(t,A,o[b%g],c),k=f.map((U=>this.Bn(t,A,U,!0)));E.push(...this.createRange(N,D,k))}return E}Bn(t,e,i,s){const o=new jf(t,Ut.empty(),e,i);return s?o:o.En()}Ln(t,e,i,s){const o=new jf(t,Ut.empty(),e,i);return s?o.En():o}Fn(t,e){const i=new W3(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next((o=>{let c=null;for(const f of o)i.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(t,e){let i=2;const s=this.vn(e);return it.forEach(s,(o=>this.Fn(t,o).next((c=>{c?i!==0&&c.fields.length<(function(m){let g=new ln(Xn.comparator),E=!1;for(const b of m.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:g=g.add(A.field));for(const b of m.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(E?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(e)&&s.length>1&&i===2?1:i))}kn(t,e){const i=new f0;for(const s of Bf(t)){const o=e.data.field(s.fieldPath);if(o==null)return null;const c=i.ln(s.kind);Ff.Wt.Dt(o,c)}return i.un()}Nn(t){const e=new f0;return Ff.Wt.Dt(t,e.ln(0)),e.un()}Kn(t,e){const i=new f0;return Ff.Wt.Dt(sd(this.databaseId,e),i.ln((function(o){const c=Bf(o);return c.length===0?0:c[c.length-1].kind})(t))),i.un()}xn(t,e,i){if(i===null)return[];let s=[];s.push(new f0);let o=0;for(const c of Bf(t)){const f=i[o++];for(const m of s)if(this.qn(e,c.fieldPath)&&c_(f))s=this.Un(s,c,f);else{const g=m.ln(c.kind);Ff.Wt.Dt(f,g)}}return this.$n(s)}Mn(t,e,i){return this.xn(t,e,i.position)}$n(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].un();return e}Un(t,e,i){const s=[...t],o=[];for(const c of i.arrayValue.values||[])for(const f of s){const m=new f0;m.seed(f.un()),Ff.Wt.Dt(c,m.ln(e.kind)),o.push(m)}return o}qn(t,e){return!!t.filters.find((i=>i instanceof ze&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(t,e){const i=d0(t),s=Vm(t);return(e?i.H(bT,IDBKeyRange.bound(e,e)):i.H()).next((o=>{const c=[];return it.forEach(o,(f=>s.get([f.indexId,this.uid]).next((m=>{c.push((function(E,b){const A=b?new i_(b.sequenceNumber,new Dr(ud(b.readTime),new Ut(Yl(b.documentKey)),b.largestBatchId)):i_.empty(),N=E.fields.map((([D,k])=>new z1(Xn.fromServerFormat(D),k)));return new av(E.indexId,E.collectionGroup,N,A)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:he(i.collectionGroup,s.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,i){const s=d0(t),o=Vm(t);return this.Wn(t).next((c=>s.H(bT,IDBKeyRange.bound(e,e)).next((f=>it.forEach(f,(m=>o.put(j3(m.indexId,this.uid,c,i))))))))}updateIndexEntries(t,e){const i=new Map;return it.forEach(e,((s,o)=>{const c=i.get(s.collectionGroup);return(c?it.resolve(c):this.getFieldIndexes(t,s.collectionGroup)).next((f=>(i.set(s.collectionGroup,f),it.forEach(f,(m=>this.Qn(t,s,m).next((g=>{const E=this.Gn(o,m);return g.isEqual(E)?it.resolve():this.zn(t,o,m,g,E)})))))))}))}jn(t,e,i,s){return Pm(t).put(s.Rn(this.uid,this.Kn(i,e.key),e.key))}Hn(t,e,i,s){return Pm(t).delete(s.An(this.uid,this.Kn(i,e.key),e.key))}Qn(t,e,i){const s=Pm(t);let o=new ln(fh);return s.ee({index:fR,range:IDBKeyRange.only([i.indexId,this.uid,Y1(this.Kn(i,e))])},((c,f)=>{o=o.add(new jf(i.indexId,e,J3(f.arrayValue),J3(f.directionalValue)))})).next((()=>o))}Gn(t,e){let i=new ln(fh);const s=this.kn(e,t);if(s==null)return i;const o=TT(e);if(o!=null){const c=t.data.field(o.fieldPath);if(c_(c))for(const f of c.arrayValue.values||[])i=i.add(new jf(e.indexId,t.key,this.Nn(f),s))}else i=i.add(new jf(e.indexId,t.key,I1,s));return i}zn(t,e,i,s,o){wt($3,"Updating index entries for document '%s'",e.key);const c=[];return(function(m,g,E,b,A){const N=m.getIterator(),D=g.getIterator();let k=Om(N),U=Om(D);for(;k||U;){let F=!1,j=!1;if(k&&U){const X=E(k,U);X<0?j=!0:X>0&&(F=!0)}else k!=null?j=!0:F=!0;F?(b(U),U=Om(D)):j?(A(k),k=Om(N)):(k=Om(N),U=Om(D))}})(s,o,fh,(f=>{c.push(this.jn(t,e,i,f))}),(f=>{c.push(this.Hn(t,e,i,f))})),it.waitFor(c)}Wn(t){let e=1;return Vm(t).ee({index:hR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),e=s.sequenceNumber+1})).next((()=>e))}createRange(t,e,i){i=i.sort(((c,f)=>fh(c,f))).filter(((c,f,m)=>!f||fh(c,m[f-1])!==0));const s=[];s.push(t);for(const c of i){const f=fh(c,t),m=fh(c,e);if(f===0)s[0]=t.En();else if(f>0&&m<0)s.push(c),s.push(c.En());else if(m>0)break}s.push(e);const o=[];for(let c=0;c<s.length;c+=2){if(this.Jn(s[c],s[c+1]))return[];const f=s[c].An(this.uid,I1,Ut.empty()),m=s[c+1].An(this.uid,I1,Ut.empty());o.push(IDBKeyRange.bound(f,m))}return o}Jn(t,e){return fh(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(e5)}getMinOffset(t,e){return it.mapArray(this.vn(e),(i=>this.Fn(t,i).next((s=>s||Ft(44426))))).next(e5)}}function t5(n){return ts(n,o_)}function Pm(n){return ts(n,H0)}function d0(n){return ts(n,NS)}function Vm(n){return ts(n,G0)}function e5(n){Xt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;RS(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Dr(t.readTime,t.documentKey,e)}const n5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yC=41943040;class Xs{static withCacheSize(t){return new Xs(t,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}function vC(n,t,e){const i=n.store(Yo),s=n.store(lp),o=[],c=IDBKeyRange.only(e.batchId);let f=0;const m=i.ee({range:c},((E,b,A)=>(f++,A.delete())));o.push(m.next((()=>{Xt(f===1,47070,{batchId:e.batchId})})));const g=[];for(const E of e.mutations){const b=lR(t,E.key.path,e.batchId);o.push(s.delete(b)),g.push(E.key)}return it.waitFor(o).next((()=>g))}function mv(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ft(14731);t=n.noDocument}return JSON.stringify(t).length}Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(yC,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class n2{constructor(t,e,i,s){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=s,this.Zn={}}static wt(t,e,i,s){Xt(t.uid!=="",64387);const o=t.isAuthenticated()?t.uid:"";return new n2(o,e,i,s)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).ee({index:Qf,range:i},((s,o,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,i,s){const o=qm(t),c=dh(t);return c.add({}).next((f=>{Xt(typeof f=="number",49019);const m=new zS(f,e,i,s),g=(function(N,D,k){const U=k.baseMutations.map((j=>d_(N.yt,j))),F=k.mutations.map((j=>d_(N.yt,j)));return{userId:D,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:U,mutations:F}})(this.serializer,this.userId,m),E=[];let b=new ln(((A,N)=>he(A.canonicalString(),N.canonicalString())));for(const A of s){const N=lR(this.userId,A.key.path,f);b=b.add(A.key.path.popLast()),E.push(c.put(g)),E.push(o.put(N,qP))}return b.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(t,A))})),t.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),it.waitFor(E).next((()=>m))}))}lookupMutationBatch(t,e){return dh(t).get(e).next((i=>i?(Xt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),qf(this.serializer,i)):null))}Xn(t,e){return this.Zn[e]?it.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next((i=>{if(i){const s=i.keys();return this.Zn[e]=s,s}return null}))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return dh(t).ee({index:Qf,range:s},((c,f,m)=>{f.userId===this.userId&&(Xt(f.batchId>=i,47524,{Yn:i}),o=qf(this.serializer,f)),m.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Rh;return dh(t).ee({index:Qf,range:e,reverse:!0},((s,o,c)=>{i=o.batchId,c.done()})).next((()=>i))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Rh],[this.userId,Number.POSITIVE_INFINITY]);return dh(t).H(Qf,e).next((i=>i.map((s=>qf(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=B1(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=[];return qm(t).ee({range:s},((c,f,m)=>{const[g,E,b]=c,A=Yl(E);if(g===this.userId&&e.path.isEqual(A))return dh(t).get(b).next((N=>{if(!N)throw Ft(61480,{er:c,batchId:b});Xt(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:b}),o.push(qf(this.serializer,N))}));m.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ln(he);const s=[];return e.forEach((o=>{const c=B1(this.userId,o.path),f=IDBKeyRange.lowerBound(c),m=qm(t).ee({range:f},((g,E,b)=>{const[A,N,D]=g,k=Yl(N);A===this.userId&&o.path.isEqual(k)?i=i.add(D):b.done()}));s.push(m)})),it.waitFor(s).next((()=>this.tr(t,i)))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1,o=B1(this.userId,i),c=IDBKeyRange.lowerBound(o);let f=new ln(he);return qm(t).ee({range:c},((m,g,E)=>{const[b,A,N]=m,D=Yl(A);b===this.userId&&i.isPrefixOf(D)?D.length===s&&(f=f.add(N)):E.done()})).next((()=>this.tr(t,f)))}tr(t,e){const i=[],s=[];return e.forEach((o=>{s.push(dh(t).get(o).next((c=>{if(c===null)throw Ft(35274,{batchId:o});Xt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),i.push(qf(this.serializer,c))})))})),it.waitFor(s).next((()=>i))}removeMutationBatch(t,e){return vC(t.le,this.userId,e).next((i=>(t.addOnCommittedListener((()=>{this.nr(e.batchId)})),it.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return it.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return qm(t).ee({range:i},((o,c,f)=>{if(o[0]===this.userId){const m=Yl(o[1]);s.push(m)}else f.done()})).next((()=>{Xt(s.length===0,56720,{rr:s.map((o=>o.canonicalString()))})}))}))}containsKey(t,e){return EC(t,this.userId,e)}ir(t){return TC(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Rh,lastStreamToken:""}))}}function EC(n,t,e){const i=B1(t,e.path),s=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return qm(n).ee({range:o,Y:!0},((f,m,g)=>{const[E,b,A]=f;E===t&&b===s&&(c=!0),g.done()})).next((()=>c))}function dh(n){return ts(n,Yo)}function qm(n){return ts(n,lp)}function TC(n){return ts(n,a_)}class cd{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new cd(0)}static ar(){return new cd(-1)}}class pk{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.ur(t).next((e=>{const i=new cd(e.highestTargetId);return e.highestTargetId=i.next(),this.cr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((e=>Zt.fromTimestamp(new an(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,i){return this.ur(t).next((s=>(s.highestListenSequenceNumber=e,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.cr(t,s))))}addTargetData(t,e){return this.lr(t,e).next((()=>this.ur(t).next((i=>(i.targetCount+=1,this.hr(e,i),this.cr(t,i))))))}updateTargetData(t,e){return this.lr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>km(t).delete(e.targetId))).next((()=>this.ur(t))).next((i=>(Xt(i.targetCount>0,8065),i.targetCount-=1,this.cr(t,i))))}removeTargets(t,e,i){let s=0;const o=[];return km(t).ee(((c,f)=>{const m=x0(f);m.sequenceNumber<=e&&i.get(m.targetId)===null&&(s++,o.push(this.removeTargetData(t,m)))})).next((()=>it.waitFor(o))).next((()=>s))}forEachTarget(t,e){return km(t).ee(((i,s)=>{const o=x0(s);e(o)}))}ur(t){return i5(t).get(lv).next((e=>(Xt(e!==null,2888),e)))}cr(t,e){return i5(t).put(lv,e)}lr(t,e){return km(t).put(pC(this.serializer,e))}hr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.ur(t).next((e=>e.targetCount))}getTargetData(t,e){const i=ad(e),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return km(t).ee({range:s,index:cR},((c,f,m)=>{const g=x0(f);I_(e,g.target)&&(o=g,m.done())})).next((()=>o))}addMatchingKeys(t,e,i){const s=[],o=Th(t);return e.forEach((c=>{const f=Zs(c.path);s.push(o.put({targetId:i,path:f})),s.push(this.referenceDelegate.addReference(t,i,c))})),it.waitFor(s)}removeMatchingKeys(t,e,i){const s=Th(t);return it.forEach(e,(o=>{const c=Zs(o.path);return it.waitFor([s.delete([i,c]),this.referenceDelegate.removeReference(t,i,o)])}))}removeMatchingKeysForTargetId(t,e){const i=Th(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),s=Th(t);let o=Te();return s.ee({range:i,Y:!0},((c,f,m)=>{const g=Yl(c[1]),E=new Ut(g);o=o.add(E)})).next((()=>o))}containsKey(t,e){const i=Zs(e.path),s=IDBKeyRange.bound([i],[Zw(i)],!1,!0);let o=0;return Th(t).ee({index:IS,Y:!0,range:s},(([c,f],m,g)=>{c!==0&&(o++,g.done())})).next((()=>o>0))}At(t,e){return km(t).get(e).next((i=>i?x0(i):null))}}function km(n){return ts(n,up)}function i5(n){return ts(n,$f)}function Th(n){return ts(n,cp)}const s5="LruGarbageCollector",gk=1048576;function a5([n,t],[e,i]){const s=he(n,e);return s===0?he(t,i):s}class _k{constructor(t){this.Pr=t,this.buffer=new ln(a5),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();a5(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){wt(s5,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Kh(e)?wt(s5,"Ignoring IndexedDB error during garbage collection: ",e):await jh(e)}await this.Ar(3e5)}))}}class yk{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return it.resolve(tr.ce);const i=new _k(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(n5)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n5):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,s,o,c,f,m,g;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,c=Date.now(),this.nthSequenceNumber(t,s)))).next((b=>(i=b,f=Date.now(),this.removeTargets(t,i,e)))).next((b=>(o=b,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((b=>(g=Date.now(),zm()<=Pe.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-E}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function bC(n,t){return new yk(n,t)}class vk{constructor(t,e){this.db=t,this.garbageCollector=bC(this,e)}dr(t){const e=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}mr(t,e){return this.yr(t,((i,s)=>e(s)))}addReference(t,e,i){return N1(t,i)}removeReference(t,e,i){return N1(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return N1(t,e)}wr(t,e){return(function(s,o){let c=!1;return TC(s).te((f=>EC(s,f,o).next((m=>(m&&(c=!0),it.resolve(!m)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.yr(t,((c,f)=>{if(f<=e){const m=this.wr(t,c).next((g=>{if(!g)return o++,i.getEntry(t,c).next((()=>(i.removeEntry(c,Zt.min()),Th(t).delete((function(b){return[0,Zs(b.path)]})(c)))))}));s.push(m)}})).next((()=>it.waitFor(s))).next((()=>i.apply(t))).next((()=>o))}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return N1(t,e)}yr(t,e){const i=Th(t);let s,o=tr.ce;return i.ee({index:IS},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(o!==tr.ce&&e(new Ut(Yl(s)),o),o=g,s=m):o=tr.ce})).next((()=>{o!==tr.ce&&e(new Ut(Yl(s)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function N1(n,t){return Th(n).put((function(i,s){return{targetId:0,path:Zs(i.path),sequenceNumber:s}})(t,n.currentSequenceNumber))}class AC{constructor(){this.changes=new oc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,zn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?it.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Ek{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Uf(t).put(i)}removeEntry(t,e,i){return Uf(t).delete((function(o,c){const f=o.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],fv(c),f[f.length-1]]})(e,i))}updateMetadata(t,e){return this.getMetadata(t).next((i=>(i.byteSize+=e,this.br(t,i))))}getEntry(t,e){let i=zn.newInvalidDocument(e);return Uf(t).ee({index:G1,range:IDBKeyRange.only(m0(e))},((s,o)=>{i=this.Sr(e,o)})).next((()=>i))}Dr(t,e){let i={size:0,document:zn.newInvalidDocument(e)};return Uf(t).ee({index:G1,range:IDBKeyRange.only(m0(e))},((s,o)=>{i={document:this.Sr(e,o),size:mv(o)}})).next((()=>i))}getEntries(t,e){let i=nr();return this.Cr(t,e,((s,o)=>{const c=this.Sr(s,o);i=i.insert(s,c)})).next((()=>i))}vr(t,e){let i=nr(),s=new Dn(Ut.comparator);return this.Cr(t,e,((o,c)=>{const f=this.Sr(o,c);i=i.insert(o,f),s=s.insert(o,mv(c))})).next((()=>({documents:i,Fr:s})))}Cr(t,e,i){if(e.isEmpty())return it.resolve();let s=new ln(l5);e.forEach((m=>s=s.add(m)));const o=IDBKeyRange.bound(m0(s.first()),m0(s.last())),c=s.getIterator();let f=c.getNext();return Uf(t).ee({index:G1,range:o},((m,g,E)=>{const b=Ut.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&l5(f,b)<0;)i(f,null),f=c.getNext();f&&f.isEqual(b)&&(i(f,g),f=c.hasNext()?c.getNext():null),f?E.j(m0(f)):E.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,i,s,o){const c=e.path,f=[c.popLast().toArray(),c.lastSegment(),fv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uf(t).H(IDBKeyRange.bound(f,m,!0)).next((g=>{o?.incrementDocumentReadCount(g.length);let E=nr();for(const b of g){const A=this.Sr(Ut.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(D_(e,A)||s.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(t,e,i,s){let o=nr();const c=o5(e,i),f=o5(e,Dr.max());return Uf(t).ee({index:uR,range:IDBKeyRange.bound(c,f,!0)},((m,g,E)=>{const b=this.Sr(Ut.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(b.key,b),o.size===s&&E.done()})).next((()=>o))}newChangeBuffer(t){return new Tk(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return r5(t).get(ST).next((e=>(Xt(!!e,20021),e)))}br(t,e){return r5(t).put(ST,e)}Sr(t,e){if(e){const i=ak(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Zt.min())))return i}return zn.newInvalidDocument(t)}}function wC(n){return new Ek(n)}class Tk extends AC{constructor(t,e){super(),this.Mr=t,this.trackRemovals=e,this.Or=new oc((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(t){const e=[];let i=0,s=new ln(((o,c)=>he(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const f=this.Or.get(o);if(e.push(this.Mr.removeEntry(t,o,f.readTime)),c.isValidDocument()){const m=q3(this.Mr.serializer,c);s=s.add(o.path.popLast());const g=mv(m);i+=g-f.size,e.push(this.Mr.addEntry(t,o,m))}else if(i-=f.size,this.trackRemovals){const m=q3(this.Mr.serializer,c.convertToNoDocument(Zt.min()));e.push(this.Mr.addEntry(t,o,m))}})),s.forEach((o=>{e.push(this.Mr.indexManager.addToCollectionParentIndex(t,o))})),e.push(this.Mr.updateMetadata(t,i)),it.waitFor(e)}getFromCache(t,e){return this.Mr.Dr(t,e).next((i=>(this.Or.set(e,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(t,e){return this.Mr.vr(t,e).next((({documents:i,Fr:s})=>(s.forEach(((o,c)=>{this.Or.set(o,{size:c,readTime:i.get(o).readTime})})),i)))}}function r5(n){return ts(n,r_)}function Uf(n){return ts(n,ov)}function m0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function o5(n,t){const e=t.documentKey.path.toArray();return[n,fv(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function l5(n,t){const e=n.path.toArray(),i=t.path.toArray();let s=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(s=he(e[o],i[o]),s)return s;return s=he(e.length,i.length),s||(s=he(e[e.length-2],i[i.length-2]),s||he(e[e.length-1],i[i.length-1]))}class Sk{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class RC{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&j0(i.mutation,s,er.empty(),an.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Te()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Te()){const s=Ql();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((o=>{let c=N0();return o.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Ql();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Te())))}populateOverlays(t,e,i){const s=[];return i.forEach((o=>{e.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(t,s).next((o=>{o.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,i,s){let o=nr();const c=F0(),f=(function(){return F0()})();return e.forEach(((m,g)=>{const E=i.get(g.key);s.has(g.key)&&(E===void 0||E.mutation instanceof lc)?o=o.insert(g.key,g):E!==void 0?(c.set(g.key,E.mutation.getFieldMask()),j0(E.mutation,g,E.mutation.getFieldMask(),an.now())):c.set(g.key,er.empty())})),this.recalculateAndSaveOverlays(t,o).next((m=>(m.forEach(((g,E)=>c.set(g,E))),e.forEach(((g,E)=>f.set(g,new Sk(E,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(t,e){const i=F0();let s=new Dn(((c,f)=>c-f)),o=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let E=i.get(m)||er.empty();E=f.applyToLocalView(g,E),i.set(m,E);const b=(s.get(f.batchId)||Te()).add(m);s=s.insert(f.batchId,b)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,E=m.value,b=GR();E.forEach((A=>{if(!o.has(A)){const N=QR(e.get(A),i.get(A));N!==null&&b.set(A,N),o=o.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,b))}return it.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return CV(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):VS(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-o.size):it.resolve(Ql());let f=op,m=o;return c.next((g=>it.forEach(g,((E,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),o.get(E)?it.resolve():this.remoteDocumentCache.getEntry(t,E).next((A=>{m=m.insert(E,A)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,m,g,Te()))).next((E=>({batchId:f,changes:BR(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ut(e)).next((i=>{let s=N0();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const o=e.collectionGroup;let c=N0();return this.indexManager.getCollectionParents(t,o).next((f=>it.forEach(f,(m=>{const g=(function(b,A){return new rc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(e,m.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next((E=>{E.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,s)))).next((c=>{o.forEach(((m,g)=>{const E=g.getKey();c.get(E)===null&&(c=c.insert(E,zn.newInvalidDocument(E)))}));let f=N0();return c.forEach(((m,g)=>{const E=o.get(m);E!==void 0&&j0(E.mutation,g,er.empty(),an.now()),D_(e,g)&&(f=f.insert(m,g))})),f}))}}class bk{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return it.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:bi(s.createTime)}})(e)),it.resolve()}getNamedQuery(t,e){return it.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(s){return{name:s.name,query:FS(s.bundledQuery),readTime:bi(s.readTime)}})(e)),it.resolve()}}class Ak{constructor(){this.overlays=new Dn(Ut.comparator),this.Lr=new Map}getOverlay(t,e){return it.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ql();return it.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,o)=>{this.bt(t,e,o)})),it.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(i)),it.resolve()}getOverlaysForCollection(t,e,i){const s=Ql(),o=e.length+1,c=new Ut(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>i&&s.set(m.getKey(),m)}return it.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let o=new Dn(((g,E)=>g-E));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let E=o.get(g.largestBatchId);E===null&&(E=Ql(),o=o.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const f=Ql(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,E)=>f.set(g,E))),!(f.size()>=s)););return it.resolve(f)}bt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new GS(e,i));let o=this.Lr.get(e);o===void 0&&(o=Te(),this.Lr.set(e,o)),this.Lr.set(e,o.add(i.key))}}class wk{constructor(){this.sessionToken=mi.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,it.resolve()}}class YS{constructor(){this.kr=new ln(ls.Kr),this.qr=new ln(ls.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const i=new ls(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new ls(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){const e=new Ut(new Ve([])),i=new ls(e,t),s=new ls(e,t+1),o=[];return this.qr.forEachInRange([i,s],(c=>{this.Wr(c),o.push(c.key)})),o}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new Ut(new Ve([])),i=new ls(e,t),s=new ls(e,t+1);let o=Te();return this.qr.forEachInRange([i,s],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new ls(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class ls{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return Ut.comparator(t.key,e.key)||he(t.Hr,e.Hr)}static Ur(t,e){return he(t.Hr,e.Hr)||Ut.comparator(t.key,e.key)}}class Rk{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new ln(ls.Kr)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zS(o,e,i,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new ls(f.key,o)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,e){return it.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),o=s<0?0:s;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?Rh:this.Yn-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ls(e,0),s=new ls(e,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],(c=>{const f=this.Zr(c.Hr);o.push(f)})),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ln(he);return e.forEach((s=>{const o=new ls(s,0),c=new ls(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],(f=>{i=i.add(f.Hr)}))})),it.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let o=i;Ut.isDocumentKey(o)||(o=o.child(""));const c=new ls(new Ut(o),0);let f=new ln(he);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Hr)),!0)}),c),it.resolve(this.Yr(f))}Yr(t){const e=[];return t.forEach((i=>{const s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){Xt(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return it.forEach(e.mutations,(s=>{const o=new ls(s.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){const i=new ls(e,0),s=this.Jr.firstAfterOrEqual(i);return it.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Ck{constructor(t){this.ti=t,this.docs=(function(){return new Dn(Ut.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),o=s?s.size:0,c=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return it.resolve(i?i.document.mutableCopy():zn.newInvalidDocument(e))}getEntries(t,e){let i=nr();return e.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():zn.newInvalidDocument(s))})),it.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let o=nr();const c=e.path,f=new Ut(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:E}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||RS(iR(E),i)<=0||(s.has(E.key)||D_(e,E))&&(o=o.insert(E.key,E.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,e,i,s){Ft(9500)}ni(t,e){return it.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new Ik(this)}getSize(t){return it.resolve(this.size)}}class Ik extends AC{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Mr.addEntry(t,s)):this.Mr.removeEntry(i)})),it.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class Nk{constructor(t){this.persistence=t,this.ri=new oc((e=>ad(e)),I_),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.ii=0,this.si=new YS,this.targetCount=0,this.oi=cd._r()}forEachTarget(t,e){return this.ri.forEach(((i,s)=>e(s))),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),it.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new cd(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,it.resolve()}updateTargetData(t,e){return this.lr(e),it.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,e,i){let s=0;const o=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=e&&i.get(f.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),it.waitFor(o).next((()=>s))}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,e){const i=this.ri.get(e)||null;return it.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),it.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);const s=this.persistence.referenceDelegate,o=[];return s&&e.forEach((c=>{o.push(s.markPotentiallyOrphaned(t,c))})),it.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),it.resolve()}getMatchingKeysForTargetId(t,e){const i=this.si.jr(e);return it.resolve(i)}containsKey(t,e){return it.resolve(this.si.containsKey(e))}}class QS{constructor(t,e){this._i={},this.overlays={},this.ai=new tr(0),this.ui=!1,this.ui=!0,this.ci=new wk,this.referenceDelegate=t(this),this.li=new Nk(this),this.indexManager=new dk,this.remoteDocumentCache=(function(s){return new Ck(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new mC(e),this.Pi=new bk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Ak,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new Rk(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){wt("MemoryPersistence","Starting transaction:",t);const s=new Dk(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(t,e){return it.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}}class Dk extends aR{constructor(t){super(),this.currentSequenceNumber=t}}class i2{constructor(t){this.persistence=t,this.Ri=new YS,this.Ai=null}static Vi(t){return new i2(t)}get di(){if(this.Ai)return this.Ai;throw Ft(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),it.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),it.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),it.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.di,(i=>{const s=Ut.fromPath(i);return this.mi(t,s).next((o=>{o||e.removeEntry(s,Zt.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return it.or([()=>it.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class pv{constructor(t,e){this.persistence=t,this.fi=new oc((i=>Zs(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=bC(this,e)}static Vi(t,e){return new pv(t,e)}Ti(){}Ii(t){return it.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return it.forEach(this.fi,((i,s)=>this.wr(t,i,s).next((o=>o?it.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(t,(c=>this.wr(t,c,e).next((f=>{f||(i++,o.removeEntry(c,Zt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),it.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=q1(t.data.value)),e}wr(t,e,i){return it.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.fi.get(e);return it.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class xk{constructor(t){this.serializer=t}k(t,e,i,s){const o=new Kv("createOrUpgrade",e);i<1&&s>=1&&((function(m){m.createObjectStore(C_)})(t),(function(m){m.createObjectStore(a_,{keyPath:HP}),m.createObjectStore(Yo,{keyPath:v3,autoIncrement:!0}).createIndex(Qf,E3,{unique:!0}),m.createObjectStore(lp)})(t),u5(t),(function(m){m.createObjectStore(Gf)})(t));let c=it.resolve();return i<3&&s>=3&&(i!==0&&((function(m){m.deleteObjectStore(cp),m.deleteObjectStore(up),m.deleteObjectStore($f)})(t),u5(t)),c=c.next((()=>(function(m){const g=m.store($f),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zt.min().toTimestamp(),targetCount:0};return g.put(lv,E)})(o)))),i<4&&s>=4&&(i!==0&&(c=c.next((()=>(function(m,g){return g.store(Yo).H().next((b=>{m.deleteObjectStore(Yo),m.createObjectStore(Yo,{keyPath:v3,autoIncrement:!0}).createIndex(Qf,E3,{unique:!0});const A=g.store(Yo),N=b.map((D=>A.put(D)));return it.waitFor(N)}))})(t,o)))),c=c.next((()=>{(function(m){m.createObjectStore(hp,{keyPath:WP})})(t)}))),i<5&&s>=5&&(c=c.next((()=>this.gi(o)))),i<6&&s>=6&&(c=c.next((()=>((function(m){m.createObjectStore(r_)})(t),this.pi(o))))),i<7&&s>=7&&(c=c.next((()=>this.yi(o)))),i<8&&s>=8&&(c=c.next((()=>this.wi(t,o)))),i<9&&s>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)}))),i<10&&s>=10&&(c=c.next((()=>this.bi(o)))),i<11&&s>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Yv,{keyPath:ZP})})(t),(function(m){m.createObjectStore(Qv,{keyPath:$P})})(t)}))),i<12&&s>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Xv,{keyPath:rV});g.createIndex(AT,oV,{unique:!1}),g.createIndex(dR,lV,{unique:!1})})(t)}))),i<13&&s>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(ov,{keyPath:FP});g.createIndex(G1,jP),g.createIndex(uR,KP)})(t))).next((()=>this.Si(t,o))).next((()=>t.deleteObjectStore(Gf)))),i<14&&s>=14&&(c=c.next((()=>this.Di(t,o)))),i<15&&s>=15&&(c=c.next((()=>(function(m){m.createObjectStore(NS,{keyPath:tV,autoIncrement:!0}).createIndex(bT,eV,{unique:!1}),m.createObjectStore(G0,{keyPath:nV}).createIndex(hR,iV,{unique:!1}),m.createObjectStore(H0,{keyPath:sV}).createIndex(fR,aV,{unique:!1})})(t)))),i<16&&s>=16&&(c=c.next((()=>{e.objectStore(G0).clear()})).next((()=>{e.objectStore(H0).clear()}))),i<17&&s>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(DS,{keyPath:uV})})(t)}))),i<18&&s>=18&&xw()&&(c=c.next((()=>{e.objectStore(G0).clear()})).next((()=>{e.objectStore(H0).clear()}))),c}pi(t){let e=0;return t.store(Gf).ee(((i,s)=>{e+=mv(s)})).next((()=>{const i={byteSize:e};return t.store(r_).put(ST,i)}))}gi(t){const e=t.store(a_),i=t.store(Yo);return e.H().next((s=>it.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,Rh],[o.userId,o.lastAcknowledgedBatchId]);return i.H(Qf,c).next((f=>it.forEach(f,(m=>{Xt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=qf(this.serializer,m);return vC(t,o.userId,g).next((()=>{}))}))))}))))}yi(t){const e=t.store(cp),i=t.store(Gf);return t.store($f).get(lv).next((s=>{const o=[];return i.ee(((c,f)=>{const m=new Ve(c),g=(function(b){return[0,Zs(b)]})(m);o.push(e.get(g).next((E=>E?it.resolve():(b=>e.put({targetId:0,path:Zs(b),sequenceNumber:s.highestListenSequenceNumber}))(m))))})).next((()=>it.waitFor(o)))}))}wi(t,e){t.createObjectStore(o_,{keyPath:JP});const i=e.store(o_),s=new KS,o=c=>{if(s.add(c)){const f=c.lastSegment(),m=c.popLast();return i.put({collectionId:f,parent:Zs(m)})}};return e.store(Gf).ee({Y:!0},((c,f)=>{const m=new Ve(c);return o(m.popLast())})).next((()=>e.store(lp).ee({Y:!0},(([c,f,m],g)=>{const E=Yl(f);return o(E.popLast())}))))}bi(t){const e=t.store(up);return e.ee(((i,s)=>{const o=x0(s),c=pC(this.serializer,o);return e.put(c)}))}Si(t,e){const i=e.store(Gf),s=[];return i.ee(((o,c)=>{const f=e.store(ov),m=(function(b){return b.document?new Ut(Ve.fromString(b.document.name).popFirst(5)):b.noDocument?Ut.fromSegments(b.noDocument.path):b.unknownDocument?Ut.fromSegments(b.unknownDocument.path):Ft(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(f.put(g))})).next((()=>it.waitFor(s)))}Di(t,e){const i=e.store(Yo),s=wC(this.serializer),o=new QS(i2.Vi,this.serializer.yt);return i.H().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??Te();qf(this.serializer,m).keys().forEach((E=>g=g.add(E))),f.set(m.userId,g)})),it.forEach(f,((m,g)=>{const E=new us(g),b=e2.wt(this.serializer,E),A=o.getIndexManager(E),N=n2.wt(E,this.serializer,A,o.referenceDelegate);return new RC(s,N,b,A).recalculateAndSaveOverlaysForDocumentKeys(new wT(e,tr.ce),m).next()}))}))}}function u5(n){n.createObjectStore(cp,{keyPath:QP}).createIndex(IS,XP,{unique:!0}),n.createObjectStore(up,{keyPath:"targetId"}).createIndex(cR,YP,{unique:!0}),n.createObjectStore($f)}const mh="IndexedDbPersistence",VE=18e5,kE=5e3,LE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CC="main";class XS{constructor(t,e,i,s,o,c,f,m,g,E,b=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Ci=o,this.window=c,this.document=f,this.Fi=g,this.Mi=E,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=A=>Promise.resolve(),!XS.v())throw new St(ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vk(this,s),this.Ki=e+CC,this.serializer=new mC(m),this.qi=new Jl(this.Ki,this.xi,new xk(this.serializer)),this.ci=new ok,this.li=new pk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wC(this.serializer),this.Pi=new rk,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,E===!1&&Si(mh,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(ft.FAILED_PRECONDITION,LE);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new tr(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>D1(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((e=>this.isPrimary&&!e?this.Ji(t).next((()=>!1)):!!e&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(Kh(t))return wt(mh,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return wt(mh,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return p0(t).get(xm).next((e=>it.resolve(this.Xi(e))))}Yi(t){return D1(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,VE)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const i=ts(e,hp);return i.H().next((s=>{const o=this.ns(s,VE),c=s.filter((f=>o.indexOf(f)===-1));return it.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const e of t)this.Ui.removeItem(this.rs(e.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?it.resolve(!0):p0(t).get(xm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,kE)&&!this.ss(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new St(ft.FAILED_PRECONDITION,LE);return!1}}return!(!this.networkEnabled||!this.inForeground)||D1(t).H().next((i=>this.ns(i,kE).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,f=this.networkEnabled===s.networkEnabled;if(o||c&&f)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&wt(mh,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[C_,hp],(t=>{const e=new wT(t,tr.ce);return this.Ji(e).next((()=>this.Yi(e)))})),this.qi.close(),this.ls()}ns(t,e){return t.filter((i=>this.ts(i.updateTimeMs,e)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>D1(t).H().next((e=>this.ns(e,VE).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,e){return n2.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new mk(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return e2.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,e,i){wt(mh,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",o=(function(m){return m===18?fV:m===17?_R:m===16?hV:m===15?xS:m===14?gR:m===13?pR:m===12?cV:m===11?mR:void Ft(60245)})(this.xi);let c;return this.qi.runTransaction(t,s,o,(f=>(c=new wT(f,this.ai?this.ai.next():tr.ce),e==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Si(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new St(ft.FAILED_PRECONDITION,sR);return i(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(t){return p0(t).get(xm).next((e=>{if(e!==null&&this.ts(e.leaseTimestampMs,kE)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new St(ft.FAILED_PRECONDITION,LE)}))}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return p0(t).put(xm,e)}static v(){return Jl.v()}Ji(t){const e=p0(t);return e.get(xm).next((i=>this.Xi(i)?(wt(mh,"Releasing primary lease."),e.delete(xm)):it.resolve()))}ts(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(Si(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;Dw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){try{const e=this.Ui?.getItem(this.rs(t))!==null;return wt(mh,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Si(mh,"Failed to get zombied client id.",e),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){Si("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function p0(n){return ts(n,C_)}function D1(n){return ts(n,hp)}function JS(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class WS{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=s}static Es(t,e){let i=Te(),s=Te();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new WS(t,e.fromCache,i,s)}}class Ok{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class IC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Dw()?8:rR(si())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const o={result:null};return this.gs(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ps(t,e,s,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new Ok;return this.ys(t,e,c).next((f=>{if(o.result=f,this.As)return this.ws(t,e,c,f.size)}))})).next((()=>o.result))}ws(t,e,i,s){return i.documentReadCount<this.Vs?(zm()<=Pe.DEBUG&&wt("QueryEngine","SDK will not create cache indexes for query:",Bm(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),it.resolve()):(zm()<=Pe.DEBUG&&wt("QueryEngine","Query:",Bm(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(zm()<=Pe.DEBUG&&wt("QueryEngine","The SDK decides to create cache indexes for query:",Bm(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ta(e))):it.resolve())}gs(t,e){if(M3(e))return it.resolve(null);let i=Ta(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=hv(e,null,"F"),i=Ta(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=Te(...o);return this.fs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,i).next((m=>{const g=this.bs(e,f);return this.Ss(e,g,c,m.readTime)?this.gs(t,hv(e,null,"F")):this.Ds(t,g,e,m)}))))})))))}ps(t,e,i,s){return M3(e)||s.isEqual(Zt.min())?it.resolve(null):this.fs.getDocuments(t,i).next((o=>{const c=this.bs(e,o);return this.Ss(e,c,i,s)?it.resolve(null):(zm()<=Pe.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bm(e)),this.Ds(t,c,e,nR(s,op)).next((f=>f)))}))}bs(t,e){let i=new ln(UR(t));return e.forEach(((s,o)=>{D_(t,o)&&(i=i.add(o))})),i}Ss(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(t,e,i){return zm()<=Pe.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",Bm(e)),this.fs.getDocumentsMatchingQuery(t,e,Dr.min(),i)}Ds(t,e,i,s){return this.fs.getDocumentsMatchingQuery(t,i,s).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const ZS="LocalStore",Mk=3e8;class Pk{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.vs=new Dn(he),this.Fs=new oc((o=>ad(o)),I_),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new RC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function NC(n,t,e,i){return new Pk(n,t,e,i)}async function DC(n,t){const e=Gt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],f=[];let m=Te();for(const g of s){c.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}for(const g of o){f.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}return e.localDocuments.getDocuments(i,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function Vk(n,t){const e=Gt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=t.batch.keys(),o=e.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,E){const b=g.batch,A=b.keys();let N=it.resolve();return A.forEach((D=>{N=N.next((()=>E.getEntry(m,D))).next((k=>{const U=g.docVersions.get(D);Xt(U!==null,48541),k.version.compareTo(U)<0&&(b.applyToRemoteDocument(k,g),k.isValidDocument()&&(k.setReadTime(g.commitVersion),E.addEntry(k)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,b)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Te();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,s)))}))}function xC(n){const t=Gt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function kk(n,t){const e=Gt(n),i=t.snapshotVersion;let s=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});s=e.vs;const f=[];t.targetChanges.forEach(((E,b)=>{const A=s.get(b);if(!A)return;f.push(e.li.removeMatchingKeys(o,E.removedDocuments,b).next((()=>e.li.addMatchingKeys(o,E.addedDocuments,b))));let N=A.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(b)!==null?N=N.withResumeToken(mi.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),s=s.insert(b,N),(function(k,U,F){return k.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Mk?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(A,N,E)&&f.push(e.li.updateTargetData(o,N))}));let m=nr(),g=Te();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(o,E))})),f.push(OC(o,c,t.documentUpdates).next((E=>{m=E.Bs,g=E.Ls}))),!i.isEqual(Zt.min())){const E=e.li.getLastRemoteSnapshotVersion(o).next((b=>e.li.setTargetsMetadata(o,o.currentSequenceNumber,i)));f.push(E)}return it.waitFor(f).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,m,g))).next((()=>m))})).then((o=>(e.vs=s,o)))}function OC(n,t,e){let i=Te(),s=Te();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=nr();return e.forEach(((f,m)=>{const g=o.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(Zt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):wt(ZS,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function Lk(n,t){const e=Gt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Rh),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function yp(n,t){const e=Gt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.li.getTargetData(i,t).next((o=>o?(s=o,it.resolve(s)):e.li.allocateTargetId(i).next((c=>(s=new Ku(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=e.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function vp(n,t,e){const i=Gt(n),s=i.vs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Kh(c))throw c;wt(ZS,`Failed to update sequence numbers for target ${t}: ${c}`)}i.vs=i.vs.remove(t),i.Fs.delete(s.target)}function gv(n,t,e){const i=Gt(n);let s=Zt.min(),o=Te();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,E){const b=Gt(m),A=b.Fs.get(E);return A!==void 0?it.resolve(b.vs.get(A)):b.li.getTargetData(g,E)})(i,c,Ta(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{o=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,t,e?s:Zt.min(),e?o:Te()))).next((f=>(VC(i,LR(t),f),{documents:f,ks:o})))))}function MC(n,t){const e=Gt(n),i=Gt(e.li),s=e.vs.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,t).next((c=>c?c.target:null))))}function PC(n,t){const e=Gt(n),i=e.Ms.get(t)||Zt.min();return e.persistence.runTransaction("Get new document changes","readonly",(s=>e.xs.getAllFromCollectionGroup(s,t,nR(i,op),Number.MAX_SAFE_INTEGER))).then((s=>(VC(e,t,s),s)))}function VC(n,t,e){let i=n.Ms.get(t)||Zt.min();e.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Ms.set(t,i)}async function Uk(n,t,e,i){const s=Gt(n);let o=Te(),c=nr();for(const g of e){const E=t.Ks(g.metadata.name);g.document&&(o=o.add(E));const b=t.qs(g);b.setReadTime(t.Us(g.metadata.readTime)),c=c.insert(E,b)}const f=s.xs.newChangeBuffer({trackRemovals:!0}),m=await yp(s,(function(E){return Ta(Op(Ve.fromString(`__bundle__/docs/${E}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(g=>OC(g,f,c).next((E=>(f.apply(g),E))).next((E=>s.li.removeMatchingKeysForTargetId(g,m.targetId).next((()=>s.li.addMatchingKeys(g,o,m.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(g,E.Bs,E.Ls))).next((()=>E.Bs))))))}async function zk(n,t,e=Te()){const i=await yp(n,Ta(FS(t.bundledQuery))),s=Gt(n);return s.persistence.runTransaction("Save named query","readwrite",(o=>{const c=bi(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return s.Pi.saveNamedQuery(o,t);const f=i.withResumeToken(mi.EMPTY_BYTE_STRING,c);return s.vs=s.vs.insert(f.targetId,f),s.li.updateTargetData(o,f).next((()=>s.li.removeMatchingKeysForTargetId(o,i.targetId))).next((()=>s.li.addMatchingKeys(o,e,i.targetId))).next((()=>s.Pi.saveNamedQuery(o,t)))}))}const kC="firestore_clients";function c5(n,t){return`${kC}_${n}_${t}`}const LC="firestore_mutations";function h5(n,t,e){let i=`${LC}_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const UC="firestore_targets";function UE(n,t){return`${UC}_${n}_${t}`}const Gl="SharedClientState";class _v{constructor(t,e,i,s){this.user=t,this.batchId=e,this.state=i,this.error=s}static $s(t,e,i){const s=JSON.parse(i);let o,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(o=new St(s.error.code,s.error.message))),c?new _v(t,e,s.state,o):(Si(Gl,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class K0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static $s(t,e){const i=JSON.parse(e);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new St(i.error.code,i.error.message))),o?new K0(t,i.state,s):(Si(Gl,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class yv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const i=JSON.parse(e);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=kS();for(let c=0;s&&c<i.activeTargetIds.length;++c)s=oR(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return s?new yv(t,o):(Si(Gl,`Failed to parse client data for instance '${t}': ${e}`),null)}}class $S{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new $S(e.clientId,e.onlineState):(Si(Gl,`Failed to parse online state: ${t}`),null)}}class BT{constructor(){this.activeTargetIds=kS()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zE{constructor(t,e,i,s,o){this.window=t,this.Ci=e,this.persistenceKey=i,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Dn(he),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=c5(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new BT),this.eo=new RegExp(`^${kC}_${c}_([^_]*)$`),this.no=new RegExp(`^${LC}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${UC}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const i of t){if(i===this.zs)continue;const s=this.getItem(c5(this.persistenceKey,i));if(s){const o=yv.$s(i,s);o&&(this.Js=this.Js.insert(o.clientId,o))}}this.oo();const e=this.storage.getItem(this.io);if(e){const i=this._o(e);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let e=!1;return this.Js.forEach(((i,s)=>{s.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,e,i){this.co(t,e,i),this.lo(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const s=this.storage.getItem(UE(this.persistenceKey,t));if(s){const o=K0.$s(t,s);o&&(i=o.state)}}return e&&this.ho.Qs(t),this.oo(),i}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(UE(this.persistenceKey,t))}updateQueryState(t,e,i){this.Po(t,e,i)}handleUserChange(t,e,i){e.forEach((s=>{this.lo(s)})),this.currentUser=t,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return wt(Gl,"READ",t,e),e}setItem(t,e){wt(Gl,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){wt(Gl,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(wt(Gl,"EVENT",e.key,e.newValue),e.key===this.Xs)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.eo.test(e.key)){if(e.newValue==null){const i=this.Eo(e.key);return this.Ro(i,null)}{const i=this.Ao(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(e.key)){if(e.newValue!==null){const i=this.Vo(e.key,e.newValue);if(i)return this.mo(i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.fo(e.key,e.newValue);if(i)return this.po(i)}}else if(e.key===this.io){if(e.newValue!==null){const i=this._o(e.newValue);if(i)return this.ao(i)}}else if(e.key===this.Ys){const i=(function(o){let c=tr.ce;if(o!=null)try{const f=JSON.parse(o);Xt(typeof f=="number",30636,{yo:o}),c=f}catch(f){Si(Gl,"Failed to read sequence number from WebStorage",f)}return c})(e.newValue);i!==tr.ce&&this.sequenceNumberHandler(i)}else if(e.key===this.so){const i=this.wo(e.newValue);await Promise.all(i.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(e)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,e,i){const s=new _v(this.currentUser,t,e,i),o=h5(this.persistenceKey,this.currentUser,t);this.setItem(o,s.Ws())}lo(t){const e=h5(this.persistenceKey,this.currentUser,t);this.removeItem(e)}To(t){const e={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(e))}Po(t,e,i){const s=UE(this.persistenceKey,t),o=new K0(t,e,i);this.setItem(s,o.Ws())}Io(t){const e=JSON.stringify(Array.from(t));this.setItem(this.so,e)}Eo(t){const e=this.eo.exec(t);return e?e[1]:null}Ao(t,e){const i=this.Eo(t);return yv.$s(i,e)}Vo(t,e){const i=this.no.exec(t),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return _v.$s(new us(o),s,e)}fo(t,e){const i=this.ro.exec(t),s=Number(i[1]);return K0.$s(s,e)}_o(t){return $S.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);wt(Gl,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Js.insert(t,e):this.Js.remove(t),s=this.uo(this.Js),o=this.uo(i),c=[],f=[];return o.forEach((m=>{s.has(m)||c.push(m)})),s.forEach((m=>{o.has(m)||f.push(m)})),this.syncEngine.Co(c,f).then((()=>{this.Js=i}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let e=kS();return t.forEach(((i,s)=>{e=e.unionWith(s.activeTargetIds)})),e}}class zC{constructor(){this.vo=new BT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new BT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Bk{Mo(t){}shutdown(){}}const f5="ConnectivityMonitor";class d5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){wt(f5,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){wt(f5,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let x1=null;function GT(){return x1===null?x1=(function(){return 268435456+Math.round(2147483648*Math.random())})():x1++,"0x"+x1.toString(16)}const BE="RestConnection",Gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Hk{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===RT?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,o){const c=GT(),f=this.Qo(t,e.toUriEncodedString());wt(BE,`Sending RPC '${t}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,o);const{host:g}=new URL(f),E=iu(g);return this.zo(t,f,m,i,E).then((b=>(wt(BE,`Received RPC '${t}' ${c}: `,b),b)),(b=>{throw Zo(BE,`RPC '${t}' ${c} failed with error: `,b,"url: ",f,"request:",i),b}))}jo(t,e,i,s,o,c){return this.Wo(t,e,i,s,o)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xp})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,o)=>t[o]=s)),i&&i.headers.forEach(((s,o)=>t[o]=s))}Qo(t,e){const i=Gk[t];let s=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class qk{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const Qs="WebChannelConnection",g0=(n,t,e)=>{n.listen(t,(i=>{try{e(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Qm extends Hk{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Qm.c_){const t=Qw();g0(t,Yw.STAT_EVENT,(e=>{e.stat===vT.PROXY?wt(Qs,"STAT_EVENT: detected buffering proxy"):e.stat===vT.NOPROXY&&wt(Qs,"STAT_EVENT: detected no buffering proxy")})),Qm.c_=!0}}zo(t,e,i,s,o){const c=GT();return new Promise(((f,m)=>{const g=new jw;g.setWithCredentials(!0),g.listenOnce(Kw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case U1.NO_ERROR:const b=g.getResponseJson();wt(Qs,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),f(b);break;case U1.TIMEOUT:wt(Qs,`RPC '${t}' ${c} timed out`),m(new St(ft.DEADLINE_EXCEEDED,"Request time out"));break;case U1.HTTP_ERROR:const A=g.getStatus();if(wt(Qs,`RPC '${t}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const D=N?.error;if(D&&D.status&&D.message){const k=(function(F){const j=F.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(j)>=0?j:ft.UNKNOWN})(D.status);m(new St(k,D.message))}else m(new St(ft.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new St(ft.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{wt(Qs,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(s);wt(Qs,`RPC '${t}' ${c} sending request:`,s),g.send(e,"POST",E,i,15)}))}T_(t,e,i){const s=GT(),o=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const g=o.join("");wt(Qs,`Creating RPC '${t}' stream ${s}: ${g}`,f);const E=c.createWebChannel(g,f);this.I_(E);let b=!1,A=!1;const N=new qk({Ho:D=>{A?wt(Qs,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(b||(wt(Qs,`Opening RPC '${t}' stream ${s} transport.`),E.open(),b=!0),wt(Qs,`RPC '${t}' stream ${s} sending:`,D),E.send(D))},Jo:()=>E.close()});return g0(E,I0.EventType.OPEN,(()=>{A||(wt(Qs,`RPC '${t}' stream ${s} transport opened.`),N.i_())})),g0(E,I0.EventType.CLOSE,(()=>{A||(A=!0,wt(Qs,`RPC '${t}' stream ${s} transport closed`),N.o_(),this.E_(E))})),g0(E,I0.EventType.ERROR,(D=>{A||(A=!0,Zo(Qs,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),N.o_(new St(ft.UNAVAILABLE,"The operation could not be completed")))})),g0(E,I0.EventType.MESSAGE,(D=>{if(!A){const k=D.data[0];Xt(!!k,16349);const U=k,F=U?.error||U[0]?.error;if(F){wt(Qs,`RPC '${t}' stream ${s} received error:`,F);const j=F.status;let X=(function(rt){const V=ki[rt];if(V!==void 0)return WR(V)})(j),W=F.message;j==="NOT_FOUND"&&W.includes("database")&&W.includes("does not exist")&&W.includes(this.databaseId.database)&&Zo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),X===void 0&&(X=ft.INTERNAL,W="Unknown error status: "+j+" with message "+F.message),A=!0,N.o_(new St(X,W)),E.close()}else wt(Qs,`RPC '${t}' stream ${s} received:`,k),N.__(k)}})),Qm.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Xw()}}function Fk(n){return new Qm(n)}function BC(){return typeof window<"u"?window:null}function Q1(){return typeof document<"u"?document:null}function P_(n){return new XV(n,!0)}Qm.c_=!1;class tb{constructor(t,e,i=1e3,s=1.5,o=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&wt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const m5="PersistentStream";class GC{constructor(t,e,i,s,o,c,f,m){this.Ci=t,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tb(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ft.RESOURCE_EXHAUSTED?(Si(e.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===e&&this.G_(i,s)}),(i=>{t((()=>{const s=new St(ft.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(t,e){const i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return wt(m5,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(wt(m5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jk extends GC{constructor(t,e,i,s,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=ZV(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Zt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Zt.min():c.readTime?bi(c.readTime):Zt.min()})(t);return this.listener.J_(e,i)}Z_(t){const e={};e.database=VT(this.serializer),e.addTarget=(function(o,c){let f;const m=c.target;if(f=uv(m)?{documents:oC(o,m)}:{query:lC(o,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=eC(o,c.resumeToken);const g=MT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Zt.min())>0){f.readTime=_p(o,c.snapshotVersion.toTimestamp());const g=MT(o,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const i=tk(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){const e={};e.database=VT(this.serializer),e.removeTarget=t,this.K_(e)}}class Kk extends GC{constructor(t,e,i,s,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return Xt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Xt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Xt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=$V(t.writeResults,t.commitTime),i=bi(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=VT(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>d_(this.serializer,i)))};this.K_(e)}}class Yk{}class Qk extends Yk{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new St(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Wo(t,PT(e,i),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new St(ft.UNKNOWN,o.toString())}))}jo(t,e,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(t,PT(e,i),s,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new St(ft.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Xk(n,t,e,i){return new Qk(n,t,e,i)}class Jk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Si(e),this.aa=!1):wt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const hd="RemoteStore";class Wk{constructor(t,e,i,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Qh(this)&&(wt(hd,"Restarting streams for network reachability change."),await(async function(m){const g=Gt(m);g.Ea.add(4),await Vp(g),g.Va.set("Unknown"),g.Ea.delete(4),await V_(g)})(this))}))})),this.Va=new Jk(i,s)}}async function V_(n){if(Qh(n))for(const t of n.Ra)await t(!0)}async function Vp(n){for(const t of n.Ra)await t(!1)}function s2(n,t){const e=Gt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),ib(e)?nb(e):Lp(e).O_()&&eb(e,t))}function Ep(n,t){const e=Gt(n),i=Lp(e);e.Ia.delete(t),i.O_()&&HC(e,t),e.Ia.size===0&&(i.O_()?i.L_():Qh(e)&&e.Va.set("Unknown"))}function eb(n,t){if(n.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Lp(n).Z_(t)}function HC(n,t){n.da.$e(t),Lp(n).X_(t)}function nb(n){n.da=new jV({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Lp(n).start(),n.Va.ua()}function ib(n){return Qh(n)&&!Lp(n).x_()&&n.Ia.size>0}function Qh(n){return Gt(n).Ea.size===0}function qC(n){n.da=void 0}async function Zk(n){n.Va.set("Online")}async function $k(n){n.Ia.forEach(((t,e)=>{eb(n,t)}))}async function tL(n,t){qC(n),ib(n)?(n.Va.ha(t),nb(n)):n.Va.set("Unknown")}async function eL(n,t,e){if(n.Va.set("Online"),t instanceof tC&&t.state===2&&t.cause)try{await(async function(s,o){const c=o.cause;for(const f of o.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,t)}catch(i){wt(hd,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await vv(n,i)}else if(t instanceof K1?n.da.Xe(t):t instanceof $R?n.da.st(t):n.da.tt(t),!e.isEqual(Zt.min()))try{const i=await xC(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const f=o.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.Ia.get(g);E&&o.Ia.set(g,E.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const E=o.Ia.get(m);if(!E)return;o.Ia.set(m,E.withResumeToken(mi.EMPTY_BYTE_STRING,E.snapshotVersion)),HC(o,m);const b=new Ku(E.target,m,g,E.sequenceNumber);eb(o,b)})),o.remoteSyncer.applyRemoteEvent(f)})(n,e)}catch(i){wt(hd,"Failed to raise snapshot:",i),await vv(n,i)}}async function vv(n,t,e){if(!Kh(t))throw t;n.Ea.add(1),await Vp(n),n.Va.set("Offline"),e||(e=()=>xC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{wt(hd,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await V_(n)}))}function FC(n,t){return t().catch((e=>vv(n,e,t)))}async function kp(n){const t=Gt(n),e=Lh(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Rh;for(;nL(t);)try{const s=await Lk(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,iL(t,s)}catch(s){await vv(t,s)}jC(t)&&KC(t)}function nL(n){return Qh(n)&&n.Ta.length<10}function iL(n,t){n.Ta.push(t);const e=Lh(n);e.O_()&&e.Y_&&e.ea(t.mutations)}function jC(n){return Qh(n)&&!Lh(n).x_()&&n.Ta.length>0}function KC(n){Lh(n).start()}async function sL(n){Lh(n).ra()}async function aL(n){const t=Lh(n);for(const e of n.Ta)t.ea(e.mutations)}async function rL(n,t,e){const i=n.Ta.shift(),s=BS.from(i,t,e);await FC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await kp(n)}async function oL(n,t){t&&Lh(n).Y_&&await(async function(i,s){if((function(c){return JR(c)&&c!==ft.ABORTED})(s.code)){const o=i.Ta.shift();Lh(i).B_(),await FC(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await kp(i)}})(n,t),jC(n)&&KC(n)}async function p5(n,t){const e=Gt(n);e.asyncQueue.verifyOperationInProgress(),wt(hd,"RemoteStore received new credentials");const i=Qh(e);e.Ea.add(3),await Vp(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await V_(e)}async function HT(n,t){const e=Gt(n);t?(e.Ea.delete(2),await V_(e)):t||(e.Ea.add(2),await Vp(e),e.Va.set("Unknown"))}function Lp(n){return n.ma||(n.ma=(function(e,i,s){const o=Gt(e);return o.sa(),new jk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Zk.bind(null,n),Yo:$k.bind(null,n),t_:tL.bind(null,n),J_:eL.bind(null,n)}),n.Ra.push((async t=>{t?(n.ma.B_(),ib(n)?nb(n):n.Va.set("Unknown")):(await n.ma.stop(),qC(n))}))),n.ma}function Lh(n){return n.fa||(n.fa=(function(e,i,s){const o=Gt(e);return o.sa(),new Kk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:sL.bind(null,n),t_:oL.bind(null,n),ta:aL.bind(null,n),na:rL.bind(null,n)}),n.Ra.push((async t=>{t?(n.fa.B_(),await kp(n)):(await n.fa.stop(),n.Ta.length>0&&(wt(hd,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class sb{constructor(t,e,i,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,o){const c=Date.now()+i,f=new sb(t,e,c,s,o);return f.start(i),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(n,t){if(Si("AsyncQueue",`${t}: ${n}`),Kh(n))return new St(ft.UNAVAILABLE,`${t}: ${n}`);throw n}class Xm{static emptySet(t){return new Xm(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ut.comparator(e.key,i.key):(e,i)=>Ut.comparator(e.key,i.key),this.keyedMap=N0(),this.sortedSet=new Dn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Xm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Xm;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class g5{constructor(){this.ga=new Dn(Ut.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Ft(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Tp{constructor(t,e,i,s,o,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,o){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new Tp(t,e,Xm.emptySet(e),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&N_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}class lL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class uL{constructor(){this.queries=_5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=Gt(e),o=s.queries;s.queries=_5(),o.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new St(ft.ABORTED,"Firestore shutting down"))}}function _5(){return new oc((n=>kR(n)),N_)}async function ab(n,t){const e=Gt(n);let i=3;const s=t.query;let o=e.queries.get(s);o?!o.Sa()&&t.Da()&&(i=2):(o=new lL,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(s,!0);break;case 1:o.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const f=Up(c,`Initialization of query '${Bm(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,o),o.ba.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&ob(e)}async function rb(n,t){const e=Gt(n),i=t.query;let s=3;const o=e.queries.get(i);if(o){const c=o.ba.indexOf(t);c>=0&&(o.ba.splice(c,1),o.ba.length===0?s=t.Da()?0:1:!o.Sa()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function cL(n,t){const e=Gt(n);let i=!1;for(const s of t){const o=s.query,c=e.queries.get(o);if(c){for(const f of c.ba)f.Fa(s)&&(i=!0);c.wa=s}}i&&ob(e)}function hL(n,t,e){const i=Gt(n),s=i.queries.get(t);if(s)for(const o of s.ba)o.onError(e);i.queries.delete(t)}function ob(n){n.Ca.forEach((t=>{t.next()}))}var qT,y5;(y5=qT||(qT={})).Ma="default",y5.Cache="cache";class lb{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Tp(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Tp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qT.Cache}}class fL{constructor(t,e){this.qa=t,this.byteLength=e}Ua(){return"metadata"in this.qa}}class v5{constructor(t){this.serializer=t}Ks(t){return Wl(this.serializer,t)}qs(t){return t.metadata.exists?rC(this.serializer,t.document,!1):zn.newNoDocument(this.Ks(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return bi(t)}}class dL{constructor(t,e){this.$a=t,this.serializer=e,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=YC(t)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Wa.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Qa.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++e;const i=Ve.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.qa.document&&(this.Qa[this.Qa.length-1].document=t.qa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,{...this.progress}):null}za(t){const e=new Map,i=new v5(this.serializer);for(const s of t)if(s.metadata.queries){const o=i.Ks(s.metadata.name);for(const c of s.metadata.queries){const f=(e.get(c)||Te()).add(o);e.set(c,f)}}return e}async ja(t){const e=await Uk(t,new v5(this.serializer),this.Qa,this.$a.id),i=this.za(this.documents);for(const s of this.Wa)await zk(t,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:e}}}function YC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class QC{constructor(t){this.key=t}}class XC{constructor(t){this.key=t}}class JC{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Te(),this.mutatedKeys=Te(),this.eu=UR(t),this.tu=new Xm(this.eu)}get nu(){return this.Za}ru(t,e){const i=e?e.iu:new g5,s=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((E,b)=>{const A=s.get(E),N=D_(this.query,b)?b:null,D=!!A&&this.mutatedKeys.has(A.key),k=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;A&&N?A.data.isEqual(N.data)?D!==k&&(i.track({type:3,doc:N}),U=!0):this.su(A,N)||(i.track({type:2,doc:N}),U=!0,(m&&this.eu(N,m)>0||g&&this.eu(N,g)<0)&&(f=!0)):!A&&N?(i.track({type:0,doc:N}),U=!0):A&&!N&&(i.track({type:1,doc:A}),U=!0,(m||g)&&(f=!0)),U&&(N?(c=c.add(N),o=k?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),i.track({type:1,doc:E})}return{tu:c,iu:i,Ss:f,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,b)=>(function(N,D){const k=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{Vt:U})}};return k(N)-k(D)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(i),s=s??!1;const f=e&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Tp(this.query,t.tu,o,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Te(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new XC(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new QC(i))})),e}cu(t){this.Za=t.ks,this.Ya=Te();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Tp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xh="SyncEngine";class mL{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class pL{constructor(t){this.key=t,this.hu=!1}}class gL{constructor(t,e,i,s,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new oc((f=>kR(f)),N_),this.Iu=new Map,this.Eu=new Set,this.Ru=new Dn(Ut.comparator),this.Au=new Map,this.Vu=new YS,this.du={},this.mu=new Map,this.fu=cd.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _L(n,t,e=!0){const i=a2(n);let s;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await WC(i,t,e,!0),s}async function yL(n,t){const e=a2(n);await WC(e,t,!0,!1)}async function WC(n,t,e,i){const s=await yp(n.localStore,Ta(t)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let f;return i&&(f=await ub(n,t,o,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&s2(n.remoteStore,s),f}async function ub(n,t,e,i,s){n.pu=(b,A,N)=>(async function(k,U,F,j){let X=U.view.ru(F);X.Ss&&(X=await gv(k.localStore,U.query,!1).then((({documents:V})=>U.view.ru(V,X))));const W=j&&j.targetChanges.get(U.targetId),mt=j&&j.targetMismatches.get(U.targetId)!=null,rt=U.view.applyChanges(X,k.isPrimaryClient,W,mt);return FT(k,U.targetId,rt.au),rt.snapshot})(n,b,A,N);const o=await gv(n.localStore,t,!0),c=new JC(t,o.ks),f=c.ru(o.documents),m=M_.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);FT(n,e,g.au);const E=new mL(t,e,c);return n.Tu.set(t,E),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),g.snapshot}async function vL(n,t,e){const i=Gt(n),s=i.Tu.get(t),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((c=>!N_(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await vp(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&Ep(i.remoteStore,s.targetId),Sp(i,s.targetId)})).catch(jh)):(Sp(i,s.targetId),await vp(i.localStore,s.targetId,!0))}async function EL(n,t){const e=Gt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Ep(e.remoteStore,i.targetId))}async function TL(n,t,e){const i=db(n);try{const s=await(function(c,f){const m=Gt(c),g=an.now(),E=f.reduce(((N,D)=>N.add(D.key)),Te());let b,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let D=nr(),k=Te();return m.xs.getEntries(N,E).next((U=>{D=U,D.forEach(((F,j)=>{j.isValidDocument()||(k=k.add(F))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,D))).next((U=>{b=U;const F=[];for(const j of f){const X=HV(j,b.get(j.key).overlayedDocument);X!=null&&F.push(new lc(j.key,X,CR(X.value.mapValue),Jn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,g,F,f)})).next((U=>{A=U;const F=U.applyToLocalDocumentSet(b,k);return m.documentOverlayCache.saveOverlays(N,U.batchId,F)}))})).then((()=>({batchId:A.batchId,changes:BR(b)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new Dn(he)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(i,s.batchId,e),await uc(i,s.changes),await kp(i.remoteStore)}catch(s){const o=Up(s,"Failed to persist write");e.reject(o)}}async function ZC(n,t){const e=Gt(n);try{const i=await kk(e.localStore,t);t.targetChanges.forEach(((s,o)=>{const c=e.Au.get(o);c&&(Xt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Xt(c.hu,14607):s.removedDocuments.size>0&&(Xt(c.hu,42227),c.hu=!1))})),await uc(e,i,t)}catch(i){await jh(i)}}function E5(n,t,e){const i=Gt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach(((o,c)=>{const f=c.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=Gt(c);m.onlineState=f;let g=!1;m.queries.forEach(((E,b)=>{for(const A of b.ba)A.va(f)&&(g=!0)})),g&&ob(m)})(i.eventManager,t),s.length&&i.Pu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function SL(n,t,e){const i=Gt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),o=s&&s.key;if(o){let c=new Dn(Ut.comparator);c=c.insert(o,zn.newNoDocument(o,Zt.min()));const f=Te().add(o),m=new O_(Zt.min(),new Map,new Dn(he),c,f);await ZC(i,m),i.Ru=i.Ru.remove(o),i.Au.delete(t),fb(i)}else await vp(i.localStore,t,!1).then((()=>Sp(i,t,e))).catch(jh)}async function bL(n,t){const e=Gt(n),i=t.batch.batchId;try{const s=await Vk(e.localStore,t);hb(e,i,null),cb(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await uc(e,s)}catch(s){await jh(s)}}async function AL(n,t,e){const i=Gt(n);try{const s=await(function(c,f){const m=Gt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return m.mutationQueue.lookupMutationBatch(g,f).next((b=>(Xt(b!==null,37113),E=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,E,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>m.localDocuments.getDocuments(g,E)))}))})(i.localStore,t);hb(i,t,e),cb(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await uc(i,s)}catch(s){await jh(s)}}async function wL(n,t){const e=Gt(n);Qh(e.remoteStore)||wt(Xh,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(c){const f=Gt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(e.localStore);if(i===Rh)return void t.resolve();const s=e.mu.get(i)||[];s.push(t),e.mu.set(i,s)}catch(i){const s=Up(i,"Initialization of waitForPendingWrites() operation failed");t.reject(s)}}function cb(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function hb(n,t,e){const i=Gt(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(e?o.reject(e):o.resolve(),s=s.remove(t)),i.du[i.currentUser.toKey()]=s}}function Sp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Vu.Gr(t).forEach((i=>{n.Vu.containsKey(i)||$C(n,i)}))}function $C(n,t){n.Eu.delete(t.path.canonicalString());const e=n.Ru.get(t);e!==null&&(Ep(n.remoteStore,e),n.Ru=n.Ru.remove(t),n.Au.delete(e),fb(n))}function FT(n,t,e){for(const i of e)i instanceof QC?(n.Vu.addReference(i.key,t),RL(n,i)):i instanceof XC?(wt(Xh,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,t),n.Vu.containsKey(i.key)||$C(n,i.key)):Ft(19791,{wu:i})}function RL(n,t){const e=t.key,i=e.path.canonicalString();n.Ru.get(e)||n.Eu.has(i)||(wt(Xh,"New document in limbo: "+e),n.Eu.add(i),fb(n))}function fb(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new Ut(Ve.fromString(t)),i=n.fu.next();n.Au.set(i,new pL(e)),n.Ru=n.Ru.insert(e,i),s2(n.remoteStore,new Ku(Ta(Op(e.path)),i,"TargetPurposeLimboResolution",tr.ce))}}async function uc(n,t,e){const i=Gt(n),s=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,t,e).then((g=>{if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:e?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=WS.Es(m.targetId,g);o.push(E)}})))})),await Promise.all(c),i.Pu.J_(s),await(async function(m,g){const E=Gt(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>it.forEach(g,(A=>it.forEach(A.Ts,(N=>E.persistence.referenceDelegate.addReference(b,A.targetId,N))).next((()=>it.forEach(A.Is,(N=>E.persistence.referenceDelegate.removeReference(b,A.targetId,N)))))))))}catch(b){if(!Kh(b))throw b;wt(ZS,"Failed to update sequence numbers: "+b)}for(const b of g){const A=b.targetId;if(!b.fromCache){const N=E.vs.get(A),D=N.snapshotVersion,k=N.withLastLimboFreeSnapshotVersion(D);E.vs=E.vs.insert(A,k)}}})(i.localStore,o))}async function CL(n,t){const e=Gt(n);if(!e.currentUser.isEqual(t)){wt(Xh,"User change. New user:",t.toKey());const i=await DC(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((f=>{f.forEach((m=>{m.reject(new St(ft.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await uc(e,i.Ns)}}function IL(n,t){const e=Gt(n),i=e.Au.get(t);if(i&&i.hu)return Te().add(i.key);{let s=Te();const o=e.Iu.get(t);if(!o)return s;for(const c of o){const f=e.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}async function NL(n,t){const e=Gt(n),i=await gv(e.localStore,t.query,!0),s=t.view.cu(i);return e.isPrimaryClient&&FT(e,t.targetId,s.au),s}async function DL(n,t){const e=Gt(n);return PC(e.localStore,t).then((i=>uc(e,i)))}async function xL(n,t,e,i){const s=Gt(n),o=await(function(f,m){const g=Gt(f),E=Gt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.Xn(b,m).next((A=>A?g.localDocuments.getDocuments(b,A):it.resolve(null)))))})(s.localStore,t);o!==null?(e==="pending"?await kp(s.remoteStore):e==="acknowledged"||e==="rejected"?(hb(s,t,i||null),cb(s,t),(function(f,m){Gt(Gt(f).mutationQueue).nr(m)})(s.localStore,t)):Ft(6720,"Unknown batchState",{bu:e}),await uc(s,o)):wt(Xh,"Cannot apply mutation batch with id: "+t)}async function OL(n,t){const e=Gt(n);if(a2(e),db(e),t===!0&&e.gu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),s=await T5(e,i.toArray());e.gu=!0,await HT(e.remoteStore,!0);for(const o of s)s2(e.remoteStore,o)}else if(t===!1&&e.gu!==!1){const i=[];let s=Promise.resolve();e.Iu.forEach(((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):s=s.then((()=>(Sp(e,c),vp(e.localStore,c,!0)))),Ep(e.remoteStore,c)})),await s,await T5(e,i),(function(c){const f=Gt(c);f.Au.forEach(((m,g)=>{Ep(f.remoteStore,g)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Dn(Ut.comparator)})(e),e.gu=!1,await HT(e.remoteStore,!1)}}async function T5(n,t,e){const i=Gt(n),s=[],o=[];for(const c of t){let f;const m=i.Iu.get(c);if(m&&m.length!==0){f=await yp(i.localStore,Ta(m[0]));for(const g of m){const E=i.Tu.get(g),b=await NL(i,E);b.snapshot&&o.push(b.snapshot)}}else{const g=await MC(i.localStore,c);f=await yp(i.localStore,g),await ub(i,t8(g),c,!1,f.resumeToken)}s.push(f)}return i.Pu.J_(o),s}function t8(n){return VR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ML(n){return(function(e){return Gt(Gt(e).persistence).hs()})(Gt(n).localStore)}async function PL(n,t,e,i){const s=Gt(n);if(s.gu)return void wt(Xh,"Ignoring unexpected query state notification.");const o=s.Iu.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=await PC(s.localStore,LR(o[0])),f=O_.createSynthesizedRemoteEventForCurrentChange(t,e==="current",mi.EMPTY_BYTE_STRING);await uc(s,c,f);break}case"rejected":await vp(s.localStore,t,!0),Sp(s,t,i);break;default:Ft(64155,e)}}async function VL(n,t,e){const i=a2(n);if(i.gu){for(const s of t){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){wt(Xh,"Adding an already active target "+s);continue}const o=await MC(i.localStore,s),c=await yp(i.localStore,o);await ub(i,t8(o),c.targetId,!1,c.resumeToken),s2(i.remoteStore,c)}for(const s of e)i.Iu.has(s)&&await vp(i.localStore,s,!1).then((()=>{Ep(i.remoteStore,s),Sp(i,s)})).catch(jh)}}function a2(n){const t=Gt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=IL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SL.bind(null,t),t.Pu.J_=cL.bind(null,t.eventManager),t.Pu.yu=hL.bind(null,t.eventManager),t}function db(n){const t=Gt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AL.bind(null,t),t}function kL(n,t,e){const i=Gt(n);(async function(o,c,f){try{const m=await c.getMetadata();if(await(function(N,D){const k=Gt(N),U=bi(D.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",(F=>k.Pi.getBundleMetadata(F,D.id))).then((F=>!!F&&F.createTime.compareTo(U)>=0))})(o.localStore,m))return await c.close(),f._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(YC(m));const g=new dL(m,c.serializer);let E=await c.Su();for(;E;){const A=await g.Ga(E);A&&f._updateProgress(A),E=await c.Su()}const b=await g.ja(o.localStore);return await uc(o,b.Ja,void 0),await(function(N,D){const k=Gt(N);return k.persistence.runTransaction("Save bundle","readwrite",(U=>k.Pi.saveBundleMetadata(U,D)))})(o.localStore,m),f._completeWith(b.progress),Promise.resolve(b.Ha)}catch(m){return Zo(Xh,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(i,t,e).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class m_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=P_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return NC(this.persistence,new IC,t.initialUser,this.serializer)}Cu(t){return new QS(i2.Vi,this.serializer)}Du(t){return new zC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}m_.provider={build:()=>new m_};class LL extends m_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Xt(this.persistence.referenceDelegate instanceof pv,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new SC(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new QS((i=>pv.Vi(i,e)),this.serializer)}}class e8 extends m_{constructor(t,e,i){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await db(this.xu.syncEngine),await kp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return NC(this.persistence,new IC,t.initialUser,this.serializer)}Fu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new SC(i,t.asyncQueue,e)}Mu(t,e){const i=new BP(e,this.persistence);return new zP(t.asyncQueue,i)}Cu(t){const e=JS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new XS(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,BC(),Q1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new zC}}class UL extends e8{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof zE&&(this.sharedClientState.syncEngine={So:xL.bind(null,e),Do:PL.bind(null,e),Co:VL.bind(null,e),hs:ML.bind(null,e),bo:DL.bind(null,e)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await OL(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(t){const e=BC();if(!zE.v(e))throw new St(ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=JS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new zE(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class p_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CL.bind(null,this.syncEngine),await HT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uL})()}createDatastore(t){const e=P_(t.databaseInfo.databaseId),i=Fk(t.databaseInfo);return Xk(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,o,c,f){return new Wk(i,s,o,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>E5(this.syncEngine,e,0)),(function(){return d5.v()?new d5:new Bk})())}createSyncEngine(t,e){return(function(s,o,c,f,m,g,E){const b=new gL(s,o,c,f,m,g);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=Gt(e);wt(hd,"RemoteStore shutting down."),i.Ea.add(5),await Vp(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}p_.provider={build:()=>new p_};function S5(n,t=10240){let e=0;return{async read(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class r2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Si("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}class zL{constructor(t,e){this.Bu=t,this.serializer=e,this.metadata=new Os,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.Ua()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.Ku();if(t===null)return null;const e=this.Lu.decode(t),i=Number(e);isNaN(i)&&this.qu(`length string (${e}) is not valid number`);const s=await this.Uu(i);return new fL(JSON.parse(s),t.length+i)}$u(){return this.buffer.findIndex((t=>t===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Uu(t){for(;this.buffer.length<t;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const e=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Wu(){const t=await this.Bu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}let BL=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new St(ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await(async function(s,o){const c=Gt(s),f={documents:o.map((b=>f_(c.serializer,b)))},m=await c.jo("BatchGetDocuments",c.serializer.databaseId,Ve.emptyPath(),f,o.length),g=new Map;m.forEach((b=>{const A=WV(c.serializer,b);g.set(A.key.toString(),A)}));const E=[];return o.forEach((b=>{const A=g.get(b.toString());Xt(!!A,55234,{key:b}),E.push(A)})),E})(this.datastore,t);return e.forEach((i=>this.recordVersion(i))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Pp(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((e,i)=>{const s=Ut.fromPath(i);this.mutations.push(new US(s,this.precondition(s)))})),await(async function(i,s){const o=Gt(i),c={writes:s.map((f=>d_(o.serializer,f)))};await o.Wo("Commit",o.serializer.databaseId,Ve.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ft(50498,{Gu:t.constructor.name});e=Zt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new St(ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Zt.min())?Jn.exists(!1):Jn.updateTime(e):Jn.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Zt.min()))throw new St(ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(e)}return Jn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};class GL{constructor(t,e,i,s,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=s,this.deferred=o,this.zu=i.maxAttempts,this.M_=new tb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const t=new BL(this.datastore),e=this.Ju(t);e&&e.then((i=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Zu(s)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(t){try{const e=this.updateFunction(t);return!R_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(t){this.zu>0&&this.Xu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(t)}Xu(t){if(t?.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!JR(e)}return!1}}const Uh="FirestoreClient";class HL{constructor(t,e,i,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=s,this.user=us.UNAUTHENTICATED,this.clientId=AS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{wt(Uh,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(wt(Uh,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Up(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function GE(n,t){n.asyncQueue.verifyOperationInProgress(),wt(Uh,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await DC(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function b5(n,t){n.asyncQueue.verifyOperationInProgress();const e=await mb(n);wt(Uh,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>p5(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>p5(t.remoteStore,s))),n._onlineComponents=t}async function mb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){wt(Uh,"Using user provided OfflineComponentProvider");try{await GE(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===ft.FAILED_PRECONDITION||s.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Zo("Error using user provided cache. Falling back to memory cache: "+e),await GE(n,new m_)}}else wt(Uh,"Using default OfflineComponentProvider"),await GE(n,new LL(void 0));return n._offlineComponents}async function o2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(wt(Uh,"Using user provided OnlineComponentProvider"),await b5(n,n._uninitializedComponentsProvider._online)):(wt(Uh,"Using default OnlineComponentProvider"),await b5(n,new p_))),n._onlineComponents}function n8(n){return mb(n).then((t=>t.persistence))}function pb(n){return mb(n).then((t=>t.localStore))}function i8(n){return o2(n).then((t=>t.remoteStore))}function gb(n){return o2(n).then((t=>t.syncEngine))}function qL(n){return o2(n).then((t=>t.datastore))}async function bp(n){const t=await o2(n),e=t.eventManager;return e.onListen=_L.bind(null,t.syncEngine),e.onUnlisten=vL.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=yL.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=EL.bind(null,t.syncEngine),e}function FL(n){return n.asyncQueue.enqueue((async()=>{const t=await n8(n),e=await i8(n);return t.setNetworkEnabled(!0),(function(s){const o=Gt(s);return o.Ea.delete(0),V_(o)})(e)}))}function jL(n){return n.asyncQueue.enqueue((async()=>{const t=await n8(n),e=await i8(n);return t.setNetworkEnabled(!1),(async function(s){const o=Gt(s);o.Ea.add(0),await Vp(o),o.Va.set("Offline")})(e)}))}function KL(n,t,e,i){const s=new r2(i),o=new lb(t,s,e);return n.asyncQueue.enqueueAndForget((async()=>ab(await bp(n),o))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>rb(await bp(n),o)))}}function YL(n,t){const e=new Os;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await(function(g,E){const b=Gt(g);return b.persistence.runTransaction("read document","readonly",(A=>b.localDocuments.getDocument(A,E)))})(s,o);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new St(ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Up(f,`Failed to get document '${o} from cache`);c.reject(m)}})(await pb(n),t,e))),e.promise}function s8(n,t,e={}){const i=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new r2({next:A=>{E.Nu(),c.enqueueAndForget((()=>rb(o,b)));const N=A.docs.has(f);!N&&A.fromCache?g.reject(new St(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&m&&m.source==="server"?g.reject(new St(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new lb(Op(f.path),E,{includeMetadataChanges:!0,Ka:!0});return ab(o,b)})(await bp(n),n.asyncQueue,t,e,i))),i.promise}function QL(n,t){const e=new Os;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,c){try{const f=await gv(s,o,!0),m=new JC(o,f.ks),g=m.ru(f.documents),E=m.applyChanges(g,!1);c.resolve(E.snapshot)}catch(f){const m=Up(f,`Failed to execute query '${o} against cache`);c.reject(m)}})(await pb(n),t,e))),e.promise}function a8(n,t,e={}){const i=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,m,g){const E=new r2({next:A=>{E.Nu(),c.enqueueAndForget((()=>rb(o,b))),A.fromCache&&m.source==="server"?g.reject(new St(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new lb(f,E,{includeMetadataChanges:!0,Ka:!0});return ab(o,b)})(await bp(n),n.asyncQueue,t,e,i))),i.promise}function XL(n,t){const e=new Os;return n.asyncQueue.enqueueAndForget((async()=>TL(await gb(n),t,e))),e.promise}function JL(n,t){const e=new r2(t);return n.asyncQueue.enqueueAndForget((async()=>(function(s,o){Gt(s).Ca.add(o),o.next()})(await bp(n),e))),()=>{e.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,o){Gt(s).Ca.delete(o)})(await bp(n),e)))}}function WL(n,t,e){const i=new Os;return n.asyncQueue.enqueueAndForget((async()=>{const s=await qL(n);new GL(n.asyncQueue,s,e,t,i).ju()})),i.promise}function ZL(n,t,e,i){const s=(function(c,f){let m;return m=typeof c=="string"?ZR().encode(c):c,(function(E,b){return new zL(E,b)})((function(E,b){if(E instanceof Uint8Array)return S5(E,b);if(E instanceof ArrayBuffer)return S5(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(e,P_(t));n.asyncQueue.enqueueAndForget((async()=>{kL(await gb(n),s,i)}))}function $L(n,t){return n.asyncQueue.enqueue((async()=>(function(i,s){const o=Gt(i);return o.persistence.runTransaction("Get named query","readonly",(c=>o.Pi.getNamedQuery(c,s)))})(await pb(n),t)))}function r8(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const tU="ComponentProvider",A5=new Map;function eU(n,t,e,i,s){return new pV(n,t,e,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,r8(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}const o8="firestore.googleapis.com",w5=!0;class R5{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new St(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o8,this.ssl=w5}else this.host=t.host,this.ssl=t.ssl??w5;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=yC;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gk)throw new St(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$w("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r8(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new St(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new St(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new St(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class k_{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R5(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new CP;switch(i.type){case"firstParty":return new xP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new St(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=A5.get(e);i&&(wt(tU,"Removing Datastore"),A5.delete(e),i.terminate())})(this),Promise.resolve()}}function nU(n,t,e,i={}){n=Xe(n,k_);const s=iu(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${t}:${e}`;s&&(Bv(`https://${f}`),Gv("Firestore",!0)),o.host!==o8&&o.host!==f&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:f,ssl:s,emulatorOptions:i};if(!Nh(m,c)&&(n._setSettings(m),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=us.MOCK_USER;else{g=Rw(i.mockUserToken,n._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new St(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new us(b)}n._authCredentials=new IP(new Ww(g,E))}}let Aa=class l8{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new l8(this.firestore,t,this._query)}},In=class O0{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ch(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new O0(this.firestore,t,this._key)}toJSON(){return{type:O0._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(w_(e,O0._jsonSchema))return new O0(t,i||null,new Ut(Ve.fromString(e.referencePath)))}};In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Ui("string",In._jsonSchemaVersion),referencePath:Ui("string")};let Ch=class u8 extends Aa{constructor(t,e,i){super(t,e,Op(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new In(this.firestore,null,new Ut(t))}withConverter(t){return new u8(this.firestore,t,this._path)}};function _b(n,t,...e){if(n=jt(n),wS("collection","path",t),n instanceof k_){const i=Ve.fromString(t,...e);return m3(i),new Ch(n,null,i)}{if(!(n instanceof In||n instanceof Ch))throw new St(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(t,...e));return m3(i),new Ch(n.firestore,null,i)}}function iU(n,t){if(n=Xe(n,k_),wS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new St(ft.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Aa(n,null,(function(i){return new rc(Ve.emptyPath(),i)})(t))}function Ev(n,t,...e){if(n=jt(n),arguments.length===1&&(t=AS.newId()),wS("doc","path",t),n instanceof k_){const i=Ve.fromString(t,...e);return d3(i),new In(n,null,new Ut(i))}{if(!(n instanceof In||n instanceof Ch))throw new St(ft.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(t,...e));return d3(i),new In(n.firestore,n instanceof Ch?n.converter:null,new Ut(i))}}function c8(n,t){return n=jt(n),t=jt(t),(n instanceof In||n instanceof Ch)&&(t instanceof In||t instanceof Ch)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function h8(n,t){return n=jt(n),t=jt(t),n instanceof Aa&&t instanceof Aa&&n.firestore===t.firestore&&N_(n._query,t._query)&&n.converter===t.converter}const C5="AsyncQueue";class I5{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tb(this,"async_queue_retry"),this._c=()=>{const i=Q1();i&&wt(C5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Q1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Q1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Kh(t))throw t;wt(C5,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Si("INTERNAL UNHANDLED ERROR: ",N5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=sb.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ft(47125,{Pc:N5(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function N5(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class sU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Os,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const aU=-1;let Ai=class extends k_{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new I5,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new I5(t),this._firestoreClient=void 0,await t}}};function $s(n){if(n._terminated)throw new St(ft.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f8(n),n._firestoreClient}function f8(n){const t=n._freezeSettings(),e=eU(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new HL(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}function rU(n,t){Zo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();return d8(n,p_.provider,{build:i=>new e8(i,e.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}async function oU(n){Zo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();d8(n,p_.provider,{build:e=>new UL(e,t.cacheSizeBytes)})}function d8(n,t,e){if((n=Xe(n,Ai))._firestoreClient||n._terminated)throw new St(ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new St(ft.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:t,_offline:e},f8(n)}function lU(n){if(n._initialized&&!n._terminated)throw new St(ft.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Os;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Jl.v())return Promise.resolve();const s=i+CC;await Jl.delete(s)})(JS(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function uU(n){return(function(e){const i=new Os;return e.asyncQueue.enqueueAndForget((async()=>wL(await gb(e),i))),i.promise})($s(n=Xe(n,Ai)))}function cU(n){return FL($s(n=Xe(n,Ai)))}function hU(n){return jL($s(n=Xe(n,Ai)))}function fU(n,t){const e=$s(n=Xe(n,Ai)),i=new sU;return ZL(e,n._databaseId,t,i),i}function dU(n,t){return $L($s(n=Xe(n,Ai)),t).then((e=>e?new Aa(n,null,e.query):null))}class Js{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Js(mi.fromBase64String(t))}catch(e){throw new St(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Js(mi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(w_(t,Js._jsonSchema))return Js.fromBase64String(t.bytes)}}Js._jsonSchemaVersion="firestore/bytes/1.0",Js._jsonSchema={type:Ui("string",Js._jsonSchemaVersion),bytes:Ui("string")};let fd=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new St(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};let Id=class{constructor(t){this._methodName=t}};class Xo{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new St(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new St(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return he(this._lat,t._lat)||he(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xo._jsonSchemaVersion}}static fromJSON(t){if(w_(t,Xo._jsonSchema))return new Xo(t.latitude,t.longitude)}}Xo._jsonSchemaVersion="firestore/geoPoint/1.0",Xo._jsonSchema={type:Ui("string",Xo._jsonSchemaVersion),latitude:Ui("number"),longitude:Ui("number")};class Jo{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Jo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(w_(t,Jo._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Jo(t.vectorValues);throw new St(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jo._jsonSchemaVersion="firestore/vectorValue/1.0",Jo._jsonSchema={type:Ui("string",Jo._jsonSchemaVersion),vectorValues:Ui("object")};const mU=/^__.*__$/;class pU{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new lc(t,this.data,this.fieldMask,e,this.fieldTransforms):new Mp(t,this.data,e,this.fieldTransforms)}}class m8{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new lc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function p8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{dataSource:n})}}class l2{constructor(t,e,i,s,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new l2({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){const e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Tv(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(p8(this.dataSource)&&mU.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class gU{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||P_(t)}createContext(t,e,i,s=!1){return new l2({dataSource:t,methodName:e,targetDoc:i,path:Xn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nd(n){const t=n._freezeSettings(),e=P_(n._databaseId);return new gU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function u2(n,t,e,i,s,o={}){const c=n.createContext(o.merge||o.mergeFields?2:0,t,e,s);Ab("Data must be an object, but it was:",c,i);const f=y8(i,c);let m,g;if(o.merge)m=new er(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const b of o.mergeFields){const A=dd(t,b,e);if(!c.contains(A))throw new St(ft.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);T8(E,A)||E.push(A)}m=new er(E),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new pU(new xs(f),m,g)}class L_ extends Id{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof L_}}function g8(n,t,e){return new l2({dataSource:3,targetDoc:t.settings.targetDoc,methodName:n._methodName,arrayElement:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class yb extends Id{_toFieldTransform(t){return new x_(t.path,new pp)}isEqual(t){return t instanceof yb}}class vb extends Id{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=g8(this,t,!0),i=this.Ac.map((o=>Dd(o,e))),s=new rd(i);return new x_(t.path,s)}isEqual(t){return t instanceof vb&&Nh(this.Ac,t.Ac)}}class Eb extends Id{constructor(t,e){super(t),this.Ac=e}_toFieldTransform(t){const e=g8(this,t,!0),i=this.Ac.map((o=>Dd(o,e))),s=new od(i);return new x_(t.path,s)}isEqual(t){return t instanceof Eb&&Nh(this.Ac,t.Ac)}}class Tb extends Id{constructor(t,e){super(t),this.Vc=e}_toFieldTransform(t){const e=new gp(t.serializer,qR(t.serializer,this.Vc));return new x_(t.path,e)}isEqual(t){return t instanceof Tb&&this.Vc===t.Vc}}function Sb(n,t,e,i){const s=n.createContext(1,t,e);Ab("Data must be an object, but it was:",s,i);const o=[],c=xs.empty();Yh(i,((m,g)=>{const E=E8(t,m,e);g=jt(g);const b=s.childContextForFieldPath(E);if(g instanceof L_)o.push(E);else{const A=Dd(g,b);A!=null&&(o.push(E),c.set(E,A))}}));const f=new er(o);return new m8(c,f,s.fieldTransforms)}function bb(n,t,e,i,s,o){const c=n.createContext(1,t,e),f=[dd(t,i,e)],m=[s];if(o.length%2!=0)throw new St(ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)f.push(dd(t,o[A])),m.push(o[A+1]);const g=[],E=xs.empty();for(let A=f.length-1;A>=0;--A)if(!T8(g,f[A])){const N=f[A];let D=m[A];D=jt(D);const k=c.childContextForFieldPath(N);if(D instanceof L_)g.push(N);else{const U=Dd(D,k);U!=null&&(g.push(N),E.set(N,U))}}const b=new er(g);return new m8(E,b,c.fieldTransforms)}function _8(n,t,e,i=!1){return Dd(e,n.createContext(i?4:3,t))}function Dd(n,t){if(v8(n=jt(n)))return Ab("Unsupported field value:",t,n),y8(n,t);if(n instanceof Id)return(function(i,s){if(!p8(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,s){const o=[];let c=0;for(const f of i){let m=Dd(f,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,s){if((i=jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=an.fromDate(i);return{timestampValue:_p(s.serializer,o)}}if(i instanceof an){const o=new an(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_p(s.serializer,o)}}if(i instanceof Xo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Js)return{bytesValue:eC(s.serializer,i._byteString)};if(i instanceof In){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Jo)return(function(c,f){const m=c instanceof Jo?c.toArray():c;return{mapValue:{fields:{[OS]:{stringValue:MS},[fp]:{arrayValue:{values:m.map((E=>{if(typeof E!="number")throw f.createError("VectorValues must only contain numeric values.");return LS(f.serializer,E)}))}}}}}})(i,s);if(dC(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${jv(i)}`)})(n,t)}function y8(n,t){const e={};return yR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yh(n,((i,s)=>{const o=Dd(s,t.childContextForField(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function v8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof an||n instanceof Xo||n instanceof Js||n instanceof In||n instanceof Id||n instanceof Jo||dC(n))}function Ab(n,t,e){if(!v8(e)||!tR(e)){const i=jv(e);throw i==="an object"?t.createError(n+" a custom object"):t.createError(n+" "+i)}}function dd(n,t,e){if((t=jt(t))instanceof fd)return t._internalPath;if(typeof t=="string")return E8(n,t);throw Tv("Field path arguments must be of type string or ",n,!1,void 0,e)}const _U=new RegExp("[~\\*/\\[\\]]");function E8(n,t,e){if(t.search(_U)>=0)throw Tv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new fd(...t.split("."))._internalPath}catch{throw Tv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Tv(n,t,e,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new St(ft.INVALID_ARGUMENT,f+n+m)}function T8(n,t){return n.some((e=>e.isEqual(t)))}class wb{convertValue(t,e="none"){switch(Ph(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(tc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ft(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Yh(t,((s,o)=>{i[s]=this.convertValue(o,e)})),i}convertVectorValue(t){const e=t.fields?.[fp].arrayValue?.values?.map((i=>Qn(i.doubleValue)));return new Jo(e)}convertGeoPoint(t){return new Xo(Qn(t.latitude),Qn(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Wv(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(l_(t));default:return null}}convertTimestamp(t){const e=$u(t);return new an(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Ve.fromString(t);Xt(fC(i),9688,{name:t});const s=new Mh(i.get(1),i.get(3)),o=new Ut(i.popFirst(5));return s.isEqual(e)||Si(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}class xd extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Js(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,e)}}function yU(){return new L_("deleteField")}function vU(){return new yb("serverTimestamp")}function EU(...n){return new vb("arrayUnion",n)}function TU(...n){return new Eb("arrayRemove",n)}function SU(n){return new Tb("increment",n)}const D5="@firebase/firestore",x5="4.11.0";function jT(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class g_{constructor(t,e,i,s,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new bU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(dd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class bU extends g_{data(){return super.data()}}function S8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rb{}class U_ extends Rb{}function ph(n,t,...e){let i=[];t instanceof Rb&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((m=>m instanceof Cb)).length,f=o.filter((m=>m instanceof c2)).length;if(c>1||c>0&&f>0)throw new St(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class c2 extends U_{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new c2(t,e,i)}_apply(t){const e=this._parse(t);return A8(t._query,e),new Aa(t.firestore,t.converter,OT(t._query,e))}_parse(t){const e=Nd(t.firestore);return(function(o,c,f,m,g,E,b){let A;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new St(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){M5(b,E);const D=[];for(const k of b)D.push(O5(m,o,k));A={arrayValue:{values:D}}}else A=O5(m,o,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||M5(b,E),A=_8(f,c,b,E==="in"||E==="not-in");return ze.create(g,E,A)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function AU(n,t,e){const i=t,s=dd("where",n);return c2._create(s,i,e)}class Cb extends Rb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Cb(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:on.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,o){let c=s;const f=o.getFlattenedFilters();for(const m of f)A8(c,m),c=OT(c,m)})(t._query,e),new Aa(t.firestore,t.converter,OT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ib extends U_{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ib(t,e)}_apply(t){const e=(function(s,o,c){if(s.startAt!==null)throw new St(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new St(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new h_(o,c)})(t._query,this._field,this._direction);return new Aa(t.firestore,t.converter,NV(t._query,e))}}function wU(n,t="asc"){const e=t,i=dd("orderBy",n);return Ib._create(i,e)}class h2 extends U_{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new h2(t,e,i)}_apply(t){return new Aa(t.firestore,t.converter,hv(t._query,this._limit,this._limitType))}}function RU(n){return eR("limit",n),h2._create("limit",n,"F")}function CU(n){return eR("limitToLast",n),h2._create("limitToLast",n,"L")}class f2 extends U_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new f2(t,e,i)}_apply(t){const e=b8(t,this.type,this._docOrFields,this._inclusive);return new Aa(t.firestore,t.converter,DV(t._query,e))}}function IU(...n){return f2._create("startAt",n,!0)}function NU(...n){return f2._create("startAfter",n,!1)}class d2 extends U_{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new d2(t,e,i)}_apply(t){const e=b8(t,this.type,this._docOrFields,this._inclusive);return new Aa(t.firestore,t.converter,xV(t._query,e))}}function DU(...n){return d2._create("endBefore",n,!1)}function xU(...n){return d2._create("endAt",n,!0)}function b8(n,t,e,i){if(e[0]=jt(e[0]),e[0]instanceof g_)return(function(o,c,f,m,g){if(!m)throw new St(ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const E=[];for(const b of Ym(o))if(b.field.isKeyField())E.push(sd(c,m.key));else{const A=m.data.field(b.field);if(Jv(A))throw new St(ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const N=b.field.canonicalString();throw new St(ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(A)}return new kh(E,g)})(n._query,n.firestore._databaseId,t,e[0]._document,i);{const s=Nd(n.firestore);return(function(c,f,m,g,E,b){const A=c.explicitOrderBy;if(E.length>A.length)throw new St(ft.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let D=0;D<E.length;D++){const k=E[D];if(A[D].field.isKeyField()){if(typeof k!="string")throw new St(ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof k}`);if(!VS(c)&&k.indexOf("/")!==-1)throw new St(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${k}' contains a slash.`);const U=c.path.child(Ve.fromString(k));if(!Ut.isDocumentKey(U))throw new St(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const F=new Ut(U);N.push(sd(f,F))}else{const U=_8(m,g,k);N.push(U)}}return new kh(N,b)})(n._query,n.firestore._databaseId,s,t,e,i)}}function O5(n,t,e){if(typeof(e=jt(e))=="string"){if(e==="")throw new St(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VS(t)&&e.indexOf("/")!==-1)throw new St(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Ve.fromString(e));if(!Ut.isDocumentKey(i))throw new St(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return sd(n,new Ut(i))}if(e instanceof In)return sd(n,e._key);throw new St(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jv(e)}.`)}function M5(n,t){if(!Array.isArray(n)||n.length===0)throw new St(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function A8(n,t){const e=(function(s,o){for(const c of s)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new St(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new St(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function m2(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class OU extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Js(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,e)}}class Xf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let yo=class w8 extends g_{constructor(t,e,i,s,o,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(dd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=w8._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:Ui("string",yo._jsonSchemaVersion),bundleSource:Ui("string","DocumentSnapshot"),bundleName:Ui("string"),bundle:Ui("string")};let Y0=class extends yo{data(t={}){return super.data(t)}},Wo=class R8{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Xf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Y0(this._firestore,this._userDataWriter,i.key,i,new Xf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new St(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new Y0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Xf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const m=new Y0(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Xf(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,E=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),E=c.indexOf(f.doc.key)),{type:MU(f.type),doc:m,oldIndex:g,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=R8._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=AS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function MU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:n})}}function C8(n,t){return n instanceof yo&&t instanceof yo?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Wo&&t instanceof Wo&&n._firestore===t._firestore&&h8(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:Ui("string",Wo._jsonSchemaVersion),bundleSource:Ui("string","QuerySnapshot"),bundleName:Ui("string"),bundle:Ui("string")};const PU={maxAttempts:5};let VU=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Nd(t)}set(t,e,i){this._verifyNotCommitted();const s=bh(t,this._firestore),o=m2(s.converter,e,i),c=u2(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Jn.none())),this}update(t,e,i,...s){this._verifyNotCommitted();const o=bh(t,this._firestore);let c;return c=typeof(e=jt(e))=="string"||e instanceof fd?bb(this._dataReader,"WriteBatch.update",o._key,e,i,s):Sb(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Jn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=bh(t,this._firestore);return this._mutations=this._mutations.concat(new Pp(e._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new St(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function bh(n,t){if((n=jt(n)).firestore!==t)throw new St(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class kU{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Nd(t)}get(t){const e=bh(t,this._firestore),i=new OU(this._firestore);return this._transaction.lookup([e._key]).then((s=>{if(!s||s.length!==1)return Ft(24041);const o=s[0];if(o.isFoundDocument())return new g_(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new g_(this._firestore,i,e._key,null,e.converter);throw Ft(18433,{doc:o})}))}set(t,e,i){const s=bh(t,this._firestore),o=m2(s.converter,e,i),c=u2(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(t,e,i,...s){const o=bh(t,this._firestore);let c;return c=typeof(e=jt(e))=="string"||e instanceof fd?bb(this._dataReader,"Transaction.update",o._key,e,i,s):Sb(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=bh(t,this._firestore);return this._transaction.delete(e._key),this}}let LU=class extends kU{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=bh(t,this._firestore),i=new xd(this._firestore);return super.get(t).then((s=>new yo(this._firestore,i,e._key,s._document,new Xf(!1,!1),e.converter)))}};function UU(n,t,e){n=Xe(n,Ai);const i={...PU,...e};(function(c){if(c.maxAttempts<1)throw new St(ft.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const s=$s(n);return WL(s,(o=>t(new LU(n,o))),i)}function zU(n){n=Xe(n,In);const t=Xe(n.firestore,Ai),e=$s(t);return s8(e,n._key).then((i=>Nb(t,n,i)))}function BU(n){n=Xe(n,In);const t=Xe(n.firestore,Ai),e=$s(t),i=new xd(t);return YL(e,n._key).then((s=>new yo(t,i,n._key,s,new Xf(s!==null&&s.hasLocalMutations,!0),n.converter)))}function GU(n){n=Xe(n,In);const t=Xe(n.firestore,Ai),e=$s(t);return s8(e,n._key,{source:"server"}).then((i=>Nb(t,n,i)))}function I8(n){n=Xe(n,Aa);const t=Xe(n.firestore,Ai),e=$s(t),i=new xd(t);return S8(n._query),a8(e,n._query).then((s=>new Wo(t,i,n,s)))}function HU(n){n=Xe(n,Aa);const t=Xe(n.firestore,Ai),e=$s(t),i=new xd(t);return QL(e,n._query).then((s=>new Wo(t,i,n,s)))}function qU(n){n=Xe(n,Aa);const t=Xe(n.firestore,Ai),e=$s(t),i=new xd(t);return a8(e,n._query,{source:"server"}).then((s=>new Wo(t,i,n,s)))}function P5(n,t,e){n=Xe(n,In);const i=Xe(n.firestore,Ai),s=m2(n.converter,t,e),o=Nd(i);return z_(i,[u2(o,"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,Jn.none())])}function V5(n,t,e,...i){n=Xe(n,In);const s=Xe(n.firestore,Ai),o=Nd(s);let c;return c=typeof(t=jt(t))=="string"||t instanceof fd?bb(o,"updateDoc",n._key,t,e,i):Sb(o,"updateDoc",n._key,t),z_(s,[c.toMutation(n._key,Jn.exists(!0))])}function FU(n){return z_(Xe(n.firestore,Ai),[new Pp(n._key,Jn.none())])}function jU(n,t){const e=Xe(n.firestore,Ai),i=Ev(n),s=m2(n.converter,t),o=Nd(n.firestore);return z_(e,[u2(o,"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Jn.exists(!1))]).then((()=>i))}function N8(n,...t){n=jt(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||jT(t[i])||(e=t[i++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(jT(t[i])){const g=t[i];t[i]=g.next?.bind(g),t[i+1]=g.error?.bind(g),t[i+2]=g.complete?.bind(g)}let o,c,f;if(n instanceof In)c=Xe(n.firestore,Ai),f=Op(n._key.path),o={next:g=>{t[i]&&t[i](Nb(c,n,g))},error:t[i+1],complete:t[i+2]};else{const g=Xe(n,Aa);c=Xe(g.firestore,Ai),f=g._query;const E=new xd(c);o={next:b=>{t[i]&&t[i](new Wo(c,E,g,b))},error:t[i+1],complete:t[i+2]},S8(n._query)}const m=$s(c);return KL(m,f,s,o)}function KU(n,t){n=Xe(n,Ai);const e=$s(n),i=jT(t)?t:{next:t};return JL(e,i)}function z_(n,t){const e=$s(n);return XL(e,t)}function Nb(n,t,e){const i=e.docs.get(t._key),s=new xd(n);return new yo(n,s,t._key,i,new Xf(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){AP(ac),ba(new Bi("firestore",((i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),f=new Ai(new NP(i.getProvider("auth-internal")),new OP(c,i.getProvider("app-check-internal")),gV(c,s),c);return o={useFetchStreams:e,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Wi(D5,x5,t),Wi(D5,x5,"esm2020")})();class YU{constructor(t,e){this._delegate=t,this.firebase=e,e_(t,new Bi("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),SS(this._delegate)))}_getService(t,e=Dh){this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=Dh){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){e_(this._delegate,t)}_addOrOverwriteComponent(t){Lw(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const QU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},k5=new su("app-compat","Firebase",QU);function XU(n){const t={},e={__esModule:!0,initializeApp:o,app:s,registerVersion:Wi,setLogLevel:Gw,onLog:Bw,apps:null,SDK_VERSION:ac,INTERNAL:{registerComponent:f,removeApp:i,useAsService:m,modularAPIs:bP}};e.default=e,Object.defineProperty(e,"apps",{get:c});function i(g){delete t[g]}function s(g){if(g=g||Dh,!e3(t,g))throw k5.create("no-app",{appName:g});return t[g]}s.App=n;function o(g,E={}){const b=TS(g,E);if(e3(t,b.name))return t[b.name];const A=new n(b,e);return t[b.name]=A,A}function c(){return Object.keys(t).map(g=>t[g])}function f(g){const E=g.name,b=E.replace("-compat","");if(ba(g)&&g.type==="PUBLIC"){const A=(N=s())=>{if(typeof N[b]!="function")throw k5.create("invalid-app-argument",{appName:E});return N[b]()};g.serviceProps!==void 0&&iv(A,g.serviceProps),e[b]=A,n.prototype[b]=function(...N){return this._getService.bind(this,E).apply(this,g.multipleInstances?N:[])}}return g.type==="PUBLIC"?e[b]:null}function m(g,E){return E==="serverAuth"?null:E}return e}function D8(){const n=XU(YU);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:D8,extendNamespace:t,createSubscribe:Ow,ErrorFactory:su,deepExtend:iv};function t(e){iv(n,e)}return n}const JU=D8();const L5=new qv("@firebase/app-compat"),WU="@firebase/app-compat",ZU="0.5.8";function $U(n){Wi(WU,ZU,n)}try{const n=mS();if(n.firebase!==void 0){L5.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=n.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&L5.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Eo=JU;$U();var tz="firebase",ez="12.9.0";Eo.registerVersion(tz,ez,"app-compat");const _0={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Lm={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function nz(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function x8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iz=nz,sz=x8,O8=new su("auth","Firebase",x8());const Sv=new qv("@firebase/auth");function az(n,...t){Sv.logLevel<=Pe.WARN&&Sv.warn(`Auth (${ac}): ${n}`,...t)}function X1(n,...t){Sv.logLevel<=Pe.ERROR&&Sv.error(`Auth (${ac}): ${n}`,...t)}function Ms(n,...t){throw xb(n,...t)}function Zi(n,...t){return xb(n,...t)}function Db(n,t,e){const i={...sz(),[t]:e};return new su("auth","Firebase",i).create(t,{appName:n.name})}function cs(n){return Db(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zp(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&Ms(n,"argument-error"),Db(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xb(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return O8.create(n,...t)}function Dt(n,t,...e){if(!n)throw xb(t,...e)}function Xl(n){const t="INTERNAL ASSERTION FAILED: "+n;throw X1(t),new Error(t)}function $o(n,t){n||Xl(t)}function __(){return typeof self<"u"&&self.location?.href||""}function Ob(){return U5()==="http:"||U5()==="https:"}function U5(){return typeof self<"u"&&self.location?.protocol||null}function rz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ob()||Iw()||"connection"in navigator)?navigator.onLine:!0}function oz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class B_{constructor(t,e){this.shortDelay=t,this.longDelay=e,$o(e>t,"Short delay should be less than long delay!"),this.isMobile=eM()||_S()}get(){return rz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mb(n,t){$o(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class M8{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cz=new B_(3e4,6e4);function pi(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function gi(n,t,e,i,s={}){return P8(n,s,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const f=Np({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:t,headers:m,...o};return iM()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&iu(n.emulatorConfig.host)&&(g.credentials="include"),M8.fetch()(await V8(n,n.config.apiHost,e,f),g)})}async function P8(n,t,e){n._canInitEmulator=!1;const i={...lz,...t};try{const s=new fz(n),o=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw M0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw M0(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw M0(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw M0(n,"user-disabled",c);const E=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Db(n,E,g);Ms(n,E)}}catch(s){if(s instanceof zi)throw s;Ms(n,"network-request-failed",{message:String(s)})}}async function cc(n,t,e,i,s={}){const o=await gi(n,t,e,i,s);return"mfaPendingCredential"in o&&Ms(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function V8(n,t,e,i){const s=`${t}${e}?${i}`,o=n,c=o.config.emulator?Mb(n.config,s):`${n.config.apiScheme}://${s}`;return uz.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function hz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Zi(this.auth,"network-request-failed")),cz.get())})}}function M0(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Zi(n,t,i);return s.customData._tokenResponse=e,s}function z5(n){return n!==void 0&&n.getResponse!==void 0}function B5(n){return n!==void 0&&n.enterprise!==void 0}class k8{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return hz(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dz(n){return(await gi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function L8(n,t){return gi(n,"GET","/v2/recaptchaConfig",pi(n,t))}async function mz(n,t){return gi(n,"POST","/v1/accounts:delete",t)}async function pz(n,t){return gi(n,"POST","/v1/accounts:update",t)}async function bv(n,t){return gi(n,"POST","/v1/accounts:lookup",t)}function Q0(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function gz(n,t=!1){const e=jt(n),i=await e.getIdToken(t),s=p2(i);Dt(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:Q0(HE(s.auth_time)),issuedAtTime:Q0(HE(s.iat)),expirationTime:Q0(HE(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function HE(n){return Number(n)*1e3}function p2(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return X1("JWT malformed, contained fewer than 3 sections"),null;try{const s=dS(e);return s?JSON.parse(s):(X1("Failed to decode base64 JWT payload"),null)}catch(s){return X1("Caught error parsing JWT payload as JSON",s?.toString()),null}}function G5(n){const t=p2(n);return Dt(t,"internal-error"),Dt(typeof t.exp<"u","internal-error"),Dt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function ec(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof zi&&_z(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function _z({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class yz{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class KT{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q0(this.lastLoginAt),this.creationTime=Q0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function y_(n){const t=n.auth,e=await n.getIdToken(),i=await ec(n,bv(t,{idToken:e}));Dt(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?U8(s.providerUserInfo):[],c=Ez(n.providerData,o),f=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!c?.length,g=f?m:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new KT(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,E)}async function vz(n){const t=jt(n);await y_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ez(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function U8(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function Tz(n,t){const e=await P8(n,{},async()=>{const i=Np({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=await V8(n,s,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&iu(n.emulatorConfig.host)&&(m.credentials="include"),M8.fetch()(c,m)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function Sz(n,t){return gi(n,"POST","/v2/accounts:revokeToken",pi(n,t))}class Jm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dt(t.idToken,"internal-error"),Dt(typeof t.idToken<"u","internal-error"),Dt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):G5(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Dt(t.length!==0,"internal-error");const e=G5(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:o}=await Tz(t,e);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:o}=e,c=new Jm;return i&&(Dt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(Dt(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),o&&(Dt(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jm,this.toJSON())}_performRefresh(){return Xl("not implemented")}}function gh(n,t){Dt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Qo{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new yz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new KT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await ec(this,this.stsTokenManager.getToken(this.auth,t));return Dt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return gz(this,t)}reload(){return vz(this)}_assign(t){this!==t&&(Dt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Qo({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await y_(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(cs(this.auth));const t=await this.getIdToken();return await ec(this,mz(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,f=e.tenantId??void 0,m=e._redirectEventId??void 0,g=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:N,providerData:D,stsTokenManager:k}=e;Dt(b&&k,t,"internal-error");const U=Jm.fromJSON(this.name,k);Dt(typeof b=="string",t,"internal-error"),gh(i,t.name),gh(s,t.name),Dt(typeof A=="boolean",t,"internal-error"),Dt(typeof N=="boolean",t,"internal-error"),gh(o,t.name),gh(c,t.name),gh(f,t.name),gh(m,t.name),gh(g,t.name),gh(E,t.name);const F=new Qo({uid:b,auth:t,email:s,emailVerified:A,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:U,createdAt:g,lastLoginAt:E});return D&&Array.isArray(D)&&(F.providerData=D.map(j=>({...j}))),m&&(F._redirectEventId=m),F}static async _fromIdTokenResponse(t,e,i=!1){const s=new Jm;s.updateFromServerResponse(e);const o=new Qo({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await y_(o),o}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Dt(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?U8(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,f=new Jm;f.updateFromIdToken(i);const m=new Qo({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new KT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(m,g),m}}const H5=new Map;function Cr(n){$o(n instanceof Function,"Expected a class definition");let t=H5.get(n);return t?($o(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,H5.set(n,t),t)}class z8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}z8.type="NONE";const Ap=z8;function td(n,t,e){return`firebase:${n}:${t}:${e}`}class Wm{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=td(this.userKey,s.apiKey,o),this.fullPersistenceKey=td("persistence",s.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await bv(this.auth,{idToken:t}).catch(()=>{});return e?Qo._fromGetAccountInfoResponse(this.auth,e,t):null}return Qo._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Wm(Cr(Ap),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=s[0]||Cr(Ap);const c=td(i,t.config.apiKey,t.name);let f=null;for(const g of e)try{const E=await g._get(c);if(E){let b;if(typeof E=="string"){const A=await bv(t,{idToken:E}).catch(()=>{});if(!A)break;b=await Qo._fromGetAccountInfoResponse(t,A,E)}else b=Qo._fromJSON(t,E);g!==o&&(f=b),o=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Wm(o,t,i):(o=m[0],f&&await o._set(c,f.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new Wm(o,t,i))}}function q5(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(q8(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(B8(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(F8(t))return"Blackberry";if(j8(t))return"Webos";if(G8(t))return"Safari";if((t.includes("chrome/")||H8(t))&&!t.includes("edge/"))return"Chrome";if(G_(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function B8(n=si()){return/firefox\//i.test(n)}function G8(n=si()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function H8(n=si()){return/crios\//i.test(n)}function q8(n=si()){return/iemobile/i.test(n)}function G_(n=si()){return/android/i.test(n)}function F8(n=si()){return/blackberry/i.test(n)}function j8(n=si()){return/webos/i.test(n)}function H_(n=si()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bz(n=si()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Az(n=si()){return H_(n)&&!!window.navigator?.standalone}function wz(){return Nw()&&document.documentMode===10}function K8(n=si()){return H_(n)||G_(n)||j8(n)||F8(n)||/windows phone/i.test(n)||q8(n)}function Y8(n,t=[]){let e;switch(n){case"Browser":e=q5(si());break;case"Worker":e=`${q5(si())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ac}/${i}`}class Rz{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,f)=>{try{const m=t(o);c(m)}catch(m){f(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Cz(n,t={}){return gi(n,"GET","/v2/passwordPolicy",pi(n,t))}const Iz=6;class Nz{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??Iz,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}class Dz{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F5(this),this.idTokenSubscription=new F5(this),this.beforeStateQueue=new Rz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Cr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wm.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await bv(this,{idToken:t}),i=await Qo._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(t);(!o||o===c)&&f?.user&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await y_(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=oz()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Cn(this.app))return Promise.reject(cs(this));const e=t?jt(t):null;return e&&Dt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Dt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Cn(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Cz(this),e=new Nz(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new su("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await Sz(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Cr(t)||this._popupRedirectResolver;Dt(e,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[Cr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Y8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&az(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ai(n){return jt(n)}class F5{constructor(t){this.auth=t,this.observer=null,this.addObserver=Ow(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let q_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xz(n){q_=n}function Pb(n){return q_.loadJS(n)}function Oz(){return q_.recaptchaV2Script}function Mz(){return q_.recaptchaEnterpriseScript}function Pz(){return q_.gapiScript}function Q8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Vz=500,kz=6e4,O1=1e12;class Lz{constructor(t){this.auth=t,this.counter=O1,this._widgets=new Map}render(t,e){const i=this.counter;return this._widgets.set(i,new Bz(t,this.auth.name,e||{})),this.counter++,i}reset(t){const e=t||O1;this._widgets.get(e)?.delete(),this._widgets.delete(e)}getResponse(t){const e=t||O1;return this._widgets.get(e)?.getResponse()||""}async execute(t){const e=t||O1;return this._widgets.get(e)?.execute(),""}}class Uz{constructor(){this.enterprise=new zz}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class zz{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Bz{constructor(t,e,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof t=="string"?document.getElementById(t):t;Dt(s,"argument-error",{appName:e}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Gz(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch{}this.isVisible&&this.execute()},kz)},Vz))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Gz(n){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)t.push(e.charAt(Math.floor(Math.random()*e.length)));return t.join("")}const Hz="recaptcha-enterprise",X0="NO_RECAPTCHA";class X8{constructor(t){this.type=Hz,this.auth=ai(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{L8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new k8(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(o,c,f){const m=window.grecaptcha;B5(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:t}).then(g=>{c(g)}).catch(()=>{c(X0)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Uz().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(f=>{if(!e&&B5(window.grecaptcha))s(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Mz();m.length!==0&&(m+=f),Pb(m).then(()=>{s(f,o,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function y0(n,t,e,i=!1,s=!1){const o=new X8(n);let c;if(s)c=X0;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const f={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ih(n,t,e,i,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await y0(n,t,e,e==="getOobCode");return i(n,o)}else return i(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await y0(n,t,e,e==="getOobCode");return i(n,c)}else return Promise.reject(o)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const o=await y0(n,t,e);return i(n,o).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);const f=await y0(n,t,e,!1,!0);return i(n,f)}return Promise.reject(c)})}else{const o=await y0(n,t,e,!1,!0);return i(n,o)}else return Promise.reject(s+" provider is not supported.")}async function qz(n){const t=ai(n),e=await L8(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new k8(e);t.tenantId==null?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new X8(t).verify()}function Fz(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Cr);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function jz(n,t,e){const i=ai(n);Dt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!e?.disableWarnings,o=J8(t),{host:c,port:f}=Kz(t),m=f===null?"":`:${f}`,g={url:`${o}//${c}${m}/`},E=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Dt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Dt(Nh(g,i.config.emulator)&&Nh(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,iu(c)?(Bv(`${o}//${c}${m}`),Gv("Auth",!0)):s||Yz()}function J8(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function Kz(n){const t=J8(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:j5(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:j5(c)}}}function j5(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function Yz(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Bp{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Xl("not implemented")}_getIdTokenResponse(t){return Xl("not implemented")}_linkToIdToken(t,e){return Xl("not implemented")}_getReauthenticationResolver(t){return Xl("not implemented")}}async function W8(n,t){return gi(n,"POST","/v1/accounts:resetPassword",pi(n,t))}async function Qz(n,t){return gi(n,"POST","/v1/accounts:update",t)}async function Xz(n,t){return gi(n,"POST","/v1/accounts:signUp",t)}async function Jz(n,t){return gi(n,"POST","/v1/accounts:update",pi(n,t))}async function Wz(n,t){return cc(n,"POST","/v1/accounts:signInWithPassword",pi(n,t))}async function g2(n,t){return gi(n,"POST","/v1/accounts:sendOobCode",pi(n,t))}async function Zz(n,t){return g2(n,t)}async function $z(n,t){return g2(n,t)}async function tB(n,t){return g2(n,t)}async function eB(n,t){return g2(n,t)}async function nB(n,t){return cc(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,t))}async function iB(n,t){return cc(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,t))}class v_ extends Bp{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new v_(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new v_(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(t,e,"signInWithPassword",Wz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nB(t,{email:this._email,oobCode:this._password});default:Ms(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(t,i,"signUpPassword",Xz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iB(t,{idToken:e,email:this._email,oobCode:this._password});default:Ms(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ju(n,t){return cc(n,"POST","/v1/accounts:signInWithIdp",pi(n,t))}const sB="http://localhost";class eu extends Bp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new eu(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ms("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...o}=e;if(!i||!s)return null;const c=new eu(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Ju(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ju(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ju(t,e)}buildRequest(){const t={requestUri:sB,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Np(e)}return t}}async function K5(n,t){return gi(n,"POST","/v1/accounts:sendVerificationCode",pi(n,t))}async function aB(n,t){return cc(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,t))}async function rB(n,t){const e=await cc(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,t));if(e.temporaryProof)throw M0(n,"account-exists-with-different-credential",e);return e}const oB={USER_NOT_FOUND:"user-not-found"};async function lB(n,t){const e={...t,operation:"REAUTH"};return cc(n,"POST","/v1/accounts:signInWithPhoneNumber",pi(n,e),oB)}class ed extends Bp{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new ed({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new ed({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return aB(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return rB(t,{idToken:e,...this._makeVerificationRequest()})}_getReauthenticationResolver(t){return lB(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o}=t;return!i&&!e&&!s&&!o?null:new ed({verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:o})}}function uB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cB(n){const t=jm(C0(n)).link,e=t?jm(C0(t)).deep_link_id:null,i=jm(C0(n)).deep_link_id;return(i?jm(C0(i)).link:null)||i||e||t||n}class _2{constructor(t){const e=jm(C0(t)),i=e.apiKey??null,s=e.oobCode??null,o=uB(e.mode??null);Dt(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=cB(t);try{return new _2(e)}catch{return null}}}class Jh{constructor(){this.providerId=Jh.PROVIDER_ID}static credential(t,e){return v_._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=_2.parseLink(e);return Dt(i,"argument-error"),v_._fromEmailAndCode(t,i.code,i.tenantId)}}Jh.PROVIDER_ID="password";Jh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hc{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Gp extends hc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Zm extends Gp{static credentialFromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;return Dt("providerId"in e&&"signInMethod"in e,"argument-error"),eu._fromParams(e)}credential(t){return this._credential({...t,nonce:t.rawNonce})}_credential(t){return Dt(t.idToken||t.accessToken,"argument-error"),eu._fromParams({...t,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(t){return Zm.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Zm.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:c,providerId:f}=t;if(!i&&!s&&!e&&!o||!f)return null;try{return new Zm(f)._credential({idToken:e,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}class Hl extends Gp{constructor(){super("facebook.com")}static credential(t){return eu._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hl.credentialFromTaggedObject(t)}static credentialFromError(t){return Hl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hl.credential(t.oauthAccessToken)}catch{return null}}}Hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hl.PROVIDER_ID="facebook.com";class ql extends Gp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return eu._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ql.credentialFromTaggedObject(t)}static credentialFromError(t){return ql.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return ql.credential(e,i)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";class Fl extends Gp{constructor(){super("github.com")}static credential(t){return eu._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fl.credentialFromTaggedObject(t)}static credentialFromError(t){return Fl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fl.credential(t.oauthAccessToken)}catch{return null}}}Fl.GITHUB_SIGN_IN_METHOD="github.com";Fl.PROVIDER_ID="github.com";const hB="http://localhost";class wp extends Bp{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return Ju(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ju(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ju(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,pendingToken:o}=e;return!i||!s||!o||i!==s?null:new wp(i,o)}static _create(t,e){return new wp(t,e)}buildRequest(){return{requestUri:hB,returnSecureToken:!0,pendingToken:this.pendingToken}}}const fB="saml.";class Av extends hc{constructor(t){Dt(t.startsWith(fB),"argument-error"),super(t)}static credentialFromResult(t){return Av.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Av.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=wp.fromJSON(t);return Dt(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:i}=t;if(!e||!i)return null;try{return wp._create(i,e)}catch{return null}}}class jl extends Gp{constructor(){super("twitter.com")}static credential(t,e){return eu._fromParams({providerId:jl.PROVIDER_ID,signInMethod:jl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return jl.credentialFromTaggedObject(t)}static credentialFromError(t){return jl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return jl.credential(e,i)}catch{return null}}}jl.TWITTER_SIGN_IN_METHOD="twitter.com";jl.PROVIDER_ID="twitter.com";async function Z8(n,t){return cc(n,"POST","/v1/accounts:signUp",pi(n,t))}class vo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const o=await Qo._fromIdTokenResponse(t,i,s),c=Y5(i);return new vo({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=Y5(i);return new vo({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function Y5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function dB(n){if(Cn(n.app))return Promise.reject(cs(n));const t=ai(n);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new vo({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await Z8(t,{returnSecureToken:!0}),i=await vo._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class wv extends zi{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,wv.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new wv(t,e,i,s)}}function $8(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wv._fromErrorAndOperation(n,o,t,i):o})}function t9(n){return new Set(n.map(({providerId:t})=>t).filter(t=>!!t))}async function mB(n,t){const e=jt(n);await y2(!0,e,t);const{providerUserInfo:i}=await pz(e.auth,{idToken:await e.getIdToken(),deleteProvider:[t]}),s=t9(i||[]);return e.providerData=e.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(e.phoneNumber=null),await e.auth._persistUserIfCurrent(e),e}async function Vb(n,t,e=!1){const i=await ec(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return vo._forOperation(n,"link",i)}async function y2(n,t,e){await y_(t);const i=t9(t.providerData),s=n===!1?"provider-already-linked":"no-such-provider";Dt(i.has(e)===n,t.auth,s)}async function e9(n,t,e=!1){const{auth:i}=n;if(Cn(i.app))return Promise.reject(cs(i));const s="reauthenticate";try{const o=await ec(n,$8(i,s,t,n),e);Dt(o.idToken,i,"internal-error");const c=p2(o.idToken);Dt(c,i,"internal-error");const{sub:f}=c;return Dt(n.uid===f,i,"user-mismatch"),vo._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ms(i,"user-mismatch"),o}}async function n9(n,t,e=!1){if(Cn(n.app))return Promise.reject(cs(n));const i="signIn",s=await $8(n,i,t),o=await vo._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(o.user),o}async function v2(n,t){return n9(ai(n),t)}async function i9(n,t){const e=jt(n);return await y2(!1,e,t.providerId),Vb(e,t)}async function s9(n,t){return e9(jt(n),t)}async function pB(n,t){return cc(n,"POST","/v1/accounts:signInWithCustomToken",pi(n,t))}async function gB(n,t){if(Cn(n.app))return Promise.reject(cs(n));const e=ai(n),i=await pB(e,{token:t,returnSecureToken:!0}),s=await vo._fromIdTokenResponse(e,"signIn",i);return await e._updateCurrentUser(s.user),s}class F_{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?kb._fromServerResponse(t,e):"totpInfo"in e?Lb._fromServerResponse(t,e):Ms(t,"internal-error")}}class kb extends F_{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new kb(e)}}class Lb extends F_{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new Lb(e)}}function E2(n,t,e){Dt(e.url?.length>0,n,"invalid-continue-uri"),Dt(typeof e.dynamicLinkDomain>"u"||e.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Dt(typeof e.linkDomain>"u"||e.linkDomain.length>0,n,"invalid-hosting-link-domain"),t.continueUrl=e.url,t.dynamicLinkDomain=e.dynamicLinkDomain,t.linkDomain=e.linkDomain,t.canHandleCodeInApp=e.handleCodeInApp,e.iOS&&(Dt(e.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=e.iOS.bundleId),e.android&&(Dt(e.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=e.android.installApp,t.androidMinimumVersionCode=e.android.minimumVersion,t.androidPackageName=e.android.packageName)}async function Ub(n){const t=ai(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _B(n,t,e){const i=ai(n),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};e&&E2(i,s,e),await Ih(i,s,"getOobCode",$z,"EMAIL_PASSWORD_PROVIDER")}async function yB(n,t,e){await W8(jt(n),{oobCode:t,newPassword:e}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ub(n),i})}async function vB(n,t){await Jz(jt(n),{oobCode:t})}async function a9(n,t){const e=jt(n),i=await W8(e,{oobCode:t}),s=i.requestType;switch(Dt(s,e,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Dt(i.newEmail,e,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Dt(i.mfaInfo,e,"internal-error");default:Dt(i.email,e,"internal-error")}let o=null;return i.mfaInfo&&(o=F_._fromServerResponse(ai(e),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function EB(n,t){const{data:e}=await a9(jt(n),t);return e.email}async function TB(n,t,e){if(Cn(n.app))return Promise.reject(cs(n));const i=ai(n),c=await Ih(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Z8,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Ub(n),m}),f=await vo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function SB(n,t,e){return Cn(n.app)?Promise.reject(cs(n)):v2(jt(n),Jh.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ub(n),i})}async function bB(n,t,e){const i=ai(n),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(c,f){Dt(f.handleCodeInApp,i,"argument-error"),f&&E2(i,c,f)}o(s,e),await Ih(i,s,"getOobCode",tB,"EMAIL_PASSWORD_PROVIDER")}function AB(n,t){return _2.parseLink(t)?.operation==="EMAIL_SIGNIN"}async function wB(n,t,e){if(Cn(n.app))return Promise.reject(cs(n));const i=jt(n),s=Jh.credentialWithLink(t,e||__());return Dt(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),v2(i,s)}async function RB(n,t){return gi(n,"POST","/v1/accounts:createAuthUri",pi(n,t))}async function CB(n,t){const e=Ob()?__():"http://localhost",i={identifier:t,continueUri:e},{signinMethods:s}=await RB(jt(n),i);return s||[]}async function IB(n,t){const e=jt(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};t&&E2(e.auth,s,t);const{email:o}=await Zz(e.auth,s);o!==n.email&&await n.reload()}async function NB(n,t,e){const i=jt(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:t};e&&E2(i.auth,o,e);const{email:c}=await eB(i.auth,o);c!==n.email&&await n.reload()}async function DB(n,t){return gi(n,"POST","/v1/accounts:update",t)}async function xB(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const i=jt(n),o={idToken:await i.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},c=await ec(i,DB(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function OB(n,t){const e=jt(n);return Cn(e.auth.app)?Promise.reject(cs(e.auth)):r9(e,t,null)}function MB(n,t){return r9(jt(n),null,t)}async function r9(n,t,e){const{auth:i}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(o.email=t),e&&(o.password=e);const c=await ec(n,Qz(i,o));await n._updateTokensIfNecessary(c,!0)}function PB(n){if(!n)return null;const{providerId:t}=n,e=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!t&&n?.idToken){const s=p2(n.idToken)?.firebase?.sign_in_provider;if(s){const o=s!=="anonymous"&&s!=="custom"?s:null;return new $m(i,o)}}if(!t)return null;switch(t){case"facebook.com":return new VB(i,e);case"github.com":return new kB(i,e);case"google.com":return new LB(i,e);case"twitter.com":return new UB(i,e,n.screenName||null);case"custom":case"anonymous":return new $m(i,null);default:return new $m(i,t,e)}}class $m{constructor(t,e,i={}){this.isNewUser=t,this.providerId=e,this.profile=i}}class o9 extends $m{constructor(t,e,i,s){super(t,e,i),this.username=s}}class VB extends $m{constructor(t,e){super(t,"facebook.com",e)}}class kB extends o9{constructor(t,e){super(t,"github.com",e,typeof e?.login=="string"?e?.login:null)}}class LB extends $m{constructor(t,e){super(t,"google.com",e)}}class UB extends o9{constructor(t,e,i){super(t,"twitter.com",e,i)}}function zB(n){const{user:t,_tokenResponse:e}=n;return t.isAnonymous&&!e?{providerId:null,isNewUser:!1,profile:null}:PB(e)}class Jf{constructor(t,e,i){this.type=t,this.credential=e,this.user=i}static _fromIdtoken(t,e){return new Jf("enroll",t,e)}static _fromMfaPendingCredential(t){return new Jf("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){if(t?.multiFactorSession){if(t.multiFactorSession?.pendingCredential)return Jf._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(t.multiFactorSession?.idToken)return Jf._fromIdtoken(t.multiFactorSession.idToken)}return null}}class zb{constructor(t,e,i){this.session=t,this.hints=e,this.signInResolver=i}static _fromError(t,e){const i=ai(t),s=e.customData._serverResponse,o=(s.mfaInfo||[]).map(f=>F_._fromServerResponse(i,f));Dt(s.mfaPendingCredential,i,"internal-error");const c=Jf._fromMfaPendingCredential(s.mfaPendingCredential);return new zb(c,o,async f=>{const m=await f._process(i,c);delete s.mfaInfo,delete s.mfaPendingCredential;const g={...s,idToken:m.idToken,refreshToken:m.refreshToken};switch(e.operationType){case"signIn":const E=await vo._fromIdTokenResponse(i,e.operationType,g);return await i._updateCurrentUser(E.user),E;case"reauthenticate":return Dt(e.user,i,"internal-error"),vo._forOperation(e.user,e.operationType,g);default:Ms(i,"internal-error")}})}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function BB(n,t){const e=jt(n),i=t;return Dt(t.customData.operationType,e,"argument-error"),Dt(i.customData._serverResponse?.mfaPendingCredential,e,"argument-error"),zb._fromError(e,i)}function Q5(n,t){return gi(n,"POST","/v2/accounts/mfaEnrollment:start",pi(n,t))}function GB(n,t){return gi(n,"POST","/v2/accounts/mfaEnrollment:finalize",pi(n,t))}function HB(n,t){return gi(n,"POST","/v2/accounts/mfaEnrollment:withdraw",pi(n,t))}class Bb{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(i=>F_._fromServerResponse(t.auth,i)))})}static _fromUser(t){return new Bb(t)}async getSession(){return Jf._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,e){const i=t,s=await this.getSession(),o=await ec(this.user,i._process(this.user.auth,s,e));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(t){const e=typeof t=="string"?t:t.uid,i=await this.user.getIdToken();try{const s=await ec(this.user,HB(this.user.auth,{idToken:i,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==e),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const qE=new WeakMap;function qB(n){const t=jt(n);return qE.has(t)||qE.set(t,Bb._fromUser(t)),qE.get(t)}const Rv="__sak";class l9{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Rv,"1"),this.storage.removeItem(Rv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const FB=1e3,jB=10;class u9 extends l9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);wz()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,jB):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},FB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}u9.type="LOCAL";const Gb=u9;class c9 extends l9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}c9.type="SESSION";const md=c9;function KB(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class T2{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new T2(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:o}=e.data,c=this.handlersMap[s];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async g=>g(e.origin,o)),m=await KB(f);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}T2.receivers=[];function j_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}class YB{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,m)=>{const g=j_("",20);s.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(b){const A=b;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(E),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(A.data.response);break;default:clearTimeout(E),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Li(){return window}function QB(n){Li().location.href=n}function Hb(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function XB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JB(){return navigator?.serviceWorker?.controller||null}function WB(){return Hb()?self:null}const h9="firebaseLocalStorageDb",ZB=1,Cv="firebaseLocalStorage",f9="fbase_key";class K_{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function S2(n,t){return n.transaction([Cv],t?"readwrite":"readonly").objectStore(Cv)}function $B(){const n=indexedDB.deleteDatabase(h9);return new K_(n).toPromise()}function YT(){const n=indexedDB.open(h9,ZB);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Cv,{keyPath:f9})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Cv)?t(i):(i.close(),await $B(),t(await YT()))})})}async function X5(n,t,e){const i=S2(n,!0).put({[f9]:t,value:e});return new K_(i).toPromise()}async function tG(n,t){const e=S2(n,!1).get(t),i=await new K_(e).toPromise();return i===void 0?null:i.value}function J5(n,t){const e=S2(n,!0).delete(t);return new K_(e).toPromise()}const eG=800,nG=3;class d9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YT(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>nG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=T2._getInstance(WB()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XB(),!this.activeServiceWorker)return;this.sender=new YB(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||JB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await YT();return await X5(t,Rv,"1"),await J5(t,Rv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>X5(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>tG(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>J5(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=S2(s,!1).getAll();return new K_(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d9.type="LOCAL";const E_=d9;function W5(n,t){return gi(n,"POST","/v2/accounts/mfaSignIn:start",pi(n,t))}function iG(n,t){return gi(n,"POST","/v2/accounts/mfaSignIn:finalize",pi(n,t))}const FE=Q8("rcb"),sG=new B_(3e4,6e4);class aG{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Li().grecaptcha?.render}load(t,e=""){return Dt(rG(e),t,"argument-error"),this.shouldResolveImmediately(e)&&z5(Li().grecaptcha)?Promise.resolve(Li().grecaptcha):new Promise((i,s)=>{const o=Li().setTimeout(()=>{s(Zi(t,"network-request-failed"))},sG.get());Li()[FE]=()=>{Li().clearTimeout(o),delete Li()[FE];const f=Li().grecaptcha;if(!f||!z5(f)){s(Zi(t,"internal-error"));return}const m=f.render;f.render=(g,E)=>{const b=m(g,E);return this.counter++,b},this.hostLanguage=e,i(f)};const c=`${Oz()}?${Np({onload:FE,render:"explicit",hl:e})}`;Pb(c).catch(()=>{clearTimeout(o),s(Zi(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!Li().grecaptcha?.render&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function rG(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class oG{async load(t){return new Lz(t)}clearedOneInstance(){}}const J0="recaptcha",lG={theme:"light",type:"image"};let uG=class{constructor(t,e,i={...lG}){this.parameters=i,this.type=J0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ai(t),this.isInvisible=this.parameters.size==="invisible",Dt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;Dt(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oG:new aG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),i=e.getResponse(t);return i||new Promise(s=>{const o=c=>{c&&(this.tokenChangeListeners.delete(o),s(c))};this.tokenChangeListeners.add(o),this.isInvisible&&e.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){Dt(!this.parameters.sitekey,this.auth,"argument-error"),Dt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Dt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(i=>i(e)),typeof t=="function")t(e);else if(typeof t=="string"){const i=Li()[t];typeof i=="function"&&i(e)}}}assertNotDestroyed(){Dt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){Dt(Ob()&&!Hb(),this.auth,"internal-error"),await cG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await dz(this.auth);Dt(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return Dt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function cG(){let n=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}n=()=>t(),window.addEventListener("load",n)}).catch(t=>{throw n&&window.removeEventListener("load",n),t})}class qb{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=ed._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function hG(n,t,e){if(Cn(n.app))return Promise.reject(cs(n));const i=ai(n),s=await b2(i,t,jt(e));return new qb(s,o=>v2(i,o))}async function fG(n,t,e){const i=jt(n);await y2(!1,i,"phone");const s=await b2(i.auth,t,jt(e));return new qb(s,o=>i9(i,o))}async function dG(n,t,e){const i=jt(n);if(Cn(i.auth.app))return Promise.reject(cs(i.auth));const s=await b2(i.auth,t,jt(e));return new qb(s,o=>s9(i,o))}async function b2(n,t,e){if(!n._getRecaptchaConfig())try{await qz(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof t=="string"?i={phoneNumber:t}:i=t,"session"in i){const s=i.session;if("phoneNumber"in i){Dt(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ih(n,o,"mfaSmsEnrollment",async(g,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===X0){Dt(e?.type===J0,g,"argument-error");const b=await jE(g,E,e);return Q5(g,b)}return Q5(g,E)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{Dt(s.type==="signin",n,"internal-error");const o=i.multiFactorHint?.uid||i.multiFactorUid;Dt(o,n,"missing-multi-factor-info");const c={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ih(n,c,"mfaSmsSignIn",async(E,b)=>{if(b.phoneSignInInfo.captchaResponse===X0){Dt(e?.type===J0,E,"argument-error");const A=await jE(E,b,e);return W5(E,A)}return W5(E,b)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ih(n,s,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===X0){Dt(e?.type===J0,m,"argument-error");const E=await jE(m,g,e);return K5(m,E)}return K5(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{e?._reset()}}async function mG(n,t){const e=jt(n);if(Cn(e.auth.app))return Promise.reject(cs(e.auth));await Vb(e,t)}async function jE(n,t,e){Dt(e.type===J0,n,"argument-error");const i=await e.verify();Dt(typeof i=="string",n,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,c=s.phoneEnrollmentInfo.captchaResponse,f=s.phoneEnrollmentInfo.clientType,m=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i,captchaResponse:c,clientType:f,recaptchaVersion:m}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,c=s.phoneSignInInfo.clientType,f=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:o,clientType:c,recaptchaVersion:f}}),s}else return Object.assign(s,{recaptchaToken:i}),s}let pd=class J1{constructor(t){this.providerId=J1.PROVIDER_ID,this.auth=ai(t)}verifyPhoneNumber(t,e){return b2(this.auth,t,jt(e))}static credential(t,e){return ed._fromVerification(t,e)}static credentialFromResult(t){const e=t;return J1.credentialFromTaggedObject(e)}static credentialFromError(t){return J1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:i}=t;return e&&i?ed._fromTokenResponse(e,i):null}};pd.PROVIDER_ID="phone";pd.PHONE_SIGN_IN_METHOD="phone";function Od(n,t){return t?Cr(t):(Dt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Fb extends Bp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ju(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ju(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ju(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function pG(n){return n9(n.auth,new Fb(n),n.bypassAuthState)}function gG(n){const{auth:t,user:e}=n;return Dt(e,t,"internal-error"),e9(e,new Fb(n),n.bypassAuthState)}async function _G(n){const{auth:t,user:e}=n;return Dt(e,t,"internal-error"),Vb(e,new Fb(n),n.bypassAuthState)}class m9{constructor(t,e,i,s,o=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:o,error:c,type:f}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return pG;case"linkViaPopup":case"linkViaRedirect":return _G;case"reauthViaPopup":case"reauthViaRedirect":return gG;default:Ms(this.auth,"internal-error")}}resolve(t){$o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yG=new B_(2e3,1e4);async function vG(n,t,e){if(Cn(n.app))return Promise.reject(Zi(n,"operation-not-supported-in-this-environment"));const i=ai(n);zp(n,t,hc);const s=Od(i,e);return new Yu(i,"signInViaPopup",t,s).executeNotNull()}async function EG(n,t,e){const i=jt(n);if(Cn(i.auth.app))return Promise.reject(Zi(i.auth,"operation-not-supported-in-this-environment"));zp(i.auth,t,hc);const s=Od(i.auth,e);return new Yu(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function TG(n,t,e){const i=jt(n);zp(i.auth,t,hc);const s=Od(i.auth,e);return new Yu(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class Yu extends m9{constructor(t,e,i,s,o){super(t,e,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Yu.currentPopupAction&&Yu.currentPopupAction.cancel(),Yu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dt(t,this.auth,"internal-error"),t}async onExecution(){$o(this.filter.length===1,"Popup operations only handle one event");const t=j_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yu.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yG.get())};t()}}Yu.currentPopupAction=null;const SG="pendingRedirect",W0=new Map;class bG extends m9{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=W0.get(this.auth._key());if(!t){try{const i=await AG(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}W0.set(this.auth._key(),t)}return this.bypassAuthState||W0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AG(n,t){const e=g9(t),i=p9(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}async function jb(n,t){return p9(n)._set(g9(t),"true")}function wG(){W0.clear()}function Kb(n,t){W0.set(n._key(),t)}function p9(n){return Cr(n._redirectPersistence)}function g9(n){return td(SG,n.config.apiKey,n.name)}function RG(n,t,e){return CG(n,t,e)}async function CG(n,t,e){if(Cn(n.app))return Promise.reject(cs(n));const i=ai(n);zp(n,t,hc),await i._initializationPromise;const s=Od(i,e);return await jb(s,i),s._openRedirect(i,t,"signInViaRedirect")}function IG(n,t,e){return NG(n,t,e)}async function NG(n,t,e){const i=jt(n);if(zp(i.auth,t,hc),Cn(i.auth.app))return Promise.reject(cs(i.auth));await i.auth._initializationPromise;const s=Od(i.auth,e);await jb(s,i.auth);const o=await _9(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}function DG(n,t,e){return xG(n,t,e)}async function xG(n,t,e){const i=jt(n);zp(i.auth,t,hc),await i.auth._initializationPromise;const s=Od(i.auth,e);await y2(!1,i,t.providerId),await jb(s,i.auth);const o=await _9(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}async function OG(n,t){return await ai(n)._initializationPromise,A2(n,t,!1)}async function A2(n,t,e=!1){if(Cn(n.app))return Promise.reject(cs(n));const i=ai(n),s=Od(i,t),c=await new bG(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}async function _9(n){const t=j_(`${n.uid}:::`);return n._redirectEventId=t,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),t}const MG=600*1e3;class y9{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!PG(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!v9(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Zi(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=MG&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z5(t))}saveEventToCache(t){this.cachedEventUids.add(Z5(t)),this.lastProcessedEventTime=Date.now()}}function Z5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function v9({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function PG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v9(n);default:return!1}}async function E9(n,t={}){return gi(n,"GET","/v1/projects",t)}const VG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kG=/^https?/;async function LG(n){if(n.config.emulator)return;const{authorizedDomains:t}=await E9(n);for(const e of t)try{if(UG(e))return}catch{}Ms(n,"unauthorized-domain")}function UG(n){const t=__(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!kG.test(e))return!1;if(VG.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const zG=new B_(3e4,6e4);function $5(){const n=Li().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function BG(n){return new Promise((t,e)=>{function i(){$5(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$5(),e(Zi(n,"network-request-failed"))},timeout:zG.get()})}if(Li().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Li().gapi?.load)i();else{const s=Q8("iframefcb");return Li()[s]=()=>{gapi.load?i():e(Zi(n,"network-request-failed"))},Pb(`${Pz()}?onload=${s}`).catch(o=>e(o))}}).catch(t=>{throw W1=null,t})}let W1=null;function GG(n){return W1=W1||BG(n),W1}const HG=new B_(5e3,15e3),qG="__/auth/iframe",FG="emulator/auth/iframe",jG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YG(n){const t=n.config;Dt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Mb(t,FG):`https://${n.config.authDomain}/${qG}`,i={apiKey:t.apiKey,appName:n.name,v:ac},s=KG.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Np(i).slice(1)}`}async function QG(n){const t=await GG(n),e=Li().gapi;return Dt(e,n,"internal-error"),t.open({where:document.body,url:YG(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jG,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=Zi(n,"network-request-failed"),f=Li().setTimeout(()=>{o(c)},HG.get());function m(){Li().clearTimeout(f),s(i)}i.ping(m).then(m,()=>{o(c)})}))}const XG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JG=500,WG=600,ZG="_blank",$G="http://localhost";class t6{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tH(n,t,e,i=JG,s=WG){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...XG,width:i.toString(),height:s.toString(),top:o,left:c},g=si().toLowerCase();e&&(f=H8(g)?ZG:e),B8(g)&&(t=t||$G,m.scrollbars="yes");const E=Object.entries(m).reduce((A,[N,D])=>`${A}${N}=${D},`,"");if(Az(g)&&f!=="_self")return eH(t||"",f),new t6(null);const b=window.open(t||"",f,E);Dt(b,n,"popup-blocked");try{b.focus()}catch{}return new t6(b)}function eH(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const nH="__/auth/handler",iH="emulator/auth/handler",sH=encodeURIComponent("fac");async function QT(n,t,e,i,s,o){Dt(n.config.authDomain,n,"auth-domain-config-required"),Dt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:ac,eventId:s};if(t instanceof hc){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",uM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,b]of Object.entries(o||{}))c[E]=b}if(t instanceof Gp){const E=t.getScopes().filter(b=>b!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const m=await n._getAppCheckToken(),g=m?`#${sH}=${encodeURIComponent(m)}`:"";return`${aH(n)}?${Np(f).slice(1)}${g}`}function aH({config:n}){return n.emulator?Mb(n,iH):`https://${n.authDomain}/${nH}`}const KE="webStorageSupport";class rH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=md,this._completeRedirectFn=A2,this._overrideRedirectResult=Kb}async _openPopup(t,e,i,s){$o(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await QT(t,e,i,__(),s);return tH(t,o,j_())}async _openRedirect(t,e,i,s){await this._originValidation(t);const o=await QT(t,e,i,__(),s);return QB(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:o}=this.eventManagers[e];return s?Promise.resolve(s):($o(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await QG(t),i=new y9(t);return e.register("authEvent",s=>(Dt(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(KE,{type:KE},s=>{const o=s?.[0]?.[KE];o!==void 0&&e(!!o),Ms(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=LG(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return K8()||G8()||H_()}}const oH=rH;class lH{constructor(t){this.factorId=t}_process(t,e,i){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,i);case"signin":return this._finalizeSignIn(t,e.credential);default:return Xl("unexpected MultiFactorSessionType")}}}class Yb extends lH{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Yb(t)}_finalizeEnroll(t,e,i){return GB(t,{idToken:e,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return iG(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class T9{constructor(){}static assertion(t){return Yb._fromCredential(t)}}T9.FACTOR_ID="phone";var e6="@firebase/auth",n6="1.12.0";class uH{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hH(n){ba(new Bi("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Dt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y8(n)},g=new Dz(i,s,o,m);return Fz(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),ba(new Bi("auth-internal",t=>{const e=ai(t.getProvider("auth").getImmediate());return(i=>new uH(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(e6,n6,cH(n)),Wi(e6,n6,"esm2020")}const fH=300;WO("authIdTokenMaxAge");function dH(){return document.getElementsByTagName("head")?.[0]??document}xz({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const o=Zi("internal-error");o.customData=s,e(o)},i.type="text/javascript",i.charset="UTF-8",dH().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hH("Browser");function gd(){return window}const mH=2e3;async function pH(n,t,e){const{BuildInfo:i}=gd();$o(t.sessionId,"AuthEvent did not contain a session ID");const s=await EH(t.sessionId),o={};return H_()?o.ibi=i.packageName:G_()?o.apn=i.packageName:Ms(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,QT(n,e,t.type,void 0,t.eventId??void 0,o)}async function gH(n){const{BuildInfo:t}=gd(),e={};H_()?e.iosBundleId=t.packageName:G_()?e.androidPackageName=t.packageName:Ms(n,"operation-not-supported-in-this-environment"),await E9(n,e)}function _H(n){const{cordova:t}=gd();return new Promise(e=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(n):s=t.InAppBrowser.open(n,bz()?"_blank":"_system","location=yes"),e(s)})})}async function yH(n,t,e){const{cordova:i}=gd();let s=()=>{};try{await new Promise((o,c)=>{let f=null;function m(){o();const b=i.plugins.browsertab?.close;typeof b=="function"&&b(),typeof e?.close=="function"&&e.close()}function g(){f||(f=window.setTimeout(()=>{c(Zi(n,"redirect-cancelled-by-user"))},mH))}function E(){document?.visibilityState==="visible"&&g()}t.addPassiveListener(m),document.addEventListener("resume",g,!1),G_()&&document.addEventListener("visibilitychange",E,!1),s=()=>{t.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",E,!1),f&&window.clearTimeout(f)}})}finally{s()}}function vH(n){const t=gd();Dt(typeof t?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Dt(typeof t?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Dt(typeof t?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Dt(typeof t?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Dt(typeof t?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function EH(n){const t=TH(n),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}function TH(n){if($o(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const t=new ArrayBuffer(n.length),e=new Uint8Array(t);for(let i=0;i<n.length;i++)e[i]=n.charCodeAt(i);return e}const SH=20;class bH extends y9{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInitialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInitialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}async initialized(){await this.initPromise}}function AH(n,t,e=null){return{type:t,eventId:e,urlResponse:null,sessionId:CH(),postBody:null,tenantId:n.tenantId,error:Zi(n,"no-auth-event")}}function wH(n,t){return XT()._set(JT(n),t)}async function i6(n){const t=await XT()._get(JT(n));return t&&await XT()._remove(JT(n)),t}function RH(n,t){const e=NH(t);if(e.includes("/__/auth/callback")){const i=Z1(e),o=(i.firebaseError?IH(decodeURIComponent(i.firebaseError)):null)?.code?.split("auth/")?.[1],c=o?Zi(o):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:e,postBody:null}}return null}function CH(){const n=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<SH;e++){const i=Math.floor(Math.random()*t.length);n.push(t.charAt(i))}return n.join("")}function XT(){return Cr(Gb)}function JT(n){return td("authEvent",n.config.apiKey,n.name)}function IH(n){try{return JSON.parse(n)}catch{return null}}function NH(n){const t=Z1(n),e=t.link?decodeURIComponent(t.link):void 0,i=Z1(e).link,s=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Z1(s).link||s||i||e||n}function Z1(n){if(!n?.includes("?"))return{};const[t,...e]=n.split("?");return jm(e.join("?"))}const DH=500;class xH{constructor(){this._redirectPersistence=md,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=A2,this._overrideRedirectResult=Kb}async _initialize(t){const e=t._key();let i=this.eventManagers.get(e);return i||(i=new bH(t),this.eventManagers.set(e,i),this.attachCallbackListeners(t,i)),i}_openPopup(t){Ms(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,i,s){vH(t);const o=await this._initialize(t);await o.initialized(),o.resetRedirect(),wG(),await this._originValidation(t);const c=AH(t,i,s);await wH(t,c);const f=await pH(t,c,e),m=await _H(f);return yH(t,o,m)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=gH(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:i,handleOpenURL:s,BuildInfo:o}=gd(),c=setTimeout(async()=>{await i6(t),e.onEvent(s6())},DH),f=async E=>{clearTimeout(c);const b=await i6(t);let A=null;b&&E?.url&&(A=RH(b,E.url)),e.onEvent(A||s6())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,f);const m=s,g=`${o.packageName.toLowerCase()}://`;gd().handleOpenURL=async E=>{if(E.toLowerCase().startsWith(g)&&f({url:E}),typeof m=="function")try{m(E)}catch(b){console.error(b)}}}}const OH=xH;function s6(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zi("no-auth-event")}}function MH(n,t){ai(n)._logFramework(t)}var PH="@firebase/auth-compat",VH="0.6.2";const kH=1e3;function Z0(){return self?.location?.protocol||null}function LH(){return Z0()==="http:"||Z0()==="https:"}function S9(n=si()){return!!((Z0()==="file:"||Z0()==="ionic:"||Z0()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function UH(){return _S()||Hv()}function zH(){return Nw()&&document?.documentMode===11}function BH(n=si()){return/Edge\/\d+/.test(n)}function GH(n=si()){return zH()||BH(n)}function b9(){try{const n=self.localStorage,t=j_();if(n)return n.setItem(t,"1"),n.removeItem(t),GH()?id():!0}catch{return Qb()&&id()}return!1}function Qb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function YE(){return(LH()||Iw()||S9())&&!UH()&&b9()&&!Qb()}function A9(){return S9()&&typeof document<"u"}async function HH(){return A9()?new Promise(n=>{const t=setTimeout(()=>{n(!1)},kH);document.addEventListener("deviceready",()=>{clearTimeout(t),n(!0)})}):!1}function qH(){return typeof window<"u"?window:null}const wr={LOCAL:"local",NONE:"none",SESSION:"session"},v0=Dt,w9="persistence";function FH(n,t){if(v0(Object.values(wr).includes(t),n,"invalid-persistence-type"),_S()){v0(t!==wr.SESSION,n,"unsupported-persistence-type");return}if(Hv()){v0(t===wr.NONE,n,"unsupported-persistence-type");return}if(Qb()){v0(t===wr.NONE||t===wr.LOCAL&&id(),n,"unsupported-persistence-type");return}v0(t===wr.NONE||b9(),n,"unsupported-persistence-type")}async function WT(n){await n._initializationPromise;const t=R9(),e=td(w9,n.config.apiKey,n.name);t&&t.setItem(e,n._getPersistenceType())}function jH(n,t){const e=R9();if(!e)return[];const i=td(w9,n,t);switch(e.getItem(i)){case wr.NONE:return[Ap];case wr.LOCAL:return[E_,md];case wr.SESSION:return[md];default:return[]}}function R9(){try{return qH()?.sessionStorage||null}catch{return null}}const KH=Dt;class Ah{constructor(){this.browserResolver=Cr(oH),this.cordovaResolver=Cr(OH),this.underlyingResolver=null,this._redirectPersistence=md,this._completeRedirectFn=A2,this._overrideRedirectResult=Kb}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,i,s)}async _openRedirect(t,e,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,i,s)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return A9()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return KH(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await HH();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}function C9(n){return n.unwrap()}function YH(n){return n.wrapped()}function QH(n){return I9(n)}function XH(n,t){const e=t.customData?._tokenResponse;if(t?.code==="auth/multi-factor-auth-required"){const i=t;i.resolver=new JH(n,BB(n,t))}else if(e){const i=I9(t),s=t;i&&(s.credential=i,s.tenantId=e.tenantId||void 0,s.email=e.email||void 0,s.phoneNumber=e.phoneNumber||void 0)}}function I9(n){const{_tokenResponse:t}=n instanceof zi?n.customData:n;if(!t)return null;if(!(n instanceof zi)&&"temporaryProof"in t&&"phoneNumber"in t)return pd.credentialFromResult(n);const e=t.providerId;if(!e||e===_0.PASSWORD)return null;let i;switch(e){case _0.GOOGLE:i=ql;break;case _0.FACEBOOK:i=Hl;break;case _0.GITHUB:i=Fl;break;case _0.TWITTER:i=jl;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:c,pendingToken:f,nonce:m}=t;return!o&&!c&&!s&&!f?null:f?e.startsWith("saml.")?wp._create(e,f):eu._fromParams({providerId:e,signInMethod:e,pendingToken:f,idToken:s,accessToken:o}):new Zm(e).credential({idToken:s,accessToken:o,rawNonce:m})}return n instanceof zi?i.credentialFromError(n):i.credentialFromResult(n)}function $a(n,t){return t.catch(e=>{throw e instanceof zi&&XH(n,e),e}).then(e=>{const i=e.operationType,s=e.user;return{operationType:i,credential:QH(e),additionalUserInfo:zB(e),user:Qu.getOrCreate(s)}})}async function ZT(n,t){const e=await t;return{verificationId:e.verificationId,confirm:i=>$a(n,e.confirm(i))}}class JH{constructor(t,e){this.resolver=e,this.auth=YH(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return $a(C9(this.auth),this.resolver.resolveSignIn(t))}}class Qu{constructor(t){this._delegate=t,this.multiFactor=qB(t)}static getOrCreate(t){return Qu.USER_MAP.has(t)||Qu.USER_MAP.set(t,new Qu(t)),Qu.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return $a(this.auth,i9(this._delegate,t))}async linkWithPhoneNumber(t,e){return ZT(this.auth,fG(this._delegate,t,e))}async linkWithPopup(t){return $a(this.auth,TG(this._delegate,t,Ah))}async linkWithRedirect(t){return await WT(ai(this.auth)),DG(this._delegate,t,Ah)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return $a(this.auth,s9(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return ZT(this.auth,dG(this._delegate,t,e))}reauthenticateWithPopup(t){return $a(this.auth,EG(this._delegate,t,Ah))}async reauthenticateWithRedirect(t){return await WT(ai(this.auth)),IG(this._delegate,t,Ah)}sendEmailVerification(t){return IB(this._delegate,t)}async unlink(t){return await mB(this._delegate,t),this}updateEmail(t){return OB(this._delegate,t)}updatePassword(t){return MB(this._delegate,t)}updatePhoneNumber(t){return mG(this._delegate,t)}updateProfile(t){return xB(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return NB(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qu.USER_MAP=new WeakMap;const E0=Dt;class $T{constructor(t,e){if(this.app=t,e.isInitialized()){this._delegate=e.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=t.options;E0(i,"invalid-api-key",{appName:t.name}),E0(i,"invalid-api-key",{appName:t.name});const s=typeof window<"u"?Ah:void 0;this._delegate=e.initialize({options:{persistence:WH(i,t.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(iz),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){jz(this._delegate,t,e)}applyActionCode(t){return vB(this._delegate,t)}checkActionCode(t){return a9(this._delegate,t)}confirmPasswordReset(t,e){return yB(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return $a(this._delegate,TB(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return CB(this._delegate,t)}isSignInWithEmailLink(t){return AB(this._delegate,t)}async getRedirectResult(){E0(YE(),this._delegate,"operation-not-supported-in-this-environment");const t=await OG(this._delegate,Ah);return t?$a(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){MH(this._delegate,t)}onAuthStateChanged(t,e,i){const{next:s,error:o,complete:c}=a6(t,e,i);return this._delegate.onAuthStateChanged(s,o,c)}onIdTokenChanged(t,e,i){const{next:s,error:o,complete:c}=a6(t,e,i);return this._delegate.onIdTokenChanged(s,o,c)}sendSignInLinkToEmail(t,e){return bB(this._delegate,t,e)}sendPasswordResetEmail(t,e){return _B(this._delegate,t,e||void 0)}async setPersistence(t){FH(this._delegate,t);let e;switch(t){case wr.SESSION:e=md;break;case wr.LOCAL:e=await Cr(E_)._isAvailable()?E_:Gb;break;case wr.NONE:e=Ap;break;default:return Ms("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return $a(this._delegate,dB(this._delegate))}signInWithCredential(t){return $a(this._delegate,v2(this._delegate,t))}signInWithCustomToken(t){return $a(this._delegate,gB(this._delegate,t))}signInWithEmailAndPassword(t,e){return $a(this._delegate,SB(this._delegate,t,e))}signInWithEmailLink(t,e){return $a(this._delegate,wB(this._delegate,t,e))}signInWithPhoneNumber(t,e){return ZT(this._delegate,hG(this._delegate,t,e))}async signInWithPopup(t){return E0(YE(),this._delegate,"operation-not-supported-in-this-environment"),$a(this._delegate,vG(this._delegate,t,Ah))}async signInWithRedirect(t){return E0(YE(),this._delegate,"operation-not-supported-in-this-environment"),await WT(this._delegate),RG(this._delegate,t,Ah)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return EB(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}$T.Persistence=wr;function a6(n,t,e){let i=n;typeof n!="function"&&({next:i,error:t,complete:e}=n);const s=i;return{next:c=>s(c&&Qu.getOrCreate(c)),error:t,complete:e}}function WH(n,t){const e=jH(n,t);if(typeof self<"u"&&!e.includes(E_)&&e.push(E_),typeof window<"u")for(const i of[Gb,md])e.includes(i)||e.push(i);return e.includes(Ap)||e.push(Ap),e}class Xb{static credential(t,e){return pd.credential(t,e)}constructor(){this.providerId="phone",this._delegate=new pd(C9(Eo.auth()))}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Xb.PHONE_SIGN_IN_METHOD=pd.PHONE_SIGN_IN_METHOD;Xb.PROVIDER_ID=pd.PROVIDER_ID;const ZH=Dt;class $H{constructor(t,e,i=Eo.app()){ZH(i.options?.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new uG(i.auth(),t,e),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const tq="auth-compat";function eq(n){n.INTERNAL.registerComponent(new Bi(tq,t=>{const e=t.getProvider("app-compat").getImmediate(),i=t.getProvider("auth");return new $T(e,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Lm.EMAIL_SIGNIN,PASSWORD_RESET:Lm.PASSWORD_RESET,RECOVER_EMAIL:Lm.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Lm.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Lm.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Lm.VERIFY_EMAIL}},EmailAuthProvider:Jh,FacebookAuthProvider:Hl,GithubAuthProvider:Fl,GoogleAuthProvider:ql,OAuthProvider:Zm,SAMLAuthProvider:Av,PhoneAuthProvider:Xb,PhoneMultiFactorGenerator:T9,RecaptchaVerifier:$H,TwitterAuthProvider:jl,Auth:$T,AuthCredential:Bp,Error:zi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(PH,VH)}eq(Eo);const nq="@firebase/firestore-compat",iq="0.4.5";function Jb(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new St("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function r6(){if(typeof Uint8Array>"u")throw new St("unimplemented","Uint8Arrays are not available in this environment.")}function o6(){if(!dV())throw new St("unimplemented","Blobs are unavailable in Firestore in this environment.")}let N9=class tS{constructor(t){this._delegate=t}static fromBase64String(t){return o6(),new tS(Js.fromBase64String(t))}static fromUint8Array(t){return r6(),new tS(Js.fromUint8Array(t))}toBase64(){return o6(),this._delegate.toBase64()}toUint8Array(){return r6(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function eS(n){return sq(n,["next","error","complete"])}function sq(n,t){if(typeof n!="object"||n===null)return!1;const e=n;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}class aq{enableIndexedDbPersistence(t,e){return rU(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return oU(t._delegate)}clearIndexedDbPersistence(t){return lU(t._delegate)}}class D9{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Mh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Zo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t={...e,...t},delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){nU(this._delegate,t,e,i)}enableNetwork(){return cU(this._delegate)}disableNetwork(){return hU(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,$w("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uU(this._delegate)}onSnapshotsInSync(t){return KU(this._delegate,t)}get app(){if(!this._appCompat)throw new St("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Rp(this,_b(this._delegate,t))}catch(e){throw va(e,"collection()","Firestore.collection()")}}doc(t){try{return new go(this,Ev(this._delegate,t))}catch(e){throw va(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ya(this,iU(this._delegate,t))}catch(e){throw va(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return UU(this._delegate,e=>t(new x9(this,e)))}batch(){return $s(this._delegate),new O9(new VU(this._delegate,t=>z_(this._delegate,t)))}loadBundle(t){return fU(this._delegate,t)}namedQuery(t){return dU(this._delegate,t).then(e=>e?new ya(this,e):null)}}class w2 extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new N9(new Js(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return go.forKey(e,this.firestore,null)}}function rq(n){wP(n)}class x9{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new w2(t)}get(t){const e=Wf(t);return this._delegate.get(e).then(i=>new T_(this._firestore,new yo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const s=Wf(t);return i?(Jb("Transaction.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Wf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Wf(t);return this._delegate.delete(e),this}}class O9{constructor(t){this._delegate=t}set(t,e,i){const s=Wf(t);return i?(Jb("WriteBatch.set",i),this._delegate.set(s,e,i)):this._delegate.set(s,e),this}update(t,e,i,...s){const o=Wf(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...s),this}delete(t){const e=Wf(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class _d{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Y0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new S_(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=_d.INSTANCES;let s=i.get(t);s||(s=new WeakMap,i.set(t,s));let o=s.get(e);return o||(o=new _d(t,new w2(t),e),s.set(e,o)),o}}_d.INSTANCES=new WeakMap;class go{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new w2(t)}static forPath(t,e,i){if(t.length%2!==0)throw new St("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new go(e,new In(e._delegate,i,new Ut(t)))}static forKey(t,e,i){return new go(e,new In(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Rp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Rp(this.firestore,_b(this._delegate,t))}catch(e){throw va(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=jt(t),t instanceof In?c8(this._delegate,t):!1}set(t,e){e=Jb("DocumentReference.set",e);try{return e?P5(this._delegate,t,e):P5(this._delegate,t)}catch(i){throw va(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?V5(this._delegate,t):V5(this._delegate,t,e,...i)}catch(s){throw va(s,"updateDoc()","DocumentReference.update()")}}delete(){return FU(this._delegate)}onSnapshot(...t){const e=M9(t),i=P9(t,s=>new T_(this.firestore,new yo(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return N8(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=BU(this._delegate):t?.source==="server"?e=GU(this._delegate):e=zU(this._delegate),e.then(i=>new T_(this.firestore,new yo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new go(this.firestore,t?this._delegate.withConverter(_d.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function va(n,t,e){return n.message=n.message.replace(t,e),n}function M9(n){for(const t of n)if(typeof t=="object"&&!eS(t))return t;return{}}function P9(n,t){let e;return eS(n[0])?e=n[0]:eS(n[1])?e=n[1]:typeof n[0]=="function"?e={next:n[0],error:n[1],complete:n[2]}:e={next:n[1],error:n[2],complete:n[3]},{next:i=>{e.next&&e.next(t(i))},error:e.error?.bind(e),complete:e.complete?.bind(e)}}class T_{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return C8(this._delegate,t._delegate)}}class S_ extends T_{data(t){const e=this._delegate.data(t);return this._delegate._converter||RP(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}}class ya{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new w2(t)}where(t,e,i){try{return new ya(this.firestore,ph(this._delegate,AU(t,e,i)))}catch(s){throw va(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ya(this.firestore,ph(this._delegate,wU(t,e)))}catch(i){throw va(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ya(this.firestore,ph(this._delegate,RU(t)))}catch(e){throw va(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ya(this.firestore,ph(this._delegate,CU(t)))}catch(e){throw va(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ya(this.firestore,ph(this._delegate,IU(...t)))}catch(e){throw va(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ya(this.firestore,ph(this._delegate,NU(...t)))}catch(e){throw va(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ya(this.firestore,ph(this._delegate,DU(...t)))}catch(e){throw va(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ya(this.firestore,ph(this._delegate,xU(...t)))}catch(e){throw va(e,"endAt()","Query.endAt()")}}isEqual(t){return h8(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=HU(this._delegate):t?.source==="server"?e=qU(this._delegate):e=I8(this._delegate),e.then(i=>new nS(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=M9(t),i=P9(t,s=>new nS(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return N8(this._delegate,e,i)}withConverter(t){return new ya(this.firestore,t?this._delegate.withConverter(_d.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class oq{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new S_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nS{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ya(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new S_(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new oq(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new S_(this._firestore,i))})}isEqual(t){return C8(this._delegate,t._delegate)}}class Rp extends ya{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new go(this.firestore,t):null}doc(t){try{return t===void 0?new go(this.firestore,Ev(this._delegate)):new go(this.firestore,Ev(this._delegate,t))}catch(e){throw va(e,"doc()","CollectionReference.doc()")}}add(t){return jU(this._delegate,t).then(e=>new go(this.firestore,e))}isEqual(t){return c8(this._delegate,t._delegate)}withConverter(t){return new Rp(this.firestore,t?this._delegate.withConverter(_d.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Wf(n){return Xe(n,In)}class Wb{constructor(...t){this._delegate=new fd(...t)}static documentId(){return new Wb(Xn.keyField().canonicalString())}isEqual(t){return t=jt(t),t instanceof fd?this._delegate._internalPath.isEqual(t._internalPath):!1}}class Kf{static serverTimestamp(){const t=vU();return t._methodName="FieldValue.serverTimestamp",new Kf(t)}static delete(){const t=yU();return t._methodName="FieldValue.delete",new Kf(t)}static arrayUnion(...t){const e=EU(...t);return e._methodName="FieldValue.arrayUnion",new Kf(e)}static arrayRemove(...t){const e=TU(...t);return e._methodName="FieldValue.arrayRemove",new Kf(e)}static increment(t){const e=SU(t);return e._methodName="FieldValue.increment",new Kf(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}const lq={Firestore:D9,GeoPoint:Xo,Timestamp:an,Blob:N9,Transaction:x9,WriteBatch:O9,DocumentReference:go,DocumentSnapshot:T_,Query:ya,QueryDocumentSnapshot:S_,QuerySnapshot:nS,CollectionReference:Rp,FieldPath:Wb,FieldValue:Kf,setLogLevel:rq,CACHE_SIZE_UNLIMITED:aU};function uq(n,t){n.INTERNAL.registerComponent(new Bi("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("firestore").getImmediate();return t(i,s)},"PUBLIC").setServiceProps({...lq}))}function cq(n){uq(n,(t,e)=>new D9(t,e,new aq)),n.registerVersion(nq,iq)}cq(Eo);const V9="firebasestorage.googleapis.com",k9="storageBucket",hq=120*1e3,fq=600*1e3,dq=1e3;class oi extends zi{constructor(t,e,i=0){super(QE(t),`Firebase Storage: ${e} (${QE(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return QE(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bn||(Bn={}));function QE(n){return"storage/"+n}function Zb(){const n="An unknown error occurred, please check the error payload for server response.";return new oi(Bn.UNKNOWN,n)}function mq(n){return new oi(Bn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function pq(n){return new oi(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gq(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new oi(Bn.UNAUTHENTICATED,n)}function _q(){return new oi(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yq(n){return new oi(Bn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function L9(){return new oi(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U9(){return new oi(Bn.CANCELED,"User canceled the upload/download.")}function vq(n){return new oi(Bn.INVALID_URL,"Invalid URL '"+n+"'.")}function Eq(n){return new oi(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Tq(){return new oi(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+k9+"' property when initializing the app?")}function z9(){return new oi(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Sq(){return new oi(Bn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function bq(){return new oi(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Aq(n){return new oi(Bn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(n){return new oi(Bn.INVALID_ARGUMENT,n)}function B9(){return new oi(Bn.APP_DELETED,"The Firebase app was deleted.")}function G9(n){return new oi(Bn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $0(n,t){return new oi(Bn.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function T0(n){throw new oi(Bn.INTERNAL_ERROR,"Internal error: "+n)}class Ws{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ws.makeFromUrl(t,e)}catch{return new Ws(t,"")}if(i.path==="")return i;throw Eq(t)}static makeFromUrl(t,e){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),m={bucket:1,path:3};function g(W){W.path_=decodeURIComponent(W.path)}const E="v[A-Za-z0-9_]+",b=e.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${E}/b/${s}/o${A}`,"i"),D={bucket:1,path:3},k=e===V9?"(?:storage.googleapis.com|storage.cloud.google.com)":e,U="([^?#]*)",F=new RegExp(`^https?://${k}/${s}/${U}`,"i"),X=[{regex:f,indices:m,postModify:o},{regex:N,indices:D,postModify:g},{regex:F,indices:{bucket:1,path:2},postModify:g}];for(let W=0;W<X.length;W++){const mt=X[W],rt=mt.regex.exec(t);if(rt){const V=rt[mt.indices.bucket];let M=rt[mt.indices.path];M||(M=""),i=new Ws(V,M),mt.postModify(i);break}}if(i==null)throw vq(t);return i}}class wq{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Rq(n,t,e){let i=1,s=null,o=null,c=!1,f=0;function m(){return f===2}let g=!1;function E(...U){g||(g=!0,t.apply(null,U))}function b(U){s=setTimeout(()=>{s=null,n(N,m())},U)}function A(){o&&clearTimeout(o)}function N(U,...F){if(g){A();return}if(U){A(),E.call(null,U,...F);return}if(m()||c){A(),E.call(null,U,...F);return}i<64&&(i*=2);let X;f===1?(f=2,X=0):X=(i+Math.random())*1e3,b(X)}let D=!1;function k(U){D||(D=!0,A(),!g&&(s!==null?(U||(f=2),clearTimeout(s),b(0)):U||(f=1)))}return b(0),o=setTimeout(()=>{c=!0,k(!0)},e),k}function Cq(n){n(!1)}function Iq(n){return n!==void 0}function Nq(n){return typeof n=="function"}function Dq(n){return typeof n=="object"&&!Array.isArray(n)}function R2(n){return typeof n=="string"||n instanceof String}function l6(n){return $b()&&n instanceof Blob}function $b(){return typeof Blob<"u"}function iS(n,t,e,i){if(i<t)throw tp(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw tp(`Invalid value for '${n}'. Expected ${e} or less.`)}function Wh(n,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function H9(n){const t=encodeURIComponent;let e="?";for(const i in n)if(n.hasOwnProperty(i)){const s=t(i)+"="+t(n[i]);e=e+s+"&"}return e=e.slice(0,-1),e}var nd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(nd||(nd={}));function q9(n,t){const e=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||s||o}class xq{constructor(t,e,i,s,o,c,f,m,g,E,b,A=!0,N=!1){this.url_=t,this.method_=e,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=E,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,k)=>{this.resolve_=D,this.reject_=k,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new M1(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===nd.NO_ERROR,m=o.getStatus();if(!f||q9(m,this.additionalRetryCodes_)&&this.retry){const E=o.getErrorCode()===nd.ABORT;i(!1,new M1(!1,null,E));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new M1(g,o))})},e=(i,s)=>{const o=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());Iq(m)?o(m):o()}catch(m){c(m)}else if(f!==null){const m=Zb();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(s.canceled){const m=this.appDelete_?B9():U9();c(m)}else{const m=L9();c(m)}};this.canceled_?e(!1,new M1(!1,null,!0)):this.backoffId_=Rq(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Cq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class M1{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function Oq(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function Mq(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Pq(n,t){t&&(n["X-Firebase-GMPID"]=t)}function Vq(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function kq(n,t,e,i,s,o,c=!0,f=!1){const m=H9(n.urlParams),g=n.url+m,E=Object.assign({},n.headers);return Pq(E,t),Oq(E,e),Mq(E,o),Vq(E,i),new xq(g,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,f)}function Lq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Uq(...n){const t=Lq();if(t!==void 0){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}else{if($b())return new Blob(n);throw new oi(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zq(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function Bq(n){if(typeof atob>"u")throw Aq("base-64");return atob(n)}const _o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class XE{constructor(t,e){this.data=t,this.contentType=e||null}}function F9(n,t){switch(n){case _o.RAW:return new XE(j9(t));case _o.BASE64:case _o.BASE64URL:return new XE(K9(n,t));case _o.DATA_URL:return new XE(Hq(t),qq(t))}throw Zb()}function j9(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{const o=i,c=n.charCodeAt(++e);i=65536|(o&1023)<<10|c&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function Gq(n){let t;try{t=decodeURIComponent(n)}catch{throw $0(_o.DATA_URL,"Malformed data URL.")}return j9(t)}function K9(n,t){switch(n){case _o.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw $0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case _o.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw $0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=Bq(t)}catch(s){throw s.message.includes("polyfill")?s:$0(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}class Y9{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(e===null)throw $0(_o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;i!=null&&(this.base64=Fq(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function Hq(n){const t=new Y9(n);return t.base64?K9(_o.BASE64,t.rest):Gq(t.rest)}function qq(n){return new Y9(n).contentType}function Fq(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}class ju{constructor(t,e){let i=0,s="";l6(t)?(this.data_=t,i=t.size,s=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,e){if(l6(this.data_)){const i=this.data_,s=zq(i,t,e);return s===null?null:new ju(s)}else{const i=new Uint8Array(this.data_.buffer,t,e-t);return new ju(i,!0)}}static getBlob(...t){if($b()){const e=t.map(i=>i instanceof ju?i.data_:i);return new ju(Uq.apply(null,e))}else{const e=t.map(c=>R2(c)?F9(_o.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let o=0;return e.forEach(c=>{for(let f=0;f<c.length;f++)s[o++]=c[f]}),new ju(s,!0)}}uploadData(){return this.data_}}function t4(n){let t;try{t=JSON.parse(n)}catch{return null}return Dq(t)?t:null}function jq(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function Kq(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return n.length===0?e:n+"/"+e}function Q9(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function Yq(n,t){return t}class _a{constructor(t,e,i,s){this.server=t,this.local=e||t,this.writable=!!i,this.xform=s||Yq}}let P1=null;function Qq(n){return!R2(n)||n.length<2?n:Q9(n)}function C2(){if(P1)return P1;const n=[];n.push(new _a("bucket")),n.push(new _a("generation")),n.push(new _a("metageneration")),n.push(new _a("name","fullPath",!0));function t(o,c){return Qq(c)}const e=new _a("name");e.xform=t,n.push(e);function i(o,c){return c!==void 0?Number(c):c}const s=new _a("size");return s.xform=i,n.push(s),n.push(new _a("timeCreated")),n.push(new _a("updated")),n.push(new _a("md5Hash",null,!0)),n.push(new _a("cacheControl",null,!0)),n.push(new _a("contentDisposition",null,!0)),n.push(new _a("contentEncoding",null,!0)),n.push(new _a("contentLanguage",null,!0)),n.push(new _a("contentType",null,!0)),n.push(new _a("metadata","customMetadata",!0)),P1=n,P1}function Xq(n,t){function e(){const i=n.bucket,s=n.fullPath,o=new Ws(i,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:e})}function Jq(n,t,e){const i={};i.type="file";const s=e.length;for(let o=0;o<s;o++){const c=e[o];i[c.local]=c.xform(i,t[c.server])}return Xq(i,n),i}function X9(n,t,e){const i=t4(t);return i===null?null:Jq(n,i,e)}function Wq(n,t,e,i){const s=t4(t);if(s===null||!R2(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const E=n.bucket,b=n.fullPath,A="/b/"+c(E)+"/o/"+c(b),N=Wh(A,e,i),D=H9({alt:"media",token:g});return N+D})[0]}function e4(n,t){const e={},i=t.length;for(let s=0;s<i;s++){const o=t[s];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const u6="prefixes",c6="items";function Zq(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[u6])for(const s of e[u6]){const o=s.replace(/\/$/,""),c=n._makeStorageReference(new Ws(t,o));i.prefixes.push(c)}if(e[c6])for(const s of e[c6]){const o=n._makeStorageReference(new Ws(t,s.name));i.items.push(o)}return i}function $q(n,t,e){const i=t4(e);return i===null?null:Zq(n,t,i)}class fc{constructor(t,e,i,s){this.url=t,this.method=e,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zl(n){if(!n)throw Zb()}function I2(n,t){function e(i,s){const o=X9(n,s,t);return Zl(o!==null),o}return e}function tF(n,t){function e(i,s){const o=$q(n,t,s);return Zl(o!==null),o}return e}function eF(n,t){function e(i,s){const o=X9(n,s,t);return Zl(o!==null),Wq(o,s,n.host,n._protocol)}return e}function Hp(n){function t(e,i){let s;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?s=_q():s=gq():e.getStatus()===402?s=pq(n.bucket):e.getStatus()===403?s=yq(n.path):s=i,s.status=e.getStatus(),s.serverResponse=i.serverResponse,s}return t}function N2(n){const t=Hp(n);function e(i,s){let o=t(i,s);return i.getStatus()===404&&(o=mq(n.path)),o.serverResponse=s.serverResponse,o}return e}function J9(n,t,e){const i=t.fullServerUrl(),s=Wh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new fc(s,o,I2(n,e),c);return f.errorHandler=N2(t),f}function nF(n,t,e,i,s){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",e.length>0&&(o.delimiter=e),i&&(o.pageToken=i),s&&(o.maxResults=s);const c=t.bucketOnlyServerUrl(),f=Wh(c,n.host,n._protocol),m="GET",g=n.maxOperationRetryTime,E=new fc(f,m,tF(n,t.bucket),g);return E.urlParams=o,E.errorHandler=Hp(t),E}function iF(n,t,e){const i=t.fullServerUrl(),s=Wh(i,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,f=new fc(s,o,eF(n,e),c);return f.errorHandler=N2(t),f}function sF(n,t,e,i){const s=t.fullServerUrl(),o=Wh(s,n.host,n._protocol),c="PATCH",f=e4(e,i),m={"Content-Type":"application/json; charset=utf-8"},g=n.maxOperationRetryTime,E=new fc(o,c,I2(n,i),g);return E.headers=m,E.body=f,E.errorHandler=N2(t),E}function aF(n,t){const e=t.fullServerUrl(),i=Wh(e,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function c(m,g){}const f=new fc(i,s,c,o);return f.successCodes=[200,204],f.errorHandler=N2(t),f}function rF(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function W9(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=rF(null,t)),i}function oF(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let X="";for(let W=0;W<2;W++)X=X+Math.random().toString().slice(2);return X}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const g=W9(t,i,s),E=e4(g,e),b="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+m+"--",N=ju.getBlob(b,i,A);if(N===null)throw z9();const D={name:g.fullPath},k=Wh(o,n.host,n._protocol),U="POST",F=n.maxUploadRetryTime,j=new fc(k,U,I2(n,e),F);return j.urlParams=D,j.headers=c,j.body=N.uploadData(),j.errorHandler=Hp(t),j}class Iv{constructor(t,e,i,s){this.current=t,this.total=e,this.finalized=!!i,this.metadata=s||null}}function n4(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zl(!1)}return Zl(!!e&&(t||["active"]).indexOf(e)!==-1),e}function lF(n,t,e,i,s){const o=t.bucketOnlyServerUrl(),c=W9(t,i,s),f={name:c.fullPath},m=Wh(o,n.host,n._protocol),g="POST",E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},b=e4(c,e),A=n.maxUploadRetryTime;function N(k){n4(k);let U;try{U=k.getResponseHeader("X-Goog-Upload-URL")}catch{Zl(!1)}return Zl(R2(U)),U}const D=new fc(m,g,N,A);return D.urlParams=f,D.headers=E,D.body=b,D.errorHandler=Hp(t),D}function uF(n,t,e,i){const s={"X-Goog-Upload-Command":"query"};function o(g){const E=n4(g,["active","final"]);let b=null;try{b=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zl(!1)}b||Zl(!1);const A=Number(b);return Zl(!isNaN(A)),new Iv(A,i.size(),E==="final")}const c="POST",f=n.maxUploadRetryTime,m=new fc(e,c,o,f);return m.headers=s,m.errorHandler=Hp(t),m}const h6=256*1024;function cF(n,t,e,i,s,o,c,f){const m=new Iv(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw Sq();const g=m.total-m.current;let E=g;s>0&&(E=Math.min(E,s));const b=m.current,A=b+E;let N="";E===0?N="finalize":g===E?N="upload, finalize":N="upload";const D={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${m.current}`},k=i.slice(b,A);if(k===null)throw z9();function U(W,mt){const rt=n4(W,["active","final"]),V=m.current+E,M=i.size();let L;return rt==="final"?L=I2(t,o)(W,mt):L=null,new Iv(V,M,rt==="final",L)}const F="POST",j=t.maxUploadRetryTime,X=new fc(e,F,U,j);return X.headers=D,X.body=k.uploadData(),X.progressCallback=f||null,X.errorHandler=Hp(n),X}const hF={STATE_CHANGED:"state_changed"},Ea={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function JE(n){switch(n){case"running":case"pausing":case"canceling":return Ea.RUNNING;case"paused":return Ea.PAUSED;case"success":return Ea.SUCCESS;case"canceled":return Ea.CANCELED;case"error":return Ea.ERROR;default:return Ea.ERROR}}class fF{constructor(t,e,i){if(Nq(t)||e!=null||i!=null)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Um(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class dF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nd.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nd.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nd.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,s,o){if(this.sent_)throw T0("cannot .send() more than once");if(iu(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw T0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw T0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw T0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw T0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class mF extends dF{initXhr(){this.xhr_.responseType="text"}}function Kl(){return new mF}class Z9{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=C2(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Bn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(q9(s.status,[]))if(o)s=L9();else{this.sleepTime=Math.max(this.sleepTime*2,dq),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Bn.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,e)=>{const i=lF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Kl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const s=uF(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(s,Kl,e,i);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=h6*this._chunkMultiplier,e=new Iv(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,o)=>{let c;try{c=cF(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(c,Kl,s,o,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){h6*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=J9(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,Kl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=oF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Kl,t,e);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e=this._state==="paused";this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=U9(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=JE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,s){const o=new fF(e||void 0,i||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);e!==-1&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(JE(this._state)){case Ea.SUCCESS:Um(this._resolve.bind(null,this.snapshot))();break;case Ea.CANCELED:case Ea.ERROR:const e=this._reject;Um(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(JE(this._state)){case Ea.RUNNING:case Ea.PAUSED:t.next&&Um(t.next.bind(t,this.snapshot))();break;case Ea.SUCCESS:t.complete&&Um(t.complete.bind(t))();break;case Ea.CANCELED:case Ea.ERROR:t.error&&Um(t.error.bind(t,this._error))();break;default:t.error&&Um(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}class yd{constructor(t,e){this._service=t,e instanceof Ws?this._location=e:this._location=Ws.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new yd(t,e)}get root(){const t=new Ws(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q9(this._location.path)}get storage(){return this._service}get parent(){const t=jq(this._location.path);if(t===null)return null;const e=new Ws(this._location.bucket,t);return new yd(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw G9(t)}}function pF(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new Z9(n,new ju(t),e)}function gF(n){const t={prefixes:[],items:[]};return $9(n,t).then(()=>t)}async function $9(n,t,e){const s=await tI(n,{pageToken:e});t.prefixes.push(...s.prefixes),t.items.push(...s.items),s.nextPageToken!=null&&await $9(n,t,s.nextPageToken)}function tI(n,t){t!=null&&typeof t.maxResults=="number"&&iS("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=nF(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Kl)}function _F(n){n._throwIfRoot("getMetadata");const t=J9(n.storage,n._location,C2());return n.storage.makeRequestWithTokens(t,Kl)}function yF(n,t){n._throwIfRoot("updateMetadata");const e=sF(n.storage,n._location,t,C2());return n.storage.makeRequestWithTokens(e,Kl)}function vF(n){n._throwIfRoot("getDownloadURL");const t=iF(n.storage,n._location,C2());return n.storage.makeRequestWithTokens(t,Kl).then(e=>{if(e===null)throw bq();return e})}function EF(n){n._throwIfRoot("deleteObject");const t=aF(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Kl)}function eI(n,t){const e=Kq(n._location.path,t),i=new Ws(n._location.bucket,e);return new yd(n.storage,i)}function TF(n){return/^[A-Za-z]+:\/\//.test(n)}function SF(n,t){return new yd(n,t)}function nI(n,t){if(n instanceof i4){const e=n;if(e._bucket==null)throw Tq();const i=new yd(e,e._bucket);return t!=null?nI(i,t):i}else return t!==void 0?eI(n,t):n}function bF(n,t){if(t&&TF(t)){if(n instanceof i4)return SF(n,t);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return nI(n,t)}function f6(n,t){const e=t?.[k9];return e==null?null:Ws.makeFromBucketSpec(e,n)}function AF(n,t,e,i={}){n.host=`${t}:${e}`;const s=iu(t);s&&(Bv(`https://${n.host}/b`),Gv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:Rw(o,n.app.options.projectId))}class i4{constructor(t,e,i,s,o,c=!1){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=V9,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hq,this._maxUploadRetryTime=fq,this._requests=new Set,s!=null?this._bucket=Ws.makeFromBucketSpec(s,this._host):this._bucket=f6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ws.makeFromBucketSpec(this._url,t):this._bucket=f6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){iS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){iS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new yd(this,t)}_makeRequest(t,e,i,s,o=!0){if(this._deleted)return new wq(B9());{const c=kq(t,this._appId,i,s,e,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,e){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,s).getPromise()}}const d6="@firebase/storage",m6="0.14.0";const wF="storage";function RF(n,t,e){return n=jt(n),pF(n,t,e)}function CF(n){return n=jt(n),_F(n)}function IF(n,t){return n=jt(n),yF(n,t)}function NF(n,t){return n=jt(n),tI(n,t)}function DF(n){return n=jt(n),gF(n)}function xF(n){return n=jt(n),vF(n)}function OF(n){return n=jt(n),EF(n)}function p6(n,t){return n=jt(n),bF(n,t)}function MF(n,t){return eI(n,t)}function PF(n,t,e,i={}){AF(n,t,e,i)}function VF(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new i4(e,i,s,t,ac)}function kF(){ba(new Bi(wF,VF,"PUBLIC").setMultipleInstances(!0)),Wi(d6,m6,""),Wi(d6,m6,"esm2020")}kF();class V1{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class g6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new V1(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new V1(i,this,this._ref))},e)}on(t,e,i,s){let o;return e&&(typeof e=="function"?o=c=>e(new V1(c,this,this._ref)):o={next:e.next?c=>e.next(new V1(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,i||void 0,s||void 0)}}class _6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Wu(t,this._service))}get items(){return this._delegate.items.map(t=>new Wu(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wu{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=MF(this._delegate,t);return new Wu(e,this.storage)}get root(){return new Wu(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return t==null?null:new Wu(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new g6(RF(this._delegate,t,e),this)}putString(t,e=_o.RAW,i){this._throwIfRoot("putString");const s=F9(e,t),o={...i};return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),new g6(new Z9(this._delegate,new ju(s.data,!0),o),this)}listAll(){return DF(this._delegate).then(t=>new _6(t,this.storage))}list(t){return NF(this._delegate,t||void 0).then(e=>new _6(e,this.storage))}getMetadata(){return CF(this._delegate)}updateMetadata(t){return IF(this._delegate,t)}getDownloadURL(){return xF(this._delegate)}delete(){return this._throwIfRoot("delete"),OF(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw G9(t)}}class iI{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(y6(t))throw tp("ref() expected a child path but got a URL, use refFromURL instead.");return new Wu(p6(this._delegate,t),this)}refFromURL(t){if(!y6(t))throw tp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ws.makeFromUrl(t,this._delegate.host)}catch{throw tp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wu(p6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){PF(this._delegate,t,e,i)}}function y6(n){return/^[A-Za-z]+:\/\//.test(n)}const LF="@firebase/storage-compat",UF="0.4.0";const zF="storage-compat";function BF(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new iI(e,i)}function GF(n){const t={TaskState:Ea,TaskEvent:hF,StringFormat:_o,Storage:iI,Reference:Wu};n.INTERNAL.registerComponent(new Bi(zF,BF,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion(LF,UF)}GF(Eo);const sI="@firebase/installations",s4="0.6.19";const aI=1e4,rI=`w:${s4}`,oI="FIS_v2",HF="https://firebaseinstallations.googleapis.com/v1",qF=3600*1e3,FF="installations",jF="Installations";const KF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vd=new su(FF,jF,KF);function lI(n){return n instanceof zi&&n.code.includes("request-failed")}function uI({projectId:n}){return`${HF}/projects/${n}/installations`}function cI(n){return{token:n.token,requestStatus:2,expiresIn:QF(n.expiresIn),creationTime:Date.now()}}async function hI(n,t){const i=(await t.json()).error;return vd.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function fI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function YF(n,{refreshToken:t}){const e=fI(n);return e.append("Authorization",XF(t)),e}async function dI(n){const t=await n();return t.status>=500&&t.status<600?n():t}function QF(n){return Number(n.replace("s","000"))}function XF(n){return`${oI} ${n}`}async function JF({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=uI(n),s=fI(n),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={fid:e,authVersion:oI,appId:n.appId,sdkVersion:rI},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await dI(()=>fetch(i,f));if(m.ok){const g=await m.json();return{fid:g.fid||e,registrationStatus:2,refreshToken:g.refreshToken,authToken:cI(g.authToken)}}else throw await hI("Create Installation",m)}function mI(n){return new Promise(t=>{setTimeout(t,n)})}function WF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const ZF=/^[cdef][\w-]{21}$/,sS="";function $F(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=tj(n);return ZF.test(e)?e:sS}catch{return sS}}function tj(n){return WF(n).substr(0,22)}function D2(n){return`${n.appName}!${n.appId}`}const pI=new Map;function gI(n,t){const e=D2(n);_I(e,t),ej(e,t)}function _I(n,t){const e=pI.get(n);if(e)for(const i of e)i(t)}function ej(n,t){const e=nj();e&&e.postMessage({key:n,fid:t}),ij()}let Zf=null;function nj(){return!Zf&&"BroadcastChannel"in self&&(Zf=new BroadcastChannel("[Firebase] FID Change"),Zf.onmessage=n=>{_I(n.data.key,n.data.fid)}),Zf}function ij(){pI.size===0&&Zf&&(Zf.close(),Zf=null)}const sj="firebase-installations-database",aj=1,Ed="firebase-installations-store";let WE=null;function a4(){return WE||(WE=Dp(sj,aj,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Ed)}})),WE}async function Nv(n,t){const e=D2(n),s=(await a4()).transaction(Ed,"readwrite"),o=s.objectStore(Ed),c=await o.get(e);return await o.put(t,e),await s.done,(!c||c.fid!==t.fid)&&gI(n,t.fid),t}async function yI(n){const t=D2(n),i=(await a4()).transaction(Ed,"readwrite");await i.objectStore(Ed).delete(t),await i.done}async function x2(n,t){const e=D2(n),s=(await a4()).transaction(Ed,"readwrite"),o=s.objectStore(Ed),c=await o.get(e),f=t(c);return f===void 0?await o.delete(e):await o.put(f,e),await s.done,f&&(!c||c.fid!==f.fid)&&gI(n,f.fid),f}async function r4(n){let t;const e=await x2(n.appConfig,i=>{const s=rj(i),o=oj(n,s);return t=o.registrationPromise,o.installationEntry});return e.fid===sS?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function rj(n){const t=n||{fid:$F(),registrationStatus:0};return vI(t)}function oj(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vd.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=lj(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:uj(n)}:{installationEntry:t}}async function lj(n,t){try{const e=await JF(n,t);return Nv(n.appConfig,e)}catch(e){throw lI(e)&&e.customData.serverCode===409?await yI(n.appConfig):await Nv(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function uj(n){let t=await v6(n.appConfig);for(;t.registrationStatus===1;)await mI(100),t=await v6(n.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await r4(n);return i||e}return t}function v6(n){return x2(n,t=>{if(!t)throw vd.create("installation-not-found");return vI(t)})}function vI(n){return cj(n)?{fid:n.fid,registrationStatus:0}:n}function cj(n){return n.registrationStatus===1&&n.registrationTime+aI<Date.now()}async function hj({appConfig:n,heartbeatServiceProvider:t},e){const i=fj(n,e),s=YF(n,e),o=t.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&s.append("x-firebase-client",g)}const c={installation:{sdkVersion:rI,appId:n.appId}},f={method:"POST",headers:s,body:JSON.stringify(c)},m=await dI(()=>fetch(i,f));if(m.ok){const g=await m.json();return cI(g)}else throw await hI("Generate Auth Token",m)}function fj(n,{fid:t}){return`${uI(n)}/${t}/authTokens:generate`}async function o4(n,t=!1){let e;const i=await x2(n.appConfig,o=>{if(!EI(o))throw vd.create("not-registered");const c=o.authToken;if(!t&&pj(c))return o;if(c.requestStatus===1)return e=dj(n,t),o;{if(!navigator.onLine)throw vd.create("app-offline");const f=_j(o);return e=mj(n,f),f}});return e?await e:i.authToken}async function dj(n,t){let e=await E6(n.appConfig);for(;e.authToken.requestStatus===1;)await mI(100),e=await E6(n.appConfig);const i=e.authToken;return i.requestStatus===0?o4(n,t):i}function E6(n){return x2(n,t=>{if(!EI(t))throw vd.create("not-registered");const e=t.authToken;return yj(e)?{...t,authToken:{requestStatus:0}}:t})}async function mj(n,t){try{const e=await hj(n,t),i={...t,authToken:e};return await Nv(n.appConfig,i),e}catch(e){if(lI(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await yI(n.appConfig);else{const i={...t,authToken:{requestStatus:0}};await Nv(n.appConfig,i)}throw e}}function EI(n){return n!==void 0&&n.registrationStatus===2}function pj(n){return n.requestStatus===2&&!gj(n)}function gj(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+qF}function _j(n){const t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function yj(n){return n.requestStatus===1&&n.requestTime+aI<Date.now()}async function vj(n){const t=n,{installationEntry:e,registrationPromise:i}=await r4(t);return i?i.catch(console.error):o4(t).catch(console.error),e.fid}async function Ej(n,t=!1){const e=n;return await Tj(e),(await o4(e,t)).token}async function Tj(n){const{registrationPromise:t}=await r4(n);t&&await t}function Sj(n){if(!n||!n.options)throw ZE("App Configuration");if(!n.name)throw ZE("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw ZE(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ZE(n){return vd.create("missing-app-config-values",{valueName:n})}const TI="installations",bj="installations-internal",Aj=n=>{const t=n.getProvider("app").getImmediate(),e=Sj(t),i=Fv(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},wj=n=>{const t=n.getProvider("app").getImmediate(),e=Fv(t,TI).getImmediate();return{getId:()=>vj(e),getToken:s=>Ej(e,s)}};function Rj(){ba(new Bi(TI,Aj,"PUBLIC")),ba(new Bi(bj,wj,"PRIVATE"))}Rj();Wi(sI,s4);Wi(sI,s4,"esm2020");const Cj="/firebase-messaging-sw.js",Ij="/firebase-cloud-messaging-push-scope",SI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Nj="https://fcmregistrations.googleapis.com/v1",bI="google.c.a.c_id",Dj="google.c.a.c_l",xj="google.c.a.ts",Oj="google.c.a.e",T6=1e4;var S6;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(S6||(S6={}));var b_;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(b_||(b_={}));function qu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mj(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const $E="fcm_token_details_db",Pj=5,b6="fcm_token_object_Store";async function Vj(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes($E))return null;let t=null;return(await Dp($E,Pj,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(b6))return;const f=c.objectStore(b6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:qu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:qu(g.auth),p256dh:qu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:qu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:qu(g.auth),p256dh:qu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:qu(g.vapidKey)}}}}}})).close(),await Km($E),await Km("fcm_vapid_details_db"),await Km("undefined"),kj(t)?t:null}function kj(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const Lj="firebase-messaging-database",Uj=1,Td="firebase-messaging-store";let tT=null;function l4(){return tT||(tT=Dp(Lj,Uj,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Td)}})),tT}async function AI(n){const t=c4(n),i=await(await l4()).transaction(Td).objectStore(Td).get(t);if(i)return i;{const s=await Vj(n.appConfig.senderId);if(s)return await u4(n,s),s}}async function u4(n,t){const e=c4(n),s=(await l4()).transaction(Td,"readwrite");return await s.objectStore(Td).put(t,e),await s.done,t}async function zj(n){const t=c4(n),i=(await l4()).transaction(Td,"readwrite");await i.objectStore(Td).delete(t),await i.done}function c4({appConfig:n}){return n.appId}const Bj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Sa=new su("messaging","Messaging",Bj);async function Gj(n,t){const e=await f4(n),i=RI(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(h4(n.appConfig),s)).json()}catch(c){throw Sa.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Sa.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Sa.create("token-subscribe-no-token");return o.token}async function Hj(n,t){const e=await f4(n),i=RI(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${h4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw Sa.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw Sa.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Sa.create("token-update-no-token");return o.token}async function wI(n,t){const i={method:"DELETE",headers:await f4(n)};try{const o=await(await fetch(`${h4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw Sa.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw Sa.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function h4({projectId:n}){return`${Nj}/projects/${n}/registrations`}async function f4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function RI({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==SI&&(s.web.applicationPubKey=i),s}const qj=10080*60*1e3;async function Fj(n){const t=await Yj(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:qu(t.getKey("auth")),p256dh:qu(t.getKey("p256dh"))},i=await AI(n.firebaseDependencies);if(i){if(Qj(i.subscriptionOptions,e))return Date.now()>=i.createTime+qj?Kj(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await wI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return A6(n.firebaseDependencies,e)}else return A6(n.firebaseDependencies,e)}async function jj(n){const t=await AI(n.firebaseDependencies);t&&(await wI(n.firebaseDependencies,t.token),await zj(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function Kj(n,t){try{const e=await Hj(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await u4(n.firebaseDependencies,i),e}catch(e){throw e}}async function A6(n,t){const i={token:await Gj(n,t),createTime:Date.now(),subscriptionOptions:t};return await u4(n,i),i.token}async function Yj(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mj(t)})}function Qj(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function w6(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Xj(t,n),Jj(t,n),Wj(t,n),t}function Xj(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function Jj(n,t){t.data&&(n.data=t.data)}function Wj(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function Zj(n){return typeof n=="object"&&!!n&&bI in n}function $j(n){if(!n||!n.options)throw eT("App Configuration Object");if(!n.name)throw eT("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw eT(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function eT(n){return Sa.create("missing-app-config-values",{valueName:n})}let tK=class{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=$j(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}};async function CI(n){try{n.swRegistration=await navigator.serviceWorker.register(Cj,{scope:Ij}),n.swRegistration.update().catch(()=>{}),await eK(n.swRegistration)}catch(t){throw Sa.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function eK(n){return new Promise((t,e)=>{const i=setTimeout(()=>e(new Error(`Service worker not registered after ${T6} ms`)),T6),s=n.installing||n.waiting;n.active?(clearTimeout(i),t()):s?s.onstatechange=o=>{o.target?.state==="activated"&&(s.onstatechange=null,clearTimeout(i),t())}:(clearTimeout(i),e(new Error("No incoming service worker found.")))})}async function nK(n,t){if(!t&&!n.swRegistration&&await CI(n),!(!t&&n.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw Sa.create("invalid-sw-registration");n.swRegistration=t}}async function iK(n,t){t?n.vapidKey=t:n.vapidKey||(n.vapidKey=SI)}async function II(n,t){if(!navigator)throw Sa.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Sa.create("permission-blocked");return await iK(n,t?.vapidKey),await nK(n,t?.serviceWorkerRegistration),Fj(n)}async function sK(n,t,e){const i=aK(t);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:e[bI],message_name:e[Dj],message_time:e[xj],message_device_time:Math.floor(Date.now()/1e3)})}function aK(n){switch(n){case b_.NOTIFICATION_CLICKED:return"notification_open";case b_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function rK(n,t){const e=t.data;if(!e.isFirebaseMessaging)return;n.onMessageHandler&&e.messageType===b_.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(w6(e)):n.onMessageHandler.next(w6(e)));const i=e.data;Zj(i)&&i[Oj]==="1"&&await sK(n,e.messageType,i)}const R6="@firebase/messaging",C6="0.12.23";const oK=n=>{const t=new tK(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>rK(t,e)),t},lK=n=>{const t=n.getProvider("messaging").getImmediate();return{getToken:i=>II(t,i)}};function uK(){ba(new Bi("messaging",oK,"PUBLIC")),ba(new Bi("messaging-internal",lK,"PRIVATE")),Wi(R6,C6),Wi(R6,C6,"esm2020")}async function cK(n){if(!navigator)throw Sa.create("only-available-in-window");return n.swRegistration||await CI(n),jj(n)}function hK(n,t){if(!navigator)throw Sa.create("only-available-in-window");return n.onMessageHandler=t,()=>{n.onMessageHandler=null}}async function fK(n,t){return n=jt(n),II(n,t)}function dK(n){return n=jt(n),cK(n)}function mK(n,t){return n=jt(n),hK(n,t)}uK();const NI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pK="https://fcmregistrations.googleapis.com/v1",DI="FCM_MSG",gK="google.c.a.c_id",_K=3,yK=1;var Dv;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Dv||(Dv={}));var xv;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(xv||(xv={}));function Fu(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vK(n){const t="=".repeat((4-n.length%4)%4),e=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let o=0;o<i.length;++o)s[o]=i.charCodeAt(o);return s}const nT="fcm_token_details_db",EK=5,I6="fcm_token_object_Store";async function TK(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(nT))return null;let t=null;return(await Dp(nT,EK,{upgrade:async(i,s,o,c)=>{if(s<2||!i.objectStoreNames.contains(I6))return;const f=c.objectStore(I6),m=await f.index("fcmSenderId").get(n);if(await f.clear(),!!m){if(s===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;t={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Fu(g.vapidKey)}}}else if(s===3){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Fu(g.auth),p256dh:Fu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Fu(g.vapidKey)}}}else if(s===4){const g=m;t={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Fu(g.auth),p256dh:Fu(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Fu(g.vapidKey)}}}}}})).close(),await Km(nT),await Km("fcm_vapid_details_db"),await Km("undefined"),SK(t)?t:null}function SK(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const bK="firebase-messaging-database",AK=1,Sd="firebase-messaging-store";let iT=null;function d4(){return iT||(iT=Dp(bK,AK,{upgrade:(n,t)=>{t===0&&n.createObjectStore(Sd)}})),iT}async function m4(n){const t=g4(n),i=await(await d4()).transaction(Sd).objectStore(Sd).get(t);if(i)return i;{const s=await TK(n.appConfig.senderId);if(s)return await p4(n,s),s}}async function p4(n,t){const e=g4(n),s=(await d4()).transaction(Sd,"readwrite");return await s.objectStore(Sd).put(t,e),await s.done,t}async function wK(n){const t=g4(n),i=(await d4()).transaction(Sd,"readwrite");await i.objectStore(Sd).delete(t),await i.done}function g4({appConfig:n}){return n.appId}const RK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},$l=new su("messaging","Messaging",RK);async function CK(n,t){const e=await y4(n),i=OI(t),s={method:"POST",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(_4(n.appConfig),s)).json()}catch(c){throw $l.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw $l.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw $l.create("token-subscribe-no-token");return o.token}async function IK(n,t){const e=await y4(n),i=OI(t.subscriptionOptions),s={method:"PATCH",headers:e,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${_4(n.appConfig)}/${t.token}`,s)).json()}catch(c){throw $l.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw $l.create("token-update-failed",{errorInfo:c})}if(!o.token)throw $l.create("token-update-no-token");return o.token}async function xI(n,t){const i={method:"DELETE",headers:await y4(n)};try{const o=await(await fetch(`${_4(n.appConfig)}/${t}`,i)).json();if(o.error){const c=o.error.message;throw $l.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw $l.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function _4({projectId:n}){return`${pK}/projects/${n}/registrations`}async function y4({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function OI({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const s={web:{endpoint:e,auth:t,p256dh:n}};return i!==NI&&(s.web.applicationPubKey=i),s}const NK=10080*60*1e3;async function DK(n){const t=await OK(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:Fu(t.getKey("auth")),p256dh:Fu(t.getKey("p256dh"))},i=await m4(n.firebaseDependencies);if(i){if(MK(i.subscriptionOptions,e))return Date.now()>=i.createTime+NK?xK(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await xI(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return D6(n.firebaseDependencies,e)}else return D6(n.firebaseDependencies,e)}async function N6(n){const t=await m4(n.firebaseDependencies);t&&(await xI(n.firebaseDependencies,t.token),await wK(n.firebaseDependencies));const e=await n.swRegistration.pushManager.getSubscription();return e?e.unsubscribe():!0}async function xK(n,t){try{const e=await IK(n.firebaseDependencies,t),i={...t,token:e,createTime:Date.now()};return await p4(n.firebaseDependencies,i),e}catch(e){throw e}}async function D6(n,t){const i={token:await CK(n,t),createTime:Date.now(),subscriptionOptions:t};return await p4(n,i),i.token}async function OK(n,t){const e=await n.pushManager.getSubscription();return e||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vK(t)})}function MK(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,s=t.auth===n.auth,o=t.p256dh===n.p256dh;return e&&i&&s&&o}function PK(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return VK(t,n),kK(t,n),LK(t,n),t}function VK(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const s=t.notification.image;s&&(n.notification.image=s);const o=t.notification.icon;o&&(n.notification.icon=o)}function kK(n,t){t.data&&(n.data=t.data)}function LK(n,t){if(!t.fcmOptions&&!t.notification?.click_action)return;n.fcmOptions={};const e=t.fcmOptions?.link??t.notification?.click_action;e&&(n.fcmOptions.link=e);const i=t.fcmOptions?.analytics_label;i&&(n.fcmOptions.analyticsLabel=i)}function UK(n){return typeof n=="object"&&!!n&&gK in n}function zK(n){return new Promise(t=>{setTimeout(t,n)})}async function BK(n,t){const e=GK(t,await n.firebaseDependencies.installations.getId());HK(n,e,t.productId)}function GK(n,t){const e={};return n.from&&(e.project_number=n.from),n.fcmMessageId&&(e.message_id=n.fcmMessageId),e.instance_id=t,n.notification?e.message_type=Dv.DISPLAY_NOTIFICATION.toString():e.message_type=Dv.DATA_MESSAGE.toString(),e.sdk_platform=_K.toString(),e.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(e.collapse_key=n.collapse_key),e.event=yK.toString(),n.fcmOptions?.analytics_label&&(e.analytics_label=n.fcmOptions?.analytics_label),e}function HK(n,t,e){const i={};i.event_time_ms=Math.floor(Date.now()).toString(),i.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),e&&(i.compliance_data=qK(e)),n.logEvents.push(i)}function qK(n){return{privacy_context:{prequest:{origin_associated_product_id:n}}}}async function FK(n,t){const{newSubscription:e}=n;if(!e){await N6(t);return}const i=await m4(t.firebaseDependencies);await N6(t),t.vapidKey=i?.subscriptionOptions?.vapidKey??NI,await DK(t)}async function jK(n,t){const e=QK(n);if(!e)return;t.deliveryMetricsExportedToBigQueryEnabled&&await BK(t,e);const i=await MI();if(JK(i))return WK(i,e);if(e.notification&&await ZK(YK(e)),!!t&&t.onBackgroundMessageHandler){const s=PK(e);typeof t.onBackgroundMessageHandler=="function"?await t.onBackgroundMessageHandler(s):t.onBackgroundMessageHandler.next(s)}}async function KK(n){const t=n.notification?.data?.[DI];if(t){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const e=$K(t);if(!e)return;const i=new URL(e,self.location.href),s=new URL(self.location.origin);if(i.host!==s.host)return;let o=await XK(i);if(o?o=await o.focus():(o=await self.clients.openWindow(e),await zK(3e3)),!!o)return t.messageType=xv.NOTIFICATION_CLICKED,t.isFirebaseMessaging=!0,o.postMessage(t)}function YK(n){const t={...n.notification};return t.data={[DI]:n},t}function QK({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function XK(n){const t=await MI();for(const e of t){const i=new URL(e.url,self.location.href);if(n.host===i.host)return e}return null}function JK(n){return n.some(t=>t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://"))}function WK(n,t){t.isFirebaseMessaging=!0,t.messageType=xv.PUSH_RECEIVED;for(const e of n)e.postMessage(t)}function MI(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function ZK(n){const{actions:t}=n,{maxActions:e}=Notification;return t&&e&&t.length>e&&console.warn(`This browser only supports ${e} actions. The remaining actions will not be displayed.`),self.registration.showNotification(n.title??"",n)}function $K(n){const t=n.fcmOptions?.link??n.notification?.click_action;return t||(UK(n.data)?self.location.origin:null)}function tY(n){if(!n||!n.options)throw sT("App Configuration Object");if(!n.name)throw sT("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const i of t)if(!e[i])throw sT(i);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}function sT(n){return $l.create("missing-app-config-values",{valueName:n})}class eY{constructor(t,e,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=tY(t);this.firebaseDependencies={app:t,appConfig:s,installations:e,analyticsProvider:i}}_delete(){return Promise.resolve()}}const nY=n=>{const t=new eY(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",e=>{e.waitUntil(jK(e,t))}),self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(FK(e,t))}),self.addEventListener("notificationclick",e=>{e.waitUntil(KK(e))}),t};function iY(){ba(new Bi("messaging-sw",nY,"PUBLIC"))}function sY(n,t){if(self.document!==void 0)throw $l.create("only-available-in-sw");return n.onBackgroundMessageHandler=t,()=>{n.onBackgroundMessageHandler=null}}function aY(n,t){return n=jt(n),sY(n,t)}iY();const rY="@firebase/messaging-compat",oY="0.2.23";function lY(){return self&&"ServiceWorkerGlobalScope"in self?cY():uY()}function uY(){return typeof window<"u"&&id()&&aM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function cY(){return id()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class x6{constructor(t,e){this.app=t,this._delegate=e,this.app=t,this._delegate=e}async getToken(t){return fK(this._delegate,t)}async deleteToken(){return dK(this._delegate)}onMessage(t){return mK(this._delegate,t)}onBackgroundMessage(t){return aY(this._delegate,t)}}const hY=n=>self&&"ServiceWorkerGlobalScope"in self?new x6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new x6(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),fY={isSupported:lY};function dY(){Eo.INTERNAL.registerComponent(new Bi("messaging-compat",hY,"PUBLIC").setServiceProps(fY))}dY();Eo.registerVersion(rY,oY);const mY="type.googleapis.com/google.protobuf.Int64Value",pY="type.googleapis.com/google.protobuf.UInt64Value";function PI(n,t){const e={};for(const i in n)n.hasOwnProperty(i)&&(e[i]=t(n[i]));return e}function Ov(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(t=>Ov(t));if(typeof n=="function"||typeof n=="object")return PI(n,t=>Ov(t));throw new Error("Data cannot be encoded in JSON: "+n)}function Cp(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case mY:case pY:{const t=Number(n.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+n);return t}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(t=>Cp(t)):typeof n=="function"||typeof n=="object"?PI(n,t=>Cp(t)):n}const VI="functions";const O6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ir extends zi{constructor(t,e,i){super(`${VI}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,ir.prototype)}}function gY(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Mv(n,t){let e=gY(n),i=e,s;try{const o=t&&t.error;if(o){const c=o.status;if(typeof c=="string"){if(!O6[c])return new ir("internal","internal");e=O6[c],i=c}const f=o.message;typeof f=="string"&&(i=f),s=o.details,s!==void 0&&(s=Cp(s))}}catch{}return e==="ok"?null:new ir(e,i,s)}class _Y{constructor(t,e,i,s){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Cn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:s}}}const M6="us-central1",yY=/^data: (.*?)(?:\n|$)/;function vY(n){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new ir("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{t&&clearTimeout(t)}}}let EY=class{constructor(t,e,i,s,o=M6,c=(...f)=>fetch(...f)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new _Y(t,e,i,s),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(o);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=M6}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}};function TY(n,t,e){const i=iu(t);n.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(Bv(n.emulatorOrigin+"/backends"),Gv("Functions",!0))}function SY(n,t,e){const i=s=>wY(n,t,s,e||{});return i.stream=(s,o)=>RY(n,t,s,o),i}function bY(n,t,e){const i=s=>UI(n,t,s,e||{});return i.stream=(s,o)=>zI(n,t,s,o||{}),i}function kI(n){return n.emulatorOrigin&&iu(n.emulatorOrigin)?"include":void 0}async function AY(n,t,e,i,s){e["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(t),headers:e,credentials:kI(s)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function LI(n,t){const e={},i=await n.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function wY(n,t,e,i){const s=n._url(t);return UI(n,s,e,i)}async function UI(n,t,e,i){e=Ov(e);const s={data:e},o=await LI(n,i),c=i.timeout||7e4,f=vY(c),m=await Promise.race([AY(t,s,o,n.fetchImpl,n),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new ir("cancelled","Firebase Functions instance was deleted.");const g=Mv(m.status,m.json);if(g)throw g;if(!m.json)throw new ir("internal","Response is not valid JSON object.");let E=m.json.data;if(typeof E>"u"&&(E=m.json.result),typeof E>"u")throw new ir("internal","Response is missing data field.");return{data:Cp(E)}}function RY(n,t,e,i){const s=n._url(t);return zI(n,s,e,i||{})}async function zI(n,t,e,i){e=Ov(e);const s={data:e},o=await LI(n,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await n.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:i?.signal,credentials:kI(n)})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const D=new ir("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const N=Mv(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let f,m;const g=new Promise((A,N)=>{f=A,m=N});i?.signal?.addEventListener("abort",()=>{const A=new ir("cancelled","Request was cancelled.");m(A)});const E=c.body.getReader(),b=CY(E,f,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const A=b.getReader();return{async next(){const{value:N,done:D}=await A.read();return{value:N,done:D}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:g}}function CY(n,t,e,i){const s=(c,f)=>{const m=c.match(yY);if(!m)return;const g=m[1];try{const E=JSON.parse(g);if("result"in E){t(Cp(E.result));return}if("message"in E){f.enqueue(Cp(E.message));return}if("error"in E){const b=Mv(0,E);f.error(b),e(b);return}}catch(E){if(E instanceof ir){f.error(E),e(E);return}}},o=new TextDecoder;return new ReadableStream({start(c){let f="";return m();async function m(){if(i?.aborted){const g=new ir("cancelled","Request was cancelled");return c.error(g),e(g),Promise.resolve()}try{const{value:g,done:E}=await n.read();if(E){f.trim()&&s(f.trim(),c),c.close();return}if(i?.aborted){const A=new ir("cancelled","Request was cancelled");c.error(A),e(A),await n.cancel();return}f+=o.decode(g,{stream:!0});const b=f.split(`
`);f=b.pop()||"";for(const A of b)A.trim()&&s(A.trim(),c);return m()}catch(g){const E=g instanceof ir?g:Mv(0,null);c.error(E),e(E)}}},cancel(){return n.cancel()}})}const P6="@firebase/functions",V6="0.13.1";const IY="auth-internal",NY="app-check-internal",DY="messaging-internal";function xY(n){const t=(e,{instanceIdentifier:i})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider(IY),c=e.getProvider(DY),f=e.getProvider(NY);return new EY(s,o,c,f,i)};ba(new Bi(VI,t,"PUBLIC").setMultipleInstances(!0)),Wi(P6,V6,n),Wi(P6,V6,"esm2020")}function k6(n,t,e){TY(jt(n),t,e)}function OY(n,t,e){return SY(jt(n),t,e)}function MY(n,t,e){return bY(jt(n),t,e)}xY();const PY="@firebase/functions-compat",VY="0.4.1";class BI{constructor(t,e){this.app=t,this._delegate=e,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(t,e){return OY(this._delegate,t,e)}httpsCallableFromURL(t,e){return MY(this._delegate,t,e)}useFunctionsEmulator(t){const e=t.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(e==null)throw new zi("functions","No origin provided to useFunctionsEmulator()");if(e[2]==null)throw new zi("functions","Port missing in origin provided to useFunctionsEmulator()");return k6(this._delegate,e[1],Number(e[2]))}useEmulator(t,e){return k6(this._delegate,t,e)}}const kY="us-central1",LY=(n,{instanceIdentifier:t})=>{const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("functions").getImmediate({identifier:t??kY});return new BI(e,i)};function UY(){const n={Functions:BI};Eo.INTERNAL.registerComponent(new Bi("functions-compat",LY,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}UY();Eo.registerVersion(PY,VY);const zY={apiKey:"AIzaSyCZ2yeJJ34VwYAmQnFCEv72Q1uDFFGKKjQ",authDomain:"ancb-painel-db.firebaseapp.com",projectId:"ancb-painel-db",storageBucket:"ancb-painel-db.appspot.com",messagingSenderId:"792900234002",appId:"1:792900234002:web:2a37004deb046cb8f261cb",measurementId:"G-VCMEKP1XP4"},Y_=Eo.initializeApp(zY),BY=Y_.firestore();Y_.auth();Y_.storage();Y_.functions();let GY=null;try{typeof window<"u"&&"serviceWorker"in navigator&&Eo.messaging.isSupported()&&(GY=Y_.messaging())}catch(n){console.warn("Firebase Messaging not supported in this environment",n)}const vh={courtHalf:"https://i.imgur.com/SIdCxjw.png",courtFull:"https://i.imgur.com/cw3dO3o.png",logo:"https://i.imgur.com/sfO9ILj.png",defaultAvatar:"https://ui-avatars.com/api/?background=0D8ABC&color=fff&rounded=true&bold=true&name="},HY=["#ff0000","#000000","#ffffff","#ffff00","#00ff00"],ep=.044,L6=()=>{const n=[1,2,3,4,5].map((i,s)=>({id:`rival-${i}`,type:"rival",numero:i,xRatio:ep,yRatio:.07+s*.09})),t=[1,2,3,4,5].map((i,s)=>({id:`generic-${i}`,type:"generic",numero:i,xRatio:ep,yRatio:.52+s*.09})),e={id:"ball-1",type:"ball",xRatio:ep,yRatio:.94};return[...n,...t,e]},qY=({token:n,canvasW:t,canvasH:e,onDragEnd:i,onSelect:s,isSelected:o})=>{const[c,f]=ce.useState(null),[m,g]=ce.useState("loading");ce.useEffect(()=>{if(n.type==="ball"){const rt=new window.Image;rt.crossOrigin="Anonymous",rt.src="https://i.imgur.com/r5lIlfO.png",rt.onload=()=>{f(rt),g("loaded")},rt.onerror=()=>g("error");return}if(n.type!=="ancb"){g("error");return}const W=new window.Image,mt=n.foto||`${vh.defaultAvatar}${n.nome}`;mt.startsWith("data:")?W.src=mt:(W.crossOrigin="Anonymous",W.src=`${mt}${mt.includes("?")?"&":"?"}t=${Date.now()}`),W.onload=()=>{W.width>0?(f(W),g("loaded")):g("error")},W.onerror=()=>g("error")},[n.foto,n.nome,n.type]);const E=n.xRatio*t,b=n.yRatio*e,A=22,N=n.type==="ball",D=n.type==="rival",k=n.type==="generic",U=D?"#ef4444":k?"#1e3a5f":"#062553",F=D?"#991b1b":k?"#0f1f33":"#041b3d",j=D||k||m!=="loaded",X=N?14:A;if(N){const W=X*2;return At.jsxs(jA,{draggable:!0,x:E,y:b,onDragEnd:mt=>i(n.id,mt.target.x()/t,mt.target.y()/e),onClick:mt=>{mt.cancelBubble=!0,s(n.id)},onTap:mt=>{mt.cancelBubble=!0,s(n.id)},children:[c&&At.jsx(ev,{image:c,width:W,height:W,x:-X,y:-X,listening:!1}),At.jsx(A1,{radius:X,fill:"transparent",stroke:o?"#F27405":"#041b3d",strokeWidth:o?4:3})]})}return At.jsxs(jA,{draggable:!0,x:E,y:b,onDragEnd:W=>i(n.id,W.target.x()/t,W.target.y()/e),onClick:W=>{W.cancelBubble=!0,s(n.id)},onTap:W=>{W.cancelBubble=!0,s(n.id)},children:[At.jsx(A1,{radius:A,fill:"black",opacity:.3,offsetX:-2,offsetY:-2}),j&&At.jsx(A1,{radius:A,fill:U}),!j&&c&&At.jsx(ev,{image:c,width:A*2,height:A*2,x:-A,y:-A,cornerRadius:A}),At.jsx(A1,{radius:A,stroke:o?"#F27405":F,strokeWidth:o?4:2,fillEnabled:!1}),j&&At.jsx(KA,{text:D||k?n.numero?.toString():n.nome?.charAt(0).toUpperCase(),fontSize:20,fontStyle:"bold",fill:"white",align:"center",verticalAlign:"middle",offsetX:6,offsetY:8,listening:!1}),n.type==="ancb"&&n.nome&&At.jsx(KA,{text:n.nome.split(" ")[0],y:A+5,fontSize:10,fill:"white",align:"center",width:80,offsetX:40,shadowColor:"black",shadowBlur:3,listening:!1})]})},FY=()=>{const n=ce.useRef(null),t=ce.useRef(null),e=ce.useRef(null),[i,s]=ce.useState({width:0,height:0}),[o,c]=ce.useState({lines:null,logo:null}),[f,m]=ce.useState([]),[g,E]=ce.useState(!1),[b,A]=ce.useState(null),[N,D]=ce.useState([{courtType:"half",tokens:L6(),lines:[]}]),[k,U]=ce.useState(0),F=N[k],j=F.tokens,X=F.lines,W=F.courtType,mt=i.height>i.width,[rt,V]=ce.useState("#ff0000"),[M,L]=ce.useState(!1),[H,G]=ce.useState(!1),[K,z]=ce.useState({top:0,right:0}),Kt=ce.useRef(null),Lt=ce.useRef(!1),[Z,Tt]=ce.useState(!1),[Et,Bt]=ce.useState(!1),[Qt,q]=ce.useState(""),[ut,It]=ce.useState([]);ce.useEffect(()=>{(async()=>{try{const le=(await I8(_b(BY,"jogadores"))).docs.map(ue=>({id:ue.id,...ue.data()}));m(le.sort((ue,je)=>ue.nome.localeCompare(je.nome)))}catch(qt){console.error(qt)}})();const Rt=localStorage.getItem("ancb_plays");if(Rt)try{It(JSON.parse(Rt))}catch{}},[]),ce.useEffect(()=>{const yt=new window.Image;yt.crossOrigin="Anonymous",yt.src=W==="half"?vh.courtHalf:vh.courtFull;const Rt=new window.Image;Rt.crossOrigin="Anonymous",Rt.src=vh.logo,Promise.all([new Promise(qt=>{yt.onload=qt,yt.onerror=qt}),new Promise(qt=>{Rt.onload=qt,Rt.onerror=qt})]).then(()=>c({lines:yt,logo:Rt}))},[W]),ce.useEffect(()=>{const yt=()=>{if(n.current){const Rt=n.current.offsetWidth,qt=n.current.offsetHeight,le=qt>Rt;s({width:le?Rt:Rt-72,height:le?qt-60:qt})}};return yt(),window.addEventListener("resize",yt),window.addEventListener("orientationchange",()=>setTimeout(yt,200)),()=>{window.removeEventListener("resize",yt),window.removeEventListener("orientationchange",yt)}},[]),ce.useEffect(()=>{const yt=()=>{H&&G(!1)};return document.addEventListener("mousedown",yt),()=>document.removeEventListener("mousedown",yt)},[H]);const zt=yt=>{D(Rt=>{const qt=[...Rt];return qt[k]={...qt[k],...yt},qt})},ee=yt=>{zt({courtType:yt});const Rt=new window.Image;Rt.crossOrigin="Anonymous",Rt.src=yt==="half"?vh.courtHalf:vh.courtFull,Rt.onload=()=>c(qt=>({...qt,lines:Rt}))},ae=yt=>{yt>=0&&yt<N.length&&(U(yt),A(null))},be=()=>{const yt=JSON.parse(JSON.stringify(j)),Rt={courtType:W,tokens:yt,lines:[]};D(qt=>{const le=[...qt,Rt];return U(le.length-1),le}),A(null)},vn=()=>{N.length<=1||confirm("Deseja apagar este frame?")&&D(yt=>{const Rt=yt.filter((le,ue)=>ue!==k),qt=Math.min(k,Rt.length-1);return U(qt),Rt})},ke=yt=>{const Rt=j.filter(li=>li.type==="ancb");if(Rt.some(li=>li.nome===yt.nome))return;const qt=Rt.length,le=qt+1,ue=.1,je=(le-1)*ue,gs=j.map(li=>{if(li.type!=="ancb")return li;const ar=Rt.findIndex(pn=>pn.id===li.id);return{...li,xRatio:.5-je/2+ar*ue,yRatio:.07}}),bo={id:`${yt.id}-${Date.now()}`,type:"ancb",nome:yt.nome,foto:yt.foto??null,xRatio:.5-je/2+qt*ue,yRatio:.07};zt({tokens:[...gs,bo]})},xr=(yt,Rt,qt)=>{const le=Math.max(.02,Math.min(.98,Rt)),ue=Math.max(.02,Math.min(.98,qt));zt({tokens:j.map(je=>je.id===yt?{...je,xRatio:le,yRatio:ue}:je)})},To=()=>{if(b){if(b.startsWith("rival-")){const yt=parseInt(b.split("-")[1]);zt({tokens:j.map(Rt=>Rt.id===b?{...Rt,xRatio:ep,yRatio:.07+(yt-1)*.09}:Rt)})}else if(b.startsWith("generic-")){const yt=parseInt(b.split("-")[1]);zt({tokens:j.map(Rt=>Rt.id===b?{...Rt,xRatio:ep,yRatio:.52+(yt-1)*.09}:Rt)})}else zt(b==="ball-1"?{tokens:j.map(yt=>yt.id==="ball-1"?{...yt,xRatio:ep,yRatio:.94}:yt)}:{tokens:j.filter(yt=>yt.id!==b)});A(null)}},ta=(yt,Rt)=>{for(const le of j){const ue=le.xRatio*en-yt,je=le.yRatio*wi-Rt;if(Math.sqrt(ue*ue+je*je)<=30)return le.id}return null},hs=yt=>{const Rt=yt.target.getStage?.()??yt.target;if(!Rt)return null;if(!mt)return Rt.getPointerPosition();const qt=yt.evt,le=qt.touches?.[0]?.clientX??qt.clientX,ue=qt.touches?.[0]?.clientY??qt.clientY,je=e.current;if(!je)return null;const gs=je.getBoundingClientRect(),bo=le-gs.left;return{x:ue-gs.top,y:wi-bo}},fs=yt=>{const Rt=hs(yt);if(!Rt)return;const qt=ta(Rt.x,Rt.y);if(Kt.current={tokenId:qt},Lt.current=!1,!qt){Lt.current=!0,L(!0);const le={tool:"pen",color:rt,pointRatios:[Rt.x/en,Rt.y/wi]};zt({lines:[...X,le]})}},wa=yt=>{if(!Lt.current||!M)return;const Rt=hs(yt);Rt&&D(qt=>{const le=[...qt],ue={...le[k]},je=[...ue.lines],gs={...je[je.length-1]};return gs.pointRatios=[...gs.pointRatios,Rt.x/en,Rt.y/wi],je[je.length-1]=gs,ue.lines=je,le[k]=ue,le})},Gi=()=>{L(!1),Kt.current=null,Lt.current=!1},ds=()=>zt({lines:X.slice(0,-1)}),So=()=>zt({lines:[]}),En=yt=>{if(yt.stopPropagation(),t.current){const Rt=t.current.getBoundingClientRect();z({top:Rt.top,right:window.innerWidth-Rt.left+8})}G(Rt=>!Rt)},rn=()=>{if(!Qt.trim())return alert("Digite um nome!");const Rt=[{id:Date.now().toString(),name:Qt,frames:N,createdAt:Date.now()},...ut];It(Rt),localStorage.setItem("ancb_plays",JSON.stringify(Rt)),Tt(!1),q(""),alert("Salvo!")},ea=yt=>{D(yt.frames),U(0),Bt(!1)},sr=()=>{if((N.length>1||N[0].lines.length>0||N[0].tokens.some(qt=>qt.type==="ancb"))&&window.confirm("Deseja salvar a jogada atual antes de comear uma nova?")){const le=window.prompt("Nome da jogada:");if(le?.trim()){const je=[{id:Date.now().toString(),name:le.trim(),frames:N,createdAt:Date.now()},...ut];It(je),localStorage.setItem("ancb_plays",JSON.stringify(je))}}const Rt=[{courtType:"half",tokens:L6(),lines:[]}];D(Rt),U(0),A(null)},Gn=(yt,Rt)=>{if(Rt.stopPropagation(),confirm("Apagar jogada?")){const qt=ut.filter(le=>le.id!==yt);It(qt),localStorage.setItem("ancb_plays",JSON.stringify(qt))}},en=mt?i.height:i.width,wi=mt?i.width:i.height;let ms=0,es=0,ns=0,Hi=0,ps={w:0,h:0,x:0,y:0};if(o.lines&&en>0){const yt=Math.min(en*.99/o.lines.width,wi*.99/o.lines.height);if(ms=o.lines.width*yt,es=o.lines.height*yt,ns=(en-ms)/2,Hi=(wi-es)/2,o.logo){const Rt=ms*.22/o.logo.width;ps={w:o.logo.width*Rt,h:o.logo.height*Rt,x:ns+(ms-o.logo.width*Rt)/2,y:Hi+(es-o.logo.height*Rt)/2}}}const au=X.map(yt=>({...yt,points:yt.pointRatios.reduce((Rt,qt,le)=>(Rt.push(le%2===0?qt*en:qt*wi),Rt),[])}));return At.jsxs("div",{className:"flex flex-col bg-slate-900 text-white font-sans",style:{userSelect:"none",WebkitUserSelect:"none",width:"100vw",height:"100vh",overflow:"hidden",maxWidth:"100vw",maxHeight:"100vh"},children:[At.jsxs("header",{className:"px-3 py-2 flex justify-between items-center bg-[#062553] border-b-4 border-[#041b3d] shadow-lg shrink-0 z-20",style:{height:56},children:[At.jsxs("div",{className:"flex items-center gap-2",children:[At.jsx("img",{src:vh.logo,alt:"Logo",className:"w-9 h-9 object-contain drop-shadow-md"}),At.jsxs("div",{children:[At.jsx("h1",{className:"font-bold text-sm leading-tight",children:"Prancheta ANCB"}),At.jsx("p",{className:"text-[10px] text-gray-300",children:"Modo Offline"})]})]}),At.jsxs("div",{className:"flex items-center gap-2",children:[At.jsxs("button",{onClick:sr,className:"bg-slate-600 hover:bg-slate-500 px-2.5 py-1.5 rounded-lg text-white font-bold text-xs flex items-center gap-1 transition-colors",title:"Nova jogada",children:[At.jsx(XA,{size:15}),At.jsx("span",{className:"hidden sm:inline",children:"Nova"})]}),At.jsxs("button",{onClick:()=>Bt(!0),className:"bg-slate-700 hover:bg-slate-600 px-2.5 py-1.5 rounded-lg text-white font-bold text-xs flex items-center gap-1 transition-colors",children:[At.jsx(QA,{size:15}),At.jsx("span",{children:"Jogadas"})]}),At.jsxs("button",{onClick:()=>Tt(!0),className:"bg-green-600 hover:bg-green-700 px-2.5 py-1.5 rounded-lg text-white font-bold text-xs flex items-center gap-1 shadow-lg transition-colors",children:[At.jsx(JA,{size:15}),At.jsx("span",{children:"Salvar"})]}),b&&At.jsx("button",{onClick:To,className:"bg-red-600 p-1.5 rounded-lg text-white shadow animate-pulse",children:At.jsx(CE,{size:16})}),At.jsx("button",{onClick:()=>E(!0),className:"bg-[#F27405] hover:bg-orange-600 text-white px-2.5 py-1.5 rounded-lg font-bold flex items-center gap-1",children:At.jsx(WA,{size:16})})]})]}),At.jsxs("main",{className:"flex-1 w-full relative bg-slate-800 overflow-hidden",ref:n,style:{display:"flex",flexDirection:mt?"column":"row"},children:[At.jsx("div",{className:"flex-1 relative overflow-hidden",ref:e,children:i.width>0&&At.jsx(CO,{width:en,height:wi,onMouseDown:fs,onMousemove:wa,onMouseup:Gi,onTouchStart:fs,onTouchMove:wa,onTouchEnd:Gi,style:{cursor:"crosshair",touchAction:"none",display:"block",...mt?{transformOrigin:"top left",transform:"rotate(90deg) translateY(-100%)",position:"absolute",top:0,left:0}:{}},onClick:yt=>{yt.target===yt.target.getStage()&&A(null)},children:At.jsxs(AO,{children:[At.jsx(wO,{x:ns,y:Hi,width:ms,height:es,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:ms,y:es},fillLinearGradientColorStops:[0,"#2574d1",1,"#1c64b6"],cornerRadius:5}),o.logo&&At.jsx(ev,{image:o.logo,width:ps.w,height:ps.h,x:ps.x,y:ps.y,opacity:.3,listening:!1}),o.lines&&At.jsx(ev,{image:o.lines,width:ms,height:es,x:ns,y:Hi,listening:!1}),au.map((yt,Rt)=>At.jsx(RO,{points:yt.points,stroke:yt.color,strokeWidth:4,tension:.5,lineCap:"round",lineJoin:"round",opacity:.9,listening:!1},Rt)),j.map(yt=>At.jsx(qY,{token:yt,canvasW:en,canvasH:wi,onDragEnd:xr,onSelect:A,isSelected:b===yt.id},yt.id))]})})}),At.jsxs("div",{className:"bg-gray-900 z-30 shrink-0 flex items-center gap-2",style:mt?{flexDirection:"row",width:"100%",height:60,borderTop:"1px solid #374151",paddingLeft:8,paddingRight:8,overflowX:"auto"}:{flexDirection:"column",width:72,height:"100%",borderLeft:"1px solid #374151",paddingTop:12,paddingBottom:12,overflowY:"auto"},children:[At.jsx("button",{ref:t,onClick:En,className:"p-2.5 rounded-xl bg-gray-700 hover:bg-gray-600 shadow-lg transition-all shrink-0",title:"Cor da caneta",children:At.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white",style:{backgroundColor:rt}})}),At.jsx("button",{onClick:ds,className:"p-2.5 rounded-xl text-gray-400 hover:bg-gray-800 shrink-0",title:"Desfazer",children:At.jsx(BO,{size:20})}),At.jsx("button",{onClick:So,className:"p-2.5 rounded-xl text-gray-400 hover:text-red-500 shrink-0",title:"Limpar",children:At.jsx(PO,{size:20})}),At.jsxs("div",{className:`flex gap-1 items-center shrink-0 ${mt?"flex-row":"flex-col w-full px-2"}`,children:[At.jsx("button",{onClick:()=>ee("half"),className:`text-[9px] font-bold py-1 px-2 rounded transition-all ${W==="half"?"bg-[#F27405] text-white":"bg-gray-700 text-gray-300"}`,children:"1/2"}),At.jsx("button",{onClick:()=>ee("full"),className:`text-[9px] font-bold py-1 px-2 rounded transition-all ${W==="full"?"bg-[#F27405] text-white":"bg-gray-700 text-gray-300"}`,children:"Full"})]}),At.jsx("div",{className:mt?"w-px h-8 bg-gray-700 mx-1 shrink-0":"h-px w-10 bg-gray-700 shrink-0"}),At.jsx("div",{className:"flex gap-2 items-center",style:mt?{flexDirection:"row",overflowX:"auto",maxWidth:200}:{flexDirection:"column",overflowY:"auto",maxHeight:"40vh",width:"100%",padding:"0 8px"},children:N.map((yt,Rt)=>At.jsxs("button",{onClick:()=>ae(Rt),className:`relative rounded-lg font-bold text-xs flex flex-col items-center justify-center transition-all border-2 shrink-0
                  ${Rt===k?"bg-[#F27405] border-[#F27405] text-white shadow-lg":"bg-white/10 border-transparent text-gray-300 hover:bg-white/20"}`,style:{width:40,height:40},children:[At.jsx("span",{children:Rt+1}),At.jsx("span",{className:"text-[7px] opacity-70",children:yt.courtType==="half"?"1/2":"Full"}),yt.lines.length>0&&At.jsx("div",{className:"absolute bottom-0.5 w-1 h-1 bg-white rounded-full opacity-50"})]},Rt))}),At.jsx("button",{onClick:be,className:"bg-blue-600 hover:bg-blue-500 p-2.5 rounded-full text-white shadow-md transition-transform active:scale-95 shrink-0",title:"Novo Frame",children:At.jsx(XA,{size:20})}),N.length>1&&At.jsx("button",{onClick:vn,className:"text-red-400 hover:text-red-300 hover:bg-white/10 p-1.5 rounded-lg transition-colors shrink-0",title:"Apagar frame",children:At.jsx(CE,{size:17})})]})]}),H&&At.jsx("div",{className:"fixed flex flex-col gap-2 bg-gray-800 p-3 rounded-2xl shadow-2xl border border-gray-600",style:{top:K.top,right:K.right,zIndex:9999},onMouseDown:yt=>yt.stopPropagation(),children:HY.map(yt=>At.jsx("button",{onClick:()=>{V(yt),G(!1)},className:"w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 active:scale-95",style:{backgroundColor:yt,borderColor:rt===yt?"#F27405":"rgba(255,255,255,0.2)",boxShadow:rt===yt?"0 0 0 2px #F27405":"none"}},yt))}),Z&&At.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:At.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-sm shadow-2xl border border-gray-700",children:[At.jsxs("h3",{className:"text-xl font-bold mb-4 text-white flex items-center gap-2",children:[At.jsx(JA,{size:20,className:"text-green-500"})," Salvar Jogada"]}),At.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nome da jogada",className:"w-full p-3 rounded-lg bg-gray-700 border border-gray-600 text-white mb-4 outline-none focus:ring-2 focus:ring-[#F27405]",value:Qt,onChange:yt=>q(yt.target.value),onKeyDown:yt=>yt.key==="Enter"&&rn()}),At.jsxs("div",{className:"flex gap-2 justify-end",children:[At.jsx("button",{onClick:()=>Tt(!1),className:"px-4 py-2 text-gray-400 hover:text-gray-200",children:"Cancelar"}),At.jsx("button",{onClick:rn,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold",children:"Salvar"})]})]})}),Et&&At.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:At.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md shadow-2xl border border-gray-700 flex flex-col",style:{maxHeight:"80vh"},children:[At.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[At.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[At.jsx(QA,{size:20,className:"text-[#F27405]"})," Minhas Jogadas"]}),At.jsx("button",{onClick:()=>Bt(!1),className:"text-gray-400 hover:text-white",children:At.jsx(ZA,{size:24})})]}),At.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:ut.length===0?At.jsx("p",{className:"text-center py-8 text-gray-500",children:"Nenhuma jogada salva."}):At.jsx("div",{className:"space-y-2",children:ut.map(yt=>At.jsxs("div",{onClick:()=>ea(yt),className:"bg-gray-700/50 hover:bg-gray-700 p-3 rounded-lg cursor-pointer border border-transparent hover:border-[#F27405] transition-all group flex justify-between items-center text-white",children:[At.jsxs("div",{children:[At.jsx("p",{className:"font-bold",children:yt.name}),At.jsxs("p",{className:"text-xs text-gray-400",children:[yt.frames.length," frame",yt.frames.length>1?"s":""]})]}),At.jsx("button",{onClick:Rt=>Gn(yt.id,Rt),className:"p-2 text-gray-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:At.jsx(CE,{size:18})})]},yt.id))})})]})}),g&&At.jsxs(At.Fragment,{children:[At.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>E(!1)}),At.jsxs("div",{className:"fixed top-0 right-0 h-full bg-gray-900 shadow-2xl z-50 flex flex-col border-l border-gray-700",style:{width:280},children:[At.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-[#062553]",children:[At.jsxs("h2",{className:"font-bold text-white text-base flex items-center gap-2",children:[At.jsx(WA,{size:18,className:"text-[#F27405]"})," Elenco ANCB"]}),At.jsx("button",{onClick:()=>E(!1),className:"text-gray-300 hover:text-white",children:At.jsx(ZA,{size:22})})]}),At.jsx("p",{className:"text-xs text-gray-400 px-4 pt-3 pb-1",children:"Toque para adicionar. Feche quando terminar."}),At.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:At.jsx("div",{className:"grid gap-1",children:f.map(yt=>{const Rt=j.some(qt=>qt.type==="ancb"&&qt.nome===yt.nome);return At.jsxs("button",{onClick:()=>ke(yt),disabled:Rt,className:`flex items-center gap-3 p-2 rounded-lg transition-colors text-left w-full ${Rt?"opacity-40":"hover:bg-gray-800"}`,children:[At.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden border-2 border-[#062553] bg-gray-700 shrink-0",children:At.jsx("img",{src:yt.foto||`${vh.defaultAvatar}${yt.nome}`,alt:yt.nome,className:"w-full h-full object-cover"})}),At.jsxs("div",{children:[At.jsx("p",{className:"font-bold text-sm text-white",children:yt.nome}),Rt&&At.jsx("p",{className:"text-[10px] text-green-400",children:" Na quadra"})]})]},yt.id)})})})]})]})]})};N7.createRoot(document.getElementById("root")).render(At.jsx(ce.StrictMode,{children:At.jsx(FY,{})}));
